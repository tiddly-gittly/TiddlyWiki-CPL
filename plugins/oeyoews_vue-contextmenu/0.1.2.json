{"title":"$:/plugins/oeyoews/vue-contextmenu","description":"TiddlyWiki contextmenu plugin by Vue3","author":"oeyoews","version":"0.1.2","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"vue-contextmenu","meat#disabled":"yes","qrcode":"yes","created":"20240319","dependents":"$:/plugins/oeyoews/neotw-vue3 $:/plugins/oeyoews/tiddlywiki-tailwindcss-plus $:/plugins/oeyoews/vue-context-menu $:/plugins/oeyoews/vue-i18n $:/plugins/oeyoews/tiddlywiki-tailwindcss-plus $:/plugins/oeyoews/element-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/vue-contextmenu/templates/app.vue\":{\"text\":\"<template>\\n\\t<el-dialog v-model=\\\"dialogVisible\\\" :title=\\\"t('tags')\\\" width=\\\"500\\\" destroy-on-close>\\n\\t\\t<el-select ref=\\\"selectRef\\\" v-model=\\\"tags\\\" multiple filterable allow-create default-first-option\\n\\t\\t\\t:reserve-keyword=\\\"false\\\" :placeholder=\\\"t('tags')\\\" style=\\\"width: 100%\\\">\\n\\t\\t\\t<template #label=\\\"{ label, value }\\\">\\n\\t\\t\\t\\t<div style=\\\"display: flex; align-items: center\\\">\\n\\t\\t\\t\\t\\t<span v-html=\\\"tagIcon\\\"></span>\\n\\t\\t\\t\\t\\t<span style=\\\"margin-left: 4px;\\\">{{ value }}</span>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</template>\\n\\t\\t\\t<el-option v-for=\\\"item in allTags\\\" :key=\\\"item\\\" :label=\\\"item\\\" :value=\\\"item\\\" />\\n\\t\\t</el-select>\\n\\n\\t\\t<template #footer>\\n\\t\\t\\t<div class=\\\"dialog-footer\\\">\\n\\t\\t\\t\\t<el-button @click=\\\"dialogVisible = false\\\">Cancel</el-button>\\n\\t\\t\\t\\t<el-button type=\\\"primary\\\" @click=\\\"handleConfirm\\\">\\n\\t\\t\\t\\t\\tConfirm\\n\\t\\t\\t\\t</el-button>\\n\\t\\t\\t</div>\\n\\t\\t</template>\\n\\t</el-dialog>\\n\\n</template>\",\"title\":\"$:/plugins/oeyoews/vue-contextmenu/templates/app.vue\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/vue-contextmenu/templates/global-app.vue\":{\"text\":\"<template>\\n\\t<!-- drag  -->\\n\\t<button\\n\\t\\tclass=\\\"fixed p-2 shadow-xs bg-gray-100 dark:bg-dimmed-700 rounded-full flex items-center hover:scale-105 z-10 opacity-50 hover:opacity-100\\\"\\n\\t\\t@click=\\\"onContextMenu\\\" v-html=\\\"icons.setting\\\" title=\\\"Setting\\\"\\n\\t\\t:style=\\\"{ top: buttonY + 'px', left: buttonX + 'px' }\\\" @mousedown=\\\"startDrag\\\"> </button>\\n</template>\",\"title\":\"$:/plugins/oeyoews/vue-contextmenu/templates/global-app.vue\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/vue-contextmenu/i18n/en.js\":{\"text\":\"module.exports = {\\n  menu: {\\n    tags: 'tags',\\n    newWindow: 'New Window',\\n    clone: 'Clone Tiddler',\\n    rename: 'Rename Tiddler',\\n    close: 'Close Tiddler',\\n    edit: 'Edit Tiddler',\\n    delete: 'Delete Tiddler',\\n    close2: 'Close Others',\\n    copy0: 'Copy',\\n    copy: 'Copy Title',\\n    copy2: 'Copy Tiddler',\\n    fold: 'Fold Tiddler',\\n    permalink: 'Copy Link',\\n  },\\n  ball: {\\n    setting: 'Setting',\\n  },\\n};\\n\",\"title\":\"$:/plugins/oeyoews/vue-contextmenu/i18n/en.js\",\"module-type\":\"library\",\"type\":\"application/javascript\"},\"$:/plugins/oeyoews/vue-contextmenu/i18n/zh.js\":{\"text\":\"module.exports = {\\n  menu: {\\n    tags: '标签',\\n    newWindow: '新窗口',\\n    clone: '克隆',\\n    rename: '重命名',\\n    close: '关闭',\\n    edit: '编辑',\\n    delete: '删除',\\n    close2: '关闭其他',\\n    copy0: '复制',\\n    copy: '复制标题',\\n    copy2: '复制内容',\\n    fold: '折叠',\\n    permalink: '复制链接',\\n  },\\n  ball: {\\n    setting: '设置',\\n  },\\n};\\n\",\"title\":\"$:/plugins/oeyoews/vue-contextmenu/i18n/zh.js\",\"module-type\":\"library\",\"type\":\"application/javascript\"},\"$:/plugins/oeyoews/vue-contextmenu/plugins/TiddlyWikiVue.js\":{\"text\":\"module.exports = {\\n  install(app, options) {\\n    app.component('TiddlyWikiVue', {\\n      template: `<button> {{ msg }} </button>`,\\n      props: {\\n        msg: String\\n      }\\n    });\\n  }\\n};\\n\",\"title\":\"$:/plugins/oeyoews/vue-contextmenu/plugins/TiddlyWikiVue.js\",\"module-type\":\"library\",\"type\":\"application/javascript\"},\"$:/plugins/oeyoews/vue-contextmenu/components/Icon.js\":{\"text\":\"module.exports = {\\n  name: 'Icon',\\n  props: {\\n    icon: {\\n      type: String\\n    }\\n  },\\n  template: `<div class=\\\"flex items-center\\\" v-html=\\\"icon\\\"></div>`\\n};\\n\",\"title\":\"$:/plugins/oeyoews/vue-contextmenu/components/Icon.js\",\"module-type\":\"library\",\"type\":\"application/javascript\"},\"$:/plugins/oeyoews/vue-contextmenu/components/Version.js\":{\"text\":\"module.exports = {\\n  name: 'Version',\\n  props: {\\n    version: {\\n      type: String,\\n      default: '5.3.2'\\n    }\\n  },\\n  template: `<span> {{ version }} </span>`\\n};\\n\",\"title\":\"$:/plugins/oeyoews/vue-contextmenu/components/Version.js\",\"module-type\":\"library\",\"type\":\"application/javascript\"},\"$:/plugins/oeyoews/vue-contextmenu/readme\":{\"title\":\"$:/plugins/oeyoews/vue-contextmenu/readme\",\"description\":\"TiddlyWiki 的右键菜单插件\",\"text\":\"<!-- plugin template readme -->\\n\\n- [ ] 添加切换语言按钮， 跟随tw 语言或者浏览器语言(i18n 语言已完成)\\n\\n\\n<!-- !! Motivation -->\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\"},\"$:/plugins/oeyoews/vue-contextmenu/app.js\":{\"title\":\"$:/plugins/oeyoews/vue-contextmenu/app.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-contextmenu/app.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\n\\nconst { h, ref, reactive } = window.Vue;\\n\\nconst { ElMessage } = require('element-plus.min.js');\\nconst getTemplate = require('$:/plugins/oeyoews/neotw-vue3/getTemplate.js');\\n// const allTags = Object.keys($tw.wiki.getTagMap()).filter(\\n//   (t) => !t.startsWith('$:/'),\\n// );\\nconst allTags = $tw.wiki.filterTiddlers('[tags[]!prefix[$:/]]');\\n\\nconst Icon = require('./components/Icon');\\nconst icons = require('./icons');\\n\\nconst { useI18n } = require('vue-i18n.global.prod.js');\\n\\nconst palette = $tw.wiki.getTiddlerText('$:/palette');\\nconst isDarkMode =\\n  $tw.wiki.getTiddler(palette)?.fields['color-scheme'] === 'dark'\\n    ? true\\n    : false;\\n\\n/**\\n * @param {keyof import('./icons')} icon\\n */\\nconst getIcon = (icon) => {\\n  return h(Icon, {\\n    icon: icons[icon],\\n  });\\n};\\n\\n/** vue app */\\nconst app = (target, title, self) => {\\n  const component = {\\n    setup() {\\n      const { t } = useI18n();\\n      const dialogVisible = ref(false);\\n      const tags = ref([]);\\n      const inputVisible = ref(false);\\n      const newTag = ref(null);\\n      return {\\n        t,\\n        dialogVisible,\\n        tags,\\n        inputVisible,\\n        newTag,\\n        allTags,\\n        tagIcon: icons['tags'],\\n      };\\n    },\\n\\n    watch: {\\n      tags(newVal) {\\n        if (newVal) {\\n          this.$nextTick(() => {\\n            this.$refs['selectRef'].blur();\\n          });\\n        }\\n      },\\n    },\\n\\n    mounted() {\\n      target.addEventListener('contextmenu', (e) => {\\n        if (e.ctrlKey) {\\n          this.onContextMenu(e);\\n        }\\n      });\\n    },\\n    methods: {\\n      handleConfirm() {\\n        this.dialogVisible = false;\\n        $tw.wiki.setText(title, 'tags', null, this.tags);\\n        ElMessage({\\n          type: 'success',\\n          message: 'Tags updated',\\n        });\\n      },\\n      getTags(title) {\\n        if (!title) {\\n          console.error(\\\"title can't be empty\\\");\\n          return;\\n        }\\n        const tiddler = $tw.wiki.getTiddler(title).fields.tags;\\n        let tags = tiddler ? tiddler : []; // 使用逗号分隔， 不考虑tag 本身包含逗号的情况\\n        return tags;\\n      },\\n      operation(type, param, callback) {\\n        self.dispatchEvent({\\n          type,\\n          param,\\n        });\\n        typeof callback === 'function' && callback();\\n      },\\n\\n      getStoryList() {\\n        return $tw.wiki.getTiddlerList('$:/StoryList');\\n      },\\n\\n      onContextMenu(e) {\\n        const t = this.t;\\n        e.preventDefault(); //prevent the browser's default menu\\n        const o = this.operation;\\n\\n        const items = [\\n          {\\n            label: t('menu.close'),\\n            icon: getIcon('close'),\\n            onClick: () => o('tm-close-tiddler', title),\\n          },\\n          {\\n            label: t('menu.edit'),\\n            icon: getIcon('edit'),\\n            onClick: () => o('tm-edit-tiddler', title),\\n          },\\n          {\\n            label: t('menu.tags'),\\n            icon: getIcon('tags'),\\n            onClick: () => {\\n              this.tags = this.getTags(title);\\n              this.dialogVisible = true;\\n              this.$nextTick(() => {\\n                const selectRef = this.$refs['selectRef'];\\n                setTimeout(() => {\\n                  selectRef.focus();\\n                }, 0);\\n              });\\n              return;\\n              // let tags = this.getTags(title);\\n              const tiddler = $tw.wiki.getTiddler(title).fields.tags;\\n              let tags = tiddler ? tiddler.join(' ') : []; // 使用逗号分隔， 不考虑tag 本身包含逗号的情况\\n              const newtags = window.prompt('Tags:', tags);\\n              if (newtags) {\\n                console.log(newtags.split(' ').filter(Boolean));\\n                $tw.wiki.setText(\\n                  title,\\n                  'tags',\\n                  null,\\n                  newtags.split(' ').filter(Boolean),\\n                );\\n              }\\n            },\\n          },\\n          // TODO: 动态插入, 要保证顺序\\n          {\\n            label: t('menu.close2'),\\n            icon: getIcon('close2'),\\n            disabled: this.getStoryList().length === 1 ? true : false,\\n            onClick: () =>\\n              o('tm-close-other-tiddlers', title, () => {\\n                ElMessage({\\n                  type: 'success',\\n                  message: 'Close other tiddlers successfully',\\n                });\\n              }),\\n            divided: true,\\n          },\\n          {\\n            label: t('menu.copy0'),\\n            icon: getIcon('copy'),\\n            onSubMenuOpen: () => {\\n              // console.log('open');\\n            },\\n            children: [\\n              {\\n                label: t('menu.copy'),\\n                icon: h(Icon, { icon: icons.copy }),\\n                onClick: () => {\\n                  $tw.utils.copyToClipboard(title, {\\n                    doNotNotify: true,\\n                  });\\n                  ElMessage({\\n                    type: 'success',\\n                    message: 'Copy tiddler title successfully',\\n                  });\\n                },\\n              },\\n              {\\n                label: t('menu.copy2'),\\n                icon: getIcon('copy2'),\\n                onClick: () => {\\n                  const text = $tw.wiki.getTiddlerText(title);\\n                  $tw.utils.copyToClipboard(text, {\\n                    doNotNotify: true,\\n                  });\\n                  ElMessage({\\n                    type: 'success',\\n                    message: 'Copy tiddler text successfully',\\n                  });\\n                },\\n              },\\n            ],\\n          },\\n          {\\n            label: t('menu.fold'),\\n            icon: getIcon('fold'),\\n            onClick: () => {\\n              const foldPrefix = '$:/state/folded/';\\n              $tw.wiki.setText(foldPrefix + title, 'text', null, 'hide');\\n              ElMessage({ type: 'success', message: 'Fold successfully' });\\n            },\\n          },\\n          {\\n            label: t('menu.delete'),\\n            icon: getIcon('delete'),\\n            onClick: () =>\\n              o('tm-delete-tiddler', title, () => {\\n                // ElMessage({\\n                //   type: 'success',\\n                //   message: 'Delete successfully',\\n                // });\\n              }),\\n          },\\n          {\\n            label: t('menu.newWindow'),\\n            icon: getIcon('newWindow'),\\n            onClick: () => o('tm-open-window', title),\\n          },\\n          {\\n            label: t('menu.rename'),\\n            icon: getIcon('rename'),\\n            disabled: window.hasOwnProperty('electronAPIs'),\\n            // TODO: electron not support prompt, use element ui instead of it\\n            onClick: async () => {\\n              const to = window.prompt('Rename to:', title);\\n              // const to = await $tw.showDialog('prompt', 'rename', title);\\n              if (to && to !== title) {\\n                // o('tm-rename-tiddler', title, '99');\\n                $tw.wiki.renameTiddler(title, to);\\n                ElMessage({ type: 'success', message: `Rename successfully` });\\n              } else {\\n                ElMessage({\\n                  type: 'info',\\n                  message: 'Rename canceled',\\n                });\\n              }\\n            },\\n          },\\n          {\\n            label: t('menu.clone'),\\n            icon: getIcon('clone'),\\n            onClick: () => o('tm-new-tiddler', title),\\n          },\\n          {\\n            label: t('menu.permalink'),\\n            icon: getIcon('link'),\\n            onClick: () =>\\n              o('tm-permalink', title, () => {\\n                // ElMessage({\\n                //   type: 'success',\\n                //   message: 'Copy permalink successfully',\\n                // });\\n              }),\\n          },\\n        ];\\n\\n        //show menu\\n        this.$contextmenu({\\n          items,\\n          customClass: 'rounded-md',\\n          zIndex: 3,\\n          minWidth: 230,\\n          theme: isDarkMode ? 'dark' : '',\\n          x: e.x,\\n          y: e.y,\\n        });\\n      },\\n    },\\n\\n    template: getTemplate(\\n      '$:/plugins/oeyoews/vue-contextmenu/templates/app.vue',\\n    ),\\n\\n    components: {\\n      Icon,\\n    },\\n  };\\n  return component;\\n};\\n\\nmodule.exports = app;\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/vue-contextmenu/global-app.js\":{\"title\":\"$:/plugins/oeyoews/vue-contextmenu/global-app.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-contextmenu/global-app.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\n\\nconst { h, ref } = window.Vue;\\n\\nconst getTemplate = require('$:/plugins/oeyoews/neotw-vue3/getTemplate.js');\\n\\nconst Icon = require('./components/Icon');\\nconst icons = require('./icons');\\n\\nconst { useI18n } = require('vue-i18n.global.prod.js');\\nconst configTiddler = '$:/config/oeyoews/contextmenu/position';\\nconst { X = 700, Y = 740 } = $tw.wiki.getTiddlerData(configTiddler) || {};\\n\\n/** vue app */\\nconst app = (self) => {\\n  const component = {\\n    setup() {\\n      const { t } = useI18n();\\n      const startX = ref(0);\\n      const startY = ref(0);\\n      const buttonX = ref(X);\\n      const buttonY = ref(Y);\\n      const isDragging = ref(false);\\n\\n      return {\\n        t,\\n        icons,\\n        startX,\\n        startY,\\n        buttonX,\\n        buttonY,\\n        isDragging\\n      };\\n    },\\n\\n    methods: {\\n      startDrag(event) {\\n        this.isDragging = true;\\n        // 初始位置\\n        this.startX = event.clientX - this.buttonX;\\n        this.startY = event.clientY - this.buttonY;\\n        document.addEventListener('mousemove', this.drag);\\n        document.addEventListener('mouseup', this.stopDrag);\\n      },\\n      drag(event) {\\n        if (this.isDragging) {\\n          // 最终位置\\n          const width = window.innerWidth;\\n          const height = window.innerHeight;\\n\\n          const x = event.clientX - this.startX;\\n          const y = event.clientY - this.startY;\\n          if (x < 0 || x > width || y < 0 || y > height) return;\\n\\n          this.buttonX = x;\\n          this.buttonY = y;\\n\\n          $tw.wiki.setTiddlerData(configTiddler, {\\n            X: this.buttonX,\\n            Y: this.buttonY\\n          });\\n        }\\n      },\\n      stopDrag(e) {\\n        e.preventDefault();\\n        this.isDragging = false;\\n        document.removeEventListener('mousemove', this.drag);\\n        document.removeEventListener('mouseup', this.stopDrag);\\n      },\\n\\n      operation(type, param) {\\n        self.dispatchEvent({\\n          type,\\n          param\\n        });\\n      },\\n\\n      getStoryList() {\\n        return $tw.wiki.getTiddlerList('$:/StoryList');\\n      },\\n\\n      onContextMenu(e) {\\n        const t = this.t;\\n        e.preventDefault(); //prevent the browser's default menu\\n        const o = this.operation;\\n\\n        const items = [\\n          // home\\n          // language\\n          {\\n            label: t('ball.setting'),\\n            icon: h(Icon, { icon: icons.setting }),\\n            onClick: () => {\\n              self.dispatchEvent({\\n                type: 'tm-navigate',\\n                navigateTo: '$:/ControlPanel'\\n              });\\n            }\\n          }\\n        ];\\n\\n        //show menu\\n        this.$contextmenu({\\n          items,\\n          customClass: 'rounded-md',\\n          zIndex: 20,\\n          minWidth: 230,\\n          x: e.x,\\n          y: e.y\\n        });\\n      }\\n    },\\n\\n    template: getTemplate(\\n      '$:/plugins/oeyoews/vue-contextmenu/templates/global-app.vue'\\n    ),\\n\\n    components: {\\n      Icon\\n    }\\n  };\\n  return component;\\n};\\n\\nmodule.exports = app;\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/vue-contextmenu/global-widget.js\":{\"title\":\"$:/plugins/oeyoews/vue-contextmenu/global-widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-contextmenu/global-widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nvue-contextmenu widget\\n\\n\\\\*/\\nconst { widget: Widget } = require('$:/core/modules/widgets/widget.js');\\n\\nclass GlobalContextMenuWidget extends Widget {\\n  constructor(parseTreeNode, options) {\\n    super(parseTreeNode, options);\\n  }\\n\\n  render(parent, nextSibling) {\\n    if (!$tw.browser) return;\\n\\n    this.computeAttributes();\\n    this.execute();\\n\\n    const ssr = this.document.isTiddlyWikiFakeDom;\\n    if (ssr) return;\\n\\n    const vuelib = '$:/plugins/oeyoews/neotw-vue3/vue.global.prod.js';\\n\\n    if (!window.Vue) {\\n      window.Vue = require(vuelib);\\n    }\\n\\n    const { createApp } = window.Vue;\\n    const component = require('./global-app');\\n    const domNode = this.document.createElement('div');\\n    const TiddlyWikiVue = require('./plugins/TiddlyWikiVue');\\n    const ContextMenu = require('vue-context-menu.min.js').default;\\n    const title = this.getVariable('currentTiddler');\\n\\n    /** i18n */\\n    const { createI18n } = require('vue-i18n.global.prod.js');\\n    const en = require('./i18n/en.js');\\n    const cn = require('./i18n/zh.js');\\n    const messages = {\\n      English: en,\\n      中文: cn,\\n    };\\n\\n    const defaultLang = 'English';\\n    let locale = localStorage.getItem('lang');\\n    if (!locale) {\\n      locale = defaultLang;\\n      localStorage.setItem('lang', locale);\\n    }\\n\\n    const i18n = createI18n({\\n      legacy: false,\\n      locale,\\n      fallbackLocale: defaultLang,\\n      messages,\\n    });\\n\\n    try {\\n      const app = createApp(component(this));\\n\\n      app.use(TiddlyWikiVue);\\n      app.use(ContextMenu);\\n      app.use(i18n);\\n\\n      app.config.errorHandler = (err) => {\\n        const text = `[Vue3](${app.version}): ` + err;\\n        console.error(text);\\n        domNode.textContent = text;\\n        domNode.style.color = 'red';\\n      };\\n\\n      // 挂载\\n      app.mount(domNode);\\n\\n      parent.insertBefore(domNode, nextSibling);\\n      this.domNodes.push(domNode);\\n    } catch (e) {\\n      console.error(e.message);\\n    }\\n  }\\n\\n  // TIP: 界面由 vue 接管， 不要在这里刷新\\n  refresh() {\\n    return false;\\n  }\\n}\\n\\n/** @description vue-contextmenu widget */\\nexports['vue-global-contextmenu'] = GlobalContextMenuWidget;\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"},\"$:/plugins/oeyoews/vue-contextmenu/icons.js\":{\"title\":\"$:/plugins/oeyoews/vue-contextmenu/icons.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-contextmenu/icons.js\\ntype: application/javascript\\nmodule-type: library\\n\\nTODO: add color, and compatiable dark mode\\n\\\\*/\\n\\nmodule.exports = {\\n  tags: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 24 24\\\"><g fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"2\\\"><path d=\\\"M3 8v4.172a2 2 0 0 0 .586 1.414l5.71 5.71a2.41 2.41 0 0 0 3.408 0l3.592-3.592a2.41 2.41 0 0 0 0-3.408l-5.71-5.71A2 2 0 0 0 9.172 6H5a2 2 0 0 0-2 2\\\"/><path d=\\\"m18 19l1.592-1.592a4.82 4.82 0 0 0 0-6.816L15 6m-8 4h-.01\\\"/></g></svg>`,\\n  setting: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"currentColor\\\" d=\\\"m12 1l9.5 5.5v11L12 23l-9.5-5.5v-11zm0 2.311L4.5 7.653v8.694l7.5 4.342l7.5-4.342V7.653zM12 16a4 4 0 1 1 0-8a4 4 0 0 1 0 8m0-2a2 2 0 1 0 0-4a2 2 0 0 0 0 4\\\"/></svg>`,\\n  newWindow: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 20 20\\\"><path fill=\\\"currentColor\\\" d=\\\"M9.516 6a.5.5 0 0 0 0 1h2.777l-4.147 4.146a.5.5 0 0 0 .708.708L13 7.707v2.777a.5.5 0 0 0 1 0V6.5a.5.5 0 0 0-.5-.5zm3.25 11a2.5 2.5 0 0 0 2.47-2.11A2.501 2.501 0 0 0 17 12.5v-7A2.5 2.5 0 0 0 14.5 3h-7a2.501 2.501 0 0 0-2.4 1.797A2.5 2.5 0 0 0 3 7.266V13.5A3.5 3.5 0 0 0 6.5 17zM4 7.266A1.5 1.5 0 0 1 5 5.85v6.65A2.5 2.5 0 0 0 7.5 15h6.68a1.5 1.5 0 0 1-1.414 1H6.5A2.5 2.5 0 0 1 4 13.5zM7.5 4h7A1.5 1.5 0 0 1 16 5.5v7a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 6 12.5v-7A1.5 1.5 0 0 1 7.5 4\\\"/></svg>`,\\n  clone: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 36 36\\\"><path fill=\\\"currentColor\\\" d=\\\"M6 6h16v4h2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4v-2H6Z\\\" class=\\\"clr-i-outline clr-i-outline-path-1\\\"/><path fill=\\\"currentColor\\\" d=\\\"M30 12H14a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V14a2 2 0 0 0-2-2m0 18H14V14h16Z\\\" class=\\\"clr-i-outline clr-i-outline-path-2\\\"/><path fill=\\\"currentColor\\\" d=\\\"M21 28h2v-5h5v-2h-5v-5h-2v5h-5v2h5z\\\" class=\\\"clr-i-outline clr-i-outline-path-3\\\"/><path fill=\\\"none\\\" d=\\\"M0 0h36v36H0z\\\"/></svg>`,\\n  rename: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"currentColor\\\" d=\\\"M9.75 2h3.998a.75.75 0 0 1 .102 1.493l-.102.007H12.5v17h1.245a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743l-.102.007H9.75a.75.75 0 0 1-.102-1.493l.102-.007H11v-17H9.75a.75.75 0 0 1-.743-.648L9 2.75a.75.75 0 0 1 .648-.743zh3.998zm8.496 2.997a3.253 3.253 0 0 1 3.25 3.25l.004 7.504a3.249 3.249 0 0 1-3.064 3.246l-.186.005h-4.745v-1.5h4.803A1.749 1.749 0 0 0 20 15.751l-.003-7.505a1.753 1.753 0 0 0-1.752-1.75h-4.74v-1.5zm-8.246 0v1.5H5.25a1.75 1.75 0 0 0-1.75 1.75v7.504c0 .967.784 1.75 1.75 1.75h4.745v1.5H5.25A3.25 3.25 0 0 1 2 15.751V8.247a3.25 3.25 0 0 1 3.25-3.25z\\\"/></svg>`,\\n  edit: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M5 19h1.425L16.2 9.225L14.775 7.8L5 17.575zm-2 2v-4.25L16.2 3.575q.3-.275.663-.425t.762-.15q.4 0 .775.15t.65.45L20.425 5q.3.275.438.65T21 6.4q0 .4-.137.763t-.438.662L7.25 21zM19 6.4L17.6 5zm-3.525 2.125l-.7-.725L16.2 9.225z\\\"/></svg>`,\\n  fold: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"2\\\" d=\\\"M12 3v6l3-3M9 6l3 3m0 12v-6l3 3m-6 0l3-3m-8-3h1m4 0h1m4 0h1m4 0h1\\\"/></svg>`,\\n  delete: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"currentColor\\\" d=\\\"M7.615 20q-.67 0-1.143-.472Q6 19.056 6 18.385V6H5V5h4v-.77h6V5h4v1h-1v12.385q0 .69-.462 1.152q-.463.463-1.153.463zM17 6H7v12.385q0 .269.173.442t.442.173h8.77q.23 0 .423-.192q.192-.193.192-.423zM9.808 17h1V8h-1zm3.384 0h1V8h-1zM7 6v13z\\\"/></svg>`,\\n  copy: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 256 256\\\"><path d=\\\"M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z\\\"/></svg>`,\\n  close: `<svg stroke=\\\"currentColor\\\" fill=\\\"currentColor\\\" stroke-width=\\\"0\\\" viewBox=\\\"0 0 16 16\\\" height=\\\"1em\\\" width=\\\"1em\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"> <path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M8.621 8.086l-.707-.707L6.5 8.793 5.086 7.379l-.707.707L5.793 9.5l-1.414 1.414.707.707L6.5 10.207l1.414 1.414.707-.707L7.207 9.5l1.414-1.414z\\\"> </path> <path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M5 3l1-1h7l1 1v7l-1 1h-2v2l-1 1H3l-1-1V6l1-1h2V3zm1 2h4l1 1v4h2V3H6v2zm4 1H3v7h7V6z\\\"></path> </svg>`,\\n  close2: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M12 21a9 9 0 1 0 0-18a9 9 0 0 0 0 18m11-9c0 6.075-4.925 11-11 11S1 18.075 1 12S5.925 1 12 1s11 4.925 11 11m-10.915 7.5H10v-5H6.29l5.625-10H14v5h3.71zM12 15.571l2.29-4.071H12V8.429L9.71 12.5H12z\\\"/></svg>`,\\n  link: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M11 17H7q-2.075 0-3.537-1.463T2 12q0-2.075 1.463-3.537T7 7h4v2H7q-1.25 0-2.125.875T4 12q0 1.25.875 2.125T7 15h4zm-3-4v-2h8v2zm5 4v-2h4q1.25 0 2.125-.875T20 12q0-1.25-.875-2.125T17 9h-4V7h4q2.075 0 3.538 1.463T22 12q0 2.075-1.463 3.538T17 17z\\\"/></svg>`,\\n  copy2: `<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 24 24\\\"><g fill=\\\"none\\\"><path d=\\\"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z\\\"/><path fill=\\\"currentColor\\\" d=\\\"M19 2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2V4a2 2 0 0 1 2-2zm-4 6H5v12h10zm-5 7a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2zm9-11H9v2h6a2 2 0 0 1 2 2v8h2zm-7 7a1 1 0 0 1 .117 1.993L12 13H8a1 1 0 0 1-.117-1.993L8 11z\\\"/></g></svg>`,\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/vue-contextmenu/pagetemplate\":{\"title\":\"$:/plugins/oeyoews/vue-contextmenu/pagetemplate\",\"text\":\"<!-- tags: $:/tags/PageTemplate -->\\n\\n<$vue-global-contextmenu />\"},\"$:/plugins/oeyoews/vue-contextmenu/viewtemplate\":{\"title\":\"$:/plugins/oeyoews/vue-contextmenu/viewtemplate\",\"tags\":\"$:/tags/ViewTemplate\",\"text\":\"<$list filter=\\\"[all[current]!is[missing]!is[binary]]\\\">\\n\\t<$vue-contextmenu />\\n</$list>\"},\"$:/plugins/oeyoews/vue-contextmenu/widget.js\":{\"title\":\"$:/plugins/oeyoews/vue-contextmenu/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-contextmenu/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nvue-contextmenu widget\\n\\n\\\\*/\\nconst { widget: Widget } = require('$:/core/modules/widgets/widget.js');\\n\\nclass ExampleWidget extends Widget {\\n  constructor(parseTreeNode, options) {\\n    super(parseTreeNode, options);\\n  }\\n\\n  render(parent, nextSibling) {\\n    if (!$tw.browser) return;\\n\\n    this.computeAttributes();\\n    this.execute();\\n\\n    const ssr = this.document.isTiddlyWikiFakeDom;\\n    if (ssr) return;\\n\\n    const vuelib = '$:/plugins/oeyoews/neotw-vue3/vue.global.prod.js';\\n    const ElementPlus = require('element-plus.min.js');\\n\\n    if (!window.Vue) {\\n      window.Vue = require(vuelib);\\n    }\\n\\n    const { createApp } = window.Vue;\\n    const component = require('./app');\\n    const domNode = this.document.createElement('div');\\n    const TiddlyWikiVue = require('./plugins/TiddlyWikiVue');\\n    const ContextMenu = require('vue-context-menu.min.js').default;\\n    const title = this.getVariable('currentTiddler');\\n\\n    /** i18n */\\n    const { createI18n } = require('vue-i18n.global.prod.js');\\n    const en = require('./i18n/en.js');\\n    const cn = require('./i18n/zh.js');\\n    const messages = {\\n      English: en,\\n      中文: cn,\\n    };\\n\\n    const defaultLang = 'English';\\n    let locale = localStorage.getItem('lang');\\n    if (!locale) {\\n      locale = defaultLang;\\n      localStorage.setItem('lang', locale);\\n    }\\n\\n    const i18n = createI18n({\\n      legacy: false,\\n      locale,\\n      fallbackLocale: defaultLang,\\n      messages,\\n    });\\n\\n    try {\\n      const app = createApp(component(parent, title, this));\\n\\n      app.use(ContextMenu);\\n      app.use(i18n);\\n      app.use(ElementPlus);\\n\\n      app.config.errorHandler = (err) => {\\n        const text = `[Vue3](${app.version}): ` + err;\\n        console.error(text);\\n        domNode.textContent = text;\\n        domNode.style.color = 'red';\\n      };\\n\\n      // 挂载\\n      app.mount(domNode);\\n\\n      parent.insertBefore(domNode, nextSibling);\\n      this.domNodes.push(domNode);\\n    } catch (e) {\\n      console.error(e.message);\\n    }\\n  }\\n\\n  // TIP: 界面由 vue 接管， 不要在这里刷新\\n  refresh() {\\n    return false;\\n  }\\n}\\n\\n/** @description vue-contextmenu widget */\\nexports['vue-contextmenu'] = ExampleWidget;\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}