{"title":"$:/plugins/oeyoews/markdown-importer","description":"markdown-importer","author":"oeyoews","version":"0.0.2","core-version":">=5.3.4","type":"application/json","plugin-type":"plugin","name":"markdown-importer","meat#disabled":"yes","qrcode":"yes","created":"20250221","dependents":"","stability":"STABILITY_2_STABLE","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/markdown-importer/readme\":{\"title\":\"$:/plugins/oeyoews/markdown-importer/readme\",\"description\":\"markdown-importer\",\"text\":\"[[在线文档|https://neotw.vercel.app/docs/plugins/markdown-importer]]\\n\\n <$button message=\\\"th-markdown-importer\\\" >Markdown Importer</$button>\"},\"$:/plugins/oeyoews/markdown-importer/importer.js\":{\"title\":\"$:/plugins/oeyoews/markdown-importer/importer.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/markdown-importer/importer.js\\ntype: application/javascript\\nmodule-type: library\\n\\nmarkdown-importer library\\n\\n\\\\*/\\nmodule.exports=async function t(e=null){e||(e=await window.showDirectoryPicker());const i=[];for await(const a of e.values())if(\\\"file\\\"===a.kind&&a.name.endsWith(\\\".md\\\")){const t=await a.getFile();let e=await t.text();e=(n=e).startsWith(\\\"---\\\")?n.replace(/^---\\\\n[\\\\s\\\\S]*?\\\\n---\\\\n*/,\\\"\\\"):n;const s=new Date(t.lastModified);i.push({title:t.name.slice(0,-3),text:e,modified:s})}else if(\\\"directory\\\"===a.kind){const e=await t(a);i.push(...e)}var n;return i};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/markdown-importer/startup.js\":{\"title\":\"$:/plugins/oeyoews/markdown-importer/startup.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/markdown-importer/startup.js\\ntype: application/javascript\\nmodule-type: startup\\n\\nmarkdown-importer startup\\n\\n\\\\*/\\nexports.name=\\\"markdown-importer-startup-hook\\\",exports.platforms=[\\\"browser\\\"],exports.after=[\\\"startup\\\"],exports.synchronous=!0,exports.startup=()=>{const t=require(\\\"./importer\\\");$tw.rootWidget.addEventListener(\\\"th-markdown-importer\\\",(async e=>{(await t()).forEach((t=>{let e=null;$tw.wiki.filterTiddlers(`[[${t.title}]!is[missing]]`).length>0&&(e=window.prompt(`${t.title} tiddler has exist, please rename this tiddler`,t.title+\\\"-\\\"+Date.now()),!e)||(e&&(t.title=e),$tw.wiki.addTiddler({tags:[\\\"markdown\\\"],type:\\\"text/markdown\\\",...t}))}))}))};\",\"type\":\"application/javascript\",\"module-type\":\"startup\"},\"$:/plugins/oeyoews/markdown-importer/widget.js\":{\"title\":\"$:/plugins/oeyoews/markdown-importer/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/markdown-importer/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nmarkdown-importer widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports[\\\"widget-bi56t4zz\\\"]=class extends e{constructor(e,t){super(e,t)}render(e,t){if(!$tw.browser)return;if(this.computeAttributes(),this.execute(),this.document.isTiddlyWikiFakeDom)return;const s=$tw.utils.domMaker,i=s(\\\"button\\\",{text:\\\"Click me\\\",class:\\\"rounded p-1\\\"}),r=s(\\\"div\\\",{children:[i]});e.insertBefore(r,t),this.domNodes.push(r)}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}