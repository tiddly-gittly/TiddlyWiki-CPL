{"title":"$:/plugins/oeyoews/vue-plum","description":"vue-plum","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"vue-plum","meat#disabled":"yes","qrcode":"yes","created":"2024-03-15","dependents":"$:/plugins/oeyoews/neotw-vue3","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/vue-plum/templates/app.vue\":{\"text\":\"<template>\\n  <div class=\\\"fixed top-0 bottom-0 left-0 right-0 pointer-events-none print:hidden\\\" style=\\\"z-index: -1\\\"\\n    :style=\\\"`mask-image: ${mask};--webkit-mask-image: ${mask};`\\\">\\n    <canvas ref=\\\"el\\\" width=\\\"400\\\" height=\\\"400\\\" />\\n  </div>\\n</template>\",\"title\":\"$:/plugins/oeyoews/vue-plum/templates/app.vue\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/vue-plum/readme\":{\"title\":\"$:/plugins/oeyoews/vue-plum/readme\",\"description\":\"vue-plum\",\"text\":\"<!-- plugin template readme -->\\n\\n<!-- !! Motivation -->\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\"},\"$:/plugins/oeyoews/vue-plum/app.js\":{\"title\":\"$:/plugins/oeyoews/vue-plum/app.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-plum/app.js\\ntype: application/javascript\\nmodule-type: library\\n\\n@see: https://github.com/antfu/antfu.me/blob/eb52c0f20a2673ea5af15a4c9154e4181fe177d5/src/components/Plum.vue#L19\\n\\n\\\\*/\\nconst{ref:e,reactive:t,computed:i,onMounted:n}=window.Vue,o=Math.PI,a=Math.PI/2,l=Math.PI/12,r=require(\\\"$:/plugins/oeyoews/neotw-vue3/getTemplate.js\\\"),{random:h}=Math;module.exports=()=>({setup(){const r=e(null),s=t({width:window.innerWidth,height:window.innerHeight}),u=e((()=>{})),c=e(6),d=e(!1);n((async()=>{const e=r.value,{ctx:t}=function(e,t=400,i=400,n){const o=e.getContext(\\\"2d\\\"),a=window.devicePixelRatio||1,l=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1,r=n||a/l;return e.style.width=`${t}px`,e.style.height=`${i}px`,e.width=r*t,e.height=r*i,o.scale(r,r),{ctx:o,dpi:r}}(e,s.width,s.height),{width:i,height:n}=e;let p=[],w=[];const g=(e,i,n,o={value:0})=>{const a=h()*c.value;o.value+=1;const[r,u]=function(e=0,t=0,i=0,n=0){return[e+i*Math.cos(n),t+i*Math.sin(n)]}(e,i,a,n);t.beginPath(),t.moveTo(e,i),t.lineTo(r,u),t.stroke();const d=n+h()*l,w=n-h()*l;if(r<-100||r>s.width+100||u<-100||u>s.height+100)return;const m=o.value<=30?.8:.5;h()<m&&p.push((()=>g(r,u,d,o))),h()<m&&p.push((()=>g(r,u,w,o)))};let m,v=performance.now();m=function(e){let t=null;return{resume:()=>{if(!t){const e=()=>{performance.now()-v<25||(w=p,p=[],v=performance.now(),w.length||(m.pause(),d.value=!0),w.forEach((e=>{h()<.5?p.push(e):e()}))),t=requestAnimationFrame(e)};e()}},pause:()=>{cancelAnimationFrame(t),t=null}}}();const x=()=>.6*h()+.2;u.value=()=>{m.pause(),t.clearRect(0,0,i,n),t.lineWidth=1,t.strokeStyle=\\\"#88888825\\\",w=[],p=[()=>g(x()*s.width,-5,a),()=>g(x()*s.width,s.height+5,-a),()=>g(-5,x()*s.height,0),()=>g(s.width+5,x()*s.height,o)],s.width<500&&(p=p.slice(0,2)),m.resume(),d.value=!1},u.value()}));const p=i((()=>\\\"radial-gradient(circle, transparent, black);\\\"));return{el:r,mask:p,start:u,stopped:d}},template:r(\\\"$:/plugins/oeyoews/vue-plum/templates/app.vue\\\")});\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/vue-plum/pageTemplate\":{\"title\":\"$:/plugins/oeyoews/vue-plum/pageTemplate\",\"tags\":\"$:/tags/PageTemplate\",\"text\":\"<$vue-plum />\"},\"$:/plugins/oeyoews/vue-plum/widget.js\":{\"title\":\"$:/plugins/oeyoews/vue-plum/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-plum/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nvue-plum widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports[\\\"vue-plum\\\"]=class extends e{constructor(e,r){super(e,r)}render(e,r){if(!$tw.browser)return;if(this.computeAttributes(),this.execute(),this.document.isTiddlyWikiFakeDom)return;window.Vue||(window.Vue=require(\\\"$:/plugins/oeyoews/neotw-vue3/vue.global.prod.js\\\"));const{createApp:t}=window.Vue,o=require(\\\"./app\\\"),s=this.document.createElement(\\\"div\\\");try{const i=t(o());i.config.errorHandler=e=>{const r=`[Vue3](${i.version}): `+e;console.error(r),s.textContent=r,s.style.color=\\\"red\\\"},i.mount(s),e.insertBefore(s,r),this.domNodes.push(s)}catch(e){console.error(e)}}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}