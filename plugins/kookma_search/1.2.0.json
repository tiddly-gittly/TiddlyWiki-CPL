{"title":"$:/plugins/kookma/search","version":"1.2.0","stability":"STABILITY_1_EXPERIMENTAL","name":"Search in Fields","description":"Advanced search in fields using regular expression and tabular output","author":"Mohammad Rahmani","source":"https://github.com/kookma/TW-Search","list":"readme license history","plugin-priority":"","parent-plugin":"","dependents":"$:/plugins/kookma/shiraz","plugin-type":"plugin","core-version":">=5.2.5","packaged-by":"Gatha on 24th July 2025, 21:24:18","type":"application/json","text":"{\"tiddlers\":{\"$:/config/SearchinFields\":{\"text\":\"{\\n    \\\"search-scope\\\": \\\"[all[tiddlers]!is[system]]\\\",\\n    \\\"primary-fields\\\": \\\"title tags text caption\\\",\\n    \\\"table-columns\\\": \\\"tbl-expand title tags created\\\",\\n    \\\"excluded-fields\\\": \\\"text\\\",\\n    \\\"live-preview\\\": \\\"yes\\\"\\n}\",\"type\":\"application/json\",\"title\":\"$:/config/SearchinFields\"},\"$:/plugins/kookma/search/history\":{\"title\":\"$:/plugins/kookma/search/history\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"Full change log  https://kookma.github.io/TW-Search/#ChangeLog\\n\\n* ''1.2.0'' -- 2025.07.24 -- updated to TiddlyWiki 5.3.8\\n* ''0.7.0'' -- 2022.01.13 -- stable release with better UI\\n* ''0.1.0'' -- 2022.01.04 -- beta public release\\n\"},\"$:/plugins/kookma/search/icon\":{\"title\":\"$:/plugins/kookma/search/icon\",\"text\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xml:space=\\\"preserve\\\" width=\\\"40\\\" height=\\\"40\\\" viewBox=\\\"0 0 392.646 392.646\\\"><path d=\\\"M244.913 313.794c38.012 0 68.978-30.966 68.978-68.978s-30.966-68.978-68.978-68.978-68.978 30.966-68.978 68.978 30.966 68.978 68.978 68.978z\\\" style=\\\"fill:#fff\\\"/><path d=\\\"M154.085 244.816c0-50.101 40.727-90.764 90.764-90.764 7.822 0 15.386 1.099 22.626 3.038V56.242H108.38c-3.426 0-6.659-1.616-8.663-4.331L76.897 21.85H21.883v223.547h132.202v-.581z\\\" style=\\\"fill:#fff\\\"/><path d=\\\"M244.913 197.495c-26.053 0-47.192 21.204-47.192 47.192s21.204 47.192 47.192 47.192 47.192-21.204 47.192-47.192-21.204-47.192-47.192-47.192zM366.448 345.406l-47.838-47.838c-5.818 8.145-12.929 15.127-21.01 21.01l47.838 47.838c5.818 5.818 15.192 5.818 21.01 0s5.819-15.192 0-21.01z\\\" style=\\\"fill:#56ace0\\\"/><path d=\\\"m381.899 330.02-52.493-52.493c3.943-10.214 6.206-21.269 6.206-32.776 0-33.939-18.683-63.547-46.352-79.127V45.253c0-6.012-4.848-10.925-10.925-10.925h-164.59L90.99 4.331C88.921 1.616 85.754 0 82.327 0h-71.37C4.945 0 .032 4.848.032 10.925v245.398c0 6.012 4.848 10.925 10.925 10.925h145.972c10.02 39.24 45.576 68.396 87.855 68.396 11.572 0 22.562-2.263 32.776-6.206l52.493 52.493c14.287 14.287 37.56 14.287 51.846 0 14.287-14.351 14.287-37.689 0-51.911zm-15.386 36.396a14.827 14.827 0 0 1-21.01 0l-47.838-47.838c8.145-5.818 15.192-12.929 21.01-21.01l47.838 47.838a14.827 14.827 0 0 1 0 21.01zM21.883 21.786h54.949l22.82 30.061c2.069 2.715 5.236 4.331 8.663 4.331h159.16v100.784c-7.24-1.875-14.869-3.038-22.626-3.038-50.101 0-90.764 40.727-90.764 90.764v.646H21.883V21.786zm153.988 223.03c0-38.012 30.966-68.978 68.978-68.978s68.978 30.966 68.978 68.978-30.966 68.978-68.978 68.978c-37.948 0-68.978-30.966-68.978-68.978z\\\" style=\\\"fill:#194f82\\\"/><path d=\\\"M92.154 77.899 66.036 43.572H43.669v64.388h46.158c6.012 0 10.925 4.848 10.925 10.925 0 6.012-4.848 10.925-10.925 10.925H43.669v19.394h24.824c6.012 0 10.925 4.848 10.925 10.925 0 6.012-4.848 10.925-10.925 10.925H43.669v52.622h113.002c9.632-39.887 45.511-69.624 88.242-69.624h.84V77.899H92.154z\\\" style=\\\"fill:#ffc10d\\\"/></svg>\",\"type\":\"image/svg+xml\"},\"$:/plugins/kookma/search/images/regex.svg\":{\"title\":\"$:/plugins/kookma/search/images/regex.svg\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<svg width=\\\"22pt\\\" height=\\\"22pt\\\" viewBox=\\\"0 0 512 512\\\">\\n  <path d=\\\"M309.677 349.209V230.914l-97.438 59.71-34.351-59.84L279.57 175.14l-101.682-56.47 34.525-58.75 97.264 59.447V.618h69.421v118.75l98.161-59.446L512 118.67l-102.14 56.47L512 230.785l-34.878 60.112-98.024-59.982V349.21h-69.42zm-164.504 89.587c0-55.67-60.68-90.652-108.962-62.817-48.281 27.835-48.281 97.8 0 125.635 48.282 27.835 108.962-7.148 108.962-62.818z\\\"/>\\n</svg>\"},\"$:/plugins/kookma/search/images/table\":{\"title\":\"$:/plugins/kookma/search/images/table\",\"caption\":\"table\",\"collection\":\"\",\"library\":\"Bootstrap\",\"library_version\":\"1.3.0\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<svg width=\\\"22pt\\\" height=\\\"22pt\\\" class=\\\"tc-image-bts-table tc-image-button\\\" viewBox=\\\"0 0 16 16\\\"><path d=\\\"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z\\\"/></svg>\"},\"$:/plugins/kookma/search/license\":{\"title\":\"$:/plugins/kookma/search/license\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"Distributed under an MIT license.\\n\\nCopyright (c) 2022-2025 [[Mohammad Rahmani|https://github.com/kookma]]\\n\\n<<<\\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \\\"Software\\\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\\n<<<\"},\"$:/plugins/kookma/search/patterns/date-range\":{\"title\":\"$:/plugins/kookma/search/patterns/date-range\",\"description\":\"Date range\",\"pattern\":\"(^2019090|^2019091[0-5])\",\"tags\":\"$:/tags/Search/Pattern\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"Find all tiddlers created on date range 1st to 15th September, 2019\\n\\n;Pattern\\n: `(^2019090|^2019091[0-5])`\\n\\n;Explanation\\n: `(|)` a capturing group. The `|` acts like a boolean OR. Matches the expression before or after the `|`.\\n: `^` asserts position at start of the string\\n: `2019090` matches characters 2019090 literally \\n:: this returns any tiddler created in 2019, 09 (September). The next `0` stands for day number so it matchs 01 to 09 (the only day numbers with leading zero) \\n: The `|` acts like a boolean OR. Matches the expression before or after the `|`.\\n: `^` asserts position at start of the string\\n: `2019091` matches characters 2019091 literally\\n:: this returns any tiddler created in 2019, 09 (September). The next `1` stands for day number so it matchs and day number started with `1`\\n: `[0-5]` match a single character present in the list below [0-5]. `[]` is a character set (character class)\\n:: 0-5 a single character in the range between 0 (index 48) and 5 (index 53) (case sensitive)\"},\"$:/plugins/kookma/search/patterns/end-with-number\":{\"title\":\"$:/plugins/kookma/search/patterns/end-with-number\",\"description\":\"Ending with numbers\",\"pattern\":\"\\\\d+$\",\"tags\":\"$:/tags/Search/Pattern\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"!! Match Lines Ending with Numbers\\nThe numbers at the end of the line can be matched by using $ in the regex. The $ sign is used to express end of the line. The following regex can be used to match numbers at the end of the line.\\n\\n```\\n\\\\d+$\\n```\\n\\nor\\n\\n```\\n\\\\[0-9]+$\\n```\"},\"$:/plugins/kookma/search/patterns/not-containing-string\":{\"title\":\"$:/plugins/kookma/search/patterns/not-containing-string\",\"description\":\"Match not containing string\",\"pattern\":\"^((?!badword).)*$\",\"tags\":\"$:/tags/Search/Pattern\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"!! Match string not containing string\\nGiven a list of strings (words or other characters), only return the strings that do not match.\\n\\nRef: https://www.regextester.com/15\"},\"$:/plugins/kookma/search/patterns/only-lowercase-letters\":{\"title\":\"$:/plugins/kookma/search/patterns/only-lowercase-letters\",\"description\":\"Only lowercase letters\",\"pattern\":\"^[a-z]+$\",\"tags\":\"$:/tags/Search/Pattern\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"; Pattern\\n: `^[a-z]+$`\\n\\n; Explanation\\n: `^` asserts position at start of the string\\n: `[a-z]` matches a single character in the range between a and z (case sensitive)\\n: `+` matches one or more repetitions of preceeding symbol (here lowercase characters)\\n: `$` asserts position at end of the string\"},\"$:/plugins/kookma/search/patterns/only-numbers\":{\"title\":\"$:/plugins/kookma/search/patterns/only-numbers\",\"description\":\"Match only numbers\",\"pattern\":\"^\\\\d+$\",\"tags\":\"$:/tags/Search/Pattern\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\";Match Only Number Lines\\n:In some cases we may need to match lines those only consist of numbers. These lines do not contains non-numeric characters. The ^ and $ are used to set start and end of line which consist of only numbers.\\n\\n```\\n^\\\\d+$\\n```\\n\\nor\\n\\n```\\n^[0-9]+$\\n```\"},\"$:/plugins/kookma/search/patterns/start-with-number\":{\"title\":\"$:/plugins/kookma/search/patterns/start-with-number\",\"description\":\"Starting with numbers\",\"pattern\":\"^\\\\d+\",\"tags\":\"$:/tags/Search/Pattern\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"!! Match Lines Starting with Numbers\\nThe numbers can be located at the start of the line. These numbers can be matched by using the `^` sign which is used to express the start of the line.\\n\\n```\\n^\\\\d+\\n```\\n\\nor\\n\\n```\\n^\\\\[0-9]+\\n```\"},\"$:/plugins/kookma/search/procedures/definition\":{\"title\":\"$:/plugins/kookma/search/procedures/definition\",\"tags\":\"$:/tags/Search/Procedure\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\procedure searchTid()          $:/temp/advancedsearch/input\\n\\\\procedure searchConfigTid()    $:/config/SearchinFields\\n\\\\procedure selectedFieldsTid()  $:/state/search-in-fields/selected-fields\\n\\\\procedure searchFlagsTid()     $:/state/search-in-fields/flags\\n\\\\procedure sidebarResultTid()   $:/plugins/kookma/search/ui/exact-search-sidebar\\n\\n<!-- create filter string -->\\n\\\\function searchScope()     \\\"[subfilter{$(searchConfigTid)$##search-scope}] -[prefix[$:/temp/search]] -[prefix[$:/temp/advancedsearch]]\\\" +[substitute[]]\\n\\\\function allFields()       \\\"$(searchScope)$+[fields[]sort[title]]-[subfilter{$(searchConfigTid)$##excluded-fields}]\\\"  +[substitute[]]\\n\\\\function selectedFields()  \\\"[[$(selectedFieldsTid)$]indexes[]sort[title]]\\\" +[substitute[]]\"},\"$:/plugins/kookma/search/readme\":{\"title\":\"$:/plugins/kookma/search/readme\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\";Search\\nAdvanced field-level search with support for both standard matching and regular expressions.\\n\\n;Code and demo\\nTo explore plugin features, syntax, tutorials, and examples, refer to the demo and code pages:\\n\\n* Demo: https://kookma.github.io/TW-Search/\\n* Code: https://github.com/kookma/TW-Search\"},\"$:/plugins/kookma/search/styles/main\":{\"title\":\"$:/plugins/kookma/search/styles/main\",\"text\":\".tc-advanced-search input[type=radio]    {width: auto; }\\n.tc-advanced-search input[type=checkbox] {width: auto; }\\n\\n/* Checkbox in option ui in $:/AdvancedSearch */\\n.kk-search-option-chkbox {\\n\\tmargin-right:0.5em;\\n}\\n\\n.kk-search-input {\\n\\twidth:50%;\\n\\tmin-width:240px;\\n}\\n/* fields drop down */\\n\\n.kk-search-dropdown {\\n\\tmax-height:calc(100vh - 2.5em);\\n\\toverflow-y:auto;\\n}\\n.kk-search-dropdown input{\\n\\twidth:auto;\\n\\tmargin-left:20px;\\n}\\n\\n/* field seclection */\\n.kk-search-label{\\n\\tfont-weight:bold;\\n\\tfont-size: 0.9em;\\n\\tpadding-left:6px;\\n\\tpadding-right:6px;\\n\\t\\n\\tdisplay:flex;\\n\\tjustify-content:space-between;\\n\\t\\n}\\n.kk-search-label .tc-btn-invisible{\\n\\topacity:0.4;\\n}\\n.kk-search-label:hover .tc-btn-invisible{\\n\\topacity:1;\\n}\\n.kk-search-label .tc-btn-invisible svg{\\n\\twidth:  1em;\\n\\theight: 1em;\\n}\\n\\n/* Tabular output */\\n.kk-search-tubular{\\n\\tmax-width: 100%;\\n\\toverflow-x: auto;\\n}\\n\\n\\n.kk-search-setting-label{\\n  width:120px;\\n  display: inline-block;\\n}\\n\\n/* Checkbox in field selection dropdown menu*/\\n.kk-search-chkbox span{\\n\\tpadding-left: 0.5em;\\n}\",\"tags\":\"$:/tags/Stylesheet\",\"type\":\"text/css\"},\"$:/plugins/kookma/search/ui/AdvancedSearch/Fields\":{\"title\":\"$:/plugins/kookma/search/ui/AdvancedSearch/Fields\",\"caption\":\"Fields\",\"code-body\":\"yes\",\"list-before\":\"$:/core/ui/AdvancedSearch/Filter\",\"tags\":\"$:/tags/AdvancedSearch\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"{{$:/plugins/kookma/search/ui/inputs}}\"},\"$:/plugins/kookma/search/ui/ControlPanel/Settings\":{\"title\":\"$:/plugins/kookma/search/ui/ControlPanel/Settings\",\"caption\":\"Search in Fields\",\"code-body\":\"yes\",\"list-after\":\"$:/core/ui/ControlPanel/Settings/TiddlyWiki\",\"tags\":\"$:/tags/ControlPanel/SettingsTab $:/tags/MoreSideBar\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\import [all[tiddlers+shadows]tag[$:/tags/Search/Procedure]]\\n\\n\\\\procedure set-option(this-label, this-index, this-placeholder)\\n<div style=\\\"margin-bottom:0.2em;\\\">\\n<label class=\\\"kk-search-setting-label\\\"><$text text=<<this-label>>/></label>\\n<$edit-text tiddler=<<searchConfigTid>> index=<<this-index>> tag=input defualt=\\\"\\\" placeholder=<<this-placeholder>> class=\\\"kk-search-input\\\"/>\\n</div>\\n\\\\end\\n\\n\\\\function is.overridden()\\n[<searchConfigTid>is[shadow]is[tiddler]]\\n[<sidebarResultTid>is[shadow]is[tiddler]]\\n:and[limit[1]]\\n\\\\end\\n\\n\\nThese settings let you customise the behaviour of Search in Fields plugin.\\n\\n---\\n\\n;Show Search setting in more sidebar\\n:<$checkbox tiddler=\\\"$:/plugins/kookma/search/ui/ControlPanel/Settings\\\" tag=\\\"$:/tags/MoreSideBar\\\"> Show setting in more sidebar</$checkbox>\\n\\n; Enable Search in fields\\n:<$checkbox tiddler=\\\"$:/plugins/kookma/search/ui/AdvancedSearch/Fields\\\" tag=\\\"$:/tags/AdvancedSearch\\\"> Enable Search in $:/AdvancedSearch</$checkbox>\\n\\n;Options\\n:<<set-option this-label:\\\"Search scope\\\"    this-index:\\\"search-scope\\\"    this-placeholder:\\\"enter a valid filter \\\">>\\n:<<set-option this-label:\\\"Primary fields\\\"  this-index:\\\"primary-fields\\\"  this-placeholder:\\\"enter field name, e.g fld01 [[field two]] \\\">>\\n:<<set-option this-label:\\\"Excluded fields\\\" this-index:\\\"excluded-fields\\\" this-placeholder:\\\"enter field name, e.g fld01 [[field two]] \\\">>\\n:<<set-option this-label:\\\"Table columns\\\"   this-index:\\\"table-columns\\\"   this-placeholder:\\\"enter columns(fields) name \\\">>\\n\\n; Enable live preview\\n:<$checkbox tiddler=<<searchConfigTid>> index=\\\"live-preview\\\" checked=\\\"yes\\\"> Enable live field preview in plain output</$checkbox>\\n\\n\\n; Sidebar exact search in fields\\n:<$checkbox tiddler=<<sidebarResultTid>> tag=\\\"$:/tags/SearchResults\\\"> Enable sidebar exact search</$checkbox>\\n\\n:<div style=\\\"margin-bottom:0.2em;\\\">\\n<label class=\\\"kk-search-setting-label\\\">First filter</label>\\n<$edit-text tiddler=<<sidebarResultTid>> field=\\\"first-search-filter\\\" tag=input defualt=\\\"\\\" placeholder=\\\"enter a search filter\\\" class=\\\"kk-search-input\\\"/>\\n</div>\\n\\n:<div style=\\\"margin-bottom:0.2em;\\\">\\n<label class=\\\"kk-search-setting-label\\\">Second filter</label>\\n<$edit-text tiddler=<<sidebarResultTid>> field=\\\"second-search-filter\\\" tag=input defualt=\\\"\\\" placeholder=\\\"enter a search filter\\\" class=\\\"kk-search-input\\\"/>\\n</div>\\n\\n; Reset all settings\\n:<label class=\\\"kk-search-setting-label\\\">Reset to default</label><$button disabled={{{ [is.overridden[]then[no]else[yes]] }}} actions='<$action-deletetiddler $filter=\\\"[<searchConfigTid>][<sidebarResultTid>]\\\"/>'>{{$:/core/images/erase}}</$button>\"},\"$:/plugins/kookma/search/ui/exact-search-sidebar\":{\"title\":\"$:/plugins/kookma/search/ui/exact-search-sidebar\",\"caption\":\"Fields\",\"first-search-filter\":\"[!is[system]search:title:literal,casesensitive<userInput>sort[title]limit[250]]\",\"second-search-filter\":\"[!is[system]search:-title:literal,casesensitive<userInput>sort[title]limit[250]]\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define searchResultList()\\n//<small>{{$:/language/Search/Matches/Title}}</small>//\\n\\n<$list filter=\\\"[<userInput>minlength[1]]\\\"variable=ignore><$list filter={{{[<configTiddler>get[first-search-filter]]}}}emptyMessage={{$:/language/Search/Matches/NoResult}}><span class={{{[{!!title}addsuffix[-primaryList]]-[<searchListState>get[text]]+[then[]else[tc-list-item-selected]]}}}>{{||$:/core/ui/ListItemTemplate}}</span></$list></$list>\\n\\n//<small>{{$:/language/Search/Matches/All}} (other fields)</small>//\\n\\n<$list filter=\\\"[<userInput>minlength[1]]\\\"variable=ignore><$list filter={{{[<configTiddler>get[second-search-filter]]}}}emptyMessage={{$:/language/Search/Matches/NoResult}}><span class={{{[{!!title}addsuffix[-secondaryList]]-[<searchListState>get[text]]+[then[]else[tc-list-item-selected]]}}}>{{||$:/core/ui/ListItemTemplate}}\\n\\\\end\\n<<searchResultList>>\"},\"$:/plugins/kookma/search/ui/fields-selection\":{\"title\":\"$:/plugins/kookma/search/ui/fields-selection\",\"code-body\":\"yes\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\import [all[tiddlers+shadows]tag[$:/tags/Search/Procedure]!is[draft]]\\n\\\\whitespace trim\\n\\n\\\\procedure clearfields(filter)\\n<!-- check if *all is not activated and at least one field has been selected -->\\n<$list filter=\\\"[<selectedFieldsTid>indexes[]] :intersection[subfilter<filter>] +[limit[1]] [<disabledStatus>!match[yes]] +[count[]compare:integer:gteq[2]]\\\" variable=ignore>\\n    <$button class=\\\"tc-btn-invisible\\\" tooltip=\\\"Uncheck selected fields\\\"> {{$:/core/images/close-all-button}}\\n        <$list filter=<<filter>> variable=fieldname>\\n            <$action-setfield $tiddler=<<selectedFieldsTid>> $index=<<fieldname>> />\\n        </$list>\\n    </$button>\\n</$list>\\n\\\\end\\n\\n<$let disabledStatus={{{ [<selectedFieldsTid>get[allfld-status]match[all]then[yes]] [<selectedFieldsTid>is[missing]then[yes]] }}} >\\n  <span class=\\\"tc-popup-keep\\\">\\n    <$button popup=<<qualify \\\"$:/state/search/fieldsDropdown\\\">> class=\\\"tc-btn-invisible\\\" tooltip=\\\"select a search filter\\\">\\n      {{$:/core/images/down-arrow}}\\n    </$button>\\n  </span>\\n  <$reveal state=<<qualify \\\"$:/state/search/fieldsDropdown\\\">> type=\\\"popup\\\" position=\\\"belowleft\\\" animate=\\\"yes\\\" class=\\\"tc-popup-keep\\\" tag=div>\\n    <$set name=\\\"tv-show-missing-links\\\" value=\\\"yes\\\">\\n      <div class=\\\"tc-block-dropdown-wrapper\\\">\\n        <div class=\\\"tc-block-dropdown tc-edit-type-dropdown kk-search-dropdown\\\">        \\n          <div class=\\\"kk-search-label\\\">\\n            <span>Primary fields</span><$transclude $variable=\\\"clearfields\\\" filter=\\\"[<searchConfigTid>getindex[primary-fields]enlist-input[]]\\\" />\\n          </div> \\n          <$list filter=\\\"[<searchConfigTid>getindex[primary-fields]enlist-input[]]\\\" variable=fieldname>\\n            <$checkbox tiddler=<<selectedFieldsTid>> index=<<fieldname>> checked=\\\"x\\\" disabled=<<disabledStatus>> class=\\\"kk-search-chkbox\\\"><$text text=<<fieldname>>/></$checkbox><br>\\n          </$list>\\n\\n          <div class=\\\"kk-search-label\\\">\\n            <span>Other fields</span><$transclude $variable=clearfields filter=\\\"[subfilter<allFields>] -[<primaryfieldsTid>get[text]enlist-input[]]\\\" />\\n          </div> \\n          <$checkbox tiddler=<<selectedFieldsTid>> field=\\\"allfld-status\\\" checked=\\\"all\\\" unchecked=\\\"\\\" default=\\\"all\\\" class=\\\"kk-search-chkbox\\\">*all -[excluded]</$checkbox><br>\\n          <$list filter=\\\"[subfilter<allFields>] -[<searchConfigTid>getindex[primary-fields]enlist-input[]]\\\" variable=fieldname>\\n            <$checkbox tiddler=<<selectedFieldsTid>> index=<<fieldname>> checked=\\\"x\\\" disabled=<<disabledStatus>> class=\\\"kk-search-chkbox\\\"><$text text=<<fieldname>>/></$checkbox><br>\\n          </$list>\\n        </div>\\n      </div>\\n    </$set>\\n  </$reveal>\\n</$let>\"},\"$:/plugins/kookma/search/ui/inputs\":{\"title\":\"$:/plugins/kookma/search/ui/inputs\",\"code-body\":\"yes\",\"format\":\"\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\import [all[tiddlers+shadows]tag[$:/tags/Search/Procedure]!is[draft]]\\n\\\\whitespace trim\\n\\n\\\\procedure edit-text-inputactions()\\n<$action-setfield $tiddler=\\\"$:/temp/advancedsearch\\\" text={{{ [<searchTid>get[text]] }}}/>\\n<$action-deletetiddler $filter=\\\"[prefix[$:/keepstate/dynamictables/search-in-fields/tabular-results/]]\\\"/>\\n<$action-deletetiddler $filter=\\\"[prefix[$:/state/dynamictables/search-in-fields/tabular-results/]]\\\"/>\\n\\\\end\\n\\n\\n<!-- search options ui -->\\n<$transclude $tiddler=\\\"$:/plugins/kookma/search/ui/options\\\" $mode=inline />\\n\\n<div class=\\\"tc-search tc-advanced-search\\\">\\n\\t<$edit-text tiddler=<<searchTid>> field=text type=search tag=input default=\\\"\\\" placeholder=\\\"search terms\\\"\\n\\t\\t refreshTitle=\\\"$:/temp/advancedsearch/refresh\\\"\\n\\t\\t focus={{$:/config/Search/AutoFocus}}\\n\\t\\t inputActions=<<edit-text-inputactions>>\\n\\t\\t class=\\\"tc-small-gap-right\\\"\\n\\t/>\\n\\n\\t<!-- fields selection drop down -->\\n\\t<$transclude $tiddler=\\\"$:/plugins/kookma/search/ui/fields-selection\\\" />\\n\\n\\t<!-- regexp pattern selection drop down -->\\n\\t<$list filter=\\\"[<searchFlagsTid>getindex[search-mode]match[regexp]]\\\" variable=ignore><!-- disp if regexp search mode is selected -->\\n\\t\\t<$transclude $tiddler=\\\"$:/plugins/kookma/search/ui/pattern-selection\\\" />\\n\\t</$list>\\n\\n\\t<!-- clear button and tabular/plain output switch button -->\\n\\t<%if [<searchTid>get[text]!is[blank]] %>\\n\\t\\t<!-- switch output format button: show if only Shiraz is installed -->\\n\\t\\t<$list filter=\\\"[[$:/plugins/kookma/shiraz]!is[missing]] :filter[lookup:no[$:/config/Plugins/Disabled/]match[no]]\\\" variable=ignore>\\n\\t\\t\\t<$button class=tc-btn-invisible tooltip=\\\"toggle tubular/plain format\\\" actions='<$action-listops $tiddler=<<searchFlagsTid>> $index=\\\"format\\\" $subfilter=\\\"+[toggle[tabular],[plain]]\\\" />'>\\n\\t\\t\\t\\t{{$:/plugins/kookma/search/images/table}}\\n\\t\\t\\t</$button>\\n\\t\\t</$list>\\n\\t\\t<!-- clear button -->\\n\\t\\t<$button class=tc-btn-invisible tooltip=\\\"clear search box\\\" actions='<$action-setfield $tiddler=<<searchTid>> $field=text $value=\\\"\\\"/>'>\\n\\t\\t\\t{{$:/core/images/close-button}}\\n\\t\\t</$button>\\n\\t<%endif%>\\n</div>\\n\\n<div class=\\\"tc-search-results\\\">\\n\\t<$transclude $tiddler=\\\"$:/plugins/kookma/search/ui/results\\\" $mode=block/>\\n</div>\"},\"$:/plugins/kookma/search/ui/options\":{\"title\":\"$:/plugins/kookma/search/ui/options\",\"code-body\":\"yes\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\import [all[tiddlers+shadows]tag[$:/tags/Search/Procedure]!is[draft]]\\n\\n<$text text=\\\"Search in fields\\\"/>&nbsp;\\n<span class=kk-search-option-chkbox>\\n\\t<$checkbox index=\\\"case-sensitive\\\" tiddler=<<searchFlagsTid>> checked=\\\"casesensitive\\\" disabled={{{[<searchFlagsTid>getindex[search-mode]match[regexp]then[yes]]}}}> case sensitive</$checkbox>\\n</span>\\n<span class=kk-search-option-chkbox title=\\\"treats the search string as a list of tokens\\\">\\n\\t<$radio index=\\\"search-mode\\\" tiddler=<<searchFlagsTid>> value=\\\"words\\\" default=\\\"words\\\"> words</$radio>\\n</span>\\n<span class=kk-search-option-chkbox title=\\\"requires an exact match\\\">\\n\\t<$radio index=\\\"search-mode\\\" tiddler=<<searchFlagsTid>> value=\\\"literal\\\"> literal</$radio>\\n</span>\\n<span class=kk-search-option-chkbox title=\\\"treats the search string as a regular expression\\\">\\n\\t<$radio index=\\\"search-mode\\\" tiddler=<<searchFlagsTid>> value=\\\"regexp\\\"> regexp</$radio>\\n</span>\"},\"$:/plugins/kookma/search/ui/pattern-selection\":{\"title\":\"$:/plugins/kookma/search/ui/pattern-selection\",\"code-body\":\"yes\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\import [all[tiddlers+shadows]tag[$:/tags/Search/Procedure]!is[draft]]\\n\\n\\\\procedure this-lincatcher-actions()\\n\\t<$action-setfield $tiddler=\\\"$:/temp/advancedsearch\\\" text=<<navigateTo>>/>\\n\\t<$action-setfield $tiddler=\\\"$:/temp/advancedsearch/input\\\" text=<<navigateTo>>/>\\n\\t<$action-setfield $tiddler=\\\"$:/temp/advancedsearch/refresh\\\" text=\\\"yes\\\"/>\\n\\t<$action-sendmessage $message=\\\"tm-focus-selector\\\" $param='.tc-advanced-search input' />\\n\\\\end\\n\\n<span class=tc-popup-keep>\\n\\t<$button popup=<<qualify $:/state/search/patternDropdown>> class=tc-btn-invisible tooltip=\\\"select a regex pattern\\\">\\n\\t\\t{{$:/plugins/kookma/search/images/regex.svg}}\\n\\t</$button>\\n</span>\\n\\n<$reveal state=<<qualify $:/state/search/patternDropdown>> type=popup position=belowleft animate=yes>\\n\\t<$set name=\\\"tv-show-missing-links\\\" value=\\\"yes\\\">\\n\\t\\t<$linkcatcher actions=<<this-lincatcher-actions>> >\\n\\t\\t\\t<div class=tc-block-dropdown-wrapper>\\n\\t\\t\\t\\t<div class=\\\"tc-block-dropdown tc-edit-type-dropdown\\\">\\n\\t\\t\\t\\t\\t<$list filter=\\\"[all[shadows+tiddlers]tag[$:/tags/Search/Pattern]sort[description]]\\\">\\n\\t\\t\\t\\t\\t\\t<$link to={{!!pattern}}><$transclude field=description/></$link>\\n\\t\\t\\t\\t\\t</$list>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</$linkcatcher>\\n\\t</$set>\\n</$reveal>\"},\"$:/plugins/kookma/search/ui/results\":{\"title\":\"$:/plugins/kookma/search/ui/results\",\"code-body\":\"yes\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\import [all[tiddlers+shadows]tag[$:/tags/Search/Procedure]!is[draft]]\\n\\n\\\\procedure field-search(field) \\n<$let\\n    regexpFilter = `[subfilter<searchScope>regexp:$(field)$<search-terms>]`\\n    normalFilter = `[subfilter<searchScope>search:$(field)$:$(flag-list)$<search-terms>]`\\n    searchFilter = {{{ [<search-mode>match[regexp]then<regexpFilter>else<normalFilter>] }}}\\n    matches      = {{{[subfilter<searchFilter>count[]]}}}\\n    resultformat = {{{ [<searchFlagsTid>getindex[format]] }}}\\n    tableCosl    = {{{[<searchConfigTid>getindex[table-columns]]}}}\\n    pagingStat   = {{{ [<matches>compare:integer:gt[25]then[yes]else[no]] }}}\\n>\\n\\n<%if [subfilter<searchFilter>] %><!-- show if there is any result -->\\n\\t<%if [<resultformat>match[tabular]] %><!--display results in tabular format -->\\n\\t\\t<div class=\\\"kk-search-tubular\\\">\\n\\t\\t\\t<b><$text text=<<field>>/> <small>(<$text text=<<matches>>/>)</small></b>\\n\\t\\t\\t<$transclude $variable=\\\"table-dynamic\\\" \\n\\t\\t\\t\\t\\tfilter=<<searchFilter>> \\n\\t\\t\\t\\t\\tfields=<<tableCosl>>\\n\\t\\t\\t\\t\\tclass=\\\"w-100\\\" \\n\\t\\t\\t\\t\\teditButton=\\\"no\\\" \\n\\t\\t\\t\\t\\tpagination=<<pagingStat>>\\n\\t\\t\\t\\t\\tstateTiddler=`search-in-fields/tabular-results/$(field)$`\\n\\t\\t\\t/>\\n\\t\\t</div>\\n\\t<%endif%>\\t\\n\\t<%if [<resultformat>!match[tabular]] %><!--display results in plain format -->\\t\\t\\n\\t\\t<dl>\\n\\t\\t\\t<dt><$text text=<<field>>/> <small>(<$text text=<<matches>>/>)</small></dt>\\n\\t\\t\\t<$list filter=<<searchFilter>> >\\n\\t\\t\\t\\t<dd><span title={{{[<searchConfigTid>getindex[live-preview]match[yes]] :then[<currentTiddler>get<field>] }}}><$link/></span></dd>\\n\\t\\t\\t</$list>\\n\\t\\t</dl>\\n\\t<%endif%>\\n<%endif%>\\n</$let>\\n\\\\end\\n\\n\\n<!-- display results -->\\n\\n<$let\\n selectedFields  = {{{ [<selectedFieldsTid>!is[missing]then<selectedFields>else<allFields>]  }}}\\n fields-filter   = {{{ [<selectedFieldsTid>get[allfld-status]match[all]then<allFields>else<selectedFields>] }}}\\n casesensitive   = {{{ [<searchFlagsTid>getindex[case-sensitive]] }}}\\n search-mode     = {{{ [<searchFlagsTid>getindex[search-mode]] :else[[words]]}}}\\n flag-list       = {{{ [<search-mode>] [<casesensitive>] +[!is[blank]join[,]] }}}\\n search-terms    = {{{ [<searchTid>get[text]else[]] }}}\\n filterMinLength = {{$:/config/Search/MinLength}}\\n>\\n\\n\\t<$list filter=\\\"[<search-terms>minlength<filterMinLength>limit[1]]\\\" emptyMessage={{{ [<search-terms>!is[blank]then[Search term is too short]] }}} variable=ignore>\\n\\t\\t<!-- generate the output -->\\n\\t\\t<div class=\\\"tc-search-results\\\">\\n\\t\\t\\t<$list filter=\\\"[subfilter<fields-filter>]\\\" variable=field>\\n\\t\\t\\t\\t<$transclude $variable=field-search field=<<field>> />\\n\\t\\t\\t</$list>\\n\\t\\t</div>\\n\\t</$list>\\n</$let>\"}}}"}