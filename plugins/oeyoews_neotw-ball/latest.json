{"title":"$:/plugins/oeyoews/neotw-ball","description":"neotw-ball","author":"oeyoews","version":"0.0.1","core-version":">=5.3.4","type":"application/json","plugin-type":"plugin","name":"neotw-ball","meat#disabled":"yes","qrcode":"yes","created":"2025/02/02","dependents":"","stability":"STABILITY_2_STABLE","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-ball/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-ball/readme\",\"description\":\"neotw-ball\",\"text\":\"[[在线文档|https://neotw.vercel.app/docs/plugins/neotw-ball]]\"},\"$:/plugins/oeyoews/neotw-ball/addEvent.js\":{\"title\":\"$:/plugins/oeyoews/neotw-ball/addEvent.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-ball/addEvent.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nmodule.exports=function(t){let e,n,i,o,d,s,c,l=!1;function a(s,c){d=Date.now(),l=!0,e=s,n=c,i=t.offsetLeft,o=t.offsetTop}function u(d,a){if(!l)return;let u=i+(d-e),h=o+(a-n);u=Math.max(0,Math.min(u,window.innerWidth-t.clientWidth)),h=Math.max(0,Math.min(h,window.innerHeight-t.clientHeight)),t.style.left=u+\\\"px\\\",t.style.top=h+\\\"px\\\",s=Math.abs(u-i),c=Math.abs(h-o)}function h(){l&&(l=!1,Date.now()-d<300&&s<5&&c<5?alert(\\\"点击了悬浮球！\\\"):t.offsetLeft+t.clientWidth/2>window.innerWidth/2?t.style.left=window.innerWidth-t.clientWidth+\\\"px\\\":t.style.left=\\\"0px\\\")}t.addEventListener(\\\"mousedown\\\",(t=>a(t.clientX,t.clientY))),document.addEventListener(\\\"mousemove\\\",(t=>l&&u(t.clientX,t.clientY))),document.addEventListener(\\\"mouseup\\\",h),t.addEventListener(\\\"touchstart\\\",(t=>{t.preventDefault(),a(t.touches[0].clientX,t.touches[0].clientY)}),{passive:!1}),document.addEventListener(\\\"touchmove\\\",(t=>{l&&(t.preventDefault(),u(t.touches[0].clientX,t.touches[0].clientY))}),{passive:!1}),document.addEventListener(\\\"touchend\\\",h)};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-ball/style.css\":{\"title\":\"$:/plugins/oeyoews/neotw-ball/style.css\",\"tags\":\"$:/tags/Stylesheet\",\"type\":\"text/css\",\"text\":\".drag-ball {\\n\\t--bg: rgba(0, 0, 0, 0.05);\\n\\tposition: fixed;\\n\\tz-index: 10003;\\n\\tright: 0;\\n\\ttop: 70%;\\n\\twidth: 50px;\\n\\theight: 50px;\\n\\t/* background: deepskyblue; */\\n\\t/* background-color: transparent; */\\n\\tborder-radius: 50%;\\n\\tbox-shadow: 0px 0px 5px 1px var(--bg) * 1.5;\\n\\tbackground-color: var(--bg);\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tcolor: #fff;\\n\\tfont-size: 14px;\\n\\tletter-spacing: 2px;\\n\\tuser-select: none;\\n\\tcursor: grab;\\n}\"},\"$:/plugins/oeyoews/neotw-ball/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-ball/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-ball/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-ball widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports.ball=class extends e{constructor(e,t){super(e,t)}render(e,t){if(!$tw.browser)return;if(this.computeAttributes(),this.execute(),this.document.isTiddlyWikiFakeDom)return;const r=$tw.utils.domMaker,s=require(\\\"./addEvent\\\"),i=r(\\\"div\\\",{class:\\\"drag-ball\\\"});i.innerHTML=$tw.wiki.renderTiddler(\\\"text/html\\\",\\\"$:/core/icon\\\",{parseAsInline:!0}),s(i),e.insertBefore(i,t),this.domNodes.push(i)}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}