{"title":"$:/plugins/oeyoews/neotw-ui","description":"neotw-ui","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"neotw-ui","meat#disabled":"yes","qrcode":"yes","created":"2024-06-16","dependents":"$:/plugins/oeyoews/neotw-vue3 $:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-ui/templates/app.vue\":{\"text\":\"<template>\\n  <h2 class=\\\"text-center\\\">配置</h2>\\n  <el-form :label-position=\\\"top\\\" label-width=\\\"auto\\\">\\n    <!-- title -->\\n    <el-form-item label=\\\"标题\\\" prop=\\\"title\\\" clearable>\\n      <el-input v-model=\\\"title\\\"></el-input>\\n    </el-form-item>\\n    <!-- subtitle -->\\n    <el-form-item label=\\\"副标题\\\" prop=\\\"subtitle\\\" clearable>\\n      <el-input v-model=\\\"subtitle\\\"></el-input>\\n    </el-form-item>\\n    <el-form-item label=\\\"字体大小\\\" prop=\\\"fontsize\\\">\\n      <el-select v-model=\\\"fontsize\\\">\\n        <el-option v-for=\\\"item in fontsizes\\\" :key=\\\"item\\\" :label=\\\"item\\\" :value=\\\"item\\\"></el-option>\\n      </el-select>\\n    </el-form-item>\\n  </el-form>\\n  <el-button @click=\\\"submit\\\">保存配置</el-button>\\n</template>\\n</template>\",\"title\":\"$:/plugins/oeyoews/neotw-ui/templates/app.vue\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/neotw-ui/plugins/TiddlyWikiVue.js\":{\"text\":\"module.exports = {\\n  install(app, options) {\\n    app.component('TiddlyWikiVue', {\\n      template: `<button> {{ msg }} </button>`,\\n      props: {\\n        msg: String\\n      }\\n    });\\n  }\\n};\\n\",\"title\":\"$:/plugins/oeyoews/neotw-ui/plugins/TiddlyWikiVue.js\",\"module-type\":\"library\",\"type\":\"application/javascript\"},\"$:/plugins/oeyoews/neotw-ui/components/Version.js\":{\"text\":\"module.exports = {\\n  name: 'Version',\\n  props: {\\n    version: {\\n      type: String,\\n      default: '5.3.2'\\n    }\\n  },\\n  template: `<span> {{ version }} </span>`\\n};\\n\",\"title\":\"$:/plugins/oeyoews/neotw-ui/components/Version.js\",\"module-type\":\"library\",\"type\":\"application/javascript\"},\"$:/plugins/oeyoews/neotw-ui/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-ui/readme\",\"description\":\"neotw-ui\",\"text\":\"[[在线文档|https://tiddlywiki-starter-kit.oeyoews.top/docs/plugins/neotw-ui]]\"},\"$:/plugins/oeyoews/neotw-ui/app.js\":{\"title\":\"$:/plugins/oeyoews/neotw-ui/app.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-ui/app.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\n\\nconst { ref } = window.Vue;\\n\\nconst getTemplate = require('$:/plugins/oeyoews/neotw-vue3/getTemplate.js');\\n\\nconst Version = require('./components/Version');\\nconst ElementPlus = require('element-plus.min.js');\\n\\nconst tids = {\\n  siteTitle: '$:/SiteTitle',\\n  siteSubTitle: '$:/SiteSubtitle',\\n  fontsize: '$:/themes/tiddlywiki/vanilla/metrics/fontsize',\\n};\\n\\nconst getconf = (title) => {\\n  return $tw.wiki.getTiddlerText(title);\\n};\\n\\nconst updateconf = (title, data) => {\\n  return $tw.wiki.setText(title, 'text', null, data);\\n};\\n\\nconst app = () => {\\n  const component = {\\n    data() {\\n      const fontsizes = ['14px', '16px', '18px', '20px', '22px', '24px'];\\n      return { title: '', subtitle: '', fontsize: '', fontsizes };\\n    },\\n\\n    created() {\\n      // 用户标题\\n      this.title = getconf(tids.siteTitle);\\n      // 用户副标题\\n      this.subtitle = getconf(tids.siteSubTitle);\\n      // 字体大小\\n      this.fontsize = getconf(tids.fontsize);\\n    },\\n\\n    computed: {},\\n\\n    methods: {\\n      submit() {\\n        updateconf(tids.siteTitle, this.title);\\n        updateconf(tids.siteSubTitle, this.subtitle);\\n        updateconf(tids.fontsize, this.fontsize);\\n        this.notify();\\n      },\\n\\n      notify() {\\n        ElementPlus.ElMessage({\\n          message: '操作成功',\\n          type: 'success',\\n        });\\n      },\\n    },\\n\\n    template: getTemplate('$:/plugins/oeyoews/neotw-ui/templates/app.vue'),\\n\\n    components: {\\n      Version,\\n    },\\n  };\\n  return component;\\n};\\n\\nmodule.exports = app;\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-ui/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-ui/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-ui/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-ui widget\\n\\n\\\\*/\\nconst { widget: Widget } = require('$:/core/modules/widgets/widget.js');\\n\\nclass ExampleWidget extends Widget {\\n  constructor(parseTreeNode, options) {\\n    super(parseTreeNode, options);\\n  }\\n\\n  render(parent, nextSibling) {\\n    if (!$tw.browser) return;\\n\\n    this.computeAttributes();\\n    this.execute();\\n\\n    const ssr = this.document.isTiddlyWikiFakeDom;\\n    if (ssr) return;\\n\\n    const vuelib = '$:/plugins/oeyoews/neotw-vue3/vue.global.prod.js';\\n    const ElementPlus = require('element-plus.min.js');\\n\\n    if (!window.Vue) {\\n      window.Vue = require(vuelib);\\n    }\\n\\n    const { createApp } = window.Vue;\\n    const component = require('./app');\\n    const domNode = this.document.createElement('div');\\n    const TiddlyWikiVue = require('./plugins/TiddlyWikiVue');\\n\\n    try {\\n      const app = createApp(component());\\n\\n      app.use(TiddlyWikiVue);\\n      app.use(ElementPlus);\\n\\n      app.config.errorHandler = (err) => {\\n        const text = `[Vue3](${app.version}): ` + err.message;\\n        console.error(text);\\n        domNode.textContent = text;\\n        domNode.style.color = 'red';\\n      };\\n\\n      // 挂载\\n      app.mount(domNode);\\n\\n      parent.insertBefore(domNode, nextSibling);\\n      this.domNodes.push(domNode);\\n    } catch (e) {\\n      console.error(e.message);\\n    }\\n  }\\n\\n  // TIP: 界面由 vue 接管， 不要在这里刷新\\n  refresh() {\\n    return false;\\n  }\\n}\\n\\n/** @description neotw-ui widget */\\nexports['neotw-ui'] = ExampleWidget;\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}