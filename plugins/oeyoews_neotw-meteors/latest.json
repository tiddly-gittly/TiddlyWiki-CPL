{"title":"$:/plugins/oeyoews/neotw-meteors","description":"neotw-meteors","author":"oeyoews","version":"0.0.1","core-version":">=5.3.4","type":"application/json","plugin-type":"plugin","name":"neotw-meteors","meat#disabled":"yes","qrcode":"yes","created":"2024/11-03","dependents":"","stability":"STABILITY_2_STABLE","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-meteors/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-meteors/readme\",\"description\":\"neotw-meteors\",\"text\":\"[[在线文档|https://neotw.vercel.app/docs/plugins/neotw-meteors]]\"},\"$:/plugins/oeyoews/neotw-meteors/styles.css\":{\"title\":\"$:/plugins/oeyoews/neotw-meteors/styles.css\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\"@keyframes meteor {\\n    0% {\\n      transform: rotate(215deg) translateX(0);\\n      opacity: 1;\\n    }\\n    70% {\\n      opacity: 1;\\n    }\\n    100% {\\n      transform: rotate(215deg) translateX(-500px);\\n      opacity: 0;\\n    }\\n  }\\n.animate-meteor {\\n    animation: meteor 5s linear infinite;\\n}\"},\"$:/plugins/oeyoews/neotw-meteors/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-meteors/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-meteors/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-meteors widget\\n\\n\\\\*/\\nconst { widget: Widget } = require('$:/core/modules/widgets/widget.js');\\n\\nclass MeteorsWidget extends Widget {\\n  constructor(parseTreeNode, options) {\\n    super(parseTreeNode, options);\\n  }\\n\\n  render(parent, nextSibling) {\\n    if (!$tw.browser) return;\\n\\n    this.computeAttributes();\\n    this.execute();\\n\\n    const ssr = this.document.isTiddlyWikiFakeDom;\\n    if (ssr) return;\\n\\n    const createElement = $tw.utils.domMaker;\\n\\n    const meteorContainer = createElement('div', {\\n      class:\\n        'absolute pointer-events-none h-full inset-x-0 hidden dark:block z-[-1] overflow-hidden',\\n    });\\n    function getRandomPosition(max) {\\n      return `${Math.floor(Math.random() * max)}px `;\\n    }\\n\\n    function getRandomDelay() {\\n      return `${(Math.random() * 1 + 0.2).toFixed(2)}s`;\\n    }\\n\\n    function getRandomDuration() {\\n      return `${Math.floor(Math.random() * 8 + 2)}s`;\\n    }\\n    const meteorCount = 20;\\n    for (let i = 0; i < meteorCount; i++) {\\n      const meteor = document.createElement('div');\\n      meteor.className = 'absolute';\\n\\n      const span = document.createElement('span');\\n      // rotate-[215deg]\\n      span.className =\\n        'pointer-events-none absolute size-0.5 animate-meteor rounded-full bg-slate-500 shadow-[0_0_0_1px_#ffffff10]';\\n\\n      // 随机位置、延迟、动画时长\\n      span.style.top = '-5px';\\n      span.style.left = getRandomPosition(window.innerWidth);\\n      span.style.animationDelay = getRandomDelay();\\n      span.style.animationDuration = getRandomDuration();\\n      span.style.opacity = 0;\\n\\n      // 添加流星尾巴\\n      const tail = document.createElement('div');\\n      tail.className =\\n        'pointer-events-none absolute top-1/2 -z-10 h-px w-[50px] -translate-y-1/2 bg-gradient-to-r from-slate-500 to-transparent';\\n\\n      // 结构拼装\\n      span.appendChild(tail);\\n      meteor.appendChild(span);\\n      meteorContainer.appendChild(meteor);\\n    }\\n\\n    parent.insertBefore(meteorContainer, nextSibling);\\n    this.domNodes.push(meteorContainer);\\n  }\\n}\\n\\n/** @description neotw-meteors widget */\\nexports['neotw-meteors'] = MeteorsWidget;\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}