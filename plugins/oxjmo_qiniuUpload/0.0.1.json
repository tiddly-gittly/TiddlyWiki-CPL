{"author":"oxjmo","dependents":"","description":"一键上传七牛云","list":"readme tree config","name":"qiniuUpload","plugin-type":"plugin","text":"{\"tiddlers\":{\"$:/plugins/oxjmo/qiniuUpload/config\":{\"title\":\"$:/plugins/oxjmo/qiniuUpload/config\",\"tags\":\"$:/tags/ControlPanel/SettingsTab\",\"caption\":\"qiniuUpload\",\"text\":\"<$QiniuConfigWidget />\"},\"$:/language/Buttons/Upload/notifier\":{\"title\":\"$:/language/Buttons/Upload/notifier\",\"message\":\"\",\"text\":\"{{!!message}}\"},\"$:/plugins/oxjmo/qiniuUpload/readme\":{\"title\":\"$:/plugins/oxjmo/qiniuUpload/readme\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"!!! ''介绍''\\n* 该项目为tiddlywiki插件，用于一键七牛云上传。\\n* 使用这个项目，只需要填写完配置项，就可以直接打包上传到七牛云，无需再做其他多余操作。\\n  * 相当于把七牛云作为服务器了，每次上传会覆盖之前的文件，达到实时更新的效果。\\n  * 麻烦的是每台电脑都需要配置七牛云配置。\\n\\n!!! ''准备''\\n* 需要注册一个七牛云账号。\\n* 新建对象存储，新建空间，需要绑定域名哦。\\n* 前往密钥管理创建新的密钥。\\n* 设置域名管理-缓存配置-缓存时间 设置为 5分钟。\\n\\n!!! ''打包插件''\\n```bash\\n# 安装依赖\\nnpm i\\n\\n# 开发调试\\nnpm run dev\\n\\n# 打开\\nnpm run build\\n```\\n\\n!!! ''插件配置介绍''\\n* `accessKey` 密钥管理的 accessKey\\n* `secretkey` 密钥管理的 secretkey\\n* `bucketName` 空间名称\\n* `targetPath` 文件路径例如 test/index.html\\n* `region` 选择空间\"},\"$:/plugins/oxjmo/qiniuUpload/tree\":{\"title\":\"$:/plugins/oxjmo/qiniuUpload/tree\",\"text\":\"<<tree prefix:\\\"$:/plugins/oxjmo/qiniuUpload/\\\">>\"},\"$:/core/ui/Buttons/upload\":{\"title\":\"$:/core/ui/Buttons/upload\",\"tags\":\"$:/tags/PageControls\",\"text\":\"\\\\whitespace trim\\r\\n<$button tooltip=\\\"上传七牛云\\\" aria-label=\\\"上传七牛云\\\" class=<<tv-config-toolbar-class>>>\\r\\n  <$QiniuUploadWidget />\\r\\n</$button>\\r\\n\"},\"$:/plugins/oxjmo/qiniuUpload/Widget.js\":{\"title\":\"$:/plugins/oxjmo/qiniuUpload/Widget.js\",\"type\":\"application/javascript\",\"module-type\":\"widget\",\"Modern.TiddlyDev#Origin\":\"Widget.ts\",\"text\":\"\\\"use strict\\\";var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__esm=(t,e)=>function(){return e=t?(0,t[__getOwnPropNames(t)[0]])(t=0):e},__commonJS=(t,e)=>function(){return e||(0,t[__getOwnPropNames(t)[0]])((e={exports:{}}).exports,e),e.exports},__copyProps=(e,r,n,i)=>{if(r&&\\\"object\\\"==typeof r||\\\"function\\\"==typeof r)for(let t of __getOwnPropNames(r))__hasOwnProp.call(e,t)||t===n||__defProp(e,t,{get:()=>r[t],enumerable:!(i=__getOwnPropDesc(r,t))||i.enumerable});return e},__toESM=(t,e,r)=>(r=null!=t?__create(__getProtoOf(t)):{},__copyProps(!e&&t&&t.__esModule?r:__defProp(r,\\\"default\\\",{value:t,enumerable:!0}),t)),init_esbuild_inject=__esm({\\\"node_modules/.store/tiddlywiki-plugin-dev@0.2.1/node_modules/tiddlywiki-plugin-dev/dist/js/esbuild-inject.js\\\"(){}}),require_getQiniuToken=__commonJS({\\\"src/qiniuUpload/getQiniuToken.js\\\"(t,e){var r,n;init_esbuild_inject(),n=()=>{return r={0:(t,e)=>{e.byteLength=function(t){var e=c(t),r=e[0],e=e[1];return 3*(r+e)/4-e},e.toByteArray=function(t){for(var e,r=c(t),n=r[0],r=r[1],i=new h(3*(n+r)/4-r),o=0,s=0<r?n-4:n,a=0;a<s;a+=4)e=f[t.charCodeAt(a)]<<18|f[t.charCodeAt(a+1)]<<12|f[t.charCodeAt(a+2)]<<6|f[t.charCodeAt(a+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=255&e;return 2===r&&(e=f[t.charCodeAt(a)]<<2|f[t.charCodeAt(a+1)]>>4,i[o++]=255&e),1===r&&(e=f[t.charCodeAt(a)]<<10|f[t.charCodeAt(a+1)]<<4|f[t.charCodeAt(a+2)]>>2,i[o++]=e>>8&255,i[o++]=255&e),i},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(function(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(u[(n=n)>>18&63]+u[n>>12&63]+u[n>>6&63]+u[63&n]);return i.join(\\\"\\\")}(t,s,a<s+o?a:s+o));return 1==n?(e=t[r-1],i.push(u[e>>2]+u[e<<4&63]+\\\"==\\\")):2==n&&(e=(t[r-2]<<8)+t[r-1],i.push(u[e>>10]+u[e>>4&63]+u[e<<2&63]+\\\"=\\\")),i.join(\\\"\\\")};for(var u=[],f=[],h=\\\"undefined\\\"!=typeof Uint8Array?Uint8Array:Array,r=\\\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\\\",n=0;n<64;++n)u[n]=r[n],f[r.charCodeAt(n)]=n;function c(t){var e=t.length;if(0<e%4)throw new Error(\\\"Invalid string. Length must be a multiple of 4\\\");var r=t.indexOf(\\\"=\\\");return[r=-1===r?e:r,r===e?0:4-r%4]}f[\\\"-\\\".charCodeAt(0)]=62,f[\\\"_\\\".charCodeAt(0)]=63},737:(t,e)=>{e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,h=-7,c=r?i-1:0,p=r?-1:1,l=t[e+c];for(c+=p,o=l&(1<<-h)-1,l>>=-h,h+=a;0<h;o=256*o+t[e+c],c+=p,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;0<h;s=256*s+t[e+c],c+=p,h-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,n),o-=f}return(l?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,f=8*o-i-1,h=(1<<f)-1,c=h>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:o-1,g=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(e+=1<=s+c?p/u:p*Math.pow(2,1-c))*u&&(s++,u/=2),h<=s+c?(a=0,s=h):1<=s+c?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));8<=i;t[r+l]=255&a,l+=g,a/=256,i-=8);for(s=s<<i|a,f+=i;0<f;t[r+l]=255&s,l+=g,s/=256,f-=8);t[r+l-g]|=128*y}},285:(t,r,e)=>{var E=e(0),o=e(737),n=\\\"function\\\"==typeof Symbol&&\\\"function\\\"==typeof Symbol[\\\"for\\\"]?Symbol[\\\"for\\\"](\\\"nodejs.util.inspect.custom\\\"):null,i=(r.Buffer=c,r.SlowBuffer=function(t){return c.alloc(+(t=+t!=t?0:t))},r.INSPECT_MAX_BYTES=50,2147483647);function h(t){if(i<t)throw new RangeError('The value \\\"'+t+'\\\" is invalid for option \\\"size\\\"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,r){if(\\\"number\\\"!=typeof t)return s(t,e,r);if(\\\"string\\\"==typeof e)throw new TypeError('The \\\"string\\\" argument must be of type string. Received type number');return u(t)}function s(t,e,r){if(\\\"string\\\"==typeof t){var n=t,i=e;if(c.isEncoding(i=\\\"string\\\"==typeof i&&\\\"\\\"!==i?i:\\\"utf8\\\"))return(a=(u=h(s=0|g(n,i))).write(n,i))!==s?u.slice(0,a):u;throw new TypeError(\\\"Unknown encoding: \\\"+i)}if(ArrayBuffer.isView(t))return p(t);if(null!=t){if(I(t,ArrayBuffer)||t&&I(t.buffer,ArrayBuffer)){n=t;i=e;var o=r;if(i<0||n.byteLength<i)throw new RangeError('\\\"offset\\\" is outside of buffer bounds');if(n.byteLength<i+(o||0))throw new RangeError('\\\"length\\\" is outside of buffer bounds');var s=void 0===i&&void 0===o?new Uint8Array(n):void 0===o?new Uint8Array(n,i):new Uint8Array(n,i,o);return Object.setPrototypeOf(s,c.prototype),s;return}if(\\\"number\\\"==typeof t)throw new TypeError('The \\\"value\\\" argument must not be of type number. Received type number');var a=t.valueOf&&t.valueOf();if(null!=a&&a!==t)return c.from(a,e,r);var u,f=c.isBuffer(o=t)?(0!==(f=h(u=0|l(o.length))).length&&o.copy(f,0,0,u),f):void 0!==o.length?\\\"number\\\"!=typeof o.length||M(o.length)?h(0):p(o):\\\"Buffer\\\"===o.type&&Array.isArray(o.data)?p(o.data):void 0;if(f)return f;if(\\\"undefined\\\"!=typeof Symbol&&null!=Symbol.toPrimitive&&\\\"function\\\"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive](\\\"string\\\"),e,r)}throw new TypeError(\\\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type \\\"+typeof t)}function a(t){if(\\\"number\\\"!=typeof t)throw new TypeError('\\\"size\\\" argument must be of type number');if(t<0)throw new RangeError('The value \\\"'+t+'\\\" is invalid for option \\\"size\\\"')}function u(t){return a(t),h(t<0?0:0|l(t))}function p(t){for(var e=t.length<0?0:0|l(t.length),r=h(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t){if(i<=t)throw new RangeError(\\\"Attempt to allocate Buffer larger than maximum size: 0x\\\"+i.toString(16)+\\\" bytes\\\");return 0|t}function g(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||I(t,ArrayBuffer))return t.byteLength;if(\\\"string\\\"!=typeof t)throw new TypeError('The \\\"string\\\" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case\\\"ascii\\\":case\\\"latin1\\\":case\\\"binary\\\":return r;case\\\"utf8\\\":case\\\"utf-8\\\":return k(t).length;case\\\"ucs2\\\":case\\\"ucs-2\\\":case\\\"utf16le\\\":case\\\"utf-16le\\\":return 2*r;case\\\"hex\\\":return r>>>1;case\\\"base64\\\":return U(t).length;default:if(i)return n?-1:k(t).length;e=(\\\"\\\"+e).toLowerCase(),i=!0}}function f(t,e,r){var n=!1;if((e=void 0===e||e<0?0:e)>this.length)return\\\"\\\";if((r=void 0===r||r>this.length?this.length:r)<=0)return\\\"\\\";if((r>>>=0)<=(e>>>=0))return\\\"\\\";for(t=t||\\\"utf8\\\";;)switch(t){case\\\"hex\\\":var i=this,o=e,s=r,a=i.length;(!s||s<0||a<s)&&(s=a);for(var u=\\\"\\\",f=o=!o||o<0?0:o;f<s;++f)u+=P[i[f]];return u;case\\\"utf8\\\":case\\\"utf-8\\\":return x(this,e,r);case\\\"ascii\\\":var h=this,o=e,c=r,p=\\\"\\\";c=Math.min(h.length,c);for(var l=o;l<c;++l)p+=String.fromCharCode(127&h[l]);return p;case\\\"latin1\\\":case\\\"binary\\\":var g=this,y=e,d=r,w=\\\"\\\";d=Math.min(g.length,d);for(var v=y;v<d;++v)w+=String.fromCharCode(g[v]);return w;case\\\"base64\\\":return y=this,b=r,0===(m=e)&&b===y.length?E.fromByteArray(y):E.fromByteArray(y.slice(m,b));case\\\"ucs2\\\":case\\\"ucs-2\\\":case\\\"utf16le\\\":case\\\"utf-16le\\\":for(var m=e,b=r,_=this.slice(m,b),B=\\\"\\\",A=0;A<_.length;A+=2)B+=String.fromCharCode(_[A]+256*_[A+1]);return B;default:if(n)throw new TypeError(\\\"Unknown encoding: \\\"+t);t=(t+\\\"\\\").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function d(t,e,r,n,i){if(0===t.length)return-1;if(\\\"string\\\"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=M(r=+r)?i?0:t.length-1:r)<0&&(r=t.length+r),t.length<=r){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if(\\\"string\\\"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:w(t,e,r,n,i);if(\\\"number\\\"==typeof e)return e&=255,\\\"function\\\"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,r):w(t,[e],r,n,i);throw new TypeError(\\\"val must be string, number or Buffer\\\")}function w(t,e,r,n,i){var o=1,s=t.length,a=e.length;if(void 0!==n&&(\\\"ucs2\\\"===(n=String(n).toLowerCase())||\\\"ucs-2\\\"===n||\\\"utf16le\\\"===n||\\\"utf-16le\\\"===n)){if(t.length<2||e.length<2)return-1;s/=o=2,a/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var f=-1,h=r;h<s;h++)if(u(t,h)===u(e,-1===f?0:h-f)){if(h-(f=-1===f?h:f)+1===a)return f*o}else-1!==f&&(h-=h-f),f=-1;else for(h=r=s<r+a?s-a:r;0<=h;h--){for(var c=!0,p=0;p<a;p++)if(u(t,h+p)!==u(e,p)){c=!1;break}if(c)return h}return-1}function m(t,e,r,n){return C(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,f=t[i],h=null,c=239<f?4:223<f?3:191<f?2:1;if(i+c<=r)switch(c){case 1:f<128&&(h=f);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&f)<<6|63&o)&&(h=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&f)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(h=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(h=u)}null===h?(h=65533,c=1):65535<h&&(n.push((h-=65536)>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=c}var p=n,l=p.length;if(l<=v)return String.fromCharCode.apply(String,p);for(var g=\\\"\\\",y=0;y<l;)g+=String.fromCharCode.apply(String,p.slice(y,y+=v));return g}r.kMaxLength=i,(c.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(r){return!1}}())||\\\"undefined\\\"==typeof console||\\\"function\\\"!=typeof console.error||console.error(\\\"This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.\\\"),Object.defineProperty(c.prototype,\\\"parent\\\",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,\\\"offset\\\",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),\\\"undefined\\\"!=typeof Symbol&&null!=Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=s,Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,r){return e=e,r=r,a(t=t),!(t<=0)&&void 0!==e?\\\"string\\\"==typeof r?h(t).fill(e,r):h(t).fill(e):h(t)},c.allocUnsafe=u,c.allocUnsafeSlow=u,c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(I(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),I(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The \\\"buf1\\\", \\\"buf2\\\" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case\\\"hex\\\":case\\\"utf8\\\":case\\\"utf-8\\\":case\\\"ascii\\\":case\\\"latin1\\\":case\\\"binary\\\":case\\\"base64\\\":case\\\"ucs2\\\":case\\\"ucs-2\\\":case\\\"utf16le\\\":case\\\"utf-16le\\\":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('\\\"list\\\" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var r=c.allocUnsafe(e),n=0,i=0;i<t.length;++i){var o=t[i];if(I(o,Uint8Array)&&(o=c.from(o)),!c.isBuffer(o))throw new TypeError('\\\"list\\\" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError(\\\"Buffer size must be a multiple of 16-bits\\\");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError(\\\"Buffer size must be a multiple of 32-bits\\\");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError(\\\"Buffer size must be a multiple of 64-bits\\\");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},c.prototype.toLocaleString=c.prototype.toString=function(){var t=this.length;return 0===t?\\\"\\\":0===arguments.length?x(this,0,t):f.apply(this,arguments)},c.prototype.equals=function(t){if(c.isBuffer(t))return this===t||0===c.compare(this,t);throw new TypeError(\\\"Argument must be a Buffer\\\")},c.prototype.inspect=function(){var t=\\\"\\\",e=r.INSPECT_MAX_BYTES,t=this.toString(\\\"hex\\\",0,e).replace(/(.{2})/g,\\\"$1 \\\").trim();return this.length>e&&(t+=\\\" ... \\\"),\\\"<Buffer \\\"+t+\\\">\\\"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(t,e,r,n,i){if(I(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The \\\"target\\\" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(e=void 0===e?0:e)<0||r>t.length||n<0||i>this.length)throw new RangeError(\\\"out of range index\\\");if(i<=n&&r<=e)return 0;if(i<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(n,i),f=t.slice(e,r),h=0;h<a;++h)if(u[h]!==f[h]){o=u[h],s=f[h];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return d(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return d(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n=\\\"utf8\\\",r=this.length,e=0;else if(void 0===r&&\\\"string\\\"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error(\\\"Buffer.write(string, encoding, offset[, length]) is no longer supported\\\");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n=\\\"utf8\\\")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||i<r)&&(r=i),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError(\\\"Attempt to write outside buffer bounds\\\");n=n||\\\"utf8\\\";for(var o,s,a,u,f,h,c=!1;;)switch(n){case\\\"hex\\\":var p=this,l=t,g=e,y=r,d=(g=Number(g)||0,p.length-g);(!y||(y=Number(y))>d)&&(y=d),(d=l.length)/2<y&&(y=d/2);for(var w=0;w<y;++w){var v=parseInt(l.substr(2*w,2),16);if(M(v))return w;p[g+w]=v}return w;case\\\"utf8\\\":case\\\"utf-8\\\":return f=e,h=r,C(k(t,(u=this).length-f),u,f,h);case\\\"ascii\\\":return m(this,t,e,r);case\\\"latin1\\\":case\\\"binary\\\":return m(this,t,e,r);case\\\"base64\\\":return u=this,f=e,h=r,C(U(t),u,f,h);case\\\"ucs2\\\":case\\\"ucs-2\\\":case\\\"utf16le\\\":case\\\"utf-16le\\\":return s=e,a=r,C(function(t,e){for(var r,n,i=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(t,(o=this).length-s),o,s,a);default:if(c)throw new TypeError(\\\"Unknown encoding: \\\"+n);n=(\\\"\\\"+n).toLowerCase(),c=!0}},c.prototype.toJSON=function(){return{type:\\\"Buffer\\\",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function b(t,e,r){if(t%1!=0||t<0)throw new RangeError(\\\"offset is not uint\\\");if(r<t+e)throw new RangeError(\\\"Trying to access beyond buffer length\\\")}function _(t,e,r,n,i,o){if(!c.isBuffer(t))throw new TypeError('\\\"buffer\\\" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('\\\"value\\\" argument is out of bounds');if(r+n>t.length)throw new RangeError(\\\"Index out of range\\\")}function B(t,e,r,n){if(r+n>t.length)throw new RangeError(\\\"Index out of range\\\");if(r<0)throw new RangeError(\\\"Index out of range\\\")}function A(t,e,r,n,i){return e=+e,r>>>=0,i||B(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function S(t,e,r,n,i){return e=+e,r>>>=0,i||B(t,0,r,8),o.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){var r=this.length,r=((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),this.subarray(t,e));return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||b(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},c.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||b(t,e,this.length);for(var n=this[t+--e],i=1;0<e&&(i*=256);)n+=this[t+--e]*i;return n},c.prototype.readUInt8=function(t,e){return t>>>=0,e||b(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||b(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||b(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||b(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||b(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||b(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||b(t,e,this.length);for(var n=e,i=1,o=this[t+--n];0<n&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return t>>>=0,e||b(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||b(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){t>>>=0,e||b(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||b(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||b(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return t>>>=0,e||b(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||b(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||b(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||b(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||_(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||_(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeIntLE=function(t,e,r,n){t=+t,e>>>=0,n||_(this,t,e,r,(i=Math.pow(2,8*r-1))-1,-i);var i,o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){t=+t,e>>>=0,n||_(this,t,e,r,(i=Math.pow(2,8*r-1))-1,-i);var i,o=r-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,1,127,-128),this[e]=255&(t=t<0?255+t+1:t),e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,2147483647,-2147483648),this[e]=(t=t<0?4294967295+t+1:t)>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeFloatLE=function(t,e,r){return A(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return A(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return S(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return S(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(!c.isBuffer(t))throw new TypeError(\\\"argument should be a Buffer\\\");if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError(\\\"targetStart out of bounds\\\");if(r<0||r>=this.length)throw new RangeError(\\\"Index out of range\\\");if(n<0)throw new RangeError(\\\"sourceEnd out of bounds\\\");n>this.length&&(n=this.length);var i=(n=t.length-e<n-r?t.length-e+r:n)-r;if(this===t&&\\\"function\\\"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var o=i-1;0<=o;--o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},c.prototype.fill=function(t,e,r,n){if(\\\"string\\\"==typeof t){if(\\\"string\\\"==typeof e?(n=e,e=0,r=this.length):\\\"string\\\"==typeof r&&(n=r,r=this.length),void 0!==n&&\\\"string\\\"!=typeof n)throw new TypeError(\\\"encoding must be a string\\\");if(\\\"string\\\"==typeof n&&!c.isEncoding(n))throw new TypeError(\\\"Unknown encoding: \\\"+n);var i;1===t.length&&(i=t.charCodeAt(0),\\\"utf8\\\"===n&&i<128||\\\"latin1\\\"===n)&&(t=i)}else\\\"number\\\"==typeof t?t&=255:\\\"boolean\\\"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError(\\\"Out of range index\\\");var o;if(!(r<=e))if(e>>>=0,r=void 0===r?this.length:r>>>0,\\\"number\\\"==typeof(t=t||0))for(o=e;o<r;++o)this[o]=t;else{var s=c.isBuffer(t)?t:c.from(t,n),a=s.length;if(0===a)throw new TypeError('The value \\\"'+t+'\\\" is invalid for argument \\\"value\\\"');for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var O=/[^+/0-9A-Za-z-_]/g;function k(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!i){if(56319<r){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(e-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,r<128){if(--e<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error(\\\"Invalid code point\\\");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function U(t){return E.toByteArray(function(t){if((t=(t=t.split(\\\"=\\\")[0]).trim().replace(O,\\\"\\\")).length<2)return\\\"\\\";for(;t.length%4!=0;)t+=\\\"=\\\";return t}(t))}function C(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function I(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function M(t){return t!=t}var P=function(){for(var t=\\\"0123456789abcdef\\\",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}();t.exports=c},406:function(t,e){var f,r,n,i,o,h,s,a,u,c,p,l;t.exports=(f=Math,r=Object.create||function(){function r(){}return function(t){var e;return r.prototype=t,e=new r,r.prototype=null,e}}(),i=(n={}).lib={},o=i.Base={extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty(\\\"init\\\")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty(\\\"toString\\\")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},h=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=s<<24-(n+o)%4*8}else for(o=0;o<i;o+=4)e[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=f.ceil(e/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4){var n=function(t){var e=987654321,r=4294967295;return function(){return((((e=36969*(65535&e)+(e>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r)/4294967296+.5)*(.5<f.random()?1:-1)}}(4294967296*(i||f.random())),i=987654071*n();e.push(4294967296*n()|0)}return new h.init(e,t)}}),s=n.enc={},a=s.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join(\\\"\\\")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new h.init(r,e/2)}},u=s.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join(\\\"\\\")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new h.init(r,e)}},c=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw new Error(\\\"Malformed UTF-8 data\\\")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},p=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(t){\\\"string\\\"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,r=e.words,n=e.sigBytes,i=this.blockSize,o=n/(4*i),s=(t?f.ceil(o):f.max((0|o)-this._minBufferSize,0))*i,o=f.min(4*s,n);if(s){for(var a=0;a<s;a+=i)this._doProcessBlock(r,a);var u=r.splice(0,s);e.sigBytes-=o}return new h.init(u,o)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),i.Hasher=p.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(t,e){return new r.init(e).finalize(t)}},_createHmacHelper:function(r){return function(t,e){return new l.HMAC.init(r,e).finalize(t)}}}),l=n.algo={},n)},321:function(t,e,r){var n,g;t.exports=(n=r(406),g=n.lib.WordArray,n.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var i=[],o=0;o<r;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<r;a++)i.push(n.charAt(s>>>6*(3-a)&63));var u=n.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join(\\\"\\\")},parse:function(t){var e=t.length,r=this._map;if(!(n=this._reverseMap))for(var n=this._reverseMap=[],i=0;i<r.length;i++)n[r.charCodeAt(i)]=i;for(var o,s,a=r.charAt(64),u=(a&&-1!==(a=t.indexOf(a))&&(e=a),t),f=e,h=n,c=[],p=0,l=0;l<f;l++)l%4&&(o=h[u.charCodeAt(l-1)]<<l%4*2,s=h[u.charCodeAt(l)]>>>6-l%4*2,c[p>>>2]|=(o|s)<<24-p%4*8,p++);return g.create(c,p)},_map:\\\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\\"},n.enc.Base64)},90:t=>{a=Math,e=(d={}).lib={},r=function(){},n=e.Base={extend:function(t){r.prototype=this;var e=new r;return t&&e.mixIn(t),e.hasOwnProperty(\\\"init\\\")||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty(\\\"toString\\\")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},u=e.WordArray=n.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||i).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var i=0;i<t;i++)e[n+i>>>2]|=(r[i>>>2]>>>24-i%4*8&255)<<24-(n+i)%4*8;else if(65535<r.length)for(i=0;i<t;i+=4)e[n+i>>>2]=r[i>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=a.ceil(e/4)},clone:function(){var t=n.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(4294967296*a.random()|0);return new u.init(e,t)}}),p=d.enc={},i=p.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++){var i=e[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join(\\\"\\\")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new u.init(r,e/2)}},o=p.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++)r.push(String.fromCharCode(e[n>>>2]>>>24-n%4*8&255));return r.join(\\\"\\\")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new u.init(r,e)}},s=p.Utf8={stringify:function(t){try{return decodeURIComponent(escape(o.stringify(t)))}catch(e){throw Error(\\\"Malformed UTF-8 data\\\")}},parse:function(t){return o.parse(unescape(encodeURIComponent(t)))}},f=e.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){\\\"string\\\"==typeof t&&(t=s.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,r=e.words,n=e.sigBytes,i=this.blockSize,o=n/(4*i);if(t=(t?a.ceil(o):a.max((0|o)-this._minBufferSize,0))*i,n=a.min(4*t,n),t){for(var s=0;s<t;s+=i)this._doProcessBlock(r,s);s=r.splice(0,t),e.sigBytes-=n}return new u.init(s,n)},clone:function(){var t=n.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),e.Hasher=f.extend({cfg:n.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(t,e){return new r.init(e).finalize(t)}},_createHmacHelper:function(r){return function(t,e){return new h.HMAC.init(r,e).finalize(t)}}}),h=d.algo={};var a,e,r,n,u,i,o,s,f,h,c,p=d,l=(d=(e=p).lib).WordArray,g=d.Hasher,y=[],d=e.algo.SHA1=g.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r,n=this._hash.words,i=n[0],o=n[1],s=n[2],a=n[3],u=n[4],f=0;f<80;f++)f<16?y[f]=0|t[e+f]:(r=y[f-3]^y[f-8]^y[f-14]^y[f-16],y[f]=r<<1|r>>>31),r=(i<<5|i>>>27)+u+y[f],r=f<20?r+(1518500249+(o&s|~o&a)):f<40?r+(1859775393+(o^s^a)):f<60?r+((o&s|o&a|s&a)-1894007588):r+((o^s^a)-899497514),u=a,a=s,s=o<<30|o>>>2,o=i,i=r;n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(64+n>>>9<<4)]=Math.floor(r/4294967296),e[15+(64+n>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=g.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=g._createHelper(d),e.HmacSHA1=g._createHmacHelper(d),c=p.enc.Utf8,p.algo.HMAC=p.lib.Base.extend({init:function(t,e){t=this._hasher=new t.init,\\\"string\\\"==typeof e&&(e=c.parse(e));var r=t.blockSize,n=4*r;(e=e.sigBytes>n?t.finalize(e):e).clamp();for(var i=this._oKey=e.clone(),o=this._iKey=e.clone(),s=i.words,a=o.words,u=0;u<r;u++)s[u]^=1549556828,a[u]^=909522486;i.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}}),t.exports=p},44:(t,e,r)=>{const i=r(285),o=r(90),s=r(321),a=t=>t.replace(/\\\\//g,\\\"_\\\").replace(/\\\\+/g,\\\"-\\\");t.exports=t=>{var{accessKey:e,secretkey:r,scope:n}=t,n={scope:n,deadline:Date.parse(new Date)+36e4},n=JSON.stringify(n),n=i.from(n).toString(\\\"base64\\\"),n=a(n),r=o.HmacSHA1(n,r),r=s.stringify(r);return e+\\\":\\\"+a(r)+\\\":\\\"+n}}},n={},function i(t){var e=n[t];return void 0!==e||(e=n[t]={exports:{}},r[t].call(e.exports,e,e.exports,i)),e.exports}(44);var r,n},\\\"object\\\"==typeof(r=t)&&\\\"object\\\"==typeof e?e.exports=n():\\\"function\\\"==typeof define&&define.amd?define([],n):\\\"object\\\"==typeof t?t.getQiniuToken=n():r.getQiniuToken=n()}}),import_widget=(init_esbuild_inject(),require(\\\"$:/core/modules/widgets/widget.js\\\")),import_getQiniuToken=__toESM(require_getQiniuToken()),configkeys=[\\\"accessKey\\\",\\\"secretkey\\\",\\\"bucketName\\\",\\\"targetPath\\\",\\\"region\\\"],QiniuUploadWidget=class extends import_widget.widget{refresh(t){return!1}render(t,e){this.parentDomNode=t,this.computeAttributes(),this.execute();var r=$tw.utils.domMaker(\\\"div\\\",{});r.innerHTML='<svg t=\\\"1729218583617\\\" class=\\\"icon tc-image-save-button-dynamic tc-image-button\\\" viewBox=\\\"0 0 1532 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"4477\\\" width=\\\"200\\\" height=\\\"200\\\"><path d=\\\"M0.303407 0h28.065186c15.094519 3.792593 29.354667 10.998519 39.215407 23.286519 86.243556 100.200296 194.484148 181.134222 314.481778 236.430222-5.840593-50.669037-12.743111-101.262222-18.280297-152.007111 33.754074-3.489185 70.618074 12.667259 82.223408 46.497185 15.701333 48.165926 26.851556 97.697185 41.111704 146.318222 173.624889 54.46163 363.254519 57.268148 537.941333 5.840593 169.832296-49.379556 324.342519-149.276444 439.789037-283.230815 9.784889-12.212148 23.969185-19.342222 38.987852-23.134815h27.989333c-49.910519 147.683556-149.655704 276.631704-272.914963 371.067259-199.793778 154.055111-472.860444 204.344889-715.207111 135.243852 28.292741 101.869037 56.357926 203.813926 85.257482 305.531259 5.461333 31.706074 27.45837 62.881185 61.819259 65.384297 58.102519 1.972148 116.356741 0.075852 174.459259 0.910222 28.368593 1.744593 59.088593-13.50163 69.025185-41.263408 18.583704-55.978667 28.444444-114.915556 50.744889-169.680592 27.685926-63.563852 96.104296-104.296296 165.281185-98.531556-11.757037 98.910815-23.286519 197.82163-35.877926 296.580741-11.301926 78.051556-71.149037 154.282667-154.510222 158.757926H611.51763c-92.690963-5.082074-152.917333-96.331852-157.847704-182.423704-15.701333-129.554963-31.706074-259.034074-47.786667-388.513185C220.122074 360.978963 68.114963 196.835556 0.303407 0z\\\" p-id=\\\"4478\\\"></path></svg>',r.addEventListener(\\\"click\\\",upload),t.insertBefore(r,e),this.domNodes.push(t.appendChild(r))}},QiniuConfigWidget=class extends import_widget.widget{refresh(t){return!1}render(t,e){this.parentDomNode=t,this.computeAttributes(),this.execute();var r=createForm();t.insertBefore(r,e),this.domNodes.push(t.appendChild(r))}};function createForm(){const n=(t=localStorage.getItem(\\\"qiniu_config\\\"))?JSON.parse(t):{};var t=configkeys.map((r,t)=>{var e=\\\"region\\\"===r?(e=[{label:\\\"华东-浙江\\\",value:\\\"http://up-z0.qiniup.com\\\"},{label:\\\"华东-浙江2\\\",value:\\\"http://up-cn-east-2.qiniup.com\\\"},{label:\\\"华北-河北\\\",value:\\\"http://up-z1.qiniup.com\\\"},{label:\\\"华南-广东\\\",value:\\\"http://up-z2.qiniup.com\\\"},{label:\\\"北美-洛杉矶\\\",value:\\\"http://up-na0.qiniup.com\\\"},{label:\\\"亚太-新加坡\\\",value:\\\"http://up-as0.qiniup.com\\\"},{label:\\\"亚太-河内\\\",value:\\\"http://up-ap-southeast-2.qiniup.com\\\"},{label:\\\"亚太-胡志明\\\",value:\\\"http://up-ap-southeast-3.qiniup.com\\\"}].map(({label:t,value:e})=>$tw.utils.domMaker(\\\"option\\\",{attributes:Object.assign({value:e},n[r]===e?{selected:!0}:{}),text:t})),$tw.utils.domMaker(\\\"select\\\",{children:e})):$tw.utils.domMaker(\\\"input\\\",{attributes:{type:[\\\"bucketName\\\",\\\"targetPath\\\"].includes(r)?\\\"text\\\":\\\"password\\\",value:n[r]||\\\"\\\"}});return $tw.utils.domMaker(\\\"p\\\",{attributes:{id:\\\"qiniu_upload_\\\"+r},children:[$tw.utils.domMaker(\\\"div\\\",{text:[\\\"🔑\\\",\\\"🔑\\\",\\\"🏆\\\",\\\"🎲\\\",\\\"👑\\\"][t]+` ${r}: `}),e]})}),e=$tw.utils.domMaker(\\\"button\\\",{text:\\\"保存\\\"});return e.onclick=()=>{var t=configkeys.reduce((t,e)=>{var r=document.querySelector(\\\"#qiniu_upload_\\\"+e),n=r?.querySelector(\\\"input\\\"),r=r?.querySelector(\\\"select\\\");return Object.assign(t,{[e]:n?.value||r?.value||\\\"\\\"})},{});localStorage.setItem(\\\"qiniu_config\\\",JSON.stringify(t)),notifier(\\\"''🎉 设置成功 🎉 ''\\\")},$tw.utils.domMaker(\\\"div\\\",{children:[...t,e]})}async function upload(){var t=$tw.wiki.renderTiddler(\\\"text/plain\\\",\\\"$:/plugins/tiddlywiki/tiddlyweb/save/offline\\\"),t=new Blob([t],{type:\\\"text/html\\\"}),t=new File([t],\\\"index.html\\\",{type:\\\"text/html\\\"}),e=localStorage.getItem(\\\"qiniu_config\\\");if(!e)return notifier(\\\"''🔔 先配置七牛云 🔔''\\\");const r=JSON.parse(e);if(configkeys.some(t=>!r[t]))return notifier(\\\"''🔔 全部配置都不能为空 🔔''\\\");var{accessKey:e,secretkey:n,region:i}=r,o=r.bucketName,s=r.targetPath,e=(0,import_getQiniuToken[\\\"default\\\"])({accessKey:e,secretkey:n,scope:o+\\\":\\\"+s}),n=new FormData,o=(n.append(\\\"file\\\",t),n.append(\\\"key\\\",s),n.append(\\\"token\\\",e),n.append(\\\"options.force\\\",\\\"true\\\"),await fetch(i,{method:\\\"post\\\",body:n}));o.ok?notifier(\\\"''🎉 上传成功 🎉 ''\\\"):notifier(`''🔔 上传失败 🔔''\\n\\n错误码：`+o.status)}async function notifier(t){var e=$tw.wiki.getTiddler(\\\"$:/language/Buttons/Upload/notifier\\\");$tw.wiki.addTiddler(new $tw.Tiddler(e,{text:t})),$tw.notifier.display(\\\"$:/language/Buttons/Upload/notifier\\\")}exports.QiniuUploadWidget=QiniuUploadWidget,exports.QiniuConfigWidget=QiniuConfigWidget;\"}}}","title":"$:/plugins/oxjmo/qiniuUpload","type":"application/json","version":"0.0.1","Modern.TiddlyDev#SHA256-Hashed":"920c3c1242f2e4adeccfb8ea3784b01c09d1349da9fbcd6b828d2567ff932806"}