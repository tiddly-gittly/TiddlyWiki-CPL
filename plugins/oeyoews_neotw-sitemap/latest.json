{"title":"$:/plugins/oeyoews/neotw-sitemap","description":"neotw-sitemap","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"neotw-sitemap","meat#disabled":"yes","qrcode":"yes","created":"2024-03-16","dependents":"","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-sitemap/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-sitemap/readme\",\"text\":\"<!-- plugin template readme -->\\n\\n> based on dullroar/sitemap tiddlywiki plugin, fix filter typo, and standard plugin\\n\\n## Recipes\\n\\n```html\\n<!-- tiddlywiki.info -->\\nsitemap: [\\n    '--output',\\n    'public',\\n    '--render',\\n    '$:/plugins/oeyoews/neotw-sitemap/sitemap',\\n    'sitemap.xml',\\n    'text/plain',\\n    <!-- optional -->\\n    <!-- 'exportFilter',\\n    '[!is[system]]' -->\\n  ]\\n```\\n\\n\\n## Motivation\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\",\"type\":\"text/markdown\",\"description\":\"neotw-sitemap\"},\"$:/plugins/oeyoews/neotw-sitemap/sitemapentries.js\":{\"title\":\"$:/plugins/oeyoews/neotw-sitemap/sitemapentries.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-sitemap/sitemapentries.js\\ntype: application/javascript\\nmodule-type: macro\\n\\nMacro to output tiddlers matching a filter to sitemap.xml entries.\\nhttp://www.sitemaps.org/protocol.html\\n\\n\\\\*/\\n!function(){\\\"use strict\\\";exports.name=\\\"sitemapentries\\\",exports.params=[{name:\\\"filter\\\"}];let t={escapify:function(t){return t.replace(/</gm,\\\"&lt;\\\").replace(/>/gm,\\\"&gt;\\\").replace(/&/gm,\\\"&amp;\\\").replace(/\\\"/gm,\\\"&quot;\\\").replace(/'/gm,\\\"&apos;\\\")},twDateToWebDate:function(t){return $tw.utils.formatDateString(t,\\\"YYYY-0MM-0DD\\\")},stringify:function(e){let i=\\\"\\\";return e.forEach((function(e,o,n){i+=\\\"\\\\t<url>\\\\n\\\";const r=$tw.wiki.getTiddlerText(\\\"$:/plugins/oeyoews/neotw-sitemap/site\\\");r||console.info(\\\"sitemapentries.js: $:/plugins/oeyoews/neotw-sitemap/site not set\\\"),i+=`\\\\t\\\\t<loc>${r}#:${e.title.replace(/ /g,\\\"%2520\\\")}</loc>\\\\n`,e.modified&&(i+=\\\"\\\\t\\\\t<lastmod>\\\"+t.twDateToWebDate($tw.utils.parseDate(e.modified))+\\\"</lastmod>\\\\n\\\"),i+=\\\"\\\\t\\\\t<changefreq>\\\",\\\"index\\\"===e.title.toLowerCase()||\\\"home\\\"===e.title.toLowerCase()?i+=\\\"weekly\\\":i+=\\\"monthly\\\",i+=\\\"</changefreq>\\\\n\\\",i+=\\\"\\\\t\\\\t<priority>\\\",\\\"index\\\"===e.title.toLowerCase()||\\\"home\\\"===e.title.toLowerCase()?i+=\\\"1.0\\\":void 0!==e.color?i+=\\\"0.8\\\":i+=\\\"0.5\\\",i+=\\\"</priority>\\\\n\\\",i+=\\\"\\\\t</url>\\\\n\\\"})),i}};exports.run=function(e){const i=this.wiki.filterTiddlers(e),o=[];for(let e=0;e<i.length;e++){const n=this.wiki.getTiddler(i[e]);if(n){const e={};for(const i in n.fields)e[i]=t.escapify(n.getFieldString(i));o.push(e)}}return t.stringify(o)}}();\",\"type\":\"application/javascript\",\"module-type\":\"macro\"},\"$:/plugins/oeyoews/neotw-sitemap/render\":{\"title\":\"$:/plugins/oeyoews/neotw-sitemap/render\",\"tags\":\"$:/tags/Exporter\",\"extension\":\".xml\",\"text\":\"\\\\define renderContent()\\n<$text text=<<sitemapentries filter:\\\"\\\"\\\"$(exportFilter)$\\\"\\\"\\\">>/>\\n\\\\end\\n<<renderContent>>\"},\"$:/plugins/oeyoews/neotw-sitemap/site\":{\"title\":\"$:/plugins/oeyoews/neotw-sitemap/site\",\"text\":\"https://tiddlywiki-starter-kit.oeyoews.top\"},\"$:/plugins/oeyoews/neotw-sitemap/sitemap\":{\"title\":\"$:/plugins/oeyoews/neotw-sitemap/sitemap\",\"hide-body\":\"yes\",\"text\":\"\\\\define tv-wikilink-template() #$uri_encoded$\\n\\\\define tv-config-toolbar-icons() no\\n\\\\define tv-config-toolbar-text() no\\n\\\\define tv-config-toolbar-class() tc-btn-invisible\\n\\n`<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n<urlset xmlns=\\\"http://www.sitemaps.org/schemas/sitemap/0.9\\\">`\\n<$set name=\\\"exportFilter\\\" value=\\\"[!is[system]!title[Table of Contents]!sort[modified]]\\\">\\n{{$:/plugins/oeyoews/neotw-sitemap/render}}\\n</$set>`\\n</urlset>`\"}}}"}