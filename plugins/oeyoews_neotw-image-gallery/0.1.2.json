{"title":"$:/plugins/oeyoews/neotw-image-gallery","description":"neotw-image-gallery","author":"oeyoews","version":"0.1.2","core-version":">=5.3.1","type":"application/json","plugin-type":"plugin","name":"neotw-image-gallery","meta#disabled":"true","dependents":"$:/plugins/oeyoews/image-observer $:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-image-gallery/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-image-gallery/readme\",\"text\":\"## Introducion\\n\\n- 这是一个支持各种数据源的图库 (WIP), 图片已经进行按需加载优化\\n\\n* 网易云首页轮播图自动更新\\n* tiddlywiki banner(WIP)\\n* 自定义图库\\n* Bing 每日壁纸\\n* ...\\n\\n## Usage\\n\\n```wikitext\\n<$gallery json=\\\"image-list.json\\\" />\\n```\\n\\n<$gallery json=\\\"image-list.json\\\" />\\n\\n<$banners />\\n\\n<$nbanners />\\n\",\"type\":\"text/markdown\",\"description\":\"neotw-image-gallery\"},\"$:/plugins/oeyoews/neotw-image-gallery/createImage.js\":{\"title\":\"$:/plugins/oeyoews/neotw-image-gallery/createImage.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-image-gallery/createImage.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\n/**\\n * @function createImage\\n * @description Creates an image node.\\n * @param {string} title - The title of the image.\\n * @param {string} src - The source URL of the image.\\n * @returns {HTMLImageElement} The created image node.\\n */\\nmodule.exports=function(e,t,o=!0){const a=(0,$tw.utils.domMaker)(\\\"img\\\",{class:\\\"object-cover w-full h-full spotlight rounded-md group-hover:scale-105 transition-all duration-800 ease-in-out shadow-md aspect-video\\\",attributes:{\\\"data-src\\\":t,title:e,loading:\\\"lazy\\\"}});return\\\"false\\\"===o&&a.classList.remove(\\\"aspect-video\\\"),a.addEventListener(\\\"contextmenu\\\",(e=>{e.preventDefault()})),a};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-image-gallery/netease-fetcher.js\":{\"title\":\"$:/plugins/oeyoews/neotw-image-gallery/netease-fetcher.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-image-gallery/netease-fetcher.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nmodule.exports=async()=>{try{const a=\\\"https://react-music-api-coral.vercel.app/api/banner\\\",r=await fetch(a),c=await r.json(),{banners:e}=c.body;return e.map((a=>({src:a.pic})))}catch(a){console.error(a)}};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-image-gallery/netease-banners.js\":{\"title\":\"$:/plugins/oeyoews/neotw-image-gallery/netease-banners.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-image-gallery/netease-banners.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-image-gallery widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\"),s=require(\\\"./createImage\\\"),r=require(\\\"./netease-fetcher\\\");exports.nbanners=class extends e{constructor(e,s){super(e,s)}async render(e,t){if(!$tw.browser)return;if(this.document.isTiddlyWikiFakeDom)return;this.computeAttributes(),this.execute();const i=$tw.utils.domMaker,{observer:o}=new $tw.ImageObserver,d=i(\\\"div\\\",{class:\\\"bg-gray-200 rounded w-full h-48 animate-pulse\\\"});\\n// NOTE: tw 支持基于 tw 内部路由，但是仅仅支持 js with module-type library(json not support)\\ne.insertBefore(d,t),this.domNodes.push(d);const c=await r();if(!c)return void this.removeChildDomNodes(d);const n=[];c.slice(0,9).forEach((({src:e})=>{const r=s(\\\"\\\",e,\\\"false\\\");o.observe(r),n.push(r)}));const u=i(\\\"div\\\",{class:\\\"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\\\",children:n});e.insertBefore(u,d),this.removeChildDomNodes(d),this.domNodes.push(u)}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"},\"$:/plugins/oeyoews/neotw-image-gallery/tiddlywiki-banners.js\":{\"title\":\"$:/plugins/oeyoews/neotw-image-gallery/tiddlywiki-banners.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-image-gallery/tiddlywiki-banners.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-image-gallery widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\"),s=require(\\\"./createImage\\\");exports.banners=class extends e{constructor(e,s){super(e,s)}render(e,t){if(!$tw.browser)return;this.parentDomNode=e,this.computeAttributes(),this.execute();const{observer:r}=new $tw.ImageObserver,i=$tw.utils.domMaker,o=[];[520,523,530,532].map((e=>({title:e,src:`https://cdn.jsdelivr.net/gh/oeyoews/tiddlywiki-starter-kit@main/plugins/oeyoews/tiddlywiki-banners/files/${e}.png?raw=true`}))).forEach((({title:e,src:t})=>{const i=s(e,t);r.observe(i),o.push(i)}));const d=i(\\\"div\\\",{class:\\\"grid grid-cols-1 md:grid-cols-3 gap-4\\\",children:o});e.insertBefore(d,t),this.domNodes.push(d)}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"},\"$:/plugins/oeyoews/neotw-image-gallery/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-image-gallery/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-image-gallery/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-image-gallery widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\"),s=require(\\\"./createImage\\\");exports.gallery=class extends e{constructor(e,s){super(e,s),this.jsonfile=null}render(e,t){if(!$tw.browser)return;this.parentDomNode=e,this.computeAttributes(),this.execute();const{observer:r}=new $tw.ImageObserver,i=$tw.utils.domMaker,{json:o=\\\"image-list.json\\\"}=this.attributes;if(this.jsonfile=o,!$tw.wiki.tiddlerExists(o))return void console.warn(o,\\\"file not founded !\\\");const n=$tw.wiki.getTiddlerData(o),d=Object.entries(n),c=[];d.forEach((([e,t])=>{const i=s(e,t);r.observe(i),c.push(i)}));const l=i(\\\"div\\\",{class:\\\"grid grid-cols-1 md:grid-cols-3 gap-4\\\",children:c});e.insertBefore(l,t),this.domNodes.push(l)}refresh(e){return!!Object.keys(e).includes(this.jsonfile)&&(this.refreshSelf(),!0)}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}