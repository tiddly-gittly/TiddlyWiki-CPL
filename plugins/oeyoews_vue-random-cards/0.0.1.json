{"title":"$:/plugins/oeyoews/vue-random-cards","description":"vue-random-cards","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"vue-random-cards","meat#disabled":"yes","qrcode":"yes","created":"2024-03-08","dependents":"$:/plugins/oeyoews/neotw-vue3","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/vue-random-cards/readme\":{\"title\":\"$:/plugins/oeyoews/vue-random-cards/readme\",\"text\":\"<!-- plugin template readme -->\\n\\n## Example\\n\\n<$vue-random-cards />\\n\\n## Motivation\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\",\"type\":\"text/markdown\",\"description\":\"vue-random-cards\"},\"$:/plugins/oeyoews/vue-random-cards/component.js\":{\"title\":\"$:/plugins/oeyoews/vue-random-cards/component.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-random-cards/component.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nconst{reactive:t,watch:e,toRaw:a,computed:i,ref:r}=window.Vue,s=$tw.wiki.getTiddlerText(\\\"$:/palette\\\"),d=\\\"dark\\\"===$tw.wiki.getTiddler(s).fields[\\\"color-scheme\\\"]?\\\"dark\\\":\\\"light\\\",h=new $tw.Story,n=(t,e=500)=>{let a=null;return function(...i){a||(t.apply(this,i),a=setTimeout((()=>{a=null}),e))}},o=t=>{let e=$tw.wiki.getTiddlerText(t).trim();return e.startsWith(\\\"<template>\\\")&&e.endsWith(\\\"</template>\\\")&&(e=e.slice(10,-11)),e};module.exports=(e=\\\"[!is[system]!is[binary]!days[-31]!tag[todo]!tag[done]!prefix[$:/]!<currentTiddler>]\\\",a,i)=>{const s=$tw.wiki.filterTiddlers(i?`${e} :and[tag[${i}]]`:e);return{setup(){const e=r(\\\"\\\"),i=r(\\\"\\\"),s=r(),d=r([]),h=t({tooltip:{trigger:\\\"item\\\",formatter:function(t){const{name:e,value:a,percent:i}=t;return`${e}`}},toolbox:{show:!1,left:0,bottom:0,feature:{dataView:{show:!0,readOnly:!1},restore:{},saveAsImage:{}}},series:[{name:\\\"Tag\\\",type:\\\"pie\\\",radius:\\\"50%\\\",center:\\\"50%\\\",data:d.value}]});return{isRotate:r(!1),options:h,chartdata:d,chartapp:s,title:i,cardContent:e,text:a}},mounted(){this.chartapp=echarts.init(this.$refs.chart,d,{renderer:\\\"svg\\\"}),this.updateChart(),this.chartapp.on(\\\"click\\\",(t=>{h.navigateTiddler(t.name)}))},watch:{chartdata:{handler(){this.updateChart()},deep:!0}},methods:{randomTiddlerTitle(){const t=0|(Math.random()*s.length).toFixed(0);return s[t]},updateChart(){this.chartdata.length>8&&(this.resetChart(),this.chartdata.push({name:this.title,value:1})),this.chartapp.setOption(this.options)},resetChart(){this.chartdata.splice(0,this.chartdata.length),this.cardContent=\\\"空空如也\\\",this.title=\\\"\\\"},renderTiddler2HTML(){try{\\n//   `{{{ [[${this.title}]]` + '||$:/core/ui/ViewTemplate }}}';\\n// $tw.wiki.setText(this.title, text);\\nthis.cardContent=$tw.wiki.renderTiddler(\\\"text/html\\\",this.title)||\\\"空空如也\\\"}catch(t){console.error(t.message)}},updateCard:n((function(){this.isRotate=!this.isRotate,this.title=this.randomTiddlerTitle(),this.chartdata.push({name:this.title,value:1}),this.renderTiddler2HTML()})),gotoTiddler(){h.navigateTiddler(this.title)}},template:o(\\\"$:/plugins/oeyoews/vue-random-cards/widget.vue\\\")}};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/vue-random-cards/style.css\":{\"title\":\"$:/plugins/oeyoews/vue-random-cards/style.css\",\"tags\":\"$:/tags/Stylesheet\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/vue-random-cards/widget.js\":{\"title\":\"$:/plugins/oeyoews/vue-random-cards/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-random-cards/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nvue-random-cards widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports[\\\"vue-random-cards\\\"]=class extends e{constructor(e,t){super(e,t)}render(e,t){if(!$tw.browser)return;if(this.computeAttributes(),this.execute(),this.document.isTiddlyWikiFakeDom)return;const{filter:r,text:o=\\\"随机卡片\\\",tag:s}=this.attributes;window.Vue||(window.Vue=require(\\\"$:/plugins/oeyoews/neotw-vue3/vue.global.prod.js\\\"));const{createApp:n}=window.Vue,i=require(\\\"./component\\\"),u=this.document.createElement(\\\"div\\\");try{const c=n(i(r,o,s));c.config.errorHandler=e=>{const t=`[Vue3](${c.version}): `+e;console.error(t),u.textContent=t,u.style.color=\\\"red\\\"},c.mount(u),e.insertBefore(u,t),this.domNodes.push(u)}catch(e){console.error(e.message)}}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"},\"$:/plugins/oeyoews/vue-random-cards/widget.vue\":{\"title\":\"$:/plugins/oeyoews/vue-random-cards/widget.vue\",\"text\":\"<template>\\n  <div class=\\\"flex items-center justify-end gap-2\\\">\\n    <button @click=\\\"gotoTiddler\\\" v-if=\\\"title\\\" class=\\\"p-2\\\">卡片跳转</button>\\n    <button @click=\\\"resetChart\\\" v-show=\\\"chartdata.length > 0\\\" class=\\\"p-2\\\">\\n      重置\\n    </button>\\n    <button @click=\\\"updateCard\\\" class=\\\"p-2 group flex items-center gap-2\\\">\\n      <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 512 512\\\"\\n        class=\\\"transition-all duration-1000\\\" :class=\\\"{ 'rotate-[360deg]': isRotate }\\\">\\n        <path fill=\\\"currentColor\\\"\\n          d=\\\"M255.703 44.764c-6.176 0-12.353 1.384-17.137 4.152l-152.752 88.36c-9.57 5.535-9.57 14.29 0 19.826l152.752 88.359c9.57 5.536 24.703 5.536 34.272 0l152.754-88.36c9.57-5.534 9.57-14.289 0-19.824L272.838 48.916c-4.785-2.77-10.96-4.152-17.135-4.152m-16.066 47.728c10.426.07 20.268 2.997 29.523 8.781c7.217 4.51 11.503 9.194 12.86 14.05c1.3 4.82-.311 9.735-4.838 14.745c9.307-2.952 18.48-3.867 27.521-2.746c9.034 1.059 17.655 4.151 25.863 9.282c12.23 7.643 17.511 15.88 15.842 24.71c-1.724 8.796-10.313 17.83-25.767 27.102c-5.452 3.271-11.452 6.23-17.998 8.875c-6.444 2.651-13.363 4.946-20.758 6.887l-24.541-15.338c8.095-1.213 15.424-2.846 21.992-4.897c6.56-2.114 12.283-4.634 17.166-7.564c7.253-4.352 11.34-8.594 12.26-12.723c.967-4.157-1.277-7.939-6.73-11.347c-5.62-3.512-11.851-4.97-18.698-4.371c-6.855.536-14.146 3.123-21.873 7.76l-10.951 6.57l-20.494-12.809l11.52-6.912c6.873-4.125 10.755-7.97 11.642-11.54c.832-3.603-1.314-7.006-6.438-10.208c-4.737-2.961-10.036-4.268-15.896-3.924c-5.86.344-11.779 2.309-17.752 5.893c-4.41 2.645-8.286 5.68-11.633 9.105c-3.347 3.425-6.119 7.18-8.316 11.266l-23.303-14.565a99.387 99.387 0 0 1 12.105-12.12a109.57 109.57 0 0 1 14.323-10.214c13.795-8.277 26.75-12.81 38.865-13.601a58.478 58.478 0 0 1 4.504-.147m196.23 81.322c-1.938.074-4.218.858-6.955 2.413l-146.935 84.847c-9.57 5.527-17.14 18.638-17.14 29.69v157.699c0 11.05 7.57 15.419 17.14 9.89l146.937-84.843c9.57-5.527 17.137-18.636 17.137-29.688v-157.7c-2.497-8.048-5.23-12.495-10.184-12.308m-359.763.48c-6.227 0-10.033 5.325-10.155 11.825v157.697c0 11.052 7.57 24.163 17.14 29.69l146.93 84.848c9.57 5.526 17.141 1.156 17.141-9.895v-157.7c0-11.051-7.57-24.159-17.14-29.687L83.09 176.225c-2.567-1.338-4.911-1.93-6.986-1.93zm36.19 57.757a112.394 112.394 0 0 1 18.95 5.553c6.243 2.373 12.363 5.36 18.36 8.958c13.173 7.905 23.398 17.558 30.673 28.961c7.324 11.433 10.985 23.444 10.985 36.03c0 7.277-1.548 13.148-4.645 17.613c-3.097 4.405-9.61 8.908-19.539 13.508l-23.521 10.94L192 382.68V408l-80-48v-25.32l40.184-18.928c3.588-1.784 6.244-4.038 7.964-6.764c1.72-2.725 2.58-6.115 2.58-10.172c0-6.263-1.746-12.35-5.236-18.261c-3.44-5.882-8.036-10.55-13.787-14c-4.424-2.655-9.266-4.397-14.525-5.227c-5.26-.889-10.888-.865-16.885.07v-29.347zm261.876 7.447v111.77L400 335.77V360l-79.316 47.59v-24.23l25.832-15.499v-87.904L320 302.424v-23.865l26.363-22.377z\\\" />\\n      </svg>\\n      {{ text }}\\n    </button>\\n  </div>\\n\\n  <div class=\\\"hidden md:block\\\">\\n    <Transition>\\n      <div ref=\\\"chart\\\" style=\\\"width: 900px; height: 100px\\\" class=\\\"overflow-auto\\\" v-show=\\\"title\\\"></div>\\n    </Transition>\\n  </div>\\n\\n  <Transition>\\n    <div class=\\\"p-4 rounded border border-solid dark:border-gray-400 my-2 border-gray-200\\\" v-if=\\\"title\\\" :key=\\\"title\\\">\\n      <h2>\\n        {{ title }}\\n      </h2>\\n      <p v-html=\\\"cardContent\\\" />\\n    </div>\\n  </Transition>\\n</template>\\n\",\"type\":\".vue\"}}}"}