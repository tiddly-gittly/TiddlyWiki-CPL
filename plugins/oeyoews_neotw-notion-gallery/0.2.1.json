{"title":"$:/plugins/oeyoews/neotw-notion-gallery","description":"neotw-notion-gallery","author":"oeyoews","version":"0.2.1","core-version":">=5.3.1","type":"application/json","plugin-type":"plugin","meta#disabled":"yes","name":"neotw-notion-gallery","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-notion-gallery/icon\":{\"title\":\"$:/plugins/oeyoews/neotw-notion-gallery/icon\",\"text\":\"<svg width=\\\"21\\\" height=\\\"23\\\" viewBox=\\\"0 0 21 23\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M19.2787 0L20.5575 0.75V2.25L19.2787 3L18 2.25V0.75L19.2787 0ZM19.7739 2.23612L19.7931 2.23362C19.8072 2.22825 19.8206 2.2235 19.8291 2.20988C19.8575 2.16875 19.7845 2.15212 19.7584 2.1065C19.7322 2.061 19.6245 1.811 19.7061 1.741C19.7878 1.671 19.876 1.64225 19.9097 1.57662C19.9244 1.54712 19.9395 1.51725 19.9434 1.48388C19.9632 1.50038 19.9787 1.51575 20.0055 1.51663C20.0764 1.52113 20.1372 1.43437 20.1689 1.35225C20.1857 1.30175 20.1994 1.24825 20.1961 1.199C20.1875 1.104 20.1977 1.00125 20.2736 0.938125C20.1987 0.975875 20.1277 1.02437 20.043 1.03675C19.9962 1.0225 19.9492 1.00975 19.8996 1.01175C19.8754 0.980125 19.8426 0.920875 19.8 0.914C19.7275 0.94 19.7254 1.05213 19.6948 1.20413C19.6477 1.19083 19.5993 1.18274 19.5505 1.18C19.483 1.17562 19.373 1.19675 19.2957 1.1945C19.2184 1.19225 19.0662 1.12425 18.9396 1.13888C18.8887 1.14513 18.8375 1.15388 18.7903 1.17525C18.7614 1.18838 18.7196 1.22787 18.6986 1.23375C18.4874 1.29287 18.1434 1.29038 18.2138 0.971C18.2193 0.9465 18.2208 0.924375 18.21 0.918875C18.1963 0.912 18.1888 0.926375 18.1808 0.94225C18.0576 1.2095 18.2762 1.3815 18.5247 1.38225C18.6029 1.37625 18.5653 1.38137 18.6378 1.3675L18.6359 1.37775C18.6328 1.41998 18.6412 1.46227 18.6602 1.50009C18.6793 1.53792 18.7082 1.56986 18.744 1.5925C18.7103 1.68887 18.6434 1.76612 18.5974 1.85462C18.6146 1.96475 18.7262 2.11175 18.7724 2.13275C18.8131 2.15113 18.9019 2.15137 18.9224 2.12162C18.9298 2.10775 18.9249 2.07775 18.9169 2.06238C18.9515 2.10088 18.9982 2.15437 19.0435 2.18012C19.0706 2.19312 19.0977 2.20138 19.1281 2.20263L19.1669 2.20062C19.1861 2.1965 19.2089 2.19337 19.2219 2.17625C19.2364 2.15125 19.2227 2.08175 19.1624 2.07675C19.102 2.07175 19.063 2.049 19.0074 1.9665C18.9618 1.88675 19.017 1.77687 19.0356 1.69837C19.1312 1.71375 19.2275 1.72588 19.3244 1.72613C19.3664 1.724 19.4081 1.72237 19.4495 1.7145C19.4628 1.74825 19.4997 1.84262 19.5 1.86937C19.5009 1.9445 19.4726 2.02 19.4849 2.09525C19.4924 2.11737 19.4855 2.15925 19.5286 2.161L19.5771 2.16325L19.6105 2.16225C19.6531 2.23388 19.6901 2.23375 19.7739 2.23612ZM18.8341 2.02863L18.8263 2.02163C18.8033 1.99688 18.7438 1.95362 18.7548 1.9135C18.7641 1.88375 18.7814 1.85637 18.7951 1.82812L18.7946 1.831C18.7921 1.86625 18.7873 1.901 18.7986 1.93562C18.8334 1.96412 18.8815 2.00938 18.9134 2.04025C18.8961 2.0355 18.8634 2.02563 18.8471 2.032L18.8341 2.02863Z\\\" fill=\\\"black\\\"/>\\r\\n<path d=\\\"M3.5728 4.78761C4.2448 5.33321 4.496 5.29161 5.7584 5.20681L17.6512 4.49321C17.904 4.49321 17.6944 4.24201 17.6096 4.20041L15.6336 2.77161C15.256 2.47721 14.752 2.14121 13.7856 2.22601L2.2688 3.06601C1.8496 3.10761 1.7648 3.31721 1.9328 3.48521L3.5728 4.78761ZM4.2864 7.55881V20.0724C4.2864 20.7444 4.6224 20.9972 5.3792 20.9556L18.4512 20.1988C19.2064 20.1572 19.2912 19.6948 19.2912 19.1492V6.71881C19.2912 6.17481 19.0816 5.87881 18.6192 5.92041L4.9584 6.71881C4.4544 6.76041 4.2864 7.01321 4.2864 7.55881ZM17.1904 8.23081C17.2736 8.60841 17.1904 8.98601 16.8112 9.02921L16.1808 9.15401V18.3924C15.6352 18.6868 15.1296 18.8564 14.7088 18.8564C14.0368 18.8564 13.8688 18.6452 13.3648 18.0148L9.2448 11.5476V17.8052L10.5488 18.0996C10.5488 18.0996 10.5488 18.8548 9.4976 18.8548L6.5984 19.0228C6.5136 18.8548 6.5984 18.4356 6.8928 18.3508L7.648 18.1428V9.86761L6.6 9.78441C6.5152 9.40681 6.7248 8.86121 7.3136 8.81801L10.424 8.61001L14.712 15.1604V9.36521L13.6192 9.23881C13.5344 8.77641 13.8704 8.44041 14.2912 8.39881L17.192 8.23081H17.1904ZM1.3024 1.93161L13.2816 1.05001C14.752 0.922014 15.1296 1.00841 16.0544 1.68041L19.8784 4.36841C20.5104 4.82921 20.72 4.95561 20.72 5.45961V20.1988C20.72 21.1236 20.384 21.6708 19.2064 21.7524L5.296 22.5924C4.4128 22.6356 3.992 22.5092 3.5296 21.9204L0.7136 18.2676C0.2096 17.5956 0 17.0916 0 16.5028V3.40041C0 2.64521 0.336 2.01481 1.3024 1.93161Z\\\" fill=\\\"black\\\"/>\\r\\n</svg>\\r\\n\",\"type\":\"image/svg+xml\"},\"$:/plugins/oeyoews/neotw-notion-gallery/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-notion-gallery/readme\",\"description\":\"卡片视图\",\"text\":\"[[文档|https://neotw.vercel.app/docs/plugins/neotw-notion-gallery]]\"},\"$:/plugins/oeyoews/neotw-notion-gallery/config.js\":{\"title\":\"$:/plugins/oeyoews/neotw-notion-gallery/config.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-notion-gallery/config.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nmodule.exports={imageField:\\\"page-cover\\\",maxCards:30,resoultion:\\\"1920x1080\\\",imageSource:\\\"https://source.unsplash.com/random\\\"};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-notion-gallery/createCard.js\":{\"title\":\"$:/plugins/oeyoews/neotw-notion-gallery/createCard.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-notion-gallery/createCard.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nmodule.exports=function(e,t,i,s,l,r=!0){const a=$tw.utils.domMaker,c=a(\\\"iconify-icon\\\",{class:\\\"mx-1\\\",attributes:{icon:l||\\\"simple-icons:tiddlywiki\\\"}}),n=a(\\\"h3\\\",{class:\\\"delay-100 text-[22px] cursor-pointer flex justify-center items-center truncate m-0 absolute inset-0 backdrop-blur-lg text-black rounded-md ease-in-out transition-all scale-0 group-hover:scale-105\\\",text:t||e,children:[c],attributes:{title:\\\"点击查看\\\"}}),o=a(\\\"div\\\",{children:[n]});n.addEventListener(\\\"click\\\",(()=>s(e)));const d=a(\\\"img\\\",{class:\\\"object-cover w-full h-full rounded-md group-hover:scale-105 transition-all duration-800 ease-in-out shadow-md aspect-video\\\",attributes:{\\\"data-src\\\":i,alt:t||e}});\\\"false\\\"===r&&d.classList.remove(\\\"aspect-video\\\");const u=a(\\\"div\\\",{class:\\\"flex flex-col items-center justify-center p-0 group relative\\\",children:[d,o]});return u.addEventListener(\\\"contextmenu\\\",(e=>{e.preventDefault()})),{imageNode:d,item:u}};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-notion-gallery/meta\":{\"title\":\"$:/plugins/oeyoews/neotw-notion-gallery/meta\",\"tags\":\"$:/tags/RawMarkupWikified/TopHead\",\"text\":\"`<meta name=\\\"referrer\\\" content=\\\"never\\\" />`\\n\"},\"$:/plugins/oeyoews/neotw-notion-gallery/ninecard\":{\"title\":\"$:/plugins/oeyoews/neotw-notion-gallery/ninecard\",\"tags\":\"$:/tags/Macro\",\"text\":\"\\\\procedure card(title)\\r\\n<div class=\\\"rounded-xl not-prose transition-all relative hover:scale-105 shadow-sm duration-300\\\">\\r\\n\\t<$oimg src={{{ [<title>addprefix[https://source.unsplash.com/random/1920x1080?fm=blurhash&]] }}} />\\r\\n\\t<$avatar class=\\\"h-8 shadow outline outline-2 outline-white absolute top-2 left-2 scale-0 group-hover:scale-100\\\"/>\\r\\n<$link to=<<title>> class=\\\"text-indigo-600 truncate capitalize absolute text-white bottom-0 left-0 group-hover:text-sky-400 backdrop-blur-lg rounded p-2 w-full\\\"/>\\r\\n</div>\\r\\n\\\\end\\n\\n\\\\procedure ninecards(subfilter:\\\"[!is[system]]\\\", limit:9)\\r\\n<div class=\\\"grid grid-cols-1 md:grid-cols-3 gap-8\\\">\\r\\n<$list filter='[!is[system]!sort[modified]!has[draft.of]subfilter<subfilter>limit<limit>]'  >\\r\\n<$transclude $variable=\\\"card\\\" title={{!!title}} />\\r\\n</$list>\\r\\n</div>\\r\\n\\\\end\"},\"$:/plugins/oeyoews/neotw-notion-gallery/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-notion-gallery/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-notion-gallery/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-notion-gallery widget\\n\\n\\\\*/\\nconst{widget:t}=require(\\\"$:/core/modules/widgets/widget.js\\\"),e=require(\\\"./createCard\\\"),i=require(\\\"./config\\\");class s extends t{constructor(t,e){super(t,e),this.maxCards=i.maxCards,this.count=9,this.subfilter=`[!is[system]!sort[modified]limit[${this.count}]]`}render(t,s){if(!$tw.browser)return;const r=new $tw.utils.Logger(\\\"neotw-notion-gallery\\\");$tw.modules.titles[\\\"tailwindcss.min.js\\\"]||r.alert(\\\"The plugin 'oeyoews/neotw-notion-gallery' requires the 'tiddlywiki/tailwindcss-plus' plugin to be installed\\\");const d=(new $tw.ImageObserver).observer;this.parentDomNode=t,this.computeAttributes(),this.execute();const o=$tw.wiki,l=t=>(this.parentWidget.dispatchEvent({type:\\\"tm-navigate\\\",param:t,navigateTo:t}),!1),{imageField:n,resoultion:a,imageSource:c}=i,{filter:h=this.subfilter,standard:u,count:m,cols:f=3}=this.attributes;this.count=m;const g=this.removedFilterDraftTiddlers(h||this.subfilter),p=document.createElement(\\\"div\\\"),w=`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-${f} gap-8 m-4`;p.classList.add(...w.split(\\\" \\\")),(t=>t.slice(0,this.count).map((t=>{const{fields:e}=o.getTiddler(t)||{fields:{}};if(!e)return;let i=e[n],s=e[\\\"page-icon\\\"];return i&&(i.startsWith(\\\"//\\\")||i.startsWith(\\\"http\\\"))||(i=`${c}/${a}?fm=blurhash&${e.title}`),{title:e?.title,caption:e?.caption,cover:i,icon:s}})))(g).forEach((({title:t,caption:i,cover:s,icon:r})=>{const{imageNode:o,item:n}=e(t,i,s,l,r,u);p.appendChild(n),d.observe(o)})),t.insertBefore(p,s),this.domNodes.push(p)}isChanged(t){let e=this.removedFilterDraftTiddlers();const{filteredTiddlers:i,notExistTiddlers:s}=this.removedDraftTiddlers(Object.keys(t));let r=i.some((t=>e.includes(t)));return s.length&&(r=!0),r}removedDraftTiddlers(t){let e=[];return{filteredTiddlers:t.filter((t=>$tw.wiki.tiddlerExists(t)?!(!t.startsWith(\\\"$:/plugins/books\\\")&&t.startsWith(\\\"$:/\\\")||t.startsWith(\\\"Draft of\\\")):(e.push(t),!1))),notExistTiddlers:e}}removedFilterDraftTiddlers(t=this.subfilter){const e=$tw.wiki.filterTiddlers(t);return this.removedDraftTiddlers(e).filteredTiddlers}refresh(t){return!!this.isChanged(t)&&(this.refreshSelf(),!0)}}exports.cards=s,exports.ninecards=s;\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}