{"author":"LinOnetwo","core-version":">=5.1.22","dependents":"","description":"Present large amounts of data beautifully and efficiently, generate pivot tables and other advanced table presentations for tiddlers.","list":"readme ParametersTable tree","plugin-type":"plugin","text":"{\"tiddlers\":{\"$:/plugins/linonetwo/hyper-table/ParametersTable\":{\"title\":\"$:/plugins/linonetwo/hyper-table/ParametersTable\",\"caption\":\"<<lingo ParametersTable/Caption $:/plugins/linonetwo/hyper-table/language/>>\",\"text\":\"\\\\define lingo-base() $:/plugins/linonetwo/hyper-table/language/\\n\\n<<lingo ParametersTable>>\\n\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/ParametersTable\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/ParametersTable\",\"text\":\"\\\\procedure lingo-base() $:/plugins/linonetwo/hyper-table/language/\\n\\\\procedure columns()\\n  [\\n    {\\n      field: 'field',\\n      title: 'Options Field',\\n      width: 'auto',\\n      sort: true,\\n    },\\n    {\\n      field: 'description',\\n      title: 'Description',\\n      width: 400,\\n      style: {\\n        // wrap text take effect only when `defaultRowHeight` is enabled\\n        autoWrapText: true,\\n      },\\n    },\\n    {\\n      field: 'example',\\n      title: 'Example usage',\\n      width: 400,\\n      style: {\\n        autoWrapText: true,\\n      },\\n    },\\n    {\\n      field: 'url',\\n      title: 'Document URL',\\n      width: 'auto',\\n      cellType: 'link',\\n      sort: true,\\n    },\\n    {\\n      field: 'title',\\n      title: 'Tiddler',\\n      width: 300,\\n      style: {\\n        autoWrapText: true,\\n      },\\n    },\\n  ]\\n\\\\end\\n\\n!!! BasicTable\\n\\n<$basic-table\\n  filter=\\\"[all[shadows]prefix[$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/]tag[BasicTable]]\\\"\\n  columns=<<columns>>\\n  options=\\\"{ defaultRowHeight: 60 }\\\"\\n/>\\n\\n!!! PivotTable\\n\\n<$basic-table\\n  filter=\\\"[all[shadows]prefix[$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/]tag[PivotTable]]\\\"\\n  columns=<<columns>>\\n  options=\\\"{ defaultRowHeight: 60 }\\\"\\n/>\\n\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/basic-columns\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/basic-columns\",\"tags\":\"BasicTable\",\"field\":\"columns\",\"description\":\"Table column configuration, each column needs to set configuration items separately, and the configuration items differ slightly depending on the cellType. cellType can support: 'text' | 'link' | 'image' | 'video' | 'sparkline' | 'progressbar' | 'chart . The abbreviated way of writing \\\"|\\\" separated field names is also supported.\",\"example\":\"[{ field: 'title', title: 'Title', width: 'auto' }] or title|caption|description\",\"url\":\"https://visactor.io/vtable/option/ListTable#columns\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/darkTheme\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/darkTheme\",\"tags\":\"BasicTable PivotTable\",\"field\":\"darkTheme\",\"description\":\"Themes to use when dark\",\"example\":\"The themes available are DARK BRIGHT ARCO DEFAULT SIMPLIFY, default to DARK\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/filter\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/filter\",\"tags\":\"BasicTable PivotTable\",\"field\":\"filter\",\"description\":\"Table data source filter\",\"example\":\"Filter to get a list of titles, the widget auto converts the list of title into a JSON list of their fields, populating the records field of the table options as the data source. When the filter field exists, it will override the records field of table widget.\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/height\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/height\",\"tags\":\"BasicTable PivotTable\",\"field\":\"height\",\"description\":\"The width of the table container, similar to the CSS height.\",\"example\":\"100% 500px\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/lightTheme\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/lightTheme\",\"tags\":\"BasicTable PivotTable\",\"field\":\"lightTheme\",\"description\":\"Themes to use when bright colors\",\"example\":\"The themes available are DARK BRIGHT ARCO DEFAULT SIMPLIFY, default to DEFAULT\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/options\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/options\",\"tags\":\"BasicTable PivotTable\",\"field\":\"options\",\"description\":\"Add other configuration items, either in JS syntax or JSON. the configuration items here will override the default configuration items.\",\"example\":\"Use features such as tooltip, see the visactor documentation for details.\",\"url\":\"https://visactor.io/vtable/option/\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/pivot-columns\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/pivot-columns\",\"tags\":\"PivotTable\",\"field\":\"columns\",\"description\":\"The style and format configuration corresponding to the header of each level of dimensions should be set separately for each dimension. The configuration items will vary slightly depending on the headerType. Supported headerType values are: 'text' | 'link' | 'image' | 'video'\",\"example\":\"Configuration is complex, see the official documentation for details. However, you can use a simple array of strings to indicate which fields in the data to use, e.g. ['name', 'age'].\",\"url\":\"https://visactor.io/vtable/option/PivotChart#columns\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/pivot-indicators\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/pivot-indicators\",\"tags\":\"PivotTable\",\"field\":\"indicators\",\"description\":\"The specific configuration of each indicator in the perspective combination chart, such as style, format, title, etc., is different from the pivot table. The indicator type here only supports the configuration of the chart type.\",\"example\":\"Configuration is complex, see the official documentation for details. However, you can use a simple array of strings to indicate which fields in the data to use, e.g. ['created', 'modified'].\",\"url\":\"https://visactor.io/vtable/option/PivotChart#indicators\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/pivot-rows\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/pivot-rows\",\"tags\":\"PivotTable\",\"field\":\"rows\",\"description\":\"The row header corresponds to the style and format configuration of each level of dimension. Each type of dimension needs to be set separately. The configuration items have slight differences according to the headerType. The supported headerTypes are: 'text' | 'link' | 'image' | 'video'\",\"example\":\"Configuration is complex, see the official documentation for details. However, it is possible to use a simple array of strings to indicate which fields in the data are to be used, e.g. ['title']\",\"url\":\"https://visactor.io/vtable/option/PivotChart#rows\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/records\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/records\",\"tags\":\"BasicTable PivotTable\",\"field\":\"records\",\"description\":\"Table data source JSON\",\"example\":\"JSON data can be entered as a multi-line string or embedded. JS syntax can be used (e.g., tailing commas, omitting quotes from field names, `new Date()`, etc.).\",\"url\":\"https://visactor.io/vtable/option/ListTable#records\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/titleNav\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/titleNav\",\"tags\":\"BasicTable\",\"field\":\"titleNav\",\"description\":\"Enabled by default, for `title` fields, when clicked, jumps to the corresponding tiddler\",\"example\":\"yes no\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/width\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/width\",\"tags\":\"BasicTable PivotTable\",\"field\":\"width\",\"description\":\"The width of the table container, used similarly to width in CSS. note that this is not exactly the width of the table, it is determined by the widthMode field.\",\"example\":\"100% 300px\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/widthMode\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Parameters/widthMode\",\"tags\":\"BasicTable PivotTable\",\"field\":\"widthMode\",\"description\":\"Table column width calculation mode\",\"example\":\"can be 'standard' (standard mode), 'adaptive' (container width adaptive mode) or 'autoWidth' (automatic width mode), default is 'standard'.\",\"url\":\"https://visactor.io/vtable/option/ListTable#widthMode('standard'%20%7C%20'adaptive'%20%7C%20'autoWidth')%20=%20'standard'\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Readme\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Readme\",\"text\":\"\\\\define lingo-base() $:/plugins/linonetwo/hyper-table/language/\\n\\n! <<lingo Name>>\\n\\n<<lingo Description>>\\n\\n!! Use Widget\\n\\nThis plugin provides several widgets:\\n\\n# Basic Table\\n#* A basic table is a common form of visual data used to present and organize data. It consists of a grid-like structure of rows and columns that presents large amounts of data in a clear, structured manner. Basic tables often provide some interaction and visualization capabilities that enable users to find, sort, paginate, and format data.\\n#* widget is `<$basic-table />`\\n# Pivot Table\\n#* Pivot table, also known as multidimensional analysis table, cross table, Pivot table, refers to a table that can put one or more Dimensions in row Dimensions and column Dimensions to display the relationship between Dimensions. Users can analyze various scenarios at a glance Metirc and comparison, designed to help business analysis drive decision-making.\\n#* widget is `<$pivot-table />`\\n\\n!!! <<lingo ParametersTable/Caption>>\\n\\nThere are a variety of parameters that can be used on the Widget, and you can start by checking out the use cases on the documentation site to learn from the examples, or by piecing together your own parameters based on the parameter list.\\n\\n[[Read the Parameters Table|$:/plugins/linonetwo/hyper-table/ParametersTable]]\\n\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Name\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Name\",\"text\":\"High-Dimensional Tables\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/Description\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/Description\",\"text\":\"Present large amounts of data beautifully and efficiently, generate pivot tables and other advanced table presentations for tiddlers.\"},\"$:/plugins/linonetwo/hyper-table/language/en-GB/ParametersTable/Caption\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/en-GB/ParametersTable/Caption\",\"text\":\"Widget Parameters Table\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/ParametersTable\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/ParametersTable\",\"text\":\"\\\\procedure lingo-base() $:/plugins/linonetwo/hyper-table/language/\\n\\\\procedure columns()\\n  [\\n    {\\n      field: 'field',\\n      title: '配置项字段',\\n      width: 200,\\n      sort: true,\\n    },\\n    {\\n      field: 'description',\\n      title: '描述',\\n      width: 400,\\n      style: {\\n        // 启用 `defaultRowHeight` 的时候，换行才生效\\n        autoWrapText: true,\\n      },\\n    },\\n    {\\n      field: 'example',\\n      title: '例子',\\n      width: 400,\\n      style: {\\n        autoWrapText: true,\\n      },\\n    },\\n    {\\n      field: 'url',\\n      title: '文档地址',\\n      width: 200,\\n      cellType: 'link',\\n      sort: true,\\n    },\\n    {\\n      field: 'title',\\n      title: '条目',\\n      width: 300,\\n      style: {\\n        autoWrapText: true,\\n      },\\n    },\\n  ]\\n\\\\end\\n\\n!!! 基本表格\\n\\n<$basic-table\\n  filter=\\\"[all[shadows]prefix[$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/]tag[BasicTable]]\\\"\\n  columns=<<columns>>\\n  options=\\\"{ defaultRowHeight: 60 }\\\"\\n/>\\n\\n!!! 数据透视表\\n\\n<$basic-table\\n  filter=\\\"[all[shadows]prefix[$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/]tag[PivotTable]]\\\"\\n  columns=<<columns>>\\n  options=\\\"{ defaultRowHeight: 60 }\\\"\\n/>\\n\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/basic-columns\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/basic-columns\",\"tags\":\"BasicTable\",\"field\":\"columns\",\"description\":\"表格每一列的配置，每一列需要分别设置配置项，配置项根据cellType不同有略微差别，cellType可支持：'text' | 'link' | 'image' | 'video' | 'sparkline' | 'progressbar' | 'chart ，默认为 text。也支持竖线 `|` 分隔的字段名这种简略写法。\",\"example\":\"[{ field: 'title', title: 'Title', width: 'auto' }] 或 title|caption|description\",\"url\":\"https://visactor.io/vtable/option/ListTable#columns\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/darkTheme\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/darkTheme\",\"tags\":\"BasicTable PivotTable\",\"field\":\"darkTheme\",\"description\":\"暗色时使用的主题\",\"example\":\"可选主题有 DARK BRIGHT ARCO DEFAULT SIMPLIFY，默认为 DARK\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/filter\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/filter\",\"tags\":\"BasicTable PivotTable\",\"field\":\"filter\",\"description\":\"表格数据源筛选器\",\"example\":\"筛选出标题列表即可，微件会自动转换标题列表为字段 JSON 列表，填入表格选项的 records 字段，作为数据源。当 filter 存在时，会覆盖 records 字段。\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/height\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/height\",\"tags\":\"BasicTable PivotTable\",\"field\":\"height\",\"description\":\"表格容器的宽度，用法类似 CSS 的 height\",\"example\":\"100% 500px\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/lightTheme\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/lightTheme\",\"tags\":\"BasicTable PivotTable\",\"field\":\"lightTheme\",\"description\":\"亮色时使用的主题\",\"example\":\"可选主题有 DARK BRIGHT ARCO DEFAULT SIMPLIFY，默认为 DEFAULT\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/options\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/options\",\"tags\":\"BasicTable PivotTable\",\"field\":\"options\",\"description\":\"补充其它配置项，可以使用 JS 语法，也可以是 JSON。这里的配置项会覆盖默认配置项。\",\"example\":\"使用例如 tooltip 等功能，详见 visactor 的文档\",\"url\":\"https://visactor.io/vtable/option/\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/pivot-columns\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/pivot-columns\",\"tags\":\"PivotTable\",\"field\":\"columns\",\"description\":\"表格每一列的配置，每一列需要分别设置配置项，配置项根据cellType不同有略微差别，cellType可支持：'text' | 'link' | 'image' | 'video' ，默认为 text\",\"example\":\"配置较为复杂，具体详见官方文档。不过可以使用简单的字符串数组表明要使用数据里的哪些字段，例如 ['name', 'age']\",\"url\":\"https://visactor.io/vtable/option/PivotChart#columns\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/pivot-indicators\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/pivot-indicators\",\"tags\":\"PivotTable\",\"field\":\"indicators\",\"description\":\"透视组合图中各个指标的具体配置，如样式，format，title 等，区别透视表，这里的指标类型仅支持配置 chart 类型。\",\"example\":\"配置较为复杂，具体详见官方文档。不过可以使用简单的字符串数组表明要使用数据里的哪些字段，例如 ['created', 'modified']\",\"url\":\"https://visactor.io/vtable/option/PivotChart#indicators\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/pivot-rows\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/pivot-rows\",\"tags\":\"PivotTable\",\"field\":\"rows\",\"description\":\"行表头对应各级维度的样式及format配置，每中维度需要分别设置配置项，配置项根据headerType不同有略微差别，headerType可支持：'text' | 'link' | 'image' | 'video'\",\"example\":\"配置较为复杂，具体详见官方文档。不过可以使用简单的字符串数组表明要使用数据里的哪些字段，例如 ['title']\",\"url\":\"https://visactor.io/vtable/option/PivotChart#rows\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/records\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/records\",\"tags\":\"BasicTable PivotTable\",\"field\":\"records\",\"description\":\"表格数据源 JSON\",\"example\":\"可以用多行字符串或嵌入的方式，输入 JSON 数据。可以使用 JS 语法（如行尾都加逗号、省略字段名的引号、`new Date()` 等）。\",\"url\":\"https://visactor.io/vtable/option/ListTable#records\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/titleNav\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/titleNav\",\"tags\":\"BasicTable\",\"field\":\"titleNav\",\"description\":\"默认启用，对于 title 字段，点击时跳转到相应条目\",\"example\":\"yes no\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/width\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/width\",\"tags\":\"BasicTable PivotTable\",\"field\":\"width\",\"description\":\"表格容器的宽度，用法类似 CSS 的 width。注意这不完全是表格的宽度，根据 widthMode 字段决定。\",\"example\":\"100% 300px\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/widthMode\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Parameters/widthMode\",\"tags\":\"BasicTable PivotTable\",\"field\":\"widthMode\",\"description\":\"表格列宽度的计算模式\",\"example\":\"可以是 'standard'（标准模式）、'adaptive'（自适应容器宽度模式）或 'autoWidth'（自动宽度模式），默认为 'standard'，会占满表格容器的宽度。\",\"url\":\"https://visactor.io/vtable/option/ListTable#widthMode('standard'%20%7C%20'adaptive'%20%7C%20'autoWidth')%20=%20'standard'\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Readme\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Readme\",\"text\":\"\\\\define lingo-base() $:/plugins/linonetwo/hyper-table/language/\\n\\n! <<lingo Name>>\\n\\n<<lingo Description>>\\n\\n!! 使用微件\\n\\n本插件提供几种微件：\\n\\n# 基本表格\\n#* 基本表格是一种常见的可视化数据形式，用于展示和组织数据。它由行和列的网格状结构组成，以清晰、结构化的方式呈现大量数据。基本表格通常提供一些交互和可视化功能，使用户能够对数据进行查找、排序、分页和格式化等操作。\\n#* 微件为 `<$basic-table />`\\n# 数据透视表\\n#* 数据透视表又名多维分析表、交叉表、Pivot Table，指的是可以在行维度和列维度放入一个或多个维度，显示维度之间相互关系的一种表格。用户可以一目了然地分析出各种场景指标以及对比，旨在帮助业务分析推动决策。\\n#* 微件为 `<$pivot-table />`\\n\\n!!! <<lingo ParametersTable/Caption>>\\n\\n微件上可以使用各种参数，你可以先在文档网站上查看用例，从例子中学习，或根据参数表自己拼凑参数。\\n\\n[[查看参数表|$:/plugins/linonetwo/hyper-table/ParametersTable]]\\n\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Name\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Name\",\"text\":\"高维表格\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Description\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/Description\",\"text\":\"美观高效地展示大量数据，为你的条目生成数据透视表等高级表格展示方式。\"},\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/ParametersTable/Caption\":{\"title\":\"$:/plugins/linonetwo/hyper-table/language/zh-Hans/ParametersTable/Caption\",\"text\":\"微件参数表\"},\"$:/plugins/linonetwo/hyper-table/readme\":{\"title\":\"$:/plugins/linonetwo/hyper-table/readme\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define lingo-base() $:/plugins/linonetwo/hyper-table/language/\\n\\n<<lingo Readme>>\\n\"},\"$:/plugins/linonetwo/hyper-table/tree\":{\"title\":\"$:/plugins/linonetwo/hyper-table/tree\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<<tree prefix:\\\"$:/plugins/linonetwo/hyper-table/\\\">>\"},\"$:/plugins/linonetwo/hyper-table/widgets/widget-loader.js\":{\"title\":\"$:/plugins/linonetwo/hyper-table/widgets/widget-loader.js\",\"text\":\"!function hyperTableWidgetIIFE(){if($tw.browser)try{var{ListTableWidget:e,PivotTableWidget:t}=require(\\\"$:/plugins/linonetwo/hyper-table/widgets/table.js\\\");exports[\\\"basic-table\\\"]=e,exports[\\\"pivot-table\\\"]=t}catch(r){console.error(\\\"Error loading hyperTable widget\\\",r)}}();\",\"type\":\"application/javascript\",\"module-type\":\"widget\",\"hide-body\":\"yes\"},\"$:/plugins/linonetwo/hyper-table/widgets/table.js\":{\"title\":\"$:/plugins/linonetwo/hyper-table/widgets/table.js\",\"type\":\"application/javascript\",\"module-type\":\"library\",\"hide-body\":\"yes\",\"Modern.TiddlyDev#Origin\":\"widgets/table.ts\",\"text\":\"\\\"use strict\\\";var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__esm=(e,t)=>function(){return t=e?(0,e[__getOwnPropNames(e)[0]])(e=0):t},__commonJS=(e,t)=>function(){return t||(0,e[__getOwnPropNames(e)[0]])((t={exports:{}}).exports,t),t.exports},__export=(e,t)=>{for(var i in t)__defProp(e,i,{get:t[i],enumerable:!0})},__copyProps=(t,i,r,n)=>{if(i&&\\\"object\\\"==typeof i||\\\"function\\\"==typeof i)for(let e of __getOwnPropNames(i))__hasOwnProp.call(t,e)||e===r||__defProp(t,e,{get:()=>i[e],enumerable:!(n=__getOwnPropDesc(i,e))||n.enumerable});return t},__toESM=(e,t,i)=>(i=null!=e?__create(__getProtoOf(e)):{},__copyProps(!t&&e&&e.__esModule?i:__defProp(i,\\\"default\\\",{value:e,enumerable:!0}),e)),init_esbuild_inject=__esm({\\\"node_modules/.pnpm/tiddlywiki-plugin-dev@0.2.0_postcss@8.4.38_ts-node@10.9.2_@types+node@20.12.10_typescript@5.4.5_/node_modules/tiddlywiki-plugin-dev/dist/js/esbuild-inject.js\\\"(){}}),require_eventemitter3=__commonJS({\\\"node_modules/.pnpm/eventemitter3@4.0.7/node_modules/eventemitter3/index.js\\\"(e,t){init_esbuild_inject();var r=Object.prototype.hasOwnProperty,g=\\\"~\\\";function i(){}function l(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function n(e,t,i,r,n){if(\\\"function\\\"!=typeof i)throw new TypeError(\\\"The listener must be a function\\\");var o=new l(i,r||e,n),a=g?g+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function h(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(g=!1)),o.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)r.call(e,t)&&i.push(g?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=g?g+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,n=i.length,o=new Array(n);r<n;r++)o[r]=i[r].fn;return o},o.prototype.listenerCount=function(e){var t=g?g+e:e,t=this._events[t];return t?t.fn?1:t.length:0},o.prototype.emit=function(e,t,i,r,n,o){var a=g?g+e:e;if(!this._events[a])return!1;var l,s=this._events[a],h=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),h){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,i),!0;case 4:return s.fn.call(s.context,t,i,r),!0;case 5:return s.fn.call(s.context,t,i,r,n),!0;case 6:return s.fn.call(s.context,t,i,r,n,o),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];s.fn.apply(s.context,l)}else for(var d,u=s.length,c=0;c<u;c++)switch(s[c].once&&this.removeListener(e,s[c].fn,void 0,!0),h){case 1:s[c].fn.call(s[c].context);break;case 2:s[c].fn.call(s[c].context,t);break;case 3:s[c].fn.call(s[c].context,t,i);break;case 4:s[c].fn.call(s[c].context,t,i,r);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];s[c].fn.apply(s[c].context,l)}return!0},o.prototype.on=function(e,t,i){return n(this,e,t,i,!1)},o.prototype.once=function(e,t,i){return n(this,e,t,i,!0)},o.prototype.removeListener=function(e,t,i,r){var n=g?g+e:e;if(this._events[n])if(t){var o=this._events[n];if(o.fn)o.fn!==t||r&&!o.once||i&&o.context!==i||h(this,n);else{for(var a=0,l=[],s=o.length;a<s;a++)(o[a].fn!==t||r&&!o[a].once||i&&o[a].context!==i)&&l.push(o[a]);l.length?this._events[n]=1===l.length?l[0]:l:h(this,n)}}else h(this,n);return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=g?g+e:e,this._events[t]&&h(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=g,o.EventEmitter=o,void 0!==t&&(t.exports=o)}}),require_cssfontparser=__commonJS({\\\"node_modules/.pnpm/cssfontparser@1.2.1/node_modules/cssfontparser/index.js\\\"(e,t){init_esbuild_inject();var c={},g=new RegExp([\\\"^\\\\\\\\s*(?=(?:(?:[-a-z]+\\\\\\\\s*){0,2}(italic|oblique))?)\\\",\\\"(?=(?:(?:[-a-z]+\\\\\\\\s*){0,2}(small-caps))?)\\\",\\\"(?=(?:(?:[-a-z]+\\\\\\\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)\\\",\\\"(?:(?:normal|\\\\\\\\1|\\\\\\\\2|\\\\\\\\3)\\\\\\\\s*){0,3}((?:xx?-)?\\\",\\\"(?:small|large)|medium|smaller|larger|[\\\\\\\\.\\\\\\\\d]+(?:\\\\\\\\%|in|[cem]m|ex|p[ctx]))\\\",\\\"(?:\\\\\\\\s*\\\\\\\\/\\\\\\\\s*(normal|[\\\\\\\\.\\\\\\\\d]+(?:\\\\\\\\%|in|[cem]m|ex|p[ctx])?))\\\",`?\\\\\\\\s*([-,\\\\\\\\\\\"\\\\\\\\'\\\\\\\\sa-z]+?)\\\\\\\\s*$`].join(\\\"\\\"),\\\"i\\\"),p=[\\\"style\\\",\\\"variant\\\",\\\"weight\\\",\\\"size\\\",\\\"lineHeight\\\",\\\"family\\\"],o=/([\\\\.0-9]+)(.*)/,i=function(e,t,i){var r=e.match(o);if(r){e=parseFloat(r[1]);var r=r[2].toLowerCase().trim(),n=Math.round(e);switch(n===e&&(e=n),r){case\\\"em\\\":return null===t?void 0:e*t;case\\\"px\\\":return e;case\\\"pt\\\":return e/(72/i);case\\\"pc\\\":return e/(6/i);case\\\"mm\\\":return e*(i/25.4);case\\\"cm\\\":return e*(i/2.54);case\\\"in\\\":return e*i;case\\\"%\\\":return null===t?void 0:t*(e/100)}}},f={size:i,lineHeight:i},m={serif:1,\\\"sans-serif\\\":1,cursive:1,fantasy:1,monospace:1},b=t.exports=function(e,t,i){var r=e+\\\"-\\\"+(t||\\\"null\\\")+\\\"@\\\"+i;if(i=i||96,\\\"undefined\\\"!=typeof c[r])return c[r];if(t=t&&b(t,null,i),\\\"inherit\\\"===e)return t;var n=g.exec(e);if(n){n.shift();for(var o={},a=0;a<n.length;a++){var l,s=p[a],h=n[a];if(f[s]&&h&&(l=t&&t[s]||null,h=void 0===(l=f[s](h,l,i))&&\\\"lineHeight\\\"===s&&h?o.size*parseFloat(h):l),h&&\\\"normal\\\"!==h){if(\\\"inherit\\\"===h){if(!t)return;h=t[s]}h.trim&&(h=h.trim()),o[s]=h}}Object.keys(o).length||(o=null),c[r]=o;var d=[],u=(o.style&&d.push(o.style),o.variant&&d.push(o.variant),o.weight&&\\\"400\\\"!==o.weight&&\\\"normal\\\"!==o.weight&&d.push(o.weight),d.push(o.size+\\\"px\\\"),o.lineHeight&&(d[d.length-1]+=\\\"/\\\"+o.lineHeight+\\\"px\\\"),o.family.split(\\\",\\\"));return o.family=u.map(function(e){return e=e.trim(),e=m[e.toLowerCase()]?e.toLowerCase():e}),d.push(o.family),Object.defineProperty(o,\\\"toString\\\",{value:function(){return d.map(function(e){return Array.isArray(e)?e.map(function(e){return-1<e.indexOf(\\\" \\\")?'\\\"'+e.replace(/[\\\"']/g,\\\"\\\")+'\\\"':e}).join(\\\", \\\"):e}).join(\\\" \\\")}}),o}c[r]=null};t.exports.generics=m}}),import_widget=(init_esbuild_inject(),require(\\\"$:/core/modules/widgets/widget.js\\\")),Generator=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),class r0{static GenAutoIncrementId(){return r0.auto_increment_id++}}),ContainerModule=(Generator.auto_increment_id=0,class{constructor(e){this.id=Generator.GenAutoIncrementId(),this.registry=e}}),NAMED_TAG=(init_esbuild_inject(),init_esbuild_inject(),\\\"named\\\"),INJECT_TAG=\\\"inject\\\",MULTI_INJECT_TAG=\\\"multi_inject\\\",TAGGED=\\\"inversify:tagged\\\",PARAM_TYPES=\\\"inversify:paramtypes\\\";function getNonCustomTagKeys(){return[\\\"inject\\\",\\\"multi_inject\\\",\\\"name\\\",\\\"unmanaged\\\",\\\"named\\\",\\\"optional\\\"]}var NON_CUSTOM_TAG_KEYS=getNonCustomTagKeys(),Metadata=(init_esbuild_inject(),init_esbuild_inject(),class{constructor(e,t){this.key=e,this.value=t}toString(){return this.key===NAMED_TAG?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}),Reflect_metadata_default=(init_esbuild_inject(),function(e){var i;{var i=e,t=function(e,t){\\\"function\\\"!=typeof i[e]&&Object.defineProperty(i,e,{configurable:!0,writable:!0,value:t})};const f=Object.prototype.hasOwnProperty,m=\\\"function\\\"==typeof Symbol,b=m&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:\\\"@@toPrimitive\\\",v=m&&void 0!==Symbol.iterator?Symbol.iterator:\\\"@@iterator\\\",C=\\\"function\\\"==typeof Object.create,y={__proto__:[]}instanceof Array,_=!C&&!y,w={create:C?function(){return p(Object.create(null))}:y?function(){return p({__proto__:null})}:function(){return p({})},has:_?function(e,t){return f.call(e,t)}:function(e,t){return t in e},get:_?function(e,t){return f.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},x=Object.getPrototypeOf(Function),S=\\\"object\\\"==typeof process&&process.env&&\\\"true\\\"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,A=S||\\\"function\\\"!=typeof Map||\\\"function\\\"!=typeof Map.prototype.entries?function(){const n={},i=[],e=function(){function e(e,t,i){this._index=0,this._keys=e,this._values=t,this._selector=i}return e.prototype[\\\"@@iterator\\\"]=function(){return this},e.prototype[v]=function(){return this},e.prototype.next=function(){var e,t=this._index;return 0<=t&&t<this._keys.length?(e=this._selector(this._keys[t],this._values[t]),t+1>=this._keys.length?(this._index=-1,this._keys=i,this._values=i):this._index++,{value:e,done:!1}):{value:void 0,done:!0}},e.prototype[\\\"throw\\\"]=function(e){throw 0<=this._index&&(this._index=-1,this._keys=i,this._values=i),e},e.prototype[\\\"return\\\"]=function(e){return 0<=this._index&&(this._index=-1,this._keys=i,this._values=i),{value:e,done:!0}},e}();function t(){this._keys=[],this._values=[],this._cacheKey=n,this._cacheIndex=-2}return Object.defineProperty(t.prototype,\\\"size\\\",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return 0<=this._find(e,!1)},t.prototype.get=function(e){var t=this._find(e,!1);return 0<=t?this._values[t]:void 0},t.prototype.set=function(e,t){var i=this._find(e,!0);return this._values[i]=t,this},t.prototype[\\\"delete\\\"]=function(t){var i=this._find(t,!1);if(0<=i){var r=this._keys.length;for(let e=i+1;e<r;e++)this._keys[e-1]=this._keys[e],this._values[e-1]=this._values[e];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=n,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=n,this._cacheIndex=-2},t.prototype.keys=function(){return new e(this._keys,this._values,r)},t.prototype.values=function(){return new e(this._keys,this._values,o)},t.prototype.entries=function(){return new e(this._keys,this._values,a)},t.prototype[\\\"@@iterator\\\"]=function(){return this.entries()},t.prototype[v]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t;function r(e,t){return e}function o(e,t){return t}function a(e,t){return[e,t]}}():Map,T=(S||\\\"function\\\"!=typeof Set||\\\"function\\\"!=typeof Set.prototype.entries?(Object.defineProperty(r.prototype,\\\"size\\\",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),r.prototype.has=function(e){return this._map.has(e)},r.prototype.add=function(e){return this._map.set(e,e),this},r.prototype[\\\"delete\\\"]=function(e){return this._map[\\\"delete\\\"](e)},r.prototype.clear=function(){this._map.clear()},r.prototype.keys=function(){return this._map.keys()},r.prototype.values=function(){return this._map.values()},r.prototype.entries=function(){return this._map.entries()},r.prototype[\\\"@@iterator\\\"]=function(){return this.keys()},r.prototype[v]=function(){return this.keys()}):Set,new(S||\\\"function\\\"!=typeof WeakMap?function(){const n=16,t=w.create(),i=r();function e(){this._key=r()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&w.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?w.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype[\\\"delete\\\"]=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e;function r(){let e;for(;e=\\\"@@WeakMap@@\\\"+function(){var e=function(e){return\\\"function\\\"==typeof Uint8Array?\\\"undefined\\\"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}(n);e[6]=79&e[6]|64,e[8]=191&e[8]|128;let t=\\\"\\\";for(let r=0;r<n;++r){var i=e[r];4!==r&&6!==r&&8!==r||(t+=\\\"-\\\"),i<16&&(t+=\\\"0\\\"),t+=i.toString(16).toLowerCase()}return t}(),w.has(t,e););return t[e]=!0,e}function o(e,t){if(!f.call(e,i)){if(!t)return;Object.defineProperty(e,i,{value:w.create()})}return e[i]}function a(e,t){for(let i=0;i<t;++i)e[i]=255*Math.random()|0;return e}}():WeakMap));function r(){this._map=new A}function n(e,t,i){let r=T.get(e);if(l(r)){if(!i)return;r=new A,T.set(e,r)}let n=r.get(t);if(l(n)){if(!i)return;n=new A,r.set(t,n)}return n}function o(e,t,i){var r=n(t,i,!1);return!l(r)&&!!r.has(e)}function a(e,t,i){var r=n(t,i,!1);if(!l(r))return r.get(e)}function l(e){return void 0===e}function s(e){return null===e}function h(e){return\\\"object\\\"==typeof e?null!==e:\\\"function\\\"==typeof e}function d(e,t){switch(function(e){if(null===e)return 1;switch(typeof e){case\\\"undefined\\\":return 0;case\\\"boolean\\\":return 2;case\\\"string\\\":return 3;case\\\"symbol\\\":return 4;case\\\"number\\\":return 5;case\\\"object\\\":return null===e?1:6;default:return 6}}(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var i=3===t?\\\"string\\\":5===t?\\\"number\\\":\\\"default\\\",r=function(e,t){var i=e[t];if(null!=i){if(c(i))return i;throw new TypeError}}(e,b);if(void 0===r){t=e;if(\\\"string\\\"===(\\\"default\\\"==i?\\\"number\\\":i)){var n=t.toString;if(c(n)){n=n.call(t);if(!h(n))return n}n=t.valueOf;if(c(n)){n=n.call(t);if(!h(n))return n}}else{n=t.valueOf;if(c(n)){var o=n.call(t);if(!h(o))return o}o=t.toString;if(c(o)){var a=o.call(t);if(!h(a))return a}}throw new TypeError}a=r.call(e,i);if(h(a))throw new TypeError;return a}function u(e){var t=d(e,3);return\\\"symbol\\\"==typeof t?t:\\\"\\\"+t}function c(e){return\\\"function\\\"==typeof e}function g(e){var t,i=Object.getPrototypeOf(e);return\\\"function\\\"!=typeof e||e===x||i!==x||null==(t=(t=e.prototype)&&Object.getPrototypeOf(t))||t===Object.prototype||\\\"function\\\"!=typeof(t=t.constructor)||t===e?i:t}function p(e){return e.__=void 0,delete e.__,e}t(\\\"defineMetadata\\\",function(e,t,i,r){if(!h(i))throw new TypeError;e=e,t=t,n(i,r,!0).set(e,t)}),t(\\\"hasMetadata\\\",function(e,t,i){if(h(t))return function n(e,t,i){if(o(e,t,i))return!0;const r=g(t);return!s(r)&&n(e,r,i)}(e,t,i=l(i)?i:u(i));throw new TypeError}),t(\\\"hasOwnMetadata\\\",function(e,t,i){if(h(t))return o(e,t,i=l(i)?i:u(i));throw new TypeError}),t(\\\"getMetadata\\\",function(e,t,i){if(h(t))return function n(e,t,i){if(o(e,t,i))return a(e,t,i);const r=g(t);return s(r)?void 0:n(e,r,i)}(e,t,i=l(i)?i:u(i));throw new TypeError})}return e}({}));function _tagParameterOrProperty(e,t,i,r){var n=[r];let o={},a=(o=Reflect_metadata_default.hasOwnMetadata(e,t)?Reflect_metadata_default.getMetadata(e,t):o)[i];(a=void 0===a?[]:a).push(...n),o[i]=a,Reflect_metadata_default.defineMetadata(e,o,t)}function tagParameter(e,t,i,r){_tagParameterOrProperty(TAGGED,e,i.toString(),r)}function createTaggedDecorator(r){return(e,t,i)=>{tagParameter(e,t,i,r)}}function injectBase(n){return r=>(e,t,i)=>createTaggedDecorator(new Metadata(n,r))(e,t,i)}var inject=injectBase(INJECT_TAG),multiInject=(init_esbuild_inject(),injectBase(MULTI_INJECT_TAG));function injectable(){return function(e){return Reflect_metadata_default.defineMetadata(PARAM_TYPES,null,e),e}}function named(e){return createTaggedDecorator(new Metadata(NAMED_TAG,e))}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var BindingScopeEnum={Singleton:\\\"Singleton\\\",Transient:\\\"Transient\\\"},BindingTypeEnum={ConstantValue:\\\"ConstantValue\\\",Constructor:\\\"Constructor\\\",DynamicValue:\\\"DynamicValue\\\",Factory:\\\"Factory\\\",Function:\\\"Function\\\",Instance:\\\"Instance\\\",Invalid:\\\"Invalid\\\",Provider:\\\"Provider\\\"},Binding=class s2{constructor(e,t){this.id=Generator.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=BindingTypeEnum.Invalid,this.constraint=e=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}clone(){var e=new s2(this.serviceIdentifier,this.scope);return e.activated=e.scope===BindingScopeEnum.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.provider=this.provider,e.constraint=this.constraint,e.cache=this.cache,e}},MetadataReader=(init_esbuild_inject(),class{getConstructorMetadata(e){return{compilerGeneratedMetadata:Reflect_metadata_default.getMetadata(PARAM_TYPES,e),userGeneratedMetadata:Reflect_metadata_default.getMetadata(TAGGED,e)||{}}}getPropertiesMetadata(e){throw new Error(\\\"暂未实现\\\")}}),taggedConstraint=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),n=>r=>{var e=t=>{if(null!=t){if(t.key===n&&t.value===r)return!0;if(null!=t.constructorArgsMetadata){var i=t.constructorArgsMetadata;for(let e=0;e<i.length;e++)if(i[e].key===n&&i[e].value===r)return!0}}return!1};return e.metaData=new Metadata(n,r),e}),namedConstraint=taggedConstraint(NAMED_TAG),BindingInSyntax=class{constructor(e){this._binding=e}inRequestScope(){throw new Error(\\\"暂未实现\\\")}inSingletonScope(){return this._binding.scope=BindingScopeEnum.Singleton,this}inTransientScope(){return this._binding.scope=BindingScopeEnum.Transient,this}whenTargetNamed(e){return this._binding.constraint=namedConstraint(e),this}},BindingToSyntax=class{constructor(e){this._binding=e}to(e){return this._binding.type=BindingTypeEnum.Instance,this._binding.implementationType=e,new BindingInSyntax(this._binding)}toSelf(){var e=this._binding.serviceIdentifier;return this.to(e)}toDynamicValue(e){return this._binding.type=BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new BindingInSyntax(this._binding)}toConstantValue(e){return this._binding.type=BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=BindingScopeEnum.Singleton,new BindingInSyntax(this._binding)}toFactory(e){return this._binding.type=BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=BindingScopeEnum.Singleton,new BindingInSyntax(this._binding)}toService(t){this.toDynamicValue(e=>e.container.get(t))}},Container=class{constructor(e){var t=e||{};t.defaultScope=t.defaultScope||BindingScopeEnum.Transient,this.options=t,this.id=Generator.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new MetadataReader}load(e){var t=this._getContainerModuleHelpersFactory()(e.id);e.registry(t.bindFunction,t.unbindFunction,t.isboundFunction,t.rebindFunction)}get(e){var t=this._getNotAllArgs(e,!1);return this._get(t)}getAll(e){var t=this._getAllArgs(e);return this._get(t)}getTagged(e,t,i){var r=this._getNotAllArgs(e,!1,t,i);return this._get(r)}getNamed(e,t){return this.getTagged(e,NAMED_TAG,t)}isBound(e){return this._bindingDictionary.has(e)}bind(e){var t=this.options.defaultScope,t=new Binding(e,t),i=this._bindingDictionary.get(e)||[];return i.push(t),this._bindingDictionary.set(e,i),new BindingToSyntax(t)}unbind(e){this._bindingDictionary[\\\"delete\\\"](e)}rebind(e){return this.unbind(e),this.bind(e)}_getContainerModuleHelpersFactory(){const r=(e,t)=>{e._binding.moduleId=t},t=i=>e=>{var t=this.bind(e);return r(t,i),t},i=()=>e=>this.unbind(e),n=()=>e=>this.isBound(e),o=i=>e=>{var t=this.rebind(e);return r(t,i),t};return e=>({bindFunction:t(e),isboundFunction:n(),rebindFunction:o(e),unbindFunction:i(),unbindAsyncFunction:e=>null})}_getNotAllArgs(e,t,i,r){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:i,value:r}}_getAllArgs(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}}_get(t){const i=[];return this._bindingDictionary.get(t.serviceIdentifier).filter(e=>e.constraint(t)).forEach(e=>{i.push(this._resolveFromBinding(e))}),t.isMultiInject||1!==i.length?i:i[0]}_getChildRequest(e){var t=e.implementationType,i=this._metadataReader.getConstructorMetadata(t)[\\\"userGeneratedMetadata\\\"],r=Object.keys(i),n=[];for(let o=0;o<r.length;o++){const a=i[o],l={},s=(a.forEach(e=>{l[e.key]=e.value}),{inject:l[INJECT_TAG],multiInject:l[MULTI_INJECT_TAG]}),h=s.inject||s.multiInject,d={serviceIdentifier:h,constructorArgsMetadata:a},u={injectIdentifier:h,metadata:a,bindings:this._bindingDictionary.get(h).filter(e=>e.constraint(d))};n.push(u)}return n}_resolveFromBinding(e){var t=this._getResolvedFromBinding(e);return this._saveToScope(e,t),t}_getResolvedFromBinding(e){let t;switch(e.type){case BindingTypeEnum.ConstantValue:case BindingTypeEnum.Function:t=e.cache;break;case BindingTypeEnum.Instance:t=this._resolveInstance(e,e.implementationType);break;default:t=e.dynamicValue({container:this})}return t}_resolveInstance(e,t){var i;return e.activated?e.cache:(i=this._getChildRequest(e),this._createInstance(t,i))}_createInstance(e,t){return t.length?new e(...this._resolveRequests(t)):new e}_resolveRequests(e){return e.map(e=>1<e.bindings.length?e.bindings.map(e=>this._resolveFromBinding(e)):this._resolveFromBinding(e.bindings[0]))}_saveToScope(e,t){e.scope===BindingScopeEnum.Singleton&&(e.cache=t,e.activated=!0)}},ContributionProvider=(init_esbuild_inject(),init_esbuild_inject(),Symbol(\\\"ContributionProvider\\\")),ContributionProviderCache=class{constructor(e,t){this.serviceIdentifier=e,this.container=t}getContributions(){return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier))),this.caches}};function bindContributionProvider(e,t){e(ContributionProvider).toDynamicValue(({container:e})=>new ContributionProviderCache(t,e)).inSingletonScope().whenTargetNamed(t)}function bindContributionProviderNoSingletonScope(e,t){e(ContributionProvider).toDynamicValue(({container:e})=>new ContributionProviderCache(t,e)).whenTargetNamed(t)}init_esbuild_inject(),init_esbuild_inject();var Hook=class{constructor(e,t){this._args=e,this.name=t,this.taps=[]}tap(e,t){this._tap(\\\"sync\\\",e,t)}unTap(e,t){const i=\\\"string\\\"==typeof e?e.trim():e.name;i&&(this.taps=this.taps.filter(e=>e.name!==i&&(!t||e.fn===t)))}_parseOptions(e,t,i){let r;if(\\\"string\\\"==typeof t)r={name:t.trim()};else if(\\\"object\\\"!=typeof t||null===t)throw new Error(\\\"Invalid tap options\\\");if(\\\"string\\\"!=typeof r.name||\\\"\\\"===r.name)throw new Error(\\\"Missing name for tap\\\");return r=Object.assign({type:e,fn:i},r)}_tap(e,t,i){this._insert(this._parseOptions(e,t,i))}_insert(e){let t,i=(\\\"string\\\"==typeof e.before?t=new Set([e.before]):Array.isArray(e.before)&&(t=new Set(e.before)),0),r=(\\\"number\\\"==typeof e.stage&&(i=e.stage),this.taps.length);for(;0<r;){r--;var n=this.taps[r],o=(this.taps[r+1]=n).stage||0;if(t){if(t.has(n.name)){t[\\\"delete\\\"](n.name);continue}if(0<t.size)continue}if(!(o>i)){r++;break}}this.taps[r]=e}},SyncHook=class extends Hook{call(...t){this.taps.map(e=>e.fn).forEach(e=>e(...t))}},EnvContribution=(init_esbuild_inject(),Symbol[\\\"for\\\"](\\\"EnvContribution\\\")),VGlobal=Symbol[\\\"for\\\"](\\\"VGlobal\\\"),__decorate=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param=function(i,r){return function(e,t){r(e,t,i)}},DefaultGlobal=class{get env(){return this._env}get devicePixelRatio(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getDevicePixelRatio()}get supportEvent(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.supportEvent}set supportEvent(e){this._env||this.setEnv(\\\"browser\\\"),this.envContribution.supportEvent=e}get supportsTouchEvents(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.supportsTouchEvents}set supportsTouchEvents(e){this._env||this.setEnv(\\\"browser\\\"),this.envContribution.supportsTouchEvents=e}get supportsPointerEvents(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.supportsPointerEvents}set supportsPointerEvents(e){this._env||this.setEnv(\\\"browser\\\"),this.envContribution.supportsPointerEvents=e}get supportsMouseEvents(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.supportsMouseEvents}set supportsMouseEvents(e){this._env||this.setEnv(\\\"browser\\\"),this.envContribution.supportsMouseEvents=e}get applyStyles(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.applyStyles}set applyStyles(e){this._env||this.setEnv(\\\"browser\\\"),this.envContribution.applyStyles=e}constructor(e){this.contributions=e,this.id=Generator.GenAutoIncrementId(),this.hooks={onSetEnv:new SyncHook([\\\"lastEnv\\\",\\\"env\\\",\\\"global\\\"])},this.measureTextMethod=\\\"native\\\",this.optimizeVisible=!1}bindContribution(i){const r=[];if(this.contributions.getContributions().forEach(e=>{var t=e.configure(this,i);t&&t.then&&r.push(t)}),r.length)return Promise.all(r)}getDynamicCanvasCount(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getDynamicCanvasCount()}getStaticCanvasCount(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getStaticCanvasCount()}setEnv(e,t){if(t&&!0===t.force||this._env!==e)return this.deactiveCurrentEnv(),this.activeEnv(e,t)}deactiveCurrentEnv(){this.envContribution&&this.envContribution.release()}activeEnv(e,t){const i=this._env;this._env=e;var r=this.bindContribution(t);if(r&&r.then)return r.then(()=>{this.envParams=t,this.hooks.onSetEnv.call(i,e,this)});this.envParams=t,this.hooks.onSetEnv.call(i,e,this)}setActiveEnvContribution(e){this.envContribution=e}createCanvas(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.createCanvas(e)}createOffscreenCanvas(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.createOffscreenCanvas(e)}releaseCanvas(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.releaseCanvas(e)}addEventListener(e,t,i){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.addEventListener(e,t,i)}removeEventListener(e,t,i){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.removeEventListener(e,t,i)}dispatchEvent(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.dispatchEvent(e)}getRequestAnimationFrame(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getRequestAnimationFrame()}getCancelAnimationFrame(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getCancelAnimationFrame()}getElementById(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getElementById?this.envContribution.getElementById(e):null}getRootElement(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}getDocument(){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getDocument?this.envContribution.getDocument():null}mapToCanvasPoint(e,t){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(e,t):null}loadImage(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.loadImage(e)}loadSvg(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.loadSvg(e)}loadJson(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.loadJson(e)}loadArrayBuffer(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.loadArrayBuffer(e)}loadBlob(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.loadBlob(e)}isChrome(){return null==this._isChrome&&(this._env||this.setEnv(\\\"browser\\\"),this._isChrome=\\\"browser\\\"===this._env&&-1<navigator.userAgent.indexOf(\\\"Chrome\\\")),this._isChrome}isSafari(){return null==this._isSafari&&(this._env||this.setEnv(\\\"browser\\\"),this._isSafari=\\\"browser\\\"===this._env&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}getNativeAABBBounds(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getNativeAABBBounds(e)}removeDom(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.removeDom(e)}createDom(e){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.createDom(e)}getElementTop(e,t=!1){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getElementTop(e,t)}getElementLeft(e,t=!1){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getElementLeft(e,t)}getElementTopLeft(e,t=!1){return this._env||this.setEnv(\\\"browser\\\"),this.envContribution.getElementTopLeft(e,t)}},DefaultGlobal=__decorate([injectable(),__param(0,inject(ContributionProvider)),__param(0,named(EnvContribution)),__metadata(\\\"design:paramtypes\\\",[Object])],DefaultGlobal),import_eventemitter3=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),__toESM(require_eventemitter3())),isType=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),(e,t)=>Object.prototype.toString.call(e)===`[object ${t}]`),isType_default=isType,isBoolean=(e,t=!1)=>t?\\\"boolean\\\"==typeof e:!0===e||!1===e||isType_default(e,\\\"Boolean\\\"),isBoolean_default=isBoolean,isFunction=(init_esbuild_inject(),e=>\\\"function\\\"==typeof e),isFunction_default=isFunction,isNil=(init_esbuild_inject(),e=>null==e),isNil_default=isNil,isValid=(init_esbuild_inject(),e=>null!=e),isValid_default=isValid,isObject=(init_esbuild_inject(),e=>{var t=typeof e;return null!==e&&\\\"object\\\"==t||\\\"function\\\"==t}),isObject_default=isObject,isObjectLike=(init_esbuild_inject(),e=>\\\"object\\\"==typeof e&&null!==e),isObjectLike_default=isObjectLike,isPlainObject=(init_esbuild_inject(),function(e){if(!isObjectLike_default(e)||!isType_default(e,\\\"Object\\\"))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}),isPlainObject_default=isPlainObject,isUndefined=(init_esbuild_inject(),e=>void 0===e),isUndefined_default=isUndefined,isString=(init_esbuild_inject(),(e,t=!1)=>{var i=typeof e;return t?\\\"string\\\"==i:\\\"string\\\"==i||isType_default(e,\\\"String\\\")}),isString_default=isString,isArray=(init_esbuild_inject(),e=>Array.isArray?Array.isArray(e):isType_default(e,\\\"Array\\\")),isArray_default=isArray,isArrayLike=(init_esbuild_inject(),function(e){return null!==e&&\\\"function\\\"!=typeof e&&Number.isFinite(e.length)}),isArrayLike_default=isArrayLike,isDate=(init_esbuild_inject(),e=>isType_default(e,\\\"Date\\\")),isDate_default=isDate,isNumber=(init_esbuild_inject(),(e,t=!1)=>{var i=typeof e;return t?\\\"number\\\"==i:\\\"number\\\"==i||isType_default(e,\\\"Number\\\")}),isNumber_default=isNumber,isValidNumber=(init_esbuild_inject(),e=>isNumber_default(e)&&Number.isFinite(e)),isValidNumber_default=isValidNumber,isValidUrl=(init_esbuild_inject(),e=>new RegExp(/^(http(s)?:\\\\/\\\\/)\\\\w+[^\\\\s]+(\\\\.[^\\\\s]+){1,}$/).test(e)),isValidUrl_default=isValidUrl,isBase64=(init_esbuild_inject(),e=>new RegExp(/^data:image\\\\/(?:gif|png|jpeg|bmp|webp|svg\\\\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(e)),isBase64_default=isBase64,getType=(init_esbuild_inject(),init_esbuild_inject(),e=>({}).toString.call(e).replace(/^\\\\[object /,\\\"\\\").replace(/]$/,\\\"\\\")),getType_default=getType,objectProto=(init_esbuild_inject(),Object.prototype),isPrototype=function(e){var t=e&&e.constructor;return e===(\\\"function\\\"==typeof t&&t.prototype||objectProto)},isPrototype_default=isPrototype,hasOwnProperty=Object.prototype.hasOwnProperty;function isEmpty(e){if(!isNil_default(e)){if(isArrayLike_default(e))return!e.length;var t=getType_default(e);if(\\\"Map\\\"===t||\\\"Set\\\"===t)return!e.size;if(isPrototype_default(e))return!Object.keys(e).length;for(const i in e)if(hasOwnProperty.call(e,i))return!1}return!0}var isEmpty_default=isEmpty,get=(init_esbuild_inject(),(e,t,i)=>{var r=isString_default(t)?t.split(\\\".\\\"):t;for(let n=0;n<r.length;n++)e=e?e[r[n]]:void 0;return void 0===e?i:e}),get_default=get,hasOwnProperty2=(init_esbuild_inject(),Object.prototype.hasOwnProperty),has=(e,t)=>null!=e&&hasOwnProperty2.call(e,t),has_default=has;function cloneDeep(e){if(!isValid_default(e)||\\\"object\\\"!=typeof e)return e;var t=isArray_default(e),i=e.length,r=t?new Array(i):\\\"object\\\"==typeof e?{}:isBoolean_default(e)||isNumber_default(e)||isString_default(e)?e:isDate_default(e)?new Date(+e):void 0,n=t?void 0:Object.keys(Object(e));let o=-1;if(r)for(;++o<(n||e).length;){var a=n?n[o]:o,l=e[a];r[a]=cloneDeep(l)}return r}function baseMerge(i,r,n=!1){if(r&&i!==r&&isValid_default(r)&&\\\"object\\\"==typeof r){var o=Object(r),a=[];for(const s in o)a.push(s);let e=a[\\\"length\\\"],t=-1;for(;e--;){var l=a[++t];isValid_default(o[l])&&\\\"object\\\"==typeof o[l]?baseMergeDeep(i,r,l,n):assignMergeValue(i,l,o[l])}}}function baseMergeDeep(e,t,i,r=!1){var n=e[i],o=t[i];let a=t[i],l=!0;if(isArray_default(o)){if(r)a=[];else if(isArray_default(n))a=n;else if(isArrayLike_default(n)){a=new Array(n.length);let e=-1;for(var s=n.length;++e<s;)a[e]=n[e]}}else isPlainObject_default(o)?a=\\\"function\\\"!=typeof n&&\\\"object\\\"==typeof n?n:{}:l=!1;l&&baseMerge(a,o,r),assignMergeValue(e,i,a)}function assignMergeValue(e,t,i){(void 0===i||eq(e[t],i))&&(void 0!==i||t in e)||(e[t]=i)}function eq(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function merge(e,...t){let i=-1;for(var r=t.length;++i<r;)baseMerge(e,t[i],!0);return e}function pickWithout(r,n){if(!r||!isPlainObject_default(r))return r;const o={};return Object.keys(r).forEach(t=>{var e=r[t];let i=!1;n.forEach(e=>{(isString_default(e)&&e===t||e instanceof RegExp&&t.match(e))&&(i=!0)}),i||(o[t]=e)}),o}function objToString(e){return Object.prototype.toString.call(e)}function objectKeys(e){return Object.keys(e)}function isEqual(i,r,n){if(i!==r){if(typeof i!=typeof r)return!1;if(null==i||null==r)return!1;if(!Number.isNaN(i)||!Number.isNaN(r)){if(objToString(i)!==objToString(r))return!1;if(isFunction_default(i))return!(null==n||!n.skipFunction);if(\\\"object\\\"!=typeof i)return!1;if(isArray_default(i)){if(i.length!==r.length)return!1;for(let e=i.length-1;0<=e;e--)if(!isEqual(i[e],r[e],n))return!1}else{if(!isPlainObject_default(i))return!1;var o=objectKeys(i),a=objectKeys(r);if(o.length!==a.length)return!1;o.sort(),a.sort();for(let e=o.length-1;0<=e;e--)if(o[e]!=a[e])return!1;for(let t=o.length-1;0<=t;t--){var l=o[t];if(!isEqual(i[l],r[l],n))return!1}}}}return!0}function keys(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(const i in e)e.hasOwnProperty(i)&&t.push(i);return t}function defaults(e,t,i){var r=keys(t);for(let o=0;o<r.length;o++){var n=r[o];(i?null!=t[n]:null==e[n])&&(e[n]=t[n])}return e}function mixin(t,i,r=!0){if(t=\\\"prototype\\\"in t?t.prototype:t,i=\\\"prototype\\\"in i?i.prototype:i,Object.getOwnPropertyNames){var n=Object.getOwnPropertyNames(i);for(let e=0;e<n.length;e++){var o=n[e];\\\"constructor\\\"!==o&&(r?null!=i[o]:null==t[o])&&(t[o]=i[o])}}else defaults(t,i,r)}function array(e){return isValid_default(e)?isArray_default(e)?e:[e]:[]}function last(e){if(isArrayLike_default(e))return e[e.length-1]}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var maxInArray=(i,r)=>{var n;if(0!==i.length){let e=i[0];for(let t=1;t<i.length;t++){var o=i[t];(null!=(n=null==r?void 0:r(o,e))?n:0<o-e)&&(e=o)}return e}},minInArray=(i,r)=>{var n;if(0!==i.length){let e=i[0];for(let t=1;t<i.length;t++){var o=i[t];(null!=(n=null==r?void 0:r(o,e))?n:o-e<0)&&(e=o)}return e}};function arrayEqual(e,t){if(!isArray_default(e)||!isArray_default(t))return!1;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function flattenArray(e){if(!isArray_default(e))return[e];var t=[];for(const i of e)t.push(...flattenArray(i));return t}function range(e,t,i){isValid_default(t)||(t=e,e=0),isValid_default(i)||(i=1);let r=-1;for(var n=0|Math.max(0,Math.ceil((t-e)/i)),o=new Array(n);++r<n;)o[r]=e+r*i;return o}function ascending(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function toNumber(e){return Number(e)}function bisect(e,t,i=0,r){for(isNil_default(r)&&(r=e.length);i<r;){var n=i+r>>>1;0<ascending(e[n],t)?r=n:i=1+n}return i}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var DEFAULT_ABSOLUTE_TOLERATE=1e-10,DEFAULT_RELATIVE_TOLERATE=1e-10;function isNumberClose(e,t,i=DEFAULT_RELATIVE_TOLERATE,r=DEFAULT_ABSOLUTE_TOLERATE){var n=r,o=i*Math.max(e,t);return Math.abs(e-t)<=Math.max(n,o)}function isGreater(e,t,i,r){return t<e&&!isNumberClose(e,t,i,r)}function isLess(e,t,i,r){return e<t&&!isNumberClose(e,t,i,r)}init_esbuild_inject();var memoize=t=>{let i=null,r=null;return(...e)=>(i&&e.every((e,t)=>e===i[t])||(i=e,r=t(...e)),r)},clamp=(init_esbuild_inject(),function(e,t,i){return e<t?t:i<e?i:e}),clamp_default=clamp,clampRange=(init_esbuild_inject(),(e,t,i)=>{let[r,n]=e;n<r&&(r=e[1],n=e[0]);var o=n-r;return i-t<=o?[t,i]:[r=Math.min(Math.max(r,t),i-o),r+o]}),clampRange_default=clampRange;function clamper(t,i){var e;return i<t&&(e=t,t=i,i=e),e=>Math.max(t,Math.min(i,e))}init_esbuild_inject(),init_esbuild_inject();var hasRaf=!1;try{hasRaf=\\\"function\\\"==typeof requestAnimationFrame&&\\\"function\\\"==typeof cancelAnimationFrame}catch(err){hasRaf=!1}function debounce(r,n,e){let o,a,l,s,h,d,u=0,c=!1,g=!1,t=!0;const i=!n&&0!==n&&hasRaf;if(\\\"function\\\"!=typeof r)throw new TypeError(\\\"Expected a function\\\");function p(e){var t=o,i=a;return o=a=void 0,u=e,s=r.apply(i,t)}function f(e,t){return i?(cancelAnimationFrame(h),requestAnimationFrame(e)):setTimeout(e,t)}function m(e){var t=e-d;return void 0===d||n<=t||t<0||g&&e-u>=l}function b(){var e,t,i=Date.now();if(m(i))return v(i);h=f(b,(i=(e=i)-u,t=n-(e-d),g?Math.min(t,l-i):t))}function v(e){return h=void 0,t&&o?p(e):(o=a=void 0,s)}function C(...e){var t=Date.now(),i=m(t);if(o=e,a=this,d=t,i){if(void 0===h)return e=d,u=e,h=f(b,n),c?p(e):s;if(g)return h=f(b,n),p(d)}return void 0===h&&(h=f(b,n)),s}return n=+n||0,isObject_default(e)&&(c=!!e.leading,(g=\\\"maxWait\\\"in e)&&(l=Math.max(isValidNumber_default(e.maxWait)?e.maxWait:0,n)),t=\\\"trailing\\\"in e?!!e.trailing:t),C.cancel=function(){var e;void 0!==h&&(e=h,(i?cancelAnimationFrame:clearTimeout)(e)),u=0,o=d=a=h=void 0},C.flush=function(){return void 0===h?s:v(Date.now())},C.pending=function(){return void 0!==h},C}var hasRaf=!1,debounce_default=debounce;function throttle(e,t,i){let r=!0,n=!0;if(\\\"function\\\"!=typeof e)throw new TypeError(\\\"Expected a function\\\");return isObject_default(i)&&(r=\\\"leading\\\"in i?!!i.leading:r,n=\\\"trailing\\\"in i?!!i.trailing:n),debounce_default(e,t,{leading:r,trailing:n,maxWait:t})}init_esbuild_inject();var throttle_default=throttle;function interpolateNumber(t,i){return e=>t*(1-e)+i*e}function interpolateNumberRound(t,i){return function(e){return Math.round(t*(1-e)+i*e)}}function interpolateDate(e,t){const i=e.valueOf(),r=t.valueOf(),n=new Date;return e=>(n.setTime(i*(1-e)+r*e),n)}init_esbuild_inject();var reA=/[-+]?(?:\\\\d+\\\\.?\\\\d*|\\\\.?\\\\d+)(?:[eE][-+]?\\\\d+)?/g,reB=new RegExp(reA.source,\\\"g\\\"),epsilon=(init_esbuild_inject(),init_esbuild_inject(),1e-12),pi=Math.PI,halfPi=pi/2,tau=2*pi,pi2=2*Math.PI,abs=Math.abs,atan2=Math.atan2,cos=Math.cos,max=Math.max,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,pow=Math.pow;function acos(e){return 1<e?0:e<-1?pi:Math.acos(e)}function asin(e){return 1<=e?halfPi:e<=-1?-halfPi:Math.asin(e)}function pointAt(e,t,i,r,n){let o,a;return\\\"number\\\"==typeof e&&\\\"number\\\"==typeof i&&(o=(1-n)*e+n*i),\\\"number\\\"==typeof t&&\\\"number\\\"==typeof r&&(a=(1-n)*t+n*r),{x:o,y:a}}var Point=class o6{constructor(e=0,t=0,i,r){this.x=0,this.y=0,this.x=e,this.y=t,this.x1=i,this.y1=r}clone(){return new o6(this.x,this.y)}copyFrom(e){return this.x=e.x,this.y=e.y,this.x1=e.x1,this.y1=e.y1,this.defined=e.defined,this.context=e.context,this}set(e,t){return this.x=e,this.y=t,this}add(e){return isNumber_default(e)?(this.x+=e,void(this.y+=e)):(this.x+=e.x,this.y+=e.y,this)}sub(e){return isNumber_default(e)?(this.x-=e,void(this.y-=e)):(this.x-=e.x,this.y-=e.y,this)}multi(e){throw new Error(\\\"暂不支持\\\")}div(e){throw new Error(\\\"暂不支持\\\")}},PointService=class{static distancePP(e,t){return sqrt(pow(e.x-t.x,2)+pow(e.y-t.y,2))}static distanceNN(e,t,i,r){return sqrt(pow(e-i,2)+pow(t-r,2))}static distancePN(e,t,i){return sqrt(pow(t-e.x,2)+pow(i-e.y,2))}static pointAtPP(e,t,i){return new Point((t.x-e.x)*i+e.x,(t.y-e.y)*i+e.y)}};function transformBoundsWithMatrix(e,t,i){var{x1:r,y1:n,x2:o,y2:a}=t;return i.onlyTranslate()?(e!==t&&e.setValue(t.x1,t.y1,t.x2,t.y2),e.translate(i.e,i.f)):(e.clear(),e.add(i.a*r+i.c*n+i.e,i.b*r+i.d*n+i.f),e.add(i.a*o+i.c*n+i.e,i.b*o+i.d*n+i.f),e.add(i.a*o+i.c*a+i.e,i.b*o+i.d*a+i.f),e.add(i.a*r+i.c*a+i.e,i.b*r+i.d*a+i.f)),t}init_esbuild_inject();var Bounds=class T6{constructor(e){e?this.setValue(e.x1,e.y1,e.x2,e.y2):this.clear()}clone(){return new T6(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2}setValue(e=0,t=0,i=0,r=0){return this.x1=e,this.y1=t,this.x2=i,this.y2=r,this}set(e=0,t=0,i=0,r=0){return i<e?(this.x2=e,this.x1=i):(this.x1=e,this.x2=i),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this}add(e=0,t=0){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this}expand(e=0){return isArray_default(e)?(this.y1-=e[0],this.x2+=e[1],this.y2+=e[2],this.x1-=e[3]):(this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(e=0,t=0){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this}rotate(e=0,t=0,i=0){var r=this.rotatedPoints(e,t,i);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])}scale(e=0,t=0,i=0,r=0){var n=this.scalePoints(e,t,i,r);return this.clear().add(n[0],n[1]).add(n[2],n[3])}union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this}intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this}encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2}alignsWith(e){return e&&(this.x1===e.x1||this.x2===e.x2||this.y1===e.y1||this.y2===e.y2)}intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)}contains(e=0,t=0){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)}containsPoint(e){return!(e.x<this.x1||e.x>this.x2||e.y<this.y1||e.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(e=0){return this.x1*=e,this.x2*=e,this}scaleY(e=0){return this.y1*=e,this.y2*=e,this}transformWithMatrix(e){return transformBoundsWithMatrix(this,this,e),this}copy(e){return this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2,this}rotatedPoints(e,t,i){var{x1:r,y1:n,x2:o,y2:a}=this,l=Math.cos(e),s=Math.sin(e),h=t-t*l+i*s,d=i-t*s-i*l;return[l*r-s*n+h,s*r+l*n+d,l*r-s*a+h,s*r+l*a+d,l*o-s*n+h,s*o+l*n+d,l*o-s*a+h,s*o+l*a+d]}scalePoints(e,t,i,r){var{x1:n,y1:o,x2:a,y2:l}=this;return[e*n+(1-e)*i,t*o+(1-t)*r,e*a+(1-e)*i,t*l+(1-t)*r]}},AABBBounds=class extends Bounds{};function degreeToRadian(e){return e*(Math.PI/180)}function radianToDegree(e){return 180*e/Math.PI}init_esbuild_inject(),init_esbuild_inject();var clampRadian=(e=0)=>{if(e<0)for(;e<-tau;)e+=tau;else if(0<e)for(;tau<e;)e-=tau;return e},clampAngleByRadian=clampRadian;function polarToCartesian(e,t,i){return{x:e.x+t*Math.cos(i),y:e.y+t*Math.sin(i)}}var Matrix=class _h{constructor(e=1,t=0,i=0,r=1,n=0,o=0){this.a=e,this.b=t,this.c=i,this.d=r,this.e=n,this.f=o}equalToMatrix(e){return!(this.e!==e.e||this.f!==e.f||this.a!==e.a||this.d!==e.d||this.b!==e.b||this.c!==e.c)}equalTo(e,t,i,r,n,o){return!(this.e!==n||this.f!==o||this.a!==e||this.d!==r||this.b!==t||this.c!==i)}setValue(e,t,i,r,n,o){return this.a=e,this.b=t,this.c=i,this.d=r,this.e=n,this.f=o,this}reset(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}getInverse(){var e=this.a,t=this.b,i=this.c,r=this.d,n=this.e,o=this.f,a=new _h,l=e*r-t*i;return a.a=r/l,a.b=-t/l,a.c=-i/l,a.d=e/l,a.e=(i*o-r*n)/l,a.f=-(e*o-t*n)/l,a}rotate(e){var t=Math.cos(e),i=Math.sin(e),r=this.a*t+this.c*i,n=this.b*t+this.d*i,o=this.a*-i+this.c*t,i=this.b*-i+this.d*t;return this.a=r,this.b=n,this.c=o,this.d=i,this}rotateByCenter(e,t,i){var r=Math.cos(e),n=Math.sin(e),o=r*this.a-n*this.b,a=n*this.a+r*this.b,l=r*this.c-n*this.d,s=n*this.c+r*this.d,h=r*this.e-n*this.f+((1-r)*t+n*i),r=n*this.e+r*this.f+((1-r)*i-n*t);return this.a=o,this.b=a,this.c=l,this.d=s,this.e=h,this.f=r,this}scale(e,t){return this.a*=e,this.b*=e,this.c*=t,this.d*=t,this}setScale(e,t){return this.b=this.b/this.a*e,this.c=this.c/this.d*t,this.a=e,this.d=t,this}transform(e,t,i,r,n,o){return this.multiply(e,t,i,r,n,o),this}translate(e,t){return this.e+=this.a*e+this.c*t,this.f+=this.b*e+this.d*t,this}transpose(){var{a:e,b:t,c:i,d:r,e:n,f:o}=this;return this.a=t,this.b=e,this.c=r,this.d=i,this.e=o,this.f=n,this}multiply(e,t,i,r,n,o){var a=this.a,l=this.b,s=this.c,h=this.d,d=l*e+h*t,u=a*i+s*r,c=l*i+h*r,g=a*n+s*o+this.e,l=l*n+h*o+this.f;return this.a=a*e+s*t,this.b=d,this.c=u,this.d=c,this.e=g,this.f=l,this}interpolate(e,t){var i=new _h;return i.a=this.a+(e.a-this.a)*t,i.b=this.b+(e.b-this.b)*t,i.c=this.c+(e.c-this.c)*t,i.d=this.d+(e.d-this.d)*t,i.e=this.e+(e.e-this.e)*t,i.f=this.f+(e.f-this.f)*t,i}transformPoint(e,t){var{a:i,b:r,c:n,d:o,e:a,f:l}=this,s=i*o-r*n,h=-r/s,d=i/s,i=-(i*l-r*a)/s,{x:r,y:u}=e;t.x=r*(o/s)+u*(-n/s)+(n*l-o*a)/s,t.y=r*h+u*d+i}onlyTranslate(e=1){return this.a===e&&0===this.b&&0===this.c&&this.d===e}clone(){return new _h(this.a,this.b,this.c,this.d,this.e,this.f)}toTransformAttrs(){var e,t=this.a,i=this.b,r=this.c,n=this.d,o=t*n-i*r,a={x:this.e,y:this.f,rotateDeg:0,scaleX:0,scaleY:0,skewX:0,skewY:0};return 0!==t||0!==i?(e=Math.sqrt(t*t+i*i),a.rotateDeg=0<i?Math.acos(t/e):-Math.acos(t/e),a.scaleX=e,a.scaleY=o/e,a.skewX=(t*r+i*n)/o,a.skewY=0):0===r&&0===n||(e=Math.sqrt(r*r+n*n),a.rotateDeg=Math.PI/2-(0<n?Math.acos(-r/e):-Math.acos(r/e)),a.scaleX=o/e,a.scaleY=e,a.skewX=0,a.skewY=(t*r+i*n)/o),a.rotateDeg=radianToDegree(a.rotateDeg),a}};function normalTransform(e,t,i,r,n,o,a,l){var s=t.a,h=t.b,d=t.c,u=t.d,c=t.e,g=t.f,p=cos(a),f=sin(a);let m,b;b=l?(m=l[0],l[1]):(m=i,r);var v=m-i,C=b-r,y=s*p+d*f,_=h*p+u*f,w=d*p-s*f,p=u*p-h*f;e.a=n*y,e.b=n*_,e.c=o*w,e.d=o*p,e.e=c+s*m+d*b-y*v-w*C,e.f=g+h*m+u*b-_*v-p*C}init_esbuild_inject();var LRU=class{constructor(){this.CLEAN_THRESHOLD=1e3,this.L_TIME=1e3,this.R_COUNT=1,this.R_TIMESTAMP_MAX_SIZE=20}clearCache(t,e){const{CLEAN_THRESHOLD:i=this.CLEAN_THRESHOLD,L_TIME:r=this.L_TIME,R_COUNT:n=this.R_COUNT}=e;if(t.size<i)return 0;let o=0;const a=e=>{o++,t[\\\"delete\\\"](e)},l=Date.now();return t.forEach((e,t)=>{if(e.timestamp.length<n)return a(t);let i=0;for(;l-e.timestamp[e.timestamp.length-1-i]<r&&!(++i>=n););if(i<n)return a(t);for(;l-e.timestamp[0]>r;)e.timestamp.shift()}),o}addLimitedTimestamp(e,t,i){var{R_TIMESTAMP_MAX_SIZE:r=this.R_TIMESTAMP_MAX_SIZE}=i;e.timestamp.length>r&&e.timestamp.shift(),e.timestamp.push(t)}clearTimeStamp(e,t){const{L_TIME:i=this.L_TIME}=t,r=Date.now();e.forEach(e=>{for(;r-e.timestamp[0]>i;)e.timestamp.shift()})}clearItemTimestamp(e,t){for(var{L_TIME:i=this.L_TIME}=t,r=Date.now();r-e.timestamp[0]>i;)e.timestamp.shift()}},color_exports={};function hslToRgb(e,t,i){t/=100,i/=100;var r=(1-Math.abs(2*i-1))*t,n=r*(1-Math.abs(e/60%2-1)),o=i-r/2;let a=0,l=0,s=0;return 0<=e&&e<60?(a=r,l=n,s=0):60<=e&&e<120?(a=n,l=r,s=0):120<=e&&e<180?(a=0,l=r,s=n):180<=e&&e<240?(a=0,l=n,s=r):240<=e&&e<300?(a=n,l=0,s=r):300<=e&&e<360&&(a=r,l=0,s=n),a=Math.round(255*(a+o)),l=Math.round(255*(l+o)),s=Math.round(255*(s+o)),{r:a,g:l,b:s}}function rgbToHsl(e,t,i){e/=255,t/=255,i/=255;var r=Math.min(e,t,i),n=Math.max(e,t,i),o=n-r;let a=0,l,s;return a=0==o?0:n===e?(t-i)/o%6:n===t?(i-e)/o+2:(e-t)/o+4,(a=Math.round(60*a))<0&&(a+=360),s=(n+r)/2,l=+(100*(0==o?0:o/(1-Math.abs(2*s-1)))).toFixed(1),s=+(100*s).toFixed(1),{h:a,s:l,l:s}}__export(color_exports,{Color:()=>Color,DEFAULT_COLORS:()=>DEFAULT_COLORS,RGB:()=>RGB,hexToRgb:()=>hexToRgb,hslToRgb:()=>hslToRgb,interpolateRgb:()=>interpolateRgb,rgbToHex:()=>rgbToHex,rgbToHsl:()=>rgbToHsl}),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var REG_HEX=/^#([0-9a-f]{3,8})$/,DEFAULT_COLORS_OPACITY={transparent:4294967040},DEFAULT_COLORS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hex(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?\\\"0\\\":\\\"\\\")+e.toString(16)}function rgb(e){return isNumber_default(e)?new RGB(e>>16,e>>8&255,255&e,1):isArray_default(e)?new RGB(e[0],e[1],e[2]):new RGB(255,255,255)}function rgba(e){return isNumber_default(e)?new RGB(e>>>24,e>>>16&255,e>>>8&255,255&e):isArray_default(e)?new RGB(e[0],e[1],e[2],e[3]):new RGB(255,255,255,1)}function SRGBToLinear(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function LinearToSRGB(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var x11,x12,y11,y12,x21,x22,y21,y22,InnerBBox,Color=class vj{static Brighter(e,t=1){return 1===t?e:new vj(e).brighter(t).toRGBA()}static SetOpacity(e,t=1){return 1===t?e:new vj(e).setOpacity(t).toRGBA()}static getColorBrightness(e,t=\\\"hsl\\\"){var i=e instanceof vj?e:new vj(e);switch(t){case\\\"hsv\\\":default:return i.getHSVBrightness();case\\\"hsl\\\":return i.getHSLBrightness();case\\\"lum\\\":return i.getLuminance();case\\\"lum2\\\":return i.getLuminance2();case\\\"lum3\\\":return i.getLuminance3()}}static parseColorString(e){var t,i,r;return isValid_default(DEFAULT_COLORS_OPACITY[e])?rgba(DEFAULT_COLORS_OPACITY[e]):isValid_default(DEFAULT_COLORS[e])?rgb(DEFAULT_COLORS[e]):(t=(\\\"\\\"+e).trim().toLowerCase(),(r=REG_HEX.exec(t))?(i=parseInt(r[1],16),3===(r=r[1].length)?new RGB((i>>8&15)+((i>>8&15)<<4),(i>>4&15)+((i>>4&15)<<4),(15&i)+((15&i)<<4),1):6===r?rgb(i):8===r?new RGB(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):void 0):/^(rgb|RGB|rgba|RGBA)/.test(t)?(r=t.replace(/(?:\\\\(|\\\\)|rgba|RGBA|rgb|RGB)*/g,\\\"\\\").split(\\\",\\\"),new RGB(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseFloat(r[3]))):/^(hsl|HSL|hsla|HSLA)/.test(t)?(i=t.replace(/(?:\\\\(|\\\\)|hsla|HSLA|hsl|HSL)*/g,\\\"\\\").split(\\\",\\\"),r=hslToRgb(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)),new RGB(r.r,r.g,r.b,parseFloat(i[3]))):void 0)}constructor(e){var t=vj.parseColorString(e);t?this.color=t:(console.warn(`Warn: 传入${e}无法解析为Color`),this.color=new RGB(255,255,255))}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(e){var{r:t,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(t*e))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*e))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*e))),this}add(e){var{r:t,g:i,b:r}=this.color;return this.color.r+=Math.min(255,t+e.color.r),this.color.g+=Math.min(255,i+e.color.g),this.color.b+=Math.min(255,r+e.color.b),this}sub(e){return this.color.r=Math.max(0,this.color.r-e.color.r),this.color.g=Math.max(0,this.color.g-e.color.g),this.color.b=Math.max(0,this.color.b-e.color.b),this}multiply(e){var{r:t,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(t*e.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*e.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*e.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return.5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(e,t,i){var r=this.color.opacity,n=rgbToHsl(this.color.r,this.color.g,this.color.b),n=hslToRgb(isNil_default(e)?n.h:clamp_default(e,0,360),isNil_default(t)?n.s:0<=t&&t<=1?100*t:t,isNil_default(i)?n.l:i<=1&&0<=i?100*i:i);return this.color=new RGB(n.r,n.g,n.b,r),this}setRGB(e,t,i){return isNil_default(e)||(this.color.r=e),isNil_default(t)||(this.color.g=t),isNil_default(i)||(this.color.b=i),this}setHex(e){var t=(\\\"\\\"+e).trim().toLowerCase(),t=REG_HEX.exec(t),i=parseInt(t[1],16),t=t[1].length;return 3===t?new RGB((i>>8&15)+((i>>8&15)<<4),(i>>4&15)+((i>>4&15)<<4),(15&i)+((15&i)<<4),1):6===t?rgb(i):8===t?new RGB(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):this}setColorName(e){var t=DEFAULT_COLORS[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn(\\\"THREE.Color: Unknown color \\\"+e),this}setScalar(e){return this.color.r=e,this.color.g=e,this.color.b=e,this}setOpacity(e=1){return this.color.opacity=e,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}clone(){return new vj(this.color.toString())}copyGammaToLinear(e,t=2){return this.color.r=Math.pow(e.color.r,t),this.color.g=Math.pow(e.color.g,t),this.color.b=Math.pow(e.color.b,t),this}copyLinearToGamma(e,t=2){var i=0<t?1/t:1;return this.color.r=Math.pow(e.color.r,i),this.color.g=Math.pow(e.color.g,i),this.color.b=Math.pow(e.color.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.color.r=SRGBToLinear(e.color.r),this.color.g=SRGBToLinear(e.color.g),this.color.b=SRGBToLinear(e.color.b),this}copyLinearToSRGB(e){return this.color.r=LinearToSRGB(e.color.r),this.color.g=LinearToSRGB(e.color.g),this.color.b=LinearToSRGB(e.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}},RGB=class{constructor(e,t,i,r){this.r=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.g=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.b=isNaN(+i)?255:Math.max(0,Math.min(255,+i)),isValid_default(r)?this.opacity=isNaN(+r)?1:Math.max(0,Math.min(1,+r)):this.opacity=1}formatHex(){return\\\"#\\\"+(hex(this.r)+hex(this.g)+hex(this.b)+(1===this.opacity?\\\"\\\":hex(255*this.opacity)))}formatRgb(){var e=this.opacity;return(1===e?\\\"rgb(\\\":\\\"rgba(\\\")+this.r+`,${this.g},`+this.b+(1===e?\\\")\\\":`,${e})`)}formatHsl(){var e=this.opacity,{h:t,s:i,l:r}=rgbToHsl(this.r,this.g,this.b);return(1===e?\\\"hsl(\\\":\\\"hsla(\\\")+t+`,${i}%,${r}%`+(1===e?\\\")\\\":`,${e})`)}toString(){return this.formatHex()}};function hexToRgb(e){let t=\\\"\\\",i=\\\"\\\",r=\\\"\\\";var n=\\\"#\\\"===e[0]?1:0;for(let o=n;o<e.length;o++)\\\"#\\\"!==e[o]&&(o<2+n?t+=e[o]:o<4+n?i+=e[o]:o<6+n&&(r+=e[o]));return[parseInt(t,16),parseInt(i,16),parseInt(r,16)]}function rgbToHex(e,t,i){return Number((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)}function interpolateRgb(e,t){const n=e.r,o=t.r,a=e.g,l=t.g,s=e.b,h=t.b,d=e.opacity,u=t.opacity;return e=>{var t=Math.round(n*(1-e)+o*e),i=Math.round(a*(1-e)+l*e),r=Math.round(s*(1-e)+h*e);return new RGB(t,i,r,d*(1-e)+u*e)}}function getRectIntersect(e,t,i){return null===e?t:null===t?e:(x11=e.x1,x12=e.x2,y11=e.y1,y12=e.y2,x21=t.x1,x22=t.x2,y21=t.y1,y22=t.y2,i&&(x12<x11&&([x11,x12]=[x12,x11]),y12<y11&&([y11,y12]=[y12,y11]),x22<x21&&([x21,x22]=[x22,x21]),y22<y21)&&([y21,y22]=[y22,y21]),x22<=x11||x12<=x21||y22<=y11||y12<=y21?{x1:0,y1:0,x2:0,y2:0}:{x1:Math.max(x11,x21),y1:Math.max(y11,y21),x2:Math.min(x12,x22),y2:Math.min(y12,y22)})}function rectInsideAnotherRect(e,t,i){return e&&t?(x11=e.x1,x12=e.x2,y11=e.y1,y12=e.y2,x21=t.x1,x22=t.x2,y21=t.y1,y22=t.y2,i&&(x12<x11&&([x11,x12]=[x12,x11]),y12<y11&&([y11,y12]=[y12,y11]),x22<x21&&([x21,x22]=[x22,x21]),y22<y21)&&([y21,y22]=[y22,y21]),x21<x11&&x12<x22&&y21<y11&&y12<y22?InnerBBox.BBOX1:x11<x21&&x22<x12&&y11<y21&&y22<y12?InnerBBox.BBOX2:InnerBBox.NONE):InnerBBox.NONE}function isRectIntersect(e,t,i){return!(e&&t&&(i?(x11=e.x1,x12=e.x2,y11=e.y1,y12=e.y2,x21=t.x1,x22=t.x2,y21=t.y1,y22=t.y2,x12<x11&&([x11,x12]=[x12,x11]),y12<y11&&([y11,y12]=[y12,y11]),x22<x21&&([x21,x22]=[x22,x21]),y22<y21&&([y21,y22]=[y22,y21]),x22<x11||x12<x21||y22<y11||y12<y21):e.x1>t.x2||e.x2<t.x1||e.y1>t.y2||e.y2<t.y1))}function getProjectionRadius(e,t){return Math.abs(t[0]*e[0]+t[1]*e[1])}function rotate({x:e,y:t},i,r={x:0,y:0}){return{x:(e-r.x)*Math.cos(i)+(t-r.y)*Math.sin(i)+r.x,y:(e-r.x)*Math.sin(i)+(r.y-t)*Math.cos(i)+r.y}}function toDeg(e){return e/180*Math.PI}function getCenterPoint(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}function toRect(e,t){var i=t?e.angle:toDeg(e.angle),r=getCenterPoint(e);return[rotate({x:e.x1,y:e.y1},i,r),rotate({x:e.x2,y:e.y1},i,r),rotate({x:e.x2,y:e.y2},i,r),rotate({x:e.x1,y:e.y2},i,r)]}function isRotateAABBIntersect(e,t,i=!1,r){var n=toRect(e,i),o=toRect(t,i),a=(e,t)=>[t.x-e.x,t.y-e.y],l=(r&&(r.save(),r.fillStyle=\\\"red\\\",r.globalAlpha=.6,n.forEach((e,t)=>{0===t?r.moveTo(e.x,e.y):r.lineTo(e.x,e.y)}),r.fill(),r.restore(),r.save(),r.fillStyle=\\\"green\\\",r.globalAlpha=.6,o.forEach((e,t)=>{0===t?r.moveTo(e.x,e.y):r.lineTo(e.x,e.y)}),r.fill(),r.restore()),getCenterPoint(e)),s=getCenterPoint(t);r&&r.fillRect(l.x,l.y,2,2),r&&r.fillRect(s.x,s.y,2,2);const h=a(l,s),d=a(n[0],n[1]),u=a(n[1],n[2]),c=a(o[0],o[1]),g=a(o[1],o[2]),p=i?e.angle:toDeg(e.angle);let f=i?e.angle+halfPi:toDeg(90-e.angle);l=i?t.angle:toDeg(t.angle);let m=i?t.angle+halfPi:toDeg(90-t.angle);f>pi2&&(f-=pi2),m>pi2&&(m-=pi2);s=(e,t,i,r)=>{var n=[Math.cos(t),Math.sin(t)];return e+(getProjectionRadius(n,i)+getProjectionRadius(n,r))/2>getProjectionRadius(n,h)};return s((e.x2-e.x1)/2,p,c,g)&&s((e.y2-e.y1)/2,f,c,g)&&s((t.x2-t.x1)/2,l,d,u)&&s((t.y2-t.y1)/2,m,d,u)}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),function(e){e[e.NONE=0]=\\\"NONE\\\",e[e.BBOX1=1]=\\\"BBOX1\\\",e[e.BBOX2=2]=\\\"BBOX2\\\"}(InnerBBox=InnerBBox||{}),init_esbuild_inject();var eastAsianCharacterInfo=e=>{let t=e.charCodeAt(0),i=2===e.length?e.charCodeAt(1):0,r=t;return 55296<=t&&t<=56319&&56320<=i&&i<=57343&&(t&=1023,i&=1023,r=t<<10|i,r+=65536),12288===r||65281<=r&&r<=65376||65504<=r&&r<=65510?\\\"F\\\":8361===r||65377<=r&&r<=65470||65474<=r&&r<=65479||65482<=r&&r<=65487||65490<=r&&r<=65495||65498<=r&&r<=65500||65512<=r&&r<=65518?\\\"H\\\":4352<=r&&r<=4447||4515<=r&&r<=4519||4602<=r&&r<=4607||9001<=r&&r<=9002||11904<=r&&r<=11929||11931<=r&&r<=12019||12032<=r&&r<=12245||12272<=r&&r<=12283||12289<=r&&r<=12350||12353<=r&&r<=12438||12441<=r&&r<=12543||12549<=r&&r<=12589||12593<=r&&r<=12686||12688<=r&&r<=12730||12736<=r&&r<=12771||12784<=r&&r<=12830||12832<=r&&r<=12871||12880<=r&&r<=13054||13056<=r&&r<=19903||19968<=r&&r<=42124||42128<=r&&r<=42182||43360<=r&&r<=43388||44032<=r&&r<=55203||55216<=r&&r<=55238||55243<=r&&r<=55291||63744<=r&&r<=64255||65040<=r&&r<=65049||65072<=r&&r<=65106||65108<=r&&r<=65126||65128<=r&&r<=65131||110592<=r&&r<=110593||127488<=r&&r<=127490||127504<=r&&r<=127546||127552<=r&&r<=127560||127568<=r&&r<=127569||131072<=r&&r<=194367||177984<=r&&r<=196605||196608<=r&&r<=262141?\\\"W\\\":32<=r&&r<=126||162<=r&&r<=163||165<=r&&r<=166||172===r||175===r||10214<=r&&r<=10221||10629<=r&&r<=10630?\\\"Na\\\":161===r||164===r||167<=r&&r<=168||170===r||173<=r&&r<=174||176<=r&&r<=180||182<=r&&r<=186||188<=r&&r<=191||198===r||208===r||215<=r&&r<=216||222<=r&&r<=225||230===r||232<=r&&r<=234||236<=r&&r<=237||240===r||242<=r&&r<=243||247<=r&&r<=250||252===r||254===r||257===r||273===r||275===r||283===r||294<=r&&r<=295||299===r||305<=r&&r<=307||312===r||319<=r&&r<=322||324===r||328<=r&&r<=331||333===r||338<=r&&r<=339||358<=r&&r<=359||363===r||462===r||464===r||466===r||468===r||470===r||472===r||474===r||476===r||593===r||609===r||708===r||711===r||713<=r&&r<=715||717===r||720===r||728<=r&&r<=731||733===r||735===r||768<=r&&r<=879||913<=r&&r<=929||931<=r&&r<=937||945<=r&&r<=961||963<=r&&r<=969||1025===r||1040<=r&&r<=1103||1105===r||8208===r||8211<=r&&r<=8214||8216<=r&&r<=8217||8220<=r&&r<=8221||8224<=r&&r<=8226||8228<=r&&r<=8231||8240===r||8242<=r&&r<=8243||8245===r||8251===r||8254===r||8308===r||8319===r||8321<=r&&r<=8324||8364===r||8451===r||8453===r||8457===r||8467===r||8470===r||8481<=r&&r<=8482||8486===r||8491===r||8531<=r&&r<=8532||8539<=r&&r<=8542||8544<=r&&r<=8555||8560<=r&&r<=8569||8585===r||8592<=r&&r<=8601||8632<=r&&r<=8633||8658===r||8660===r||8679===r||8704===r||8706<=r&&r<=8707||8711<=r&&r<=8712||8715===r||8719===r||8721===r||8725===r||8730===r||8733<=r&&r<=8736||8739===r||8741===r||8743<=r&&r<=8748||8750===r||8756<=r&&r<=8759||8764<=r&&r<=8765||8776===r||8780===r||8786===r||8800<=r&&r<=8801||8804<=r&&r<=8807||8810<=r&&r<=8811||8814<=r&&r<=8815||8834<=r&&r<=8835||8838<=r&&r<=8839||8853===r||8857===r||8869===r||8895===r||8978===r||9312<=r&&r<=9449||9451<=r&&r<=9547||9552<=r&&r<=9587||9600<=r&&r<=9615||9618<=r&&r<=9621||9632<=r&&r<=9633||9635<=r&&r<=9641||9650<=r&&r<=9651||9654<=r&&r<=9655||9660<=r&&r<=9661||9664<=r&&r<=9665||9670<=r&&r<=9672||9675===r||9678<=r&&r<=9681||9698<=r&&r<=9701||9711===r||9733<=r&&r<=9734||9737===r||9742<=r&&r<=9743||9748<=r&&r<=9749||9756===r||9758===r||9792===r||9794===r||9824<=r&&r<=9825||9827<=r&&r<=9829||9831<=r&&r<=9834||9836<=r&&r<=9837||9839===r||9886<=r&&r<=9887||9918<=r&&r<=9919||9924<=r&&r<=9933||9935<=r&&r<=9953||9955===r||9960<=r&&r<=9983||10045===r||10071===r||10102<=r&&r<=10111||11093<=r&&r<=11097||12872<=r&&r<=12879||57344<=r&&r<=63743||65024<=r&&r<=65039||65533===r||127232<=r&&r<=127242||127248<=r&&r<=127277||127280<=r&&r<=127337||127344<=r&&r<=127386||917760<=r&&r<=917999||983040<=r&&r<=1048573||1048576<=r&&r<=1114109?\\\"A\\\":\\\"N\\\"};function getContextFont(e,t={}){var{fontStyle:i=t.fontStyle,fontVariant:r=t.fontVariant,fontWeight:n=t.fontWeight,fontSize:o=t.fontSize,fontFamily:a=t.fontFamily}=e;return(i?i+\\\" \\\":\\\"\\\")+(r?r+\\\" \\\":\\\"\\\")+(n?n+\\\" \\\":\\\"\\\")+o+\\\"px \\\"+(a||\\\"sans-serif\\\")}init_esbuild_inject(),init_esbuild_inject();var LoggerLevel,TextMeasure=class ml{constructor(e,t){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet=`-/: .,@%'\\\"~`,this._option=e,this._userSpec=null!=t?t:{},this.textSpec=this._initSpec(),isValid_default(e.specialCharSet)&&(this.specialCharSet=e.specialCharSet),this._standardMethod=(isValid_default(e.getTextBounds)?this.fullMeasure:this.measureWithNaiveCanvas).bind(this)}initContext(){var e;return!this._notSupportCanvas&&(isNil_default(this._canvas)&&(isValid_default(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),isNil_default(this._canvas))&&\\\"undefined\\\"!=typeof window&&void 0!==window.document&&globalThis&&isValid_default(globalThis.document)&&(this._canvas=globalThis.document.createElement(\\\"canvas\\\")),isNil_default(this._context)&&isValid_default(this._canvas)&&(e=this._canvas.getContext(\\\"2d\\\"),isValid_default(e))&&(e.save(),e.font=getContextFont(this.textSpec),this._contextSaved=!0,this._context=e),!isNil_default(this._context)||!(this._notSupportCanvas=!0))}_initSpec(){var e,{defaultFontParams:t={}}=this._option,{fontStyle:i=t.fontStyle,fontVariant:r=t.fontVariant,fontWeight:n=null!=(n=t.fontWeight)?n:\\\"normal\\\",fontSize:o=null!=(o=t.fontSize)?o:12,fontFamily:t=null!=(t=t.fontFamily)?t:\\\"sans-serif\\\",align:a,textAlign:a=null!=a?a:\\\"center\\\",baseline:l,textBaseline:l=null!=l?l:\\\"middle\\\",ellipsis:s,limit:h}=this._userSpec;let{lineHeight:d=o}=this._userSpec;return isString_default(d)&&\\\"%\\\"===d[d.length-1]&&(e=Number.parseFloat(d.substring(0,d.length-1))/100,d=o*e),{fontStyle:i,fontVariant:r,fontFamily:t,fontSize:o,fontWeight:n,textAlign:a,textBaseline:l,ellipsis:s,limit:h,lineHeight:d}}measure(e,t){switch(t){case\\\"vrender\\\":case\\\"canopus\\\":return this.fullMeasure(e);case\\\"canvas\\\":return this.measureWithNaiveCanvas(e);case\\\"simple\\\":return this.quickMeasureWithoutCanvas(e);default:return this.quickMeasure(e)}}fullMeasure(e){if(isNil_default(e))return{width:0,height:0};if(isNil_default(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(e);var{fontFamily:t,fontSize:i,fontWeight:r,textAlign:n,textBaseline:o,ellipsis:a,limit:l,lineHeight:s}=this.textSpec;let h;try{var d=this._option.getTextBounds({text:e,fontFamily:t,fontSize:i,fontWeight:r,textAlign:n,textBaseline:o,ellipsis:!!a,maxLineWidth:l||1/0,lineHeight:s});h={width:d.width(),height:d.height()}}catch(u){this._notSupportVRender=!0,h=this.measureWithNaiveCanvas(e)}return h}measureWithNaiveCanvas(e){return this._measureReduce(e,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(e){var t,i,r;return this.initContext()?(t=this._context.measureText(e),({fontSize:i,lineHeight:r}=this.textSpec),{width:t.width,height:null!=(t=r)?t:i}):this._quickMeasureWithoutCanvas(e)}quickMeasure(e){return this._measureReduce(e,this._quickMeasure.bind(this))}_quickMeasure(t){var i={width:0,height:0};for(let n=0;n<t.length;n++){var r=t[n];let e=this._measureSpecialChar(r);isNil_default(e)&&ml.NUMBERS_CHAR_SET.includes(r)&&(e=this._measureNumberChar()),isNil_default(e)&&[\\\"F\\\",\\\"W\\\"].includes(eastAsianCharacterInfo(r))&&(e=this._measureFullSizeChar()),isNil_default(e)&&(e=this._measureLetterChar()),i.width+=e.width,i.height=Math.max(i.height,e.height)}return i}quickMeasureWithoutCanvas(e){return this._measureReduce(e,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(e){var t={width:0,height:0},{fontSize:i,lineHeight:r}=this.textSpec;for(let o=0;o<e.length;o++){var n=e[o],n=[\\\"F\\\",\\\"W\\\"].includes(eastAsianCharacterInfo(n))?1:.53;t.width+=n*i}return t.height=null!=(r=r)?r:i,t}_measureReduce(e,i){var t,{fontSize:r,lineHeight:n}=this.textSpec,o={width:0,height:0};return isNil_default(e)?o:isArray_default(e)?0===(t=e.filter(isValid_default).map(e=>e.toString())).length?o:1===t.length?i(t[0]):{width:t.reduce((e,t)=>Math.max(e,i(t).width),0),height:t.length*((null!=(o=n)?o:r)+1)+1}:i(e.toString())}_measureNumberChar(){var e;return isNil_default(this._numberCharSize)&&(e=this._standardMethod(ml.NUMBERS_CHAR_SET),this._numberCharSize={width:e.width/ml.NUMBERS_CHAR_SET.length,height:e.height}),this._numberCharSize}_measureFullSizeChar(){return isNil_default(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(ml.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){var e;return isNil_default(this._letterCharSize)&&(e=this._standardMethod(ml.ALPHABET_CHAR_SET),this._letterCharSize={width:e.width/ml.ALPHABET_CHAR_SET.length,height:e.height}),this._letterCharSize}_measureSpecialChar(e){return isValid_default(this._specialCharSizeMap[e])?this._specialCharSizeMap[e]:this.specialCharSet.includes(e)?(this._specialCharSizeMap[e]=this._standardMethod(e),this._specialCharSizeMap[e]):null}release(){isValid_default(this._canvas)&&(this._canvas=null),isValid_default(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}},hasConsole=(TextMeasure.ALPHABET_CHAR_SET=\\\"abcdefghijklmnopqrstuvwxyz\\\",TextMeasure.NUMBERS_CHAR_SET=\\\"0123456789\\\",TextMeasure.FULL_SIZE_CHAR=\\\"字\\\",init_esbuild_inject(),\\\"undefined\\\"!=typeof console);function log(e,t,i){var r=[t].concat([].slice.call(i));hasConsole&&console[e].apply(console,r)}!function(e){e[e.None=0]=\\\"None\\\",e[e.Error=1]=\\\"Error\\\",e[e.Warn=2]=\\\"Warn\\\",e[e.Info=3]=\\\"Info\\\",e[e.Debug=4]=\\\"Debug\\\"}(LoggerLevel=LoggerLevel||{});var Logger=class Gm{static getInstance(e,t){return Gm._instance&&isNumber_default(e)?Gm._instance.level(e):Gm._instance||(Gm._instance=new Gm(e,t)),Gm._instance}static setInstance(e){return Gm._instance=e}static setInstanceLevel(e){Gm._instance?Gm._instance.level(e):Gm._instance=new Gm(e)}static clearInstance(){Gm._instance=null}constructor(e=LoggerLevel.None,t){this._onErrorHandler=[],this._level=e,this._method=t}addErrorHandler(t){this._onErrorHandler.find(e=>e===t)||this._onErrorHandler.push(t)}removeErrorHandler(t){var e=this._onErrorHandler.findIndex(e=>e===t);e<0||this._onErrorHandler.splice(e,1)}callErrorHandler(...t){this._onErrorHandler.forEach(e=>e(...t))}canLogInfo(){return this._level>=LoggerLevel.Info}canLogDebug(){return this._level>=LoggerLevel.Debug}canLogError(){return this._level>=LoggerLevel.Error}canLogWarn(){return this._level>=LoggerLevel.Warn}level(e){return arguments.length?(this._level=+e,this):this._level}error(...e){var t;return this._level>=LoggerLevel.Error&&(this._onErrorHandler.length?this.callErrorHandler(...e):log(null!=(t=this._method)?t:\\\"error\\\",\\\"ERROR\\\",e)),this}warn(...e){return this._level>=LoggerLevel.Warn&&log(this._method||\\\"warn\\\",\\\"WARN\\\",e),this}info(...e){return this._level>=LoggerLevel.Info&&log(this._method||\\\"log\\\",\\\"INFO\\\",e),this}debug(...e){return this._level>=LoggerLevel.Debug&&log(this._method||\\\"log\\\",\\\"DEBUG\\\",e),this}};function normalizePadding(e){if(isValidNumber_default(e))return[e,e,e,e];if(isArray_default(e)){var t=e.length;if(1===t)return[i=e[0],i,i,i];if(2===t)return([i,n]=e),[i,n,i,n];if(3===t)return([i,n,r]=e),[i,n,r,n];if(4===t)return e}var i,r,n;return isObject_default(e)?(({top:i=0,right:r=0,bottom:n=0,left:t=0}=e),[i,r,n,t]):[0,0,0,0]}Logger._instance=null,init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var currPath,coordsStr,commandChar,coordStr,coordNumber,standardCommandLen,UpdateTag,IContainPointMode,AttributeUpdateType,AnimateStatus,AnimateMode,AnimateStepType,Direction,CurveTypeEnum,BaseRenderContributionTime,circleThreshold=tau-1e-8,BoundsContext=class{constructor(e){this.init(e)}init(e){this.bounds=e}arc(s,h,d,u,c,g){if(Math.abs(c-u)>circleThreshold)this.bounds.add(s-d,h-d),this.bounds.add(s+d,h+d);else{let e,t,i,r,n=1/0,o=-1/0,a=1/0,l=-1/0;if(p(u),p(c),c!==u)if((u%=tau)<0&&(u+=tau),(c%=tau)<0&&(c+=tau),c<u&&(g=!g,e=u,u=c,c=e),g)for(c-=tau,e=u-u%halfPi,t=0;t<4&&e>c;++t,e-=halfPi)p(e);else for(e=u-u%halfPi+halfPi,t=0;t<4&&e<c;++t,e+=halfPi)p(e);function p(e){i=d*Math.cos(e),r=d*Math.sin(e),i<n&&(n=i),i>o&&(o=i),r<a&&(a=r),r>l&&(l=r)}this.bounds.add(s+n,h+a),this.bounds.add(s+o,h+l)}}arcTo(e,t,i,r,n){throw new Error(\\\"不支持arcTo\\\")}bezierCurveTo(e,t,i,r,n,o){this.bounds.add(e,t),this.bounds.add(i,r),this.bounds.add(n,o)}closePath(){}ellipse(){throw new Error(\\\"不支持ellipse\\\")}lineTo(e,t){this.bounds.add(e,t)}moveTo(e,t){this.bounds.add(e,t)}quadraticCurveTo(e,t,i,r){this.bounds.add(e,t),this.bounds.add(i,r)}rect(e,t,i,r){this.bounds.add(e,t),this.bounds.add(e+i,t+r)}clear(){this.bounds.clear()}release(){}},CurvePath=(init_esbuild_inject(),class{constructor(){this.curves=[],this.bounds=new AABBBounds}getCurveLengths(){return this.curves.map(e=>e.getLength())}getPointAt(e){return{x:0,y:0}}getLength(){return 0}getBounds(){return this.bounds}}),rePathCommand=(init_esbuild_inject(),/([-+]?((\\\\d+\\\\.\\\\d+)|((\\\\d+)|(\\\\.\\\\d+)))(?:[eE][-+]?\\\\d+)?)/gi),commandLengths={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7},enumCommandMap={A:0,AT:1,C:2,Z:3,E:4,L:5,M:6,Q:7,R:8};function parseSvgPath(e){if(!e)return[];var r,i,t=e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(null===t)return[];var n,o=[];for(let a=0,l=t.length;a<l;a++)if(currPath=t[a],coordsStr=currPath.slice(1),r=[commandChar=currPath[0]],null!==(i=coordsStr.match(rePathCommand))){for(let e=0,t=i.length;e<t;e++)coordStr=i[e],coordNumber=parseFloat(coordStr),Number.isNaN(coordNumber)||r.push(coordNumber);if((standardCommandLen=commandLengths[commandChar])<r.length-1)for(let i=1,e=r.length;i<e;i+=standardCommandLen){n=[commandChar];for(let e=i,t=i+standardCommandLen;e<t;e++)n.push(r[e]);o.push(n)}else o.push(r)}else o.push(r);return o}function segments(e,t,i,r,n,o,a,l,s){var h=degreeToRadian(a),d=Math.sin(h),u=Math.cos(h),h=u*(l-e)*.5+d*(s-t)*.5,c=u*(s-t)*.5-d*(l-e)*.5,h=h*h/((i=Math.abs(i))*i)+c*c/((r=Math.abs(r))*r),c=(1<h&&(i*=h=Math.sqrt(h),r*=h),u/i),h=d/i,g=-d/r,p=u/r,f=c*l+h*s,m=g*l+p*s,c=c*e+h*t,h=g*e+p*t;let b=1/((c-f)*(c-f)+(h-m)*(h-m))-.25,v=(b<0&&(b=0),Math.sqrt(b));var C=.5*(f+c)-(v=o===n?-v:v)*(h-m),y=.5*(m+h)+v*(c-f),_=Math.atan2(m-y,f-C);let w=Math.atan2(h-y,c-C)-_;w<0&&1===o?w+=tau:0<w&&0===o&&(w-=tau);var x=Math.ceil(Math.abs(w/(halfPi+.001))),S=[];for(let R=0;R<x;++R){var A=_+R*w/x,T=_+(R+1)*w/x;S[R]=[C,y,A,T,i,r,d,u]}return S}function bezier(e){var t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],a=e[5],l=e[6],s=e[7],h=s*o,d=-l*a,l=l*o,o=s*a,s=Math.cos(r),a=Math.sin(r),u=Math.cos(n),c=Math.sin(n),n=.5*(n-r),r=Math.sin(.5*n),r=8/3*r*r/Math.sin(n),n=t+s-r*a,a=i+a+r*s,s=t+u,t=i+c,i=s+r*c,c=t-r*u;return[h*n+d*a,l*n+o*a,h*i+d*c,l*i+o*c,h*s+d*t,l*s+o*t]}function drawArc(e,t,i,r){var n=segments(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,i);for(let a=0;a<n.length;++a){var o=bezier(n[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}init_esbuild_inject(),function(e){e[e.NONE=0]=\\\"NONE\\\",e[e.UPDATE_BOUNDS=1]=\\\"UPDATE_BOUNDS\\\",e[e.UPDATE_SHAPE=2]=\\\"UPDATE_SHAPE\\\",e[e.CLEAR_SHAPE=253]=\\\"CLEAR_SHAPE\\\",e[e.UPDATE_SHAPE_AND_BOUNDS=3]=\\\"UPDATE_SHAPE_AND_BOUNDS\\\",e[e.INIT=179]=\\\"INIT\\\",e[e.CLEAR_BOUNDS=254]=\\\"CLEAR_BOUNDS\\\",e[e.UPDATE_GLOBAL_MATRIX=32]=\\\"UPDATE_GLOBAL_MATRIX\\\",e[e.CLEAR_GLOBAL_MATRIX=223]=\\\"CLEAR_GLOBAL_MATRIX\\\",e[e.UPDATE_LOCAL_MATRIX=16]=\\\"UPDATE_LOCAL_MATRIX\\\",e[e.CLEAR_LOCAL_MATRIX=239]=\\\"CLEAR_LOCAL_MATRIX\\\",e[e.UPDATE_GLOBAL_LOCAL_MATRIX=48]=\\\"UPDATE_GLOBAL_LOCAL_MATRIX\\\",e[e.UPDATE_LAYOUT=128]=\\\"UPDATE_LAYOUT\\\",e[e.CLEAR_LAYOUT=127]=\\\"CLEAR_LAYOUT\\\"}(UpdateTag=UpdateTag||{}),function(e){e[e.GLOBAL=1]=\\\"GLOBAL\\\",e[e.LOCAL=16]=\\\"LOCAL\\\",e[e.GLOBAL_ACCURATE=3]=\\\"GLOBAL_ACCURATE\\\",e[e.LOCAL_ACCURATE=48]=\\\"LOCAL_ACCURATE\\\"}(IContainPointMode=IContainPointMode||{}),function(e){e[e.INIT=0]=\\\"INIT\\\",e[e.DEFAULT=1]=\\\"DEFAULT\\\",e[e.STATE=2]=\\\"STATE\\\",e[e.ANIMATE_BIND=10]=\\\"ANIMATE_BIND\\\",e[e.ANIMATE_PLAY=11]=\\\"ANIMATE_PLAY\\\",e[e.ANIMATE_START=12]=\\\"ANIMATE_START\\\",e[e.ANIMATE_UPDATE=13]=\\\"ANIMATE_UPDATE\\\",e[e.ANIMATE_END=14]=\\\"ANIMATE_END\\\",e[e.TRANSLATE=20]=\\\"TRANSLATE\\\",e[e.TRANSLATE_TO=21]=\\\"TRANSLATE_TO\\\",e[e.SCALE=22]=\\\"SCALE\\\",e[e.SCALE_TO=23]=\\\"SCALE_TO\\\",e[e.ROTATE=24]=\\\"ROTATE\\\",e[e.ROTATE_TO=25]=\\\"ROTATE_TO\\\"}(AttributeUpdateType=AttributeUpdateType||{}),function(e){e[e.INITIAL=0]=\\\"INITIAL\\\",e[e.RUNNING=1]=\\\"RUNNING\\\",e[e.PAUSED=2]=\\\"PAUSED\\\",e[e.END=3]=\\\"END\\\"}(AnimateStatus=AnimateStatus||{}),function(e){e[e.NORMAL=0]=\\\"NORMAL\\\",e[e.SET_ATTR_IMMEDIATELY=1]=\\\"SET_ATTR_IMMEDIATELY\\\"}(AnimateMode=AnimateMode||{}),function(e){e.wait=\\\"wait\\\",e.from=\\\"from\\\",e.to=\\\"to\\\",e.customAnimate=\\\"customAnimate\\\"}(AnimateStepType=AnimateStepType||{}),function(e){e[e.ROW=1]=\\\"ROW\\\",e[e.COLUMN=2]=\\\"COLUMN\\\"}(Direction=Direction||{}),function(e){e[e.CubicBezierCurve=0]=\\\"CubicBezierCurve\\\",e[e.QuadraticBezierCurve=1]=\\\"QuadraticBezierCurve\\\",e[e.ArcCurve=2]=\\\"ArcCurve\\\",e[e.LineCurve=3]=\\\"LineCurve\\\",e[e.EllipseCurve=4]=\\\"EllipseCurve\\\",e[e.MoveCurve=5]=\\\"MoveCurve\\\"}(CurveTypeEnum=CurveTypeEnum||{}),function(e){e[e.beforeFillStroke=0]=\\\"beforeFillStroke\\\",e[e.afterFillStroke=1]=\\\"afterFillStroke\\\"}(BaseRenderContributionTime=BaseRenderContributionTime||{}),init_esbuild_inject();var addArcToBezierPath=(e,t,i,r,n,o,a)=>{var l=Math.abs(i-t),l=4*Math.tan(l/4)/3,s=i<t?-1:1,h=Math.cos(t),d=Math.sin(t),u=Math.cos(i),c=Math.sin(i),g=u*o+r,p=c*a+n,f=o*l*s,l=a*l*s;e.push(h*o+r-f*d,d*a+n+l*h,g+f*c,p-l*u,g,p)},commandFuncs=(init_esbuild_inject(),[(e,t,i,r,n,o,a)=>t.arc(e[1]*n+i,e[2]*o+r,e[3]*(n+o)/2,e[4],e[5],e[6],a),(e,t,i,r,n,o,a)=>t.arcTo(e[1]*n+i,e[2]*o+r,e[3]*n+i,e[4]*o+r,e[5]*(n+o)/2,a),(e,t,i,r,n,o,a)=>t.bezierCurveTo(e[1]*n+i,e[2]*o+r,e[3]*n+i,e[4]*o+r,e[5]*n+i,e[6]*o+r,a),(e,t,i,r)=>t.closePath(),(e,t,i,r,n,o)=>t.ellipse(e[1]*n+i,e[2]*o+r,e[3]*n,e[4]*o,e[5],e[6],e[7],e[8]),(e,t,i,r,n,o,a)=>t.lineTo(e[1]*n+i,e[2]*o+r,a),(e,t,i,r,n,o,a)=>t.moveTo(e[1]*n+i,e[2]*o+r,a),(e,t,i,r,n,o,a)=>t.quadraticCurveTo(e[1]*n+i,e[2]*o+r,e[3]*n+i,e[4]*o+r,a),(e,t,i,r,n,o,a)=>t.rect(e[1]*n+i,e[2]*o+r,e[3]*n,e[4]*o,a)]);function renderCommandList(e,t,i=0,r=0,n=1,o=1,a){for(let s=0;s<e.length;s++){var l=e[s];commandFuncs[l[0]](l,t,i,r,n,o,a)}}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var Curve=class{getLength(e){return null!=e?this.calcProjLength(e):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}};function snapLength(e,t){let i=0;var r=e.length;for(let s=0;s<r;s++){var n=e[s],o=t[s],a=e[(s+1)%r],l=t[(s+1)%r];i+=PointService.distanceNN(n,o,a,l)}return i/2}function cubicLength(e,t,i,r,n){return snapLength([e.x,t.x,i.x,r.x],[e.y,t.y,i.y,r.y])}function cubicCalc(e,t,i,r,n){var o=1-n;return o*o*o*e+3*t*n*o*o+3*i*n*n*o+r*n*n*n}function cubicPointAt(e,t,i,r,n){var o=cubicCalc(e.x,t.x,i.x,r.x,n),a=cubicCalc(e.y,t.y,i.y,r.y,n);return new Point(o,a)}function divideCubic(e,t){var{p0:i,p1:r,p2:n,p3:o}=e,a=cubicPointAt(i,r,n,o,t),l=PointService.pointAtPP(i,r,t),r=PointService.pointAtPP(r,n,t),n=PointService.pointAtPP(n,o,t),s=PointService.pointAtPP(l,r,t),r=PointService.pointAtPP(r,n,t);return[new CubicBezierCurve(i,l,s,a),new CubicBezierCurve(a,r,n,o)]}init_esbuild_inject();var CubicBezierCurve=class extends Curve{constructor(e,t,i,r){super(),this.type=CurveTypeEnum.CubicBezierCurve,this.p0=e,this.p1=t,this.p2=i,this.p3=r}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}getPointAt(e){if(!1!==this.defined)return cubicPointAt(this.p0,this.p1,this.p2,this.p3,e);throw new Error(\\\"defined为false的点不能getPointAt\\\")}calcLength(){return this._validPoint()?cubicLength(this.p0,this.p1,this.p2,this.p3,0):60}calcProjLength(e){return e===Direction.ROW?abs(this.p0.x-this.p3.x):e===Direction.COLUMN?abs(this.p0.y-this.p3.y):0}getAngleAt(e){var t=max(e-.01,0),i=min(e+.01,1),t=this.getPointAt(t),i=this.getPointAt(i);return atan2(i.y-t.y,i.x-t.x)}};function divideLinear(e,t){var{p0:i,p1:r}=e,n=PointService.pointAtPP(i,r,t);return[new LineCurve(i,n),new LineCurve(n,r)]}init_esbuild_inject();var LineCurve=class extends Curve{constructor(e,t){super(),this.type=CurveTypeEnum.LineCurve,this.p0=e,this.p1=t}getPointAt(e){if(!1!==this.defined)return PointService.pointAtPP(this.p0,this.p1,e);throw new Error(\\\"defined为false的点不能getPointAt\\\")}getAngleAt(e){return null==this.angle&&(this.angle=atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}calcLength(){return this._validPoint()?PointService.distancePP(this.p0,this.p1):60}calcProjLength(e){return e===Direction.ROW?abs(this.p0.x-this.p1.x):e===Direction.COLUMN?abs(this.p0.y-this.p1.y):0}},SegContext=class{get endX(){return this._lastX}get endY(){return this._lastY}constructor(e,t){this.init(e,t)}init(e,t){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=e,this.direction=t,this.curves=[]}bezierCurveTo(e,t,i,r,n,o,a,l){var s=new CubicBezierCurve(new Point(this._lastX,this._lastY),new Point(e,t),new Point(i,r),new Point(n,o));s.originP1=this._lastOriginP,s.originP2=l,s.defined=a,this.curves.push(s),this._lastX=n,this._lastY=o,this._lastOriginP=l}closePath(){var e;this.curves.length<2||(e=this.curves[this.curves.length-1],this.lineTo(this._startX,this._startY,e.defined,this._startOriginP))}ellipse(){throw new Error(\\\"SegContext不支持调用ellipse\\\")}lineTo(e,t,i,r){var n=this.addLinearCurve(e,t,i,this._lastOriginP,r);this.curves.push(n),this._lastX=e,this._lastY=t,this._lastOriginP=r}moveTo(e,t,i){return this._lastX=this._startX=e,this._lastY=this._startY=t,this._lastOriginP=i,this._startOriginP=i,this}quadraticCurveTo(e,t,i,r){throw new Error(\\\"SegContext不支持调用quadraticCurveTo\\\")}clear(){this.curves=[],this.length=NaN}tryUpdateLength(e){return this.getLength(e)}addLinearCurve(e,t,i,r,n){var o=new LineCurve(new Point(this._lastX,this._lastY),new Point(e,t));return o.originP1=r,o.originP2=n,o.defined=i,o}getPointAt(e){throw new Error(\\\"暂未实现\\\")}getCurveLengths(){return[]}getLength(e){var t,i,r;return e===Direction.COLUMN?this.curves.length?(i=this.curves[0],r=null!=(r=(t=this.curves[this.curves.length-1]).p3)?r:t.p1,abs(i.p0.y-r.y)):0:e===Direction.ROW?this.curves.length?(t=this.curves[0],r=null!=(r=(i=this.curves[this.curves.length-1]).p3)?r:i.p1,abs(t.p0.x-r.x)):0:(Number.isFinite(this.length)||(this.length=this.curves.reduce((e,t)=>e+t.getLength(),0)),this.length)}},ReflectSegContext=class extends SegContext{bezierCurveTo(e,t,i,r,n,o,a,l){return super.bezierCurveTo(t,e,r,i,o,n,a,l)}lineTo(e,t,i,r){return super.lineTo(t,e,i,r)}moveTo(e,t,i){return super.moveTo(t,e,i)}clear(){return super.clear()}};function genCurveSegments(e,t,i=0){let r=!1;for(let n=0,o=t.length;n<=o;n++)n>=o===r&&((r=!r)?e.lineStart():e.lineEnd()),r&&e.point(t[n])}function genSegContext(e,t,i){var r=null!=t?t:abs(i[i.length-1].x-i[0].x)>abs(i[i.length-1].y-i[0].y)?Direction.ROW:Direction.COLUMN;return new(\\\"monotoneY\\\"===e?ReflectSegContext:SegContext)(e,r)}var Linear=class{constructor(e,t){this.context=e,t&&(this.startPoint=t)}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(e){var t=e.x,i=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,i,!1!==this._lastDefined&&!1!==e.defined,e):this.context.moveTo(t,i,e);break;case 1:this._point=2;default:this.context.lineTo(t,i,!1!==this._lastDefined&&!1!==e.defined,e)}this._lastDefined=e.defined}tryUpdateLength(){return this.context.tryUpdateLength()}};function genLinearSegments(e,t={}){var{direction:i,startPoint:r}=t;return e.length<2-Number(!!r)?null:(i=genSegContext(\\\"linear\\\",i,e),genLinearTypeSegments(new Linear(i,r),e),i)}function genLinearTypeSegments(e,t){return genCurveSegments(e,t,1)}function point(e,t,i,r,n){e.context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6,r,e.lastPoint1)}init_esbuild_inject();var Basis=class{constructor(e,t){this.context=e,this.startPoint=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){2===this._point&&point(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(e){var t=e.x,i=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,e):this.context.moveTo(t,i,e);break;case 1:this._point=2;break;default:point(this,t,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=e.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}};function genBasisTypeSegments(e,t){return genCurveSegments(e,t,2)}function genBasisSegments(e,t={}){var{direction:i,startPoint:r}=t;return e.length<2-Number(!!r)?null:e.length<3-Number(!!r)?genLinearSegments(e,t):(i=genSegContext(\\\"basis\\\",i,e),genBasisTypeSegments(new Basis(i,r),e),i)}function sign(e){return e<0?-1:1}function slope3(e,t,i){var r=e._x1-e._x0,n=t-e._x1,o=(e._y1-e._y0)/(r||Number(n<0&&-0)),a=(i-e._y1)/(n||Number(r<0&&-0)),r=(o*n+a*r)/(r+n);return(sign(o)+sign(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(r))||0}function slope2(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function point2(e,t,i,r,n){var o=e._x0,a=e._y0,l=e._x1,s=e._y1,h=(l-o)/3;e.context.bezierCurveTo(o+h,a+h*t,l-h,s-h*i,l,s,r,e.lastPoint1)}init_esbuild_inject();var MonotoneX=class{constructor(e,t){this.context=e,this.startPoint=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:point2(this,this._t0,slope2(this,this._t0),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1)}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(e){let t=NaN;var i=e.x,r=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(i,r,!1!==this._lastDefined1&&!1!==this._lastDefined2,e):this.context.moveTo(i,r,e);break;case 1:this._point=2;break;case 2:this._point=3,point2(this,slope2(this,t=slope3(this,i,r)),t,!1!==this._lastDefined1&&!1!==this._lastDefined2,e);break;default:point2(this,this._t0,t=slope3(this,i,r),!1!==this._lastDefined1&&!1!==this._lastDefined2,e)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=r,this._t0=t,this._lastDefined1=this._lastDefined2,this._lastDefined2=!1!==e.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}},MonotoneY=class extends MonotoneX{constructor(e,t){super(e,t)}point(e){return super.point({y:e.x,x:e.y,defined:e.defined})}};function genMonotoneXTypeSegments(e,t){return genCurveSegments(e,t,2)}function genMonotoneXSegments(e,t={}){var{direction:i,startPoint:r}=t;return e.length<2-Number(!!r)?null:e.length<3-Number(!!r)?genLinearSegments(e,t):(i=genSegContext(\\\"monotoneX\\\",i,e),genMonotoneXTypeSegments(new MonotoneX(i,r),e),i)}function genMonotoneYTypeSegments(e,t){return genCurveSegments(e,t,2)}function genMonotoneYSegments(e,t={}){var{direction:i,startPoint:r}=t;return e.length<2-Number(!!r)?null:e.length<3-Number(!!r)?genLinearSegments(e,t):(i=genSegContext(\\\"monotoneY\\\",i,e),genMonotoneYTypeSegments(new MonotoneY(i,r),e),i)}init_esbuild_inject();var Step=class{constructor(e,t=.5,i){this.context=e,this._t=t,this.startPoint=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){0<this._t&&this._t<1&&2===this._point&&this.context.lineTo(this._x,this._y,!1!==this._lastDefined,this.lastPoint),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)}point(e){var t,i=e.x,r=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(i,r,!1!==this._lastDefined&&!1!==e.defined,e):this.context.moveTo(i,r,e);break;case 1:this._point=2;default:this._t<=0?(this.context.lineTo(this._x,r,!1!==this._lastDefined&&!1!==e.defined,this.lastPoint),this.context.lineTo(i,r,!1!==this._lastDefined&&!1!==e.defined,e)):(t=this._x*(1-this._t)+i*this._t,this.context.lineTo(t,this._y,!1!==this._lastDefined&&!1!==e.defined,this.lastPoint),this.context.lineTo(t,r,!1!==this._lastDefined&&!1!==e.defined,e))}this._lastDefined=e.defined,this._x=i,this._y=r,this.lastPoint=e}tryUpdateLength(){return this.context.tryUpdateLength()}};function genStepSegments(e,t,i={}){var{direction:r,startPoint:n}=i;return e.length<2-Number(!!n)?null:(r=new SegContext(\\\"step\\\",null!=r?r:abs(e[e.length-1].x-e[0].x)>abs(e[e.length-1].y-e[0].y)?Direction.ROW:Direction.COLUMN),genStepTypeSegments(new Step(r,t,n),e),r)}function genStepTypeSegments(e,t){return genCurveSegments(e,t,1)}init_esbuild_inject();var LinearClosed=class extends Linear{lineEnd(){this.context.closePath()}};function genLinearClosedSegments(e,t={}){var{direction:i,startPoint:r}=t;return e.length<2-Number(!!r)?null:(i=genSegContext(\\\"linear\\\",i,e),genLinearClosedTypeSegments(new LinearClosed(i,r),e),i)}function genLinearClosedTypeSegments(e,t){return genCurveSegments(e,t,1)}function calcLineCache(e,t,i){switch(t){case\\\"linear\\\":default:return genLinearSegments(e,i);case\\\"basis\\\":return genBasisSegments(e,i);case\\\"monotoneX\\\":return genMonotoneXSegments(e,i);case\\\"monotoneY\\\":return genMonotoneYSegments(e,i);case\\\"step\\\":return genStepSegments(e,.5,i);case\\\"stepBefore\\\":return genStepSegments(e,0,i);case\\\"stepAfter\\\":return genStepSegments(e,1,i);case\\\"linearClosed\\\":return genLinearClosedSegments(e,i)}}var CustomPath2D=class extends CurvePath{constructor(e){super(),this.commandList=[],e&&(this._ctx=e),this._boundsContext=new BoundsContext(this.bounds)}setCtx(e){this._ctx=e}moveTo(e,t){return this.commandList.push([enumCommandMap.M,e,t]),this._ctx&&this._ctx.moveTo(e,t),this}lineTo(e,t){return this.commandList.push([enumCommandMap.L,e,t]),this._ctx&&this._ctx.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.commandList.push([enumCommandMap.Q,e,t,i,r]),this._ctx&&this._ctx.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,n,o){return this.commandList.push([enumCommandMap.C,e,t,i,r,n,o]),this._ctx&&this._ctx.bezierCurveTo(e,t,i,r,n,o),this}arcTo(e,t,i,r,n){return this.commandList.push([enumCommandMap.AT,e,t,i,r,n]),this._ctx&&this._ctx.arcTo(e,t,i,r,n),this}ellipse(e,t,i,r,n,o,a,l){return this.commandList.push([enumCommandMap.E,e,t,i,r,n,o,a,l]),this._ctx&&this._ctx.ellipse(e,t,i,r,n,o,a,l),this}rect(e,t,i,r){return this.commandList.push([enumCommandMap.R,e,t,i,r]),this._ctx&&this._ctx.rect(e,t,i,r),this}arc(e,t,i,r,n,o){return this.commandList.push([enumCommandMap.A,e,t,i,r,n,o]),this._ctx&&this._ctx.arc(e,t,i,r,n,o),this}closePath(){return this.commandList.push([enumCommandMap.Z]),this._ctx&&this._ctx.closePath(),this}addCurve(e){this.curves.push(e)}clear(){this.transformCbList=null,this.commandList.length=0,this.curves.length=0}beginPath(){this.clear()}toString(){var e;this.toStringCbList||((e=[])[enumCommandMap.M]=e=>`M${e[1]} `+e[2],e[enumCommandMap.L]=e=>`L${e[1]} `+e[2],e[enumCommandMap.Q]=e=>`Q${e[1]} ${e[2]} ${e[3]} `+e[4],e[enumCommandMap.C]=e=>`C${e[1]} ${e[2]} ${e[3]} ${e[4]} ${e[5]} `+e[6],e[enumCommandMap.A]=e=>{var t=[];addArcToBezierPath(t,e[4],e[5],e[1],e[2],e[3],e[3]);let i=\\\"\\\";for(let r=0;r<t.length;r+=6)i+=`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} `+t[r+5];return i},e[enumCommandMap.R]=e=>`M${e[1]} ${e[2]} h${e[3]} v${e[4]} H${e[1]}Z`,e[enumCommandMap.Z]=e=>\\\"Z\\\",this.toStringCbList=e);const t=this.toStringCbList;let i=\\\"\\\";return this.commandList.forEach(e=>{i+=t[e[0]](e)}),i}fromString(e,t,i,r,n){this.clear();var o=parseSvgPath(e);return this._runCommandStrList(o,t,i,r,n),this._updateBounds(),this}fromLine(e){var{points:t,curveType:i,clipRangeByDimension:r}=e.attribute;t&&(t=calcLineCache(t,i),\\\"x\\\"===r?this.direction=Direction.ROW:\\\"y\\\"===r?this.direction=Direction.COLUMN:\\\"auto\\\"===r&&(this.direction=t.direction),this.curves=t.curves)}fromCustomPath2D(e,t,i,r,n){return this.clear(),this._runCommandList(e.commandList,t,i,r,n),this._updateBounds(),this}transform(t,i,r,n){var e,o=this.commandList;this.transformCbList||((e=[])[enumCommandMap.M]=this.moveToTransform,e[enumCommandMap.L]=this.lineToTransform,e[enumCommandMap.Q]=this.quadraticCurveToTransform,e[enumCommandMap.C]=this.bezierCurveToTransform,e[enumCommandMap.AT]=this.arcToTransform,e[enumCommandMap.E]=this.ellipseTransform,e[enumCommandMap.R]=this.rectTransform,e[enumCommandMap.A]=this.arcTransform,e[enumCommandMap.Z]=this.closePathTransform,this.transformCbList=e),o.forEach(e=>{this.transformCbList[e[0]](e,t,i,r,n)}),this._updateBounds()}moveToTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i}lineToTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i}quadraticCurveToTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*r+t,e[4]=e[4]*n+i}bezierCurveToTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*r+t,e[4]=e[4]*n+i,e[5]=e[5]*r+t,e[6]=e[6]*n+i}arcToTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*r+t,e[4]=e[4]*n+i,e[5]=e[5]*(r+n)/2}ellipseTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*r,e[4]=e[4]*n}rectTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*r,e[4]=e[4]*n}arcTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*(r+n)/2}closePathTransform(){}_runCommandStrList(e,t=0,i=0,r=1,n=1){let o,a,l,s,h,d=null,u=0,c=0,g=0,p=0;for(let f=0,m=e.length;f<m;++f){switch(o=e[f],(o=1===r&&1===n?o:scale(o,r,n))[0]){case\\\"l\\\":u+=o[1],c+=o[2],this.lineTo(u+t,c+i);break;case\\\"L\\\":u=o[1],c=o[2],this.lineTo(u+t,c+i);break;case\\\"h\\\":u+=o[1],this.lineTo(u+t,c+i);break;case\\\"H\\\":u=o[1],this.lineTo(u+t,c+i);break;case\\\"v\\\":c+=o[1],this.lineTo(u+t,c+i);break;case\\\"V\\\":c=o[1],this.lineTo(u+t,c+i);break;case\\\"m\\\":u+=o[1],c+=o[2],this.moveTo(u+t,c+i);break;case\\\"M\\\":u=o[1],c=o[2],this.moveTo(u+t,c+i);break;case\\\"c\\\":a=u+o[5],l=c+o[6],g=u+o[3],p=c+o[4],this.bezierCurveTo(u+o[1]+t,c+o[2]+i,g+t,p+i,a+t,l+i),u=a,c=l;break;case\\\"C\\\":u=o[5],c=o[6],g=o[3],p=o[4],this.bezierCurveTo(o[1]+t,o[2]+i,g+t,p+i,u+t,c+i);break;case\\\"s\\\":a=u+o[3],l=c+o[4],g=2*u-g,p=2*c-p,this.bezierCurveTo(g+t,p+i,u+o[1]+t,c+o[2]+i,a+t,l+i),g=u+o[1],p=c+o[2],u=a,c=l;break;case\\\"S\\\":a=o[3],l=o[4],g=2*u-g,p=2*c-p,this.bezierCurveTo(g+t,p+i,o[1]+t,o[2]+i,a+t,l+i),u=a,c=l,g=o[1],p=o[2];break;case\\\"q\\\":a=u+o[3],l=c+o[4],g=u+o[1],p=c+o[2],this.quadraticCurveTo(g+t,p+i,a+t,l+i),u=a,c=l;break;case\\\"Q\\\":a=o[3],l=o[4],this.quadraticCurveTo(o[1]+t,o[2]+i,a+t,l+i),u=a,c=l,g=o[1],p=o[2];break;case\\\"t\\\":a=u+o[1],l=c+o[2],null===d[0].match(/[QqTt]/)?(g=u,p=c):\\\"t\\\"===d[0]?(g=2*u-s,p=2*c-h):\\\"q\\\"===d[0]&&(g=2*u-g,p=2*c-p),s=g,h=p,this.quadraticCurveTo(g+t,p+i,a+t,l+i),u=a,c=l,g=u+o[1],p=c+o[2];break;case\\\"T\\\":a=o[1],l=o[2],g=2*u-g,p=2*c-p,this.quadraticCurveTo(g+t,p+i,a+t,l+i),u=a,c=l;break;case\\\"a\\\":drawArc(this,u+t,c+i,[o[1],o[2],o[3],o[4],o[5],o[6]+u+t,o[7]+c+i]),u+=o[6],c+=o[7];break;case\\\"A\\\":drawArc(this,u+t,c+i,[o[1],o[2],o[3],o[4],o[5],o[6]+t,o[7]+i]),u=o[6],c=o[7];break;case\\\"z\\\":case\\\"Z\\\":this.closePath()}d=o}}_runCommandList(i,r=0,n=0,o=1,a=1){if(0!==r||0!==n||1!==o||1!==a)for(let e=0,t=i.length;e<t;++e){var l=i[e].slice();switch(l[0]){case enumCommandMap.L:this.lineToTransform(l,r,n,o,a);break;case enumCommandMap.M:this.moveToTransform(l,r,n,o,a);break;case enumCommandMap.C:this.bezierCurveToTransform(l,r,n,o,a);break;case enumCommandMap.Q:this.quadraticCurveToTransform(l,r,n,o,a);break;case enumCommandMap.A:this.arcToTransform(l,r,n,o,a);break;case enumCommandMap.E:this.ellipseTransform(l,r,n,o,a);break;case enumCommandMap.R:this.rectTransform(l,r,n,o,a);break;case enumCommandMap.AT:this.arcToTransform(l,r,n,o,a);break;case enumCommandMap.Z:this.closePath()}}else this.commandList=i.map(e=>e.slice())}_updateBounds(){this.bounds.clear(),renderCommandList(this.commandList,this._boundsContext)}release(){this.commandList=[],this._boundsContext=null,this._ctx=null}getLength(){var e,t;return this.direction===Direction.COLUMN?this.curves.length?(e=this.curves[0],t=this.curves[this.curves.length-1],abs(e.p0.y-t.p1.y)):0:this.direction===Direction.ROW?this.curves.length?(e=this.curves[0],t=this.curves[this.curves.length-1],abs(e.p0.x-t.p1.x)):0:this.curves.reduce((e,t)=>e+t.getLength(),0)}getAttrAt(e){if(!this.curves)return{pos:{x:0,y:0},angle:0};let t,i=0;for(let o=0;o<this.curves.length;o++){var r=(t=this.curves[o]).getLength(this.direction);if(i+r>=e)break;i+=r}var n=(e-i)/t.getLength(this.direction);return{pos:t.getPointAt(n),angle:t.getAngleAt(n)}}},temp=[\\\"l\\\",0,0,0,0,0,0,0];function scale(i,r,n){var o=temp[0]=i[0];if(\\\"a\\\"===o||\\\"A\\\"===o)temp[1]=r*i[1],temp[2]=n*i[2],temp[3]=i[3],temp[4]=i[4],temp[5]=i[5],temp[6]=r*i[6],temp[7]=n*i[7];else if(\\\"h\\\"===o||\\\"H\\\"===o)temp[1]=r*i[1];else if(\\\"v\\\"===o||\\\"V\\\"===o)temp[1]=n*i[1];else for(let e=1,t=i.length;e<t;++e)temp[e]=(e%2==1?r:n)*i[e];return temp}var DefaultLayout={alignSelf:\\\"auto\\\"},DefaultTransform={x:0,y:0,z:0,dx:0,dy:0,dz:0,scrollX:0,scrollY:0,scaleX:1,scaleY:1,scaleZ:1,angle:0,alpha:0,beta:0,scaleCenter:[0,0],anchor:[0,0],anchor3d:[0,0],postMatrix:new Matrix},DefaultFillStyle={fillOpacity:1,fill:!1,shadowBlur:0,shadowColor:\\\"black\\\",shadowOffsetX:0,shadowOffsetY:0},commonStroke={strokeOpacity:1,lineDash:[],lineDashOffset:0,lineWidth:1,lineCap:\\\"butt\\\",lineJoin:\\\"miter\\\",miterLimit:10,strokeBoundsBuffer:2,stroke:!1},DefaultStrokeStyle=Object.assign({outerBorder:Object.assign(Object.assign({},commonStroke),{distance:0}),innerBorder:Object.assign(Object.assign({},commonStroke),{distance:0})},commonStroke),DefaultTextStyle={text:\\\"\\\",maxLineWidth:1/0,textAlign:\\\"left\\\",textBaseline:\\\"alphabetic\\\",fontSize:16,fontFamily:\\\"PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,\\\\n    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol\\\",fontWeight:\\\"\\\",ellipsis:\\\"…\\\",fontVariant:\\\"\\\",fontStyle:\\\"\\\",lineHeight:void 0,underline:0,lineThrough:0,scaleIn3d:!1,direction:\\\"horizontal\\\",wordBreak:\\\"break-all\\\",ignoreBuf:!1,verticalMode:0,wrap:!1,whiteSpace:\\\"no-wrap\\\",heightLimit:1/0,lineClamp:1/0,suffixPosition:\\\"end\\\",underlineDash:[],underlineOffset:0,disableAutoClipedPoptip:void 0},DefaultPickStyle={pickStrokeBuffer:0},DefaultStyle=Object.assign(Object.assign(Object.assign(Object.assign({opacity:1,background:null,backgroundOpacity:1,backgroundCornerRadius:0,texture:null,textureColor:\\\"black\\\",textureSize:10,texturePadding:2,backgroundMode:\\\"no-repeat\\\",backgroundFit:!0,blur:0,cursor:null,html:null,react:null},DefaultFillStyle),DefaultStrokeStyle),DefaultLayout),DefaultPickStyle),DefaultConnectAttribute={connectedType:\\\"none\\\",connectedStyle:{},connectedX:NaN,connectedY:NaN},DefaultDebugAttribute={_debug_bounds:!1},DefaultAttribute=Object.assign(Object.assign(Object.assign({strokeSeg:null,pickable:!0,childrenPickable:!0,fillPickable:!0,strokePickable:!0,visible:!0,zIndex:0,layout:null,boundsPadding:0,renderStyle:\\\"default\\\",pickMode:\\\"accurate\\\",customPickShape:null,boundsMode:\\\"accurate\\\",keepDirIn3d:!0,shadowRootIdx:1,globalZIndex:1,globalCompositeOperation:\\\"\\\",overflow:\\\"hidden\\\"},DefaultDebugAttribute),DefaultStyle),DefaultTransform),DefaultArcAttribute=Object.assign(Object.assign({},DefaultAttribute),{startAngle:0,endAngle:pi2,innerRadius:0,outerRadius:1,innerPadding:0,outerPadding:0,cornerRadius:0,padRadius:0,padAngle:0,cap:!1,forceShowCap:!1}),DefaultAreaAttribute=Object.assign(Object.assign(Object.assign({},DefaultAttribute),DefaultConnectAttribute),{points:[],segments:[],curveType:\\\"linear\\\",clipRange:1,closePath:!1}),DefaultCircleAttribute=Object.assign(Object.assign({},DefaultAttribute),{radius:1,startAngle:0,endAngle:pi2}),DefaultGroupAttribute=Object.assign(Object.assign({},DefaultAttribute),{width:0,height:0,cornerRadius:0,path:[],clip:!1,visibleAll:!0,display:\\\"relative\\\",flexDirection:\\\"row\\\",flexWrap:\\\"wrap\\\",justifyContent:\\\"flex-start\\\",alignItems:\\\"flex-start\\\",alignContent:\\\"flex-start\\\"}),DefaultGlyphAttribute=Object.assign(Object.assign({},DefaultAttribute),{path:\\\"\\\",width:0,height:0,cornerRadius:0,clip:!1}),DefaultLineAttribute=Object.assign(Object.assign(Object.assign({},DefaultAttribute),DefaultConnectAttribute),{points:[],segments:[],curveType:\\\"linear\\\",clipRange:1,clipRangeByDimension:\\\"default\\\",closePath:!1}),DefaultPathAttribute=Object.assign(Object.assign({},DefaultAttribute),{path:new CustomPath2D,customPath:()=>{Logger.getInstance().warn(\\\"空函数\\\")}}),DefaultPolygonAttribute=Object.assign(Object.assign({},DefaultAttribute),{points:[],cornerRadius:0,closePath:!0}),DefaultRectAttribute=Object.assign(Object.assign({},DefaultAttribute),{width:0,height:0,x1:0,y1:0,strokeBoundsBuffer:0,cornerRadius:0}),DefaultRect3dAttribute=Object.assign(Object.assign({},DefaultAttribute),{width:0,height:0,x1:0,y1:0,cornerRadius:0,length:0}),DefaultSymbolAttribute=Object.assign(Object.assign({},DefaultAttribute),{symbolType:\\\"circle\\\",size:10,keepDirIn3d:!0}),DefaultTextAttribute=Object.assign(Object.assign(Object.assign({},DefaultAttribute),DefaultTextStyle),{strokeBoundsBuffer:0,keepDirIn3d:!0}),DefaultRichTextAttribute=Object.assign(Object.assign(Object.assign({},DefaultAttribute),DefaultTextStyle),{width:300,height:300,ellipsis:!0,wordBreak:\\\"break-word\\\",verticalDirection:\\\"top\\\",textAlign:\\\"left\\\",textBaseline:\\\"top\\\",layoutDirection:\\\"horizontal\\\",textConfig:[],maxHeight:void 0,maxWidth:void 0,singleLine:!1}),DefaultImageAttribute=Object.assign(Object.assign({repeatX:\\\"no-repeat\\\",repeatY:\\\"no-repeat\\\",image:\\\"\\\",width:0,height:0},DefaultAttribute),{fill:!0,cornerRadius:0}),DefaultRichTextIconAttribute=Object.assign(Object.assign({},DefaultImageAttribute),{backgroundShowMode:\\\"never\\\",backgroundWidth:0,backgroundHeight:0,textAlign:\\\"left\\\",textBaseline:\\\"middle\\\",direction:\\\"horizontal\\\",margin:0,id:\\\"\\\",width:20,height:20,backgroundFill:\\\"rgba(101, 117, 168, 0.1)\\\",backgroundFillOpacity:1,backgroundStroke:!1,backgroundStrokeOpacity:1,backgroundRadius:4,opacity:1}),Application=(init_esbuild_inject(),init_esbuild_inject(),class{}),application=new Application,DIRECTION_KEY={horizontal:{width:\\\"width\\\",height:\\\"height\\\",left:\\\"left\\\",top:\\\"top\\\",x:\\\"x\\\",y:\\\"y\\\",bottom:\\\"bottom\\\"},vertical:{width:\\\"height\\\",height:\\\"width\\\",left:\\\"top\\\",top:\\\"left\\\",x:\\\"y\\\",y:\\\"x\\\",bottom:\\\"right\\\"}},defaultFormatting={fontSize:16,fontFamily:\\\"sans-serif\\\",fill:!0,stroke:!1,fontWeight:\\\"normal\\\",lineHeight:\\\"normal\\\",fontStyle:\\\"normal\\\",textDecoration:\\\"none\\\",textAlign:\\\"left\\\",script:\\\"normal\\\"},nbsp=String.fromCharCode(160),regLetter=/\\\\w|\\\\(|\\\\)|-/,regPunctuation=/[.?!,;:/，。？！、；：]/,regFirstSpace=/\\\\S/;function applyFillStyle(t,i){var r=i&&i.fill||defaultFormatting.fill;if(r){t.globalAlpha=1,t.fillStyle=r;let e=i.fontSize||16;switch(i.script){case\\\"super\\\":case\\\"sub\\\":e*=.8}t.setTextStyle({textAlign:\\\"left\\\",textBaseline:i.textBaseline||\\\"alphabetic\\\",fontStyle:i.fontStyle||\\\"\\\",fontWeight:i.fontWeight||\\\"\\\",fontSize:e,fontFamily:i.fontFamily||\\\"sans-serif\\\"})}else t.globalAlpha=0}function applyStrokeStyle(t,i){var r=i&&i.stroke||defaultFormatting.stroke;if(r){t.globalAlpha=1,t.lineWidth=i&&\\\"number\\\"==typeof i.lineWidth?i.lineWidth:1,t.strokeStyle=r;let e=i.fontSize||16;switch(i.script){case\\\"super\\\":case\\\"sub\\\":e*=.8}t.setTextStyle({textAlign:\\\"left\\\",textBaseline:i.textBaseline||\\\"alphabetic\\\",fontStyle:i.fontStyle||\\\"\\\",fontWeight:i.fontWeight||\\\"\\\",fontSize:e,fontFamily:i.fontFamily||\\\"sans-serif\\\"})}else t.globalAlpha=0}function getStrByWithCanvas(e,t,i,r,n){if(!t||t<=0)return 0;var o=application.graphicUtil.textMeasure;let a=r,l=e.slice(0,a),s=Math.floor(o.measureText(l,i).width),h=e.slice(0,a+1),d=Math.floor(o.measureText(h,i).width);for(;s>t||d<=t;){if(s>t?a--:a++,a>e.length){a=e.length;break}if(a<0){a=0;break}l=e.slice(0,a),s=Math.floor(o.measureText(l,i).width),h=e.slice(0,a+1),d=Math.floor(o.measureText(h,i).width)}return a=n?testLetter(e,a):a}function testLetter(e,t){let i=t;for(;regLetter.test(e[i-1])&&regLetter.test(e[i])||regPunctuation.test(e[i]);)if(--i<=0)return t;return i}function measureTextCanvas(e,t){var i=application.graphicUtil.textMeasure.measureText(e,t),r={ascent:0,height:0,descent:0,width:0};return\\\"number\\\"!=typeof i.actualBoundingBoxAscent||\\\"number\\\"!=typeof i.actualBoundingBoxDescent?(r.width=Math.floor(i.width),r.height=t.fontSize||0,r.ascent=r.height,r.descent=0):(r.width=Math.floor(i.width),r.height=Math.floor(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent),r.ascent=Math.floor(i.actualBoundingBoxAscent),r.descent=r.height-r.ascent),r}var __decorate2=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},ATextMeasure=class{configure(e,t){this.canvas=e.canvas,this.context=e.context,e.bindTextMeasure(this)}measureTextWidth(e,t){return(this.context?(this.context.setTextStyleWithoutAlignBaseline(t),this.context.measureText(e)):this.estimate(e,t)).width}estimate(e,{fontSize:t=DefaultTextAttribute.fontSize}){let i=0,r=0;for(let n=0;n<e.length;n++)e.charCodeAt(n)<128?i++:r++;return{width:~~(.8*i*t+r*t),height:t}}measureTextPixelHeight(e,t){if(!this.context)return null!=(i=t.fontSize)?i:DefaultTextStyle.fontSize;this.context.setTextStyleWithoutAlignBaseline(t);var i=this.context.measureText(e);return Math.abs(i.actualBoundingBoxAscent-i.actualBoundingBoxDescent)}measureTextBoundHieght(e,t){if(!this.context)return null!=(i=t.fontSize)?i:DefaultTextStyle.fontSize;this.context.setTextStyleWithoutAlignBaseline(t);var i=this.context.measureText(e);return Math.abs(i.fontBoundingBoxAscent-i.fontBoundingBoxDescent)}measureText(e,t){return this.context?(this.context.setTextStyleWithoutAlignBaseline(t),this.context.measureText(e)):this.estimate(e,t)}clipTextVertical(r,n,e,t){if(0===r.length)return{verticalList:r,width:0};const{fontSize:i=12}=n;r.forEach(e=>{e.width=0===e.direction?i:this.measureTextWidth(e.text,n)});var o=[];let a=0,l=0;for(;l<r.length&&a+r[l].width<e;l++)a+=r[l].width,o.push(r[l]);if(r[l]&&1<r[l].text.length){var s=this._clipText(r[l].text,n,e-a,0,r[l].text.length-1,\\\"end\\\",!1);if(t&&s.str!==r[l].text){let e=\\\"\\\",t=0;for(let i=0;i<l;i++){var h=r[i];e+=h.text,t+=h.text.length}e+=r[l].text;var d=t+s.str.length,d=testLetter(e,d);(d-=t)!=s.str.length-1&&(s.str=s.str.substring(0,d),s.width=this.measureTextWidth(s.str,n))}o.push(Object.assign(Object.assign({},r[l]),{text:s.str,width:s.width})),a+=s.width}return{verticalList:o,width:a}}clipText(e,t,i,r){var n,o;return 0===e.length?{str:\\\"\\\",width:0}:(n=this.measureTextWidth(e,t))<=i?{str:e,width:n}:i<(n=this.measureTextWidth(e[0],t))?{str:\\\"\\\",width:0}:(n=this._clipText(e,t,i,0,e.length-1,\\\"end\\\",!1),r&&n.str!==e&&(o=testLetter(e,n.str.length))!==n.str.length&&(n.str=e.substring(0,o),n.width=this.measureTextWidth(n.str,t)),n)}_clipText(e,t,i,r,n,o,a){let l;var s;return\\\"start\\\"===o?(l=this._clipTextStart(e,t,i,r,n),a&&(l.result=a+l.str)):\\\"middle\\\"===o?(s=this._clipTextMiddle(e,t,i,\\\"\\\",\\\"\\\",0,0,1),l={str:\\\"none\\\",width:s.width,result:s.left+a+s.right}):(l=this._clipTextEnd(e,t,i,r,n),a&&(l.result=l.str+a)),l}_clipTextEnd(e,t,i,r,n){var o,a=Math.floor((r+n)/2),l=e.substring(0,a+1),s=this.measureTextWidth(l,t);let h;return i<s?l.length<=1?{str:\\\"\\\",width:0}:(o=e.substring(0,a),(h=this.measureTextWidth(o,t))<=i?{str:o,width:h}:this._clipTextEnd(e,t,i,r,a)):s<i?a>=e.length-1?{str:e,width:this.measureTextWidth(e,t)}:(o=e.substring(0,a+2),(h=this.measureTextWidth(o,t))>=i?{str:l,width:s}:this._clipTextEnd(e,t,i,a,n)):{str:l,width:s}}_clipTextStart(e,t,i,r,n){var o,a=Math.ceil((r+n)/2),l=e.substring(a-1,e.length-1),s=this.measureTextWidth(l,t);let h;return i<s?l.length<=1?{str:\\\"\\\",width:0}:(o=e.substring(a,e.length-1),(h=this.measureTextWidth(o,t))<=i?{str:o,width:h}:this._clipTextStart(e,t,i,a,e.length-1)):s<i?a<=0?{str:e,width:this.measureTextWidth(e,t)}:(o=e.substring(a-2,e.length-1),(h=this.measureTextWidth(o,t))>=i?{str:l,width:s}:this._clipTextStart(e,t,i,r,a)):{str:l,width:s}}_clipTextMiddle(e,t,i,r,n,o,a,l){var s,h,d=e.substring(0,l),u=this.measureTextWidth(d,t);return i<u+a?{left:r,right:n,width:o+a}:(s=e.substring(e.length-l,e.length),i<u+(h=this.measureTextWidth(s,t))?{left:d,right:n,width:u+a}:this._clipTextMiddle(e,t,i,d,s,u,h,l+1))}clipTextWithSuffixVertical(e,t,i,r,n,o){if(\\\"\\\"===r)return this.clipTextVertical(e,t,i,n);if(0===e.length)return{verticalList:e,width:0};var a=this.clipTextVertical(e,t,i,n);if(a.verticalList.length===e.length&&a.verticalList[a.verticalList.length-1].width===e[e.length-1].width)return a;var l=this.measureTextWidth(r,t);if(i<l)return a;let s;if(i-=l,\\\"start\\\"===o){a=this.revertVerticalList(e),a=(s=this.clipTextVertical(a,t,i,n),this.revertVerticalList(s.verticalList));a.unshift({text:r,direction:1,width:l}),s.verticalList=a}else if(\\\"middle\\\"===o){const h=this.clipTextVertical(e,t,i/2,n),d=this.revertVerticalList(e),u=this.clipTextVertical(d,t,i/2,n);h.verticalList.push({text:r,direction:1,width:l}),this.revertVerticalList(u.verticalList).forEach(e=>h.verticalList.push(e)),s={verticalList:h.verticalList,width:h.width+u.width}}else(s=this.clipTextVertical(e,t,i,n)).verticalList.push({text:r,direction:1,width:l});return s.width+=l,s}revertVerticalList(e){return e.reverse().map(e=>{var t=e.text.split(\\\"\\\").reverse().join(\\\"\\\");return Object.assign(Object.assign({},e),{text:t})})}clipTextWithSuffix(e,t,i,r,n,o,a=!1){var l,s,h;return\\\"\\\"===r?this.clipText(e,t,i,n):0===e.length?{str:\\\"\\\",width:0}:(s=this.measureTextWidth(e,t),!a&&s<=i?{str:e,width:s}:i<(l=this.measureTextWidth(r,t))?{str:\\\"\\\",width:0}:a&&s+l<=i?{str:e+r,width:s+l}:(s=this._clipText(e,t,i-=l,0,e.length-1,o,r),n&&s.str!==e?(h=testLetter(e,s.str.length))!==s.str.length&&(s.result=e.substring(0,h),s.width=this.measureTextWidth(s.str,t)):a&&s.str===e&&(s.result=e+r),s.str=s.result,s.width+=l,s))}},ATextMeasure=__decorate2([injectable()],ATextMeasure),__decorate3=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},TextMeasureContribution=Symbol[\\\"for\\\"](\\\"TextMeasureContribution\\\"),DefaultTextMeasureContribution=class extends ATextMeasure{},DefaultTextMeasureContribution=__decorate3([injectable()],DefaultTextMeasureContribution),container=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),new Container),CanvasFactory=(init_esbuild_inject(),Symbol[\\\"for\\\"](\\\"CanvasFactory\\\")),Context2dFactory=Symbol[\\\"for\\\"](\\\"Context2dFactory\\\");function wrapCanvas(e){return container.getNamed(CanvasFactory,application.global.env)(e)}var TransformMode,THREE_SQRT=Math.sqrt(3),ONE_THIRD=1/3,DefaultCanvasAllocate=class{constructor(){this.pools=[],this.allocatedCanvas=[]}shareCanvas(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}getCommonCanvas(){return this._commonCanvas||(this._commonCanvas=this.allocate({width:100,height:100,dpr:2})),this._commonCanvas}allocate(e){var t;return this.pools.length?((t=this.pools.pop()).resize(e.width,e.height),t.dpr=e.dpr):(t=wrapCanvas(Object.assign({nativeCanvas:application.global.createCanvas(e)},e)),this.allocatedCanvas.push(t)),t}allocateByObj(e){var t;return this.pools.length?((t=this.pools.pop()).width=e.width,t.height=e.height):(t={width:e.width/e.dpr,height:e.height/e.dpr,dpr:e.dpr},t=wrapCanvas(Object.assign({nativeCanvas:application.global.createCanvas(t)},t)),this.allocatedCanvas.push(t)),t}free(e){this.pools.push(e)}get length(){return this.pools.length}release(){this.pools=[]}},canvasAllocate=new DefaultCanvasAllocate,__decorate4=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata2=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},VWindow=Symbol[\\\"for\\\"](\\\"VWindow\\\"),WindowHandlerContribution=Symbol[\\\"for\\\"](\\\"WindowHandlerContribution\\\"),DefaultWindow=class{get width(){var e;return this._handler?(e=this._handler.getWH(),this._width=e.width):this._width}get height(){var e;return this._handler?(e=this._handler.getWH(),this._height=e.height):this._height}get dpr(){return this._handler.getDpr()}constructor(){this.hooks={onChange:new SyncHook([\\\"x\\\",\\\"y\\\",\\\"width\\\",\\\"height\\\"])},this.active=()=>{var e=this.global;e.env&&!this.actived&&(container.getNamed(WindowHandlerContribution,e.env).configure(this,e),this.actived=!0)},this._uid=Generator.GenAutoIncrementId(),this.global=application.global,this.postInit()}postInit(){this.global.hooks.onSetEnv.tap(\\\"window\\\",this.active),this.active()}get style(){var e;return null!=(e=this._handler.getStyle())?e:{}}set style(e){this._handler.setStyle(e)}create(e){this._handler.createWindow(e);var t=this._handler.getWH();this._width=t.width,this._height=t.height,e.viewBox?this.setViewBox(e.viewBox):!1!==e.canvasControled?this.setViewBox({x1:0,y1:0,x2:this._width,y2:this._height}):this.setViewBox({x1:0,y1:0,x2:null!=(t=e.width)?t:this._width,y2:null!=(t=e.height)?t:this._height}),this.title=this._handler.getTitle(),this.resizable=!0}setWindowHandler(e){this._handler=e}setDpr(e){return this._handler.setDpr(e)}resize(e,t){return this._handler.resizeWindow(e,t)}configure(){throw new Error(\\\"暂不支持\\\")}release(){return this.global.hooks.onSetEnv.unTap(\\\"window\\\",this.active),this._handler.releaseWindow()}getContext(){return this._handler.getContext()}getNativeHandler(){return this._handler.getNativeHandler()}getImageBuffer(e){return this._handler.getImageBuffer?this._handler.getImageBuffer(e):null}addEventListener(e,t,i){return this._handler.addEventListener(e,t,i)}removeEventListener(e,t,i){return this._handler.removeEventListener(e,t,i)}dispatchEvent(e){return this._handler.dispatchEvent(e)}getBoundingClientRect(){return this._handler.getBoundingClientRect()}getContainer(){return this._handler.container}clearViewBox(e){this._handler.clearViewBox(e)}setViewBox(e){this._handler.setViewBox(e)}setViewBoxTransform(e,t,i,r,n,o){this._handler.setViewBoxTransform(e,t,i,r,n,o)}getViewBox(){return this._handler.getViewBox()}getViewBoxTransform(){return this._handler.getViewBoxTransform()}pointTransform(e,t){var i=this._handler.getViewBox(),r={x:e,y:t};return this._handler.getViewBoxTransform().transformPoint({x:e,y:t},r),r.x-=i.x1,r.y-=i.y1,r}hasSubView(){var e=this._handler.getViewBox();return!(0===e.x1&&0===e.y1&&this.width===e.width()&&this.height===e.height())}isVisible(e){return this._handler.isVisible(e)}onVisibleChange(e){return this._handler.onVisibleChange(e)}getTopLeft(e){return this._handler.getTopLeft(e)}},DefaultWindow=__decorate4([injectable(),__metadata2(\\\"design:paramtypes\\\",[])],DefaultWindow),__decorate5=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata3=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param2=function(i,r){return function(e,t){r(e,t,i)}},DefaultGraphicUtil=class{get canvas(){return this.tryInitCanvas(),this._canvas}get context(){return this.tryInitCanvas(),this._context}constructor(e){this.contributions=e,this.configured=!1,this.global=application.global,this.global.hooks.onSetEnv.tap(\\\"graphic-util\\\",(e,t,i)=>{this.configured=!1,this.configure(i,t)})}get textMeasure(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}configure(e,t){this.configured||(this.contributions.getContributions().forEach(e=>{e.configure(this,t)}),this.configured=!0)}tryInitCanvas(){var e;this._canvas||(e=canvasAllocate.shareCanvas(),this._canvas=e,this._context=e.getContext(\\\"2d\\\"))}bindTextMeasure(e){this._textMeasure=e}measureText(e,t,i=\\\"native\\\"){this.configure(this.global,this.global.env);var r=this.global.measureTextMethod,n=(this.global.measureTextMethod=i,{width:this._textMeasure.measureTextWidth(e,t),height:null!=(n=t.fontSize)?n:DefaultTextStyle.fontSize});return this.global.measureTextMethod=r,n}createTextMeasureInstance(e,t,i){return this.configure(this.global,this.global.env),new TextMeasure(Object.assign({defaultFontParams:{fontFamily:DefaultTextStyle.fontFamily,fontSize:DefaultTextStyle.fontSize},getCanvasForMeasure:i||(()=>this.canvas),getTextBounds:void 0,specialCharSet:`-/: .,@%'\\\"~`+TextMeasure.ALPHABET_CHAR_SET+TextMeasure.ALPHABET_CHAR_SET.toUpperCase()},null!=t?t:{}),e)}drawGraphicToCanvas(e,t,i){var r,n,o,a,l,s;return t.defaultLayer&&(r=container.get(VWindow),o=(n=e.AABBBounds).width(),a=n.height(),s=-n.x1,l=-n.y1,r.create({viewBox:{x1:s,y1:l,x2:n.x2,y2:n.y2},width:o,height:a,canvas:i,dpr:t.window.dpr,canvasControled:!0,offscreen:!0,title:\\\"\\\"}),s=t.params.optimize.disableCheckGraphicWidthOutRange,t.params.optimize.disableCheckGraphicWidthOutRange=!0,t.defaultLayer.getNativeHandler().drawTo(r,[e],{transMatrix:r.getViewBoxTransform(),viewBox:r.getViewBox(),stage:t,layer:t.defaultLayer,renderService:t.renderService,background:\\\"transparent\\\",clear:!0,updateBounds:!1}),t.params.optimize.disableCheckGraphicWidthOutRange=s,r.getNativeHandler().nativeCanvas)||null}},DefaultGraphicUtil=__decorate5([injectable(),__param2(0,inject(ContributionProvider)),__param2(0,named(TextMeasureContribution)),__metadata3(\\\"design:paramtypes\\\",[Object])],DefaultGraphicUtil),_matrix=(!function(e){e[e.transform=0]=\\\"transform\\\",e[e.matrix=1]=\\\"matrix\\\"}(TransformMode=TransformMode||{}),new Matrix),DefaultTransformUtil=class{constructor(){this.matrix=new Matrix}init(e){return this.mode=TransformMode.transform,this.originTransform=e,this.matrix.reset(),this}fromMatrix(e,t){return this.mode=TransformMode.matrix,this.outSourceMatrix=e,this.outTargetMatrix=t,this}scaleMatrix(e,t,i){var r,n=this.outSourceMatrix;return _matrix.setValue(n.a,n.b,n.c,n.d,n.e,n.f),this.outTargetMatrix.reset(),i?(({x:n,y:r}=i),this.outTargetMatrix.translate(n,r),this.outTargetMatrix.scale(e,t),this.outTargetMatrix.translate(-n,-r)):this.outTargetMatrix.scale(e,t),this.outTargetMatrix.multiply(_matrix.a,_matrix.b,_matrix.c,_matrix.d,_matrix.e,_matrix.f),this}rotateMatrix(e,t){var i,r=this.outSourceMatrix;return _matrix.setValue(r.a,r.b,r.c,r.d,r.e,r.f),this.outTargetMatrix.reset(),t?(({x:r,y:i}=t),this.outTargetMatrix.translate(r,i),this.outTargetMatrix.rotate(e),this.outTargetMatrix.translate(-r,-i)):this.outTargetMatrix.rotate(e),this.outTargetMatrix.multiply(_matrix.a,_matrix.b,_matrix.c,_matrix.d,_matrix.e,_matrix.f),this}scale(e,t,i){return this.mode===TransformMode.matrix?this.scaleMatrix(e,t,i):this}rotate(e,t){return this.mode===TransformMode.matrix?this.rotateMatrix(e,t):this}translateMatrix(e,t){var i=this.outSourceMatrix;return _matrix.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(e,t),this.outTargetMatrix.multiply(_matrix.a,_matrix.b,_matrix.c,_matrix.d,_matrix.e,_matrix.f),this}translate(e,t){return this.mode===TransformMode.matrix?this.translateMatrix(e,t):this}simplify(e){return this.mode===TransformMode.matrix?this.simplifyMatrix(e):this}simplifyMatrix(e){return this}},DefaultTransformUtil=__decorate5([injectable(),__metadata3(\\\"design:paramtypes\\\",[])],DefaultTransformUtil),defaultThemeObj=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),{arc:DefaultArcAttribute,area:DefaultAreaAttribute,circle:DefaultCircleAttribute,line:DefaultLineAttribute,path:DefaultPathAttribute,symbol:DefaultSymbolAttribute,text:DefaultTextAttribute,rect:DefaultRectAttribute,rect3d:DefaultRect3dAttribute,polygon:DefaultPolygonAttribute,richtext:DefaultRichTextAttribute,richtextIcon:DefaultRichTextIconAttribute,image:DefaultImageAttribute,group:DefaultGroupAttribute,glyph:DefaultGlyphAttribute}),themeKeys=Object.keys(defaultThemeObj);function newThemeObj(){return{arc:Object.assign({},defaultThemeObj.arc),area:Object.assign({},defaultThemeObj.area),circle:Object.assign({},defaultThemeObj.circle),line:Object.assign({},defaultThemeObj.line),path:Object.assign({},defaultThemeObj.path),symbol:Object.assign({},defaultThemeObj.symbol),text:Object.assign({},defaultThemeObj.text),rect:Object.assign({},defaultThemeObj.rect),rect3d:Object.assign({},defaultThemeObj.rect3d),polygon:Object.assign({},defaultThemeObj.polygon),richtext:Object.assign({},defaultThemeObj.richtext),richtextIcon:Object.assign({},defaultThemeObj.richtextIcon),image:Object.assign({},defaultThemeObj.image),group:Object.assign({},defaultThemeObj.group),glyph:Object.assign({},defaultThemeObj.glyph)}}function combine(t,i){Object.keys(i).forEach(e=>{t[e]=i[e]})}var globalThemeObj=newThemeObj(),Theme=class{constructor(){this.initTheme(),this.dirty=!1}initTheme(){this._defaultTheme={},themeKeys.forEach(e=>{this._defaultTheme[e]=Object.create(globalThemeObj[e])}),this.combinedTheme=this._defaultTheme}getTheme(t){if(t&&this.dirty){let e={};var i=this.getParentWithTheme(t);i&&(e=i.theme),this.applyTheme(t,e)}return this.combinedTheme}getParentWithTheme(e){for(;e.parent;)if((e=e.parent).theme)return e;return null}applyTheme(e,t,i=!1){var r,n;return this.dirty&&((r=this.getParentWithTheme(e))&&((n=r.theme).dirty||i)&&n.applyTheme(r,t,!0),this.userTheme?this.doCombine(r&&r.theme.combinedTheme):(r?this.combinedTheme=r.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,Logger.getInstance().warn(\\\"未知错误，走到不应该走的区域里\\\")),this.dirty=!1)),this.combinedTheme}doCombine(i){const r=this.userTheme,n=this.combinedTheme;themeKeys.forEach(e=>{var t=Object.create(globalThemeObj[e]);i&&i[e]&&combine(t,i[e]),n[e]&&combine(t,n[e]),r[e]&&combine(t,r[e]),this.combinedTheme[e]=t}),r.common&&themeKeys.forEach(e=>{combine(this.combinedTheme[e],r.common)}),this.dirty=!1}setTheme(t,e){let i=this.userTheme;i?Object.keys(t).forEach(e=>{i[e]?Object.assign(i[e],t[e]):i[e]=Object.assign({},t[e])}):i=t,this.userTheme=i,this.dirty=!0,this.dirtyChildren(e)}resetTheme(e,t){this.userTheme=e,this.dirty=!0,this.dirtyChildren(t)}dirtyChildren(e){e.forEachChildren(e=>{e.isContainer&&(e.theme&&(e.theme.dirty=!0),this.dirtyChildren(e))})}},globalTheme=new Theme;function getTheme(e,t){return e.glyphHost?getTheme(e.glyphHost):t?(e.isContainer,t):getThemeFromGroup(e)||e.attachedThemeGraphic&&getTheme(e.attachedThemeGraphic)||globalTheme.getTheme()}function getThemeFromGroup(e){let t;if(t=e.isContainer?e:e.parent){for(;t&&!t.theme;)t=t.parent;return t?(t.theme||t.createTheme(),t.theme.getTheme(t)):globalTheme.getTheme()}return null}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var __awaiter=function(e,t,l,s){return new(l=l||Promise)(function(i,r){function n(e){try{a(s.next(e))}catch(t){r(t)}}function o(e){try{a(s[\\\"throw\\\"](e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(n,o)}a((s=s.apply(e,t||[])).next())})},Node=class extends import_eventemitter3[\\\"default\\\"]{get previousSibling(){return this._prev}get nextSibling(){return this._next}get children(){return this.getChildren()}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get count(){return this._count}get childrenCount(){return this._idMap?this._idMap.size:0}constructor(){super(),this._uid=Generator.GenAutoIncrementId(),this._firstChild=null,this._lastChild=null,this.parent=null,this._count=1}forEachChildren(i,e=!1){if(e){let e=this._lastChild,t=0;for(;e;){if(i(e,t++))return;e=e._prev}}else{let e=this._firstChild,t=0;for(;e;){if(i(e,t++))return;e=e._next}}}forEachChildrenAsync(r,e=!1){return __awaiter(this,void 0,void 0,function*(){if(e){let t=this._lastChild,i=0;for(;t;){let e=r(t,i++);if(e=e.then?yield e:e)return;t=t._prev}}else{let t=this._firstChild,i=0;for(;t;){let e=r(t,i++);if(e=e.then?yield e:e)return;t=t._next}}})}forEach(e){return this.forEachChildren(e)}appendChild(e,t=!0){if(this._uid===e._uid)return null;if(!t&&e.isAncestorsOf(this))throw new Error(\\\"【Node::appendChild】不能将父辈元素append为子元素\\\");return e.parent&&e.parent.removeChild(e),(e.parent=this)._lastChild?((this._lastChild._next=e)._prev=this._lastChild,this._lastChild=e):(this._firstChild=this._lastChild=e)._prev=e._next=null,this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this.setCount(e.count),this._structEdit=!0,e}appendChildArrHighPerformance(e,t=0){return console.error(\\\"暂不支持该函数\\\"),e}insertBefore(e,t){if(!t)return this.appendChild(e);if(this._uid===e._uid)return null;if(e.isAncestorsOf(this))throw new Error(\\\"【Node::insertBefore】不能将父辈元素insert为子元素\\\");return t.parent!==this?null:(e.parent&&e.parent.removeChild(e),e.parent=this,e._prev=t._prev,t._prev?t._prev._next=e:this._firstChild=e,(t._prev=e)._next=t,this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this._structEdit=!0,this.setCount(e.count),e)}insertAfter(e,t){if(!t)return this.appendChild(e);if(this._uid===e._uid)return null;if(e.isAncestorsOf(this))throw new Error(\\\"【Node::insertAfter】不能将父辈元素insert为子元素\\\");return t.parent!==this?null:(e.parent&&e.parent.removeChild(e),e.parent=this,t._next?(t._next._prev=e)._next=t._next:this._lastChild=e,(t._next=e)._prev=t,this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this._structEdit=!0,this.setCount(e.count),e)}insertInto(i,r){if(!this._ignoreWarn&&this._nodeList&&Logger.getInstance().warn(\\\"insertIntoKeepIdx和insertInto混用可能会存在错误\\\"),r>=this.childrenCount)return this.appendChild(i);if(this._uid===i._uid)return null;if(i.isAncestorsOf(this))throw new Error(\\\"【Node::insertBefore】不能将父辈元素insert为子元素\\\");if(i.parent&&i.parent.removeChild(i),i.parent=this,0===r)i._next=this._firstChild,this._firstChild&&(this._firstChild._prev=i),i._prev=null,this._firstChild=i;else{let e=this._firstChild;for(let t=0;t<r;t++){if(!e)return null;0<t&&(e=e._next)}if(!e)return null;i._next=e._next,((i._prev=e)._next=i)._next&&(i._next._prev=i)}return this._idMap||(this._idMap=new Map),this._idMap.set(i._uid,i),this._structEdit=!0,this.setCount(i.count),i}insertIntoKeepIdx(e,t){if(this._nodeList||(this._nodeList=this.children),this._nodeList[t])return r=this._nodeList[t],this._nodeList.splice(t,0,e),this.insertBefore(e,r);let i;this._nodeList[t]=e;for(let n=t-1;0<=n&&!(i=this._nodeList[n]);n--);if(i)return i._next?this.insertBefore(e,i._next):this.appendChild(e);this._ignoreWarn=!0;var r=this.insertInto(e,0);return this._ignoreWarn=!1,r}removeChild(t){var e;return this._idMap&&this._idMap.has(t._uid)?(this._idMap[\\\"delete\\\"](t._uid),this._nodeList&&0<(e=this._nodeList.findIndex(e=>e===t))&&this._nodeList.splice(e,1),t._prev?t._prev._next=t._next:this._firstChild=t._next,t._next?t._next._prev=t._prev:this._lastChild=t._prev,t.parent=null,t._prev=null,t._next=null,this._structEdit=!0,this.setCount(-t.count),t):null}\\\"delete\\\"(){this.parent&&this.parent.removeChild(this)}removeAllChild(e){if(this._idMap){let e=this._firstChild;for(;e;){var t=e._next;e.parent=null,e._prev=null,e._next=null,e=e._next,e=t}this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}}replaceChild(e,t){throw new Error(\\\"暂不支持\\\")}find(i,e=!1){let r=null;return this.forEachChildren((e,t)=>!(e===this||!i(e,t)||(r=e,0))),e&&this.forEachChildren(e=>{if(e.isContainer){var t=e.find(i,!0);if(t)return r=t,!0}return!1}),r}findAll(i,e=!1){let r=[];return this.forEachChildren((e,t)=>{e!==this&&i(e,t)&&r.push(e)}),e&&this.forEachChildren(e=>{var t;e.isContainer&&(t=e.findAll(i,!0)).length&&(r=r.concat(t))}),r}getElementById(t){return this.find(e=>e.id===t,!0)}findChildById(e){return this.getElementById(e)}findChildByUid(e){return this._idMap&&this._idMap.get(e)||null}getElementsByName(t){return this.findAll(e=>e.name===t,!0)}findChildrenByName(e){return this.getElementsByName(e)}getElementsByType(t){return this.findAll(e=>e.type===t,!0)}getChildByName(t,e=!1){return this.find(e=>e.name===t,e)}getChildAt(e){let t=this._firstChild;if(!t)return null;for(let i=0;i<e;i++){if(!t._next)return null;t=t._next}return t}at(e){return this.getChildAt(e)}containNode(t){if(this._idMap){if(this._idMap.has(t._uid))return!0;let e=this._firstChild;for(;e;){if(e.containNode(t))return!0;e=e._next}}return!1}getRootNode(){let e=this.parent;for(;null!=e&&e.parent;)e=e.parent;return e||this}hasChildNodes(){return null!==this._firstChild}addChild(e){return this.appendChild(e)}add(e){return this.appendChild(e)}getChildren(){var e=[];let t=this._firstChild;for(;t;)e.push(t),t=t._next;return e}isChildOf(e){return!!this.parent&&this.parent._uid===e._uid}isParentOf(e){return e.isChildOf(this)}isDescendantsOf(e){let t=this.parent;if(t)do{if(t._uid===e._uid)return!0}while(null!==(t=t.parent));return!1}isAncestorsOf(e){return e.isDescendantsOf(this)}getAncestor(e){throw new Error(\\\"暂不支持\\\")}setAllDescendantsProps(e,t){let i=this._firstChild;for(;i;)i[e]=t,i.setAllDescendantsProps(e,t),i=i._next}setCount(e){this._count+=e;let t=this.parent;if(t)for(;t._count+=e,null!==(t=t.parent););}clone(){throw new Error(\\\"暂不支持\\\")}cloneTo(e){throw new Error(\\\"暂不支持\\\")}getParent(){return this.parent}del(e){return this.removeChild(e)}addEventListener(e,t,i){var r=isBoolean_default(i,!0)&&i||isObject_default(i)&&i.capture,n=isObject_default(i)&&i.once,o=isFunction_default(t)?void 0:t;return e=r?e+\\\"capture\\\":e,t=isFunction_default(t)?t:t.handleEvent,n?super.once(e,t,o):super.on(e,t,o),this}on(e,t,i){return this.addEventListener(e,t,i)}removeEventListener(e,t,i){var r=isBoolean_default(i,!0)&&i||isObject_default(i)&&i.capture,n=isFunction_default(t)?void 0:t,r=(e=r?e+\\\"capture\\\":e,t=isFunction_default(t)?t:t.handleEvent,isObject_default(i)&&i.once);return super.off(e,t,n,r),this}off(e,t,i){return this.removeEventListener(e,t,i)}once(e,t,i){return isObject_default(i)?(i.once=!0,this.addEventListener(e,t,i)):this.addEventListener(e,t,{once:!0})}removeAllEventListeners(){return super.removeAllListeners(),this}removeAllListeners(){return this.removeAllEventListeners()}dispatchEvent(e,...t){return super.emit(e.type,e,...t),!e.defaultPrevented}emit(e,t){return this.dispatchEvent(e,t)}release(){this.removeAllListeners()}},FederatedEvent=(init_esbuild_inject(),class YG{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get x(){return this.canvas.x}get y(){return this.canvas.y}get canvasX(){return this.canvas.x}get canvasY(){return this.canvas.y}get viewX(){return this.viewport.x}get viewY(){return this.viewport.y}constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=YG.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={x:0,y:0},this.page={x:0,y:0},this.canvas={x:0,y:0},this.viewport={x:0,y:0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation(),this.propagationStopped=!0}initEvent(){}initUIEvent(){}clone(){throw new Error(\\\"Method not implemented.\\\")}}),FederatedMouseEvent=(init_esbuild_inject(),class extends FederatedEvent{constructor(){super(...arguments),this.client={x:0,y:0},this.movement={x:0,y:0},this.offset={x:0,y:0},this.global={x:0,y:0},this.screen={x:0,y:0}}get clientX(){return this.client.x}get clientY(){return this.client.y}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return\\\"getModifierState\\\"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,r,n,o,a,l,s,h,d,u,c,g,p){throw new Error(\\\"Method not implemented.\\\")}}),FederatedPointerEvent=(init_esbuild_inject(),class oH extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return\\\"pointermove\\\"===this.type||\\\"mousemove\\\"===this.type||\\\"touchmove\\\"===this.type?[this]:[]}getPredictedEvents(){throw new Error(\\\"getPredictedEvents is not supported!\\\")}clone(){var e,t=new oH(this.manager);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t.nativeEvent=this.nativeEvent,t.originalEvent=this.originalEvent,null!=(e=this.manager)&&e.copyPointerData(this,t),null!=(e=this.manager)&&e.copyMouseData(this,t),null!=(e=this.manager)&&e.copyData(this,t),t.target=this.target,t.path=this.composedPath().slice(),t.type=this.type,t}}),FederatedWheelEvent=(init_esbuild_inject(),class tH extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}clone(){var e,t=new tH(this.manager);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t.nativeEvent=this.nativeEvent,t.originalEvent=this.originalEvent,null!=(e=this.manager)&&e.copyWheelData(this,t),null!=(e=this.manager)&&e.copyMouseData(this,t),null!=(e=this.manager)&&e.copyData(this,t),t.target=this.target,t.path=this.composedPath().slice(),t.type=this.type,t}}),CustomEvent=(FederatedWheelEvent.DOM_DELTA_PIXEL=0,FederatedWheelEvent.DOM_DELTA_LINE=1,FederatedWheelEvent.DOM_DELTA_PAGE=2,init_esbuild_inject(),class extends FederatedEvent{constructor(e,t){super(),this.type=e,this.detail=t}}),WILDCARD=(init_esbuild_inject(),init_esbuild_inject(),\\\"*\\\"),clock=(init_esbuild_inject(),\\\"object\\\"==typeof performance&&performance.now?performance:Date);function isMouseLike(e){return\\\"mouse\\\"===e||\\\"pen\\\"===e}var STATUS,Edge,EventManager=class{constructor(e,t){this.dispatch=new import_eventemitter3[\\\"default\\\"],this.cursorTarget=null,this.mappingState={trackingData:{}},this.eventPool=new Map,this.onPointerDown=(e,t)=>{var i,r;e instanceof FederatedPointerEvent?(i=this.createPointerEvent(e,e.type,t),this.dispatchEvent(i,\\\"pointerdown\\\"),\\\"touch\\\"===i.pointerType?this.dispatchEvent(i,\\\"touchstart\\\"):isMouseLike(i.pointerType)&&(r=2===i.button,this.dispatchEvent(i,r?\\\"rightdown\\\":\\\"mousedown\\\")),this.trackingData(e.pointerId).pressTargetsByButton[e.button]=i.composedPath(),this.freeEvent(i)):Logger.getInstance().warn(\\\"EventManager cannot map a non-pointer event as a pointer event\\\")},this.onPointerMove=(t,e)=>{if(t instanceof FederatedPointerEvent){var i=this.createPointerEvent(t,t.type,e),r=isMouseLike(i.pointerType),n=this.trackingData(t.pointerId),o=this.findMountedTarget(n.overTargets);if(n.overTargets&&o&&o!==this.rootTarget&&o!==i.target){var a=\\\"mousemove\\\"===t.type?\\\"mouseout\\\":\\\"pointerout\\\",a=this.createPointerEvent(t,a,o||void 0);if(this.dispatchEvent(a,\\\"pointerout\\\"),r&&this.dispatchEvent(a,\\\"mouseout\\\"),!i.composedPath().includes(o)){var l=this.createPointerEvent(t,\\\"pointerleave\\\",o||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&!i.composedPath().includes(l.target);)l.currentTarget=l.target,this.notifyTarget(l),r&&this.notifyTarget(l,\\\"mouseleave\\\"),l.target=l.target.parent;this.freeEvent(l)}this.freeEvent(a)}if(o!==i.target){var a=\\\"mousemove\\\"===t.type?\\\"mouseover\\\":\\\"pointerover\\\",a=this.clonePointerEvent(i,a);this.dispatchEvent(a,\\\"pointerover\\\"),r&&this.dispatchEvent(a,\\\"mouseover\\\");let e=null==o?void 0:o.parent;for(;e&&e!==this.rootTarget.parent&&e!==i.target;)e=e.parent;if(!e||e===this.rootTarget.parent){var s=this.clonePointerEvent(i,\\\"pointerenter\\\");s.eventPhase=s.AT_TARGET;let e=s.target;var h=new Set;let t=o;for(;t&&t!==this.rootTarget;)h.add(t),t=t.parent;for(;e&&e!==o&&e!==this.rootTarget.parent;)h.has(e)||(s.currentTarget=e,this.notifyTarget(s),r&&this.notifyTarget(s,\\\"mouseenter\\\")),e=e.parent;this.freeEvent(s)}this.freeEvent(a)}this.dispatchEvent(i,\\\"pointermove\\\"),\\\"touch\\\"===i.pointerType&&this.dispatchEvent(i,\\\"touchmove\\\"),r&&(this.dispatchEvent(i,\\\"mousemove\\\"),this.cursorTarget=i.target,this.cursor=(null==(a=null==(a=i.target)?void 0:a.attribute)?void 0:a.cursor)||this.rootTarget.getCursor()),n.overTargets=i.composedPath(),this.freeEvent(i)}else Logger.getInstance().warn(\\\"EventManager cannot map a non-pointer event as a pointer event\\\")},this.onPointerOver=(e,t)=>{var i;if(e instanceof FederatedPointerEvent){var r=this.trackingData(e.pointerId),n=this.createPointerEvent(e,e.type,t),o=isMouseLike(n.pointerType),a=(this.dispatchEvent(n,\\\"pointerover\\\"),o&&this.dispatchEvent(n,\\\"mouseover\\\"),\\\"mouse\\\"===n.pointerType&&(this.cursorTarget=n.target,this.cursor=(null==(i=null==(i=n.target)?void 0:i.attribute)?void 0:i.cursor)||this.rootTarget.getCursor()),this.clonePointerEvent(n,\\\"pointerenter\\\"));for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),o&&this.notifyTarget(a,\\\"mouseenter\\\"),a.target=a.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(a)}else Logger.getInstance().warn(\\\"EventManager cannot map a non-pointer event as a pointer event\\\")},this.onPointerOut=(e,t)=>{if(e instanceof FederatedPointerEvent){var i=this.trackingData(e.pointerId);if(i.overTargets){var r=isMouseLike(e.pointerType),n=this.findMountedTarget(i.overTargets),o=this.createPointerEvent(e,\\\"pointerout\\\",n||void 0),a=(this.dispatchEvent(o),r&&this.dispatchEvent(o,\\\"mouseout\\\"),this.createPointerEvent(e,\\\"pointerleave\\\",n||void 0));for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),r&&this.notifyTarget(a,\\\"mouseleave\\\"),a.target=a.target.parent;i.overTargets=[],this.freeEvent(o),this.freeEvent(a)}this.cursorTarget=null,this.cursor=\\\"\\\"}else Logger.getInstance().warn(\\\"EventManager cannot map a non-pointer event as a pointer event\\\")},this.onPointerUp=(i,e)=>{var r;if(i instanceof FederatedPointerEvent){var n,o=clock.now(),a=this.createPointerEvent(i,i.type,e),l=(this.dispatchEvent(a,\\\"pointerup\\\"),\\\"touch\\\"===a.pointerType?this.dispatchEvent(a,\\\"touchend\\\"):isMouseLike(a.pointerType)&&(l=2===a.button,this.dispatchEvent(a,l?\\\"rightup\\\":\\\"mouseup\\\")),this.trackingData(i.pointerId)),s=this.findMountedTarget(l.pressTargetsByButton[i.button]);let t=s;if(s&&!a.composedPath().includes(s)){let e=s;for(;e&&!a.composedPath().includes(e);)a.currentTarget=e,this.notifyTarget(a,\\\"pointerupoutside\\\"),\\\"touch\\\"===a.pointerType?this.notifyTarget(a,\\\"touchendoutside\\\"):isMouseLike(a.pointerType)&&(n=2===a.button,this.notifyTarget(a,n?\\\"rightupoutside\\\":\\\"mouseupoutside\\\")),e=e.parent;delete l.pressTargetsByButton[i.button],t=e}t&&((s=this.clonePointerEvent(a,\\\"click\\\")).target=t,s.path=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:s.target,timeStamp:o}),(l=l.clicksByButton[i.button]).target===s.target&&o-l.timeStamp<(null!=(r=this._config.clickInterval)?r:200)?++l.clickCount:l.clickCount=1,l.target=s.target,l.timeStamp=o,s.detail=l.clickCount,isMouseLike(s.pointerType)?(this.dispatchEvent(s,\\\"click\\\"),2===l.clickCount&&this.dispatchEvent(s,\\\"dblclick\\\")):\\\"touch\\\"===s.pointerType&&(this.dispatchEvent(s,\\\"tap\\\"),2===l.clickCount)&&this.dispatchEvent(s,\\\"dbltap\\\"),this.dispatchEvent(s,\\\"pointertap\\\"),this.freeEvent(s)),this.freeEvent(a)}else Logger.getInstance().warn(\\\"EventManager cannot map a non-pointer event as a pointer event\\\")},this.onPointerUpOutside=(t,e)=>{if(t instanceof FederatedPointerEvent){var i=this.trackingData(t.pointerId),r=this.findMountedTarget(i.pressTargetsByButton[t.button]),n=this.createPointerEvent(t,t.type,e);if(r){let e=r;for(;e;)n.currentTarget=e,this.notifyTarget(n,\\\"pointerupoutside\\\"),\\\"touch\\\"===n.pointerType?this.notifyTarget(n,\\\"touchendoutside\\\"):isMouseLike(n.pointerType)&&this.notifyTarget(n,2===n.button?\\\"rightupoutside\\\":\\\"mouseupoutside\\\"),e=e.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(n)}else Logger.getInstance().warn(\\\"EventManager cannot map a non-pointer event as a pointer event\\\")},this.onWheel=(e,t)=>{var i;e instanceof FederatedWheelEvent?(i=this.createWheelEvent(e,t),this.dispatchEvent(i),this.freeEvent(i)):Logger.getInstance().warn(\\\"EventManager cannot map a non-wheel event as a wheel event\\\")},this.rootTarget=e,this.mappingTable={},this._config=Object.assign({clickInterval:200},t),this.addEventMapping(\\\"pointerdown\\\",this.onPointerDown),this.addEventMapping(\\\"pointermove\\\",this.onPointerMove),this.addEventMapping(\\\"pointerout\\\",this.onPointerOut),this.addEventMapping(\\\"pointerleave\\\",this.onPointerOut),this.addEventMapping(\\\"pointerover\\\",this.onPointerOver),this.addEventMapping(\\\"pointerup\\\",this.onPointerUp),this.addEventMapping(\\\"pointerupoutside\\\",this.onPointerUpOutside),this.addEventMapping(\\\"wheel\\\",this.onWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((e,t)=>e.priority-t.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(r){var n;if(this.rootTarget){var o=this.mappingTable[r.type];let i;var a=r.canvasX+\\\"-\\\"+r.canvasY;if(null!=(n=this._prePointTargetCache)&&n[a]&&null!=(n=null==(n=this._prePointTargetCache)?void 0:n[a])&&n.stage&&(null==(n=null==(n=this._prePointTargetCache)?void 0:n[a])?void 0:n.stage.renderCount)===(null==(n=this._prePointTargetCache)?void 0:n.stageRenderCount)?i=this._prePointTargetCache[a]:(i=this.pickTarget(r.viewX,r.viewY,r),r.pickParams||(this._prePointTargetCache={[a]:i,stageRenderCount:null!=(n=null==i?void 0:i.stage.renderCount)?n:-1})),o)for(let e=0,t=o.length;e<t;e++)o[e].fn(r,i);else Logger.getInstance().warn(\\\"[EventManager]: Event mapping not defined for \\\"+r.type)}}propagate(i,r){if(i.target){var n=i.composedPath();i.eventPhase=i.CAPTURING_PHASE;for(let e=0,t=n.length-1;e<t;e++)if(i.currentTarget=n[e],this.notifyTarget(i,r),i.propagationStopped||i.propagationImmediatelyStopped)return;if(i.eventPhase=i.AT_TARGET,i.currentTarget=i.target,this.notifyTarget(i,r),!i.propagationStopped&&!i.propagationImmediatelyStopped){i.eventPhase=i.BUBBLING_PHASE;for(let e=n.length-2;0<=e;e--)if(i.currentTarget=n[e],this.notifyTarget(i,r),i.propagationStopped||i.propagationImmediatelyStopped)return}}}propagationPath(e){var t=[e];for(let i=0;i<2048&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw new Error(\\\"Cannot find propagation path to disconnected target\\\");t.push(e.parent),e=e.parent}return t.reverse(),t}notifyTarget(e,t){t=null!=t?t:e.type;var i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?t+\\\"capture\\\":t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){var r,n=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=i||this.pickTarget(null!=(r=n.viewX)?r:n.global.x,null!=(r=n.viewY)?r:n.global.y,n),\\\"string\\\"==typeof t&&(n.type=t),n}createWheelEvent(e,t){var i,r=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=t||this.pickTarget(null!=(i=r.viewX)?i:r.global.x,null!=(i=r.viewY)?i:r.global.y,r),r}clonePointerEvent(e,t){var i=this.allocateEvent(FederatedPointerEvent);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=null!=t?t:i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof FederatedPointerEvent&&t instanceof FederatedPointerEvent&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(t,i){t instanceof FederatedMouseEvent&&i instanceof FederatedMouseEvent&&(i.altKey=t.altKey,i.button=t.button,i.buttons=t.buttons,i.ctrlKey=t.ctrlKey,i.shiftKey=t.shiftKey,i.metaKey=t.metaKey,[\\\"client\\\",\\\"movement\\\",\\\"canvas\\\",\\\"screen\\\",\\\"global\\\",\\\"offset\\\",\\\"viewport\\\"].forEach(e=>{i[e].x=t[e].x,i[e].y=t[e].y}))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=clock.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.x=e.layer.x,t.layer.y=e.layer.y,t.page.x=e.page.x,t.page.y=e.page.y,t.pickParams=e.pickParams}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=(null==(t=this.eventPool.get(e))?void 0:t.pop())||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error(\\\"It is illegal to free an event not managed by this EventManager!\\\");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),null!=(t=this.eventPool.get(t))&&t.push(e)}notifyListeners(i,r){var n=i.currentTarget._events[r];if(n)if(\\\"fn\\\"in n)n.once&&i.currentTarget.removeEventListener(r,n.fn,{once:!0}),n.fn.call(n.context,i);else for(let e=0,t=n.length;e<t&&!i.propagationImmediatelyStopped;e++)n[e].once&&i.currentTarget.removeEventListener(r,n[e].fn,{once:!0}),n[e].fn.call(n[e].context,i);this.emitDelegation(i,r)}emitDelegation(i,r){var n=i.currentTarget._events[WILDCARD];if(n)if(\\\"fn\\\"in n)n.fn.call(n.context,i,r);else for(let e=0,t=n.length;e<t&&!i.propagationImmediatelyStopped;e++)n[e].fn.call(n[e].context,i,r)}pickTarget(e,t,i){var r=this.rootTarget.pick(e,t),n=r&&r.graphic?r.graphic:r&&r.group?r.group:this.rootTarget.AABBBounds.contains(e,t)?this.rootTarget:null;return i&&(i.pickParams=r.params),n}release(){this.dispatch.removeAllListeners(),this.eventPool.clear(),this.rootTarget=null,this.mappingTable=null,this.mappingState=null,this.cursorTarget=null}},EventTarget2=(init_esbuild_inject(),{dispatchEvent(e){var t;if(e instanceof FederatedEvent)return e.defaultPrevented=!1,e.path=[],e.target=this,null!=(t=null==e?void 0:e.manager)&&t.dispatchEvent(e),!e.defaultPrevented;throw new Error(\\\"DisplayObject cannot propagate events outside of the Federated Events API\\\")},emit(e,t){return this.dispatchEvent(new CustomEvent(e,t))}}),TOUCH_TO_POINTER=(init_esbuild_inject(),{touchstart:\\\"pointerdown\\\",touchend:\\\"pointerup\\\",touchendoutside:\\\"pointerupoutside\\\",touchmove:\\\"pointermove\\\",touchcancel:\\\"pointercancel\\\"}),EventSystem=class{constructor(e){this.resolution=1,this.onPointerDown=i=>{if(!this.supportsTouchEvents||\\\"touch\\\"!==i.pointerType){var r=this.normalizeToPointerData(i);this.autoPreventDefault&&r[0].isNormalized&&(!i.cancelable&&\\\"cancelable\\\"in i||i.preventDefault());for(let e=0,t=r.length;e<t;e++){var n=r[e],n=this.bootstrapEvent(this.rootPointerEvent,n);this.manager.mapEvent(n)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)}},this.onPointerMove=i=>{if(!(this.supportsTouchEvents&&\\\"touch\\\"===i.pointerType||this.isEventOutsideOfTargetElement(i))){var r=this.normalizeToPointerData(i);for(let e=0,t=r.length;e<t;e++){var n=this.bootstrapEvent(this.rootPointerEvent,r[e]);this.manager.mapEvent(n)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)}},this.onPointerUp=i=>{if(!this.supportsTouchEvents||\\\"touch\\\"!==i.pointerType){var r=this.isEventOutsideOfTargetViewPort(i)?\\\"outside\\\":\\\"\\\",n=this.normalizeToPointerData(i);for(let e=0,t=n.length;e<t;e++){var o=this.bootstrapEvent(this.rootPointerEvent,n[e]);o.type+=r,this.manager.mapEvent(o)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)}},this.onPointerOverOut=i=>{if(!this.supportsTouchEvents||\\\"touch\\\"!==i.pointerType){var r=this.normalizeToPointerData(i);for(let e=0,t=r.length;e<t;e++){var n=this.bootstrapEvent(this.rootPointerEvent,r[e]);this.manager.mapEvent(n)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)}},this.onWheel=e=>{var t=this.normalizeWheelEvent(e);this.manager.mapEvent(t)};var{targetElement:t,resolution:i,rootNode:r,global:n,autoPreventDefault:o=!1,clickInterval:a,supportsTouchEvents:l=n.supportsTouchEvents,supportsPointerEvents:s=n.supportsPointerEvents}=e;this.manager=new EventManager(r,{clickInterval:a}),this.globalObj=n,this.supportsPointerEvents=s,this.supportsTouchEvents=l,this.supportsMouseEvents=n.supportsMouseEvents,this.applyStyles=n.applyStyles,this.autoPreventDefault=o,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent,this.rootWheelEvent=new FederatedWheelEvent,this.cursorStyles={\\\"default\\\":\\\"inherit\\\",pointer:\\\"pointer\\\"},this.resolution=i,this.setTargetElement(t)}release(){this.removeEvents(),this.manager&&this.manager.release(),this.domElement=null,this.manager=null,this.globalObj=null}setCursor(e,t){var i,r,n;(t||this.manager.rootTarget.window._handler.canvas.controled)&&(({applyStyles:i,domElement:r}=this),this.currentCursor!==(e=e||\\\"default\\\"))&&(this.currentCursor=e,(n=this.cursorStyles[e])?\\\"string\\\"==typeof n&&i?r.style.cursor=n:\\\"function\\\"==typeof n?n(e):\\\"object\\\"==typeof n&&i&&Object.assign(r.style,n):i&&isString_default(e)&&!has_default(this.cursorStyles,e)&&(r.style.cursor=e))}setTargetElement(e){this.removeEvents(),this.domElement=e,this.addEvents()}addEvents(){var e,t;!this.eventsAdded&&this.domElement&&(({globalObj:e,domElement:t}=this),this.supportsPointerEvents?((e.getDocument()?(e.getDocument().addEventListener(\\\"pointermove\\\",this.onPointerMove,!0),e.getDocument()):(t.addEventListener(\\\"pointermove\\\",this.onPointerMove,!0),t)).addEventListener(\\\"pointerup\\\",this.onPointerUp,!0),t.addEventListener(\\\"pointerdown\\\",this.onPointerDown,!0),t.addEventListener(\\\"pointerleave\\\",this.onPointerOverOut,!0),t.addEventListener(\\\"pointerover\\\",this.onPointerOverOut,!0)):((e.getDocument()?(e.getDocument().addEventListener(\\\"mousemove\\\",this.onPointerMove,!0),e.getDocument()):(t.addEventListener(\\\"mousemove\\\",this.onPointerMove,!0),t)).addEventListener(\\\"mouseup\\\",this.onPointerUp,!0),t.addEventListener(\\\"mousedown\\\",this.onPointerDown,!0),t.addEventListener(\\\"mouseout\\\",this.onPointerOverOut,!0),t.addEventListener(\\\"mouseover\\\",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(t.addEventListener(\\\"touchstart\\\",this.onPointerDown,!0),t.addEventListener(\\\"touchend\\\",this.onPointerUp,!0),t.addEventListener(\\\"touchmove\\\",this.onPointerMove,!0)),t.addEventListener(\\\"wheel\\\",this.onWheel,{capture:!0}),this.eventsAdded=!0)}removeEvents(){var e,t;this.eventsAdded&&this.domElement&&(({globalObj:e,domElement:t}=this),this.supportsPointerEvents?((e.getDocument()?(e.getDocument().removeEventListener(\\\"pointermove\\\",this.onPointerMove,!0),e.getDocument()):(t.removeEventListener(\\\"pointermove\\\",this.onPointerMove,!0),t)).removeEventListener(\\\"pointerup\\\",this.onPointerUp,!0),t.removeEventListener(\\\"pointerdown\\\",this.onPointerDown,!0),t.removeEventListener(\\\"pointerleave\\\",this.onPointerOverOut,!0),t.removeEventListener(\\\"pointerover\\\",this.onPointerOverOut,!0)):((e.getDocument()?(e.getDocument().removeEventListener(\\\"mousemove\\\",this.onPointerMove,!0),e.getDocument()):(t.removeEventListener(\\\"mousemove\\\",this.onPointerMove,!0),t)).removeEventListener(\\\"mouseup\\\",this.onPointerUp,!0),t.removeEventListener(\\\"mousedown\\\",this.onPointerDown,!0),t.removeEventListener(\\\"mouseout\\\",this.onPointerOverOut,!0),t.removeEventListener(\\\"mouseover\\\",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(t.removeEventListener(\\\"touchstart\\\",this.onPointerDown,!0),t.removeEventListener(\\\"touchend\\\",this.onPointerUp,!0),t.removeEventListener(\\\"touchmove\\\",this.onPointerMove,!0)),t.removeEventListener(\\\"wheel\\\",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1)}mapToViewportPoint(e){return this.domElement.pointTransform?this.domElement.pointTransform(e.x,e.y):e}mapToCanvasPoint(e){var t=null==(t=this.globalObj)?void 0:t.mapToCanvasPoint(e,this.domElement);if(t)return t;let i=0,r=0;r=e.changedTouches?(t=null!=(t=e.changedTouches[0])?t:{},i=t.clientX||0,t.clientY||0):(i=e.clientX||0,e.clientY||0);t=this.domElement.getBoundingClientRect();return{x:i-t.left,y:r-t.top}}normalizeToPointerData(i){var r,n=[];if(this.supportsTouchEvents&&i.changedTouches&&i.changedTouches.length)for(let e=0,t=i.changedTouches.length;e<t;e++){var o=i.changedTouches[e];isUndefined_default(o.button)&&(o.button=0),isUndefined_default(o.buttons)&&(o.buttons=1),isUndefined_default(o.isPrimary)&&(o.isPrimary=1===i.touches.length&&\\\"touchstart\\\"===i.type),isUndefined_default(o.width)&&(o.width=o.radiusX||1),isUndefined_default(o.height)&&(o.height=o.radiusY||1),isUndefined_default(o.tiltX)&&(o.tiltX=0),isUndefined_default(o.tiltY)&&(o.tiltY=0),isUndefined_default(o.pointerType)&&(o.pointerType=\\\"touch\\\"),isUndefined_default(o.pointerId)&&(o.pointerId=o.identifier||0),isUndefined_default(o.pressure)&&(o.pressure=o.force||.5),isUndefined_default(o.twist)&&(o.twist=0),isUndefined_default(o.tangentialPressure)&&(o.tangentialPressure=0),isUndefined_default(o.layerX)&&(o.layerX=o.offsetX=o.clientX),isUndefined_default(o.layerY)&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=i.type,n.push(o)}else!this.globalObj.supportsMouseEvents||i instanceof MouseEvent&&!(this.supportsPointerEvents&&i instanceof PointerEvent)?(isUndefined_default((r=i).isPrimary)&&(r.isPrimary=!0),isUndefined_default(r.width)&&(r.width=1),isUndefined_default(r.height)&&(r.height=1),isUndefined_default(r.tiltX)&&(r.tiltX=0),isUndefined_default(r.tiltY)&&(r.tiltY=0),isUndefined_default(r.pointerType)&&(r.pointerType=\\\"mouse\\\"),isUndefined_default(r.pointerId)&&(r.pointerId=1),isUndefined_default(r.pressure)&&(r.pressure=.5),isUndefined_default(r.twist)&&(r.twist=0),isUndefined_default(r.tangentialPressure)&&(r.tangentialPressure=0),r.isNormalized=!0,n.push(r)):n.push(i);return n}normalizeWheelEvent(e){var t=this.rootWheelEvent,{x:i,y:r}=(this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,this.mapToCanvasPoint(e)),{x:i,y:r}=(t.canvas.x=i,t.canvas.y=r,t.global.x=i,t.global.y=r,t.offset.x=i,t.offset.y=r,this.mapToViewportPoint(t));return t.viewport.x=i,t.viewport.y=r,t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);var{x:i,y:r}=this.mapToCanvasPoint(t),{x:i,y:r}=(e.canvas.x=i,e.canvas.y=r,e.global.x=i,e.global.y=r,e.offset.x=i,e.offset.y=r,this.mapToViewportPoint(e));return e.viewport.x=i,e.viewport.y=r,e.isTrusted=t.isTrusted,\\\"pointerleave\\\"===e.type&&(e.type=\\\"pointerout\\\"),e.type.startsWith(\\\"mouse\\\")&&(e.type=e.type.replace(\\\"mouse\\\",\\\"pointer\\\")),e.type.startsWith(\\\"touch\\\")&&(e.type=TOUCH_TO_POINTER[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=clock.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null}isEventOutsideOfTargetViewPort(e){var t,i,r;return!!this.isEventOutsideOfTargetElement(e)||!(!this.domElement.getViewBox||(t=this.mapToViewportPoint(this.mapToCanvasPoint(e)),i=(r=this.domElement.getViewBox()).width(),r=r.height(),t.x<i&&t.y<r&&0<t.x&&0<t.y))}isEventOutsideOfTargetElement(e){let t=e.target;return(t=e.composedPath&&0<e.composedPath().length?e.composedPath()[0]:t)!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}},ManualTickHandler=(init_esbuild_inject(),class IL{constructor(){this.time=0}static Avaliable(){return!0}avaliable(){return IL.Avaliable()}tick(e,t){this.time=Math.max(0,e+this.time),t(this,{once:!0})}tickTo(e,t){this.time=Math.max(0,e),t(this,{once:!0})}release(){0<this.timerId&&(this.timerId=-1)}getTime(){return this.time}}),TimeOutTickHandler=class NL{static Avaliable(){return!0}avaliable(){return NL.Avaliable()}tick(e,t){this.timerId=setTimeout(()=>{t(this)},e)}release(){0<this.timerId&&(clearTimeout(this.timerId),this.timerId=-1)}getTime(){return Date.now()}},RAFTickHandler=class QL{static Avaliable(){return!!application.global.getRequestAnimationFrame()}avaliable(){return QL.Avaliable()}tick(e,t){application.global.getRequestAnimationFrame()(()=>{this.released||t(this)})}release(){this.released=!0}getTime(){return Date.now()}},DefaultTicker=(!function(e){e[e.INITIAL=0]=\\\"INITIAL\\\",e[e.RUNNING=1]=\\\"RUNNING\\\",e[e.PAUSE=2]=\\\"PAUSE\\\"}(STATUS=STATUS||{}),class{set mode(e){this._mode!==e&&(this._mode=e,this.setupTickHandler())}get mode(){return this._mode}constructor(e=[]){this.handleTick=(e,t)=>{var{once:i=!1}=null!=t?t:{};this.ifCanStop()?this.stop():(this._handlerTick(e),i||e.tick(this.interval,this.handleTick))},this._handlerTick=e=>{var t=this.tickerHandler.getTime();let i=0;0<=this.lastFrameTime&&(i=t-this.lastFrameTime),this.lastFrameTime=t,this.status===STATUS.RUNNING&&(this.tickCounts++,this.timelines.forEach(e=>{e.tick(i)}))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.timelines=e,this.autoStop=!0}init(){this.interval=NaN,this.status=STATUS.INITIAL,application.global.hooks.onSetEnv.tap(\\\"default-ticker\\\",()=>{this.initHandler()}),application.global.env&&this.initHandler()}addTimeline(e){this.timelines.push(e)}remTimeline(t){this.timelines=this.timelines.filter(e=>e!==t)}initHandler(){if(!this._mode){var t=[{mode:\\\"raf\\\",cons:RAFTickHandler},{mode:\\\"timeout\\\",cons:TimeOutTickHandler},{mode:\\\"manual\\\",cons:ManualTickHandler}];for(let e=0;e<t.length;e++)if(t[e].cons.Avaliable()){this.mode=t[e].mode;break}}return null}setupTickHandler(){let e;switch(this._mode){case\\\"raf\\\":e=new RAFTickHandler;break;case\\\"timeout\\\":e=new TimeOutTickHandler;break;case\\\"manual\\\":e=new ManualTickHandler;break;default:Logger.getInstance().warn(\\\"非法的计时器模式\\\"),e=new RAFTickHandler}return!!e.avaliable()&&(this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=e,!0)}setInterval(e){this.interval=e}getInterval(){return this.interval}setFPS(e){this.setInterval(1e3/e)}getFPS(){return 1e3/this.interval}tick(e){this.tickerHandler.tick(e,e=>{this.handleTick(e,{once:!0})})}tickTo(e){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(e,e=>{this.handleTick(e,{once:!0})})}pause(){return this.status!==STATUS.INITIAL&&(this.status=STATUS.PAUSE,!0)}resume(){return this.status!==STATUS.INITIAL&&(this.status=STATUS.RUNNING,!0)}ifCanStop(){if(this.autoStop){if(!this.timelines.length)return!0;if(0===this.timelines.reduce((e,t)=>e+t.animateCount,0))return!0}return!1}start(e=!1){if(this.status===STATUS.RUNNING)return!1;if(!this.tickerHandler)return!1;if(!e){if(this.status===STATUS.PAUSE)return!1;if(!this.timelines.length)return!1;if(0===this.timelines.reduce((e,t)=>e+t.animateCount,0))return!1}return this.status=STATUS.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0}stop(){this.status=STATUS.INITIAL,this.setupTickHandler(),this.lastFrameTime=-1}}),Easing=(init_esbuild_inject(),init_esbuild_inject(),class sM{constructor(){}static linear(e){return e}static none(){return this.linear}static get(t){return t<-1?t=-1:1<t&&(t=1),function(e){return 0===t?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}}static getPowIn(t){return function(e){return Math.pow(e,t)}}static getPowOut(t){return function(e){return 1-Math.pow(1-e,t)}}static getPowInOut(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}static getBackIn(t){return function(e){return e*e*((t+1)*e-t)}}static getBackOut(t){return function(e){return--e*e*((t+1)*e+t)+1}}static getBackInOut(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}static sineIn(e){return 1-Math.cos(e*Math.PI/2)}static sineOut(e){return Math.sin(e*Math.PI/2)}static sineInOut(e){return-(Math.cos(Math.PI*e)-1)/2}static expoIn(e){return 0===e?0:Math.pow(2,10*e-10)}static expoOut(e){return 1===e?1:1-Math.pow(2,-10*e)}static expoInOut(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}static circIn(e){return-(Math.sqrt(1-e*e)-1)}static circOut(e){return Math.sqrt(1- --e*e)}static circInOut(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}static bounceOut(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}static bounceIn(e){return 1-sM.bounceOut(1-e)}static bounceInOut(e){return e<.5?.5*sM.bounceIn(2*e):.5*sM.bounceOut(2*e-1)+.5}static getElasticIn(i,r){return function(e){var t;return 0===e||1===e?e:(t=r/pi2*Math.asin(1/i),-i*Math.pow(2,10*--e)*Math.sin((e-t)*pi2/r))}}static getElasticOut(i,r){return function(e){var t;return 0===e||1===e?e:(t=r/pi2*Math.asin(1/i),i*Math.pow(2,-10*e)*Math.sin((e-t)*pi2/r)+1)}}static getElasticInOut(i,r){return function(e){var t=r/pi2*Math.asin(1/i);return(e*=2)<1?i*Math.pow(2,10*--e)*Math.sin((e-t)*pi2/r)*-.5:i*Math.pow(2,-10*--e)*Math.sin((e-t)*pi2/r)*.5+1}}}),DefaultTimeline=(Easing.quadIn=Easing.getPowIn(2),Easing.quadOut=Easing.getPowOut(2),Easing.quadInOut=Easing.getPowInOut(2),Easing.cubicIn=Easing.getPowIn(3),Easing.cubicOut=Easing.getPowOut(3),Easing.cubicInOut=Easing.getPowInOut(3),Easing.quartIn=Easing.getPowIn(4),Easing.quartOut=Easing.getPowOut(4),Easing.quartInOut=Easing.getPowInOut(4),Easing.quintIn=Easing.getPowIn(5),Easing.quintOut=Easing.getPowOut(5),Easing.quintInOut=Easing.getPowInOut(5),Easing.backIn=Easing.getBackIn(1.7),Easing.backOut=Easing.getBackOut(1.7),Easing.backInOut=Easing.getBackInOut(1.7),Easing.elasticIn=Easing.getElasticIn(1,.3),Easing.elasticOut=Easing.getElasticOut(1,.3),Easing.elasticInOut=Easing.getElasticInOut(1,.3*1.5),init_esbuild_inject(),class{constructor(){this.id=Generator.GenAutoIncrementId(),this.animateHead=null,this.animateTail=null,this.animateCount=0,this.paused=!1}addAnimate(e){this.animateTail?((this.animateTail.nextAnimate=e).prevAnimate=this.animateTail,(this.animateTail=e).nextAnimate=null):(this.animateHead=e,this.animateTail=e),this.animateCount++}pause(){this.paused=!0}resume(){this.paused=!1}tick(t){if(!this.paused){let e=this.animateHead;for(this.animateCount=0;e;)e.status===AnimateStatus.END?this.removeAnimate(e):e.status===AnimateStatus.RUNNING||e.status===AnimateStatus.INITIAL?(this.animateCount++,e.advance(t)):e.status===AnimateStatus.PAUSED&&this.animateCount++,e=e.nextAnimate}}clear(){let e=this.animateHead;for(;e;)e.release(),e=e.nextAnimate;this.animateHead=null,this.animateTail=null,this.animateCount=0}removeAnimate(e,t=!0){e._onRemove&&e._onRemove.forEach(e=>e()),e===this.animateHead?(this.animateHead=e.nextAnimate,e===this.animateTail?this.animateTail=null:this.animateHead.prevAnimate=null):e===this.animateTail?(this.animateTail=e.prevAnimate,this.animateTail.nextAnimate=null):(e.prevAnimate.nextAnimate=e.nextAnimate,e.nextAnimate.prevAnimate=e.prevAnimate),t&&e.release()}}),defaultTimeline=new DefaultTimeline,ACustomAnimate=class{constructor(e,t,i,r,n){this.from=e,this.to=t,this.duration=i,this.easing=r,this.params=n,this.updateCount=0}bind(e,t){this.target=e,this.subAnimate=t,this.onBind()}onBind(){}onFirstRun(){}onStart(){}onEnd(){}getEndProps(){}getFromProps(){return this.from}getMergedEndProps(){var e,t=this.getEndProps();return t?this._endProps===t?this._mergedEndProps:(this._endProps=t,void(this._mergedEndProps=Object.assign({},null!=(e=this.step.prev.getLastProps())?e:{},t))):this.step.prev?this.step.prev.getLastProps():t}update(e,t,i){if(0===this.updateCount){this.onFirstRun();const r=this.step.getLastProps();Object.keys(r).forEach(e=>{this.subAnimate.animate.validAttr(e)&&(i[e]=r[e])})}this.updateCount+=1,this.onUpdate(e,t,i),e&&this.onEnd()}},CbAnimate=class extends ACustomAnimate{constructor(e){super(null,null,0,\\\"linear\\\"),this.cb=e}onUpdate(e,t,i){}onStart(){this.cb()}},Animate=class DN{constructor(e=Generator.GenAutoIncrementId(),t=defaultTimeline){this.id=e,this.timeline=t,this.status=AnimateStatus.INITIAL,this.tailAnimate=new SubAnimate(this),this.subAnimates=[this.tailAnimate],this.timeScale=1,this.rawPosition=-1,this._startTime=0,this._duringTime=0,this.timeline.addAnimate(this)}setTimeline(e){e!==this.timeline&&(this.timeline.removeAnimate(this,!1),e.addAnimate(this))}getStartTime(){return this._startTime}getDuration(){return this.subAnimates.reduce((e,t)=>e+t.totalDuration,0)}after(e){var t=e.getDuration();return this._startTime=t,this}afterAll(e){let t=-1/0;return e.forEach(e=>{t=max(e.getDuration(),t)}),this._startTime=t,this}parallel(e){return this._startTime=e.getStartTime(),this}static AddInterpolate(e,t){DN.interpolateMap.set(e,t)}play(e){var t;return this.tailAnimate.play(e),this.target&&(t=this.target.stage)&&t.renderNextFrame(),1===this.subAnimates.length&&this.tailAnimate.duration===e.duration&&this.trySetAttribute(e.getFromProps(),e.mode),this}trySetAttribute(e,t=DN.mode){e&&t&AnimateMode.SET_ATTR_IMMEDIATELY&&this.target.setAttributes&&this.target.setAttributes(e,!1,{type:AttributeUpdateType.ANIMATE_PLAY})}runCb(e){const t=new CbAnimate(()=>{e(this,t.step.prev)});return this.tailAnimate.play(t),this}customInterpolate(e,t,i,r,n,o){var a=DN.interpolateMap.get(e)||DN.interpolateMap.get(\\\"\\\");return!!a&&a(e,t,i,r,n,o)}pause(){this.status===AnimateStatus.RUNNING&&(this.status=AnimateStatus.PAUSED)}resume(){this.status===AnimateStatus.PAUSED&&(this.status=AnimateStatus.RUNNING)}to(e,t,i,r){var n;return this.tailAnimate.to(e,t,i,r),this.target&&(n=this.target.stage)&&n.renderNextFrame(),this}from(e,t,i,r){var n;return this.tailAnimate.from(e,t,i,r),this.target&&(n=this.target.stage)&&n.renderNextFrame(),this}wait(e){var t;return this.tailAnimate.wait(e),this.target&&(t=this.target.stage)&&t.renderNextFrame(),this}startAt(e){var t;return this.tailAnimate.startAt(e),this.target&&(t=this.target.stage)&&t.renderNextFrame(),this}loop(e){var t;return this.tailAnimate.loop=e,this.target&&(t=this.target.stage)&&t.renderNextFrame(),this}reversed(e){var t;return this.tailAnimate.reversed=e,this.target&&(t=this.target.stage)&&t.renderNextFrame(),this}bounce(e){var t;return this.tailAnimate.bounce=e,this.target&&(t=this.target.stage)&&t.renderNextFrame(),this}subAnimate(){var e=new SubAnimate(this,this.tailAnimate);return this.tailAnimate=e,this.subAnimates.push(e),e.bind(this.target),this}getStartProps(){return this.subAnimates[0].getStartProps()}getEndProps(){return this.tailAnimate.getEndProps()}depreventAttr(e){this._preventAttrs&&this._preventAttrs[\\\"delete\\\"](e)}preventAttr(e){this._preventAttrs||(this._preventAttrs=new Set),this._preventAttrs.add(e)}preventAttrs(e){e.forEach(e=>this.preventAttr(e))}validAttr(e){return!this._preventAttrs||!this._preventAttrs.has(e)}bind(t){return this.target=t,this.target.onAnimateBind&&this.target.onAnimateBind(this),this.subAnimates.forEach(e=>{e.bind(t)}),this}advance(e){if(this._duringTime<this._startTime){if(this._duringTime+e*this.timeScale<this._startTime)return void(this._duringTime+=e*this.timeScale);e=this._duringTime+e*this.timeScale-this._startTime,this._duringTime=this._startTime}this.status===AnimateStatus.INITIAL&&(this.status=AnimateStatus.RUNNING,this._onStart)&&this._onStart.forEach(e=>e()),this.setPosition(this.rawPosition+e*this.timeScale)&&this.status===AnimateStatus.RUNNING&&(this.status=AnimateStatus.END,this._onEnd)&&this._onEnd.forEach(e=>e())}setPosition(t){let i,r=0;var e=this.rawPosition,n=this.subAnimates.reduce((e,t)=>e+t.totalDuration,0),o=n<=(t=t<0?0:t);if((t=o?n:t)!==e){for(let e=0;e<this.subAnimates.length&&(i=this.subAnimates[e],!(r+i.totalDuration>=t));e++)r+=i.totalDuration,i=void 0;this.rawPosition=t,i.setPosition(t-r)}return o}onStart(e){this._onStart||(this._onStart=[]),this._onStart.push(e)}onEnd(e){this._onEnd||(this._onEnd=[]),this._onEnd.push(e)}onRemove(e){this._onRemove||(this._onRemove=[]),this._onRemove.push(e)}onFrame(e){this._onFrame||(this._onFrame=[]),this._onFrame.push(e)}release(){this.status=AnimateStatus.END}stop(e){e||this.target.onStop(),\\\"start\\\"===e?this.target.onStop(this.getStartProps()):\\\"end\\\"===e?this.target.onStop(this.getEndProps()):this.target.onStop(e),this.release()}},SubAnimate=(Animate.mode=AnimateMode.NORMAL,Animate.interpolateMap=new Map,class{get totalDuration(){return this.calcAttr(),this._totalDuration+this._startAt}constructor(e,t){this.rawPosition=-1,this.position=0,this.loop=0,this.duration=0,this.animate=e,this.stepHead=new Step2(0,0,t?Object.assign({},t.stepTail.props):{}),this.stepTail=this.stepHead,this.dirty=!0,this._startAt=0}calcAttr(){this.dirty&&(this._totalDuration=this.duration*(this.loop+1))}bind(e){return this.target=e,this}play(e){let t=e.duration;(null==t||t<0)&&(t=0);var i=e.easing,i=\\\"string\\\"==typeof i?Easing[i]:i,i=this._addStep(t,null,i);return i.type=AnimateStepType.customAnimate,this._appendProps(e.getEndProps(),i,!1),this._appendCustomAnimate(e,i),this}to(e,t,i,r){const n=\\\"string\\\"==typeof i?Easing[i]:i,o=this._addStep(t=null==t||t<0?0:t,null,n);return o.type=AnimateStepType.to,this._appendProps(e,o,!!r&&r.tempProps),o.propKeys||(o.propKeys=Object.keys(o.props)),r&&r.noPreventAttrs||this.target.animates.forEach(e=>{e.id!==this.animate.id&&e.preventAttrs(o.propKeys)}),this}from(e,t,i,r){this.to(e,0,i,r);const n={};this.stepTail.propKeys||(this.stepTail.propKeys=Object.keys(this.stepTail.props)),this.stepTail.propKeys.forEach(e=>{n[e]=this.getLastPropByName(e,this.stepTail)}),this.to(n,t,i,r),this.stepTail.type=AnimateStepType.from}startAt(e){return this._startAt=e=e<0?0:e,this}getStartProps(){var e;return null==(e=this.stepHead)?void 0:e.props}getEndProps(){return this.stepTail.props}getLastStep(){return this._lastStep}wait(e){var t;return 0<e&&((t=this._addStep(+e,null)).type=AnimateStepType.wait,t.prev.customAnimate?t.props=t.prev.customAnimate.getEndProps():t.props=t.prev.props,this.target.onAddStep)&&this.target.onAddStep(t),this}_addStep(e,t,i){var r=new Step2(this.duration,e,t,i);return this.duration+=e,this.stepTail.append(r),this.stepTail=r}_appendProps(e,t,i){t.props=i?e:Object.assign({},e);let r=t.prev;const n=t.props;for(t.propKeys||(t.propKeys=Object.keys(t.props)),t.propKeys.forEach(e=>{void 0===t.props[e]&&(t.props[e]=this.target.getDefaultAttribute(e))});r.prev;)r.props&&(r.propKeys||(r.propKeys=Object.keys(r.props)),r.propKeys.forEach(e=>{void 0===n[e]&&(n[e]=r.props[e])})),t.propKeys=Object.keys(t.props),r=r.prev;const o=this.stepHead.props;t.propKeys||(t.propKeys=Object.keys(n)),t.propKeys.forEach(e=>{var t;void 0===o[e]&&(t=this.animate.getStartProps(),o[e]=t[e]=this.target.getComputedAttribute(e))}),this.target.onAddStep&&this.target.onAddStep(t)}_appendCustomAnimate(e,t){(t.customAnimate=e).step=t,e.bind(this.target,this)}setPosition(e){var t=this.duration,i=this.loop,r=this.rawPosition;let n,o,a=!1;var l=null!=(l=this._startAt)?l:0;return(e=e<0?0:e)<l?(this.rawPosition=e,!1):(e-=l,t<=0?a=!0:(n=Math.floor(e/t),o=e-n*t,(a=i*t+t<=e)&&(o=t,n=i,e=o*n+t),e!==r&&((i=!this.reversed!=!(this.bounce&&n%2))&&(o=t-o),this._deltaPosition=o-this.position,this.position=o,this.rawPosition=e+l,this.updatePosition(a,i))),a)}updatePosition(r,n){if(this.stepHead){let i=this.stepHead.next;var o=this.position,a=this.duration;if(this.target&&i){let e=i.next;for(;e&&e.position<=o;)e=(i=e).next;let t=r?0===a?1:o/a:(o-i.position)/i.duration;i.easing&&(t=i.easing(t)),this.tryCallCustomAnimateLifeCycle(i,this._lastStep||(n?this.stepTail:this.stepHead),n),this.updateTarget(i,t,r),this._lastStep=i,this.animate._onFrame&&this.animate._onFrame.forEach(e=>e(i,t))}}}tryCallCustomAnimateLifeCycle(t,i,e){if(t!==i){if(e){let e=i.prev;for(;e&&e!==t;)e.customAnimate&&(e.customAnimate.onStart&&e.customAnimate.onStart(),e.customAnimate.onEnd)&&e.customAnimate.onEnd(),e=t.prev}else{let e=i.next;for(;e&&e!==t;)e.customAnimate&&(e.customAnimate.onStart&&e.customAnimate.onStart(),e.customAnimate.onEnd)&&e.customAnimate.onEnd(),e=e.next}i&&i.customAnimate&&i.customAnimate.onEnd&&i.customAnimate.onEnd(),t&&t.customAnimate&&t.customAnimate.onStart&&t.customAnimate.onStart()}}getLastPropByName(e,t){let i=t.prev;for(;i;){if(i.props&&void 0!==i.props[e])return i.props[e];if(i.customAnimate){var r=i.customAnimate.getEndProps()[e];if(void 0!==r)return r}i=i.prev}return Logger.getInstance().warn(\\\"未知错误，step中找不到属性\\\"),t.props[e]}updateTarget(e,t,i){null==e.props&&null==e.customAnimate||this.target.onStep(this,this.animate,e,t,i)}}),Step2=class{constructor(e,t,i,r){this.duration=t,this.position=e,this.props=i,this.easing=r}append(e){e.prev=this,e.next=this.next,this.next=e}getLastProps(){let e=this.prev;for(;e;){if(e.props)return e.props;if(e.customAnimate)return e.customAnimate.getMergedEndProps();e=e.prev}return null}},DefaultStateAnimateConfig=(init_esbuild_inject(),{duration:200,easing:\\\"cubicOut\\\"}),_strokeVec4=(init_esbuild_inject(),!function(e){e[e.Top=1]=\\\"Top\\\",e[e.Right=2]=\\\"Right\\\",e[e.Bottom=4]=\\\"Bottom\\\",e[e.Left=8]=\\\"Left\\\",e[e.ALL=15]=\\\"ALL\\\"}(Edge=Edge||{}),[!1,!1,!1,!1]),parseStroke=t=>{var i;let r=!0;if(isBoolean_default(t,!0)){for(let e=0;e<4;e++)_strokeVec4[e]=t,r=r&&!(null!=(i=_strokeVec4[e])&&!i);r=t}else if(Array.isArray(t))for(let e=0;e<4;e++)_strokeVec4[e]=!!t[e],r=r&&!!_strokeVec4[e];else _strokeVec4[0]=!1,_strokeVec4[1]=!1,_strokeVec4[2]=!1,_strokeVec4[3]=!1;return{isFullStroke:r,stroke:_strokeVec4}},_paddingVec4=[0,0,0,0],parsePadding=e=>e?isArray_default(e)?0===e.length?0:1===e.length?e[0]:2===e.length?(_paddingVec4[0]=e[0],_paddingVec4[2]=e[0],_paddingVec4[1]=e[1],_paddingVec4[3]=e[1],_paddingVec4):e:e:0,_coords=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],indexList=[1,2,3,0,1,2,3,0];function circleBounds(e,t,i,r){for(;pi2<=e;)e-=pi2;for(;e<0;)e+=pi2;for(;t<e;)t+=pi2;_coords[0].x=i,_coords[1].y=i,_coords[2].x=-i,_coords[3].y=-i;var n=Math.ceil(e/halfPi)%4,o=Math.ceil(t/halfPi)%4;if(r.add(cos(e)*i,sin(e)*i),r.add(cos(t)*i,sin(t)*i),n!=o||pi<t-e){let e=!1;for(let t=0;t<indexList.length;t++)if(e||n!==indexList[t]){if(e&&o===indexList[t])break;e&&(a=_coords[indexList[t]],r.add(a.x,a.y))}else{e=!0;var a=_coords[n];r.add(a.x,a.y)}}}function pointInterpolation(e,t,i){var{x:r,y:n}=pointAt(e.x,e.y,t.x,t.y,i),{x:o,y:a}=pointAt(e.x1,e.y1,t.x1,t.y1,i),r=new Point(r,n,o,a);return r.defined=t.defined,r}function pointsInterpolation(t,i,r){if(!t||!i)return[];Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);let n=[];if(t.length>i.length){n=i.map(e=>{var t=new Point(e.x,e.y,e.x1,e.y1);return t.defined=e.defined,t});for(let e=0;e<i.length;e++)n[e]=pointInterpolation(t[e],i[e],r)}else{n=i.map(e=>{var t=new Point(e.x,e.y,e.x1,e.y1);return t.defined=e.defined,t});for(let e=0;e<t.length;e++)n[e]=pointInterpolation(t[e],i[e],r)}return n}function getAttributeFromDefaultAttrList(i,r){if(isArray_default(i)){let e;for(let t=0;t<i.length&&void 0===e;t++)e=i[t][r];return e}return i[r]}var ColorType,RafBasedSTO=class bR{constructor(){this.durations=[],this.timeout=bR.TimeOut,this.lastDate=0,this.durationsListThreshold=30}call(e){return this.lastDate=Date.now(),setTimeout(()=>{this.appendDuration(Date.now()-this.lastDate),e(0)},this.timeout,!0)}clear(e){clearTimeout(e)}appendDuration(e){this.durations.push(e),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce((e,t)=>e+t,0)/this.durations.length,1e3/60),1e3/30)}},rafBasedSto=(RafBasedSTO.TimeOut=1e3/60,new RafBasedSTO),calculateLineHeight=(e,t)=>isString_default(e)&&\\\"%\\\"===e[e.length-1]?t*(Number.parseFloat(e.substring(0,e.length-1))/100):e,normalizeRectAttributes=(init_esbuild_inject(),e=>{if(!e)return{x:0,y:0,width:0,height:0};let t=isNil_default(e.width)?e.x1-e.x:e.width,i=isNil_default(e.height)?e.y1-e.y:e.height,r=0,n=0;return t<0?t=-(r=t):Number.isNaN(t)&&(t=0),i<0?i=-(n=i):Number.isNaN(i)&&(i=0),{x:r,y:n,width:t,height:i}}),ColorStore=(init_esbuild_inject(),init_esbuild_inject(),!function(e){e[e.Color255=0]=\\\"Color255\\\",e[e.Color1=1]=\\\"Color1\\\"}(ColorType=ColorType||{}),class pR{static Get(e,t=ColorType.Color1,i=[0,0,0,1]){var r,n;return t===ColorType.Color1?(r=pR.store1[e])?(i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3]):(r=Color.parseColorString(e))&&(n=[r.r/255,r.g/255,r.b/255,r.opacity],pR.store1[e]=n,pR.store255[e]=[r.r,r.g,r.b,r.opacity],i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3]):(r=pR.store255[e])?(i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3]):(n=Color.parseColorString(e))&&(pR.store1[e]=[n.r/255,n.g/255,n.b/255,n.opacity],pR.store255[e]=[n.r,n.g,n.b,n.opacity],i[0]=n.r,i[1]=n.g,i[2]=n.b,i[3]=n.opacity),i}static Set(e,t,i){t===ColorType.Color1?pR.store1[e]||(pR.store1[e]=i,pR.store255[e]=[Math.floor(255*i[0]),Math.floor(255*i[1]),Math.floor(255*i[2]),Math.floor(255*i[3])]):pR.store255[e]||(pR.store255[e]=i,pR.store1[e]=[i[0]/255,i[1]/255,i[2]/255,i[3]])}});function colorArrayToString(e,t=!1){return Array.isArray(e)?t?`rgb(${Math.round(e[0])},${Math.round(e[1])},${Math.round(e[2])},${e[3].toFixed(2)})`:`rgb(${Math.round(e[0])},${Math.round(e[1])},${Math.round(e[2])})`:e}function interpolateColor(e,t,i,r,n){if(!e||!t)return e&&colorArrayToString(e)||t&&colorArrayToString(t)||!1;let o,a,l=!1,s=!1;if(Array.isArray(e)?o=e:\\\"string\\\"==typeof e?o=ColorStore.Get(e,ColorType.Color255):l=!0,Array.isArray(t)?a=t:\\\"string\\\"==typeof t?a=ColorStore.Get(t,ColorType.Color255):s=!0,l!==s){const g=l?e:t,p=l?t:e,f=Object.assign(Object.assign({},g),{stops:g.stops.map(e=>Object.assign(Object.assign({},e),{color:colorArrayToString(p)}))});return l?interpolateColor(g,f,i,r,n):interpolateColor(f,g,i,r,n)}if(l){if(e.gradient===t.gradient){var h=e,d=t,u=h.stops,c=d.stops;if(u.length!==c.length)return!1;if(\\\"linear\\\"===h.gradient)return interpolateGradientLinearColor(h,d,i);if(\\\"radial\\\"===h.gradient)return interpolateGradientRadialColor(h,d,i);if(\\\"conical\\\"===h.gradient)return interpolateGradientConicalColor(h,d,i)}return!1}return n&&n(o,a),colorArrayToString(interpolatePureColorArray(o,a,i),r)}function interpolateGradientLinearColor(e,t,i){const r=e.stops,n=t.stops;return{gradient:\\\"linear\\\",x0:e.x0+(t.x0-e.x0)*i,x1:e.x1+(t.x1-e.x1)*i,y0:e.y0+(t.y0-e.y0)*i,y1:e.y1+(t.y1-e.y1)*i,stops:new Array(r.length).fill(0).map((e,t)=>({color:colorStringInterpolationToStr(r[t].color,n[t].color,i),offset:r[t].offset+(n[t].offset-r[t].offset)*i}))}}function interpolateGradientRadialColor(e,t,i){const r=e.stops,n=t.stops;return{gradient:\\\"radial\\\",x0:e.x0+(t.x0-e.x0)*i,x1:e.x1+(t.x1-e.x1)*i,y0:e.y0+(t.y0-e.y0)*i,y1:e.y1+(t.y1-e.y1)*i,r0:e.r0+(t.r0-e.r0)*i,r1:e.r1+(t.r1-e.r1)*i,stops:new Array(r.length).fill(0).map((e,t)=>({color:colorStringInterpolationToStr(r[t].color,n[t].color,i),offset:r[t].offset+(n[t].offset-r[t].offset)*i}))}}function interpolateGradientConicalColor(e,t,i){const r=e.stops,n=t.stops;return{gradient:\\\"conical\\\",startAngle:e.startAngle+(t.startAngle-e.startAngle)*i,endAngle:e.endAngle+(t.endAngle-e.endAngle)*i,x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i,stops:new Array(r.length).fill(0).map((e,t)=>({color:colorStringInterpolationToStr(r[t].color,n[t].color,i),offset:r[t].offset+(n[t].offset-r[t].offset)*i}))}}function interpolatePureColorArray(e,t,i){return[e[0]+(t[0]-e[0])*i,e[1]+(t[1]-e[1])*i,e[2]+(t[2]-e[2])*i,e[3]+(t[3]-e[3])*i]}ColorStore.store255={},ColorStore.store1={};var _fromColorRGB=[0,0,0,0],_toColorRGB=[0,0,0,0];function colorStringInterpolationToStr(e,t,i){return ColorStore.Get(e,ColorType.Color255,_fromColorRGB),ColorStore.Get(t,ColorType.Color255,_toColorRGB),`rgba(${Math.round(_fromColorRGB[0]+(_toColorRGB[0]-_fromColorRGB[0])*i)},${Math.round(_fromColorRGB[1]+(_toColorRGB[1]-_fromColorRGB[1])*i)},${Math.round(_fromColorRGB[2]+(_toColorRGB[2]-_fromColorRGB[2])*i)},${_fromColorRGB[3]+(_toColorRGB[3]-_fromColorRGB[3])*i})`}init_esbuild_inject();var ResourceLoader=class tS{static GetImage(e,t){var i,r=tS.cache.get(e);r?\\\"fail\\\"===r.loadState?application.global.getRequestAnimationFrame()(()=>{t.imageLoadFail(e)}):\\\"init\\\"===r.loadState||\\\"loading\\\"===r.loadState?null!=(i=r.waitingMark)&&i.push(t):t&&t.imageLoadSuccess(e,r.data):tS.loadImage(e,t)}static GetSvg(r,e){var t;let n=tS.cache.get(r);n?\\\"fail\\\"===n.loadState?application.global.getRequestAnimationFrame()(()=>{e.imageLoadFail(r)}):\\\"init\\\"===n.loadState||\\\"loading\\\"===n.loadState?null!=(t=n.waitingMark)&&t.push(e):e&&e.imageLoadSuccess(r,n.data):(n={type:\\\"image\\\",loadState:\\\"init\\\"},tS.cache.set(r,n),n.dataPromise=application.global.loadSvg(r),n.dataPromise?(n.waitingMark=[e],n.dataPromise.then(i=>{var e;n.loadState=null!=i&&i.data?\\\"success\\\":\\\"fail\\\",n.data=null==i?void 0:i.data,null!=(e=n.waitingMark)&&e.map((e,t)=>{null!=i&&i.data?(n.loadState=\\\"success\\\",n.data=i.data,e.imageLoadSuccess(r,i.data)):(n.loadState=\\\"fail\\\",e.imageLoadFail(r))})})):(n.loadState=\\\"fail\\\",e.imageLoadFail(r)))}static GetFile(e,t){let i=tS.cache.get(e);return i?\\\"init\\\"===i.loadState||\\\"fail\\\"===i.loadState?Promise.reject():\\\"loading\\\"===i.loadState?i.dataPromise.then(e=>e.data):Promise.resolve(i.data):(i={type:t,loadState:\\\"init\\\"},tS.cache.set(e,i),\\\"arrayBuffer\\\"===t?i.dataPromise=application.global.loadArrayBuffer(e):\\\"blob\\\"===t?i.dataPromise=application.global.loadBlob(e):\\\"json\\\"===t&&(i.dataPromise=application.global.loadJson(e)),i.dataPromise.then(e=>e.data))}static loading(){setTimeout(()=>{if(!tS.isLoading&&tS.toLoadAueue.length){tS.isLoading=!0;const e=tS.toLoadAueue.splice(0,10),o=[];e.forEach(e=>{const{url:r,marks:t}=e,n={type:\\\"image\\\",loadState:\\\"init\\\"};var i;tS.cache.set(r,n),n.dataPromise=application.global.loadImage(r),n.dataPromise?(n.waitingMark=t,i=n.dataPromise.then(i=>{var e;n.loadState=null!=i&&i.data?\\\"success\\\":\\\"fail\\\",n.data=null==i?void 0:i.data,null!=(e=n.waitingMark)&&e.map((e,t)=>{null!=i&&i.data?(n.loadState=\\\"success\\\",n.data=i.data,e.imageLoadSuccess(r,i.data)):(n.loadState=\\\"fail\\\",e.imageLoadFail(r))})}),o.push(i)):(n.loadState=\\\"fail\\\",t.forEach(e=>e.imageLoadFail(r)))}),Promise.all(o).then(()=>{tS.isLoading=!1,this.onLoadSuccessCb.forEach(e=>e()),tS.loading()})[\\\"catch\\\"](e=>{console.error(e),tS.isLoading=!1,this.onLoadSuccessCb.forEach(e=>e()),tS.loading()})}},0)}static loadImage(e,t){var i=getIndex(e,tS.toLoadAueue);-1!==i?tS.toLoadAueue[i].marks.push(t):tS.toLoadAueue.push({url:e,marks:[t]}),tS.loading()}static improveImageLoading(e){var t=getIndex(e,tS.toLoadAueue);-1!==t&&(t=tS.toLoadAueue.splice(t,1),tS.toLoadAueue.unshift(t[0]))}static onLoadSuccess(e){this.onLoadSuccessCb.push(e)}};function getIndex(e,t){for(let i=0;i<t.length;i++)if(t[i].url===e)return i;return-1}ResourceLoader.cache=new Map,ResourceLoader.isLoading=!1,ResourceLoader.toLoadAueue=[],ResourceLoader.onLoadSuccessCb=[];var tempMatrix=new Matrix,tempBounds=new AABBBounds,GRAPHIC_UPDATE_TAG_KEY=[\\\"lineWidth\\\",\\\"scaleX\\\",\\\"scaleY\\\",\\\"angle\\\",\\\"anchor\\\",\\\"visible\\\"],tempConstantXYKey=[\\\"x\\\",\\\"y\\\"],tempConstantScaleXYKey=[\\\"scaleX\\\",\\\"scaleY\\\"],tempConstantAngleKey=[\\\"angle\\\"],point3=new Point,NOWORK_ANIMATE_ATTR={strokeSeg:1,boundsPadding:2,pickMode:1,boundsMode:1,customPickShape:1,pickable:1,childrenPickable:1,visible:1,zIndex:1,layout:1,keepDirIn3d:1,globalZIndex:1,outerBorder:1,innerBorder:1,lineDash:1,lineCap:1,lineJoin:1,miterLimit:2,strokeBoundsBuffer:2,scaleCenter:1,anchor:1,anchor3d:1,postMatrix:1,backgroundMode:2,background:1,texture:1,cursor:1,html:1},Graphic=class iT extends Node{static mixin(e){var t=Object.keys(e);for(let r=0;r<t.length;++r){var i=t[r];Object.defineProperty(iT.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get AABBBounds(){return this.tryUpdateAABBBounds(\\\"imprecise\\\"===this.attribute.boundsMode)}get OBBBounds(){return this.tryUpdateOBBBounds()}get globalAABBBounds(){return this.tryUpdateGlobalAABBBounds()}get transMatrix(){return this.tryUpdateLocalTransMatrix(!0)}get globalTransMatrix(){return this.tryUpdateGlobalTransMatrix(!0)}constructor(e={}){var t;super(),this._AABBBounds=new AABBBounds,this._updateTag=UpdateTag.INIT,this.attribute=e,this.valid=this.isValid(),e.background&&this.loadImage(null!=(t=e.background.background)?t:e.background,!0)}setMode(e){\\\"3d\\\"===e?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}getOffsetXY(e,t=!1){var i,r,{dx:n=e.dx,dy:o=e.dy}=this.attribute;return t&&this.parent?(r=this.parent.attribute,point3.x=n+(null!=(i=r.scrollX)?i:0),point3.y=o+(null!=(i=r.scrollY)?i:0)):(point3.x=n,point3.y=o),point3}onAnimateBind(e){this._emitCustomEvent(\\\"animate-bind\\\",e)}tryUpdateAABBBounds(e){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;application.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);var t=this.doUpdateAABBBounds(e);return application.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),t}combindShadowAABBBounds(e){var t;this.shadowRoot&&(t=this.shadowRoot.AABBBounds.clone(),e.union(t))}tryUpdateGlobalAABBBounds(){var e=this.AABBBounds;return this._globalAABBBounds?this._globalAABBBounds.setValue(e.x1,e.y1,e.x2,e.y2):this._globalAABBBounds=e.clone(),this._globalAABBBounds.empty()||this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}tryUpdateGlobalTransMatrix(e=0){var t;return this._globalTransMatrix?this.parent&&(t=this.parent.globalTransMatrix,this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)):this._globalTransMatrix=(this.parent?this.parent.globalTransMatrix:this.transMatrix).clone(),this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!0}tryUpdateLocalTransMatrix(e=!0){return this._transMatrix||(this._transMatrix=new Matrix),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),e)&&this.clearUpdateLocalPositionTag(),this._transMatrix}shouldUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&UpdateTag.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&UpdateTag.UPDATE_BOUNDS)}shouldSelfChangeUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&UpdateTag.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&UpdateTag.UPDATE_BOUNDS)}shouldUpdateLocalMatrix(){return!!(this._updateTag&UpdateTag.UPDATE_LOCAL_MATRIX)}isValid(){var e,t=this.attribute;return Number.isFinite((null!=(e=t.x)?e:0)+(null!=(e=t.y)?e:0))}_validNumber(e){return null==e||Number.isFinite(e)}shouldUpdateShape(){return!!(this._updateTag&UpdateTag.UPDATE_SHAPE)}clearUpdateShapeTag(){this._updateTag&=UpdateTag.CLEAR_SHAPE}containsPoint(e,t,i,r){var n;return!!r&&(i===IContainPointMode.GLOBAL&&(n=new Point(e,t),this.parent&&this.parent.globalTransMatrix.transformPoint(n,n),e=n.x,t=n.y),r.containsPoint(this,{x:e,y:t}))}setAttributes(e,t=!1,i){(e=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,null,i)||e).background&&this.loadImage(e.background,!0),this._setAttributes(e,t,i)}_setAttributes(e,t=!1,i){var r=Object.keys(e);for(let o=0;o<r.length;o++){var n=r[o];this.attribute[n]=e[n]}this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!t&&!this.needUpdateTags(r)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)}setAttribute(e,t,i,r){var n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[e]:t},this.attribute,e,r);n?this._setAttributes(n,i,r):isNil_default(null==(n=this.normalAttrs)?void 0:n[e])?(this.attribute[e]=t,this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!i&&!this.needUpdateTag(e)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)):this.normalAttrs[e]=t,\\\"background\\\"===e&&this.loadImage(t,!0)}needUpdateTags(e,t=GRAPHIC_UPDATE_TAG_KEY){for(let r=0;r<t.length;r++){var i=t[r];if(-1!==e.indexOf(i))return!0}return!1}needUpdateTag(e,t=GRAPHIC_UPDATE_TAG_KEY){for(let i=0;i<t.length;i++)if(e===t[i])return!0;return!1}initAttributes(e){var t={type:AttributeUpdateType.INIT};e=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,null,t)||e,(this.attribute=e).background&&this.loadImage(e.background,!0),this._updateTag=UpdateTag.INIT,this.valid=this.isValid(),this.onAttributeUpdate(t)}translate(e,t){var i,r,n;return 0===e&&0===t||(i={type:AttributeUpdateType.TRANSLATE},(r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:e,y:t},this.attribute,tempConstantXYKey,i))&&(e=r.x,t=r.y,delete r.x,delete r.y,this._setAttributes(r)),(n=(r=this.attribute).postMatrix)?application.transformUtil.fromMatrix(n,n).translate(e,t):(r.x=(null!=(n=r.x)?n:DefaultTransform.x)+e,r.y=(null!=(n=r.y)?n:DefaultTransform.y)+t),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)),this}translateTo(e,t){var i,r,n=this.attribute;return n.x===e&&n.y===t||(i={type:AttributeUpdateType.TRANSLATE_TO},(r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:e,y:t},this.attribute,tempConstantXYKey,i))?this._setAttributes(r,!1,i):(n.x=e,n.y=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i))),this}scale(t,i,r){var e;if(1!==t||1!==i){var n={type:AttributeUpdateType.SCALE},o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:i,scaleCenter:r},this.attribute,tempConstantScaleXYKey,n),o=(o&&(t=o.scaleX,i=o.scaleY,delete o.scaleX,delete o.scaleY,this._setAttributes(o)),this.attribute);if(r){let e=this.attribute[\\\"postMatrix\\\"];e||(e=new Matrix,o.postMatrix=e),application.transformUtil.fromMatrix(e,e).scale(t,i,r)}else o.scaleX=(null!=(e=o.scaleX)?e:DefaultTransform.scaleX)*t,o.scaleY=(null!=(e=o.scaleY)?e:DefaultTransform.scaleY)*i;this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n)}return this}scaleTo(e,t){var i,r,n=this.attribute;return n.scaleX===e&&n.scaleY===t||(i={type:AttributeUpdateType.SCALE_TO},(r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:e,scaleY:t},this.attribute,tempConstantScaleXYKey,i))?this._setAttributes(r,!1,i):(n.scaleX=e,n.scaleY=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i))),this}rotate(t,i){if(0!==t){var e={type:AttributeUpdateType.ROTATE},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({angle:t,rotateCenter:i},this.attribute,tempConstantAngleKey,e),r=(r&&(delete r.angle,this._setAttributes(r,!1,e)),this.attribute);if(i){let e=this.attribute[\\\"postMatrix\\\"];e||(e=new Matrix,r.postMatrix=e),application.transformUtil.fromMatrix(e,e).rotate(t,i)}else r.angle=(null!=(r=r.angle)?r:DefaultTransform.angle)+t;this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(e)}return this}rotateTo(e){var t,i,r=this.attribute;return r.angle!==e&&(t={type:AttributeUpdateType.ROTATE_TO},(i=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,tempConstantAngleKey,t))?this._setAttributes(i,!1,t):(r.angle=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(t))),this}skewTo(e,t){return this}animate(e){this.animates||(this.animates=new Map);const t=new Animate(null==e?void 0:e.id,this.stage&&this.stage.getTimeline()).bind(this);var i,r,n,o;return e&&(({onStart:i,onFrame:r,onEnd:n,onRemove:o}=e),null!=i&&t.onStart(i),null!=r&&t.onFrame(r),null!=n&&t.onEnd(n),null!=o&&t.onRemove(o),t.interpolateFunc=e.interpolate),this.animates.set(t.id,t),t.onRemove(()=>{this.animates[\\\"delete\\\"](t.id)}),t}onAttributeUpdate(e){e&&e.skipUpdateCallback||(application.graphicService.onAttributeUpdate(this),this._emitCustomEvent(\\\"afterAttributeUpdate\\\",e))}update(e){e?(e.bounds&&this.tryUpdateAABBBounds(\\\"imprecise\\\"===this.attribute.boundsMode),e.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds(\\\"imprecise\\\"===this.attribute.boundsMode),this.tryUpdateLocalTransMatrix())}hasState(e){return!(!this.currentStates||!this.currentStates.length)&&(!!isNil_default(e)||this.currentStates.includes(e))}getState(e){var t;return null==(t=this.states)?void 0:t[e]}applyStateAttrs(i,e,t,r){var n;if(t){const a=Object.keys(i),l=this.getNoWorkAnimateAttr(),s={};let t;a.forEach(e=>{l[e]?(t=t||{})[e]=i[e]:s[e]=r&&void 0===i[e]?this.getDefaultAttribute(e):i[e]});var o=this.animate();o.stateNames=e,o.to(s,null!=(n=null==(n=this.stateAnimateConfig)?void 0:n.duration)?n:DefaultStateAnimateConfig.duration,null!=(n=null==(n=this.stateAnimateConfig)?void 0:n.easing)?n:DefaultStateAnimateConfig.easing),t&&this.setAttributes(t,!1,{type:AttributeUpdateType.STATE})}else this.stopStateAnimates(),this.setAttributes(i,!1,{type:AttributeUpdateType.STATE})}updateNormalAttrs(t){const i={};this.normalAttrs?(Object.keys(t).forEach(e=>{e in this.normalAttrs?(i[e]=this.normalAttrs[e],delete this.normalAttrs[e]):i[e]=this.getNormalAttribute(e)}),Object.keys(this.normalAttrs).forEach(e=>{t[e]=this.normalAttrs[e]})):Object.keys(t).forEach(e=>{i[e]=this.getNormalAttribute(e)}),this.normalAttrs=i}stopStateAnimates(t=\\\"end\\\"){this.animates&&this.animates.forEach(e=>{e.stateNames&&e.stop(t)})}getNormalAttribute(i){let r=this.attribute[i];return this.animates&&this.animates.forEach(e=>{var t;e.stateNames&&(t=e.getEndProps(),has_default(t,i))&&(r=t[i])}),r}clearStates(e){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,e,!0)):this.currentStates=[],this.normalAttrs=null}removeState(t,e){var i;0<=(this.currentStates?this.currentStates.indexOf(t):-1)&&(i=this.currentStates.filter(e=>e!==t),this.useStates(i,e))}toggleState(e,t){var i;this.hasState(e)?this.removeState(e,t):(this.currentStates?this.currentStates.indexOf(e):-1)<0&&((i=this.currentStates?this.currentStates.slice():[]).push(e),this.useStates(i,t))}addState(e,t,i){var r;this.currentStates&&this.currentStates.includes(e)&&(t||1===this.currentStates.length)||(r=t&&null!=(r=this.currentStates)&&r.length?this.currentStates.concat([e]):[e],this.useStates(r,i))}useStates(i,e){var t;if(i.length){if((null==(t=this.currentStates)?void 0:t.length)!==i.length||i.some((e,t)=>this.currentStates[t]!==e)){const r={};i.forEach(e=>{var t=this.stateProxy?this.stateProxy(e,i):null==(t=this.states)?void 0:t[e];t&&Object.assign(r,t)}),this.updateNormalAttrs(r),this.currentStates=i,this.applyStateAttrs(r,i,e)}}else this.clearStates(e)}addUpdateBoundTag(){this._updateTag|=UpdateTag.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}addUpdateShapeTag(){this._updateTag|=UpdateTag.UPDATE_SHAPE}addUpdateShapeAndBoundsTag(){this._updateTag|=UpdateTag.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}updateShapeAndBoundsTagSetted(){return(this._updateTag&UpdateTag.UPDATE_SHAPE_AND_BOUNDS)===UpdateTag.UPDATE_SHAPE_AND_BOUNDS}clearUpdateBoundTag(){this._updateTag&=UpdateTag.CLEAR_BOUNDS}addUpdatePositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=UpdateTag.UPDATE_GLOBAL_LOCAL_MATRIX}addUpdateGlobalPositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=UpdateTag.UPDATE_GLOBAL_MATRIX}clearUpdateLocalPositionTag(){this._updateTag&=UpdateTag.CLEAR_LOCAL_MATRIX}clearUpdateGlobalPositionTag(){this._updateTag&=UpdateTag.CLEAR_GLOBAL_MATRIX}addUpdateLayoutTag(){this._updateTag|=UpdateTag.UPDATE_LAYOUT}clearUpdateLayoutTag(){this._updateTag&=UpdateTag.CLEAR_LAYOUT}needUpdateLayout(){return!!(this._updateTag&UpdateTag.UPDATE_LAYOUT)}getAnchor(e,r){var t,i,n=[0,0],o=()=>{var e,t,i;return r.b||(({scaleX:e,scaleY:t,angle:i}=this.attribute),tempBounds.copy(this._AABBBounds),this.setAttributes({scaleX:1,scaleY:1,angle:0}),r.b=this.AABBBounds.clone(),this._AABBBounds.copy(tempBounds),this.setAttributes({scaleX:e,scaleY:t,angle:i})),r.b};return\\\"string\\\"==typeof e[0]?(i=parseFloat(e[0])/100,t=o(),n[0]=t.x1+(t.x2-t.x1)*i):n[0]=e[0],\\\"string\\\"==typeof e[1]?(t=parseFloat(e[1])/100,i=o(),n[1]=i.y1+(i.y2-i.y1)*t):n[1]=e[1],n}doUpdateLocalMatrix(){var{x:e=DefaultTransform.x,y:t=DefaultTransform.y,scaleX:i=DefaultTransform.scaleX,scaleY:r=DefaultTransform.scaleY,angle:n=DefaultTransform.angle,scaleCenter:o,anchor:a,postMatrix:l}=this.attribute;let s=[0,0];var h={},n=(a&&(s=this.getAnchor(a,h)),!o||1===i&&1===r?normalTransform(this._transMatrix,this._transMatrix.reset(),e,t,i,r,n,a&&s):((a=this._transMatrix).reset(),a.translate(s[0],s[1]),a.rotate(n),a.translate(-s[0],-s[1]),a.translate(e,t),s=this.getAnchor(o,h),application.transformUtil.fromMatrix(a,a).scale(i,r,{x:s[0],y:s[1]})),this.getOffsetXY(DefaultTransform));this._transMatrix.e+=n.x,this._transMatrix.f+=n.y,l&&(e=tempMatrix.setValue(l.a,l.b,l.c,l.d,l.e,l.f),t=this._transMatrix,e.multiply(t.a,t.b,t.c,t.d,t.e,t.f),t.setValue(e.a,e.b,e.c,e.d,e.e,e.f))}doUpdateGlobalMatrix(){var e,t;this.parent&&(this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f),({scrollX:e=0,scrollY:t=0}=this.parent.attribute),this._globalTransMatrix.translate(e,t))}setStage(e,t){if(this.stage!==e){if(this.stage=e,this.layer=t,this.setStageToShadowRoot(e,t),this.animates&&this.animates.size){const i=e.getTimeline();this.animates.forEach(e=>{e.setTimeline(i)})}this._onSetStage&&this._onSetStage(this,e,t),application.graphicService.onSetStage(this,e)}}setStageToShadowRoot(e,t){this.shadowRoot&&this.shadowRoot.setStage(e,t)}onAddStep(e){}onStop(e){e&&this.setAttributes(e,!1,{type:AttributeUpdateType.ANIMATE_END})}onStep(e,t,i,r,n){var o,a,l,s={};i.customAnimate?i.customAnimate.update(n,r,s):(o=i.props,a=i.parsedProps,l=i.propKeys,this.stepInterpolate(e,t,s,i,r,n,o,void 0,a,l)),this.setAttributes(s,!1,{type:AttributeUpdateType.ANIMATE_UPDATE,animationState:{ratio:r,end:n,step:i,isFirstFrameOfStep:e.getLastStep()!==i}}),this.stage&&this.stage.renderNextFrame()}stepInterpolate(r,n,o,a,l,e,s,h,d,t){t||(t=Object.keys(s),a.propKeys=t),e?a.propKeys.forEach(e=>{n.validAttr(e)&&(o[e]=s[e])}):t.forEach(e=>{var t,i;n.validAttr(e)&&(t=s[e],i=null!=(i=h&&h[e])?i:r.getLastPropByName(e,a),null==t||null==i?o[e]=t:n.interpolateFunc&&n.interpolateFunc(e,l,i,t,o)||n.customInterpolate(e,l,i,t,this,o)||this.defaultInterpolate(t,i,e,o,d,l)||this._interpolate(e,l,i,t,o))}),a.parsedProps=d}defaultInterpolate(e,t,i,r,n,o){var a;return Number.isFinite(e)?(r[i]=t+(e-t)*o,!0):\\\"fill\\\"===i?((a=interpolateColor(t,null!=(a=(n=n||{}).fillColorArray)?a:e,o,!1,(e,t)=>{n.fillColorArray=t}))&&(r[i]=a),!0):\\\"stroke\\\"===i?((a=interpolateColor(t,null!=(a=(n=n||{}).strokeColorArray)?a:e,o,!1,(e,t)=>{n.strokeColorArray=t}))&&(r[i]=a),!0):\\\"shadowColor\\\"===i&&((a=interpolateColor(t,null!=(a=(n=n||{}).shadowColorArray)?a:e,o,!0,(e,t)=>{n.shadowColorArray=t}))&&(r[i]=a),!0)}_interpolate(e,t,i,r,n){}getDefaultAttribute(e){return getTheme(this)[this.type][e]}getComputedAttribute(e){var t;return null!=(t=this.attribute[e])?t:this.getDefaultAttribute(e)}onSetStage(e,t=!1){this._onSetStage=e,t&&this.stage&&e(this,this.stage)}attachShadow(e){return e&&(e.shadowHost=this),this.shadowRoot=null!=e?e:application.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}detachShadow(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot=null)}toJson(){return{attribute:this.attribute,_uid:this._uid,type:this.type,name:this.name,children:this.children.map(e=>e.toJson())}}createPathProxy(e){return isString_default(e,!0)?this.pathProxy=(new CustomPath2D).fromString(e):this.pathProxy=new CustomPath2D,this.pathProxy}loadImage(e,t=!1){var i;!e||t&&backgroundNotImage(e)||(i=e,this.resources||(this.resources=new Map),this.resources.set(i,i={data:\\\"init\\\",state:null}),\\\"string\\\"==typeof e?(i.state=\\\"loading\\\",e.startsWith(\\\"<svg\\\")?(ResourceLoader.GetSvg(e,this),this.backgroundImg=this.backgroundImg||t):(isValidUrl_default(e)||e.includes(\\\"/\\\")||isBase64_default(e))&&(ResourceLoader.GetImage(e,this),this.backgroundImg=this.backgroundImg||t)):isObject_default(e)?(i.state=\\\"success\\\",i.data=e,this.backgroundImg=this.backgroundImg||t):i.state=\\\"fail\\\")}imageLoadSuccess(e,t,i){var r;this.resources&&(r=this.resources.get(e))&&(r.state=\\\"success\\\",r.data=t,i&&i(),this.addUpdateBoundTag(),this.stage)&&this.stage.renderNextFrame()}imageLoadFail(e,t){var i;this.resources&&(i=this.resources.get(e))&&(i.state=\\\"fail\\\",t)&&t()}_stopAnimates(e){e&&e.forEach(e=>{e.stop()})}stopAnimates(t=!1){this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&t&&this.forEachChildren(e=>{e.stopAnimates(t)})}release(){this.releaseStatus=\\\"released\\\",application.graphicService.onRelease(this)}_emitCustomEvent(e,t){var i,r;this._events&&e in this._events&&((r=new CustomEvent(e,t)).bubbles=!1,r.manager=null==(i=null==(i=this.stage)?void 0:i.eventSystem)?void 0:i.manager,this.dispatchEvent(r))}};function backgroundNotImage(e){return!(!e.fill&&!e.stroke)}Graphic.mixin(EventTarget2),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var nameStartChar=\\\":A-Za-z_\\\\\\\\u00C0-\\\\\\\\u00D6\\\\\\\\u00D8-\\\\\\\\u00F6\\\\\\\\u00F8-\\\\\\\\u02FF\\\\\\\\u0370-\\\\\\\\u037D\\\\\\\\u037F-\\\\\\\\u1FFF\\\\\\\\u200C-\\\\\\\\u200D\\\\\\\\u2070-\\\\\\\\u218F\\\\\\\\u2C00-\\\\\\\\u2FEF\\\\\\\\u3001-\\\\\\\\uD7FF\\\\\\\\uF900-\\\\\\\\uFDCF\\\\\\\\uFDF0-\\\\\\\\uFFFD\\\",nameChar=nameStartChar+\\\"\\\\\\\\-.\\\\\\\\d\\\\\\\\u00B7\\\\\\\\u0300-\\\\\\\\u036F\\\\\\\\u203F-\\\\\\\\u2040\\\";function getAllMatches(t,i){var r=[];let n=i.exec(t);for(;n;){var o=[],a=(o.startIndex=i.lastIndex-n[0].length,n.length);for(let e=0;e<a;e++)o.push(n[e]);r.push(o),n=i.exec(t)}return r}var XmlNode=class{constructor(e){this.tagname=e,this.child=[],this[\\\":@\\\"]={}}add(e,t){this.child.push({[e=\\\"__proto__\\\"===e?\\\"#__proto__\\\":e]:t})}addChild(e){\\\"__proto__\\\"===e.tagname&&(e.tagname=\\\"#__proto__\\\"),e[\\\":@\\\"]&&0<Object.keys(e[\\\":@\\\"]).length?this.child.push({[e.tagname]:e.child,\\\":@\\\":e[\\\":@\\\"]}):this.child.push({[e.tagname]:e.child})}};function findClosingIndex(e,t,i,r){var n=e.indexOf(t,i);if(-1===n)throw new Error(r);return n+t.length-1}function tagExpWithClosingIndex(t,e,i=\\\">\\\"){let r,n=\\\"\\\";for(let o=e;o<t.length;o++){let e=t[o];if(r)e===r&&(r=\\\"\\\");else if('\\\"'===e||\\\"'\\\"===e)r=e;else if(e===i[0]){if(!i[1])return{data:n,index:o};if(t[o+1]===i[1])return{data:n,index:o}}else\\\"\\\\t\\\"===e&&(e=\\\" \\\");n+=e}}function readTagExp(e,t,r,i=\\\">\\\"){var n=tagExpWithClosingIndex(e,t+1,i);if(n){let e=n.data;var o=n.index,a=e.search(/\\\\s/);let t=e,i=!0;-1!==a&&(t=e.substr(0,a).replace(/\\\\s\\\\s*$/,\\\"\\\"),e=e.substr(a+1));var l,a=t;return r&&-1!==(l=t.indexOf(\\\":\\\"))&&(t=t.substr(l+1),i=t!==n.data.substr(l+1)),{tagName:t,tagExp:e,closeIndex:o,attrExpPresent:i,rawTagName:a}}}var attrsRegx=new RegExp(`([^\\\\\\\\s=]+)\\\\\\\\s*(=\\\\\\\\s*(['\\\"])([\\\\\\\\s\\\\\\\\S]*?)\\\\\\\\3)?`,\\\"gm\\\"),OrderedObjParser=class{constructor(e){this.currentNode=null,this.options=e,this.tagsNodeStack=[],this.docTypeEntities={}}addChild(e,t,i){var r=t.tagname;\\\"string\\\"==typeof r&&(t.tagname=r),e.addChild(t)}buildAttributesMap(t,e,i){var r={};if(t){var n=getAllMatches(t,attrsRegx),o=n.length;for(let e=0;e<o;e++){var a=n[e][1],l=n[e][4];a&&(r[a]=void 0===l||(isNaN(l)?l:Number(l)))}return r}}parseXml(i){i=i.replace(/\\\\r\\\\n?/g,\\\"\\\\n\\\");var r=new XmlNode(\\\"!xml\\\");let n=r,o=\\\"\\\",a=\\\"\\\";for(let u=0;u<i.length;u++)if(\\\"<\\\"===i[u])if(\\\"/\\\"===i[u+1]){var l=findClosingIndex(i,\\\">\\\",u,\\\"Closing Tag is not closed.\\\"),s=a.lastIndexOf(\\\".\\\");a=a.substring(0,s),(n=this.tagsNodeStack.pop())&&n.child&&o&&n.child[n.child.length-1][\\\":@\\\"]&&(n.child[n.child.length-1][\\\":@\\\"].text=o),o=\\\"\\\",u=l}else if(\\\"?\\\"===i[u+1])u=readTagExp(i,u,!1,\\\"?>\\\").closeIndex+1;else if(\\\"!--\\\"===i.substr(u+1,3))u=findClosingIndex(i,\\\"--\\\\x3e\\\",u+4,\\\"Comment is not closed.\\\");else{s=readTagExp(i,u,!1);let e=s.tagName,t=s.tagExp;var h,l=s.attrExpPresent,d=s.closeIndex;e!==r.tagname&&(a+=a?\\\".\\\"+e:e),0<t.length&&t.lastIndexOf(\\\"/\\\")===t.length-1?(t=\\\"/\\\"===e[e.length-1]?(e=e.substr(0,e.length-1),a=a.substr(0,a.length-1),e):t.substr(0,t.length-1),h=new XmlNode(e),e!==t&&l&&(h[\\\":@\\\"]=this.buildAttributesMap(t,a,e)),this.addChild(n,h,a),a=a.substr(0,a.lastIndexOf(\\\".\\\"))):(h=new XmlNode(e),this.tagsNodeStack.push(n),e!==t&&l&&(h[\\\":@\\\"]=this.buildAttributesMap(t,a,e)),this.addChild(n,h,a),n=h),o=\\\"\\\",u=d}else o+=i[u];return r.child}};function prettify(e,t){return compress(e)}function compress(e,t){var i={};for(let l=0;l<e.length;l++){var r,n=e[l],o=propName(n),a=void 0===t?o:t+\\\".\\\"+o;void 0!==o&&n[o]&&(isLeafTag(r=compress(n[o],a)),n[\\\":@\\\"]&&assignAttributes(r,n[\\\":@\\\"],a),void 0!==i[o]&&i.hasOwnProperty(o)?(Array.isArray(i[o])||(i[o]=[i[o]]),i[o].push(r)):i[o]=r)}return i}function propName(e){var t=Object.keys(e);for(let r=0;r<t.length;r++){var i=t[r];if(\\\":@\\\"!==i)return i}}function assignAttributes(t,i,e){if(i){var r=Object.keys(i),n=r.length;for(let e=0;e<n;e++){var o=r[e];t[o]=i[o]}}}function isLeafTag(e){return 0===Object.keys(e).length}init_esbuild_inject();var XMLParser=class MZ{constructor(e){this.options=Object.assign({},MZ.defaultOptions,e)}valid(e){return e.startsWith(\\\"<\\\")}parse(e){return!!this.valid&&prettify(new OrderedObjParser(this.options).parseXml(e),this.options)}};function isSvg(e){return e.startsWith(\\\"<svg\\\")||e.startsWith(\\\"<?xml\\\")}function boundStroke(e,t,i,r=0){return e.expand(t+(r/2+(i?miterAdjustment(i,t):0))),e}function miterAdjustment(e,t){return e?t:0}XMLParser.defaultOptions={};var TextDirection,NUMBER_TYPE=0;function genNumberType(){return NUMBER_TYPE++}function verticalLayout(e){var t=[];let i=0,r=\\\"\\\";for(let n=0;n<e.length;n++)rotateText(e[n])?i?r+=e[n]:(i=1,r=e[n]):(i&&(t.push({text:r,direction:TextDirection.VERTICAL}),r=\\\"\\\",i=0),t.push({text:e[n],direction:TextDirection.HORIZONTAL}));return r&&t.push({text:r,direction:TextDirection.VERTICAL}),t}!function(e){e[e.HORIZONTAL=0]=\\\"HORIZONTAL\\\",e[e.VERTICAL=1]=\\\"VERTICAL\\\"}(TextDirection=TextDirection||{});var rotateCharList=[\\\"…\\\",\\\"（\\\",\\\"）\\\",\\\"—\\\",\\\"【\\\",\\\"】\\\",\\\"「\\\",\\\"」\\\",\\\"《\\\",\\\"》\\\"],rotateCharMap=new Map,noRotateCharList=(rotateCharList.forEach(e=>rotateCharMap.set(e,!0)),[\\\"\\\"]),noRotateCharMap=new Map;function rotateText(e){if(rotateCharMap.has(e))return!0;if(noRotateCharMap.has(e))return!1;let t=!1;return t=e.codePointAt(0)<256?!0:t}noRotateCharList.forEach(e=>noRotateCharMap.set(e,!0));var GroupUpdateAABBBoundsMode,ARC_NUMBER_TYPE=genNumberType(),ARC3D_NUMBER_TYPE=genNumberType(),AREA_NUMBER_TYPE=genNumberType(),CIRCLE_NUMBER_TYPE=genNumberType(),GLYPH_NUMBER_TYPE=genNumberType(),GROUP_NUMBER_TYPE=genNumberType(),IMAGE_NUMBER_TYPE=genNumberType(),LINE_NUMBER_TYPE=genNumberType(),PATH_NUMBER_TYPE=genNumberType(),POLYGON_NUMBER_TYPE=genNumberType(),PYRAMID3D_NUMBER_TYPE=genNumberType(),RECT_NUMBER_TYPE=genNumberType(),RECT3D_NUMBER_TYPE=genNumberType(),RICHTEXT_NUMBER_TYPE=genNumberType(),SYMBOL_NUMBER_TYPE=genNumberType(),TEXT_NUMBER_TYPE=genNumberType(),GraphicService=Symbol[\\\"for\\\"](\\\"GraphicService\\\"),GraphicCreator=Symbol[\\\"for\\\"](\\\"GraphicCreator\\\"),SVG_ATTRIBUTE_MAP={\\\"stroke-linecap\\\":\\\"lineCap\\\",\\\"stroke-linejoin\\\":\\\"lineJoin\\\",\\\"stroke-dasharray\\\":\\\"lineDash\\\",\\\"stroke-dashoffset\\\":\\\"lineDashOffset\\\",\\\"stroke-width\\\":\\\"lineWidth\\\",\\\"fill-opacity\\\":\\\"fillOpacity\\\",\\\"stroke-opacity\\\":\\\"strokeOpacity\\\"},SVG_ATTRIBUTE_MAP_KEYS=Object.keys(SVG_ATTRIBUTE_MAP),SVG_PARSE_ATTRIBUTE_MAP={\\\"stroke-linecap\\\":\\\"lineCap\\\",\\\"stroke-linejoin\\\":\\\"lineJoin\\\",\\\"stroke-dasharray\\\":\\\"lineDash\\\",\\\"stroke-dashoffset\\\":\\\"lineDashOffset\\\",\\\"stroke-width\\\":\\\"lineWidth\\\",\\\"fill-opacity\\\":\\\"fillOpacity\\\",\\\"stroke-opacity\\\":\\\"strokeOpacity\\\",stroke:\\\"stroke\\\",fill:\\\"fill\\\"},SVG_PARSE_ATTRIBUTE_MAP_KEYS=Object.keys(SVG_PARSE_ATTRIBUTE_MAP),Group=(!function(e){e[e.LESS_GROUP=0]=\\\"LESS_GROUP\\\",e[e.MORE_GROUP=1]=\\\"MORE_GROUP\\\"}(GroupUpdateAABBBoundsMode=GroupUpdateAABBBoundsMode||{}),class h$ extends Graphic{constructor(e){super(e),this.type=\\\"group\\\",this.parent=null,this.isContainer=!0,this.numberType=GROUP_NUMBER_TYPE,this._childUpdateTag=UpdateTag.UPDATE_BOUNDS}setMode(e){\\\"3d\\\"===e?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}setTheme(e){return this.theme||(this.theme=new Theme),this.theme.setTheme(e,this)}createTheme(){this.theme||(this.theme=new Theme)}hideAll(){this.setAttribute(\\\"visible\\\",!1),this.forEachChildren(e=>{e.isContainer&&e.hideAll?e.hideAll():e.setAttribute(\\\"visible\\\",!1)})}showAll(){this.setAttribute(\\\"visible\\\",!0),this.forEachChildren(e=>{e.isContainer&&e.showAll?e.showAll():e.setAttribute(\\\"visible\\\",!0)})}containsPoint(e,t,i){var r;return i===IContainPointMode.GLOBAL?(r=new Point(e,t),this.parent&&this.parent.globalTransMatrix.transformPoint(r,r),this.AABBBounds.contains(r.x,r.y)):this.AABBBounds.contains(e,t)}shouldUpdateAABBBounds(){return!!super.shouldUpdateAABBBounds()||!!(this._childUpdateTag&UpdateTag.UPDATE_BOUNDS)}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;application.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);var e=this.shouldSelfChangeUpdateAABBBounds(),t=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),application.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,e),t}doUpdateLocalMatrix(){var{x:e=DefaultTransform.x,y:t=DefaultTransform.y,dx:i=DefaultTransform.dx,dy:r=DefaultTransform.dy,scaleX:n=DefaultTransform.scaleX,scaleY:o=DefaultTransform.scaleY,angle:a=DefaultTransform.angle,postMatrix:l}=this.attribute;if(0!==e||0!==t||0!==i||0!==r||1!==n||1!==o||0!==a||l)return super.doUpdateLocalMatrix();this._transMatrix.reset()}doUpdateAABBBounds(){var e=this.attribute,t=getTheme(this).group,i=(this._AABBBounds.clear(),application.graphicService.updateGroupAABBBounds(e,t,this._AABBBounds,this)),{boundsPadding:e=t.boundsPadding}=e,t=parsePadding(e);return t&&i.expand(t),this.parent&&this.parent.addChildUpdateBoundTag(),this.clearUpdateBoundTag(),this._emitCustomEvent(\\\"AAABBBoundsChange\\\"),i}clearUpdateBoundTag(){this._updateTag&=UpdateTag.CLEAR_BOUNDS,this._childUpdateTag&=UpdateTag.CLEAR_BOUNDS}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}addUpdateBoundTag(){this._updateTag|=UpdateTag.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}addChildUpdateBoundTag(){this._childUpdateTag&UpdateTag.UPDATE_BOUNDS||(this._childUpdateTag|=UpdateTag.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}getTheme(){return this.theme.getTheme(this)}incrementalAppendChild(e){var t=super.appendChild(e);return this.stage&&t&&(t.stage=this.stage,t.layer=this.layer),this.addUpdateBoundTag(),application.graphicService.onAddIncremental(e,this,this.stage),t}incrementalClearChild(){super.removeAllChild(),this.addUpdateBoundTag(),application.graphicService.onClearIncremental(this,this.stage)}appendChild(e,t=!0){var i=super.appendChild(e);return t&&this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertBefore(e,t){var i=super.insertBefore(e,t);return this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertAfter(e,t){var i=super.insertAfter(e,t);return this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertInto(e,t){var i=super.insertInto(e,t);return this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}removeChild(e){var t=super.removeChild(e);return e.stage=null,application.graphicService.onRemove(e),this.addUpdateBoundTag(),t}removeAllChild(t=!1){this.forEachChildren(e=>{application.graphicService.onRemove(e),t&&e.isContainer&&e.removeAllChild(t)}),super.removeAllChild(),this.addUpdateBoundTag()}setStage(t,e){this.stage!==t&&(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this._onSetStage&&this._onSetStage(this,t,e),application.graphicService.onSetStage(this,t),this.forEachChildren(e=>{e.setStage(t,this.layer)}))}addUpdatePositionTag(){super.addUpdatePositionTag(),this.forEachChildren(e=>{e.isContainer&&e.addUpdateGlobalPositionTag()})}addUpdateGlobalPositionTag(){super.addUpdateGlobalPositionTag(),this.forEachChildren(e=>{e.isContainer&&e.addUpdateGlobalPositionTag()})}tryUpdateGlobalTransMatrix(e=!0){var t;return this.shouldUpdateGlobalMatrix()&&(this._globalTransMatrix?this.parent&&(t=this.parent.globalTransMatrix,this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)):this._globalTransMatrix=(this.parent?this.parent.globalTransMatrix:this.transMatrix).clone(),this.doUpdateGlobalMatrix(),e)&&this.clearUpdateGlobalPositionTag(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!!(this._updateTag&UpdateTag.UPDATE_GLOBAL_MATRIX)}_getChildByName(t,e){return this.find(e=>e.name===t,e)}createOrUpdateChild(e,t,i){let r=this._getChildByName(e);return r?r.setAttributes(t):((r=application.graphicService.creator[i](t)).name=e,this.add(r)),r}clone(){return new h$(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return h$.NOWORK_ANIMATE_ATTR}});function createGroup(e){return new Group(e)}Group.NOWORK_ANIMATE_ATTR=NOWORK_ANIMATE_ATTR;var DefaultLayerService_1,Layer=class extends Group{get offscreen(){return this.layerHandler.offscreen}get layerMode(){return this.layerHandler.type}get width(){return this.stage?this.stage.width:0}get height(){return this.stage?this.stage.height:0}get viewWidth(){return this.stage?this.stage.viewWidth:0}get viewHeight(){return this.stage?this.stage.viewHeight:0}get dirtyBound(){throw new Error(\\\"暂不支持\\\")}get dpr(){return this._dpr}constructor(e,t,i,r){var n;super({}),this.stage=e,this.global=t,this.window=i,this.main=r.main,this.layerHandler=r.layerHandler,this.layerHandler.init(this,i,{main:r.main,canvasId:r.canvasId,width:this.viewWidth,height:this.viewHeight,zIndex:null!=(n=r.zIndex)?n:0}),(this.layer=this).subLayers=new Map,this.theme=new Theme,this.background=\\\"rgba(0, 0, 0, 0)\\\",this.afterDrawCbs=[]}combineSubLayer(t=!0){var e=Array.from(this.subLayers.values()).sort((e,t)=>e.zIndex-t.zIndex);this.layerHandler.merge(e.map(e=>(e.layer.subLayers.size&&e.layer.combineSubLayer(t),e.layer.getNativeHandler()))),t&&e.forEach(e=>{e.group&&(e.group.incremental=0)}),e.forEach(e=>{application.layerService.releaseLayer(this.stage,e.layer)}),this.subLayers.clear()}getNativeHandler(){return this.layerHandler}setStage(e,t){super.setStage(e,this)}pick(e,t){throw new Error(\\\"暂不支持\\\")}tryRenderSecondaryLayer(t,i){this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach(e=>{e.layer.renderCount=this.renderCount,e.layer.render(t,i)})}render(e,t){var i;this.layerHandler.render([this],{renderService:e.renderService,stage:this.stage,layer:this,viewBox:e.viewBox,transMatrix:e.transMatrix,background:null!=(i=e.background)?i:this.background,updateBounds:e.updateBounds},t),this.afterDrawCbs.forEach(e=>e(this)),this.tryRenderSecondaryLayer(e,t)}resize(e,t){this.layerHandler.resize(e,t)}resizeView(e,t){this.layerHandler.resizeView(e,t)}setDpr(e){this.layerHandler.setDpr(e)}afterDraw(e){this.afterDrawCbs.push(e)}startAnimate(e){throw new Error(\\\"暂不支持\\\")}setToFrame(e){throw new Error(\\\"暂不支持\\\")}prepare(e,t){}release(){super.release(),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach(e=>{application.layerService.releaseLayer(this.stage,e.layer)})}drawTo(e,t){var i;this.layerHandler.drawTo(e,[this],Object.assign({background:null!=(i=t.background)?i:this.background,renderService:t.renderService,viewBox:t.viewBox,transMatrix:t.transMatrix,stage:this.stage,layer:this},t)),this.afterDrawCbs.forEach(e=>e(this))}},TransformUtil=(init_esbuild_inject(),Symbol[\\\"for\\\"](\\\"TransformUtil\\\")),GraphicUtil=Symbol[\\\"for\\\"](\\\"GraphicUtil\\\"),LayerService=Symbol[\\\"for\\\"](\\\"LayerService\\\"),StaticLayerHandlerContribution=Symbol[\\\"for\\\"](\\\"StaticLayerHandlerContribution\\\"),DynamicLayerHandlerContribution=Symbol[\\\"for\\\"](\\\"DynamicLayerHandlerContribution\\\"),VirtualLayerHandlerContribution=Symbol[\\\"for\\\"](\\\"VirtualLayerHandlerContribution\\\"),__decorate6=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata4=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},DefaultLayerService=DefaultLayerService_1=class{static GenerateLayerId(){return DefaultLayerService_1.idprefix+\\\"_\\\"+DefaultLayerService_1.prefix_count++}constructor(){this.layerMap=new Map,this.global=application.global}tryInit(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}getStageLayer(e){return this.layerMap.get(e)}getRecommendedLayerType(e){return e||(0!==this.staticLayerCountInEnv?\\\"static\\\":0!==this.dynamicLayerCountInEnv?\\\"dynamic\\\":\\\"virtual\\\")}getLayerHandler(e){return\\\"static\\\"===e?container.get(StaticLayerHandlerContribution):\\\"dynamic\\\"===e?container.get(DynamicLayerHandlerContribution):container.get(VirtualLayerHandlerContribution)}createLayer(e,t={main:!1}){this.tryInit();var i=this.getRecommendedLayerType(t.layerMode),i=t.main||t.canvasId?\\\"static\\\":i,r=this.getLayerHandler(i),i=new Layer(e,this.global,e.window,Object.assign(Object.assign({main:!1},t),{layerMode:i,canvasId:null!=(i=t.canvasId)?i:DefaultLayerService_1.GenerateLayerId(),layerHandler:r})),r=this.layerMap.get(e)||[];return r.push(i),this.layerMap.set(e,r),this.staticLayerCountInEnv--,i}prepareStageLayer(e){let i;e.forEachChildren(e=>{var t=e.getNativeHandler();\\\"virtual\\\"===t.type?(t.mainHandler=i).secondaryHandlers.push(t):(i=t).secondaryHandlers=[]})}releaseLayer(e,t){t.release();var i=this.layerMap.get(e)||[];this.layerMap.set(e,i.filter(e=>e!==t))}layerCount(e){return(this.layerMap.get(e)||[]).length}restLayerCount(e){return\\\"browser\\\"===this.global.env?10:0}releaseStage(e){this.layerMap[\\\"delete\\\"](e)}},core_modules_default=(DefaultLayerService.idprefix=\\\"visactor_layer\\\",DefaultLayerService.prefix_count=0,DefaultLayerService=DefaultLayerService_1=__decorate6([injectable(),__metadata4(\\\"design:paramtypes\\\",[])],DefaultLayerService),new ContainerModule(e=>{e(VGlobal).to(DefaultGlobal).inSingletonScope(),e(VWindow).to(DefaultWindow),e(GraphicUtil).to(DefaultGraphicUtil).inSingletonScope(),e(TransformUtil).to(DefaultTransformUtil).inSingletonScope(),e(LayerService).to(DefaultLayerService).inSingletonScope()}));function runFill(e,t){return!(!e&&!t)}function runStroke(e,t){return(isArray_default(e)?e.some(e=>e||void 0===e):!!e)&&0<t}function fillVisible(e,t,i){return i&&0<e*t}function rectFillVisible(e,t,i,r,n){return n&&0<e*t&&0!==i&&0!==r}function strokeVisible(e,t){return 0<e*t}function rectStrokeVisible(e,t,i,r){return 0<e*t&&0!==i&&0!==r}function drawPathProxy(e,t,i,r,n,o,a,l){var s,h,d,u,c,g,p,f,m,b;return!!e.pathProxy&&(s=getTheme(e,null==o?void 0:o.theme)[e.type],({fill:b=s.fill,stroke:h=s.stroke,opacity:f=s.opacity,fillOpacity:p=s.fillOpacity,lineWidth:d=s.lineWidth,strokeOpacity:m=s.strokeOpacity,visible:u=s.visible,x:c=s.x,y:g=s.y}=e.attribute),p=fillVisible(f,p,b),f=strokeVisible(f,m),m=runFill(b),b=runStroke(h,d),u&&(m||b)&&(p||f||a||l)&&(t.beginPath(),renderCommandList((\\\"function\\\"==typeof e.pathProxy?e.pathProxy(e.attribute):e.pathProxy).commandList,t,i,r),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),b&&(l?l(t,e.attribute,s):f&&(t.setStrokeStyle(e,e.attribute,i-c,r-g,s),t.stroke())),m)&&(a?a(t,e.attribute,s):p&&(t.setCommonStyle(e,e.attribute,i-c,r-g,s),t.fill())),!0)}function intersect(e,t,i,r,n,o,a,l){var s=i-e,h=r-t,d=a-n,u=l-o,c=u*s-d*h;return c*c<epsilon?[]:[e+(c=(d*(t-o)-u*(e-n))/c)*s,t+c*h]}function cornerTangents(e,t,i,r,n,o,a){var l=e-i,s=t-r,h=(a?o:-o)/Math.sqrt(l*l+s*s),s=h*s,h=-h*l,l=e+s,d=t+h,u=i+s,c=r+h,g=(l+u)/2,p=(d+c)/2,f=u-l,m=c-d,b=f*f+m*m,v=n-o,l=l*c-u*d,c=(m<0?-1:1)*Math.sqrt(Math.max(0,v*v*b-l*l));let C=(l*m-f*c)/b,y=(-l*f-m*c)/b;u=(l*m+f*c)/b,d=(-l*f+m*c)/b,l=C-g,f=y-p,m=u-g,c=d-p;return m*m+c*c<l*l+f*f&&(C=u,y=d),{cx:C,cy:y,x01:-s,y01:-h,x11:C*(n/v-1),y11:y*(n/v-1)}}function drawArcPath(a,l,s,h,d,u,c){var{startAngle:g,endAngle:p}=a.getParsedAngle(),f=abs(p-g),m=g<p;let b=!1;if(d<u&&(v=d,d=u,u=v),d<=epsilon)l.moveTo(s,h);else if(pi2-epsilon<=f)l.moveTo(s+d*cos(g),h+d*sin(g)),l.arc(s,h,d,g,p,!m),epsilon<u&&(l.moveTo(s+u*cos(p),h+u*sin(p)),l.arc(s,h,u,p,g,m));else{var v=a.getParsedCornerRadius(),{outerDeltaAngle:p,innerDeltaAngle:C,outerStartAngle:y,outerEndAngle:_,innerEndAngle:w,innerStartAngle:x}=a.getParsePadAngle(g,p),S=v,A=v,T=v,R=Math.max(A,S),M=Math.max(T,v);let e=R,t=M;var B,E,P,L,k=d*cos(y),H=d*sin(y),I=u*cos(w),D=u*sin(w);let i,r,n,o;(epsilon<M||epsilon<R)&&(i=d*cos(_),r=d*sin(_),n=u*cos(x),o=u*sin(x),f<pi)&&((f=intersect(k,H,n,o,i,r,I,D))&&(L=k-f[0],P=H-f[1],B=i-f[0],E=r-f[1],L=1/sin(acos((L*B+P*E)/(sqrt(L*L+P*P)*sqrt(B*B+E*E)))/2),P=sqrt(f[0]*f[0]+f[1]*f[1]),t=min(M,(u-P)/(L-1)),e=min(R,(d-P)/(1+L)))),p<.001?(c&&(c[3]||c[1])&&l.moveTo(s+k,h+H),b=!0):e>epsilon?(B=min(S,e),E=min(A,e),f=cornerTangents(n,o,k,H,d,B,Number(m)),P=cornerTangents(i,r,I,D,d,E,Number(m)),e<R&&B===E?!c||c[0]?(l.moveTo(s+f.cx+f.x01,h+f.cy+f.y01),l.arc(s+f.cx,h+f.cy,e,atan2(f.y01,f.x01),atan2(P.y01,P.x01),!m)):l.moveTo(s+f.cx+e*cos(atan2(P.y01,P.x01)),h+f.cy+e*sin(atan2(P.y01,P.x01))):!c||c[0]?(l.moveTo(s+f.cx+f.x01,h+f.cy+f.y01),0<B&&l.arc(s+f.cx,h+f.cy,B,atan2(f.y01,f.x01),atan2(f.y11,f.x11),!m),l.arc(s,h,d,atan2(f.cy+f.y11,f.cx+f.x11),atan2(P.cy+P.y11,P.cx+P.x11),!m),0<E&&l.arc(s+P.cx,h+P.cy,E,atan2(P.y11,P.x11),atan2(P.y01,P.x01),!m)):0<E?l.moveTo(s+P.cx+E*cos(atan2(P.y01,P.x01)),h+P.cy+E*sin(atan2(P.y01,P.x01))):l.moveTo(s+i,h+d*sin(_))):!c||c[0]?(l.moveTo(s+k,h+H),l.arc(s,h,d,y,_,!m)):l.moveTo(s+d*cos(_),h+d*sin(_)),!(epsilon<u)||C<.001?(!c||c[1]?l.lineTo(s+I,h+D):l.moveTo(s+I,h+D),b=!0):t>epsilon?(L=min(v,t),p=min(T,t),S=cornerTangents(I,D,i,r,u,-p,Number(m)),A=cornerTangents(k,H,n,o,u,-L,Number(m)),!c||c[1]?l.lineTo(s+S.cx+S.x01,h+S.cy+S.y01):l.moveTo(s+S.cx+S.x01,h+S.cy+S.y01),t<M&&L===p?(R=atan2(A.y01,A.x01),!c||c[2]?l.arc(s+S.cx,h+S.cy,t,atan2(S.y01,S.x01),R,!m):l.moveTo(s+S.cx+cos(R),h+S.cy+sin(R))):!c||c[2]?(0<p&&l.arc(s+S.cx,h+S.cy,p,atan2(S.y01,S.x01),atan2(S.y11,S.x11),!m),l.arc(s,h,u,atan2(S.cy+S.y11,S.cx+S.x11),atan2(A.cy+A.y11,A.cx+A.x11),m),0<L&&l.arc(s+A.cx,h+A.cy,L,atan2(A.y11,A.x11),atan2(A.y01,A.x01),!m)):0<L?l.moveTo(s+A.cx+L*cos(atan2(A.y01,A.x01)),h+A.cy+L*sin(atan2(A.y01,A.x01))):l.moveTo(s+n,h+o)):(!c||c[1]?l.lineTo(s+I,h+D):l.moveTo(s+I,h+D),!c||c[2]?l.arc(s,h,u,w,x,m):l.moveTo(s+u*cos(x),h+u*sin(x)))}return c?c[3]&&l.lineTo(s+d*cos(g),h+d*sin(g)):l.closePath(),b}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var ConicalCanvas=class g1a{static GetCanvas(){try{return g1a.canvas||(g1a.canvas=application.global.createCanvas({})),g1a.canvas}catch(err){return null}}static GetCtx(){var e;return g1a.ctx||(e=g1a.GetCanvas(),g1a.ctx=e.getContext(\\\"2d\\\")),g1a.ctx}},ColorInterpolate=class i1a extends LRU{static getInstance(){return i1a._instance||(i1a._instance=new i1a),i1a._instance}constructor(e=[],t=100){super(),this.cacheParams={CLEAN_THRESHOLD:100,L_TIME:1e3},this.dataMap=new Map;var i=ConicalCanvas.GetCanvas(),r=ConicalCanvas.GetCtx();if(i.width=t,i.height=1,r){if(r.translate(0,0),!r)throw new Error(\\\"获取ctx发生错误\\\");const n=r.createLinearGradient(0,0,t,0);e.forEach(e=>{n.addColorStop(e[0],e[1])}),r.fillStyle=n,r.fillRect(0,0,t,1),this.rgbaSet=r.getImageData(0,0,t,1).data}}getColor(e){var t=this.rgbaSet.slice(4*e,4*e+4);return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]/255})`}GetOrCreate(e,t,i,r,n=[],o=100){let a=\\\"\\\"+e+t+i+r,l=(n.forEach(e=>a+=e.join()),a+=o,this.dataMap.get(a));return l||(l={data:new i1a(n,o),timestamp:[]},this.addLimitedTimestamp(l,Date.now(),{}),this.dataMap.set(a,l)),this.clearCache(this.dataMap,this.cacheParams),l.data}},ConicalPatternStore=class A1a{static GetSize(e){for(let t=0;t<A1a.ImageSize.length;t++)if(A1a.ImageSize[t]>=e)return A1a.ImageSize[t];return e}static Get(e,t,i,r,n,o,a){var l=A1a.GenKey(e,t,i,r,n),s=A1a.cache[l];if(s&&0!==s.length)for(let e=0;e<s.length;e++)if(s[e].width>=o&&s[e].height>=a)return s[e].pattern;return null}static Set(e,t,i,r,n,o,a,l){var s=A1a.GenKey(e,t,i,r,n);A1a.cache[s]?A1a.cache[s].push({width:a,height:l,pattern:o}):A1a.cache[s]=[{width:a,height:l,pattern:o}]}static GenKey(e,t,i,r,n){return t+`,${i},${r},${n},`+e.join()}};function getConicGradientAt(e,t,i,r){for(var{stops:n,startAngle:o,endAngle:a}=r;i<0;)i+=pi2;for(;pi2<i;)i-=pi2;if(i<o)return n[0].color;if(a<i)return n[0].color;let l,s,h=(i-o)/(a-o);for(let d=0;d<n.length;d++)if(n[d].offset>=h){l=n[d-1],s=n[d];break}return h=(h-l.offset)/(s.offset-l.offset),interpolateColor(l.color,s.color,h,!1)}function createConicalGradient(i,r,n,o,a,l,s,e,t){var h=Math.floor(180*a/Math.PI),d=ConicalCanvas.GetCanvas(),u=ConicalCanvas.GetCtx();if(!u)return null;var c=ConicalPatternStore.GetSize(e),g=ConicalPatternStore.GetSize(t),p=ConicalPatternStore.Get(r,n,o,l,s,c,g);if(!p){var f=Math.sqrt(Math.max(Math.max(Math.pow(n,2)+Math.pow(o,2),Math.pow(c-n,2)+Math.pow(o,2)),Math.max(Math.pow(c-n,2)+Math.pow(g-o,2),Math.pow(n,2)+Math.pow(g-o,2)))),h=h+1,m=a/Math.max(1,h-1),b=ColorInterpolate.getInstance().GetOrCreate(n,o,c,g,r,h),v=2*Math.PI*f/360;d.width=c,d.height=g,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,c,g),u.translate(n,o),u.rotate(l);for(let e=0,t=h-1;e<t&&!(l+e*m>s);e++){var C=b.getColor(e);u.beginPath(),u.rotate(m),u.moveTo(0,0),u.lineTo(f,-2*v),u.lineTo(f,0),u.fillStyle=C,u.closePath(),u.fill()}h=u.getImageData(0,0,c,g);d.width=h.width,d.height=h.height,u.putImageData(h,0,0),(p=i.createPattern(d,\\\"no-repeat\\\"))&&ConicalPatternStore.Set(r,n,o,l,s,p,c,g)}return p}ConicalPatternStore.cache={},ConicalPatternStore.ImageSize=[20,40,80,160,320,640,1280,2560],init_esbuild_inject();var ArcRenderContribution=Symbol[\\\"for\\\"](\\\"ArcRenderContribution\\\"),AreaRenderContribution=Symbol[\\\"for\\\"](\\\"AreaRenderContribution\\\"),CircleRenderContribution=Symbol[\\\"for\\\"](\\\"CircleRenderContribution\\\"),GroupRenderContribution=Symbol[\\\"for\\\"](\\\"GroupRenderContribution\\\"),ImageRenderContribution=Symbol[\\\"for\\\"](\\\"ImageRenderContribution\\\"),PathRenderContribution=Symbol[\\\"for\\\"](\\\"PathRenderContribution\\\"),PolygonRenderContribution=Symbol[\\\"for\\\"](\\\"PolygonRenderContribution\\\"),RectRenderContribution=Symbol[\\\"for\\\"](\\\"RectRenderContribution\\\"),SymbolRenderContribution=Symbol[\\\"for\\\"](\\\"SymbolRenderContribution\\\"),TextRenderContribution=Symbol[\\\"for\\\"](\\\"TextRenderContribution\\\"),CommonRenderContribution=Symbol[\\\"for\\\"](\\\"CommonRenderContribution\\\"),InteractiveSubRenderContribution=Symbol[\\\"for\\\"](\\\"InteractiveSubRenderContribution\\\"),CIRCLE_UPDATE_TAG_KEY=(init_esbuild_inject(),init_esbuild_inject(),[\\\"radius\\\",\\\"startAngle\\\",\\\"endAngle\\\",...GRAPHIC_UPDATE_TAG_KEY]),Circle=class Ica extends Graphic{constructor(e={radius:1}){super(e),this.type=\\\"circle\\\",this.numberType=CIRCLE_NUMBER_TYPE}isValid(){return super.isValid()&&this._isValid()}_isValid(){var{startAngle:e,endAngle:t,radius:i}=this.attribute;return this._validNumber(e)&&this._validNumber(t)&&this._validNumber(i)}doUpdateAABBBounds(e){var t=getTheme(this).circle,i=(this._AABBBounds.clear(),this.attribute),r=application.graphicService.updateCircleAABBBounds(i,getTheme(this).circle,this._AABBBounds,e,this),{boundsPadding:i=t.boundsPadding}=i,t=parsePadding(i);return t&&r.expand(t),this.clearUpdateBoundTag(),r}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}getDefaultAttribute(e){return getTheme(this).circle[e]}needUpdateTags(e){return super.needUpdateTags(e,CIRCLE_UPDATE_TAG_KEY)}needUpdateTag(e){return super.needUpdateTag(e,CIRCLE_UPDATE_TAG_KEY)}toCustomPath(){var e=this.attribute,t=null!=(t=e.radius)?t:this.getDefaultAttribute(\\\"radius\\\"),i=null!=(i=e.startAngle)?i:this.getDefaultAttribute(\\\"startAngle\\\"),e=null!=(e=e.endAngle)?e:this.getDefaultAttribute(\\\"endAngle\\\"),r=new CustomPath2D;return r.arc(0,0,t,i,e),r}clone(){return new Ica(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Ica.NOWORK_ANIMATE_ATTR}};function createCircle(e){return new Circle(e)}function getContextFont2(e,t={},i){var{fontStyle:r=t.fontStyle,fontVariant:n=t.fontVariant,fontWeight:o=t.fontWeight,fontSize:a=t.fontSize,fontFamily:l=t.fontFamily}=e;return(r?r+\\\" \\\":\\\"\\\")+(n?n+\\\" \\\":\\\"\\\")+(o?o+\\\" \\\":\\\"\\\")+a*(i=i||1)+\\\"px \\\"+(l||\\\"sans-serif\\\")}function textDrawOffsetY(e,t){return\\\"top\\\"===e?Math.ceil(.79*t):\\\"middle\\\"===e?Math.round(.3*t):\\\"bottom\\\"===e?Math.round(-.21*t):0}function textDrawOffsetX(e,t){return\\\"end\\\"===e||\\\"right\\\"===e?-t:\\\"center\\\"===e?-t/2:0}function textLayoutOffsetY(e,t,i,r=0){return\\\"middle\\\"===e?-t/2:\\\"top\\\"===e?0:\\\"bottom\\\"===e?r-t:e&&\\\"alphabetic\\\"!==e?0:-(t-(i=i||t))/2-.79*i}Circle.NOWORK_ANIMATE_ATTR=NOWORK_ANIMATE_ATTR,init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var CanvasTextLayout=class{constructor(e,t,i){this.fontFamily=e,this.textOptions=t,this.textMeasure=i}LayoutBBox(e,t,i){if(\\\"left\\\"===t||\\\"start\\\"===t)e.xOffset=0;else if(\\\"center\\\"===t)e.xOffset=e.width/-2;else{if(\\\"right\\\"!==t&&\\\"end\\\"!==t)throw new Error(\\\"非法的textAlign\\\");e.xOffset=-e.width}return e.yOffset=\\\"top\\\"===i?0:\\\"middle\\\"===i?e.height/-2:\\\"alphabetic\\\"===i?-.79*e.height:-e.height,e}GetLayout(e,t,i,r,n,o,a,l,s){for(var h=[],d=[t,i],u=[0,0];0<e.length;){var c=this.textMeasure.clipTextWithSuffix(e,this.textOptions,t,a,l,s)[\\\"str\\\"];h.push({str:c,width:this.textMeasure.measureTextWidth(c,this.textOptions)}),e=e.substring(c.length)}return\\\"left\\\"!==r&&\\\"start\\\"!==r&&(\\\"center\\\"===r?u[0]=d[0]/-2:\\\"right\\\"!==r&&\\\"end\\\"!==r||(u[0]=-d[0])),\\\"top\\\"!==n&&(\\\"middle\\\"===n?u[1]=d[1]/-2:\\\"bottom\\\"===n&&(u[1]=-d[1])),this.layoutWithBBox({xOffset:u[0],yOffset:u[1],width:d[0],height:d[1]},h,r,n,o)}GetLayoutByLines(n,e,t,i,o=\\\"\\\",a,l,s=\\\"end\\\"){n=n.map(e=>e.toString());var h,d,u,c=[],r=[0,0];if(\\\"number\\\"==typeof l&&l!==1/0)for(let e=0,t=n.length;e<t;e++)h=Math.min(this.textMeasure.measureTextWidth(n[e],this.textOptions),l),c.push({str:this.textMeasure.clipTextWithSuffix(n[e],this.textOptions,h,o,a,s).str,width:h});else for(let i=l=0,r=n.length;i<r;i++)u=n[i],d=this.textMeasure.measureTextWidth(u,this.textOptions),l=Math.max(l,d),c.push({str:u,width:d});r[0]=l,r[1]=c.length*i,r[0]=c.reduce((e,t)=>Math.max(e,t.width),0);r={xOffset:0,yOffset:0,width:r[0],height:r[1]};return this.LayoutBBox(r,e,t),this.layoutWithBBox(r,c,e,t,i)}layoutWithBBox(e,t,i,r,n){var o=[0,0],a=t.length*n;\\\"top\\\"!==r&&(\\\"middle\\\"===r?o[1]=(e.height-a)/2:\\\"bottom\\\"===r&&(o[1]=e.height-a));for(let l=0;l<t.length;l++)this.lineOffset(e,t[l],i,r,n,o);return{bbox:e,lines:t,fontFamily:this.fontFamily,fontSize:this.textOptions.fontSize,fontWeight:this.textOptions.fontWeight,lineHeight:n,textAlign:i,textBaseline:r}}lineOffset(e,t,i,r,n,o){return\\\"left\\\"===i||\\\"start\\\"===i?t.leftOffset=0:\\\"center\\\"===i?t.leftOffset=(e.width-t.width)/2:\\\"right\\\"!==i&&\\\"end\\\"!==i||(t.leftOffset=e.width-t.width),t.topOffset=(n-this.textOptions.fontSize)/2+.79*this.textOptions.fontSize+o[1],o[1]+=n,t}},TEXT_UPDATE_TAG_KEY=[\\\"text\\\",\\\"maxLineWidth\\\",\\\"textAlign\\\",\\\"textBaseline\\\",\\\"heightLimit\\\",\\\"lineClamp\\\",\\\"fontSize\\\",\\\"fontFamily\\\",\\\"fontWeight\\\",\\\"ellipsis\\\",\\\"lineHeight\\\",\\\"direction\\\",\\\"wordBreak\\\",\\\"heightLimit\\\",\\\"lineClamp\\\",...GRAPHIC_UPDATE_TAG_KEY],Text=class uda extends Graphic{get font(){var e=getTheme(this).text;return this._font||(this._font=getContextFont2(this.attribute,e)),this._font}get clipedText(){var e,t=this.attribute,i=getTheme(this).text;if(this.isSimplify())return({maxLineWidth:e=i.maxLineWidth}=t),Number.isFinite(e)?(this.tryUpdateAABBBounds(),this.cache.clipedText):(null!=(e=t.text)?e:i.text).toString()}get clipedWidth(){if(this.isSimplify())return this.tryUpdateAABBBounds(),this.cache.clipedWidth}get cliped(){var e=getTheme(this).text,t=this.attribute;if(!this.isMultiLine)return({maxLineWidth:e=e.maxLineWidth}=t),!!Number.isFinite(e)&&(this.tryUpdateAABBBounds(),\\\"vertical\\\"===t.direction&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map(e=>e.text).join(\\\"\\\")!==t.text.toString():null!=this.clipedText&&this.clipedText!==t.text.toString())}get multilineLayout(){if(this.isMultiLine)return this.tryUpdateAABBBounds(),this.cache.layoutData}isSimplify(){return!this.isMultiLine&&\\\"vertical\\\"!==this.attribute.direction}get isMultiLine(){return Array.isArray(this.attribute.text)||\\\"normal\\\"===this.attribute.whiteSpace}constructor(e={text:\\\"\\\",fontSize:16}){super(e),this.type=\\\"text\\\",this.numberType=TEXT_NUMBER_TYPE,this.cache={}}isValid(){return super.isValid()&&this._isValid()}_isValid(){var e=this.attribute[\\\"text\\\"];return isArray_default(e)?!e.every(e=>null==e||\\\"\\\"===e):null!=e&&\\\"\\\"!==e}doUpdateAABBBounds(){var e=getTheme(this).text,t=(this._AABBBounds.clear(),this.attribute),t=application.graphicService.updateTextAABBBounds(t,e,this._AABBBounds,this),{boundsPadding:e=e.boundsPadding}=this.attribute,e=parsePadding(e);return e&&t.expand(e),this.clearUpdateBoundTag(),t}updateWrapAABBBounds(e){var i,t=getTheme(this).text,{fontFamily:r=t.fontFamily,textAlign:n=t.textAlign,textBaseline:a=t.textBaseline,fontSize:l=t.fontSize,ellipsis:s=t.ellipsis,maxLineWidth:h,stroke:o=t.stroke,lineWidth:d=t.lineWidth,wordBreak:u=t.wordBreak,fontWeight:c=t.fontWeight,ignoreBuf:g=t.ignoreBuf,suffixPosition:p=t.suffixPosition,heightLimit:f=0,lineClamp:m}=this.attribute,b=null!=(b=calculateLineHeight(this.attribute.lineHeight,this.attribute.fontSize||t.fontSize))?b:this.attribute.fontSize||t.fontSize,t=g?0:2;if(!this.shouldUpdateShape()&&null!=(g=this.cache)&&g.layoutData)g=this.cache.layoutData.bbox,this._AABBBounds.set(g.xOffset,g.yOffset,g.xOffset+g.width,g.yOffset+g.height);else{var g=application.graphicUtil.textMeasure,v=new CanvasTextLayout(r,{fontSize:l,fontWeight:c,fontFamily:r},g),C=isArray_default(e)?e.map(e=>e.toString()):[e.toString()],y=[],l=[0,0];let o=1/0;if(0<f&&(o=Math.max(Math.floor(f/b),1)),m&&(o=Math.min(o,m)),\\\"number\\\"==typeof h&&h!==1/0){if(0<h)for(let t=0;t<C.length;t++){var _=C[t];let e=!0;if(t===o-1){var w=v.textMeasure.clipTextWithSuffix(_,v.textOptions,h,s,!1,p,t!==C.length-1);y.push({str:w.str,width:w.width});break}var x,w=v.textMeasure.clipText(_,v.textOptions,h,\\\"break-word\\\"===u);\\\"\\\"!==_&&\\\"\\\"===w.str&&(s?(x=v.textMeasure.clipTextWithSuffix(_,v.textOptions,h,s,!1,p),w.str=null!=(i=x.str)?i:\\\"\\\",w.width=null!=(i=x.width)?i:0):(w.str=\\\"\\\",w.width=0),e=!1),y.push({str:w.str,width:w.width}),w.str.length!==_.length&&e&&(x=_.substring(w.str.length),C.splice(t+1,0,x))}let t=0;y.forEach(e=>{t=Math.max(t,e.width)}),l[0]=t}else{let e,t,i=0;for(let r=0,n=C.length;r<n;r++){if(r===o-1){var S=v.textMeasure.clipTextWithSuffix(C[r],v.textOptions,h,s,!1,p);y.push({str:S.str,width:S.width}),i=Math.max(i,S.width);break}t=C[r],e=v.textMeasure.measureTextWidth(t,v.textOptions,\\\"break-word\\\"===u),i=Math.max(i,e),y.push({str:t,width:e})}l[0]=i}l[1]=y.length*(b+t),v.LayoutBBox(c={xOffset:0,yOffset:0,width:l[0],height:l[1]},n,a),r=v.layoutWithBBox(c,y,n,a,b),this.cache.layoutData=r,this.clearUpdateShapeTag(),this._AABBBounds.set(c.xOffset,c.yOffset,c.xOffset+c.width,c.yOffset+c.height)}return o&&this._AABBBounds.expand(d/2),this._AABBBounds}updateSingallineAABBBounds(e){var t=getTheme(this).text,{direction:i=t.direction,underlineOffset:t=t.underlineOffset}=this.attribute,r=\\\"horizontal\\\"===i?this.updateHorizontalSinglelineAABBBounds(e):this.updateVerticalSinglelineAABBBounds(e);return\\\"horizontal\\\"===i&&t&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+t),r}updateMultilineAABBBounds(e){var t=getTheme(this).text,{direction:i=t.direction,underlineOffset:t=t.underlineOffset}=this.attribute,r=\\\"horizontal\\\"===i?this.updateHorizontalMultilineAABBBounds(e):this.updateVerticalMultilineAABBBounds(e);return\\\"horizontal\\\"===i&&t&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+t),r}updateHorizontalSinglelineAABBBounds(t){var i=getTheme(this).text,{wrap:r=i.wrap}=this.attribute;if(r)return this.updateWrapAABBBounds([t]);r=application.graphicUtil.textMeasure;let n,o;var a=this.attribute,{maxLineWidth:l=i.maxLineWidth,ellipsis:s=i.ellipsis,textAlign:h=i.textAlign,textBaseline:d=i.textBaseline,fontFamily:u=i.fontFamily,fontSize:c=i.fontSize,fontWeight:g=i.fontWeight,stroke:e=i.stroke,lineWidth:p=i.lineWidth,ignoreBuf:f=i.ignoreBuf,whiteSpace:m=i.whiteSpace,suffixPosition:b=i.suffixPosition}=a;if(\\\"normal\\\"===m)return this.updateWrapAABBBounds(t);var m=f?0:Math.max(2,.075*c),f=a.fontSize||i.fontSize,a=null!=(a=calculateLineHeight(a.lineHeight,f))?a:f+m;if(!this.shouldUpdateShape()&&this.cache)f=textDrawOffsetX(h,n=null!=(f=this.cache.clipedWidth)?f:0),v=textLayoutOffsetY(d,a,c),this._AABBBounds.set(f,v,f+n,v+a);else{Number.isFinite(l)?(n=(s?(f=!0===s?i.ellipsis:s,v=r.clipTextWithSuffix(t.toString(),{fontSize:c,fontWeight:g,fontFamily:u},l,f,!1,b),o=v.str,v):(i=r.clipText(t.toString(),{fontSize:c,fontWeight:g,fontFamily:u},l,!1),o=i.str,i)).width,this.cache.clipedText=o):(n=r.measureTextWidth(t.toString(),{fontSize:c,fontWeight:g,fontFamily:u}),this.cache.clipedText=t.toString()),this.cache.clipedWidth=n,this.clearUpdateShapeTag();var v,s=textDrawOffsetX(h,n);let e=a;application.global&&application.global.isSafari()&&(e+=.2*c),f=textLayoutOffsetY(d,e,c,m),this._AABBBounds.set(s,f,s+n,f+e)}return e&&this._AABBBounds.expand(p/2),this._AABBBounds}getBaselineMapAlign(){return uda.baselineMapAlign}getAlignMapBaseline(){return uda.alignMapBaseline}updateVerticalSinglelineAABBBounds(t){const i=getTheme(this).text,r=application.graphicUtil.textMeasure;let n;const e=this.attribute,{ignoreBuf:o=i.ignoreBuf}=e,a=o?0:2,{maxLineWidth:l=i.maxLineWidth,ellipsis:s=i.ellipsis,fontSize:h=i.fontSize,fontWeight:d=i.fontWeight,fontFamily:u=i.fontFamily,stroke:c=i.stroke,lineWidth:g=i.lineWidth,verticalMode:p=i.verticalMode,suffixPosition:f=i.suffixPosition}=e,m=null!=(C=calculateLineHeight(e.lineHeight,e.fontSize||i.fontSize))?C:(e.fontSize||i.fontSize)+a;let{textAlign:b=i.textAlign,textBaseline:v=i.textBaseline}=e;{if(p||(C=b,b=null!=(y=uda.baselineMapAlign[v])?y:\\\"left\\\",v=null!=(y=uda.alignMapBaseline[C])?y:\\\"top\\\"),!this.shouldUpdateShape()&&this.cache)n=this.cache.clipedWidth,C=textDrawOffsetX(b,n),y=textLayoutOffsetY(v,m,h);else{let e=[verticalLayout(t.toString())];Number.isFinite(l)?n=(s?(y=!0===s?i.ellipsis:s,C=r.clipTextWithSuffixVertical(e[0],{fontSize:h,fontWeight:d,fontFamily:u},l,y,!1,f),e=[C.verticalList],C):(y=r.clipTextVertical(e[0],{fontSize:h,fontWeight:d,fontFamily:u},l,!1),e=[y.verticalList],y)).width:(n=0,e[0].forEach(e=>{var t=e.direction===TextDirection.HORIZONTAL?h:r.measureTextWidth(e.text,{fontSize:h,fontWeight:d,fontFamily:u});n+=t,e.width=t})),this.cache.verticalList=e,this.cache.clipedWidth=n,this.clearUpdateShapeTag();var C=textDrawOffsetX(b,n),y=textLayoutOffsetY(v,m,h)}this._AABBBounds.set(y,C,y+m,C+n)}return c&&this._AABBBounds.expand(g/2),this._AABBBounds}updateHorizontalMultilineAABBBounds(e){var t,i,r,n,o,a,l,s,h,d,u,c,g=getTheme(this).text,{wrap:p=g.wrap}=this.attribute;return p||(p=this.attribute,({fontFamily:t=g.fontFamily,textAlign:i=g.textAlign,textBaseline:r=g.textBaseline,fontSize:c=g.fontSize,fontWeight:n=g.fontWeight,ellipsis:o=g.ellipsis,maxLineWidth:a,stroke:l=g.stroke,lineWidth:s=g.lineWidth,whiteSpace:u=g.whiteSpace,suffixPosition:h=g.suffixPosition}=p),d=null!=(d=calculateLineHeight(p.lineHeight,p.fontSize||g.fontSize))?d:p.fontSize||g.fontSize,\\\"normal\\\"===u)?this.updateWrapAABBBounds(e):(!this.shouldUpdateShape()&&null!=(p=this.cache)&&p.layoutData?(u=this.cache.layoutData.bbox,this._AABBBounds.set(u.xOffset,u.yOffset,u.xOffset+u.width,u.yOffset+u.height)):(p=application.graphicUtil.textMeasure,c=(u=new CanvasTextLayout(t,{fontSize:c,fontWeight:n,fontFamily:t},p).GetLayoutByLines(e,i,r,d,!0===o?g.ellipsis:o||void 0,!1,a,h))[\\\"bbox\\\"],this.cache.layoutData=u,this.clearUpdateShapeTag(),this._AABBBounds.set(c.xOffset,c.yOffset,c.xOffset+c.width,c.yOffset+c.height)),l&&this._AABBBounds.expand(s/2),this._AABBBounds)}updateVerticalMultilineAABBBounds(e){const r=getTheme(this).text,n=application.graphicUtil.textMeasure;let o;const t=this.attribute,{ignoreBuf:i=r.ignoreBuf}=t,a=i?0:2,{maxLineWidth:l=r.maxLineWidth,ellipsis:s=r.ellipsis,fontFamily:h=r.fontFamily,fontSize:d=r.fontSize,fontWeight:u=r.fontWeight,stroke:c=r.stroke,lineWidth:g=r.lineWidth,verticalMode:p=r.verticalMode,suffixPosition:f=r.suffixPosition}=t,m=null!=(_=calculateLineHeight(t.lineHeight,t.fontSize||r.fontSize))?_:(t.fontSize||r.fontSize)+a;let{textAlign:b=r.textAlign,textBaseline:v=r.textBaseline}=t;if(p||(_=b,b=null!=(y=uda.baselineMapAlign[v])?y:\\\"left\\\",v=null!=(y=uda.alignMapBaseline[_])?y:\\\"top\\\"),o=0,!this.shouldUpdateShape()&&this.cache)this.cache.verticalList.forEach(e=>{var t=e.reduce((e,t)=>e+t.width,0);o=max(t,o)}),_=textDrawOffsetX(b,o),y=this.cache.verticalList.length*m,C=textLayoutOffsetY(v,y,d),this._AABBBounds.set(C,_,C+y,_+o);else{const w=e.map(e=>verticalLayout(e.toString()));w.forEach((e,t)=>{var i;Number.isFinite(l)?o=(s?(i=!0===s?r.ellipsis:s,i=n.clipTextWithSuffixVertical(e,{fontSize:d,fontWeight:u,fontFamily:h},l,i,!1,f),w[t]=i.verticalList,i):(i=n.clipTextVertical(e,{fontSize:d,fontWeight:u,fontFamily:h},l,!1),w[t]=i.verticalList,i)).width:(o=0,e.forEach(e=>{var t=e.direction===TextDirection.HORIZONTAL?d:n.measureTextWidth(e.text,{fontSize:d,fontWeight:u,fontFamily:h});o+=t,e.width=t}))}),this.cache.verticalList=w,this.clearUpdateShapeTag(),this.cache.verticalList.forEach(e=>{var t=e.reduce((e,t)=>e+t.width,0);o=max(t,o)});var C=textDrawOffsetX(b,o),y=this.cache.verticalList.length*m,_=textLayoutOffsetY(v,y,d);this._AABBBounds.set(_,C,_+y,C+o)}return c&&this._AABBBounds.expand(g/2),this._AABBBounds}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}getDefaultAttribute(e){return getTheme(this).text[e]}needUpdateTags(e,t=TEXT_UPDATE_TAG_KEY){return super.needUpdateTags(e,t)}needUpdateTag(e,t=TEXT_UPDATE_TAG_KEY){return super.needUpdateTag(e,t)}clone(){return new uda(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return uda.NOWORK_ANIMATE_ATTR}};function createText(e){return new Text(e)}Text.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,direction:1,textAlign:1,textBaseline:1,fontFamily:1,fontWeight:1},NOWORK_ANIMATE_ATTR),Text.baselineMapAlign={top:\\\"left\\\",bottom:\\\"right\\\",middle:\\\"center\\\"},Text.alignMapBaseline={left:\\\"top\\\",right:\\\"bottom\\\",center:\\\"middle\\\"},init_esbuild_inject();var WRAP_TEXT_UPDATE_TAG_KEY=[\\\"heightLimit\\\",\\\"lineClamp\\\"],WrapText=class sfa extends Text{constructor(e){super(Object.assign(Object.assign({},e),{wrap:!0}))}_isValid(){var e=this.attribute[\\\"text\\\"];return isArray_default(e)?!e.every(e=>null==e||\\\"\\\"===e):null!=e&&\\\"\\\"!==e}updateMultilineAABBBounds(e){var i,t=getTheme(this).text,{fontFamily:r=t.fontFamily,textAlign:n=t.textAlign,textBaseline:a=t.textBaseline,fontSize:l=t.fontSize,ellipsis:s=t.ellipsis,maxLineWidth:h,stroke:o=t.stroke,lineWidth:d=t.lineWidth,wordBreak:u=t.wordBreak,fontWeight:c=t.fontWeight,ignoreBuf:g=t.ignoreBuf,heightLimit:p=0,suffixPosition:f=t.suffixPosition,lineClamp:m}=this.attribute,b=null!=(b=calculateLineHeight(this.attribute.lineHeight,this.attribute.fontSize||t.fontSize))?b:this.attribute.fontSize||t.fontSize,t=g?0:2;if(!this.shouldUpdateShape()&&null!=(g=this.cache)&&g.layoutData)g=this.cache.layoutData.bbox,this._AABBBounds.set(g.xOffset,g.yOffset,g.xOffset+g.width,g.yOffset+g.height);else{var g=application.graphicUtil.textMeasure,v=new CanvasTextLayout(r,{fontSize:l,fontWeight:c,fontFamily:r},g),C=e.map(e=>e.toString()),y=[],l=[0,0];let o=1/0;if(0<p&&(o=Math.max(Math.floor(p/b),1)),m&&(o=Math.min(o,m)),\\\"number\\\"==typeof h&&h!==1/0){if(0<h)for(let t=0;t<C.length;t++){var _=C[t];let e=!0;if(t===o-1){var w=v.textMeasure.clipTextWithSuffix(_,v.textOptions,h,s,!1,f);y.push({str:w.str,width:w.width});break}var x,w=v.textMeasure.clipText(_,v.textOptions,h,\\\"break-word\\\"===u);\\\"\\\"!==_&&\\\"\\\"===w.str&&(s?(x=v.textMeasure.clipTextWithSuffix(_,v.textOptions,h,s,!1,f),w.str=null!=(i=x.str)?i:\\\"\\\",w.width=null!=(i=x.width)?i:0):(w.str=\\\"\\\",w.width=0),e=!1),y.push({str:w.str,width:w.width}),w.str.length!==_.length&&e&&(x=_.substring(w.str.length),C.splice(t+1,0,x))}let t=0;y.forEach(e=>{t=Math.max(t,e.width)}),l[0]=t}else{let e,t,i=0;for(let r=0,n=C.length;r<n;r++){if(r===o-1){var S=v.textMeasure.clipTextWithSuffix(C[r],v.textOptions,h,s,!1,f);y.push({str:S.str,width:S.width}),i=Math.max(i,S.width);break}t=C[r],e=v.textMeasure.measureTextWidth(t,v.textOptions,\\\"break-word\\\"===u),i=Math.max(i,e),y.push({str:t,width:e})}l[0]=i}l[1]=y.length*(b+t),v.LayoutBBox(c={xOffset:0,yOffset:0,width:l[0],height:l[1]},n,a),r=v.layoutWithBBox(c,y,n,a,b),this.cache.layoutData=r,this.clearUpdateShapeTag(),this._AABBBounds.set(c.xOffset,c.yOffset,c.xOffset+c.width,c.yOffset+c.height)}return o&&this._AABBBounds.expand(d/2),this._AABBBounds}needUpdateTags(e){for(let i=0;i<WRAP_TEXT_UPDATE_TAG_KEY.length;i++){var t=WRAP_TEXT_UPDATE_TAG_KEY[i];if(-1!==e.indexOf(t))return!0}return super.needUpdateTags(e)}needUpdateTag(e){for(let t=0;t<WRAP_TEXT_UPDATE_TAG_KEY.length;t++)if(e===WRAP_TEXT_UPDATE_TAG_KEY[t])return!0;return super.needUpdateTag(e)}getNoWorkAnimateAttr(){return sfa.NOWORK_ANIMATE_ATTR}};function createWrapText(e){return new WrapText(e)}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var BaseSymbol=class{bounds(e,t){var i;isNumber_default(e)?(t.x1=-(i=e/2),t.x2=i,t.y1=-i,t.y2=i):(t.x1=-e[0]/2,t.x2=e[0]/2,t.y1=-e[1]/2,t.y2=e[1]/2)}};function circle(e,t,i,r,n){return n?e.arc(i,r,t,0,tau,!1,n):e.arc(i,r,t,0,tau),!1}var CircleSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"circle\\\",this.pathStr=\\\"M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0\\\"}draw(e,t,i,r,n){return circle(e,t/2,i,r,n)}drawOffset(e,t,i,r,n,o){return circle(e,t/2+n,i,r,o)}drawToSvgPath(e,t,i,r){var n=e/2;return`M ${t-n}, ${i} a ${n},${n} 0 1,0 ${2*n},0 a ${n},${n} 0 1,0 -${2*n},0`}},circle_default=new CircleSymbol;function cross(e,t,i,r,n){return e.moveTo(-3*t+i,-t+r,n),e.lineTo(-t+i,-t+r,n),e.lineTo(-t+i,-3*t+r,n),e.lineTo(t+i,-3*t+r,n),e.lineTo(t+i,-t+r,n),e.lineTo(3*t+i,-t+r,n),e.lineTo(3*t+i,t+r,n),e.lineTo(t+i,t+r,n),e.lineTo(t+i,3*t+r,n),e.lineTo(-t+i,3*t+r,n),e.lineTo(-t+i,t+r,n),e.lineTo(-3*t+i,t+r,n),e.closePath(),!0}function crossOffset(e,t,i,r,n,o){return e.moveTo(-3*t+i-n,-t+r-n,o),e.lineTo(-t+i-n,-t+r-n,o),e.lineTo(-t+i-n,-3*t+r-n,o),e.lineTo(t+i+n,-3*t+r-n,o),e.lineTo(t+i+n,-t+r-n,o),e.lineTo(3*t+i+n,-t+r-n,o),e.lineTo(3*t+i+n,t+r+n,o),e.lineTo(t+i+n,t+r+n,o),e.lineTo(t+i+n,3*t+r+n,o),e.lineTo(-t+i-n,3*t+r+n,o),e.lineTo(-t+i-n,t+r+n,o),e.lineTo(-3*t+i-n,t+r+n,o),e.closePath(),!0}init_esbuild_inject();var CrossSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"cross\\\",this.pathStr=\\\"M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z\\\"}draw(e,t,i,r,n){return cross(e,t/6,i,r,n)}drawOffset(e,t,i,r,n,o){return crossOffset(e,t/6,i,r,n,o)}},cross_default=new CrossSymbol;function diamond(e,t,i,r,n){return e.moveTo(i,r-t,n),e.lineTo(t+i,r,n),e.lineTo(i,r+t,n),e.lineTo(i-t,r,n),e.closePath(),!0}init_esbuild_inject();var DiamondSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"diamond\\\",this.pathStr=\\\"M-0.5,0L0,-0.5L0.5,0L0,0.5Z\\\"}draw(e,t,i,r,n){return diamond(e,t/2,i,r,n)}drawFitDir(e,t,i,r,n){return diamond(e,t/2,i,r,n)}drawOffset(e,t,i,r,n,o){return diamond(e,t/2+n,i,r,o)}},diamond_default=new DiamondSymbol;function square(e,t,i,r){var n=2*t;return e.rect(i-t,r-t,n,n),!1}init_esbuild_inject();var SquareSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"square\\\",this.pathStr=\\\"M-0.5,-0.5h1v1h-1Z\\\"}draw(e,t,i,r){return square(e,t/2,i,r)}drawOffset(e,t,i,r,n){return square(e,t/2+n,i,r)}},square_default=new SquareSymbol;function trianglUp(e,t,i,r){return e.moveTo(i+t,t+r),e.lineTo(i-t,t+r),e.lineTo(i,r-t),e.closePath(),!0}function trianglUpOffset(e,t,i,r,n){return e.moveTo(i+t+2*n,t+r+n),e.lineTo(i-t-2*n,t+r+n),e.lineTo(i,r-t-2*n),e.closePath(),!0}init_esbuild_inject(),init_esbuild_inject();var TriangleUpSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"triangleUp\\\",this.pathStr=\\\"M0.5,0.5 L-0.5,0.5 L0,-0.5 Z\\\"}draw(e,t,i,r){return trianglUp(e,t/2,i,r)}drawOffset(e,t,i,r,n){return trianglUpOffset(e,t/2,i,r,n)}},triangle_up_default=new TriangleUpSymbol,TriangleSymbol=class extends TriangleUpSymbol{constructor(){super(...arguments),this.type=\\\"triangle\\\"}},triangle_default=new TriangleSymbol,kr=(init_esbuild_inject(),Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10)),kx=Math.sin(tau/10)*kr,ky=-Math.cos(tau/10)*kr;function star(e,t,i,r){var n=kx*t,o=ky*t;e.moveTo(i,-t+r),e.lineTo(n+i,o+r);for(let s=1;s<5;++s){var a=tau*s/5,l=Math.cos(a),a=Math.sin(a);e.lineTo(a*t+i,-l*t+r),e.lineTo(l*n-a*o+i,a*n+l*o+r)}return e.closePath(),!0}var StarSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"star\\\",this.pathStr=\\\"M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z\\\"}draw(e,t,i,r){return star(e,t/2,i,r)}drawOffset(e,t,i,r,n){return star(e,t/2+n,i,r)}},star_default=new StarSymbol,sqrt3=(init_esbuild_inject(),sqrt(3));function arrow(e,t,i,r){var n=t/sqrt3,o=n/5,a=t;return e.moveTo(0+i,-t+r),e.lineTo(n/2+i,r),e.lineTo(o/2+i,r),e.lineTo(o/2+i,a+r),e.lineTo(-o/2+i,a+r),e.lineTo(-o/2+i,r),e.lineTo(-n/2+i,r),e.closePath(),!0}var ArrowSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"arrow\\\",this.pathStr=\\\"M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z\\\"}draw(e,t,i,r){return arrow(e,t/2,i,r)}drawOffset(e,t,i,r,n){return arrow(e,t/2+n,i,r)}},arrow_default=new ArrowSymbol;function wedge(e,t,i,r){var n=2*t;return e.moveTo(i,-t+r),e.lineTo(n/3/2+i,t+r),e.lineTo(-n/3/2+i,t+r),e.closePath(),!0}init_esbuild_inject();var WedgeSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"wedge\\\",this.pathStr=\\\"M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z\\\"}draw(e,t,i,r){return wedge(e,t/2,i,r)}drawOffset(e,t,i,r,n){return wedge(e,t/2+n,i,r)}},wedge_default=new WedgeSymbol;function stroke(e,t,i,r){return e.moveTo(-t+i,r),e.lineTo(i,t+r),!1}init_esbuild_inject();var StrokeSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"stroke\\\",this.pathStr=\\\"\\\"}draw(e,t,i,r){return stroke(e,t/2,i,r)}drawOffset(e,t,i,r,n){return stroke(e,t/2+n,i,r)}},stroke_default=new StrokeSymbol,c=(init_esbuild_inject(),-.5),s=sqrt(3)/2,k=1/sqrt(12),a=3*(k/2+1);function wye(e,t,i,r){var n=t/2,o=t*k,a=n,l=t*k+t,h=-a,d=l;return e.moveTo(n+i,o+r),e.lineTo(a+i,l+r),e.lineTo(h+i,d+r),e.lineTo(c*n-s*o+i,s*n+c*o+r),e.lineTo(c*a-s*l+i,s*a+c*l+r),e.lineTo(c*h-s*d+i,s*h+c*d+r),e.lineTo(c*n+s*o+i,c*o-s*n+r),e.lineTo(c*a+s*l+i,c*l-s*a+r),e.lineTo(c*h+s*d+i,c*d-s*h+r),e.closePath(),!1}var WyeSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"wye\\\",this.pathStr=\\\"M0.25 0.14433756729740646L0.25 0.6443375672974064L-0.25 0.6443375672974064L-0.25 0.14433756729740643L-0.6830127018922193 -0.10566243270259357L-0.4330127018922193 -0.5386751345948129L0 -0.28867513459481287L0.4330127018922193 -0.5386751345948129L0.6830127018922193 -0.10566243270259357Z\\\"}draw(e,t,i,r){return wye(e,t/2,i,r)}drawOffset(e,t,i,r,n){return wye(e,t/2+n,i,r)}},wye_default=new WyeSymbol;function trianglLeft(e,t,i,r){return e.moveTo(-t+i,r),e.lineTo(t+i,t+r),e.lineTo(t+i,r-t),e.closePath(),!0}function trianglLeftOffset(e,t,i,r,n){return e.moveTo(-t+i-2*n,r),e.lineTo(t+i+n,t+r+2*n),e.lineTo(t+i+n,r-t-2*n),e.closePath(),!0}init_esbuild_inject();var TriangleLeftSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"triangleLeft\\\",this.pathStr=\\\"M-0.5,0 L0.5,0.5 L0.5,-0.5 Z\\\"}draw(e,t,i,r){return trianglLeft(e,t/2,i,r)}drawOffset(e,t,i,r,n){return trianglLeftOffset(e,t/2,i,r,n)}},triangle_left_default=new TriangleLeftSymbol;function trianglRight(e,t,i,r){return e.moveTo(i-t,t+r),e.lineTo(t+i,r),e.lineTo(i-t,r-t),e.closePath(),!0}function trianglRightOffset(e,t,i,r,n){return e.moveTo(i-t-n,t+r+2*n),e.lineTo(t+i+2*n,r),e.lineTo(i-t-n,r-t-2*n),e.closePath(),!0}init_esbuild_inject();var TriangleRightSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"triangleRight\\\",this.pathStr=\\\"M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z\\\"}draw(e,t,i,r){return trianglRight(e,t/2,i,r)}drawOffset(e,t,i,r,n){return trianglRightOffset(e,t/2,i,r,n)}},triangle_right_default=new TriangleRightSymbol;function trianglDown(e,t,i,r){return e.moveTo(i-t,r-t),e.lineTo(i+t,r-t),e.lineTo(i,r+t),e.closePath(),!0}function trianglDownOffset(e,t,i,r,n){return e.moveTo(i-t-2*n,r-t-n),e.lineTo(i+t+2*n,r-t-n),e.lineTo(i,r+t+2*n),e.closePath(),!0}init_esbuild_inject();var TriangleDownSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"triangleDown\\\",this.pathStr=\\\"M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z\\\"}draw(e,t,i,r){return trianglDown(e,t/2,i,r)}drawOffset(e,t,i,r,n){return trianglDownOffset(e,t/2,i,r,n)}},triangle_down_default=new TriangleDownSymbol,sqrt32=(init_esbuild_inject(),sqrt(3));function thinTriangle(e,t,i,r){var n=t*sqrt32;return e.moveTo(i,r+-n/3*2),e.lineTo(t+i,r+n),e.lineTo(i-t,r+n),e.closePath(),!0}var ThinTriangleSymbol=class extends TriangleUpSymbol{constructor(){super(...arguments),this.type=\\\"thinTriangle\\\",this.pathStr=\\\"M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z\\\"}draw(e,t,i,r){return thinTriangle(e,t/2/sqrt32,i,r)}drawOffset(e,t,i,r,n){return thinTriangle(e,t/2/sqrt32+n,i,r)}},thin_triangle_default=new ThinTriangleSymbol;function arrow2Left(e,t,i,r){var n=2*t;return e.moveTo(t+i,r-n),e.lineTo(i-t,r),e.lineTo(t+i,n+r),!0}init_esbuild_inject();var Arrow2LeftSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"arrow2Left\\\",this.pathStr=\\\"M 0.25 -0.5 L -0.25 0 l 0.25 0.5\\\"}draw(e,t,i,r){return arrow2Left(e,t/4,i,r)}drawOffset(e,t,i,r,n){return arrow2Left(e,t/4+n,i,r)}},arrow2_left_default=new Arrow2LeftSymbol;function arrow2Right(e,t,i,r){var n=2*t;return e.moveTo(i-t,r-n),e.lineTo(i+t,r),e.lineTo(i-t,n+r),!0}init_esbuild_inject();var Arrow2RightSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"arrow2Right\\\",this.pathStr=\\\"M -0.25 -0.5 l 0.25 0 l -0.25 0.5\\\"}draw(e,t,i,r){return arrow2Right(e,t/4,i,r)}drawOffset(e,t,i,r,n){return arrow2Right(e,t/4+n,i,r)}},arrow2_right_default=new Arrow2RightSymbol;function arrow2Up(e,t,i,r){var n=2*t;return e.moveTo(i-n,r+t),e.lineTo(i,r-t),e.lineTo(i+n,r+t),!0}init_esbuild_inject();var Arrow2UpSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"arrow2Up\\\",this.pathStr=\\\"M -0.5 0.25 L 0 -0.25 l 0.5 0.25\\\"}draw(e,t,i,r){return arrow2Up(e,t/4,i,r)}drawOffset(e,t,i,r,n){return arrow2Up(e,t/4+n,i,r)}},arrow2_up_default=new Arrow2UpSymbol;function arrow2Down(e,t,i,r){var n=2*t;return e.moveTo(i-n,r-t),e.lineTo(i,r+t),e.lineTo(i+n,r-t),!0}init_esbuild_inject();var Arrow2DownSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"arrow2Down\\\",this.pathStr=\\\"M -0.5 -0.25 L 0 0.25 l 0.5 -0.25\\\"}draw(e,t,i,r){return arrow2Down(e,t/4,i,r)}drawOffset(e,t,i,r,n){return arrow2Down(e,t/4+n,i,r)}},arrow2_down_default=new Arrow2DownSymbol;function lineV(e,t,i,r,n){return e.moveTo(i,r-t),e.lineTo(i,r+t),!0}init_esbuild_inject();var LineVSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"lineV\\\",this.pathStr=\\\"M0,-0.5L0,0.5\\\"}draw(e,t,i,r,n){return lineV(e,t/2,i,r,n)}drawOffset(e,t,i,r,n,o){return lineV(e,t/2+n,i,r,o)}drawToSvgPath(e,t,i,r){var n=e/2;return`M ${t}, ${i-n} L ${t},`+(i+n)}},line_v_default=new LineVSymbol;function lineH(e,t,i,r,n){return e.moveTo(i-t,r),e.lineTo(i+t,r),!0}init_esbuild_inject();var LineHSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"lineH\\\",this.pathStr=\\\"M-0.5,0L0.5,0\\\"}draw(e,t,i,r,n){return lineH(e,t/2,i,r,n)}drawOffset(e,t,i,r,n,o){return lineH(e,t/2+n,i,r,o)}drawToSvgPath(e,t,i,r){var n=e/2;return`M ${t-n}, ${i} L ${t+n},`+i}},line_h_default=new LineHSymbol;function close(e,t,i,r,n){return e.moveTo(i-t,r-t),e.lineTo(i+t,r+t),e.moveTo(i+t,r-t),e.lineTo(i-t,r+t),!0}init_esbuild_inject();var CloseSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"close\\\",this.pathStr=\\\"M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5\\\"}draw(e,t,i,r,n){return close(e,t/2,i,r,n)}drawOffset(e,t,i,r,n,o){return close(e,t/2+n,i,r,o)}drawToSvgPath(e,t,i,r){var n=e/2;return`M ${t-n}, ${i-n} L ${t+n},${i+n} M ${t+n}, ${i-n} L ${t-n},`+(i+n)}},close_default=new CloseSymbol;function rectSizeArray(e,t,i,r){return e.rect(i-t[0]/2,r-t[1]/2,t[0],t[1]),!1}function rectSize(e,t,i,r){var n=t/2;return e.rect(i-t/2,r-n/2,t,n),!1}init_esbuild_inject();var RectSymbol=class extends BaseSymbol{constructor(){super(...arguments),this.type=\\\"rect\\\",this.pathStr=\\\"M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z\\\"}draw(e,t,i,r){return(isNumber_default(t)?rectSize:rectSizeArray)(e,t,i,r)}drawOffset(e,t,i,r,n){return isNumber_default(t)?rectSize(e,t+2*n,i,r):rectSizeArray(e,[t[0]+2*n,t[1]+2*n],i,r)}},rect_default=new RectSymbol,tempBounds2=(init_esbuild_inject(),new AABBBounds),CustomSymbolClass=class{constructor(e,t,i=!1){this.pathStr=\\\"\\\",this.type=e,isArray_default(t)?this.svgCache=t:this.path=t,this.isSvg=i}drawOffset(t,i,r,n,e,o,a){return this.isSvg?!!this.svgCache&&(this.svgCache.forEach(e=>{t.beginPath(),renderCommandList(e.path.commandList,t,r,n,i,i),a&&a(e.path,e.attribute)}),!1):(renderCommandList(this.path.commandList,t,r,n,i+e,i+e),!1)}draw(t,i,r,n,e,o){return this.isSvg?!!this.svgCache&&(this.svgCache.forEach(e=>{t.beginPath(),renderCommandList(e.path.commandList,t,r,n,i,i),o&&o(e.path,e.attribute)}),!1):(renderCommandList(this.path.commandList,t,r,n,i,i),!1)}bounds(t,i){if(this.isSvg)return this.svgCache?(i.clear(),void this.svgCache.forEach(({path:e})=>{tempBounds2.x1=e.bounds.x1*t,tempBounds2.y1=e.bounds.y1*t,tempBounds2.x2=e.bounds.x2*t,tempBounds2.y2=e.bounds.y2*t,i.union(tempBounds2)})):void 0;this.path.bounds&&(i.x1=this.path.bounds.x1*t,i.y1=this.path.bounds.y1*t,i.x2=this.path.bounds.x2*t,i.y2=this.path.bounds.y2*t)}},builtinSymbols=[circle_default,cross_default,diamond_default,square_default,thin_triangle_default,triangle_default,star_default,arrow_default,wedge_default,stroke_default,wye_default,triangle_left_default,triangle_right_default,triangle_up_default,triangle_down_default,arrow2_left_default,arrow2_right_default,arrow2_up_default,arrow2_down_default,rect_default,line_v_default,line_h_default,close_default],builtinSymbolsMap={},builtInSymbolStrMap=(builtinSymbols.forEach(e=>{builtinSymbolsMap[e.type]=e}),{arrowLeft:\\\"M 0.25 -0.5 L -0.25 0 l 0.5 0.5\\\",arrowRight:\\\"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5\\\",rectRound:\\\"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z\\\",roundLine:\\\"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z\\\"}),_tempBounds=new AABBBounds,SYMBOL_UPDATE_TAG_KEY=[\\\"symbolType\\\",\\\"size\\\",...GRAPHIC_UPDATE_TAG_KEY],Symbol2=class $ja extends Graphic{constructor(e={symbolType:\\\"circle\\\"}){super(e),this.type=\\\"symbol\\\",this.numberType=SYMBOL_NUMBER_TYPE}getParsedPath(){return this.shouldUpdateShape()&&(this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}isValid(){return super.isValid()&&this._isValid()}_isValid(){var e=this.attribute[\\\"size\\\"];return isArray_default(e)?2===e.length&&e.every(this._validNumber):this._validNumber(e)}doUpdateParsedPath(){var e=getTheme(this).symbol,{symbolType:e=e.symbolType}=this.attribute,t=builtinSymbolsMap[e];if(t)return this._parsedPath=t;if(t=$ja.userSymbolMap[e])return this._parsedPath=t;if(!0===isSvg(e=builtInSymbolStrMap[e]||e)){if(!(t=(new XMLParser).parse(e).svg))return null;t=isArray_default(t.path)?t.path:[t.path],_tempBounds.clear();const n=[],o=(t.forEach(t=>{const e=(new CustomPath2D).fromString(t.d),i={};SVG_PARSE_ATTRIBUTE_MAP_KEYS.forEach(e=>{t[e]&&(i[SVG_PARSE_ATTRIBUTE_MAP[e]]=t[e])}),n.push({path:e,attribute:i}),_tempBounds.union(e.bounds)}),_tempBounds.width()),a=_tempBounds.height(),l=1/max(o,a);n.forEach(e=>e.path.transform(0,0,l,l)),this._parsedPath=new CustomSymbolClass(e,n,!0)}else{var t,i=(t=(new CustomPath2D).fromString(e)).bounds.width(),r=t.bounds.height(),i=1/max(i,r);t.transform(0,0,i,i),this._parsedPath=new CustomSymbolClass(e,t)}return $ja.userSymbolMap[e]=this._parsedPath,this._parsedPath}doUpdateAABBBounds(e){var t=getTheme(this).symbol,i=(this._AABBBounds.clear(),this.attribute),r=application.graphicService.updateSymbolAABBBounds(i,getTheme(this).symbol,this._AABBBounds,e,this),{boundsPadding:i=t.boundsPadding}=i,t=parsePadding(i);return t&&r.expand(t),this.clearUpdateBoundTag(),r}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}getDefaultAttribute(e){return getTheme(this).symbol[e]}needUpdateTags(e){return super.needUpdateTags(e,SYMBOL_UPDATE_TAG_KEY)}needUpdateTag(e){return super.needUpdateTag(e,SYMBOL_UPDATE_TAG_KEY)}toCustomPath(){var e=this.getParsedPath(),t=this.attribute.size,t=isArray_default(t)?t:[t,t];return e.path?(new CustomPath2D).fromCustomPath2D(e.path,0,0,t[0],t[1]):(new CustomPath2D).fromString(e.pathStr,0,0,t[0],t[1])}clone(){return new $ja(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return $ja.NOWORK_ANIMATE_ATTR}};function createSymbol(e){return new Symbol2(e)}Symbol2.userSymbolMap={},Symbol2.NOWORK_ANIMATE_ATTR=Object.assign({symbolType:1},NOWORK_ANIMATE_ATTR),init_esbuild_inject();var LINE_UPDATE_TAG_KEY=[\\\"segments\\\",\\\"points\\\",\\\"curveType\\\",...GRAPHIC_UPDATE_TAG_KEY],Line=class H9a extends Graphic{constructor(e={}){super(e),this.type=\\\"line\\\",this.numberType=LINE_NUMBER_TYPE}isValid(){return super.isValid()&&this._isValid()}_isValid(){var e,t;return!(!this.pathProxy&&(({points:e,segments:t}=this.attribute),t?0===t.length:!e||e.length<=1))}_interpolate(e,t,i,r,n){\\\"points\\\"===e&&(n.points=pointsInterpolation(i,r,t))}doUpdateAABBBounds(){var e=getTheme(this).line,t=(this._AABBBounds.clear(),this.attribute),i=application.graphicService.updateLineAABBBounds(t,getTheme(this).line,this._AABBBounds,this),{boundsPadding:t=e.boundsPadding}=t,e=parsePadding(t);return e&&i.expand(e),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}getDefaultAttribute(e){return getTheme(this).line[e]}needUpdateTags(e){return super.needUpdateTags(e,LINE_UPDATE_TAG_KEY)}needUpdateTag(e){return super.needUpdateTag(e,LINE_UPDATE_TAG_KEY)}toCustomPath(){const e=this.attribute,i=new CustomPath2D,t=e.segments,r=e=>{if(e&&e.length){let t=!0;e.forEach(e=>{!1!==e.defined&&(t?i.moveTo(e.x,e.y):i.lineTo(e.x,e.y),t=!1)})}};return t&&t.length?t.forEach(e=>{r(e.points)}):e.points&&r(e.points),i}clone(){return new H9a(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return H9a.NOWORK_ANIMATE_ATTR}};function createLine(e){return new Line(e)}Line.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},NOWORK_ANIMATE_ATTR),init_esbuild_inject();var RECT_UPDATE_TAG_KEY=[\\\"width\\\",\\\"x1\\\",\\\"y1\\\",\\\"height\\\",\\\"cornerRadius\\\",...GRAPHIC_UPDATE_TAG_KEY],Rect=class fka extends Graphic{constructor(e){super(e),this.type=\\\"rect\\\",this.numberType=RECT_NUMBER_TYPE}isValid(){return super.isValid()&&this._isValid()}_isValid(){return!0}doUpdateAABBBounds(){var e=getTheme(this).rect,t=(this._AABBBounds.clear(),this.attribute),i=application.graphicService.updateRectAABBBounds(t,getTheme(this).rect,this._AABBBounds,this),{boundsPadding:t=e.boundsPadding}=t,e=parsePadding(t);return e&&i.expand(e),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}getDefaultAttribute(e){return getTheme(this).rect[e]}needUpdateTags(e){return super.needUpdateTags(e,RECT_UPDATE_TAG_KEY)}needUpdateTag(e){return super.needUpdateTag(e,RECT_UPDATE_TAG_KEY)}toCustomPath(){var e=this.attribute,{x:e,y:t,width:i,height:r}=normalizeRectAttributes(e),n=new CustomPath2D;return n.moveTo(e,t),n.rect(e,t,i,r),n}clone(){return new fka(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return fka.NOWORK_ANIMATE_ATTR}};function createRect(e){return new Rect(e)}Rect.NOWORK_ANIMATE_ATTR=NOWORK_ANIMATE_ATTR,init_esbuild_inject();var CUBE_VERTICES=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]],Rect3d=class wka extends Rect{constructor(e){super(e),this.type=\\\"rect3d\\\",this.numberType=RECT3D_NUMBER_TYPE}findFace(){var e={polygons:[],vertices:[],edges:[]},t=getTheme(this).rect3d,{x1:i,y1:r,x:n,y:o,length:a=min(t.width,t.height)}=this.attribute,{width:l,height:s}=this.attribute,l=null!=l?l:i-n,s=null!=s?s:r-o;for(let d=0;d<CUBE_VERTICES.length;d++){var h=CUBE_VERTICES[d];e.vertices.push([h[0]*l,h[1]*s,h[2]*a])}return e.polygons.push({polygon:[0,1,5,4],normal:[0,-1,0]}),e.polygons.push({polygon:[2,3,7,6],normal:[0,1,0]}),e.polygons.push({polygon:[4,7,3,0],normal:[-1,0,0]}),e.polygons.push({polygon:[1,2,6,5],normal:[1,0,0]}),e.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),e.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),e.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],e}getNoWorkAnimateAttr(){return wka.NOWORK_ANIMATE_ATTR}};function createRect3d(e){return new Rect3d(e)}Rect3d.NOWORK_ANIMATE_ATTR=NOWORK_ANIMATE_ATTR,init_esbuild_inject();var Glyph=class Kka extends Graphic{constructor(e){super(e),this.type=\\\"glyph\\\",this.numberType=GLYPH_NUMBER_TYPE,this.subGraphic=[],this._onInit&&this._onInit(this),this.valid=this.isValid()}setSubGraphic(e){this.detachSubGraphic(),(this.subGraphic=e).forEach(e=>{e.glyphHost=this,Object.setPrototypeOf(e.attribute,this.attribute)}),this.valid=this.isValid(),this.addUpdateBoundTag()}detachSubGraphic(){this.subGraphic.forEach(e=>{e.glyphHost=null,Object.setPrototypeOf(e.attribute,{})})}getSubGraphic(){return this.subGraphic}onInit(e){this._onInit=e}onUpdate(e){this._onUpdate=e}isValid(){return!0}setAttribute(e,t,i,r){super.setAttribute(e,t,i,r),this.subGraphic.forEach(e=>{e.addUpdateShapeAndBoundsTag(),e.addUpdatePositionTag()})}setAttributes(e,t=!1,i){super.setAttributes(e,t,i),this.subGraphic.forEach(e=>{e.addUpdateShapeAndBoundsTag(),e.addUpdatePositionTag()})}translate(e,t){return super.translate(e,t),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}translateTo(e,t){return super.translateTo(e,t),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}scale(e,t,i){return super.scale(e,t,i),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}scaleTo(e,t){return super.scaleTo(e,t),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}rotate(e){return super.rotate(e),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}rotateTo(e){return super.rotate(e),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}doUpdateAABBBounds(){this._AABBBounds.clear();var e=application.graphicService.updateGlyphAABBBounds(this.attribute,getTheme(this).glyph,this._AABBBounds,this);return this.clearUpdateBoundTag(),e}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}needUpdateTags(e){return!1}needUpdateTag(e){return!1}useStates(r,i){var e;if(r.length){if((null==(e=this.currentStates)?void 0:e.length)!==r.length||r.some((e,t)=>this.currentStates[t]!==e)){const n={},o=this.subGraphic.map(()=>({}));r.forEach(e=>{var t;const i=this.glyphStateProxy?this.glyphStateProxy(e,r):this.glyphStates[e];i&&(Object.assign(n,i.attributes),null!=(t=i.subAttributes))&&t.length&&o.forEach((e,t)=>{Object.assign(e,i.subAttributes[t])})}),this.subGraphic.forEach((e,t)=>{e.updateNormalAttrs(o[t]),e.applyStateAttrs(o[t],r,i)}),this.updateNormalAttrs(n),this.currentStates=r,this.applyStateAttrs(n,r,i)}}else this.clearStates(i)}clearStates(t){this.hasState()&&this.normalAttrs&&(this.subGraphic.forEach(e=>{e.applyStateAttrs(e.normalAttrs,this.currentStates,t,!0),e.normalAttrs=null}),this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0),this.normalAttrs=null,this.currentStates=[])}clone(){var e=new Kka(Object.assign({},this.attribute));return e.setSubGraphic(this.subGraphic.map(e=>e.clone())),e}getNoWorkAnimateAttr(){return Kka.NOWORK_ANIMATE_ATTR}};function createGlyph(e){return new Glyph(e)}Glyph.NOWORK_ANIMATE_ATTR=NOWORK_ANIMATE_ATTR,init_esbuild_inject(),init_esbuild_inject();var Frame=class{constructor(e,t,i,r,n,o,a,l,s,h,d,u,c,g){this.left=e,this.top=t,this.width=i,this.height=r,this.actualHeight=0,this.bottom=t+r,this.right=e+i,this.ellipsis=n,this.wordBreak=o,this.verticalDirection=a,this.lines=[],this.globalAlign=l,this.globalBaseline=s,this.layoutDirection=h,this.directionKey=DIRECTION_KEY[this.layoutDirection],this.isWidthMax=d,this.isHeightMax=u,this.singleLine=c,g?(g.clear(),this.icons=g):this.icons=new Map}draw(i,r){var{width:e,height:n}=this.getActualSize(),e=this.isWidthMax?Math.min(this.width,e):this.width||e||0,t=this.isHeightMax?Math.min(this.height,n):this.height||n||0,t=Math.min(t,n);let o=0;switch(this.globalBaseline){case\\\"top\\\":o=0;break;case\\\"middle\\\":o=-t/2;break;case\\\"bottom\\\":o=-t}let a=0,l=(\\\"right\\\"===this.globalAlign||\\\"end\\\"===this.globalAlign?a=-e:\\\"center\\\"===this.globalAlign&&(a=-e/2),this[this.directionKey.height]),s=(this.singleLine&&(l=this.lines[0].height+1),!1);if(\\\"middle\\\"===this.verticalDirection)if(this.actualHeight>=l&&0!==l)for(let t=0;t<this.lines.length;t++){var{top:h,height:d}=this.lines[t];if(h+d<this[this.directionKey.top]||h+d>this[this.directionKey.top]+l)return s;let e=!1;this.ellipsis&&this.lines[t+1]&&this.lines[t+1].top+this.lines[t+1].height>this[this.directionKey.top]+l&&(e=!0,s=!0),this.lines[t].draw(i,e,this.lines[t][this.directionKey.left]+a,this.lines[t][this.directionKey.top]+o,r)}else{n=Math.floor((l-this.actualHeight)/2);\\\"vertical\\\"===this.layoutDirection?a+=n:o+=n;for(let e=0;e<this.lines.length;e++)this.lines[e].draw(i,!1,this.lines[e][this.directionKey.left]+a,this.lines[e][this.directionKey.top]+o,r)}else if(\\\"bottom\\\"===this.verticalDirection&&\\\"vertical\\\"!==this.layoutDirection)for(let t=0;t<this.lines.length;t++){var u=this.lines[t][\\\"height\\\"],c=l-this.lines[t].top-this.lines[t].height;if(0===l)this.lines[t].draw(i,!1,a,c+o,r);else{if(c+u>this[this.directionKey.top]+l||c<this[this.directionKey.top])return s;{let e=!1;this.ellipsis&&this.lines[t+1]&&c-this.lines[t+1].height<this[this.directionKey.top]&&(e=!0,s=!0),this.lines[t].draw(i,e,a,c+o,r)}}}else{\\\"bottom\\\"===this.verticalDirection&&\\\"vertical\\\"===this.layoutDirection&&this.singleLine&&this.isWidthMax&&(a+=this.lines[0].height+1);for(let t=0;t<this.lines.length;t++){\\\"bottom\\\"===this.verticalDirection&&\\\"vertical\\\"===this.layoutDirection&&(a-=this.lines[t].height+this.lines[t].top);var{top:g,height:p}=this.lines[t];if(0===l)this.lines[t].draw(i,!1,this.lines[t][this.directionKey.left]+a,this.lines[t][this.directionKey.top]+o,r);else{if(g+p<this[this.directionKey.top]||g+p>this[this.directionKey.top]+l)return s;{let e=!1;this.ellipsis&&this.lines[t+1]&&this.lines[t+1].top+this.lines[t+1].height>this[this.directionKey.top]+l&&(e=!0,s=!0),this.lines[t].draw(i,e,this.lines[t][this.directionKey.left]+a,this.lines[t][this.directionKey.top]+o,r)}}}}return s}getActualSize(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}getRawActualSize(){let e=0,t=0;for(let r=0;r<this.lines.length;r++){var i=this.lines[r];i.actualWidth>e&&(e=i.actualWidth),t+=i.height}return{width:\\\"vertical\\\"===this.layoutDirection?t:e,height:\\\"vertical\\\"===this.layoutDirection?e:t}}getActualSizeWidthEllipsis(){let i=0,r=0;var e=this.getRawActualSize()[\\\"height\\\"],t=(this.width,this.height||e||0),t=Math.min(t,e);let n=this[this.directionKey.height];if(this.singleLine&&(n=this.lines[0].height+1),\\\"middle\\\"===this.verticalDirection)if(this.actualHeight>=n&&0!==n)for(let e=0;e<this.lines.length;e++){var{top:o,height:a}=this.lines[e];o+a<this[this.directionKey.top]||o+a>this[this.directionKey.top]+n||(this.ellipsis&&this.lines[e+1]&&this.lines[e+1].top+this.lines[e+1].height>this[this.directionKey.top]+n?(o=this.lines[e].getWidthWithEllips())>i&&(i=o):this.lines[e].actualWidth>i&&(i=this.lines[e].actualWidth),r+=this.lines[e].height)}else{Math.floor((n-this.actualHeight)/2);for(let e=0;e<this.lines.length;e++)this.lines[e].actualWidth>i&&(i=this.lines[e].actualWidth),r+=this.lines[e].height}else if(\\\"bottom\\\"===this.verticalDirection)for(let e=0;e<this.lines.length;e++){var l=this.lines[e][\\\"height\\\"],s=n-this.lines[e].top-this.lines[e].height;0===n?(this.lines[e].actualWidth>i&&(i=this.lines[e].actualWidth),r+=this.lines[e].height):s+l>this[this.directionKey.top]+n||s<this[this.directionKey.top]||(this.ellipsis&&this.lines[e+1]&&s-this.lines[e+1].height<this[this.directionKey.top]?(l=this.lines[e].getWidthWithEllips())>i&&(i=l):this.lines[e].actualWidth>i&&(i=this.lines[e].actualWidth),r+=this.lines[e].height)}else for(let t=0;t<this.lines.length;t++){var{top:h,height:d}=this.lines[t];0===n?(this.lines[t].actualWidth>i&&(i=this.lines[t].actualWidth),r+=this.lines[t].height):h+d<this[this.directionKey.top]||h+d>this[this.directionKey.top]+n||(this.ellipsis&&this.lines[t+1]&&this.lines[t+1].top+this.lines[t+1].height>this[this.directionKey.top]+n?(h=this.lines[t].getWidthWithEllips())>i&&(i=h):this.lines[t].actualWidth>i&&(i=this.lines[t].actualWidth),r+=this.lines[t].height)}return{width:\\\"vertical\\\"===this.layoutDirection?r:i,height:\\\"vertical\\\"===this.layoutDirection?i:r}}},Paragraph=(init_esbuild_inject(),class{constructor(e,t,i){this.fontSize=i.fontSize||16,this.textBaseline=i.textBaseline||\\\"alphabetic\\\";var r=calculateLineHeight(i.lineHeight,this.fontSize),{ascent:r,height:n,descent:o,width:a}=(this.lineHeight=\\\"number\\\"==typeof r?r>this.fontSize?r:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight,measureTextCanvas(e,i));let l=0,s=0,h=0;this.height>n&&(l=(this.height-n)/2,s=Math.ceil(l),h=Math.floor(l)),\\\"top\\\"===this.textBaseline?(this.ascent=l,this.descent=n-l):\\\"bottom\\\"===this.textBaseline?(this.ascent=n-l,this.descent=l):\\\"middle\\\"===this.textBaseline?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=r+s,this.descent=o+h),this.length=e.length,this.width=a||0,this.text=e||\\\"\\\",this.newLine=t||!1,this.character=i,this.left=0,this.top=0,this.ellipsis=\\\"normal\\\",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,\\\"vertical\\\"===i.direction&&(this.direction=i.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height)}updateWidth(){var e=measureTextCanvas(this.text,this.character)[\\\"width\\\"];this.width=e,\\\"vertical\\\"===this.direction&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}draw(e,t,i,r,n){let o=this.text,a=this.left+i,l=(t+=this.top,this.direction);if(this.verticalEllipsis)o=\\\"...\\\",l=\\\"vertical\\\",t-=this.ellipsisWidth/2;else{if(\\\"hide\\\"===this.ellipsis)return;var s;\\\"add\\\"===this.ellipsis?(o+=\\\"...\\\",\\\"right\\\"!==n&&\\\"end\\\"!==n||(a-=this.ellipsisWidth)):\\\"replace\\\"===this.ellipsis&&(s=getStrByWithCanvas(o,(\\\"vertical\\\"===l?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,o.length-1),o=o.slice(0,s),o+=\\\"...\\\",\\\"right\\\"!==n&&\\\"end\\\"!==n||(s=measureTextCanvas(this.text.slice(s),this.character)[\\\"width\\\"],\\\"vertical\\\"!==l&&(a-=this.ellipsisWidth-s)))}switch(this.character.script){case\\\"super\\\":t-=this.ascent*(1/3);break;case\\\"sub\\\":t+=this.descent/2}\\\"vertical\\\"===l&&(e.save(),e.rotateAbout(Math.PI/2,a,t),e.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),e.translate(a,t),t=a=0),this.character.stroke&&(applyStrokeStyle(e,this.character),e.strokeText(o,a,t)),applyFillStyle(e,this.character),this.character.fill&&e.fillText(o,a,t),this.character.fill&&(\\\"boolean\\\"==typeof this.character.lineThrough||\\\"boolean\\\"==typeof this.character.underline?(this.character.underline&&e.fillRect(a,1+t,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1),this.character.lineThrough&&e.fillRect(a,1+t-this.ascent/2,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)):\\\"underline\\\"===this.character.textDecoration?e.fillRect(a,1+t,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1):\\\"line-through\\\"===this.character.textDecoration&&e.fillRect(a,1+t-this.ascent/2,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)),\\\"vertical\\\"===l&&e.restore()}getWidthWithEllips(e){let t=this.text;var i,r=\\\"vertical\\\"===e?this.height:this.width;return\\\"hide\\\"===this.ellipsis?r:\\\"add\\\"===this.ellipsis?r+this.ellipsisWidth:\\\"replace\\\"===this.ellipsis?(i=getStrByWithCanvas(t,r-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,t.length-1),i=(t=t.slice(0,i),t+=\\\"...\\\",measureTextCanvas(this.text.slice(i),this.character))[\\\"width\\\"],r+this.ellipsisWidth-i):r}});function seperateParagraph(e,t){var i=e.text.slice(0,t),r=e.text.slice(t);return[new Paragraph(i,e.newLine,e.character),new Paragraph(r,!0,e.character)]}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var IMAGE_UPDATE_TAG_KEY=[\\\"width\\\",\\\"height\\\",\\\"image\\\",...GRAPHIC_UPDATE_TAG_KEY],Image2=class xna extends Graphic{constructor(e){super(e),this.type=\\\"image\\\",this.numberType=IMAGE_NUMBER_TYPE,this.loadImage(this.attribute.image)}get width(){var e;return null!=(e=this.attribute.width)?e:0}set width(e){this.attribute.width===e&&(this.attribute.width=e,this.addUpdateShapeAndBoundsTag())}get height(){var e;return null!=(e=this.attribute.height)?e:0}set height(e){this.attribute.height===e&&(this.attribute.height=e,this.addUpdateShapeAndBoundsTag())}get repeatX(){var e;return null!=(e=this.attribute.repeatX)?e:\\\"no-repeat\\\"}set repeatX(e){this.attribute.repeatX===e&&(this.attribute.repeatX=e)}get repeatY(){var e;return null!=(e=this.attribute.repeatY)?e:\\\"no-repeat\\\"}set repeatY(e){this.attribute.repeatY===e&&(this.attribute.repeatY=e)}get image(){return this.attribute.image}set image(e){e!==this.attribute.image&&(this.attribute.image=e,this.loadImage(this.attribute.image))}imageLoadSuccess(e,t,i){super.imageLoadSuccess(e,t,()=>{this.successCallback&&this.successCallback()})}imageLoadFail(e,t){super.imageLoadFail(e,()=>{this.failCallback&&this.failCallback()})}setAttributes(e,t,i){return e.image&&this.loadImage(e.image),super.setAttributes(e,t,i)}setAttribute(e,t,i,r){return\\\"image\\\"===e&&this.loadImage(t),super.setAttribute(e,t,i,r)}doUpdateAABBBounds(){var e=getTheme(this).image,t=(this._AABBBounds.clear(),this.attribute),i=application.graphicService.updateImageAABBBounds(t,getTheme(this).image,this._AABBBounds,this),{boundsPadding:t=e.boundsPadding}=t,e=parsePadding(t);return e&&i.expand(e),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}getDefaultAttribute(e){return DefaultImageAttribute[e]}needUpdateTags(e){return super.needUpdateTags(e,IMAGE_UPDATE_TAG_KEY)}needUpdateTag(e){return super.needUpdateTag(e,IMAGE_UPDATE_TAG_KEY)}clone(){return new xna(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return xna.NOWORK_ANIMATE_ATTR}};function createImage(e){return new Image2(e)}Image2.NOWORK_ANIMATE_ATTR=Object.assign({image:1,repeatX:1,repeatY:1},NOWORK_ANIMATE_ATTR);var RichTextIcon=class extends Image2{constructor(e){var t;super(e),this._x=0,this._y=0,this._hovered=!1,this._marginArray=[0,0,0,0],\\\"always\\\"===e.backgroundShowMode&&(this._hovered=!0),e.margin&&(t=parsePadding(e.margin),this._marginArray=\\\"number\\\"==typeof t?[t,t,t,t]:t),this.onBeforeAttributeUpdate=(e,t,i)=>{var r;(isArray_default(i)&&-1!==i.indexOf(\\\"margin\\\")||\\\"margin\\\"===i)&&(t.margin?(r=parsePadding(t.margin),this._marginArray=\\\"number\\\"==typeof r?[r,r,r,r]:r):this._marginArray=[0,0,0,0])}}get width(){var e;return(null!=(e=this.attribute.width)?e:0)+this._marginArray[1]+this._marginArray[3]}get height(){var e;return(null!=(e=this.attribute.height)?e:0)+this._marginArray[0]+this._marginArray[2]}tryUpdateAABBBounds(){var e,t,i,r;return this.shouldUpdateAABBBounds()&&(this.doUpdateAABBBounds(),({width:e=DefaultImageAttribute.width,height:t=DefaultImageAttribute.height}=this.attribute),({backgroundWidth:i=e,backgroundHeight:r=t}=this.attribute),this._AABBBounds.expand([0,2*((i-e)/2),2*((r-t)/2),0])),this._AABBBounds}setHoverState(e){\\\"hover\\\"===this.attribute.backgroundShowMode&&this._hovered!==e&&(this._hovered=e)}},Line2=class{constructor(e,t,i,r,n,o,a,l){this.left=e,this.width=t,this.baseline=i,this.ascent=r,this.descent=n,this.top=i-r,this.paragraphs=o.map(e=>e),this.textAlign=(this.paragraphs[0]instanceof RichTextIcon?this.paragraphs[0].attribute:this.paragraphs[0].character).textAlign||\\\"left\\\",this.direction=a,this.directionKey=DIRECTION_KEY[this.direction];let s=this.actualWidth=0;this.paragraphs.forEach((e,t)=>{var i;0===t&&e instanceof Paragraph&&0!==(null==(i=regFirstSpace.exec(e.text))?void 0:i.index)&&(e.text=e.text.slice(null==i?void 0:i.index),e.updateWidth()),this.actualWidth+=e[this.directionKey.width],s=Math.max(e[this.directionKey.height],s)}),this.height=s,this.blankWidth=l?0:this.width-this.actualWidth,this.calcOffset(t,l)}calcOffset(e,t){const i=this.directionKey,r=this.height;let n=this.left,o=0;this.actualWidth<e&&!t&&(\\\"right\\\"===this.textAlign||\\\"end\\\"===this.textAlign?n=e-this.actualWidth:\\\"center\\\"===this.textAlign?n=(e-this.actualWidth)/2:\\\"justify\\\"===this.textAlign&&(this.paragraphs.length<2?n=(e-this.actualWidth)/2:o=(e-this.actualWidth)/(this.paragraphs.length-1))),this.paragraphs.map(function(e){e instanceof RichTextIcon?(e[\\\"_\\\"+i.x]=n,n+=e[i.width]+o,e[\\\"_\\\"+i.y]=\\\"top\\\"===e.attribute.textBaseline?0:\\\"bottom\\\"===e.attribute.textBaseline?r-e.height:(r-e.height)/2):(e[i.left]=n,n+=e[i.width]+o)})}draw(i,e,r,n,o){if(e){let e=0;for(let t=this.paragraphs.length-1;0<=t;t--){var a=this.paragraphs[t];if(a instanceof RichTextIcon)break;if(\\\"vertical\\\"===this.direction&&\\\"vertical\\\"!==a.direction){a.verticalEllipsis=!0;break}var l=measureTextCanvas(\\\"...\\\",a.character)[\\\"width\\\"],l=l||0;if(l<=this.blankWidth+e){a.ellipsis=\\\"add\\\";break}if(l<=this.blankWidth+e+a.width){a.ellipsis=\\\"replace\\\",a.ellipsisWidth=l,a.ellipsisOtherParagraphWidth=this.blankWidth+e;break}a.ellipsis=\\\"hide\\\",e+=a.width}}this.paragraphs.map((e,t)=>{e instanceof RichTextIcon?(e.setAttributes({x:r+e._x,y:n+e._y}),o(e,i,r+e._x,n+e._y,this.ascent)):e.draw(i,n+this.ascent,r,0===t,this.textAlign)})}getWidthWithEllips(){let e=0;for(let n=this.paragraphs.length-1;0<=n;n--){var t=this.paragraphs[n];if(t instanceof RichTextIcon)break;var i=measureTextCanvas(\\\"...\\\",t.character)[\\\"width\\\"],i=i||0;if(i<=this.blankWidth+e){t.ellipsis=\\\"add\\\",t.ellipsisWidth=i;break}if(i<=this.blankWidth+e+t.width){t.ellipsis=\\\"replace\\\",t.ellipsisWidth=i,t.ellipsisOtherParagraphWidth=this.blankWidth+e;break}t.ellipsis=\\\"hide\\\",e+=t.width}let r=0;return this.paragraphs.map((e,t)=>{r+=e instanceof RichTextIcon?e.width:e.getWidthWithEllips(this.direction)}),r}},Wrapper=class{constructor(e){this.frame=e,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=e.layoutDirection,this.directionKey=DIRECTION_KEY[this.direction]}store(i){if(i instanceof RichTextIcon){this.frame.icons.set(i.richtextId,i),this.lineBuffer.push(i),this.lineWidth+=i[this.directionKey.width];let e=0,t=0;t=\\\"top\\\"===i.attribute.textBaseline?(e=0,i.height):\\\"bottom\\\"===i.attribute.textBaseline?(e=i.height,0):(e=i.height/2,i.height/2),this.maxAscent=Math.max(this.maxAscent,e),this.maxDescent=Math.max(this.maxDescent,t)}else this.lineBuffer.push(i),0!==i.text.length?(this.lineWidth+=i[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,i.ascent),this.maxDescent=Math.max(this.maxDescent,i.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,i.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,i.descent))}send(){var e,t;0!==this.lineBuffer.length&&(t=0===this.maxAscent?this.maxAscentForBlank:this.maxAscent,e=0===this.maxDescent?this.maxDescentForBlank:this.maxDescent,t=new Line2(this.frame.left,this[this.directionKey.width],this.y+t,t,e,this.lineBuffer,this.direction,\\\"horizontal\\\"===this.direction?this.frame.isWidthMax:this.frame.isHeightMax),this.frame.lines.push(t),this.frame.actualHeight+=t.height,this.y+=t.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0)}deal(e){e instanceof RichTextIcon?\\\"horizontal\\\"===this.direction&&0===this.width||\\\"vertical\\\"===this.direction&&0===this.height||this.lineWidth+e[this.directionKey.width]<=this[this.directionKey.width]?this.store(e):0===this.lineBuffer.length?(this.store(e),this.send()):(this.send(),this.deal(e)):\\\"number\\\"!=typeof this.width||this.width<0||(e.newLine&&this.send(),0!==e.text.length&&(\\\"horizontal\\\"===this.direction&&0===this.width||\\\"vertical\\\"===this.direction&&0===this.height||this.lineWidth+e[this.directionKey.width]<=this[this.directionKey.width]?this.store(e):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(e)):this.cut(e)))}cut(e){var t=this[this.directionKey.width]-this.lineWidth||0,i=Math.ceil(t/e[this.directionKey.width]*e.length)||0,t=getStrByWithCanvas(e.text,t,e.character,i,\\\"break-word\\\"===this.frame.wordBreak);0!==t?(([i,t]=seperateParagraph(e,t)),this.store(i),this.deal(t)):0!==this.lineBuffer.length&&(this.send(),this.deal(e))}},RICHTEXT_UPDATE_TAG_KEY=[\\\"width\\\",\\\"height\\\",\\\"ellipsis\\\",\\\"wordBreak\\\",\\\"verticalDirection\\\",\\\"maxHeight\\\",\\\"maxWidth\\\",\\\"textAlign\\\",\\\"textBaseline\\\",\\\"textConfig\\\",\\\"layoutDirection\\\",...GRAPHIC_UPDATE_TAG_KEY],RichText=class qpa extends Graphic{constructor(e){super(e),this.type=\\\"richtext\\\",this._currentHoverIcon=null,this.numberType=RICHTEXT_NUMBER_TYPE}get width(){var e;return null!=(e=this.attribute.width)?e:DefaultRichTextAttribute.width}set width(e){this.attribute.width!==e&&(this.attribute.width=e,this.addUpdateShapeAndBoundsTag())}get height(){var e;return null!=(e=this.attribute.height)?e:DefaultRichTextAttribute.height}set height(e){this.attribute.height!==e&&(this.attribute.height=e,this.addUpdateShapeAndBoundsTag())}get maxWidth(){return this.attribute.maxWidth}set maxWidth(e){this.attribute.maxWidth!==e&&(this.attribute.maxWidth=e,this.addUpdateShapeAndBoundsTag())}get maxHeight(){return this.attribute.maxHeight}set maxHeight(e){this.attribute.maxHeight!==e&&(this.attribute.maxHeight=e,this.addUpdateShapeAndBoundsTag())}get ellipsis(){var e;return null!=(e=this.attribute.ellipsis)?e:DefaultRichTextAttribute.ellipsis}set ellipsis(e){this.attribute.ellipsis!==e&&(this.attribute.ellipsis=e,this.addUpdateShapeAndBoundsTag())}get wordBreak(){var e;return null!=(e=this.attribute.wordBreak)?e:DefaultRichTextAttribute.wordBreak}set wordBreak(e){this.attribute.wordBreak!==e&&(this.attribute.wordBreak=e,this.addUpdateShapeAndBoundsTag())}get verticalDirection(){var e;return null!=(e=this.attribute.verticalDirection)?e:DefaultRichTextAttribute.verticalDirection}set verticalDirection(e){this.attribute.verticalDirection!==e&&(this.attribute.verticalDirection=e,this.addUpdateShapeAndBoundsTag())}get textAlign(){var e;return null!=(e=this.attribute.textAlign)?e:DefaultRichTextAttribute.textAlign}set textAlign(e){this.attribute.textAlign!==e&&(this.attribute.textAlign=e,this.addUpdateShapeAndBoundsTag())}get textBaseline(){var e;return null!=(e=this.attribute.textBaseline)?e:DefaultRichTextAttribute.textBaseline}set textBaseline(e){this.attribute.textBaseline!==e&&(this.attribute.textBaseline=e,this.addUpdateShapeAndBoundsTag())}get textConfig(){var e;return null!=(e=this.attribute.textConfig)?e:DefaultRichTextAttribute.textConfig}set textConfig(e){this.attribute.textConfig=e,this.addUpdateShapeAndBoundsTag()}doUpdateAABBBounds(){var e=getTheme(this).richtext,t=(this._AABBBounds.clear(),this.attribute),i=application.graphicService.updateRichTextAABBBounds(t,getTheme(this).richtext,this._AABBBounds,this),{boundsPadding:t=e.boundsPadding}=t,e=parsePadding(t);return e&&i.expand(e),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}getDefaultAttribute(e){return DefaultRichTextAttribute[e]}needUpdateTags(e){return super.needUpdateTags(e,RICHTEXT_UPDATE_TAG_KEY)}needUpdateTag(e){return super.needUpdateTag(e,RICHTEXT_UPDATE_TAG_KEY)}getFrameCache(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}combinedStyleToCharacter(e){var{fill:t,stroke:i,fontSize:r,fontFamily:n,fontStyle:o,fontWeight:a,lineWidth:l}=this.attribute;return Object.assign({fill:t,stroke:i,fontSize:r,fontFamily:n,fontStyle:o,fontWeight:a,lineWidth:l},e)}doUpdateFrameCache(){var{textConfig:e=[],maxWidth:i,maxHeight:r,width:t,height:n,ellipsis:o,wordBreak:a,verticalDirection:l,textAlign:s,textBaseline:h,layoutDirection:d,singleLine:u}=this.attribute,c=[];for(let w=0;w<e.length;w++)if(\\\"image\\\"in e[w]){var g=this.combinedStyleToCharacter(e[w]),p=g.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(g.id);p?c.push(p):((p=new RichTextIcon(g)).successCallback=()=>{var e;this.addUpdateBoundTag(),null!=(e=this.stage)&&e.renderNextFrame()},p.richtextId=g.id,c.push(p))}else{var f=this.combinedStyleToCharacter(e[w]);if(isNumber_default(f.text)&&(f.text=\\\"\\\"+f.text),f.text&&f.text.includes(\\\"\\\\n\\\")){var m=f.text.split(\\\"\\\\n\\\");for(let e=0;e<m.length;e++)c.push(new Paragraph(m[e],0!==e,f))}else f.text&&c.push(new Paragraph(f.text,!1,f))}var b=\\\"number\\\"==typeof i&&Number.isFinite(i)&&0<i,v=\\\"number\\\"==typeof r&&Number.isFinite(r)&&0<r,C=\\\"number\\\"==typeof t&&Number.isFinite(t)&&0<t&&(!b||t<=i),y=\\\"number\\\"==typeof n&&Number.isFinite(n)&&0<n&&(!v||n<=r),n=new Frame(0,0,(C?t:b?i:0)||0,(y?n:v?r:0)||0,o,a,l,s,h,d||\\\"horizontal\\\",!C&&b,!y&&v,u||!1,null==(t=this._frameCache)?void 0:t.icons),_=new Wrapper(n);for(let x=0;x<c.length;x++)_.deal(c[x]);if(_.send(),!(\\\"horizontal\\\"===n.layoutDirection?C:y)){o=n.getActualSizeWidthEllipsis();let t=\\\"horizontal\\\"===n.layoutDirection?o.width:o.height;(\\\"horizontal\\\"===n.layoutDirection?b:v)&&(t=Math.min(t,\\\"horizontal\\\"===n.layoutDirection?i:r)),n.lines.forEach(function(e){e.calcOffset(t,!1)})}this._frameCache=n}clone(){return new qpa(Object.assign({},this.attribute))}setStage(t,i){super.setStage(t,i),this.getFrameCache().icons.forEach(e=>{e.setStage(t,i)})}bindIconEvent(){this.addEventListener(\\\"pointermove\\\",e=>{var t,i=this.pickIcon(e.global);i&&i===this._currentHoverIcon||(i?(null!=(t=this._currentHoverIcon)&&t.setHoverState(!1),this._currentHoverIcon=i,this._currentHoverIcon.setHoverState(!0),null!=(t=this.stage)&&t.setCursor(i.attribute.cursor),null!=(t=this.stage)&&t.renderNextFrame()):!i&&this._currentHoverIcon&&(this._currentHoverIcon.setHoverState(!1),(this._currentHoverIcon=null)!=(t=this.stage)&&t.setCursor(),null!=(i=this.stage))&&i.renderNextFrame())}),this.addEventListener(\\\"pointerleave\\\",e=>{var t;this._currentHoverIcon&&(this._currentHoverIcon.setHoverState(!1),(this._currentHoverIcon=null)!=(t=this.stage)&&t.setCursor(),null!=(t=this.stage))&&t.renderNextFrame()})}pickIcon(i){const e=this.getFrameCache(),{e:r,f:n}=this.globalTransMatrix;let o;return e.icons.forEach(e=>{var t;e.AABBBounds.containsPoint({x:i.x-r,y:i.y-n})&&((o=e).globalX=(null!=(t=o.attribute.x)?t:0)+r,o.globalY=(null!=(t=o.attribute.y)?t:0)+n)}),o}getNoWorkAnimateAttr(){return qpa.NOWORK_ANIMATE_ATTR}};function createRichText(e){return new RichText(e)}RichText.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,verticalDirection:1,textAlign:1,textBaseline:1,textConfig:1,layoutDirection:1},NOWORK_ANIMATE_ATTR),init_esbuild_inject();var PATH_UPDATE_TAG_KEY=[\\\"path\\\",\\\"customPath\\\",...GRAPHIC_UPDATE_TAG_KEY],Path=class $qa extends Graphic{constructor(e){super(e),this.type=\\\"path\\\",this.numberType=PATH_NUMBER_TYPE}get pathShape(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}isValid(){return super.isValid()&&this._isValid()}_isValid(){var e=this.attribute[\\\"path\\\"];return null!=e&&\\\"\\\"!==e}getParsedPathShape(){var e,t=getTheme(this).path;return this.valid?(e=this.attribute).path instanceof CustomPath2D?e.path:(isNil_default(this.cache)&&this.doUpdatePathShape(),this.cache instanceof CustomPath2D?this.cache:t.path):t.path}doUpdateAABBBounds(){var e=getTheme(this).path,t=(this.doUpdatePathShape(),this._AABBBounds.clear(),this.attribute),i=application.graphicService.updatePathAABBBounds(t,getTheme(this).path,this._AABBBounds,this),{boundsPadding:t=e.boundsPadding}=t,e=parsePadding(t);return e&&i.expand(e),this.clearUpdateBoundTag(),i}doUpdatePathShape(){var e=this.attribute;isString_default(e.path,!0)?this.cache=(new CustomPath2D).fromString(e.path):e.customPath&&(this.cache=new CustomPath2D,e.customPath(this.cache,this))}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}getDefaultAttribute(e){return getTheme(this).path[e]}needUpdateTags(e){return super.needUpdateTags(e,PATH_UPDATE_TAG_KEY)}needUpdateTag(e){return super.needUpdateTag(e,PATH_UPDATE_TAG_KEY)}toCustomPath(){return(new CustomPath2D).fromCustomPath2D(this.getParsedPathShape(),0,0)}clone(){return new $qa(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return $qa.NOWORK_ANIMATE_ATTR}};function createPath(e){return new Path(e)}Path.NOWORK_ANIMATE_ATTR=Object.assign({path:1,customPath:1},NOWORK_ANIMATE_ATTR),init_esbuild_inject();var AREA_UPDATE_TAG_KEY=[\\\"segments\\\",\\\"points\\\",\\\"curveType\\\",...GRAPHIC_UPDATE_TAG_KEY],Area=class nra extends Graphic{constructor(e){super(e),this.type=\\\"area\\\",this.numberType=AREA_NUMBER_TYPE}isValid(){return super.isValid()&&this._isValid()}_isValid(){var e,t;return!!this.pathProxy||(({points:e,segments:t}=this.attribute),t?0!==t.length:!!e&&0!==e.length)}doUpdateAABBBounds(){var e=getTheme(this).area,t=(this._AABBBounds.clear(),this.attribute),i=application.graphicService.updateAreaAABBBounds(t,getTheme(this).area,this._AABBBounds,this),{boundsPadding:t=e.boundsPadding}=t,e=parsePadding(t);return e&&i.expand(e),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}_interpolate(e,t,i,r,n){\\\"points\\\"===e&&(n.points=pointsInterpolation(i,r,t))}getDefaultAttribute(e){return getTheme(this).area[e]}needUpdateTags(e){return super.needUpdateTags(e,AREA_UPDATE_TAG_KEY)}needUpdateTag(e){return super.needUpdateTag(e,AREA_UPDATE_TAG_KEY)}toCustomPath(){const n=new CustomPath2D,e=this.attribute,t=e.segments,i=e=>{if(e&&e.length){let i=!0;const r=[];if(e.forEach(e=>{var t;!1!==e.defined&&(i?n.moveTo(e.x,e.y):n.lineTo(e.x,e.y),r.push({x:null!=(t=e.x1)?t:e.x,y:null!=(t=e.y1)?t:e.y}),i=!1)}),r.length){for(let e=r.length-1;0<=e;e--)n.lineTo(r[e].x,r[e].y);n.closePath()}}};return e.points?i(e.points):t&&t.length&&t.forEach(e=>{i(e.points)}),n}clone(){return new nra(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return nra.NOWORK_ANIMATE_ATTR}};function createArea(e){return new Area(e)}Area.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},NOWORK_ANIMATE_ATTR),init_esbuild_inject();var ARC_UPDATE_TAG_KEY=[\\\"innerRadius\\\",\\\"outerRadius\\\",\\\"startAngle\\\",\\\"endAngle\\\",\\\"cornerRadius\\\",\\\"padAngle\\\",\\\"padRadius\\\",\\\"cap\\\",...GRAPHIC_UPDATE_TAG_KEY],Arc=class Rra extends Graphic{constructor(e){super(e),this.type=\\\"arc\\\",this.numberType=ARC_NUMBER_TYPE}isValid(){return super.isValid()&&this._isValid()}_isValid(){var{startAngle:e,endAngle:t,outerRadius:i,innerRadius:r}=this.attribute;return this._validNumber(e)&&this._validNumber(t)&&this._validNumber(i)&&this._validNumber(r)}getParsedCornerRadius(){var e=getTheme(this).arc,{cornerRadius:t=e.cornerRadius,innerPadding:i=e.innerPadding,outerPadding:r=e.outerPadding}=this.attribute,{outerRadius:n=e.outerRadius,innerRadius:e=e.innerRadius}=this.attribute;return n+=r,e-=i,0===t||\\\"0%\\\"===t?0:(r=Math.abs(n-e),Math.min(isNumber_default(t,!0)?t:r*parseFloat(t)/100,r/2))}getParsedAngle(){var i=getTheme(this).arc,{startAngle:r=i.startAngle,endAngle:n=i.endAngle}=this.attribute,{cap:o=i.cap}=this.attribute,a=0<=n-r?1:-1,l=n-r,n=(r=clampAngleByRadian(r))+l;if(o&&abs(l)<pi2-epsilon){let e=1,t=1;o.length&&(e=Number(o[0]),t=Number(o[1]));var{outerRadius:l=i.outerRadius,innerRadius:o=i.innerRadius}=this.attribute,{outerPadding:s=i.outerPadding,innerPadding:i=i.innerPadding}=this.attribute,s=(l+=s,o-=i,Math.abs(l-o)/2),i=s/l;if(epsilon<s&&epsilon<l)return{startAngle:r-a*i*e,endAngle:n+a*i*t,sc:a*i*e,ec:a*i*t}}return{startAngle:r,endAngle:n}}getParsePadAngle(e,t){var i=getTheme(this).arc,{innerPadding:r=i.innerPadding,outerPadding:n=i.outerPadding,padAngle:o=i.padAngle}=this.attribute,{outerRadius:a=i.outerRadius,innerRadius:i=i.innerRadius}=this.attribute,{padRadius:n=sqrt(a*a+i*i)}=(a+=n,i-=r,this.attribute),r=abs(t-e);let l=e,s=t,h=e,d=t;o/=2;let u=r,c=r;return epsilon<o&&epsilon<n&&(r=e<t?1:-1,i=asin(Number(n)/i*sin(o)),n=asin(Number(n)/a*sin(o)),(u-=2*i)>epsilon?(i*=r,h+=i,d-=i):(u=0,h=d=(e+t)/2),(c-=2*n)>epsilon?(n*=r,l+=n,s-=n):(c=0,l=s=(e+t)/2)),{outerStartAngle:l,outerEndAngle:s,innerStartAngle:h,innerEndAngle:d,innerDeltaAngle:u,outerDeltaAngle:c}}doUpdateAABBBounds(e){var t=getTheme(this).arc,i=(this._AABBBounds.clear(),this.attribute),r=application.graphicService.updateArcAABBBounds(i,getTheme(this).arc,this._AABBBounds,e,this),{boundsPadding:i=t.boundsPadding}=i,t=parsePadding(i);return t&&r.expand(t),this.clearUpdateBoundTag(),r}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}needUpdateTags(e){return super.needUpdateTags(e,ARC_UPDATE_TAG_KEY)}needUpdateTag(e){return super.needUpdateTag(e,ARC_UPDATE_TAG_KEY)}getDefaultAttribute(e){return getTheme(this).arc[e]}toCustomPath(){var e=this.attribute,{startAngle:t,endAngle:i}=this.getParsedAngle();let r=e.innerRadius-(e.innerPadding||0),n=e.outerRadius-(e.outerPadding||0);var o,a,l,e=abs(i-t),s=t<i,h=(n<r&&(h=n,n=r,r=h),new CustomPath2D);return n<=epsilon?h.moveTo(0,0):pi2-epsilon<=e?(h.moveTo(0+n*cos(t),0+n*sin(t)),h.arc(0,0,n,t,i,!s),r>epsilon&&(h.moveTo(0+r*cos(i),0+r*sin(i)),h.arc(0,0,r,i,t,s))):(e=n*cos(t),o=n*sin(t),a=r*cos(i),l=r*sin(i),h.moveTo(0+e,0+o),h.arc(0,0,n,t,i,!s),h.lineTo(0+a,0+l),h.arc(0,0,r,i,t,s),h.closePath()),h}clone(){return new Rra(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Rra.NOWORK_ANIMATE_ATTR}};function createArc(e){return new Arc(e)}Arc.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},NOWORK_ANIMATE_ATTR),init_esbuild_inject();var Arc3d=class fta extends Arc{constructor(e){super(e),this.type=\\\"arc3d\\\",this.numberType=ARC3D_NUMBER_TYPE}doUpdateAABBBounds(){var e=getTheme(this).arc,t=(this._AABBBounds.clear(),this.attribute),i=application.graphicService.updateArc3dAABBBounds(t,getTheme(this).polygon,this._AABBBounds,this),{boundsPadding:t=e.boundsPadding}=t,e=parsePadding(t);return e&&i.expand(e),this.clearUpdateBoundTag(),this._AABBBounds}getNoWorkAnimateAttr(){return fta.NOWORK_ANIMATE_ATTR}};function createArc3d(e){return new Arc3d(e)}Arc3d.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},NOWORK_ANIMATE_ATTR),init_esbuild_inject();var POLYGON_UPDATE_TAG_KEY=[\\\"points\\\",\\\"cornerRadius\\\",...GRAPHIC_UPDATE_TAG_KEY],Polygon=class nta extends Graphic{constructor(e){super(e),this.type=\\\"polygon\\\",this.numberType=POLYGON_NUMBER_TYPE}isValid(){return super.isValid()&&this._isValid()}_isValid(){var e=this.attribute[\\\"points\\\"];return e&&2<=e.length}doUpdateAABBBounds(){var e=getTheme(this).polygon,t=(this._AABBBounds.clear(),this.attribute),i=application.graphicService.updatePolygonAABBBounds(t,getTheme(this).polygon,this._AABBBounds,this),{boundsPadding:t=e.boundsPadding}=t,e=parsePadding(t);return e&&i.expand(e),this.clearUpdateBoundTag(),this._AABBBounds}tryUpdateOBBBounds(){throw new Error(\\\"暂不支持\\\")}_interpolate(e,t,i,r,n){\\\"points\\\"===e&&(n.points=pointsInterpolation(i,r,t))}getDefaultAttribute(e){return getTheme(this).polygon[e]}needUpdateTags(e){return super.needUpdateTags(e,POLYGON_UPDATE_TAG_KEY)}needUpdateTag(e){return super.needUpdateTag(e,POLYGON_UPDATE_TAG_KEY)}toCustomPath(){const e=this.attribute.points,i=new CustomPath2D;return e.forEach((e,t)=>{0===t?i.moveTo(e.x,e.y):i.lineTo(e.x,e.y)}),i.closePath(),i}clone(){return new nta(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return nta.NOWORK_ANIMATE_ATTR}};function createPolygon(e){return new Polygon(e)}Polygon.NOWORK_ANIMATE_ATTR=NOWORK_ANIMATE_ATTR,init_esbuild_inject();var Pyramid3d=class Ita extends Polygon{constructor(e){super(e),this.type=\\\"pyramid3d\\\",this.numberType=PYRAMID3D_NUMBER_TYPE}doUpdateAABBBounds(){var e=getTheme(this).polygon,t=(this._AABBBounds.clear(),this.attribute),i=application.graphicService.updatePyramid3dAABBBounds(t,getTheme(this).polygon,this._AABBBounds,this),{boundsPadding:t=e.boundsPadding}=t,e=parsePadding(t);return e&&i.expand(e),this.clearUpdateBoundTag(),this._AABBBounds}findFace(){const n=this.attribute[\\\"points\\\"],t=n.map((e,t)=>{var i=3===t?n[0]:n[t+1],r=e.x-i.x;return 0==r?0:(e.y-i.y)/r}),i=n.map(e=>({p:e,d:0}));let r=!1,o=0;for(let h=0;h<t.length-1;h++){for(let e=h+1;e<t.length;e++){var a;if(t[h]===t[e]&&(r=!0,a=PointService.distancePP(i[h].p,i[h+1].p),i[h].d=a,i[h+1].d=a,o=max(o,a),a=PointService.distancePP(i[e].p,i[e+1].p),i[e].d=a,i[e+1].d=a,o=max(o,a)),r)break}if(r)break}for(let d=n.length-1;0<=d;d--){var e=n[d];i.unshift({p:e,d:0})}for(let u=0;u<n.length;u++){var l=(o-i[u+n.length].d)/2;i[u].d+=l,i[u+n.length].d+=l}const s={polygons:[],vertices:[],edges:[]};return i.forEach(e=>{s.vertices.push([e.p.x,e.p.y,e.d])}),s.polygons.push({polygon:[0,4,5,1],normal:[0,-1,0]}),s.polygons.push({polygon:[7,6,2,3],normal:[0,1,0]}),s.polygons.push({polygon:[0,4,7,3],normal:[-1,0,0]}),s.polygons.push({polygon:[1,5,6,2],normal:[1,0,0]}),s.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),s.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),s.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],s}_isValid(){return super._isValid()&&4===this.attribute.points.length}getNoWorkAnimateAttr(){return Ita.NOWORK_ANIMATE_ATTR}};function createPyramid3d(e){return new Pyramid3d(e)}Pyramid3d.NOWORK_ANIMATE_ATTR=NOWORK_ANIMATE_ATTR,init_esbuild_inject();var ShadowRoot=class extends Group{constructor(e){super({x:0,y:0}),this.type=\\\"shadowroot\\\",this.shadowHost=e}addUpdateBoundTag(){super.addUpdateBoundTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}addUpdateShapeAndBoundsTag(){super.addUpdateShapeAndBoundsTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}tryUpdateGlobalTransMatrix(e=!0){var t;return this.shouldUpdateGlobalMatrix()&&(t=this.transMatrix,this._globalTransMatrix?this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f):this._globalTransMatrix=t.clone(),this.doUpdateGlobalMatrix(),e)&&this.clearUpdateGlobalPositionTag(),this._globalTransMatrix}doUpdateGlobalMatrix(){var e;this.shadowHost&&(e=this.shadowHost.globalTransMatrix,this._globalTransMatrix.multiply(e.a,e.b,e.c,e.d,e.e,e.f))}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}};function createShadowRoot(e){return new ShadowRoot(e)}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var DefaultOuterBorderBoundsContribution=class{updateBounds(e,t,i,r){var n,{outerBorder:o,shadowBlur:a=t.shadowBlur}=e;return o&&(n=t.outerBorder,({distance:o=n.distance,lineWidth:n=n.lineWidth}=o),i.expand(o+(a+n)/2)),i}},DefaultSymbolOuterBorderBoundsContribution=class extends DefaultOuterBorderBoundsContribution{updateBounds(e,t,i,r){var n,{outerBorder:o,shadowBlur:a=t.shadowBlur,strokeBoundsBuffer:l=t.strokeBoundsBuffer}=e;return o&&(n=t.outerBorder,({distance:o=n.distance,lineWidth:n=n.lineWidth}=o),boundStroke(i,o+(a+n)/2,!0,l)),i}},MatrixAllocate=(init_esbuild_inject(),Symbol[\\\"for\\\"](\\\"MatrixAllocate\\\")),Mat4Allocate=Symbol[\\\"for\\\"](\\\"Mat4Allocate\\\");function createMat4(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}var DefaultMatrixAllocate=class{constructor(){this.pools=[]}allocate(e,t,i,r,n,o){var a;return this.pools.length?((a=this.pools.pop()).a=e,a.b=t,a.c=i,a.d=r,a.e=n,a.f=o,a):new Matrix(e,t,i,r,n,o)}allocateByObj(e){var t;return this.pools.length?((t=this.pools.pop()).a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,t):new Matrix(e.a,e.b,e.c,e.d,e.e,e.f)}free(e){this.pools.push(e)}get length(){return this.pools.length}release(){this.pools=[]}},DefaultMat4Allocate=class Rua{constructor(){this.pools=[]}static identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}allocate(){var e;return this.pools.length?(e=this.pools.pop(),Rua.identity(e),e):createMat4()}allocateByObj(e){var t=this.pools.length?this.pools.pop():createMat4();for(let i=0;i<t.length;i++)t[i]=e[i];return t}free(e){e&&this.pools.push(e)}get length(){return this.pools.length}release(){this.pools=[]}},matrixAllocate=new DefaultMatrixAllocate,mat4Allocate=new DefaultMat4Allocate,__decorate7=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata5=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param3=function(i,r){return function(e,t){r(e,t,i)}};function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function rotateX(e,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[4],a=t[5],l=t[6],s=t[7],h=t[8],d=t[9],u=t[10],c=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+h*r,e[5]=a*n+d*r,e[6]=l*n+u*r,e[7]=s*n+c*r,e[8]=h*n-o*r,e[9]=d*n-a*r,e[10]=u*n-l*r,e[11]=c*n-s*r,e}function rotateY(e,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[0],a=t[1],l=t[2],s=t[3],h=t[8],d=t[9],u=t[10],c=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-h*r,e[1]=a*n-d*r,e[2]=l*n-u*r,e[3]=s*n-c*r,e[8]=o*r+h*n,e[9]=a*r+d*n,e[10]=l*r+u*n,e[11]=s*r+c*n,e}function rotateZ(e,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[0],a=t[1],l=t[2],s=t[3],h=t[4],d=t[5],u=t[6],c=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+h*r,e[1]=a*n+d*r,e[2]=l*n+u*r,e[3]=s*n+c*r,e[4]=h*n-o*r,e[5]=d*n-a*r,e[6]=u*n-l*r,e[7]=c*n-s*r,e}function translate(e,t,i){var r,n,o,a,l,s,h,d,u,c,g,p,f=i[0],m=i[1],b=i[2];return t===e?(e[12]=t[0]*f+t[4]*m+t[8]*b+t[12],e[13]=t[1]*f+t[5]*m+t[9]*b+t[13],e[14]=t[2]*f+t[6]*m+t[10]*b+t[14],e[15]=t[3]*f+t[7]*m+t[11]*b+t[15]):(r=t[0],n=t[1],o=t[2],a=t[3],l=t[4],s=t[5],h=t[6],d=t[7],u=t[8],c=t[9],g=t[10],p=t[11],e[0]=r,e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=s,e[6]=h,e[7]=d,e[8]=u,e[9]=c,e[10]=g,e[11]=p,e[12]=r*f+l*m+u*b+t[12],e[13]=n*f+s*m+c*b+t[13],e[14]=o*f+h*m+g*b+t[14],e[15]=a*f+d*m+p*b+t[15]),e}function mat3Tomat4(e,t){e[0]=t.a,e[1]=t.b,e[2]=0,e[3]=0,e[4]=t.c,e[5]=t.d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t.e,e[13]=t.f,e[14]=0,e[15]=1}function scale2(e,t,i){var r=i[0],n=i[1],o=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function multiplyMat4Mat4(e,t,i){var r=t[0],n=t[1],o=t[2],a=t[3],l=t[4],s=t[5],h=t[6],d=t[7],u=t[8],c=t[9],g=t[10],p=t[11],f=t[12],m=t[13],b=t[14],v=t[15],C=i[0],y=i[1],_=i[2],w=i[3];return e[0]=C*r+y*l+_*u+w*f,e[1]=C*n+y*s+_*c+w*m,e[2]=C*o+y*h+_*g+w*b,e[3]=C*a+y*d+_*p+w*v,C=i[4],y=i[5],_=i[6],w=i[7],e[4]=C*r+y*l+_*u+w*f,e[5]=C*n+y*s+_*c+w*m,e[6]=C*o+y*h+_*g+w*b,e[7]=C*a+y*d+_*p+w*v,C=i[8],y=i[9],_=i[10],w=i[11],e[8]=C*r+y*l+_*u+w*f,e[9]=C*n+y*s+_*c+w*m,e[10]=C*o+y*h+_*g+w*b,e[11]=C*a+y*d+_*p+w*v,C=i[12],y=i[13],_=i[14],w=i[15],e[12]=C*r+y*l+_*u+w*f,e[13]=C*n+y*s+_*c+w*m,e[14]=C*o+y*h+_*g+w*b,e[15]=C*a+y*d+_*p+w*v,e}function getModelMatrix(e,t,i){var r,n,{x:o=i.x,y:a=i.y,z:l=i.z,dx:s=i.dx,dy:h=i.dy,dz:d=i.dz,scaleX:u=i.scaleX,scaleY:c=i.scaleY,scaleZ:g=i.scaleZ,alpha:p=i.alpha,beta:f=i.beta,angle:m=i.angle,anchor3d:b=t.attribute.anchor,anchor:v}=t.attribute,C=[0,0,0];b&&(\\\"string\\\"==typeof b[0]?(n=parseFloat(b[0])/100,r=t.AABBBounds,C[0]=r.x1+(r.x2-r.x1)*n):C[0]=b[0],\\\"string\\\"==typeof b[1]?(r=parseFloat(b[1])/100,n=t.AABBBounds,C[1]=n.x1+(n.x2-n.x1)*r):C[1]=b[1],C[2]=null!=(n=b[2])?n:0),identity(e),translate(e,e,[o+s,a+h,l+d]),translate(e,e,[C[0],C[1],C[2]]),rotateX(e,e,f),rotateY(e,e,p),translate(e,e,[-C[0],-C[1],C[2]]),scale2(e,e,[u,c,g]),m&&(r=mat4Allocate.allocate(),n=[0,0],v&&(\\\"string\\\"==typeof b[0]?(o=parseFloat(b[0])/100,s=t.AABBBounds,n[0]=s.x1+(s.x2-s.x1)*o):n[0]=b[0],\\\"string\\\"==typeof b[1]?(a=parseFloat(b[1])/100,h=t.AABBBounds,n[1]=h.x1+(h.x2-h.x1)*a):n[1]=b[1]),translate(r,r,[n[0],n[1],0]),rotateZ(r,r,m),translate(r,r,[-n[0],-n[1],0]),multiplyMat4Mat4(e,e,r))}function shouldUseMat4(e){var{alpha:t,beta:i}=e.attribute;return t||i}var text,DefaultGraphicService=class{constructor(e){this.creator=e,this.hooks={onAttributeUpdate:new SyncHook([\\\"graphic\\\"]),onSetStage:new SyncHook([\\\"graphic\\\",\\\"stage\\\"]),onRemove:new SyncHook([\\\"graphic\\\"]),onRelease:new SyncHook([\\\"graphic\\\"]),onAddIncremental:new SyncHook([\\\"graphic\\\",\\\"group\\\",\\\"stage\\\"]),onClearIncremental:new SyncHook([\\\"graphic\\\",\\\"group\\\",\\\"stage\\\"]),beforeUpdateAABBBounds:new SyncHook([\\\"graphic\\\",\\\"stage\\\",\\\"willUpdate\\\",\\\"aabbBounds\\\"]),afterUpdateAABBBounds:new SyncHook([\\\"graphic\\\",\\\"stage\\\",\\\"aabbBounds\\\",\\\"globalAABBBounds\\\",\\\"selfChange\\\"])},this.tempAABBBounds1=new AABBBounds,this.tempAABBBounds2=new AABBBounds,this._rectBoundsContribitions=[new DefaultOuterBorderBoundsContribution],this._symbolBoundsContribitions=[new DefaultSymbolOuterBorderBoundsContribution],this._circleBoundsContribitions=[new DefaultOuterBorderBoundsContribution],this._arcBoundsContribitions=[new DefaultOuterBorderBoundsContribution],this._pathBoundsContribitions=[new DefaultOuterBorderBoundsContribution]}onAttributeUpdate(e){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(e)}onSetStage(e,t){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(e,t)}onRemove(e){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(e)}onRelease(e){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(e)}onAddIncremental(e,t,i){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(e,t,i)}onClearIncremental(e,t){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(e,t)}beforeUpdateAABBBounds(e,t,i,r){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(e,t,i,r)}afterUpdateAABBBounds(e,t,i,r,n){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(e,t,i,r,n)}updatePathProxyAABBBounds(e,t){var i,r=\\\"function\\\"==typeof t.pathProxy?t.pathProxy(t.attribute):t.pathProxy;return!!r&&(i=new BoundsContext(e),renderCommandList(r.commandList,i,0,0),!0)}updateRectAABBBounds(t,i,r,n){if(this._validCheck(t,i,r,n)){var e,o,a,l,s,h;this.updatePathProxyAABBBounds(r,n)||(({width:s,height:h}=t),({x1:e,y1:o,x:a,y:l}=t),r.set(0,0,(s=null!=s?s:e-a)||0,(h=null!=h?h:o-l)||0));const d=this.tempAABBBounds1,u=this.tempAABBBounds2;d.setValue(r.x1,r.y1,r.x2,r.y2),u.setValue(r.x1,r.y1,r.x2,r.y2),this._rectBoundsContribitions.length&&this._rectBoundsContribitions.forEach(e=>{e.updateBounds(t,i,d,n),r.union(d),d.setValue(u.x1,u.y1,u.x2,u.y2)}),this.transformAABBBounds(t,r,i,!1,n)}return r}updateGroupAABBBounds(e,t,i,r){var n=i,{width:o,height:a,path:l,clip:s=t.clip}=(i=i.clone(),e),l=(l&&l.length?l.forEach(e=>{i.union(e.AABBBounds)}):null!=o&&null!=a&&i.set(0,0,Math.max(0,o),Math.max(0,a)),s||r.forEachChildren(e=>{i.union(e.AABBBounds)}),this.tempAABBBounds1),o=this.tempAABBBounds2;return l.setValue(i.x1,i.y1,i.x2,i.y2),o.setValue(i.x1,i.y1,i.x2,i.y2),this.transformAABBBounds(e,i,t,!1,r),n.copy(i),n}updateGlyphAABBBounds(e,t,i,r){return this._validCheck(e,t,i,r)&&r.getSubGraphic().forEach(e=>{i.union(e.AABBBounds)}),i}updateRichTextAABBBounds(i,r,n,o){if(this._validCheck(i,r,n,o)&&o){var a,{width:l=r.width,height:s=r.height,maxWidth:h=r.maxWidth,maxHeight:d=r.maxHeight,textAlign:u=r.textAlign,textBaseline:c=r.textBaseline}=i;0<l&&0<s?n.set(0,0,l,s):(({width:a,height:g}=o.getFrameCache().getActualSize()),l=l||a||0,a=s||g||0,n.set(0,0,l=\\\"number\\\"==typeof h&&h<l?h:l||0,a=\\\"number\\\"==typeof d&&d<a?d:a||0));let e=0;switch(c){case\\\"top\\\":e=0;break;case\\\"middle\\\":e=-n.height()/2;break;case\\\"bottom\\\":e=-n.height()}let t=0;switch(u){case\\\"left\\\":t=0;break;case\\\"center\\\":t=-n.width()/2;break;case\\\"right\\\":t=-n.width()}n.translate(t,e);var s=this.tempAABBBounds1,g=this.tempAABBBounds2;s.setValue(n.x1,n.y1,n.x2,n.y2),g.setValue(n.x1,n.y1,n.x2,n.y2),this.transformAABBBounds(i,n,r,!1,o)}return n}updateTextAABBBounds(e,t,i,r){var n,o,a,l,s;return this._validCheck(e,t,i,r)&&r&&(({text:n=t.text}=r.attribute),Array.isArray(n)?r.updateMultilineAABBBounds(n):r.updateSingallineAABBBounds(n),n=this.tempAABBBounds1,o=this.tempAABBBounds2,({scaleX:o=t.scaleX,scaleY:a=t.scaleY,shadowBlur:l=t.shadowBlur,strokeBoundsBuffer:s=t.strokeBoundsBuffer}=(n.setValue(i.x1,i.y1,i.x2,i.y2),o.setValue(i.x1,i.y1,i.x2,i.y2),e)),l&&(boundStroke(n,l/Math.abs(o+a),!0,s),i.union(n)),this.combindShadowAABBBounds(i,r),transformBoundsWithMatrix(i,i,r.transMatrix)),i}updatePathAABBBounds(t,i,r,n){if(this._validCheck(t,i,r,n)){this.updatePathProxyAABBBounds(r,n)||this.updatePathAABBBoundsImprecise(t,i,r,n);const o=this.tempAABBBounds1,a=this.tempAABBBounds2;o.setValue(r.x1,r.y1,r.x2,r.y2),a.setValue(r.x1,r.y1,r.x2,r.y2),this._pathBoundsContribitions.length&&this._pathBoundsContribitions.forEach(e=>{e.updateBounds(t,i,o,n),r.union(o),o.setValue(a.x1,a.y1,a.x2,a.y2)});var{lineJoin:e=i.lineJoin}=t;this.transformAABBBounds(t,r,i,\\\"miter\\\"===e,n)}return r}updatePathAABBBoundsImprecise(e,t,i,r){var n;return r&&(n=r.getParsedPathShape(),i.union(n.getBounds())),i}updatePyramid3dAABBBounds(e,t,r,i){var n,o;return i&&(n=i.stage)&&n.camera&&(i.findFace().vertices.forEach(e=>{var t=e[0],i=e[1];r.add(t,i)}),n=this.tempAABBBounds1,o=this.tempAABBBounds2,n.setValue(r.x1,r.y1,r.x2,r.y2),o.setValue(r.x1,r.y1,r.x2,r.y2),this.transformAABBBounds(e,r,t,!1,i)),r}updateArc3dAABBBounds(e,t,i,r){var n,o;return r&&(o=r.stage)&&o.camera&&(({outerRadius:o=t.outerRadius,height:n=0}=e),i.setValue(-(o=o+n),-o,o,o),n=this.tempAABBBounds1,o=this.tempAABBBounds2,n.setValue(i.x1,i.y1,i.x2,i.y2),o.setValue(i.x1,i.y1,i.x2,i.y2),this.transformAABBBounds(e,i,t,!1,r)),i}updatePolygonAABBBounds(e,t,i,r){var n,o;return this._validCheck(e,t,i,r)&&(this.updatePathProxyAABBBounds(i,r)||this.updatePolygonAABBBoundsImprecise(e,t,i,r),o=this.tempAABBBounds1,n=this.tempAABBBounds2,({lineJoin:o=t.lineJoin}=(o.setValue(i.x1,i.y1,i.x2,i.y2),n.setValue(i.x1,i.y1,i.x2,i.y2),e)),this.transformAABBBounds(e,i,t,\\\"miter\\\"===o,r)),i}updatePolygonAABBBoundsImprecise(e,t,i,r){var{points:n=t.points}=e;return n.forEach(e=>{i.add(e.x,e.y)}),i}updateLineAABBBounds(e,t,i,r){var n,o;return this._validCheck(e,t,i,r)&&(this.updatePathProxyAABBBounds(i,r)||(e.segments?this.updateLineAABBBoundsBySegments(e,t,i,r):this.updateLineAABBBoundsByPoints(e,t,i,r)),o=this.tempAABBBounds1,n=this.tempAABBBounds2,({lineJoin:o=t.lineJoin}=(o.setValue(i.x1,i.y1,i.x2,i.y2),n.setValue(i.x1,i.y1,i.x2,i.y2),e)),this.transformAABBBounds(e,i,t,\\\"miter\\\"===o,r)),i}updateLineAABBBoundsByPoints(e,t,i,r){const{points:n=t.points}=e,o=i;return n.forEach(e=>{o.add(e.x,e.y)}),o}updateLineAABBBoundsBySegments(e,t,i,r){const{segments:n=t.segments}=e,o=i;return n.forEach(e=>{e.points.forEach(e=>{o.add(e.x,e.y)})}),o}updateAreaAABBBounds(e,t,i,r){var n,o;return this._validCheck(e,t,i,r)&&(this.updatePathProxyAABBBounds(i,r)||(e.segments?this.updateAreaAABBBoundsBySegments(e,t,i,r):this.updateAreaAABBBoundsByPoints(e,t,i,r)),o=this.tempAABBBounds1,n=this.tempAABBBounds2,({lineJoin:o=t.lineJoin}=(o.setValue(i.x1,i.y1,i.x2,i.y2),n.setValue(i.x1,i.y1,i.x2,i.y2),e)),this.transformAABBBounds(e,i,t,\\\"miter\\\"===o,r)),i}updateAreaAABBBoundsByPoints(e,t,i,r){const{points:n=t.points}=e,o=i;return n.forEach(e=>{var t;o.add(e.x,e.y),o.add(null!=(t=e.x1)?t:e.x,null!=(t=e.y1)?t:e.y)}),o}updateAreaAABBBoundsBySegments(e,t,i,r){const{segments:n=t.segments}=e,o=i;return n.forEach(e=>{e.points.forEach(e=>{var t;o.add(e.x,e.y),o.add(null!=(t=e.x1)?t:e.x,null!=(t=e.y1)?t:e.y)})}),o}updateCircleAABBBounds(t,i,r,e,n){if(this._validCheck(t,i,r,n)){this.updatePathProxyAABBBounds(r,n)||(e?this.updateCircleAABBBoundsImprecise(t,i,r,n):this.updateCircleAABBBoundsAccurate(t,i,r,n));const o=this.tempAABBBounds1,a=this.tempAABBBounds2;o.setValue(r.x1,r.y1,r.x2,r.y2),a.setValue(r.x1,r.y1,r.x2,r.y2),this._circleBoundsContribitions.length&&this._circleBoundsContribitions.forEach(e=>{e.updateBounds(t,i,o,n),r.union(o),o.setValue(a.x1,a.y1,a.x2,a.y2)}),this.transformAABBBounds(t,r,i,!1,n)}return r}updateCircleAABBBoundsImprecise(e,t,i,r){var{radius:n=t.radius}=e;return i.set(-n,-n,n,n),i}updateCircleAABBBoundsAccurate(e,t,i,r){var{startAngle:n=t.startAngle,endAngle:o=t.endAngle,radius:a=t.radius}=e;return pi2-epsilon<o-n?i.set(-a,-a,a,a):circleBounds(n,o,a,i),i}updateArcAABBBounds(t,i,r,e,n){if(this._validCheck(t,i,r,n)){this.updatePathProxyAABBBounds(r,n)||(e?this.updateArcAABBBoundsImprecise(t,i,r,n):this.updateArcAABBBoundsAccurate(t,i,r,n));const a=this.tempAABBBounds1,l=this.tempAABBBounds2;a.setValue(r.x1,r.y1,r.x2,r.y2),l.setValue(r.x1,r.y1,r.x2,r.y2),this._arcBoundsContribitions.length&&this._arcBoundsContribitions.forEach(e=>{e.updateBounds(t,i,a,n),r.union(a),a.setValue(l.x1,l.y1,l.x2,l.y2)});var{lineJoin:o=i.lineJoin}=t;this.transformAABBBounds(t,r,i,\\\"miter\\\"===o,n)}return r}updateArcAABBBoundsImprecise(e,t,i,r){let{outerRadius:n=t.outerRadius,innerRadius:o=t.innerRadius}=e;var{outerPadding:a=t.outerPadding,innerPadding:l=t.innerPadding}=e;return o-=l,(n+=a)<o&&(n=o),i.set(-n,-n,n,n),i}updateArcAABBBoundsAccurate(e,t,i,r){let{outerRadius:n=t.outerRadius,innerRadius:o=t.innerRadius}=e;var{outerPadding:a=t.outerPadding,innerPadding:l=t.innerPadding}=e;n+=a,o-=l,n<o&&(a=n,n=o,o=a);let{endAngle:s=t.endAngle,startAngle:h=t.startAngle}=e;return h>s&&(l=h,h=s,s=l),n<=epsilon?i.set(0,0,0,0):Math.abs(s-h)>pi2-epsilon?i.set(-n,-n,n,n):(circleBounds(h,s,n,i),circleBounds(h,s,o,i)),i}updateSymbolAABBBounds(t,i,r,e,n){if(this._validCheck(t,i,r,n)){this.updatePathProxyAABBBounds(r,n)||(e?this.updateSymbolAABBBoundsImprecise(t,i,r,n):this.updateSymbolAABBBoundsAccurate(t,i,r,n));const a=this.tempAABBBounds1,l=this.tempAABBBounds2;a.setValue(r.x1,r.y1,r.x2,r.y2),l.setValue(r.x1,r.y1,r.x2,r.y2),this._symbolBoundsContribitions.length&&this._symbolBoundsContribitions.forEach(e=>{e.updateBounds(t,i,a,n),r.union(a),a.setValue(l.x1,l.y1,l.x2,l.y2)});var{lineJoin:o=i.lineJoin}=t;this.transformAABBBounds(t,r,i,\\\"miter\\\"===o,n)}return r}updateSymbolAABBBoundsImprecise(e,t,i,r){var{size:n=t.size}=e;return isArray_default(n)?i.set(-n[0]/2,-n[1]/2,n[0]/2,n[1]/2):i.set(-(n=n/2),-n,n,n),i}updateSymbolAABBBoundsAccurate(e,t,i,r){var n;return r&&(({size:n=t.size}=e),r.getParsedPath().bounds(n,i)),i}updateImageAABBBounds(e,t,i,r){var n,o;return this._validCheck(e,t,i,r)&&(this.updatePathProxyAABBBounds(i,r)||(({width:n=t.width,height:o=t.height}=e),i.set(0,0,n,o)),n=this.tempAABBBounds1,o=this.tempAABBBounds2,n.setValue(i.x1,i.y1,i.x2,i.y2),o.setValue(i.x1,i.y1,i.x2,i.y2),this.transformAABBBounds(e,i,t,!1,r)),i}combindShadowAABBBounds(e,t){var i;t&&t.shadowRoot&&(i=t.shadowRoot.AABBBounds,e.union(i))}transformAABBBounds(e,t,i,r,n){var o,a,l,s,h,d,u,c;if(t.empty()||(({scaleX:o=i.scaleX,scaleY:a=i.scaleY,stroke:u=i.stroke,shadowBlur:l=i.shadowBlur,lineWidth:c=i.lineWidth,pickStrokeBuffer:g=i.pickStrokeBuffer,strokeBoundsBuffer:s=i.strokeBoundsBuffer}=e),h=this.tempAABBBounds1,d=this.tempAABBBounds2,u&&c&&(boundStroke(h,(c+g)/Math.abs(o+a),r,s),t.union(h),h.setValue(d.x1,d.y1,d.x2,d.y2)),l&&(({shadowOffsetX:u=i.shadowOffsetX,shadowOffsetY:c=i.shadowOffsetY}=e),boundStroke(h,l/Math.abs(o+a)*2,!1,s+1),h.translate(u,c),t.union(h))),this.combindShadowAABBBounds(t,n),!t.empty()){let e=!0;var g=n.transMatrix;(e=n&&n.isContainer?!(1===g.a&&0===g.b&&0===g.c&&1===g.d&&0===g.e&&0===g.f):e)&&transformBoundsWithMatrix(t,t,g)}}_validCheck(e,t,i,r){var n;return!r||r.valid&&(({visible:n=t.visible}=e),!!n)||(i.clear(),!1)}},DefaultGraphicService=__decorate7([injectable(),__param3(0,inject(GraphicCreator)),__metadata5(\\\"design:paramtypes\\\",[Object])],DefaultGraphicService),GraphicCreator2=(init_esbuild_inject(),class{constructor(){this.store=new Map}RegisterGraphicCreator(e,t){this.store.set(e,t),this[e]=t}CreateGraphic(e,t){var i=this.store.get(e);return i?i(t):null}}),graphicCreator=new GraphicCreator2;function getTextBounds(e){return(text=text||graphicCreator.CreateGraphic(\\\"text\\\",{})).initAttributes(e),text.AABBBounds}init_esbuild_inject();var result={x:0,y:0,z:0,lastModelMatrix:null},BaseRender=class{init(e){e&&(this._renderContribitions=e.getContributions()),this._renderContribitions||(this._renderContribitions=[]),this.builtinContributions&&this.builtinContributions.forEach(e=>this._renderContribitions.push(e)),this._renderContribitions.length&&(this._renderContribitions.sort((e,t)=>t.order-e.order),this._beforeRenderContribitions=this._renderContribitions.filter(e=>e.time===BaseRenderContributionTime.beforeFillStroke),this._afterRenderContribitions=this._renderContribitions.filter(e=>e.time===BaseRenderContributionTime.afterFillStroke))}beforeRenderStep(t,i,r,n,o,a,l,s,h,d,u,c,g){this._beforeRenderContribitions&&this._beforeRenderContribitions.forEach(e=>{e.drawShape(t,i,r,n,o,a,l,s,h,d,u,c,g)})}afterRenderStep(t,i,r,n,o,a,l,s,h,d,u,c,g){this._afterRenderContribitions&&this._afterRenderContribitions.forEach(e=>{e.drawShape(t,i,r,n,o,a,l,s,h,d,u,c,g)})}valid(e,t,i,r){var{fill:n=t.fill,background:o,stroke:a=t.stroke,opacity:l=t.opacity,fillOpacity:s=t.fillOpacity,lineWidth:h=t.lineWidth,strokeOpacity:d=t.strokeOpacity,visible:u=t.visible}=e.attribute,s=fillVisible(l,s,n),l=strokeVisible(l,d),d=runFill(n,o),n=runStroke(a,h);return!(!e.valid||!u)&&!(!d&&!n)&&!!(s||l||i||r||o)&&{fVisible:s,sVisible:l,doFill:d,doStroke:n}}transform(e,t,i,r=!1){var n,{x:o=t.x,y:a=t.y,z:l=t.z,scaleX:s=t.scaleX,scaleY:h=t.scaleY,angle:d=t.angle,postMatrix:u}=e.attribute,c=i.modelMatrix,g=i.camera,o=(result.x=o,result.y=a,result.z=l,result.lastModelMatrix=c,g&&(r||shouldUseMat4(e))),a=o?e.transMatrix.onlyTranslate()&&!u:1===s&&1===h&&0===d&&!u;return o&&(u=mat4Allocate.allocate(),getModelMatrix(n=mat4Allocate.allocate(),e,t),multiplyMat4Mat4(u,c||u,n),result.x=0,result.y=0,result.z=0,i.modelMatrix=u,i.setTransform(1,0,0,1,0,0,!0),mat4Allocate.free(n)),a&&!c?(u=e.getOffsetXY(t),result.x+=u.x,result.y+=u.y,result.z=l,i.setTransformForCurrent()):o?(result.x=0,result.y=0,result.z=0,i.setTransform(1,0,0,1,0,0,!0)):g&&i.project?(n=e.getOffsetXY(t),result.x+=n.x,result.y+=n.y,this.transformWithoutTranslate(i,result.x,result.y,result.z,s,h,d)):(i.transformFromMatrix(e.transMatrix,!0),result.x=0,result.y=0,result.z=0),result}transformUseContext2d(e,t,i,r){var n,o,a,l,s,h,d,u,c,g,p,f=r.camera;(this.camera=f)&&(s=(f=e.AABBBounds).x2-f.x1,f=f.y2-f.y1,n=r.project(0,0,i),o=r.project(s,0,i),a=r.project(s,f,i),p={x:0,y:0},l={x:s,y:0},s={x:s,y:f},r.camera=null,h=-(p.y*(a.x-o.x)-l.y*a.x+s.y*o.x+(l.y-s.y)*n.x)*(f=1/(p.x*(s.y-l.y)-l.x*s.y+s.x*l.y+(l.x-s.x)*p.y)),d=(l.y*a.y+p.y*(o.y-a.y)-s.y*o.y+(s.y-l.y)*n.y)*f,u=(p.x*(a.x-o.x)-l.x*a.x+s.x*o.x+(l.x-s.x)*n.x)*f,c=-(l.x*a.y+p.x*(o.y-a.y)-s.x*o.y+(s.x-l.x)*n.y)*f,g=(p.x*(s.y*o.x-l.y*a.x)+p.y*(l.x*a.x-s.x*o.x)+(s.x*l.y-l.x*s.y)*n.x)*f,p=(p.x*(s.y*o.y-l.y*a.y)+p.y*(l.x*a.y-s.x*o.y)+(s.x*l.y-l.x*s.y)*n.y)*f,r.setTransform(h,d,u,c,g,p,!0))}restoreTransformUseContext2d(e,t,i,r){this.camera&&(r.camera=this.camera)}transformWithoutTranslate(e,t,i,r,n,o,a){var l=e.project(t,i,r);e.translate(l.x,l.y,!1),e.scale(n,o,!1),e.rotate(a,!1),e.translate(-l.x,-l.y,!1),e.setTransformForCurrent()}_draw(e,t,i,r,n){var o,a,l,s,h=r[\\\"context\\\"];h&&(h.highPerformanceSave(),({x:o,y:a,z:l,lastModelMatrix:s}=this.transform(e,t,h,i)),this.z=l,drawPathProxy(e,h,o,a,r,n)||(this.drawShape(e,h,o,a,r,n),this.z=0,h.modelMatrix!==s&&mat4Allocate.free(h.modelMatrix),h.modelMatrix=s),h.highPerformanceRestore())}},parse=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),function(){const n={linearGradient:/^(linear\\\\-gradient)/i,radialGradient:/^(radial\\\\-gradient)/i,conicGradient:/^(conic\\\\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\\\\-side|closest\\\\-corner|farthest\\\\-side|farthest\\\\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\\\\.[0-9]+)|([0-9]+\\\\.?)))px/,percentageValue:/^(-?(([0-9]*\\\\.[0-9]+)|([0-9]+\\\\.?)))\\\\%/,emValue:/^(-?(([0-9]*\\\\.[0-9]+)|([0-9]+\\\\.?)))em/,angleValue:/^(-?(([0-9]*\\\\.[0-9]+)|([0-9]+\\\\.?)))deg/,fromAngleValue:/^from\\\\s*(-?(([0-9]*\\\\.[0-9]+)|([0-9]+\\\\.?)))deg/,startCall:/^\\\\(/,endCall:/^\\\\)/,comma:/^,/,hexColor:/(^\\\\#[0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^(rgb\\\\(\\\\d{1,3},\\\\s*\\\\d{1,3},\\\\s*\\\\d{1,3}\\\\))/i,rgbaColor:/^(rgba\\\\(\\\\d{1,3},\\\\s*\\\\d{1,3},\\\\s*\\\\d{1,3},\\\\s*((\\\\d\\\\.\\\\d+)|\\\\d{1,3})\\\\))/i,number:/^(([0-9]*\\\\.[0-9]+)|([0-9]+\\\\.?))/};let r=\\\"\\\";function o(e){var t=new Error(r+\\\": \\\"+e);throw t.source=r,t}function i(){return e(\\\"linear\\\",n.linearGradient,t)||e(\\\"radial\\\",n.radialGradient,l)||e(\\\"conic\\\",n.conicGradient,a)}function e(t,e,i){var r=b(e);if(r)return b(n.startCall)||o(\\\"Missing (\\\"),r=function(){const e=i();return e&&(b(n.comma)||o(\\\"Missing comma before color stops\\\")),{type:t,orientation:e,colorStops:c(g)}}(),b(n.endCall)||o(\\\"Missing )\\\"),r}function t(){return m(\\\"directional\\\",n.sideOrCorner,1)||m(\\\"angular\\\",n.angleValue,1)}function a(){return m(\\\"angular\\\",n.fromAngleValue,1)}function l(){let e,t,i=s();return i&&((e=[]).push(i),t=r,b(n.comma))&&((i=s())?e.push(i):r=t),e}function s(){(t=m(\\\"shape\\\",/^(circle)/i,0))&&(t.style=f()||h());let e=t||((t=m(\\\"shape\\\",/^(ellipse)/i,0))&&(t.style=p()||h()),t);var t;return e?e.at=d():(t=h())?(e=t,(t=d())&&(e.at=t)):(t=u())&&(e={type:\\\"default-radial\\\",at:t}),e}function h(){return m(\\\"extent-keyword\\\",n.extentKeywords,1)}function d(){var e;if(m(\\\"position\\\",/^at/,0))return(e=u())||o(\\\"Missing positioning value\\\"),e}function u(){var e={x:p(),y:p()};if(e.x||e.y)return{type:\\\"position\\\",value:e}}function c(e){let t=e();var i=[];if(t)for(i.push(t);b(n.comma);)(t=e())?i.push(t):o(\\\"One extra comma\\\");return i}function g(){var e=m(\\\"hex\\\",n.hexColor,1)||m(\\\"rgba\\\",n.rgbaColor,1)||m(\\\"rgb\\\",n.rgbColor,1)||m(\\\"literal\\\",n.literalColor,0);return e||o(\\\"Expected color definition\\\"),e.length=p(),e}function p(){return m(\\\"%\\\",n.percentageValue,1)||m(\\\"position-keyword\\\",n.positionKeywords,1)||f()}function f(){return m(\\\"px\\\",n.pixelValue,1)||m(\\\"em\\\",n.emValue,1)}function m(e,t,i){var r=b(t);if(r)return{type:e,value:r[i]}}function b(e){var t=/^[\\\\n\\\\r\\\\t\\\\s]+/.exec(r),t=(t&&v(t[0].length),e.exec(r));return t&&v(t[0].length),t}function v(e){r=r.substr(e)}return function(e){return r=e.toString(),t=c(i),0<r.length&&o(\\\"Invalid input not EOF\\\"),t;var t}}()),GradientParser=class $Fa{static IsGradient(e){return!(\\\"string\\\"==typeof e&&!e.includes(\\\"gradient\\\"))}static IsGradientStr(e){return\\\"string\\\"==typeof e&&e.includes(\\\"gradient\\\")}static Parse(e){if($Fa.IsGradientStr(e))try{var t=parse(e)[0];if(t){if(\\\"linear\\\"===t.type)return $Fa.ParseLinear(t);if(\\\"radial\\\"===t.type)return $Fa.ParseRadial(t);if(\\\"conic\\\"===t.type)return $Fa.ParseConic(t)}}catch(err){}return e}static ParseConic(e){var{orientation:t,colorStops:i=[]}=e,r=pi/2,t=parseFloat(t.value)/180*pi-r;return{gradient:\\\"conical\\\",x:.5,y:.5,startAngle:t,endAngle:t+pi2,stops:i.map(e=>({color:e.value,offset:parseFloat(e.length.value)/100}))}}static ParseRadial(e){var{colorStops:t=[]}=e;return{gradient:\\\"radial\\\",x0:.5,y0:.5,x1:.5,y1:.5,r0:0,r1:1,stops:t.map(e=>({color:e.value,offset:parseFloat(e.length.value)/100}))}}static ParseLinear(e){var{orientation:t,colorStops:i=[]}=e,r=pi/2;let n=\\\"angular\\\"===t.type?parseFloat(t.value)/180*pi:0;for(;n<0;)n+=pi2;for(;n>pi2;)n-=pi2;let o=0,a=0,l=0,s=0;return n<r?(o=0,a=1,l=Math.sin(n),s=Math.cos(n)):n<pi?(o=0,a=0,l=Math.cos(n-r),s=Math.sin(n-r)):n<pi+r?(o=1,a=0,l=o-Math.sin(n-pi),s=Math.cos(n-pi)):(o=1,l=o-Math.cos(n-r-pi),s-=Math.sin(n-r-pi)),{gradient:\\\"linear\\\",x0:o,y0:a,x1:l,y1:s,stops:i.map(e=>({color:e.value,offset:parseFloat(e.length.value)/100}))}}};function getScaledStroke(e,t,i){var r=t,{a:n,b:o,c:a,d:l}=e.currentMatrix,n=Math.sign(n)*Math.sqrt(n*n+o*o),o=Math.sign(l)*Math.sqrt(a*a+l*l);return n+o==0?0:r/Math.abs(n+o)*2*i}function createColor(e,t,i,r,n){if(!t||!0===t)return\\\"black\\\";let o,a;if(isArray_default(t))for(let e=0;e<t.length&&!(a=t[e]);e++);else a=t;return\\\"string\\\"==typeof(a=GradientParser.Parse(a))?a:(\\\"linear\\\"===a.gradient?o=createLinearGradient(e,a,i,r,n):\\\"conical\\\"===a.gradient?o=createConicGradient(e,a,i,r,n):\\\"radial\\\"===a.gradient&&(o=createRadialGradient(e,a,i,r,n)),o||\\\"orange\\\")}function createLinearGradient(n,o,a,l=0,s=0){var h=a.AABBBounds;if(h){let e=h.x2-h.x1,t=h.y2-h.y1,i=h.x1-l,r=h.y1-s;if(a.attribute){var{scaleX:h=1,scaleY:d=1}=a.attribute;if(h*d==0)return;e/=h,t/=d,i/=h,r/=d}const u=n.createLinearGradient(i+(null!=(h=o.x0)?h:0)*e,r+(null!=(d=o.y0)?d:0)*t,i+(null!=(h=o.x1)?h:1)*e,r+(null!=(d=o.y1)?d:0)*t);return o.stops.forEach(e=>{u.addColorStop(e.offset,e.color)}),u}}function createRadialGradient(n,o,a,l=0,s=0){var h=a.AABBBounds;if(h){let e=h.x2-h.x1,t=h.y2-h.y1,i=h.x1-l,r=h.y1-s;if(a.attribute){var{scaleX:h=1,scaleY:d=1}=a.attribute;if(h*d==0)return;i/=h,r/=d,e/=h,t/=d}const u=n.createRadialGradient(i+(null!=(h=o.x0)?h:.5)*e,r+(null!=(d=o.y0)?d:.5)*t,Math.max(e,t)*(null!=(h=o.r0)?h:0),i+(null!=(d=o.x1)?d:.5)*e,r+(null!=(h=o.y1)?h:.5)*t,Math.max(e,t)*(null!=(d=o.r1)?d:.5));return o.stops.forEach(e=>{u.addColorStop(e.offset,e.color)}),u}}function createConicGradient(n,o,a,l=0,s=0){var h=a.AABBBounds;if(h){let e=h.x2-h.x1,t=h.y2-h.y1,i=h.x1-l,r=h.y1-s;if(a.attribute){var{scaleX:h=1,scaleY:d=1}=a.attribute;if(h*d==0)return;e/=h,t/=d,i/=h,r/=d}const u=n.createConicGradient(i+(null!=(h=o.x)?h:0)*e,r+(null!=(d=o.y)?d:0)*t,o.startAngle,o.endAngle);return o.stops.forEach(e=>{u.addColorStop(e.offset,e.color)}),u.GetPattern(e+i,t+r,void 0)}}init_esbuild_inject();var __decorate8=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata6=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param4=function(i,r){return function(e,t){r(e,t,i)}},DefaultBaseBackgroundRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){var g,p,f,{background:m,backgroundOpacity:b=null!=(b=e.attribute.fillOpacity)?b:s.backgroundOpacity,opacity:v=s.opacity,backgroundMode:C=s.backgroundMode,backgroundFit:y=s.backgroundFit}=e.attribute;m&&(e.backgroundImg&&e.resources?\\\"success\\\"===(g=e.resources.get(m)).state&&g.data&&(t.save(),e.parent&&!e.transMatrix.onlyTranslate()&&(p=getTheme(e.parent).group,({scrollX:f=p.scrollX,scrollY:p=p.scrollY}=e.parent.attribute),t.setTransformFromMatrix(e.parent.globalTransMatrix,!0),t.translate(f,p)),t.clip(),f=e.AABBBounds,t.setCommonStyle(e,e.attribute,i,r,s),t.globalAlpha=b*v,this.doDrawImage(t,g.data,f,C,y),t.restore(),e.transMatrix.onlyTranslate()||t.setTransformForCurrent()):(t.highPerformanceSave(),t.setCommonStyle(e,e.attribute,i,r,s),t.globalAlpha=b*v,t.fillStyle=m,t.fill(),t.highPerformanceRestore()))}doDrawImage(i,r,n,o,a){if(\\\"no-repeat\\\"===o)i.drawImage(r,n.x1,n.y1,n.width(),n.height());else{var l=n.width(),s=n.height();let e=l,t=s;a&&\\\"repeat\\\"!==o&&(r.width||r.height)&&(d=r.width,h=r.height,\\\"repeat-x\\\"===o?(e=d*(s/h),t=s):\\\"repeat-y\\\"===o&&(t=h*(l/d),e=l),h=i.dpr,(h=(d=canvasAllocate.allocate({width:e,height:t,dpr:h})).getContext(\\\"2d\\\"))&&(h.inuse=!0,h.clearMatrix(),h.setTransformForCurrent(!0),h.clearRect(0,0,e,t),h.drawImage(r,0,0,e,t),r=d.nativeCanvas),canvasAllocate.free(d));var h=i.dpr,d=i.createPattern(r,o);d.setTransform&&d.setTransform(new DOMMatrix([1/h,0,0,1/h,0,0])),i.fillStyle=d,i.translate(n.x1,n.y1),i.fillRect(0,0,l,s),i.translate(-n.x1,-n.y1)}}},defaultBaseBackgroundRenderContribution=new DefaultBaseBackgroundRenderContribution,DefaultBaseInteractiveRenderContribution=class{constructor(e){this.subRenderContribitions=e,this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,i,r,n,o,a,l,s,h,d,u,c,g){this._subRenderContribitions||(this._subRenderContribitions=this.subRenderContribitions.getContributions()),this._subRenderContribitions.forEach(e=>{e.render(t,i,r,n,o,a,l,s,h,d,u,c,g)})}},DefaultBaseInteractiveRenderContribution=__decorate8([injectable(),__param4(0,inject(ContributionProvider)),__param4(0,named(InteractiveSubRenderContribution)),__metadata6(\\\"design:paramtypes\\\",[Object])],DefaultBaseInteractiveRenderContribution),DefaultBaseTextureRenderContribution=(init_esbuild_inject(),class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=10}createCommonPattern(e,t,i,r,n){var o=(e-2*t)/2,a=r.dpr,l=canvasAllocate.allocate({width:e,height:e,dpr:a}),s=l.getContext(\\\"2d\\\");if(!s)return null;s.inuse=!0,s.clearMatrix(),s.setTransformForCurrent(!0),s.clearRect(0,0,e,e),n(o,s);o=r.createPattern(l.nativeCanvas,\\\"repeat\\\");return o.setTransform&&o.setTransform(new DOMMatrix([1/a,0,0,1/a,0,0])),canvasAllocate.free(l),o}createCirclePattern(e,t,i,r){return this.createCommonPattern(e,t,i,r,(e,t)=>{t.fillStyle=i,t.arc(e,e,e,0,pi2),t.fill()})}createDiamondPattern(n,e,o,t){return this.createCommonPattern(n,e,o,t,(e,t)=>{var i=n/2,r=i;t.fillStyle=o,t.moveTo(i,r-e),t.lineTo(e+i,r),t.lineTo(i,r+e),t.lineTo(i-e,r),t.closePath(),t.fill()})}createRectPattern(e,n,o,t){return this.createCommonPattern(e,n,o,t,(e,t)=>{var i=n,r=i;t.fillStyle=o,t.fillRect(i,r,2*e,2*e)})}createVerticalLinePattern(r,n,o,e){return this.createCommonPattern(r,n,o,e,(e,t)=>{var i=n;t.fillStyle=o,t.fillRect(i,0,2*e,r)})}createHorizontalLinePattern(r,n,o,e){return this.createCommonPattern(r,n,o,e,(e,t)=>{var i=n;t.fillStyle=o,t.fillRect(0,i,r,2*e)})}createBiasLRLinePattern(n,e,o,t){return this.createCommonPattern(n,e,o,t,(e,t)=>{t.strokeStyle=o,t.lineWidth=e,t.moveTo(0,0),t.lineTo(n,n);var i=n/2,r=-i;t.moveTo(i,r),t.lineTo(i+n,r+n),t.moveTo(-i,-r),t.lineTo(-i+n,-r+n),t.stroke()})}createBiasRLLinePattern(n,e,o,t){return this.createCommonPattern(n,e,o,t,(e,t)=>{t.strokeStyle=o,t.lineWidth=e,t.moveTo(n,0),t.lineTo(0,n);var i=n/2,r=i;t.moveTo(n+i,r),t.lineTo(i,r+n),t.moveTo(n-i,-r),t.lineTo(-i,-r+n),t.stroke()})}createGridPattern(e,n,o,t){return this.createCommonPattern(e,n,o,t,(e,t)=>{var i=n,r=i;t.fillStyle=o,t.fillRect(i,r,e,e),t.fillRect(i+e,r+e,e,e)})}initTextureMap(e,t){this.textureMap=new Map}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){this.textureMap||this.initTextureMap(t,e.stage);var{texture:g=s.texture,textureColor:p=s.textureColor,textureSize:f=s.textureSize,texturePadding:m=s.texturePadding}=e.attribute;g&&this.drawTexture(g,e,t,i,r,s,p,f,m)}drawTexture(e,t,i,r,n,o,a,l,s){let h=this.textureMap.get(e);if(!h)switch(e){case\\\"circle\\\":h=this.createCirclePattern(l,s,a,i);break;case\\\"diamond\\\":h=this.createDiamondPattern(l,s,a,i);break;case\\\"rect\\\":h=this.createRectPattern(l,s,a,i);break;case\\\"vertical-line\\\":h=this.createVerticalLinePattern(l,s,a,i);break;case\\\"horizontal-line\\\":h=this.createHorizontalLinePattern(l,s,a,i);break;case\\\"bias-lr\\\":h=this.createBiasLRLinePattern(l,s,a,i);break;case\\\"bias-rl\\\":h=this.createBiasRLLinePattern(l,s,a,i);break;case\\\"grid\\\":h=this.createGridPattern(l,s,a,i)}h&&(i.highPerformanceSave(),i.setCommonStyle(t,t.attribute,r,n,o),i.fillStyle=h,i.fill(),i.highPerformanceRestore())}}),defaultBaseTextureRenderContribution=new DefaultBaseTextureRenderContribution,DefaultArcRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u){var c,g,p,f,m,b,v,C,y,_,w,x,{outerBorder:S,innerBorder:A}=e.attribute,T=S&&!1!==S.visible,R=A&&!1!==A.visible;(T||R)&&(({innerPadding:_=s.innerPadding,outerPadding:x=s.outerPadding,startAngle:c=s.startAngle,endAngle:g=s.endAngle,opacity:p=s.opacity,x:f=s.x,y:m=s.y,scaleX:b=s.scaleX,scaleY:v=s.scaleY}=e.attribute),({innerRadius:C=s.innerRadius,outerRadius:y=s.outerRadius}=e.attribute),y+=x,C-=_,x=!(!S||!S.stroke),_=!(!A||!A.stroke),T&&(({distance:T=s.outerBorder.distance}=S),w=getScaledStroke(t,T,t.dpr),e.setAttributes({outerRadius:y+w,innerRadius:C-w,startAngle:c-(T=T/y),endAngle:g+T}),t.beginPath(),drawArcPath(e,t,i,r,y+w,C-w),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u?u(t,S,s.outerBorder):x&&(T=s.outerBorder.opacity,s.outerBorder.opacity=p,t.setStrokeStyle(e,S,(f-i)/b,(m-r)/v,s.outerBorder),s.outerBorder.opacity=T,t.stroke())),R&&(({distance:w=s.innerBorder.distance}=A),x=getScaledStroke(t,w,t.dpr),e.setAttributes({outerRadius:y-x,innerRadius:C+x,startAngle:c+(S=w/y),endAngle:g-S}),t.beginPath(),drawArcPath(e,t,i,r,y-x,C+x),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u?u(t,A,s.innerBorder):_&&(T=s.innerBorder.opacity,s.innerBorder.opacity=p,t.setStrokeStyle(e,A,(f-i)/b,(m-r)/v,s.innerBorder),s.innerBorder.opacity=T,t.stroke())),e.setAttributes({outerRadius:y,innerRadius:C,startAngle:c,endAngle:g}))}},defaultArcRenderContribution=new DefaultArcRenderContribution,defaultArcTextureRenderContribution=defaultBaseTextureRenderContribution,defaultArcBackgroundRenderContribution=defaultBaseBackgroundRenderContribution,DefaultCircleRenderContribution=(init_esbuild_inject(),class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u){var c,g,p,f,m,b,v,C,y,_,{outerBorder:w,innerBorder:x}=e.attribute,S=w&&!1!==w.visible,A=x&&!1!==x.visible;(S||A)&&(({radius:c=s.radius,startAngle:g=s.startAngle,endAngle:p=s.endAngle,opacity:f=s.opacity,x:m=s.x,y:b=s.y,scaleX:v=s.scaleX,scaleY:C=s.scaleY}=e.attribute),_=!(!w||!w.stroke),y=!(!x||!x.stroke),S&&(({distance:S=s.outerBorder.distance}=w),S=getScaledStroke(t,S,t.dpr),t.beginPath(),t.arc(i,r,c+S,g,p),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u?u(t,w,s.outerBorder):_&&(S=s.outerBorder.opacity,s.outerBorder.opacity=f,t.setStrokeStyle(e,w,(m-i)/v,(b-r)/C,s.outerBorder),s.outerBorder.opacity=S,t.stroke())),A)&&(({distance:_=s.innerBorder.distance}=x),w=getScaledStroke(t,_,t.dpr),t.beginPath(),t.arc(i,r,c-w,g,p),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u?u(t,x,s.innerBorder):y&&(S=s.innerBorder.opacity,s.innerBorder.opacity=f,t.setStrokeStyle(e,x,(m-i)/v,(b-r)/C,s.innerBorder),s.innerBorder.opacity=S,t.stroke()))}}),defaultCircleRenderContribution=new DefaultCircleRenderContribution,defaultCircleTextureRenderContribution=defaultBaseTextureRenderContribution,defaultCircleBackgroundRenderContribution=defaultBaseBackgroundRenderContribution,DefaultGroupBackgroundRenderContribution=(init_esbuild_inject(),class extends DefaultBaseBackgroundRenderContribution{constructor(){super(...arguments),this.time=BaseRenderContributionTime.beforeFillStroke}drawShape(e,t,i,r,n,o,a,l,s,h,d,u){var c,g,{background:p,backgroundMode:f=s.backgroundMode,backgroundFit:m=s.backgroundFit}=e.attribute;p&&(e.backgroundImg&&e.resources?\\\"success\\\"===(c=e.resources.get(p)).state&&c.data&&(t.highPerformanceSave(),t.setTransformFromMatrix(e.parent.globalTransMatrix,!0),g=e.AABBBounds,this.doDrawImage(t,c.data,g,f,m),t.highPerformanceRestore(),t.setTransformForCurrent()):(t.highPerformanceSave(),t.fillStyle=p,t.fill(),t.highPerformanceRestore()))}}),defaultGroupBackgroundRenderContribution=new DefaultGroupBackgroundRenderContribution,halfPi2=(init_esbuild_inject(),init_esbuild_inject(),pi/2);function createRectPath(e,t,i,r,n,o){let a;if(r<0&&(t+=r,r=-r),n<0&&(i+=n,n=-n),isNumber_default(o,!0))a=[o=abs(o),o,o,o];else if(Array.isArray(o)){var l=o;let e,t;switch(l.length){case 0:a=[0,0,0,0];break;case 1:e=abs(l[0]),a=[e,e,e,e];break;case 2:case 3:e=abs(l[0]),t=abs(l[1]),a=[e,t,e,t];break;default:(a=l)[0]=abs(a[0]),a[1]=abs(a[1]),a[2]=abs(a[2]),a[3]=abs(a[3])}}else a=[0,0,0,0];var s,h,d,u,c,g,p,f,m;return r<0||a[0]+a[1]+a[2]+a[3]<1e-12?e.rect(t,i,r,n):(([d,c,p,m]=[[t,i],[t+r,i],[t+r,i+n],[t,i+n]]),s=Math.min(r/2,n/2),s=[Math.min(s,a[0]),Math.min(s,a[1]),Math.min(s,a[2]),Math.min(s,a[3])],h=[d[0]+s[0],d[1]],d=[d[0],d[1]+s[0]],u=[c[0]-s[1],c[1]],c=[c[0],c[1]+s[1]],g=[p[0]-s[2],p[1]],p=[p[0],p[1]-s[2]],f=[m[0]+s[3],m[1]],m=[m[0],m[1]-s[3]],e.moveTo(h[0],h[1]),e.lineTo(u[0],u[1]),arrayEqual(u,c)||e.arc(u[0],u[1]+s[1],s[1],-halfPi2,0,!1),e.lineTo(p[0],p[1]),arrayEqual(g,p)||e.arc(p[0]-s[2],p[1],s[2],0,halfPi2,!1),e.lineTo(f[0],f[1]),arrayEqual(f,m)||e.arc(f[0],f[1]-s[3],s[3],halfPi2,pi,!1),e.lineTo(d[0],d[1]),arrayEqual(h,d)||e.arc(h[0],h[1]+s[0],s[0],pi,pi+halfPi2,!1),e.closePath(),e)}var DefaultImageBackgroundRenderContribution=class extends DefaultBaseBackgroundRenderContribution{constructor(){super(...arguments),this.time=BaseRenderContributionTime.beforeFillStroke}drawShape(e,t,i,r,n,o,a,l,s,h,d,u){var c,g,p,f,m,b,v,C,{background:y,backgroundMode:_=s.backgroundMode,backgroundFit:w=s.backgroundFit}=e.attribute;y&&(e.backgroundImg?\\\"success\\\"===(g=e.resources.get(y)).state&&g.data&&(t.save(),e.parent&&!e.transMatrix.onlyTranslate()&&(c=getTheme(e.parent).group,({scrollX:p=c.scrollX,scrollY:c=c.scrollY}=e.parent.attribute),t.setTransformFromMatrix(e.parent.globalTransMatrix,!0),t.translate(p,c)),p=e.AABBBounds,this.doDrawImage(t,g.data,p,_,w),t.restore(),e.transMatrix.onlyTranslate()||t.setTransformForCurrent()):isObject_default(y)?(({stroke:c,fill:g,lineWidth:p=1,cornerRadius:_=0,expandX:w=0,expandY:f=0}=y),(c||g)&&(t.beginPath(),({x:m,y:b,width:v,height:C}=getActualPosition(e)),_?createRectPath(t,m-w,b-f,v+2*w,C+2*f,_):t.rect(m-w,b-f,v+2*w,C+2*f),t.globalAlpha=1,g&&(t.fillStyle=g,t.fill()),c)&&0<p&&(t.lineWidth=p,t.strokeStyle=c,t.stroke())):(t.beginPath(),_=e.AABBBounds,t.rect(i,r,_.width(),_.height()),t.fillStyle=y,t.globalAlpha=1,t.fill()))}};function getActualPosition(e){var t=parsePadding(e.attribute.boundsPadding),i=e.AABBBounds;let r=i.x1,n=i.y1,o=i.width(),a=i.height();return isNumber_default(t)?(r+=t,n+=t,o-=2*t,a-=2*t):(r+=t[3],n+=t[0],o-=t[1]+t[3],a-=t[0]+t[2]),{x:r,y:n,width:o,height:a}}var defaultImageBackgroundRenderContribution=new DefaultImageBackgroundRenderContribution,__decorate9=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),DefaultRectRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u){var c,g,p,f,m,b,v,C,y,_,w,x,{outerBorder:S,innerBorder:A}=e.attribute,T=S&&!1!==S.visible,R=A&&!1!==A.visible;(T||R)&&(({cornerRadius:c=s.cornerRadius,opacity:g=s.opacity,x:p=s.x,y:f=s.y,scaleX:m=s.scaleX,scaleY:b=s.scaleY,x1:w,y1:y}=e.attribute),({width:v,height:C}=e.attribute),v=(null!=v?v:w-i)||0,C=(null!=C?C:y-r)||0,w=!(!S||!S.stroke),y=!(!A||!A.stroke),T&&(({distance:T=s.outerBorder.distance}=S),x=i-(T=getScaledStroke(t,T,t.dpr)),_=r-T,T=2*T,0===c||isArray_default(c)&&c.every(e=>0===e)?(t.beginPath(),t.rect(x,_,v+T,C+T)):(t.beginPath(),createRectPath(t,x,_,v+T,C+T,c)),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u?u(t,S,s.outerBorder):w&&(x=s.outerBorder.opacity,s.outerBorder.opacity=g,t.setStrokeStyle(e,S,(p-i)/m,(f-r)/b,s.outerBorder),s.outerBorder.opacity=x,t.stroke())),R)&&(({distance:_=s.innerBorder.distance}=A),w=i+(T=getScaledStroke(t,_,t.dpr)),S=r+T,x=2*T,0===c||isArray_default(c)&&c.every(e=>0===e)?(t.beginPath(),t.rect(w,S,v-x,C-x)):(t.beginPath(),createRectPath(t,w,S,v-x,C-x,c)),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u?u(t,A,s.innerBorder):y&&(R=s.innerBorder.opacity,s.innerBorder.opacity=g,t.setStrokeStyle(e,A,(p-i)/m,(f-r)/b,s.innerBorder),s.innerBorder.opacity=R,t.stroke()))}},SplitRectBeforeRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){var{stroke:g=s.stroke}=e.attribute;Array.isArray(g)&&g.some(e=>!1===e)&&(c.doStroke=!1)}},SplitRectBeforeRenderContribution=__decorate9([injectable()],SplitRectBeforeRenderContribution),SplitRectAfterRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u){var{width:c=s.width,height:g=s.height,stroke:p=s.stroke}=e.attribute;Array.isArray(p)&&p.some(e=>!1===e)&&(t.setStrokeStyle(e,e.attribute,i,r,s),t.beginPath(),t.moveTo(i,r),p[0]?t.lineTo(i+c,r):t.moveTo(i+c,r),p[1]?t.lineTo(i+c,r+g):t.moveTo(i+c,r+g),p[2]?t.lineTo(i,r+g):t.moveTo(i,r+g),p[3]?(c=p[0]?r-t.lineWidth/2:r,t.lineTo(i,c)):t.moveTo(i,r),t.stroke())}},SplitRectAfterRenderContribution=__decorate9([injectable()],SplitRectAfterRenderContribution),defaultRectRenderContribution=new DefaultRectRenderContribution,defaultRectTextureRenderContribution=defaultBaseTextureRenderContribution,defaultRectBackgroundRenderContribution=defaultBaseBackgroundRenderContribution,DefaultSymbolRenderContribution=(init_esbuild_inject(),class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u){var c,g,p,f,m,b,v,C,y,_,w,x,S=e.getParsedPath();S&&(({outerBorder:w,innerBorder:c}=e.attribute),x=w&&!1!==w.visible,g=c&&!1!==c.visible,x||g)&&(({size:p=s.size,opacity:f=s.opacity,x:m=s.x,y:b=s.y,scaleX:v=s.scaleX,scaleY:C=s.scaleY}=e.attribute),_=!(!w||!w.stroke),y=!(!c||!c.stroke),x&&(({distance:x=s.outerBorder.distance}=w),x=getScaledStroke(t,x,t.dpr),t.beginPath(),!1===S.drawOffset(t,p,i,r,x)&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u?u(t,w,s.outerBorder):_&&(x=s.outerBorder.opacity,s.outerBorder.opacity=f,t.setStrokeStyle(e,w,(m-i)/v,(b-r)/C,s.outerBorder),s.outerBorder.opacity=x,t.stroke())),g)&&(({distance:_=s.innerBorder.distance}=c),w=getScaledStroke(t,_,t.dpr),t.beginPath(),!1===S.drawOffset(t,p,i,r,-w)&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u?u(t,c,s.innerBorder):y&&(x=s.innerBorder.opacity,s.innerBorder.opacity=f,t.setStrokeStyle(e,c,(m-i)/v,(b-r)/C,s.innerBorder),s.innerBorder.opacity=x,t.stroke()))}}),defaultSymbolRenderContribution=new DefaultSymbolRenderContribution,defaultSymbolTextureRenderContribution=defaultBaseTextureRenderContribution,defaultSymbolBackgroundRenderContribution=defaultBaseBackgroundRenderContribution,DefaultAreaTextureRenderContribution=(init_esbuild_inject(),class extends DefaultBaseTextureRenderContribution{constructor(){super(...arguments),this.time=BaseRenderContributionTime.afterFillStroke}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){this.textureMap||this.initTextureMap(t,e.stage);var{attribute:g=e.attribute}=c||{},{texture:g=null!=(g=e.attribute.texture)?g:getAttributeFromDefaultAttrList(s,\\\"texture\\\"),textureColor:p=null!=(p=e.attribute.textureColor)?p:getAttributeFromDefaultAttrList(s,\\\"textureColor\\\"),textureSize:f=null!=(f=e.attribute.textureSize)?f:getAttributeFromDefaultAttrList(s,\\\"textureSize\\\"),texturePadding:m=null!=(m=e.attribute.texturePadding)?m:getAttributeFromDefaultAttrList(s,\\\"texturePadding\\\")}=g;g&&this.drawTexture(g,e,t,i,r,s,p,f,m)}}),__decorate10=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata7=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param5=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasArcRender=class extends BaseRender{constructor(e){super(),this.arcRenderContribitions=e,this.numberType=ARC_NUMBER_TYPE,this.builtinContributions=[defaultArcRenderContribution,defaultArcBackgroundRenderContribution,defaultArcTextureRenderContribution],this.init(e)}drawArcTailCapPath(e,t,i,r,n,o,a,l){var s=l-a,h=e.getParsedAngle(),d=h.startAngle,u=(h.endAngle,abs((h=l)-d)),c=d<h;let g=!1;n<o&&(p=n,n=o,o=p);var p=e.getParsedCornerRadius(),{innerDeltaAngle:d,outerStartAngle:f,outerEndAngle:m,innerEndAngle:b,innerStartAngle:v}=e.getParsePadAngle(d,h),C=p,y=p,_=p,w=Math.max(y,C),x=Math.max(_,p);let S=w,A=x;var T,R,M,B=n*cos(f),f=n*sin(f),E=o*cos(b),b=o*sin(b);let P,L,k,H;return(epsilon<x||epsilon<w)&&(P=n*cos(m),L=n*sin(m),k=o*cos(v),H=o*sin(v),u<pi)&&((m=intersect(B,f,k,H,P,L,E,b))&&(u=B-m[0],R=f-m[1],M=P-m[0],T=L-m[1],u=1/sin(acos((u*M+R*T)/(sqrt(u*u+R*R)*sqrt(M*M+T*T)))/2),R=sqrt(m[0]*m[0]+m[1]*m[1]),A=min(x,(o-R)/(u-1)),S=min(w,(n-R)/(1+u)))),S>epsilon?(M=min(C,S),T=min(y,S),m=cornerTangents(k,H,B,f,n,M,Number(c)),R=cornerTangents(P,L,E,b,n,T,Number(c)),S<w&&M===T?(t.moveTo(i+m.cx+m.x01,r+m.cy+m.y01),t.arc(i+m.cx,r+m.cy,S,atan2(m.y01,m.x01),atan2(R.y01,R.x01),!c)):(u=h-s-.03,C=atan2(R.y11,R.x11),t.arc(i,r,n,u,C,!c),0<T&&t.arc(i+R.cx,r+R.cy,T,atan2(R.y11,R.x11),atan2(R.y01,R.x01),!c))):t.moveTo(i+B,r+f),!(epsilon<o)||d<.001?(t.lineTo(i+E,r+b),g=!0):A>epsilon?(y=min(p,A),w=min(_,A),M=cornerTangents(E,b,P,L,o,-w,Number(c)),m=cornerTangents(B,f,k,H,o,-y,Number(c)),t.lineTo(i+M.cx+M.x01,r+M.cy+M.y01),A<x&&y===w?(u=atan2(m.y01,m.x01),t.arc(i+M.cx,r+M.cy,A,atan2(M.y01,M.x01),u,!c)):(0<w&&t.arc(i+M.cx,r+M.cy,w,atan2(M.y01,M.x01),atan2(M.y11,M.x11),!c),C=atan2(M.cy+M.y11,M.cx+M.x11),t.arc(i,r,o,C,h-s-.03,c))):t.lineTo(i+o*cos(v),r+o*sin(v)),g}drawShape(i,r,n,o,a,e,l,s){var h=getTheme(i,null==e?void 0:e.theme).arc,{fill:d=h.fill,stroke:u=h.stroke,x:c=h.x,y:g=h.y}=i.attribute,p=this.valid(i,h,l,s);if(p){var{fVisible:p,sVisible:f,doFill:m,doStroke:b}=p,{outerPadding:v=h.outerPadding,innerPadding:C=h.innerPadding,cap:y=h.cap,forceShowCap:_=h.forceShowCap}=i.attribute,{outerRadius:w=h.outerRadius,innerRadius:x=h.innerRadius}=i.attribute;w+=v,x-=C;let e=0;v=(isBoolean_default(y)&&y||y[0])&&\\\"conical\\\"===d.gradient;v&&(({sc:C,startAngle:A,endAngle:S}=i.getParsedAngle()),abs(S-A)<pi2-epsilon)&&(e=C||0,d.startAngle-=e,d.endAngle-=e);let t=!1;var{isFullStroke:S,stroke:A}=parseStroke(u);(m||S)&&(r.beginPath(),drawArcPath(i,r,n,o,w,x),t=!0,r.setShadowBlendStyle&&r.setShadowBlendStyle(i,i.attribute,h),this.beforeRenderStep(i,r,n,o,m,b,p,f,h,a,l,s),m&&(l?l(r,i.attribute,h):p&&(r.setCommonStyle(i,i.attribute,c-n,g-o,h),r.fill())),b)&&S&&(s?s(r,i.attribute,h):f&&(r.setStrokeStyle(i,i.attribute,c-n,g-o,h),r.stroke())),!S&&b&&(r.beginPath(),drawArcPath(i,r,n,o,w,x,A),t||this.beforeRenderStep(i,r,n,o,m,b,p,f,h,a,l,s),s?s(r,i.attribute,h):f&&(r.setStrokeStyle(i,i.attribute,n,o,h),r.stroke())),(isBoolean_default(y)&&y||y[1])&&_&&(({startAngle:C,endAngle:u}=i.getParsedAngle()),abs(u-C)>=pi2-epsilon)&&(r.beginPath(),c=Math.abs(w-x)/2/w,({endAngle:g=h.endAngle,fill:S=h.fill}=i.attribute),this.drawArcTailCapPath(i,r,n,o,w,x,g,g+c),t||this.beforeRenderStep(i,r,n,o,m,b,p,f,h,a,l,s),m&&\\\"conical\\\"===S.gradient&&(A=getConicGradientAt(0,0,g,S),l||fillVisible&&(r.setCommonStyle(i,i.attribute,n,o,h),r.fillStyle=A,r.fill())),b)&&!s&&f&&(r.setStrokeStyle(i,i.attribute,n,o,h),r.stroke()),this.afterRenderStep(i,r,n,o,m,b,p,f,h,a,l,s),v&&(d.startAngle+=e,d.endAngle+=e)}}draw(e,t,i,r){var n=getTheme(e,null==r?void 0:r.theme).arc;this._draw(e,n,!1,i,r)}},DefaultCanvasArcRender=__decorate10([injectable(),__param5(0,inject(ContributionProvider)),__param5(0,named(ArcRenderContribution)),__metadata7(\\\"design:paramtypes\\\",[Object])],DefaultCanvasArcRender),__decorate11=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata8=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param6=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasCircleRender=class extends BaseRender{constructor(e){super(),this.circleRenderContribitions=e,this.numberType=CIRCLE_NUMBER_TYPE,this.builtinContributions=[defaultCircleRenderContribution,defaultCircleBackgroundRenderContribution,defaultCircleTextureRenderContribution],this.init(e)}drawShape(e,t,i,r,n,o,a,l){var s,h,d,u=getTheme(e,null==o?void 0:o.theme).circle,{radius:c=u.radius,startAngle:g=u.startAngle,endAngle:p=u.endAngle,x:f=u.x,y:m=u.y}=e.attribute,b=this.valid(e,u,a,l);b&&(({fVisible:b,sVisible:s,doFill:h,doStroke:d}=b),t.beginPath(),t.arc(i,r,c,g,p),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,u),this.beforeRenderStep(e,t,i,r,h,d,b,s,u,n,a,l),h&&(a?a(t,e.attribute,u):b&&(t.setCommonStyle(e,e.attribute,f-i,m-r,u),t.fill())),d&&(l?l(t,e.attribute,u):s&&(t.setStrokeStyle(e,e.attribute,f-i,m-r,u),t.stroke())),this.afterRenderStep(e,t,i,r,h,d,b,s,u,n,a,l))}draw(e,t,i,r){var n=getTheme(e,null==r?void 0:r.theme).circle;this._draw(e,n,!1,i,r)}};function drawSegItem(e,t,i,r){var n,o,a,l;t.p1&&(({offsetX:n=0,offsetY:o=0,offsetZ:a=0}=r||{}),1===i?t.p2&&t.p3?e.bezierCurveTo(n+t.p1.x,o+t.p1.y,n+t.p2.x,o+t.p2.y,n+t.p3.x,o+t.p3.y,a):e.lineTo(n+t.p1.x,o+t.p1.y,a):t.p2&&t.p3?(([l]=divideCubic(t,i)),e.bezierCurveTo(n+l.p1.x,o+l.p1.y,n+l.p2.x,o+l.p2.y,n+l.p3.x,o+l.p3.y,a)):(l=t.getPointAt(i),e.lineTo(n+l.x,o+l.y,a)))}function drawSegments(l,s,h,d,u){const{offsetX:c=0,offsetY:g=0,offsetZ:p=0,mode:e=\\\"none\\\",drawConnect:f=!1}=u||{};if((!f||\\\"none\\\"!==e)&&s){let a=!0;var m=s[\\\"curves\\\"];if(1<=h)if(f){let o,a=!0;m.forEach((t,e)=>{let i=t.p0;if(t.originP1!==t.originP2)if(o&&o.originP1===o.originP2&&(i=o.p0),t.defined)a||(l.lineTo(i.x+c,i.y+g,p),a=!a);else{var{originP1:r,originP2:n}=t;let e;r&&!1!==r.defined?e=i:r&&!1!==n.defined&&(e=null!=(r=t.p3)?r:t.p1),a?(a=!a,n=(e||t.p0).x,r=(e||t.p0).y,l.moveTo(n+c,r+g,p)):e&&(a=!a,l.lineTo(e.x+c,e.y+g,p))}o=t})}else m.forEach(e=>{a=!e.defined||(a&&l.moveTo(e.p0.x+c,e.p0.y+g,p),drawSegItem(l,e,1,u),!1)});else if(!(h<=0)){let e;\\\"x\\\"===d?e=Direction.ROW:\\\"y\\\"===d?e=Direction.COLUMN:\\\"auto\\\"===d&&(e=s.direction);var b=h*s.tryUpdateLength(e);let t=0,i=!0,r=null;for(let n=0,o=m.length;n<o;n++){var v=m[n],C=v.getLength(e),y=(b-t)/C;if(t+=C,y<0)break;if(f){let t=v.p0;if(v.originP1===v.originP2);else if(r&&r.originP1===r.originP2&&(t=r.p0),v.defined)i||(l.lineTo(t.x+c,t.y+g,p),i=!i);else{var{originP1:C,originP2:_}=v;let e;C&&!1!==C.defined?e=t:C&&!1!==_.defined&&(e=null!=(C=v.p3)?C:v.p1),i?(i=!i,_=(e||v.p0).x,C=(e||v.p0).y,l.moveTo(_+c,C+g,p)):e&&(i=!i,l.lineTo(e.x+c,e.y+g,p))}r=v}else a=!v.defined||(a&&l.moveTo(v.p0.x+c,v.p0.y+g,p),drawSegItem(l,v,min(y,1),u),!1)}}}}function drawIncrementalSegments(t,e,i,r){const{offsetX:n=0,offsetY:o=0}=r||{},a=e?e.points[e.points.length-1]:i.points[0];t.moveTo(a.x+n,a.y+o),i.points.forEach(e=>{!1!==e.defined?t.lineTo(e.x+n,e.y+o):t.moveTo(e.x+n,e.y+o)})}function drawIncrementalAreaSegments(l,s,e,t){const{offsetX:h=0,offsetY:d=0}=t||{},i=e[\\\"points\\\"],r=[];let n=0;for(let o=0;o<i.length;o++)!1===i[o].defined&&(n+1!==o&&r.slice(n,o),n=o);r.push(i),r.forEach((e,t)=>{var i,r,n=s&&0===t?s.points[s.points.length-1]:e[0];l.moveTo(n.x+h,n.y+d),e.forEach(e=>{!1!==e.defined?l.lineTo(e.x+h,e.y+d):l.moveTo(e.x+h,e.y+d)});for(let a=e.length-1;0<=a;a--){var o=e[a];l.lineTo(null!=(i=o.x1)?i:o.x,null!=(i=o.y1)?i:o.y)}l.lineTo(null!=(r=n.x1)?r:n.x,null!=(r=n.y1)?r:n.y),l.closePath()})}DefaultCanvasCircleRender=__decorate11([injectable(),__param6(0,inject(ContributionProvider)),__param6(0,named(CircleRenderContribution)),__metadata8(\\\"design:paramtypes\\\",[Object])],DefaultCanvasCircleRender),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var __decorate12=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},DefaultCanvasLineRender=class extends BaseRender{constructor(){super(...arguments),this.numberType=LINE_NUMBER_TYPE}draw(e,t,i,r){var n=getTheme(e,null==r?void 0:r.theme).line;this._draw(e,n,!1,i,r)}drawSegmentItem(n,o,a,l,s,h,d,u,c,g,p,f,m,b,v){var C;if(o){n.beginPath();var y=null!=(y=this.z)?y:0,{x:_=0,x:w=0}=(drawSegments(n.camera?n:n.nativeContext,o,c,g,{offsetX:p,offsetY:f,offsetZ:y}),m.cache&&!isArray_default(m.cache)&&m.cache.curves.every(e=>e.defined)&&m.attribute.curveType&&m.attribute.curveType.includes(\\\"Closed\\\")&&n.closePath(),n.setShadowBlendStyle&&n.setShadowBlendStyle(m,d,u),d);!1!==a&&(b?b(n,d,u):s&&(n.setCommonStyle(m,d,_-p,w-f,u),n.fill())),!1!==l&&(v?v(n,d,u):h&&(n.setStrokeStyle(m,d,_-p,w-f,u),n.stroke()));let{connectedType:e,connectedX:t,connectedY:i,connectedStyle:r}=d;if(r=isArray_default(u)?(e=null!=(C=null!=e?e:u[0].connectedType)?C:u[1].connectedType,t=null!=(C=null!=t?t:u[0].connectedX)?C:u[1].connectedX,i=null!=(C=null!=i?i:u[0].connectedY)?C:u[1].connectedY,null!=(C=null!=r?r:u[0].connectedStyle)?C:u[1].connectedStyle):(e=null!=e?e:u.connectedType,t=null!=t?t:u.connectedX,i=null!=i?i:u.connectedY,null!=r?r:u.connectedStyle),\\\"none\\\"!==(e=\\\"connect\\\"!==e&&\\\"zero\\\"!==e?\\\"none\\\":e)){n.beginPath(),drawSegments(n.camera?n:n.nativeContext,o,c,g,{offsetX:p,offsetY:f,offsetZ:y,drawConnect:!0,mode:e,zeroX:t,zeroY:i});const x=[];isArray_default(u)?u.forEach(e=>x.push(e)):x.push(u),x.push(d),!1!==a&&(b?b(n,d,u):s&&(n.setCommonStyle(m,r,_-p,w-f,x),n.fill())),!1!==l&&(v?v(n,d,u):h&&(n.setStrokeStyle(m,r,_-p,w-f,x),n.stroke()))}return!1}}drawLinearLineHighPerformance(e,t,i,r,n,o,a,l,s,h,d,u,c){t.beginPath();var g=null!=(f=this.z)?f:0,p=e.attribute[\\\"points\\\"],f=p[0];t.moveTo(f.x+a,f.y+l,g);for(let v=1;v<p.length;v++){var m=p[v];t.lineTo(m.x+a,m.y+l,g)}t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s);var{x:f=0,x:b=0}=e.attribute;!1!==i&&(u?u(t,e.attribute,s):n&&(t.setCommonStyle(e,e.attribute,f-a,b-l,s),t.fill())),!1!==r&&(c?c(t,e.attribute,s):o&&(t.setStrokeStyle(e,e.attribute,f-a,b-l,s),t.stroke()))}drawShape(a,l,s,h,e,t,d,u){const c=getTheme(a,null==t?void 0:t.theme).line,{fill:g=c.fill,stroke:p=c.stroke,fillOpacity:f=c.fillOpacity,strokeOpacity:m=c.strokeOpacity,segments:i,points:r,closePath:n}=a.attribute;if(!this.valid(a,c,d,u))return;let{curveType:o=c.curveType}=a.attribute;n&&\\\"linear\\\"===o&&(o=\\\"linearClosed\\\");const{clipRange:b=c.clipRange,clipRangeByDimension:v=c.clipRangeByDimension}=a.attribute;if(1===b&&!i&&!r.some(e=>!1===e.defined)&&\\\"linear\\\"===o)return this.drawLinearLineHighPerformance(a,l,!!g,!!p,f,m,s,h,c,e,t,d,u);if(a.shouldUpdateShape()){var{points:C,segments:y}=a.attribute,_=C;if(y&&y.length){let r,n;if(a.cache=y.map((e,t)=>{if(e.points.length<=1&&0===t)return e.points[0]&&(n={endX:e.points[0].x,endY:e.points[0].y,curves:[{defined:!1!==e.points[0].defined}]}),null;1===t?r={x:n.endX,y:n.endY,defined:n.curves[n.curves.length-1].defined}:1<t&&(r.x=n.endX,r.y=n.endY,r.defined=n.curves[n.curves.length-1].defined);var i=calcLineCache(e.points,o,{startPoint:r});return n=i}).filter(e=>!!e),\\\"linearClosed\\\"===o){let t;for(let i=0;i<a.cache.length;i++){var w=a.cache[i];for(let e=0;e<w.curves.length;e++)if(w.curves[e].defined){t=w.curves[e].p0;break}if(t)break}a.cache[a.cache.length-1]&&a.cache[a.cache.length-1].lineTo(t.x,t.y,!0)}}else{if(!C||!C.length)return a.cache=null,void a.clearUpdateShapeTag();a.cache=calcLineCache(_,o)}a.clearUpdateShapeTag()}if(Array.isArray(a.cache)){const x=a.attribute.segments.filter(e=>e.points.length);if(1===x[0].points.length&&x.shift(),1===b){let i=!1;a.cache.forEach((e,t)=>{i=i||this.drawSegmentItem(l,e,!!g,!!p,f,m,x[t],[c,a.attribute],b,v,s,h,a,d,u)})}else{const S=a.cache.reduce((e,t)=>e+t.getLength(),0),A=b*S;let n=0,o=!1;a.cache.forEach((e,t)=>{var i,r;o||(i=e.getLength(),r=(A-n)/i,n+=i,0<r&&(o=this.drawSegmentItem(l,e,!!g,!!p,f,m,x[t],[c,a.attribute],min(r,1),v,s,h,a,d,u)))})}}else this.drawSegmentItem(l,a.cache,!!g,!!p,f,m,a.attribute,c,b,v,s,h,a,d,u)}};function drawAreaSegments(d,e,r,u){var{drawConnect:h=!1,mode:c=\\\"none\\\"}=u||{};if(!h||\\\"none\\\"!==c){const{top:x,bottom:S}=e;if(x.curves.length===S.curves.length)if(1<=r){const A=[],T=[];let i=!0;if(h){let t,s,h=!0;const R=x.curves.length;x.curves.forEach((i,e)=>{var r=S.curves[R-e-1];let n=i,o=r;if(i.originP1===i.originP2)t=i,s=r;else{if(t&&t.originP1===t.originP2&&(n=t,o=s),i.defined)h||(A.push(n),T.push(o),drawAreaConnectBlock(d,A,T,u),A.length=0,T.length=0,h=!h);else{var{originP1:a,originP2:l}=i;let e,t;a&&!1!==a.defined?(e=n,t=o):a&&!1!==l.defined&&(e=i,t=r),h?(h=!h,A.push(e||i),T.push(t||r)):e&&(h=!h,A.push(e||i),T.push(t||r),drawAreaConnectBlock(d,A,T,u),A.length=0,T.length=0)}t=i}}),drawAreaConnectBlock(d,A,T,u)}else{for(let e=0,t=x.curves.length;e<t;e++){var n=x.curves[e];i!==n.defined?(i?(drawAreaBlock(d,A,T,u),A.length=0,T.length=0):(A.push(n),T.push(S.curves[t-e-1])),i=!i):i&&(A.push(n),T.push(S.curves[t-e-1]))}drawAreaBlock(d,A,T,u)}}else if(!(r<=0)){let e=(u||{})[\\\"direction\\\"];var c=x[\\\"curves\\\"],g=null!=(g=c[c.length-1].p3)?g:c[c.length-1].p1,p=abs(g.x-c[0].p0.x),g=abs(g.y-c[0].p0.y),f=(e=null!=e?e:g<p?Direction.ROW:Direction.COLUMN,Number.isFinite(p)||(e=Direction.COLUMN),r*((e=Number.isFinite(g)?e:Direction.ROW)===Direction.ROW?p:g));let t=0,i=!0;var m=[],b=[];let n,o,a=!0;for(let l=0,s=x.curves.length;l<s;l++){var v=x.curves[l],C=v.getLength(e),y=(f-t)/C;if(y<0)break;if(t+=C,h){C=S.curves[s-l-1];let i=v,r=C;if(v.originP1===v.originP2)n=v,o=C;else{if(n&&n.originP1===n.originP2&&(i=n,r=o),v.defined)a||(m.push(i),b.push(r),drawAreaConnectBlock(d,m,b,u),b.length=m.length=0,a=!a);else{var{originP1:_,originP2:w}=v;let e,t;_&&!1!==_.defined?(e=i,t=r):_&&!1!==w.defined&&(e=v,t=C),a?(a=!a,m.push(e||v),b.push(t||C)):e&&(a=!a,m.push(e||v),b.push(t||C),drawAreaConnectBlock(d,m,b,u),b.length=m.length=0)}n=v}}else{let e=null,t=null;i!==v.defined?(i?(drawAreaBlock(d,m,b,u),b.length=m.length=0):(e=v,t=S.curves[s-l-1]),i=!i):i&&(e=v,t=S.curves[s-l-1]),e&&t&&(y<1&&(e=(e.p2&&e.p3?divideCubic:divideLinear)(e,y)[0],t=(t.p2&&t.p3?divideCubic:divideLinear)(t,1-y)[1]),e.defined=i,t.defined=i,m.push(e),b.push(t)),e=null,t=null}}(h?drawAreaConnectBlock:drawAreaBlock)(d,m,b,u)}}}function drawAreaConnectBlock(e,t,i,r){var n,o,a,l,s,h;t.length<2||(({offsetX:n=0,offsetY:o=0,offsetZ:a=0,mode:l}=r||{}),s=t[0],e.moveTo(s.p0.x+n,s.p0.y+o,a),h=(s=t[t.length-1]).p3||s.p1,e.lineTo(h.x+n,h.y+o,a),s=i[i.length-1],e.lineTo(s.p0.x+n,s.p0.y+o,a),h=(s=i[0]).p3||s.p1,e.lineTo(h.x+n,h.y+o,a),e.closePath())}function drawAreaBlock(t,e,i,r){const{offsetX:n=0,offsetY:o=0,offsetZ:a=0}=r||{};let l=!0;e.forEach(e=>{l=!e.defined||(l&&t.moveTo(e.p0.x+n,e.p0.y+o,a),drawSegItem(t,e,1,r),!1)}),l=!0;for(let h=i.length-1;0<=h;h--){var s=i[h];l=!s.defined||(l&&t.lineTo(s.p0.x+n,s.p0.y+o,a),drawSegItem(t,s,1,r),!1)}t.closePath()}DefaultCanvasLineRender=__decorate12([injectable()],DefaultCanvasLineRender),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var defaultAreaTextureRenderContribution=new DefaultAreaTextureRenderContribution,defaultAreaBackgroundRenderContribution=defaultBaseBackgroundRenderContribution,__decorate13=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata9=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param7=function(i,r){return function(e,t){r(e,t,i)}};function calcLineCache2(e,t,i){switch(t){case\\\"linear\\\":default:return genLinearSegments(e,i);case\\\"basis\\\":return genBasisSegments(e,i);case\\\"monotoneX\\\":return genMonotoneXSegments(e,i);case\\\"monotoneY\\\":return genMonotoneYSegments(e,i);case\\\"step\\\":return genStepSegments(e,.5,i);case\\\"stepBefore\\\":return genStepSegments(e,0,i);case\\\"stepAfter\\\":return genStepSegments(e,1,i);case\\\"linearClosed\\\":return genLinearClosedSegments(e,i)}}var DefaultCanvasAreaRender=class extends BaseRender{constructor(e){super(),this.areaRenderContribitions=e,this.numberType=AREA_NUMBER_TYPE,this.builtinContributions=[defaultAreaTextureRenderContribution,defaultAreaBackgroundRenderContribution],this.init(e)}drawLinearAreaHighPerformance(i,r,n,o,a,e,l,s,h,d,t,u,c){var g,p,f=i.attribute[\\\"points\\\"];if(!(f.length<2)){r.beginPath();var m=null!=(b=this.z)?b:0,b=f[0];r.moveTo(b.x+l,b.y+s,m);for(let e=1;e<f.length;e++){var v=f[e];r.lineTo(v.x+l,v.y+s,m)}for(let t=f.length-1;0<=t;t--){var C=f[t];r.lineTo((null!=(g=C.x1)?g:C.x)+l,(null!=(g=C.y1)?g:C.y)+s,m)}r.closePath(),r.setShadowBlendStyle&&r.setShadowBlendStyle(i,i.attribute,h),this.beforeRenderStep(i,r,l,s,!!a,!1,n,!1,h,d,u,null,{attribute:i.attribute});var{x:y=0,x:_=0}=i.attribute;if(!1!==n&&(u?u(r,i.attribute,h):a&&(r.setCommonStyle(i,i.attribute,y-l,_-s,h),r.fill())),this.afterRenderStep(i,r,l,s,!!a,!1,n,!1,h,d,u,null,{attribute:i.attribute}),o){var{stroke:w=h&&h.stroke}=i.attribute;if(isArray_default(w)&&(w[0]||w[2])&&!1===w[1])if(r.beginPath(),w[0]){r.moveTo(b.x+l,b.y+s,m);for(let e=1;e<f.length;e++){var x=f[e];r.lineTo(x.x+l,x.y+s,m)}}else if(w[2]){b=f[f.length-1];r.moveTo(b.x+l,b.y+s,m);for(let e=f.length-2;0<=e;e--){var S=f[e];r.lineTo((null!=(p=S.x1)?p:S.x)+l,(null!=(p=S.y1)?p:S.y)+s,m)}}c?c(r,i.attribute,h):(r.setStrokeStyle(i,i.attribute,y-l,_-s,h),r.stroke())}}}drawShape(a,l,s,h,d,e,u,c){var i,t;const g=getTheme(a,null==e?void 0:e.theme).area,{fill:r=g.fill,stroke:I=g.stroke,fillOpacity:p=g.fillOpacity,z:f=g.z,strokeOpacity:m=g.strokeOpacity}=a.attribute,n=this.valid(a,g,u,c);if(!n)return;const{doFill:b,doStroke:v}=n,{clipRange:C=g.clipRange,closePath:o,points:y,segments:_}=a.attribute;let{curveType:w=g.curveType}=a.attribute;if(o&&\\\"linear\\\"===w&&(w=\\\"linearClosed\\\"),1===C&&!_&&!y.some(e=>!1===e.defined)&&\\\"linear\\\"===w)return this.drawLinearAreaHighPerformance(a,l,!!r,v,p,m,s,h,g,d,e,u,c);if(a.shouldUpdateShape()){if(_&&_.length){let r,n;const P=_.map((e,t)=>{if(e.points.length<=1&&0===t)return e.points[0]&&(n={endX:e.points[0].x,endY:e.points[0].y}),null;1===t?r={x:n.endX,y:n.endY}:1<t&&(r.x=n.endX,r.y=n.endY);var i=calcLineCache2(e.points,w,{startPoint:r});return n=i}).filter(e=>!!e);var x,S=[];for(let t=_.length-1;0<=t;t--){var A,T=_[t].points,R=[];for(let e=T.length-1;0<=e;e--)R.push({x:null!=(i=T[e].x1)?i:T[e].x,y:null!=(i=T[e].y1)?i:T[e].y});0!==t&&(A=(A=_[t-1].points)[A.length-1])&&R.push({x:null!=(x=A.x1)?x:A.x,y:null!=(x=A.y1)?x:A.y}),1<R.length&&(x=calcLineCache2(R,\\\"stepBefore\\\"===w?\\\"stepAfter\\\":\\\"stepAfter\\\"===w?\\\"stepBefore\\\":w),S.unshift(x))}a.cacheArea=S.map((e,t)=>({top:P[t],bottom:e}))}else{if(!y||!y.length)return a.cacheArea=null,void a.clearUpdateShapeTag();var M=y,B=[];for(let e=y.length-1;0<=e;e--)B.push({x:null!=(t=y[e].x1)?t:y[e].x,y:null!=(t=y[e].y1)?t:y[e].y});var M=calcLineCache2(M,w),E=calcLineCache2(B,\\\"stepBefore\\\"===w?\\\"stepAfter\\\":\\\"stepAfter\\\"===w?\\\"stepBefore\\\":w);a.cacheArea={top:M,bottom:E}}a.clearUpdateShapeTag()}if(Array.isArray(a.cacheArea)){const L=a.attribute.segments.filter(e=>e.points.length);if(1===L[0].points.length&&L.shift(),1===C){let i=!1;a.cacheArea.forEach((e,t)=>{i=i||this.drawSegmentItem(l,e,b,p,v,m,L[t],[g,a.attribute],C,s,h,f,a,d,u,c)})}else{const k=a.cacheArea.reduce((e,t)=>e+t.top.getLength(),0),H=C*k;let n=0,o=!1;a.cacheArea.forEach((e,t)=>{var i,r;o||(i=e.top.getLength(),r=(H-n)/i,n+=i,0<r&&(o=this.drawSegmentItem(l,e,b,p,v,m,L[t],[g,a.attribute],min(r,1),s,h,f,a,d,u,c)))})}}else this.drawSegmentItem(l,a.cacheArea,b,p,v,m,a.attribute,g,C,s,h,f,a,d,u,c)}draw(e,t,i,r){var n=getTheme(e,null==r?void 0:r.theme).area;this._draw(e,n,!1,i,r)}drawSegmentItem(e,t,i,r,n,o,a,l,s,h,d,u,c,g,p,f){return this._drawSegmentItem(e,t,i,r,n,o,a,l,s,h,d,u,c,g,!1,p,f)||this._drawSegmentItem(e,t,i,r,n,o,a,l,s,h,d,u,c,g,!0,p,f)}_drawSegmentItem(l,s,h,d,u,e,c,g,p,f,m,b,v,C,y,_,w){if(s&&s.top&&s.bottom&&s.top.curves&&s.top.curves.length&&s.bottom.curves&&s.bottom.curves.length){let{connectedType:r,connectedX:n,connectedY:o,connectedStyle:a}=c;const T=[];if(y&&(a=isArray_default(g)?(r=null!=(x=null!=r?r:g[0].connectedType)?x:g[1].connectedType,n=null!=(x=null!=n?n:g[0].connectedX)?x:g[1].connectedX,o=null!=(x=null!=o?o:g[0].connectedY)?x:g[1].connectedY,null!=(x=null!=a?a:g[0].connectedStyle)?x:g[1].connectedStyle):(r=null!=r?r:g.connectedType,n=null!=n?n:g.connectedX,o=null!=o?o:g.connectedY,null!=a?a:g.connectedStyle),\\\"connect\\\"!==r&&\\\"zero\\\"!==r&&(r=\\\"none\\\"),isArray_default(g)?g.forEach(e=>T.push(e)):T.push(g),T.push(c)),!y||\\\"none\\\"!==r){l.beginPath();var{points:x,segments:S}=v.attribute;let e,t,i=void Direction.ROW;e=S?(A=S[S.length-1],t=S[0].points[0],A.points[A.points.length-1]):(t=x[0],x[x.length-1]);var S=abs(e.x-t.x),A=abs(e.y-t.y),{x=0,x:A=0}=(i=!Number.isFinite(S+A)||A<S?Direction.ROW:Direction.COLUMN,drawAreaSegments(l.camera?l:l.nativeContext,s,p,{offsetX:f,offsetY:m,offsetZ:b,direction:i,drawConnect:y,mode:r,zeroX:n,zeroY:o}),this.beforeRenderStep(v,l,f,m,!!d,!1,h,!1,g,C,_,null,{attribute:c}),l.setShadowBlendStyle&&l.setShadowBlendStyle(v,c,g),c);!1!==h&&(_?_(l,c,g):d&&(l.setCommonStyle(v,y?a:c,x-f,A-m,y?T:g),l.fill())),this.afterRenderStep(v,l,f,m,!!d,!1,h,!1,g,C,_,null,{attribute:c}),!1!==u&&(w?w(l,c,g):(({stroke:S=g&&g[1]&&g[1].stroke}=c),isArray_default(S)&&(S[0]||S[2])&&!1===S[1]&&(l.beginPath(),drawSegments(l.camera?l:l.nativeContext,S[0]?s.top:s.bottom,p,i===Direction.ROW?\\\"x\\\":\\\"y\\\",{offsetX:f,offsetY:m,offsetZ:b,drawConnect:y,mode:r,zeroX:n,zeroY:o})),l.setStrokeStyle(v,y?a:c,x-f,A-m,y?T:g),l.stroke()))}return!1}}},DefaultCanvasAreaRender=__decorate13([injectable(),__param7(0,inject(ContributionProvider)),__param7(0,named(AreaRenderContribution)),__metadata9(\\\"design:paramtypes\\\",[Object])],DefaultCanvasAreaRender),defaultPathTextureRenderContribution=(init_esbuild_inject(),init_esbuild_inject(),defaultBaseTextureRenderContribution),defaultPathBackgroundRenderContribution=defaultBaseBackgroundRenderContribution,__decorate14=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata10=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param8=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasPathRender=class extends BaseRender{constructor(e){super(),this.pathRenderContribitions=e,this.numberType=PATH_NUMBER_TYPE,this.builtinContributions=[defaultPathBackgroundRenderContribution,defaultPathTextureRenderContribution],this.init(e)}drawShape(e,t,i,r,n,o,a,l){var s,h,d,u,c=null!=(c=this.tempTheme)?c:getTheme(e,null==o?void 0:o.theme).path,{x:g=c.x,y:p=c.y}=e.attribute,f=null!=(f=this.z)?f:0,m=this.valid(e,c,a,l);m&&(({fVisible:m,sVisible:h,doFill:d,doStroke:u}=m),t.beginPath(),e.pathShape?renderCommandList(e.pathShape.commandList,t,i,r,1,1,f):renderCommandList((null!=(s=e.attribute.path)?s:c.path).commandList,t,i,r,1,1,f),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,c),this.beforeRenderStep(e,t,i,r,d,u,m,h,c,n,a,l),u&&(l?l(t,e.attribute,c):h&&(t.setStrokeStyle(e,e.attribute,g-i,p-r,c),t.stroke())),d&&(a?a(t,e.attribute,c):m&&(t.setCommonStyle(e,e.attribute,g-i,p-r,c),t.fill())),this.afterRenderStep(e,t,i,r,d,u,m,h,c,n,a,l))}draw(e,t,i,r){var n=getTheme(e,null==r?void 0:r.theme).path;this.tempTheme=n,this._draw(e,n,!1,i,r),this.tempTheme=null}},DefaultCanvasPathRender=__decorate14([injectable(),__param8(0,inject(ContributionProvider)),__param8(0,named(PathRenderContribution)),__metadata10(\\\"design:paramtypes\\\",[Object])],DefaultCanvasPathRender),__decorate15=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata11=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param9=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasRectRender=class extends BaseRender{constructor(e){super(),this.rectRenderContribitions=e,this.type=\\\"rect\\\",this.numberType=RECT_NUMBER_TYPE,this.builtinContributions=[defaultRectRenderContribution,defaultRectBackgroundRenderContribution,defaultRectTextureRenderContribution],this.init(e)}drawShape(e,t,i,r,n,o,a,l){var s=null!=(s=this.tempTheme)?s:getTheme(e,null==o?void 0:o.theme).rect,{fill:h=s.fill,background:d,stroke:u=s.stroke,cornerRadius:c=s.cornerRadius,opacity:g=s.opacity,fillOpacity:p=s.fillOpacity,lineWidth:f=s.lineWidth,strokeOpacity:m=s.strokeOpacity,visible:b=s.visible,x1:v,y1:C,x:y=s.x,y:_=s.y}=e.attribute,{width:w,height:x}=e.attribute,p=rectFillVisible(g,p,w=(null!=w?w:v-y)||0,x=(null!=x?x:C-_)||0,h),v=rectStrokeVisible(g,m,w,x),C=runFill(h,d),g=runStroke(u,f);e.valid&&b&&(C||g)&&(p||v||a||l||d)&&(0===c||isArray_default(c)&&c.every(e=>0===e)?(t.beginPath(),t.rect(i,r,w,x)):(t.beginPath(),createRectPath(t,i,r,w,x,c)),m={doFill:C,doStroke:g},t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),this.beforeRenderStep(e,t,i,r,C,g,p,v,s,n,a,l,m),m.doFill&&(a?a(t,e.attribute,s):p&&(t.setCommonStyle(e,e.attribute,y-i,_-r,s),t.fill())),m.doStroke&&(l?l(t,e.attribute,s):v&&(t.setStrokeStyle(e,e.attribute,y-i,_-r,s),t.stroke())),this.afterRenderStep(e,t,i,r,C,g,p,v,s,n,a,l))}draw(e,t,i,r){var n=getTheme(e,null==r?void 0:r.theme).rect;this.tempTheme=n,this._draw(e,n,!1,i,r),this.tempTheme=null}},DefaultCanvasRectRender=__decorate15([injectable(),__param9(0,inject(ContributionProvider)),__param9(0,named(RectRenderContribution)),__metadata11(\\\"design:paramtypes\\\",[Object])],DefaultCanvasRectRender),__decorate16=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata12=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param10=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasSymbolRender=class extends BaseRender{constructor(e){super(),this.symbolRenderContribitions=e,this.numberType=SYMBOL_NUMBER_TYPE,this.builtinContributions=[defaultSymbolRenderContribution,defaultSymbolBackgroundRenderContribution,defaultSymbolTextureRenderContribution],this.init(e)}drawShape(n,o,a,l,e,t,s,h){var i,r,d,u,c,g,p,f;const m=getTheme(n,null==t?void 0:t.theme).symbol,{size:b=m.size,x:v=m.x,y:C=m.y,scaleX:y=m.scaleX,scaleY:_=m.scaleY}=n.attribute,w=this.valid(n,m,s,h);w&&(({fVisible:i,sVisible:r,doFill:d,doStroke:u}=w),c=n.getParsedPath())&&(({keepDirIn3d:p=m.keepDirIn3d}=n.attribute),g=null!=(g=this.z)?g:0,o.beginPath(),p&&o.camera&&o.project?(p=o.project(a,l,g),f=o.camera,o.camera=null,!1===c.draw(o,isArray_default(b)?[b[0]*y,b[1]*_]:b*y,p.x,p.y,void 0,(e,t)=>{var i,r;n._parsedPath.svgCache&&((r=Object.assign({},t)).fill=null!=(i=t.fill)?i:n.attribute.fill,r.opacity=null!=(i=t.fill)?i:n.attribute.opacity,r.fillOpacity=n.attribute.fillOpacity,r.stroke=null!=(i=t.stroke)?i:n.attribute.stroke,t=r),t.fill&&(s?s(o,n.attribute,m):(o.setCommonStyle(n,t,v-a,C-l,m),o.fill())),t.stroke&&(h?h(o,n.attribute,m):(o.setStrokeStyle(n,t,(v-a)/y,(C-l)/_,m),o.stroke()))})&&o.closePath(),o.camera=f):!1===c.draw(o,b,a,l,g,(e,t)=>{var i,r;n._parsedPath.svgCache&&((r=Object.assign({},t)).fill=null!=(i=t.fill)?i:n.attribute.fill,r.opacity=null!=(i=t.opacity)?i:n.attribute.opacity,r.fillOpacity=n.attribute.fillOpacity,r.stroke=null!=(i=t.stroke)?i:n.attribute.stroke,t=r),t.fill&&(s?s(o,n.attribute,m):(o.setCommonStyle(n,t,v-a,C-l,m),o.fill())),t.stroke&&(h?h(o,n.attribute,m):(o.setStrokeStyle(n,t,(v-a)/y,(C-l)/_,m),o.stroke()))})&&o.closePath(),o.setShadowBlendStyle&&o.setShadowBlendStyle(n,n.attribute,m),this.beforeRenderStep(n,o,a,l,d,u,i,r,m,e,s,h),d&&!c.isSvg&&(s?s(o,n.attribute,m):i&&(o.setCommonStyle(n,n.attribute,v-a,C-l,m),o.fill())),u&&!c.isSvg&&(h?h(o,n.attribute,m):r&&(o.setStrokeStyle(n,n.attribute,(v-a)/y,(C-l)/_,m),o.stroke())),this.afterRenderStep(n,o,a,l,d,u,i,r,m,e,s,h))}draw(e,t,i,r){var n=getTheme(e,null==r?void 0:r.theme).symbol;this._draw(e,n,!1,i,r)}},DefaultCanvasSymbolRender=__decorate16([injectable(),__param10(0,inject(ContributionProvider)),__param10(0,named(SymbolRenderContribution)),__metadata12(\\\"design:paramtypes\\\",[Object])],DefaultCanvasSymbolRender),BoundsAllocate=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),Symbol[\\\"for\\\"](\\\"BoundsAllocate\\\")),DefaultBoundsAllocate=class{constructor(){this.pools=[];for(let e=0;e<10;e++)this.pools.push(new AABBBounds)}allocate(e,t,i,r){var n;return this.pools.length?((n=this.pools.pop()).x1=e,n.y1=t,n.x2=i,n.y2=r,n):(new AABBBounds).setValue(e,t,i,r)}allocateByObj(e){var t;return this.pools.length?((t=this.pools.pop()).x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t):new AABBBounds(e)}free(e){this.pools.push(e)}get length(){return this.pools.length}release(){this.pools=[]}},boundsAllocate=new DefaultBoundsAllocate,DefaultTextBackgroundRenderContribution=class extends DefaultBaseBackgroundRenderContribution{constructor(){super(...arguments),this.time=BaseRenderContributionTime.beforeFillStroke}drawShape(t,i,r,n,e,o,a,l,s,h,d,u){var{backgroundMode:c=s.backgroundMode,backgroundFit:g=s.backgroundFit}=t.attribute;let p,f=t.attribute[\\\"background\\\"];if(f){var m=()=>{\\\"richtext\\\"===t.type&&(i.restore(),i.save(),p)&&i.setTransformFromMatrix(p,!0,1)};let e;\\\"richtext\\\"===t.type&&(p=i.currentMatrix.clone(),i.restore(),i.save(),i.setTransformForCurrent());var b,v,C,y=isObject_default(f)&&f.background,_=t.transMatrix.onlyTranslate();if(y?(v=t.AABBBounds,C=(null!=(C=f.x)?C:v.x1)+(null!=(C=f.dx)?C:0),w=(null!=(w=f.y)?w:v.y1)+(null!=(w=f.dy)?w:0),b=null!=(b=f.width)?b:v.width(),x=null!=(x=f.height)?x:v.height(),e=boundsAllocate.allocate(C,w,C+b,w+x),f=f.background,_||(v=e.width(),C=e.height(),e.set((null!=(b=f.x)?b:0)+(null!=(w=f.dx)?w:0),(null!=(x=f.y)?x:0)+(null!=(b=f.dy)?b:0),v,C))):(e=t.AABBBounds,_||(e=getTextBounds(Object.assign(Object.assign({},t.attribute),{angle:0,scaleX:1,scaleY:1,x:0,y:0,dx:0,dy:0})).clone())),t.backgroundImg&&t.resources){var w=t.resources.get(f);if(\\\"success\\\"!==w.state||!w.data)return void m();i.highPerformanceSave(),_&&i.setTransformFromMatrix(t.parent.globalTransMatrix,!0),i.setCommonStyle(t,t.attribute,r,n,s),this.doDrawImage(i,w.data,e,c,g),i.highPerformanceRestore(),i.setTransformForCurrent()}else{var x=t.attribute[\\\"backgroundCornerRadius\\\"];i.highPerformanceSave(),i.setCommonStyle(t,t.attribute,r,n,s),i.fillStyle=f,x?(createRectPath(i,e.x1,e.y1,e.width(),e.height(),x),i.fill()):i.fillRect(e.x1,e.y1,e.width(),e.height()),i.highPerformanceRestore()}y&&boundsAllocate.free(e),m()}}},defaultTextBackgroundRenderContribution=new DefaultTextBackgroundRenderContribution,__decorate17=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata13=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param11=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasTextRender=class extends BaseRender{constructor(e){super(),this.textRenderContribitions=e,this.numberType=TEXT_NUMBER_TYPE,this.builtinContributions=[defaultTextBackgroundRenderContribution],this.init(e)}drawShape(l,s,h,d,e,t,u,c){const g=getTheme(l,null==t?void 0:t.theme).text,{underline:p=g.underline,lineThrough:f=g.lineThrough,keepDirIn3d:i=g.keepDirIn3d,direction:r=g.direction,whiteSpace:n=g.whiteSpace,fontSize:m=g.fontSize,verticalMode:o=g.verticalMode,x:b=g.x,y:v=g.y}=l.attribute;let{textAlign:C=g.textAlign,textBaseline:y=g.textBaseline}=l.attribute;o||\\\"vertical\\\"!==r||(x=C,C=null!=(w=l.getBaselineMapAlign()[y])?w:\\\"left\\\",y=null!=(w=l.getAlignMapBaseline()[x])?w:\\\"top\\\");const _=null!=(x=calculateLineHeight(l.attribute.lineHeight,m))?x:m,a=this.valid(l,g,u,c);if(a){const{fVisible:S,sVisible:A,doFill:T,doStroke:R}=a,M=!i,B=this.z||0,E=(s.beginPath(),s.setShadowBlendStyle&&s.setShadowBlendStyle(l,l.attribute,g),this.beforeRenderStep(l,s,h,d,T,R,S,A,g,e,u,c),M&&this.transformUseContext2d(l,g,B,s),(e,t,i,r)=>{let n=h+t;var o,a=d+i;r&&(s.highPerformanceSave(),n+=m,(o=matrixAllocate.allocate(1,0,0,1,0,0)).rotateByCenter(Math.PI/2,n,a),s.transformFromMatrix(o,!0),matrixAllocate.free(o)),R&&(c?c(s,l.attribute,g):A&&(s.setStrokeStyle(l,l.attribute,b-h,v-d,g),s.strokeText(e,n,a,B))),T&&(u?u(s,l.attribute,g):S&&(s.setCommonStyle(l,l.attribute,b-h,v-d,g),s.fillText(e,n,a,B),this.drawUnderLine(p,f,l,n,a,B,g,s))),r&&(s.highPerformanceRestore(),s.setTransformForCurrent())});if(l.isMultiLine)if(s.setTextStyleWithoutAlignBaseline(l.attribute,g,B),\\\"horizontal\\\"===r){var w=l[\\\"multilineLayout\\\"];if(!w)return void s.highPerformanceRestore();const{xOffset:P,yOffset:L}=w.bbox;R&&(c?c(s,l.attribute,g):A&&(s.setStrokeStyle(l,l.attribute,b-h,v-d,g),w.lines.forEach(e=>{s.strokeText(e.str,(e.leftOffset||0)+P+h,(e.topOffset||0)+L+d,B)}))),T&&(u?u(s,l.attribute,g):S&&(s.setCommonStyle(l,l.attribute,b-h,v-d,g),w.lines.forEach(e=>{s.fillText(e.str,(e.leftOffset||0)+P+h,(e.topOffset||0)+L+d,B),this.drawMultiUnderLine(p,f,l,(e.leftOffset||0)+P+h,(e.topOffset||0)+L+d-textDrawOffsetY(\\\"bottom\\\",m)-.05*m,B,e.width,g,s)})))}else{l.tryUpdateAABBBounds();var x=l.cache[\\\"verticalList\\\"];s.textAlign=\\\"left\\\",s.textBaseline=\\\"top\\\";const k=_*x.length;let i=0,r=(x.forEach(e=>{var t=e.reduce((e,t)=>e+(t.width||0),0);i=max(t,i)}),0),a=0;\\\"bottom\\\"===y?a=-k:\\\"middle\\\"===y&&(a=-k/2),\\\"center\\\"===C?r-=i/2:\\\"right\\\"===C&&(r-=i),x.forEach((e,n)=>{var t=e.reduce((e,t)=>e+(t.width||0),0),t=i-t;let o=r;\\\"center\\\"===C?o+=t/2:\\\"right\\\"===C&&(o+=t),e.forEach(e=>{var{text:t,width:i,direction:r}=e;E(t,k-(n+1)*_+a,o,r),o+=i})})}else if(\\\"horizontal\\\"===r){s.setTextStyle(l.attribute,g,B);w=l.clipedText;let e=0;_!==m&&(\\\"top\\\"===y?e=(_-m)/2:\\\"middle\\\"!==y&&\\\"bottom\\\"===y&&(e=-(_-m)/2)),E(w,0,e,0)}else{l.tryUpdateAABBBounds();x=l.cache;if(x){s.setTextStyleWithoutAlignBaseline(l.attribute,g,B);w=x[\\\"verticalList\\\"];let n=0;x=w[0].reduce((e,t)=>e+(t.width||0),0);let o=0;\\\"bottom\\\"===y?o=-_:\\\"middle\\\"===y&&(o=-_/2),\\\"center\\\"===C?n-=x/2:\\\"right\\\"===C&&(n-=x),s.textAlign=\\\"left\\\",s.textBaseline=\\\"top\\\",w[0].forEach(e=>{var{text:t,width:i,direction:r}=e;E(t,o,n,r),n+=i})}}M&&this.restoreTransformUseContext2d(l,g,B,s),this.afterRenderStep(l,s,h,d,T,R,S,A,g,e,u,c)}}draw(e,t,i,r){var n=getTheme(e,null==r?void 0:r.theme).text,{keepDirIn3d:o=n.keepDirIn3d}=e.attribute;this._draw(e,n,!o,i,r)}drawUnderLine(e,t,i,r,n,o,a,l){var s,h,d,u,c,g,p,f,m;t+e<=0||(({textAlign:u=a.textAlign,textBaseline:g=a.textBaseline,fontSize:s=a.fontSize,fill:p=a.fill,opacity:f=a.opacity,underlineOffset:h=a.underlineOffset,underlineDash:d=a.underlineDash,fillOpacity:m=a.fillOpacity}=i.attribute),c=textDrawOffsetX(u,u=i.clipedWidth),g=textLayoutOffsetY(g,s,s),p={lineWidth:0,stroke:p,opacity:f,strokeOpacity:m},e&&(p.lineWidth=e,l.setStrokeStyle(i,p,r,n,a),l.setLineDash(d),l.beginPath(),l.moveTo(r+c,f=n+g+s+h,o),l.lineTo(r+c+u,f,o),l.stroke()),t&&(p.lineWidth=t,l.setStrokeStyle(i,p,r,n,a),l.beginPath(),l.moveTo(r+c,m=n+g+s/2,o),l.lineTo(r+c+u,m,o),l.stroke()))}drawMultiUnderLine(e,t,i,r,n,o,a,l,s){var h,d,u,c,g,p,f;t+e<=0||(({fontSize:h=l.fontSize,fill:g=l.fill,opacity:p=l.opacity,underlineOffset:d=l.underlineOffset,underlineDash:u=l.underlineDash,fillOpacity:f=l.fillOpacity}=i.attribute),c=textLayoutOffsetY(\\\"alphabetic\\\",h,h),g={lineWidth:0,stroke:g,opacity:p,strokeOpacity:f},e&&(g.lineWidth=e,s.setStrokeStyle(i,g,r,n,l),s.setLineDash(u),s.beginPath(),s.moveTo(r+0,p=n+c+h+-3+d,o),s.lineTo(r+0+a,p,o),s.stroke()),t&&(g.lineWidth=t,s.setStrokeStyle(i,g,r,n,l),s.beginPath(),s.moveTo(r+0,f=n+c+h/2+-1,o),s.lineTo(r+0+a,f,o),s.stroke()))}};function drawPolygon(e,t,i,r){e.moveTo(t[0].x+i,t[0].y+r);for(let n=1;n<t.length;n++)e.lineTo(t[n].x+i,t[n].y+r)}function drawRoundedPolygon(o,a,l,s,h,t=!0){if(a.length<3)drawPolygon(o,a,l,s);else{let e=0,r=a.length-1;t||(e+=1,--r,o.moveTo(a[0].x+l,a[0].y+s));for(let n=e;n<=r;n++){var d=a[0===n?r:(n-1)%a.length],u=a[n%a.length],c=a[(n+1)%a.length],g=u.x-d.x,d=u.y-d.y,p=u.x-c.x,c=u.y-c.y,f=(Math.atan2(d,g)-Math.atan2(c,p))/2,f=Math.abs(Math.tan(f));let e=Array.isArray(h)?null!=(m=h[n%a.length])?m:0:h,t=e/f;var m=getLength(g,d),b=getLength(p,c),v=Math.min(m,b),v=(t>v&&(t=v,e=v*f),getProportionPoint(u,t,m,g,d)),f=getProportionPoint(u,t,b,p,c),g=2*u.x-v.x-f.x,d=2*u.y-v.y-f.y,b=getLength(g,d),p=getProportionPoint(u,getLength(t,e),b,g,d),c=Math.atan2(v.y-p.y,v.x-p.x),b=Math.atan2(f.y-p.y,f.x-p.x);let i=b-c;i<0&&(i=-i),i>Math.PI&&(i-=Math.PI),0===n?o.moveTo(v.x+l,v.y+s):o.lineTo(v.x+l,v.y+s),i&&o.arcTo(u.x+l,u.y+s,f.x+l,f.y+s,e),o.lineTo(f.x+l,f.y+s)}t||o.lineTo(a[r+1].x+l,a[r+1].y+s)}}function getLength(e,t){return Math.sqrt(e*e+t*t)}function getProportionPoint(e,t,i,r,n){var o=t/i;return{x:e.x-r*o,y:e.y-n*o}}DefaultCanvasTextRender=__decorate17([injectable(),__param11(0,inject(ContributionProvider)),__param11(0,named(TextRenderContribution)),__metadata13(\\\"design:paramtypes\\\",[Object])],DefaultCanvasTextRender),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var defaultPolygonTextureRenderContribution=defaultBaseTextureRenderContribution,defaultPolygonBackgroundRenderContribution=defaultBaseBackgroundRenderContribution,__decorate18=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata14=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param12=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasPolygonRender=class extends BaseRender{constructor(e){super(),this.polygonRenderContribitions=e,this.numberType=POLYGON_NUMBER_TYPE,this.builtinContributions=[defaultPolygonBackgroundRenderContribution,defaultPolygonTextureRenderContribution],this.init(e)}drawShape(e,t,i,r,n,o,a,l){var s,h,d,u=getTheme(e,null==o?void 0:o.theme).polygon,{points:c=u.points,cornerRadius:g=u.cornerRadius,x:p=u.x,y:f=u.y,closePath:m=u.closePath}=e.attribute,b=this.valid(e,u,a,l);b&&(({fVisible:b,sVisible:s,doFill:h,doStroke:d}=b),t.beginPath(),g<=0||isArray_default(g)&&g.every(e=>0===e)?drawPolygon(t.camera?t:t.nativeContext,c,i,r):drawRoundedPolygon(t.camera?t:t.nativeContext,c,i,r,g,m),m&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,u),this.beforeRenderStep(e,t,i,r,h,d,b,s,u,n,a,l),h&&(a?a(t,e.attribute,u):b&&(t.setCommonStyle(e,e.attribute,p-i,f-r,u),t.fill())),d&&(l?l(t,e.attribute,u):s&&(t.setStrokeStyle(e,e.attribute,p-i,f-r,u),t.stroke())),this.afterRenderStep(e,t,i,r,h,d,b,s,u,n,a,l))}draw(e,t,i,r){var n=getTheme(e,null==r?void 0:r.theme).polygon;this._draw(e,n,!1,i,r)}},DefaultCanvasPolygonRender=__decorate18([injectable(),__param12(0,inject(ContributionProvider)),__param12(0,named(PolygonRenderContribution)),__metadata14(\\\"design:paramtypes\\\",[Object])],DefaultCanvasPolygonRender),__decorate19=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata15=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param13=function(i,r){return function(e,t){r(e,t,i)}},repeatStr=[\\\"\\\",\\\"repeat-x\\\",\\\"repeat-y\\\",\\\"repeat\\\"],DefaultCanvasImageRender=class extends BaseRender{constructor(e){super(),this.imageRenderContribitions=e,this.numberType=IMAGE_NUMBER_TYPE,this.builtinContributions=[defaultImageBackgroundRenderContribution],this.init(e)}drawShape(i,r,n,o,e,t,a){var l=getTheme(i).image,{width:s=l.width,height:h=l.height,repeatX:d=l.repeatX,repeatY:u=l.repeatY,cornerRadius:c=l.cornerRadius,image:g}=i.attribute,p=this.valid(i,l,a);if(p){var{fVisible:p,doFill:f}=p;if(r.setShadowBlendStyle&&r.setShadowBlendStyle(i,l),this.beforeRenderStep(i,r,n,o,f,!1,p,!1,l,e,a),f)if(a)a(r,i.attribute,l);else if(p){if(!g||!i.resources)return;g=i.resources.get(g);if(\\\"success\\\"!==g.state)return;let e=!1,t=(0===c||isArray_default(c)&&c.every(e=>0===e)||(r.beginPath(),createRectPath(r,n,o,s,h,c),r.save(),r.clip(),e=!0),r.setCommonStyle(i,i.attribute,n,o,l),0);\\\"repeat\\\"===d&&(t|=1),\\\"repeat\\\"===u&&(t|=2),t?(c=r.createPattern(g.data,repeatStr[t]),r.fillStyle=c,r.translate(n,o,!0),r.fillRect(0,0,s,h),r.translate(-n,-o,!0)):r.drawImage(g.data,n,o,s,h),e&&r.restore()}this.afterRenderStep(i,r,n,o,f,!1,p,!1,l,e,a)}}draw(e,t,i){var r,n=e.attribute[\\\"image\\\"];n&&e.resources&&(\\\"loading\\\"===(r=e.resources.get(n)).state&&isString_default(n)?ResourceLoader.improveImageLoading(n):\\\"success\\\"===r.state&&(n=t.drawParams[\\\"context\\\"],n)&&(r=getTheme(e).image,this._draw(e,r,!1,i)))}},DefaultCanvasImageRender=__decorate19([injectable(),__param13(0,inject(ContributionProvider)),__param13(0,named(ImageRenderContribution)),__metadata15(\\\"design:paramtypes\\\",[Object])],DefaultCanvasImageRender),IncrementalDrawContribution=(init_esbuild_inject(),Symbol[\\\"for\\\"](\\\"IncrementalDrawContribution\\\")),ArcRender=Symbol[\\\"for\\\"](\\\"ArcRender\\\"),Arc3dRender=Symbol[\\\"for\\\"](\\\"Arc3dRender\\\"),AreaRender=Symbol[\\\"for\\\"](\\\"AreaRender\\\"),CircleRender=Symbol[\\\"for\\\"](\\\"CircleRender\\\"),GraphicRender=Symbol[\\\"for\\\"](\\\"GraphicRender\\\"),GroupRender=Symbol[\\\"for\\\"](\\\"GroupRender\\\"),LineRender=Symbol[\\\"for\\\"](\\\"LineRender\\\"),PathRender=Symbol[\\\"for\\\"](\\\"PathRender\\\"),PolygonRender=Symbol[\\\"for\\\"](\\\"PolygonRender\\\"),RectRender=Symbol[\\\"for\\\"](\\\"RectRender\\\"),Rect3DRender=Symbol[\\\"for\\\"](\\\"Rect3DRender\\\"),SymbolRender=Symbol[\\\"for\\\"](\\\"SymbolRender\\\"),TextRender=Symbol[\\\"for\\\"](\\\"TextRender\\\"),RichTextRender=Symbol[\\\"for\\\"](\\\"RichTextRender\\\"),Pyramid3dRender=Symbol[\\\"for\\\"](\\\"Pyramid3dRender\\\"),GlyphRender=Symbol[\\\"for\\\"](\\\"GlyphRender\\\"),ImageRender=Symbol[\\\"for\\\"](\\\"ImageRender\\\"),RenderSelector=Symbol[\\\"for\\\"](\\\"RenderSelector\\\"),DrawContribution=Symbol[\\\"for\\\"](\\\"DrawContribution\\\"),__decorate20=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata16=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},DrawItemInterceptor=Symbol[\\\"for\\\"](\\\"DrawItemInterceptor\\\"),tempDirtyBounds=new AABBBounds,ShadowRootDrawItemInterceptorContribution=class{constructor(){this.order=1}afterDrawItem(e,t,i,r,n){return(0<e.attribute.shadowRootIdx||!e.attribute.shadowRootIdx)&&this.drawItem(e,t,i,r,n),!1}beforeDrawItem(e,t,i,r,n){return e.attribute.shadowRootIdx<0&&this.drawItem(e,t,i,r,n),!1}drawItem(e,t,i,r,n){var o,a;return!!e.shadowRoot&&(o=i[\\\"context\\\"],o.highPerformanceSave(),o.transformFromMatrix(e.transMatrix,!0),r.dirtyBounds&&r.backupDirtyBounds&&(tempDirtyBounds.copy(r.dirtyBounds),a=e.globalTransMatrix.getInverse(),r.dirtyBounds.copy(r.backupDirtyBounds).transformWithMatrix(a)),r.renderGroup(e.shadowRoot,i,e.parent.globalTransMatrix),o.highPerformanceRestore(),r.dirtyBounds&&r.backupDirtyBounds&&r.dirtyBounds.copy(tempDirtyBounds),!0)}},DebugDrawItemInterceptorContribution=class{constructor(){this.order=1}afterDrawItem(e,t,i,r,n){return e.attribute._debug_bounds&&this.drawItem(e,t,i,r,n),!1}drawItem(e,t,i,r,n){var o,a;return!!e.attribute._debug_bounds&&(o=i[\\\"context\\\"],o.highPerformanceSave(),e.parent&&o.setTransformFromMatrix(e.parent.globalTransMatrix,!0),e.glyphHost&&e.glyphHost.parent&&o.setTransformFromMatrix(e.glyphHost.parent.globalTransMatrix,!0),a=e.AABBBounds,!0!==e.attribute._debug_bounds&&e.attribute._debug_bounds(o,e),o.strokeRect(a.x1,a.y1,a.width(),a.height()),o.highPerformanceRestore(),!0)}},CommonDrawItemInterceptorContribution=class{constructor(){this.order=1,this.interceptors=[new ShadowRootDrawItemInterceptorContribution,new Canvas3DDrawItemInterceptor,new InteractiveDrawItemInterceptorContribution,new DebugDrawItemInterceptorContribution]}afterDrawItem(e,t,i,r,n){for(let o=0;o<this.interceptors.length;o++)if(this.interceptors[o].afterDrawItem&&this.interceptors[o].afterDrawItem(e,t,i,r,n))return!0;return!1}beforeDrawItem(t,i,r,n,o){if(t.in3dMode&&!r.in3dInterceptor||t.shadowRoot||(t.baseGraphic||t.attribute.globalZIndex||t.interactiveGraphic))for(let e=0;e<this.interceptors.length;e++)if(this.interceptors[e].beforeDrawItem&&this.interceptors[e].beforeDrawItem(t,i,r,n,o))return!0;return!1}},CommonDrawItemInterceptorContribution=__decorate20([injectable(),__metadata16(\\\"design:paramtypes\\\",[])],CommonDrawItemInterceptorContribution),InteractiveDrawItemInterceptorContribution=class{constructor(){this.order=1}beforeDrawItem(e,t,i,r,n){return!this.processing&&(e.baseGraphic?this.beforeDrawInteractive(e,t,i,r,n):this.beforeSetInteractive(e,t,i,r,n))}beforeSetInteractive(e,t,i,r,n){let o=e.interactiveGraphic;var a;return e.attribute.globalZIndex?(o||(o=e.clone(),(e.interactiveGraphic=o).baseGraphic=e),o.setAttributes({globalZIndex:0,zIndex:e.attribute.globalZIndex},!1,{skipUpdateCallback:!0}),i.stage.tryInitInteractiveLayer(),(a=i.stage.getLayer(\\\"_builtin_interactive\\\"))&&this.getShadowRoot(a).add(o),!0):(o&&(i.stage.tryInitInteractiveLayer(),(a=i.stage.getLayer(\\\"_builtin_interactive\\\"))&&this.getShadowRoot(a).removeChild(o),e.interactiveGraphic=null,o.baseGraphic=null),!1)}beforeDrawInteractive(e,t,i,r,n){var o,a=e.baseGraphic;return!(!a||(this.processing=!0,o=i.context,o.highPerformanceSave(),o.setTransformFromMatrix(a.parent.globalTransMatrix,!0),a.isContainer?r.renderGroup(a,i,a.parent.globalTransMatrix):r.renderItem(a,i),o.highPerformanceRestore(),this.processing=!1))}getShadowRoot(e){var t;let i=e.getElementById(\\\"_interactive_group\\\");return i||((i=graphicCreator.CreateGraphic(\\\"group\\\",{})).id=\\\"_interactive_group\\\",e.add(i)),null!=(t=i.shadowRoot)?t:i.attachShadow()}},Canvas3DDrawItemInterceptor=class{constructor(){this.order=1}beforeDrawItem(r,e,n,o,t){if(!r.in3dMode||n.in3dInterceptor)return!1;n.in3dInterceptor=!0;const{context:a,stage:i}=e.drawParams;a.canvas,a.save(),this.initCanvasCtx(a),a.camera=i.camera;var l,s=a.currentMatrix,h=(s.a/=a.dpr,s.b/=a.dpr,s.c/=a.dpr,s.d/=a.dpr,s.e/=a.dpr,s.f/=a.dpr,mat4Allocate.allocate()),s=(mat3Tomat4(h,s),a.modelMatrix);if(s?h&&(l=mat4Allocate.allocate(),a.modelMatrix=multiplyMat4Mat4(l,s,h)):a.modelMatrix=h,a.setTransform(1,0,0,1,0,0,!0),r.isContainer){let t=!1,i=!1;r.forEachChildren(e=>!(t=e.numberType===ARC3D_NUMBER_TYPE)),r.forEachChildren(e=>!(i=!!e.findFace)),t?((h=[...l=r.getChildren()]).sort((e,t)=>{var i;let r=((null!=(i=e.attribute.startAngle)?i:0)+(null!=(i=e.attribute.endAngle)?i:0))/2,n=((null!=(i=t.attribute.startAngle)?i:0)+(null!=(i=t.attribute.endAngle)?i:0))/2;for(;r<0;)r+=pi2;for(;n<0;)n+=pi2;return n-r}),h.forEach(e=>{e._next=null,e._prev=null}),r.removeAllChild(),r.update(),h.forEach(e=>{r.appendChild(e)}),h=r.parent.globalTransMatrix,n.hack_pieFace=\\\"outside\\\",o.renderGroup(r,n,h),n.hack_pieFace=\\\"inside\\\",o.renderGroup(r,n,h),n.hack_pieFace=\\\"top\\\",o.renderGroup(r,n,h),r.removeAllChild(),l.forEach(e=>{e._next=null,e._prev=null}),l.forEach(e=>{r.appendChild(e)})):i?((l=(h=r.getChildren()).map(i=>({ave_z:i.findFace().vertices.map(e=>{var t;return a.view(e[0],e[1],null!==(t=e[2]+i.attribute.z)?t:0)[2]}).reduce((e,t)=>e+t,0),g:i}))).sort((e,t)=>t.ave_z-e.ave_z),r.removeAllChild(),l.forEach(e=>{e.g._next=null,e.g._prev=null}),r.update(),l.forEach(e=>{r.add(e.g)}),o.renderGroup(r,n,r.parent.globalTransMatrix,!0),r.removeAllChild(),h.forEach(e=>{e._next=null,e._prev=null}),r.update(),h.forEach(e=>{r.add(e)})):o.renderGroup(r,n,r.parent.globalTransMatrix)}else o.renderItem(r,n);return a.camera=null,a.restore(),a.modelMatrix!==s&&mat4Allocate.free(a.modelMatrix),a.modelMatrix=s,!(n.in3dInterceptor=!1)}initCanvasCtx(e){e.setTransformForCurrent()}},__decorate21=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata17=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param14=function(i,r){return function(e,t){r(e,t,i)}},RenderService=Symbol[\\\"for\\\"](\\\"RenderService\\\"),BeforeRenderConstribution=Symbol[\\\"for\\\"](\\\"BeforeRenderConstribution\\\"),DefaultRenderService=class{constructor(e){this.drawContribution=e}prepare(t){t&&this.renderTreeRoots.forEach(e=>{this._prepare(e,t)})}_prepare(e,t){e.forEachChildren(e=>{this._prepare(e,t)}),e.update({bounds:t,trans:!0})}prepareRenderList(){}beforeDraw(e){}draw(e){this.drawContribution.draw(this,Object.assign({},this.drawParams))}afterDraw(e){this.drawContribution.afterDraw&&this.drawContribution.afterDraw(this,Object.assign({},this.drawParams))}render(e,t){this.renderTreeRoots=e;var i=(this.drawParams=t).updateBounds;this.prepare(i),this.prepareRenderList(),this.beforeDraw(t),this.draw(t),this.afterDraw(t),this.drawParams=null}},DefaultRenderService=__decorate21([injectable(),__param14(0,inject(DrawContribution)),__metadata17(\\\"design:paramtypes\\\",[Object])],DefaultRenderService),render_modules_default=new ContainerModule(e=>{e(RenderService).to(DefaultRenderService).inSingletonScope()}),GraphicPicker=(init_esbuild_inject(),init_esbuild_inject(),Symbol[\\\"for\\\"](\\\"GraphicPicker\\\")),PickerService=Symbol[\\\"for\\\"](\\\"PickerService\\\"),BoundsPicker=Symbol[\\\"for\\\"](\\\"BoundsPicker\\\"),GlobalPickerService=Symbol[\\\"for\\\"](\\\"GlobalPickerService\\\"),__decorate22=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),PickItemInterceptor=Symbol[\\\"for\\\"](\\\"PickItemInterceptor\\\"),ShadowRootPickItemInterceptorContribution=class{constructor(){this.order=1}afterPickItem(e,t,i,r,n){return 0<e.attribute.shadowRootIdx||!e.attribute.shadowRootIdx?this._pickItem(e,t,i,r,n):null}beforePickItem(e,t,i,r,n){return e.attribute.shadowRootIdx<0?this._pickItem(e,t,i,r,n):null}_pickItem(e,t,i,r,n){var o,a,l,s;return e.shadowRoot&&(a=(n||{}).parentMatrix,a)?((o=t.pickContext).highPerformanceSave(),s=e.shadowRoot,a=matrixAllocate.allocateByObj(a),l=new Point(a.a*i.x+a.c*i.y+a.e,a.b*i.x+a.d*i.y+a.f),s=t.pickGroup(s,l,a,r),o.highPerformanceRestore(),s):null}},ShadowRootPickItemInterceptorContribution=__decorate22([injectable()],ShadowRootPickItemInterceptorContribution),InteractivePickItemInterceptorContribution=class{constructor(){this.order=1}beforePickItem(e,t,i,r,n){var o,a,l,s=e.baseGraphic;return s&&s.parent?(o=new Point(i.x,i.y),(a=t.pickContext).highPerformanceSave(),(l=s.parent.globalTransMatrix).transformPoint(o,o),s=s.isContainer?t.pickGroup(s,o.clone(),l,r):t.pickItem(s,o.clone(),l,r),a.highPerformanceRestore(),s):null}},InteractivePickItemInterceptorContribution=__decorate22([injectable()],InteractivePickItemInterceptorContribution),Canvas3DPickItemInterceptor=class{constructor(){this.order=1}beforePickItem(r,n,o,a,l){if(r.in3dMode&&!a.in3dInterceptor){const d=n.pickContext,e=r.stage;if(d&&e){if(a.in3dInterceptor=!0,d.save(),this.initCanvasCtx(d),d.camera=e.camera,r.isContainer){let e,t=!1,i=!1;var s,h;return r.forEachChildren(e=>!(t=e.numberType===ARC3D_NUMBER_TYPE)),r.forEachChildren(e=>!(i=!!e.findFace)),t?((s=[...h=r.getChildren()]).sort((e,t)=>{var i;let r=(null!=(i=null!=(i=e.attribute.startAngle)?i:0+e.attribute.endAngle)?i:0)/2,n=(null!=(i=null!=(i=t.attribute.startAngle)?i:0+t.attribute.endAngle)?i:0)/2;for(;r<0;)r+=pi2;for(;n<0;)n+=pi2;return n-r}),s.forEach(e=>{e._next=null,e._prev=null}),r.removeAllChild(),r.update(),s.forEach(e=>{r.appendChild(e)}),a.hack_pieFace=\\\"outside\\\",(e=n.pickGroup(r,o,l.parentMatrix,a)).graphic||(a.hack_pieFace=\\\"inside\\\",e=n.pickGroup(r,o,l.parentMatrix,a)),e.graphic||(a.hack_pieFace=\\\"top\\\",e=n.pickGroup(r,o,l.parentMatrix,a)),r.removeAllChild(),h.forEach(e=>{e._next=null,e._prev=null}),h.forEach(e=>{r.appendChild(e)})):i?((h=(s=r.getChildren()).map(i=>({ave_z:i.findFace().vertices.map(e=>{var t;return d.view(e[0],e[1],null!==(t=e[2]+i.attribute.z)?t:0)[2]}).reduce((e,t)=>e+t,0),g:i}))).sort((e,t)=>t.ave_z-e.ave_z),r.removeAllChild(),h.forEach(e=>{e.g._next=null,e.g._prev=null}),r.update(),h.forEach(e=>{r.add(e.g)}),e=n.pickGroup(r,o,l.parentMatrix,a),r.removeAllChild(),s.forEach(e=>{e._next=null,e._prev=null}),r.update(),s.forEach(e=>{r.add(e)})):e=n.pickGroup(r,o,l.parentMatrix,a),d.camera=null,a.in3dInterceptor=!1,d.restore(),e}d.restore()}}return null}initCanvasCtx(e){e.setTransformForCurrent()}},Canvas3DPickItemInterceptor=__decorate22([injectable()],Canvas3DPickItemInterceptor),pick_modules_default=new ContainerModule((e,t,i)=>{i(PickerService)||(e(GlobalPickerService).toSelf(),e(PickerService).toService(GlobalPickerService)),e(Canvas3DPickItemInterceptor).toSelf().inSingletonScope(),e(PickItemInterceptor).toService(Canvas3DPickItemInterceptor),e(ShadowRootPickItemInterceptorContribution).toSelf().inSingletonScope(),e(PickItemInterceptor).toService(ShadowRootPickItemInterceptorContribution),e(InteractivePickItemInterceptorContribution).toSelf().inSingletonScope(),e(PickItemInterceptor).toService(InteractivePickItemInterceptorContribution),bindContributionProvider(e,PickItemInterceptor)}),graphic_module_default=(init_esbuild_inject(),new ContainerModule(e=>{e(GraphicService).to(DefaultGraphicService).inSingletonScope(),e(GraphicCreator).toConstantValue(graphicCreator)})),AutoEnablePlugins=(init_esbuild_inject(),init_esbuild_inject(),Symbol[\\\"for\\\"](\\\"AutoEnablePlugins\\\")),PluginService=Symbol[\\\"for\\\"](\\\"PluginService\\\"),__decorate23=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata18=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param15=function(i,r){return function(e,t){r(e,t,i)}},DefaultPluginService=class{constructor(e){this.autoEnablePlugins=e,this.onStartupFinishedPlugin=[],this.onRegisterPlugin=[],this.actived=!1}active(e,t){this.stage=e,this.actived=!0;const i=t[\\\"pluginList\\\"];i&&container.isBound(AutoEnablePlugins)&&this.autoEnablePlugins.getContributions().forEach(e=>{i.includes(e.name)&&this.register(e)})}findPluginsByName(t){const i=[];return this.onStartupFinishedPlugin.forEach(e=>{e.name===t&&i.push(e)}),this.onRegisterPlugin.forEach(e=>{e.name===t&&i.push(e)}),i}register(e){\\\"onStartupFinished\\\"===e.activeEvent?this.onStartupFinishedPlugin.push(e):\\\"onRegister\\\"===e.activeEvent&&(this.onRegisterPlugin.push(e),e.activate(this))}unRegister(e){\\\"onStartupFinished\\\"===e.activeEvent?this.onStartupFinishedPlugin.splice(this.onStartupFinishedPlugin.indexOf(e),1):\\\"onRegister\\\"===e.activeEvent&&this.onRegisterPlugin.splice(this.onStartupFinishedPlugin.indexOf(e),1),e.deactivate(this)}release(){this.onStartupFinishedPlugin.forEach(e=>{e.deactivate(this)}),this.onStartupFinishedPlugin=[],this.onRegisterPlugin.forEach(e=>{e.deactivate(this)}),this.onRegisterPlugin=[]}},DefaultPluginService=__decorate23([injectable(),__param15(0,inject(ContributionProvider)),__param15(0,named(AutoEnablePlugins)),__metadata18(\\\"design:paramtypes\\\",[Object])],DefaultPluginService),plugin_modules_default=new ContainerModule(e=>{e(PluginService).to(DefaultPluginService),bindContributionProviderNoSingletonScope(e,AutoEnablePlugins)}),modules_default=(init_esbuild_inject(),init_esbuild_inject(),new ContainerModule(e=>{bindContributionProvider(e,EnvContribution)})),modules_default2=(init_esbuild_inject(),new ContainerModule(e=>{e(TextMeasureContribution).to(DefaultTextMeasureContribution).inSingletonScope(),bindContributionProvider(e,TextMeasureContribution)})),__decorate24=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata19=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},CanvasLayerHandlerContribution=class{constructor(){this.type=\\\"static\\\",this.offscreen=!1,this.global=application.global}setDpr(e){this.canvas.dpr=e}init(e,t,i){if(this.layer=e,this.window=t,i.main)this.main=!0,this.context=t.getContext(),this.canvas=this.context.getCanvas();else{let e;this.main=!1,(e=(e=i.canvasId?this.global.getElementById(i.canvasId):e)||this.global.createCanvas({width:t.width,height:t.height})).style&&(e.style[\\\"pointer-events\\\"]=\\\"none\\\");var r=t.getContext().getCanvas().nativeCanvas,r=wrapCanvas({nativeCanvas:e,width:t.width,height:t.height,dpr:t.dpr,id:i.canvasId,canvasControled:!0,container:t.getContainer(),x:r.offsetLeft,y:r.offsetTop});r.applyPosition(),this.canvas=r,this.context=r.getContext()}}resize(e,t){this.canvas.resize(e,t)}resizeView(e,t){}render(e,t,i){var r;this.main||!(r=this.window.getContext().getCanvas().nativeCanvas)||this.canvas.x===r.offsetLeft&&this.canvas.y===r.offsetTop||(this.canvas.x=r.offsetLeft,this.canvas.y=r.offsetTop,this.canvas.applyPosition()),t.renderService.render(e,Object.assign(Object.assign({context:this.context,clear:null!=(r=t.background)?r:\\\"#ffffff\\\"},t),i))}merge(e){e.forEach(e=>{var t=e.getContext().canvas.nativeCanvas;this.context.drawImage(t,0,0)})}prepare(e,t){}drawTo(e,t,i){var r=e.getContext();i.renderService.render(t,Object.assign(Object.assign({context:r},i),{clear:i.clear?null!=(r=i.background)?r:\\\"#fff\\\":void 0}))}getContext(){return this.context}release(){this.canvas.release()}},CanvasLayerHandlerContribution=__decorate24([injectable(),__metadata19(\\\"design:paramtypes\\\",[])],CanvasLayerHandlerContribution),__decorate25=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata20=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},EmptyLayerHandlerContribution=class{constructor(){this.offscreen=!1,this.type=\\\"virtual\\\",this.global=application.global}setDpr(e){}init(e,t,i){if(this.layer=e,this.window=t,i.main)throw new Error(\\\"virtual layer不能作为main layer\\\");this.main=!1,this.canvas=null,this.context=null}resize(e,t){}resizeView(e,t){}render(e,t,i){this.mainHandler.render(e,t,Object.assign(Object.assign({},i),{clear:!1}))}merge(e){}prepare(e,t){}drawTo(e,t,i){var r=e.getContext();i.renderService.render(t,Object.assign(Object.assign({context:r},i),{clear:i.clear?null!=(r=i.background)?r:\\\"#fff\\\":void 0}))}getContext(){return null}release(){}},EmptyLayerHandlerContribution=__decorate25([injectable(),__metadata20(\\\"design:paramtypes\\\",[])],EmptyLayerHandlerContribution),__decorate26=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata21=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},OffscreenLayerHandlerContribution=class{constructor(){this.offscreen=!0,this.type=\\\"dynamic\\\",this.global=application.global}setDpr(e){this.canvas.dpr=e}init(e,t,i){this.layer=e;var r=wrapCanvas({nativeCanvas:this.global.createOffscreenCanvas({width:i.width,height:i.height,dpr:t.dpr}),width:i.width,height:i.height,dpr:t.dpr,canvasControled:!0});this.canvas=r,this.context=r.getContext()}resize(e,t){this.canvas.resize(e,t)}resizeView(e,t){this.canvas.resize(e,t)}render(e,t){var i;t.renderService.render(e,Object.assign(Object.assign({context:this.context,viewBox:t.stage.window.getViewBox(),transMatrix:t.stage.window.getViewBoxTransform()},t),{clear:null!=(i=t.background)?i:\\\"#ffffff\\\"}))}prepare(e,t){}release(){this.canvas.release()}getContext(){return this.context}drawTo(e,t,i){var r=e.getContext(),n=e.dpr,o=i[\\\"viewBox\\\"],a=o.x1,l=o.y1,s=o.width(),o=o.height();r.nativeContext.save(),r.nativeContext.setTransform(n,0,0,n,0,0),i.clear&&r.clearRect(a,l,s,o),r.drawImage(this.canvas.nativeCanvas,0,0,this.canvas.width,this.canvas.height,a,l,s,o),r.nativeContext.restore()}merge(e){}},OffscreenLayerHandlerContribution=__decorate26([injectable(),__metadata21(\\\"design:paramtypes\\\",[])],OffscreenLayerHandlerContribution),modules_default3=new ContainerModule(e=>{e(CanvasLayerHandlerContribution).toSelf(),e(OffscreenLayerHandlerContribution).toSelf(),e(EmptyLayerHandlerContribution).toSelf(),e(StaticLayerHandlerContribution).toService(CanvasLayerHandlerContribution),e(DynamicLayerHandlerContribution).toService(OffscreenLayerHandlerContribution),e(VirtualLayerHandlerContribution).toService(EmptyLayerHandlerContribution)});function load(e){e.load(modules_default),e.load(modules_default2),e.load(modules_default3)}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var __awaiter2=function(e,t,l,s){return new(l=l||Promise)(function(i,r){function n(e){try{a(s.next(e))}catch(t){r(t)}}function o(e){try{a(s[\\\"throw\\\"](e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(n,o)}a((s=s.apply(e,t||[])).next())})};function foreach(e,n,r,o=!1,a=!1){const l={},s=[];let h=!1;if(a)h=!0;else{let r;e.forEachChildren((e,t)=>{var{zIndex:i=n}=e.attribute;if(0===t)r=i;else if(r!==i)return h=!0;return!1},o)}if(h){e.forEachChildren(e=>{var{zIndex:t=n}=e.attribute;l[t]?l[t].push(e):(l[t]=[e],s.push(t))},o),s.sort((e,t)=>o?t-e:e-t);let t=!1;for(let i=0;i<s.length&&!t;i++){var d=s[i],u=l[d];a&&u.sort((e,t)=>{var i;return(o?-1:1)*((null!=(i=t.attribute.z)?i:0)-(null!=(i=e.attribute.z)?i:0))});for(let e=0;e<u.length;e++)if(r(u[e],e)){t=!0;break}}}else e.forEachChildren(r,o)}function foreachAsync(e,t,i,r=!1){return __awaiter2(this,void 0,void 0,function*(){yield e.forEachChildrenAsync(i,r)})}function findNextGraphic(e,r,n,o=!1){const a={},l=[];let s=!1,h=(e.forEachChildren((e,t)=>{var{zIndex:i=n}=e.attribute;return 0!==t&&void 0!==i&&(s=!0)},o),null),d=!1;if(s){e.forEachChildren(e=>{var{zIndex:t=n}=e.attribute;a[t]?a[t].push(e):(a[t]=[e],l.push(t))},o),l.sort((e,t)=>o?t-e:e-t);let t=!1;for(let i=0;i<l.length&&!t;i++){var u=l[i],c=a[u];for(let e=0;e<c.length;e++){if(d){t=!0,h=c[e];break}c[e]._uid===r&&(d=!0)}}}else e.forEachChildren(e=>d?(h=e,!0):(e._uid===r&&(d=!0),!1),o);return h}var STATUS2,__decorate27=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata22=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param16=function(i,r){return function(e,t){r(e,t,i)}},DefaultDrawContribution=class{constructor(e,t){this.contributions=e,this.drawItemInterceptorContributions=t,this.currentRenderMap=new Map,this.defaultRenderMap=new Map,this.styleRenderMap=new Map,this.dirtyBounds=new Bounds,this.backupDirtyBounds=new Bounds,this.global=application.global,this.layerService=application.layerService,this.init()}init(){this.contributions.forEach(e=>{var t;e.style?((t=this.styleRenderMap.get(e.style)||new Map).set(e.numberType,e),this.styleRenderMap.set(e.style,t)):this.defaultRenderMap.set(e.numberType,e)}),this.InterceptorContributions=this.drawItemInterceptorContributions.getContributions().sort((e,t)=>e.order-t.order)}prepareForDraw(e,t){t.updateBounds?this.useDirtyBounds=!0:this.useDirtyBounds=!t.stage.params.optimize.disableCheckGraphicWidthOutRange}draw(e,t){this.prepareForDraw(e,t),(t.drawContribution=this).currentRenderMap=this.styleRenderMap.get(t.renderStyle)||this.defaultRenderMap,this.currentRenderService=e;var i,r,{context:n,stage:o,viewBox:a,transMatrix:l}=t;n&&(i=this.dirtyBounds.setValue(0,0,a.width(),a.height()),o.dirtyBounds&&!o.dirtyBounds.empty()&&(r=getRectIntersect(i,o.dirtyBounds,!1),i.x1=Math.floor(r.x1),i.y1=Math.floor(r.y1),i.x2=Math.ceil(r.x2),i.y2=Math.ceil(r.y2)),!(r=n.dpr%1)&&.5==r||(i.x1=Math.floor(i.x1*n.dpr)/n.dpr,i.y1=Math.floor(i.y1*n.dpr)/n.dpr,i.x2=Math.ceil(i.x2*n.dpr)/n.dpr,i.y2=Math.ceil(i.y2*n.dpr)/n.dpr),this.backupDirtyBounds.copy(i),n.inuse=!0,n.setClearMatrix(l.a,l.b,l.c,l.d,l.e,l.f),n.clearMatrix(),n.setTransformForCurrent(!0),n.translate(a.x1,a.y1,!0),n.beginPath(),n.rect(i.x1,i.y1,i.width(),i.height()),n.clip(),o.camera&&(this.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),this.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0)),this.clearScreen(e,n,t),n.save(),e.renderTreeRoots.sort((e,t)=>{var i;return(null!=(i=e.attribute.zIndex)?i:DefaultAttribute.zIndex)-(null!=(i=t.attribute.zIndex)?i:DefaultAttribute.zIndex)}).forEach(e=>{e.isContainer?this.renderGroup(e,t,matrixAllocate.allocate(1,0,0,1,0,0)):this.renderItem(e,t)}),n.restore(),n.draw(),n.setClearMatrix(1,0,0,1,0,0),n.inuse=!1)}doRegister(){throw new Error(\\\"暂不支持\\\")}_findNextGraphic(e){let t=e.parent,i=e._uid;for(;t;){var r=findNextGraphic(t,i,DefaultAttribute.zIndex);if(r)return r;i=t._uid,t=t.parent}return null}renderGroup(i,r,n,o){if(!r[\\\"break\\\"]&&!1!==i.attribute.visibleAll)if(!i.incremental||null!=r.startAtId&&r.startAtId!==i._uid){if(!this.useDirtyBounds||isRectIntersect(i.AABBBounds,this.dirtyBounds,!1)){let e,t=n;var a;this.useDirtyBounds&&(e=boundsAllocate.allocateByObj(this.dirtyBounds),a=i.transMatrix,t=matrixAllocate.allocateByObj(n).multiply(a.a,a.b,a.c,a.d,a.e,a.f),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(t.getInverse())),this.renderItem(i,r,{drawingCb:()=>{var e;o?i.forEachChildren(e=>{r[\\\"break\\\"]||(e.isContainer?this.renderGroup(e,r,t):this.renderItem(e,r))}):foreach(i,DefaultAttribute.zIndex,e=>{r[\\\"break\\\"]||(e.isContainer?this.renderGroup(e,r,t):this.renderItem(e,r))},!1,!(null==(e=r.context)||!e.camera))}}),this.useDirtyBounds&&(this.dirtyBounds.copy(e),boundsAllocate.free(e),matrixAllocate.free(t))}}else r[\\\"break\\\"]=!0,this._increaseRender(i,r)}_increaseRender(e,t){var{layer:i,stage:r}=t,i=i[\\\"subLayers\\\"];let n=i.get(e._uid);n||(n={layer:this.layerService.createLayer(r),zIndex:i.size,group:e},i.set(e._uid,n));var o=n.layer.getNativeHandler().getContext(),a=n.drawContribution||container.get(IncrementalDrawContribution),o=(a.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),a.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0),a.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:a,clear:\\\"transparent\\\",layer:n.layer,context:o,startAtId:e._uid,\\\"break\\\":!1})),n.drawContribution=a,this._findNextGraphic(e));if(o)if(o.isContainer&&o.incremental)this._increaseRender(o,t);else{let e=i.get(o._uid);e||(e={layer:this.layerService.createLayer(r),zIndex:i.size},i.set(o._uid,e));r=e.layer.getNativeHandler().getContext();this.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:a,clear:\\\"transparent\\\",layer:e.layer,context:r,startAtId:o._uid,\\\"break\\\":!1}))}}getRenderContribution(e){let t;return t=(t=t||this.selectRenderByNumberType(e.numberType,e))||this.selectRenderByType(e.type)}renderItem(r,n,o){if(this.InterceptorContributions.length)for(let e=0;e<this.InterceptorContributions.length;e++){var t=this.InterceptorContributions[e];if(t.beforeDrawItem&&t.beforeDrawItem(r,this.currentRenderService,n,this,o))return}var e,a,l=this.getRenderContribution(r);if(l){let t,i=!1;if(r.parent&&(({scrollX:e=0,scrollY:a=0}=r.parent.attribute),i=!(!e&&!a))&&(t=this.dirtyBounds.clone(),s=r.globalTransMatrix.getInverse(),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(s),this.dirtyBounds.translate(-e,-a)),!this.useDirtyBounds||r.isContainer||isRectIntersect(r.AABBBounds,this.dirtyBounds,!1)){var s=null!=n.startAtId&&r._uid!==n.startAtId;if(r._uid===n.startAtId&&(n.startAtId=null),o&&(o.skipDraw=s),s&&!r.isContainer||l.draw(r,this.currentRenderService,n,o),i&&this.dirtyBounds.copy(t),this.InterceptorContributions.length)for(let e=0;e<this.InterceptorContributions.length;e++){var h=this.InterceptorContributions[e];if(h.afterDrawItem&&h.afterDrawItem(r,this.currentRenderService,n,this))return}}else i&&this.dirtyBounds.copy(t)}}selectRenderByType(e){return Logger.getInstance().warn(\\\"未知错误，不应该走到这里\\\"),null}selectRenderByNumberType(e,t){let i;var r;return t.attribute.renderStyle&&(r=this.styleRenderMap.get(t.attribute.renderStyle),i=r&&r.get(e)),i||this.currentRenderMap.get(e)||this.defaultRenderMap.get(e)}clearScreen(e,t,i){var r,n,{clear:o,viewBox:a}=i,l=a.width(),a=a.height();o&&(t.clearRect(0,0,l,a),(r=null==(r=e.drawParams)?void 0:r.stage)&&(t.globalAlpha=null!=(n=r.attribute.opacity)?n:1),r&&r.backgroundImg&&r.resources?(n=r.resources.get(o))&&\\\"success\\\"===n.state&&n.data&&t.drawImage(n.data,0,0,l,a):(t.fillStyle=createColor(t,o,{AABBBounds:{x1:0,y1:0,x2:0+l,y2:0+a}},0,0),t.fillRect(0,0,l,a)))}afterDraw(e,t){}},DefaultDrawContribution=__decorate27([injectable(),__param16(0,multiInject(GraphicRender)),__param16(1,inject(ContributionProvider)),__param16(1,named(DrawItemInterceptor)),__metadata22(\\\"design:paramtypes\\\",[Array,Object])],DefaultDrawContribution),__decorate28=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata23=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param17=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasGroupRender=class{constructor(e){this.groupRenderContribitions=e,this.numberType=GROUP_NUMBER_TYPE}drawShape(t,i,r,n,o,a,l,s){const h=getTheme(t,null==a?void 0:a.theme).group,{fill:e=h.fill,background:d,stroke:u=h.stroke,opacity:c=h.opacity,width:g=h.width,height:p=h.height,clip:f=h.clip,fillOpacity:m=h.fillOpacity,strokeOpacity:b=h.strokeOpacity,cornerRadius:v=h.cornerRadius,path:C=h.path,lineWidth:y=h.lineWidth,visible:_=h.visible}=t.attribute,w=rectFillVisible(c,m,g,p,e),x=rectStrokeVisible(c,b,g,p),S=runFill(e,d),A=runStroke(u,y);if(t.valid&&_){if(!f){if(!S&&!A)return;if(!(w||x||l||s||d))return}var T,R,M;C&&C.length&&o.drawContribution?(T=i.disableFill,R=i.disableStroke,M=i.disableBeginPath,i.disableFill=!0,i.disableStroke=!0,i.disableBeginPath=!0,C.forEach(e=>{o.drawContribution.getRenderContribution(e).draw(e,o.renderService,o,a)}),i.disableFill=T,i.disableStroke=R,i.disableBeginPath=M):0===v||isArray_default(v)&&v.every(e=>0===e)?(i.beginPath(),i.rect(r,n,g,p)):(i.beginPath(),createRectPath(i,r,n,g,p,v)),this._groupRenderContribitions||(this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(defaultGroupBackgroundRenderContribution));const B={doFill:S,doStroke:A};this._groupRenderContribitions.forEach(e=>{e.time===BaseRenderContributionTime.beforeFillStroke&&e.drawShape(t,i,r,n,S,A,w,x,h,o,l,s,B)}),f&&i.clip(),i.setShadowBlendStyle&&i.setShadowBlendStyle(t,t.attribute,h),B.doFill&&(l?l(i,t.attribute,h):w&&(i.setCommonStyle(t,t.attribute,r,n,h),i.fill())),B.doStroke&&(s?s(i,t.attribute,h):x&&(i.setStrokeStyle(t,t.attribute,r,n,h),i.stroke())),this._groupRenderContribitions.forEach(e=>{e.time===BaseRenderContributionTime.afterFillStroke&&e.drawShape(t,i,r,n,S,A,w,x,h,o,l,s)})}}draw(t,e,i,r){const n=i[\\\"context\\\"];if(n){const h=t.attribute[\\\"clip\\\"];h?n.save():n.highPerformanceSave();var o=getTheme(t,null==r?void 0:r.theme).group,a=n.modelMatrix,{scrollX:l=o.scrollX,scrollY:s=o.scrollY}=(n.camera?(l=mat4Allocate.allocate(),getModelMatrix(s=mat4Allocate.allocate(),t,o),multiplyMat4Mat4(l,a||l,s),n.modelMatrix=l,mat4Allocate.free(s),n.setTransform(1,0,0,1,0,0,!0)):n.transformFromMatrix(t.transMatrix,!0),n.beginPath(),r.skipDraw?this.drawShape(t,n,0,0,i,r,()=>!1,()=>!1):this.drawShape(t,n,0,0,i),t.attribute);let e;(l||s)&&n.translate(l,s),r&&r.drawingCb&&(e=r.drawingCb()),n.modelMatrix!==a&&mat4Allocate.free(n.modelMatrix),n.modelMatrix=a,e&&e.then?e.then(()=>{h?n.restore():n.highPerformanceRestore()}):h?n.restore():n.highPerformanceRestore()}}},DefaultCanvasGroupRender=__decorate28([injectable(),__param17(0,inject(ContributionProvider)),__param17(0,named(GroupRenderContribution)),__metadata23(\\\"design:paramtypes\\\",[Object])],DefaultCanvasGroupRender),__decorate29=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),DefaultIncrementalCanvasLineRender=class extends DefaultCanvasLineRender{constructor(){super(...arguments),this.numberType=LINE_NUMBER_TYPE}drawShape(t,e,i,r,n,o,a,l){if(t.incremental&&n.multiGraphicOptions){var{startAtIdx:s,length:h}=n.multiGraphicOptions,{segments:d=[]}=t.attribute;if(!(s>d.length)){var u=getTheme(t).line,{fill:c=u.fill,stroke:g=u.stroke,opacity:p=u.opacity,fillOpacity:f=u.fillOpacity,strokeOpacity:m=u.strokeOpacity,lineWidth:b=u.lineWidth,visible:v=u.visible}=t.attribute,f=fillVisible(p,f,c),p=strokeVisible(p,m),m=runFill(c),c=runStroke(g,b);if(t.valid&&v&&(m||c)&&(f||p||a||l)){var C=n[\\\"context\\\"];for(let e=s;e<s+h;e++)this.drawIncreaseSegment(t,C,d[e-1],d[e],t.attribute.segments[e],[u,t.attribute],i,r)}}}else super.drawShape(t,e,i,r,n,o,a,l)}drawIncreaseSegment(e,t,i,r,n,o,a,l){r&&(t.beginPath(),drawIncrementalSegments(t.nativeContext,i,r,{offsetX:a,offsetY:l}),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,n,o),t.setStrokeStyle(e,n,a,l,o),t.stroke())}},DefaultIncrementalCanvasLineRender=__decorate29([injectable()],DefaultIncrementalCanvasLineRender),__decorate30=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),DefaultIncrementalCanvasAreaRender=class extends DefaultCanvasAreaRender{constructor(){super(...arguments),this.numberType=AREA_NUMBER_TYPE}drawShape(t,i,r,n,e,o,a){if(t.incremental&&e.multiGraphicOptions){var{startAtIdx:l,length:s}=e.multiGraphicOptions,{segments:h=[]}=t.attribute;if(!(l>h.length)){var d=getTheme(t).area,{fill:u=d.fill,fillOpacity:c=d.fillOpacity,opacity:g=d.opacity,visible:p=d.visible}=t.attribute,g=fillVisible(g,c,u),c=runFill(u);if(t.valid&&p&&c&&(g||a))for(let e=l;e<l+s;e++)this.drawIncreaseSegment(t,i,h[e-1],h[e],t.attribute.segments[e],[d,t.attribute],r,n)}}else super.drawShape(t,i,r,n,e,o,a)}drawIncreaseSegment(e,t,i,r,n,o,a,l){r&&(t.beginPath(),drawIncrementalAreaSegments(t.camera?t:t.nativeContext,i,r,{offsetX:a,offsetY:l}),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,n,o),t.setCommonStyle(e,n,a,l,o),t.fill())}},DefaultIncrementalCanvasAreaRender=__decorate30([injectable()],DefaultIncrementalCanvasAreaRender),__decorate31=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata24=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param18=function(i,r){return function(e,t){r(e,t,i)}},__awaiter3=function(e,t,l,s){return new(l=l||Promise)(function(i,r){function n(e){try{a(s.next(e))}catch(t){r(t)}}function o(e){try{a(s[\\\"throw\\\"](e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(n,o)}a((s=s.apply(e,t||[])).next())})},DefaultIncrementalDrawContribution=(!function(e){e[e.NORMAL=0]=\\\"NORMAL\\\",e[e.STOP=1]=\\\"STOP\\\"}(STATUS2=STATUS2||{}),class extends DefaultDrawContribution{constructor(e,t,i,r){super(e,r),this.contributions=e,this.lineRender=t,this.areaRender=i,this.drawItemInterceptorContributions=r,this.rendering=!1,this.currFrameStartAt=0,this.currentIdx=0,this.status=STATUS2.NORMAL,this.checkingForDrawPromise=null,this.hooks={completeDraw:new SyncHook([])},this.defaultRenderMap.set(this.lineRender.numberType,this.lineRender),this.defaultRenderMap.set(this.areaRender.numberType,this.areaRender)}draw(r,n){return __awaiter3(this,void 0,void 0,function*(){if(!this.checkingForDrawPromise){this.lastRenderService=r,this.lastDrawContext=n,this.checkingForDrawPromise=this.checkForDraw(n);var e=yield this.checkingForDrawPromise;if(this.checkingForDrawPromise=null,!e){this.currentRenderService=r;const{context:t,viewBox:i}=n;t&&(t.inuse=!0,t.clearMatrix(),t.setTransformForCurrent(!0),t.save(),n.restartIncremental&&this.clearScreen(this.currentRenderService,t,n),t.translate(i.x1,i.y1,!0),t.save(),r.renderTreeRoots.sort((e,t)=>{var i;return(null!=(i=e.attribute.zIndex)?i:DefaultAttribute.zIndex)-(null!=(i=t.attribute.zIndex)?i:DefaultAttribute.zIndex)}).forEach(e=>{this.renderGroup(e,n)}),this.hooks.completeDraw.tap(\\\"top-draw\\\",()=>{t.restore(),t.restore(),t.draw(),t.inuse=!1,this.rendering=!1}))}}})}_increaseRender(e,t){return __awaiter3(this,void 0,void 0,function*(){this.rendering=!0,yield this._renderIncrementalGroup(e,t)})}_renderIncrementalGroup(r,n){return __awaiter3(this,void 0,void 0,function*(){this.count=r.count,yield new Promise(t=>{this.renderItem(r,n,{drawingCb:()=>__awaiter3(this,void 0,void 0,function*(){if(2!==r.count)yield foreachAsync(r,DefaultAttribute.zIndex,(e,t)=>{var i;return this.status===STATUS2.STOP||!(e.isContainer||t<this.currentIdx||(t<(i=this.currFrameStartAt+r.incremental)&&(this.currentIdx=t+1,this.renderItem(e,n)),t!==i-1))&&(this.currFrameStartAt=this.currentIdx,this.waitToNextFrame())});else{var e=r.getChildAt(0);if(e.incremental&&e.attribute.segments)for(e.incrementalAt||(e.incrementalAt=0);e.incrementalAt<e.attribute.segments.length;)n.multiGraphicOptions={startAtIdx:e.incrementalAt,length:e.incremental},this.renderItem(e,n),e.incrementalAt+=e.incremental,yield this.waitToNextFrame();else this.renderItem(e,n)}t(!1)})})}),this.hooks.completeDraw.call()})}waitToNextFrame(){return __awaiter3(this,void 0,void 0,function*(){return new Promise(e=>{this.global.getRequestAnimationFrame()(()=>{e(!1)})})})}checkForDraw(t){return __awaiter3(this,void 0,void 0,function*(){let e=this.rendering;return t.restartIncremental&&(e=!1,yield this.forceStop(),this.resetToInit()),e})}forceStop(){return __awaiter3(this,void 0,void 0,function*(){this.rendering&&(this.status=STATUS2.STOP,yield new Promise(e=>{this.hooks.completeDraw.tap(\\\"stopCb\\\",()=>{this.status=STATUS2.NORMAL,this.hooks.completeDraw.taps=this.hooks.completeDraw.taps.filter(e=>\\\"stopCb\\\"!==e.name),e(!1)})}))})}resetToInit(){this.currFrameStartAt=0,this.currentIdx=0}renderGroup(t,i){return __awaiter3(this,void 0,void 0,function*(){if(!i[\\\"break\\\"]&&!1!==t.attribute.visibleAll)return t.incremental&&i.startAtId===t._uid?(yield this._increaseRender(t,i),void(i[\\\"break\\\"]=!0)):void(yield new Promise(e=>{this.renderItem(t,i,{drawingCb:()=>__awaiter3(this,void 0,void 0,function*(){yield foreachAsync(t,DefaultAttribute.zIndex,e=>__awaiter3(this,void 0,void 0,function*(){i[\\\"break\\\"]||e.isContainer&&(yield this.renderGroup(e,i))})),e(!1)})})}))})}}),DefaultIncrementalDrawContribution=__decorate31([injectable(),__param18(0,multiInject(GraphicRender)),__param18(1,inject(DefaultIncrementalCanvasLineRender)),__param18(2,inject(DefaultIncrementalCanvasAreaRender)),__param18(3,inject(ContributionProvider)),__param18(3,named(DrawItemInterceptor)),__metadata24(\\\"design:paramtypes\\\",[Array,Object,Object,Object])],DefaultIncrementalDrawContribution),module_default=new ContainerModule(e=>{e(DefaultBaseBackgroundRenderContribution).toSelf().inSingletonScope(),e(DefaultBaseTextureRenderContribution).toSelf().inSingletonScope(),e(DrawContribution).to(DefaultDrawContribution),e(IncrementalDrawContribution).to(DefaultIncrementalDrawContribution),e(GroupRender).to(DefaultCanvasGroupRender).inSingletonScope(),e(GraphicRender).toService(GroupRender),bindContributionProvider(e,GroupRenderContribution),e(DefaultBaseInteractiveRenderContribution).toSelf().inSingletonScope(),bindContributionProvider(e,InteractiveSubRenderContribution),bindContributionProvider(e,GraphicRender),e(CommonDrawItemInterceptorContribution).toSelf().inSingletonScope(),e(DrawItemInterceptor).toService(CommonDrawItemInterceptorContribution),bindContributionProvider(e,DrawItemInterceptor)});function load2(e){e.load(module_default)}function preLoadAllModule(){preLoadAllModule.__loaded||(preLoadAllModule.__loaded=!0,container.load(core_modules_default),container.load(graphic_module_default),container.load(render_modules_default),container.load(pick_modules_default),container.load(plugin_modules_default),load(container),load2(container))}preLoadAllModule.__loaded=!1,preLoadAllModule();var vglobal=container.get(VGlobal),graphicUtil=(application.global=vglobal,container.get(GraphicUtil)),transformUtil=(application.graphicUtil=graphicUtil,container.get(TransformUtil)),graphicService=(application.transformUtil=transformUtil,container.get(GraphicService)),layerService=(application.graphicService=graphicService,container.get(LayerService)),AutoRenderPlugin=(application.layerService=layerService,init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),class{constructor(){this.name=\\\"AutoRenderPlugin\\\",this.activeEvent=\\\"onRegister\\\",this._uid=Generator.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t,application.graphicService.hooks.onAttributeUpdate.tap(this.key,e=>{(e=e.glyphHost?e.glyphHost:e).stage===t.stage&&null!=e.stage&&e.stage.renderNextFrame()}),application.graphicService.hooks.onSetStage.tap(this.key,e=>{(e=e.glyphHost?e.glyphHost:e).stage===t.stage&&null!=e.stage&&e.stage.renderNextFrame()})}deactivate(e){application.graphicService.hooks.onAttributeUpdate.taps=application.graphicService.hooks.onAttributeUpdate.taps.filter(e=>e.name!==this.key),application.graphicService.hooks.onSetStage.taps=application.graphicService.hooks.onSetStage.taps.filter(e=>e.name!==this.key)}}),ViewTransform3dPlugin=(init_esbuild_inject(),class{constructor(){this.name=\\\"ViewTransform3dPlugin\\\",this.activeEvent=\\\"onRegister\\\",this._uid=Generator.GenAutoIncrementId(),this.key=this.name+this._uid,this.onMouseDown=e=>{this.option3d||(this.option3d=this.pluginService.stage.option3d),this.option3d&&(this.mousedown=!0,this.pageX=e.page.x,this.pageY=e.page.y)},this.onMouseUp=e=>{this.option3d||(this.option3d=this.pluginService.stage.option3d),this.option3d&&(this.mousedown=!1)},this.onMouseMove=e=>{var t,i,r,n=this.pluginService.stage;this.option3d||(this.option3d=n.option3d),this.option3d&&this.mousedown&&(this.pageX&&this.pageY?(i=e.page.x-this.pageX,r=e.page.y-this.pageY,this.pageX=e.page.x,this.pageY=e.page.y,r=r/100,this.option3d.alpha=(null!=(t=this.option3d.alpha)?t:0)+i/100,this.option3d.beta=(null!=(t=this.option3d.beta)?t:0)+r,n.set3dOptions(this.option3d),n.renderNextFrame()):(this.pageX=e.page.x,this.pageY=e.page.y))}}activate(e){var t=(this.pluginService=e).stage;this.option3d=t.option3d,t.addEventListener(\\\"mousedown\\\",this.onMouseDown),t.addEventListener(\\\"mouseup\\\",this.onMouseUp),t.addEventListener(\\\"mousemove\\\",this.onMouseMove)}deactivate(e){var t=e.stage;t.removeEventListener(\\\"mousedown\\\",this.onMouseDown),t.removeEventListener(\\\"mouseup\\\",this.onMouseUp),t.removeEventListener(\\\"mousemove\\\",this.onMouseMove)}}),IncrementalAutoRenderPlugin=(init_esbuild_inject(),class{constructor(){this.name=\\\"IncrementalAutoRenderPlugin\\\",this.activeEvent=\\\"onRegister\\\",this.nextFrameRenderGroupSet=new Set,this.willNextFrameRender=!1,this.nextUserParams={},this._uid=Generator.GenAutoIncrementId(),this.key=this.name+this._uid}activate(r){this.pluginService=r,application.graphicService.hooks.onAddIncremental.tap(this.key,(e,t,i)=>{(e=e.glyphHost?e.glyphHost:e).stage===r.stage&&null!=e.stage&&(this.nextUserParams.startAtId=t._uid,this.renderNextFrame(t))}),application.graphicService.hooks.onClearIncremental.tap(this.key,(e,t)=>{e.stage===r.stage&&null!=e.stage&&(this.nextUserParams.startAtId=e._uid,this.nextUserParams.restartIncremental=!0,this.renderNextFrame(e))})}deactivate(e){application.graphicService.hooks.onAddIncremental.taps=application.graphicService.hooks.onAddIncremental.taps.filter(e=>e.name!==this.key),application.graphicService.hooks.onClearIncremental.taps=application.graphicService.hooks.onClearIncremental.taps.filter(e=>e.name!==this.key)}renderNextFrame(e){this.nextFrameRenderGroupSet.add(e),this.willNextFrameRender||(this.willNextFrameRender=!0,application.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){const r=this.pluginService.stage;this.nextFrameRenderGroupSet.size&&(this.nextFrameRenderGroupSet.forEach(e=>{var t,i=e.layer;i&&e.layer.subLayers&&(t=e.layer.subLayers.get(e._uid))&&t.drawContribution&&t.drawContribution.draw(r.renderService,Object.assign({stage:r,layer:i,viewBox:r.window.getViewBox(),transMatrix:r.window.getViewBoxTransform(),clear:\\\"transparent\\\",renderService:r.renderService,updateBounds:!1,startAtId:e._uid,context:t.layer.getNativeHandler().getContext()},this.nextUserParams))}),this.nextUserParams={},this.nextFrameRenderGroupSet.clear())}}),HtmlAttributePlugin=(init_esbuild_inject(),class{constructor(){this.name=\\\"HtmlAttributePlugin\\\",this.activeEvent=\\\"onRegister\\\",this._uid=Generator.GenAutoIncrementId(),this.key=this.name+this._uid,this.lastDomContainerSet=new Set,this.currentDomContainerSet=new Set}activate(t){(this.pluginService=t).stage.hooks.afterRender.tap(this.key,e=>{e&&e===this.pluginService.stage&&this.drawHTML(t.stage.renderService)}),application.graphicService.hooks.onRemove.tap(this.key,e=>{this.removeDom(e)}),application.graphicService.hooks.onRelease.tap(this.key,e=>{this.removeDom(e)})}deactivate(e){e.stage.hooks.afterRender.taps=e.stage.hooks.afterRender.taps.filter(e=>e.name!==this.key),application.graphicService.hooks.onRemove.unTap(this.key),application.graphicService.hooks.onRelease.unTap(this.key),this.release()}drawHTML(e){\\\"browser\\\"===application.global.env&&(e.renderTreeRoots.sort((e,t)=>{var i;return(null!=(i=e.attribute.zIndex)?i:DefaultAttribute.zIndex)-(null!=(i=t.attribute.zIndex)?i:DefaultAttribute.zIndex)}).forEach(e=>{this.renderGroupHTML(e)}),this.lastDomContainerSet.forEach(e=>{this.currentDomContainerSet.has(e)||e.parentElement&&e.parentElement.removeChild(e)}),this.lastDomContainerSet=new Set(this.currentDomContainerSet),this.currentDomContainerSet.clear())}renderGroupHTML(e){this.renderGraphicHTML(e),e.forEachChildren(e=>{e.isContainer?this.renderGroupHTML(e):this.renderGraphicHTML(e)})}removeDom(e){e.bindDom&&e.bindDom.size&&(e.bindDom.forEach(e=>{e.dom&&e.dom.parentElement.removeChild(e.dom)}),e.bindDom.clear())}renderGraphicHTML(n){var o=n.attribute[\\\"html\\\"];if(o){var a=n.stage;if(a){var{dom:o,container:l,width:s,height:h,style:d,anchorType:u=\\\"boundsLeftTop\\\",pointerEvents:c}=o,g=(n.bindDom||(n.bindDom=new Map),n.bindDom.get(o));let t,i;if(!g||l&&l!==g.container){let e;n.bindDom.forEach(({wrapGroup:e})=>{application.global.removeDom(e)}),\\\"string\\\"==typeof o?(e=(new DOMParser).parseFromString(o,\\\"text/html\\\").firstChild).lastChild&&(e=e.lastChild.firstChild):e=o;var p=l||(!0===a.params.enableHtmlAttribute?null:a.params.enableHtmlAttribute);i=p?\\\"string\\\"==typeof p?application.global.getElementById(p):p:n.stage.window.getContainer(),(t=application.global.createDom({tagName:\\\"div\\\",width:s,height:h,style:d,parent:i}))&&(t.appendChild(e),n.bindDom.set(o,{dom:e,container:l,wrapGroup:t}))}else t=g.wrapGroup,i=t.parentNode;t.style.pointerEvents=c||\\\"none\\\",t.style.position||(t.style.position=\\\"absolute\\\",i.style.position=\\\"relative\\\");let e=0,r=0;p=n.globalAABBBounds,h=(r=\\\"position\\\"===u||p.empty()?(s=n.globalTransMatrix,e=s.e,s.f):(e=p.x1,p.y1),application.global.getElementTopLeft(i,!1)),d=a.window.getTopLeft(!1),o=e+d.left-h.left,l=r+d.top-h.top;t.style.left=o+\\\"px\\\",t.style.top=l+\\\"px\\\",this.currentDomContainerSet.add(t)}}else n.bindDom&&n.bindDom.size&&(n.bindDom.forEach(e=>{e.dom&&e.dom.parentElement.removeChild(e.dom)}),n.bindDom.clear())}release(){\\\"browser\\\"===application.global.env&&(this.removeAllDom(this.pluginService.stage.defaultLayer),this.lastDomContainerSet.clear(),this.currentDomContainerSet.clear())}removeAllDom(t){this.removeDom(t),t.forEachChildren(e=>{e.isContainer&&this.removeAllDom(t)})}}),globalBounds=(init_esbuild_inject(),new AABBBounds),DirtyBoundsPlugin=class{constructor(){this.name=\\\"DirtyBoundsPlugin\\\",this.activeEvent=\\\"onRegister\\\",this._uid=Generator.GenAutoIncrementId(),this.key=this.name+this._uid}activate(e){(this.pluginService=e).stage.hooks.afterRender.tap(this.key,e=>{e&&e===this.pluginService.stage&&e.dirtyBounds.clear()}),application.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(e,t,i,r)=>{e.glyphHost&&(e=e.glyphHost),t&&t===this.pluginService.stage&&t.renderCount&&(e.isContainer&&!e.shouldSelfChangeUpdateAABBBounds()||i&&(globalBounds.setValue(r.x1,r.y1,r.x2,r.y2),t.dirty(globalBounds,e.parent&&e.parent.globalTransMatrix)))}),application.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(e,t,i,r,n)=>{t&&t===this.pluginService.stage&&t.renderCount&&(e.isContainer&&!n||t.dirty(r.globalAABBBounds))}),application.graphicService.hooks.onRemove.tap(this.key,e=>{var t=e.stage;t&&t===this.pluginService.stage&&t.renderCount&&t&&t.dirty(e.globalAABBBounds)})}deactivate(e){application.graphicService.hooks.beforeUpdateAABBBounds.taps=application.graphicService.hooks.beforeUpdateAABBBounds.taps.filter(e=>e.name!==this.key),application.graphicService.hooks.afterUpdateAABBBounds.taps=application.graphicService.hooks.afterUpdateAABBBounds.taps.filter(e=>e.name!==this.key),e.stage.hooks.afterRender.taps=e.stage.hooks.afterRender.taps.filter(e=>e.name!==this.key),application.graphicService.hooks.onRemove.taps=application.graphicService.hooks.onRemove.taps.filter(e=>e.name!==this.key)}},_tempBounds2=(init_esbuild_inject(),new AABBBounds),FlexLayoutPlugin=class{constructor(){this.name=\\\"FlexLayoutPlugin\\\",this.activeEvent=\\\"onRegister\\\",this.id=Generator.GenAutoIncrementId(),this.key=this.name+this.id,this.tempBounds=new AABBBounds}pauseLayout(e){this.pause=e}tryLayoutChildren(e){e.firstChild&&this.tryLayout(e.firstChild)}tryLayout(e,t=!0){if(this.pause)return;const i=e.parent;if(!(t||i&&e.needUpdateLayout()))return;var r=getTheme(i).group,{display:n=r.display}=i.attribute;if(\\\"flex\\\"!==n)return;const{flexDirection:o=r.flexDirection,flexWrap:a=r.flexWrap,alignItems:l=r.alignItems,clip:s=r.clip}=i.attribute,{alignContent:h=null!=l?l:r.alignContent}=i.attribute;let{width:d,height:u,justifyContent:c=r.justifyContent}=i.attribute;const g=i.getChildren();if(null==d||null==u){let i=0,r=0,n=0;if(g.forEach(e=>{var t=this.getAABBBounds(e);t.empty()||(\\\"column\\\"===o||\\\"column-reverse\\\"===o?(r+=t.height(),i=Math.max(i,t.width())):(i+=t.width(),r=Math.max(r,t.height())),n=(n=(n=(n+=t.x1)+t.y1)+t.x2)+t.y2)}),!isFinite(n))return;d=i,u=r}null==i.attribute.width?i.attribute.width=d:d=i.attribute.width,null==i.attribute.height?i.attribute.height=u:u=i.attribute.height,this.tempBounds.copy(i._AABBBounds);const p={main:{len:d,field:\\\"x\\\"},cross:{len:u,field:\\\"y\\\"}},f=p.main,m=p.cross;\\\"column\\\"!==o&&\\\"column-reverse\\\"!==o||(f.len=u,m.len=d,f.field=\\\"y\\\",m.field=\\\"x\\\"),\\\"row-reverse\\\"!==o&&\\\"column-reverse\\\"!==o||(\\\"flex-start\\\"===c?c=\\\"flex-end\\\":\\\"flex-end\\\"===c?c=\\\"flex-start\\\":g.reverse());let b=0,v=0;const C=[],y=(g.forEach(e=>{var t,i=this.getAABBBounds(e);i.empty()||(t=\\\"x\\\"===f.field?i.width():i.height(),i=\\\"x\\\"===m.field?i.width():i.height(),C.push({mainLen:t,crossLen:i}),b+=t,v=Math.max(v,i))}),[]);if(b>f.len&&\\\"wrap\\\"===a){let r=0,n=0;C.forEach(({mainLen:e,crossLen:t},i)=>{n=r+e>f.len?0===r?(y.push({idx:i,mainLen:r+e,crossLen:t}),r=0):(y.push({idx:i-1,mainLen:r,crossLen:n}),r=e,t):(r+=e,Math.max(n,t))}),y.push({idx:C.length-1,mainLen:r,crossLen:n})}else y.push({idx:C.length-1,mainLen:b,crossLen:v});let _=0;if(y.forEach(e=>{this.layoutMain(i,g,c,f,C,_,e),_=e.idx+1}),v=y.reduce((e,t)=>e+t.crossLen,0),1===y.length){n={\\\"flex-start\\\":0,\\\"flex-end\\\":m.len,center:m.len/2};this.layoutCross(g,l,m,n,C,y[0],0)}else if(\\\"flex-start\\\"===h){let r=_=0;y.forEach((e,t)=>{var i={\\\"flex-start\\\":r,\\\"flex-end\\\":r+e.crossLen,center:r+e.crossLen/2};this.layoutCross(g,\\\"flex-start\\\",m,i,C,y[t],_),_=e.idx+1,r+=e.crossLen})}else if(\\\"center\\\"===h){_=0;let r=Math.max(0,(m.len-v)/2);y.forEach((e,t)=>{var i={\\\"flex-start\\\":r,\\\"flex-end\\\":r+e.crossLen,center:r+e.crossLen/2};this.layoutCross(g,\\\"center\\\",m,i,C,y[t],_),_=e.idx+1,r+=e.crossLen})}else if(\\\"space-around\\\"===h){_=0;const w=Math.max(0,(m.len-v)/y.length/2);let r=w;y.forEach((e,t)=>{var i={\\\"flex-start\\\":r,\\\"flex-end\\\":r+e.crossLen,center:r+e.crossLen/2};this.layoutCross(g,\\\"flex-start\\\",m,i,C,y[t],_),_=e.idx+1,r+=e.crossLen+2*w})}else if(\\\"space-between\\\"===h){_=0;const x=Math.max(0,(m.len-v)/(2*y.length-2));let r=0;y.forEach((e,t)=>{var i={\\\"flex-start\\\":r,\\\"flex-end\\\":r+e.crossLen,center:r+e.crossLen/2};this.layoutCross(g,\\\"flex-start\\\",m,i,C,y[t],_),_=e.idx+1,r+=e.crossLen+2*x})}g.forEach((e,t)=>{e.addUpdateBoundTag(),e.addUpdatePositionTag(),e.clearUpdateLayoutTag()}),i.addUpdateLayoutTag();r=this.getAABBBounds(i);s||this.tempBounds.equals(r)||this.tryLayout(i,!1)}getAABBBounds(e){this.skipBoundsTrigger=!0;var t=e.AABBBounds;return this.skipBoundsTrigger=!1,t}updateChildPos(e,t,i){return e+(null!=t?t:0)-i}layoutMain(e,i,t,r,n,o,a){if(\\\"flex-start\\\"===t){let e=0;for(let t=o;t<=a.idx;t++){var l=e+getPadding(i[t],r.field),s=this.getAABBBounds(i[t]);s.empty()||(i[t].attribute[r.field]=this.updateChildPos(l,i[t].attribute[r.field],s[r.field+\\\"1\\\"])),e+=n[t].mainLen}}else if(\\\"flex-end\\\"===t){let e=r.len;for(let t=o;t<=a.idx;t++){var h=(e-=n[t].mainLen)+getPadding(i[t],r.field),d=this.getAABBBounds(i[t]);d.empty()||(i[t].attribute[r.field]=this.updateChildPos(h,i[t].attribute[r.field],d[r.field+\\\"1\\\"]))}}else if(\\\"space-around\\\"===t)if(a.mainLen>=r.len){let e=0;for(let t=o;t<=a.idx;t++){var u=e+getPadding(i[t],r.field),c=this.getAABBBounds(i[t]);c.empty()||(i[t].attribute[r.field]=this.updateChildPos(u,i[t].attribute[r.field],c[r.field+\\\"1\\\"])),e+=n[t].mainLen}}else{var g=a.idx-o+1,p=(r.len-a.mainLen)/g/2;let e=p;for(let t=o;t<=a.idx;t++){var f=e+getPadding(i[t],r.field),m=this.getAABBBounds(i[t]);m.empty()||(i[t].attribute[r.field]=this.updateChildPos(f,i[t].attribute[r.field],m[r.field+\\\"1\\\"])),e+=n[t].mainLen+2*p}}else if(\\\"space-between\\\"===t)if(a.mainLen>=r.len){let e=0;for(let t=o;t<=a.idx;t++){var b=e+getPadding(i[t],r.field),v=this.getAABBBounds(i[t]);v.empty()||(i[t].attribute[r.field]=this.updateChildPos(b,i[t].attribute[r.field],v[r.field+\\\"1\\\"])),e+=n[t].mainLen}}else{var g=a.idx-o+1,C=(r.len-a.mainLen)/(2*g-2);let e=0;for(let t=o;t<=a.idx;t++){var y=e+getPadding(i[t],r.field),_=this.getAABBBounds(i[t]);_.empty()||(i[t].attribute[r.field]=this.updateChildPos(y,i[t].attribute[r.field],_[r.field+\\\"1\\\"])),e+=n[t].mainLen+2*C}}else if(\\\"center\\\"===t){let e=(r.len-a.mainLen)/2;for(let t=o;t<=a.idx;t++){var w=e+getPadding(i[t],r.field),x=this.getAABBBounds(i[t]);x.empty()||(i[t].attribute[r.field]=this.updateChildPos(w,i[t].attribute[r.field],x[r.field+\\\"1\\\"])),e+=n[t].mainLen}}}layoutCross(t,i,r,n,o,e,a){for(let d=a;d<=e.idx;d++){var l=t[d];let e=l.attribute[\\\"alignSelf\\\"];e&&\\\"auto\\\"!==e||(e=i);var s=this.getAABBBounds(l),h=null!=(h=n[e])?h:n[\\\"flex-start\\\"];\\\"flex-end\\\"===e?s.empty()||(l.attribute[r.field]=this.updateChildPos(h-o[d].crossLen+getPadding(l,r.field),l.attribute[r.field],s[r.field+\\\"1\\\"])):\\\"center\\\"===e?s.empty()||(l.attribute[r.field]=this.updateChildPos(h-o[d].crossLen/2+getPadding(l,r.field),l.attribute[r.field],s[r.field+\\\"1\\\"])):s.empty()||(l.attribute[r.field]=this.updateChildPos(h+getPadding(l,r.field),l.attribute[r.field],s[r.field+\\\"1\\\"]))}}activate(e){this.pluginService=e,application.graphicService.hooks.onAttributeUpdate.tap(this.key,e=>{(e=e.glyphHost?e.glyphHost:e).stage&&e.stage===this.pluginService.stage&&this.tryLayout(e,!1)}),application.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(e,t,i,r)=>{e.glyphHost&&(e=e.glyphHost),t&&t===this.pluginService.stage&&e.isContainer&&!this.skipBoundsTrigger&&_tempBounds2.copy(r)}),application.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(e,t,i,r,n)=>{!t||t!==this.pluginService.stage||!e.isContainer||this.skipBoundsTrigger||_tempBounds2.equals(i)||this.tryLayout(e,!1)}),application.graphicService.hooks.onSetStage.tap(this.key,e=>{e.glyphHost&&(e=e.glyphHost),this.tryLayout(e,!1)})}deactivate(e){application.graphicService.hooks.onAttributeUpdate.taps=application.graphicService.hooks.onAttributeUpdate.taps.filter(e=>e.name!==this.key),application.graphicService.hooks.beforeUpdateAABBBounds.taps=application.graphicService.hooks.beforeUpdateAABBBounds.taps.filter(e=>e.name!==this.key),application.graphicService.hooks.afterUpdateAABBBounds.taps=application.graphicService.hooks.afterUpdateAABBBounds.taps.filter(e=>e.name!==this.key),application.graphicService.hooks.onSetStage.taps=application.graphicService.hooks.onSetStage.taps.filter(e=>e.name!==this.key)}};function getPadding(e,t){return 0}init_esbuild_inject();var defaultTicker=new DefaultTicker,DirectionalLight=(defaultTicker.addTimeline(defaultTimeline),defaultTicker.setFPS(60),init_esbuild_inject(),class{constructor(e,t,i=.8){this.dir=e,this.color=t,this.colorRgb=ColorStore.Get(t,ColorType.Color1),this.ambient=i;var r=sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);this.formatedDir=[e[0]/r,e[1]/r,e[2]/r]}computeColor(e,t){var i=this.formatedDir,i=min(max((e[0]*i[0]+e[1]*i[1]+e[2]*i[2])*(1-this.ambient/2),0)+this.ambient,1),r=isString_default(t)?ColorStore.Get(t,ColorType.Color1):t,n=this.colorRgb;return`rgb(${n[0]*r[0]*i}, ${n[1]*r[1]*i}, ${n[2]*r[2]*i})`}});function lookAt(e,t,i,r){let n,o,a,l,s,h,d,u,c,g;var p=t[0],f=t[1],m=t[2],b=r[0],v=r[1],C=r[2],y=i[0],_=i[1],w=i[2];return Math.abs(p-y)<epsilon&&Math.abs(f-_)<epsilon&&Math.abs(m-w)<epsilon?DefaultMat4Allocate.identity(e):(d=p-y,u=f-_,c=m-w,d*=g=1/Math.hypot(d,u,c),u*=g,c*=g,n=v*c-C*u,o=C*d-b*c,a=b*u-v*d,(g=Math.hypot(n,o,a))?(g=1/g,n*=g,o*=g,a*=g):(n=0,o=0,a=0),l=u*a-c*o,s=c*n-d*a,h=d*o-u*n,(g=Math.hypot(l,s,h))?(g=1/g,l*=g,s*=g,h*=g):(l=0,s=0,h=0),e[0]=n,e[1]=l,e[2]=d,e[3]=0,e[4]=o,e[5]=s,e[6]=u,e[7]=0,e[8]=a,e[9]=h,e[10]=c,e[11]=0,e[12]=-(n*p+o*f+a*m),e[13]=-(l*p+s*f+h*m),e[14]=-(d*p+u*f+c*m),e[15]=1,e)}function ortho(e,t,i,r,n,o,a){var l=1/(t-i),s=1/(r-n),h=1/(o-a);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+i)*l,e[13]=(n+r)*s,e[14]=(a+o)*h,e[15]=1,e}function multiply(e,t,i){var r=t[0],n=t[1],o=t[2],a=t[3],l=t[4],s=t[5],h=t[6],d=t[7],u=t[8],c=t[9],g=t[10],p=t[11],f=t[12],m=t[13],b=t[14],v=t[15],C=i[0],y=i[1],_=i[2],w=i[3];return e[0]=C*r+y*l+_*u+w*f,e[1]=C*n+y*s+_*c+w*m,e[2]=C*o+y*h+_*g+w*b,e[3]=C*a+y*d+_*p+w*v,C=i[4],y=i[5],_=i[6],w=i[7],e[4]=C*r+y*l+_*u+w*f,e[5]=C*n+y*s+_*c+w*m,e[6]=C*o+y*h+_*g+w*b,e[7]=C*a+y*d+_*p+w*v,C=i[8],y=i[9],_=i[10],w=i[11],e[8]=C*r+y*l+_*u+w*f,e[9]=C*n+y*s+_*c+w*m,e[10]=C*o+y*h+_*g+w*b,e[11]=C*a+y*d+_*p+w*v,C=i[12],y=i[13],_=i[14],w=i[15],e[12]=C*r+y*l+_*u+w*f,e[13]=C*n+y*s+_*c+w*m,e[14]=C*o+y*h+_*g+w*b,e[15]=C*a+y*d+_*p+w*v,e}function transformMat4(e,t,i){var r=t[0],n=t[1],o=t[2],a=i[3]*r+i[7]*n+i[11]*o+i[15];return e[0]=(i[0]*r+i[4]*n+i[8]*o+i[12])/(a=a||1),e[1]=(i[1]*r+i[5]*n+i[9]*o+i[13])/a,e[2]=(i[2]*r+i[6]*n+i[10]*o+i[14])/a,e}init_esbuild_inject(),init_esbuild_inject();var _isBrowserEnv,OrthoCamera=class{set params(e){this._params=Object.assign({},e),this._projectionMatrixCached=this.forceGetProjectionMatrix(),this._viewMatrixCached=this.forceGetViewMatrix()}get params(){return Object.assign({},this._params)}constructor(e){this.params=e}getViewMatrix(){return this._viewMatrixCached||(this._viewMatrixCached=mat4Allocate.allocate()),this._viewMatrixCached}forceGetViewMatrix(){this._viewMatrixCached||(this._viewMatrixCached=mat4Allocate.allocate());var{pos:e,center:t,up:i}=this.params.viewParams;return lookAt(this._viewMatrixCached,e,t,i),this._vp||(this._vp=mat4Allocate.allocate()),this._vp=multiply(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._viewMatrixCached}getProjectionMatrix(){return this._projectionMatrixCached||(this._projectionMatrixCached=mat4Allocate.allocate()),this._projectionMatrixCached}forceGetProjectionMatrix(){this._projectionMatrixCached||(this._projectionMatrixCached=mat4Allocate.allocate());var{left:e,top:t,right:i,bottom:r}=this._params;return ortho(this._projectionMatrixCached,e,i,r,t,0,-2e6),this._vp||(this._vp=mat4Allocate.allocate()),this._vp=multiply(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._projectionMatrixCached}getField(){var{fieldRatio:e=.8,fieldDepth:t,left:i,right:r}=this._params;return(null!=t?t:r-i)*e}getProjectionScale(e){var t=this.getField();return t/(t+e)}view(e,t,i){var r=[0,0,0];return transformMat4(r,[e,t,i],this._viewMatrixCached),r}vp(e,t,i){var r=[0,0,0],n=this._params.viewParams[\\\"pos\\\"],r=(transformMat4(r,[e,t,i],this._viewMatrixCached),e=r[0],t=r[1],this.getProjectionScale(i=r[2]));return{x:e*r+n[0],y:t*r+n[1]}}};function initIsBrowserEnv(){if(null==_isBrowserEnv)try{_isBrowserEnv=(_isBrowserEnv=globalThis===window)&&!!document.createElement}catch(err){_isBrowserEnv=!1}}function isBrowserEnv(){initIsBrowserEnv();var e=application.global&&application.global.env;return e?\\\"browser\\\"===e:_isBrowserEnv}function isNodeEnv(){initIsBrowserEnv();var e=application.global&&application.global.env;return e?\\\"node\\\"===e:!_isBrowserEnv}init_esbuild_inject(),init_esbuild_inject();var ReactAttributePlugin=class extends HtmlAttributePlugin{constructor(){super(...arguments),this.name=\\\"ReactAttributePlugin\\\",this.activeEvent=\\\"onRegister\\\",this._uid=Generator.GenAutoIncrementId(),this.key=this.name+this._uid}removeDom(e){e.bindDom&&e.bindDom.size&&(e.bindDom.forEach(e=>{e.root&&e.root.unmount()}),e.bindDom.clear())}renderGraphicHTML(n){var o=n.attribute[\\\"react\\\"];if(o){var a=n.stage;if(a){var l=a.params.ReactDOM,{element:o,container:s,width:h,height:d,style:u,anchorType:c=\\\"boundsLeftTop\\\",pointerEvents:g}=o;if(o&&l&&l.createRoot){n.bindDom||(n.bindDom=new Map);var p,f=n.bindDom.get(o);let e,t,i=(!f||s&&s!==f.container?(n.bindDom.forEach(({wrapGroup:e})=>{application.global.removeDom(e)}),p=s,t=p?\\\"string\\\"==typeof p?application.global.getElementById(p):p:n.stage.window.getContainer(),(e=application.global.createDom({tagName:\\\"div\\\",width:h,height:d,style:u,parent:t}))&&((p=l.createRoot(e)).render(o),n.bindDom.set(o,{dom:o,container:s,wrapGroup:e,root:p}))):(e=f.wrapGroup,t=e.parentNode),e.style.pointerEvents=g||\\\"none\\\",e.style.position||(e.style.position=\\\"absolute\\\",t.style.position=\\\"relative\\\"),0),r=0;h=n.globalAABBBounds,u=(r=\\\"position\\\"===c||h.empty()?(d=n.globalTransMatrix,i=d.e,d.f):(i=h.x1,h.y1),application.global.getElementTopLeft(t,!1)),l=a.window.getTopLeft(!1),o=i+l.left-u.left,s=r+l.top-u.top;e.style.left=o+\\\"px\\\",e.style.top=s+\\\"px\\\"}}}else n.bindDom&&n.bindDom.size&&(n.bindDom.forEach(e=>{e.root&&e.root.unmount()}),n.bindDom.clear())}},DefaultConfig={WIDTH:500,HEIGHT:500,X:0,Y:0,BACKGROUND:\\\"white\\\"},Stage=class extends Group{set viewBox(e){this.window.setViewBox(e)}get viewBox(){return this.window.getViewBox()}get x(){return this.window.getViewBox().x1}set x(e){var t=this.window.getViewBox();t.translate(e-t.x1,0),this.window.setViewBox(t)}get y(){return this.window.getViewBox().y1}set y(e){var t=this.window.getViewBox();t.translate(0,e-t.y1),this.window.setViewBox(t)}get width(){return this.window.width}set width(e){this.resize(e,this.height)}get viewWidth(){return this.window.getViewBox().width()}set viewWidth(e){this.resizeView(e,this.viewHeight)}get viewHeight(){return this.window.getViewBox().height()}set viewHeight(e){this.resizeView(this.viewWidth,e)}get height(){return this.window.height}set height(e){this.resize(this.width,e)}get dpr(){return this.window.dpr}set dpr(e){this.setDpr(e)}get background(){var e;return null!=(e=this._background)?e:DefaultConfig.BACKGROUND}set background(e){this._background=e}get defaultLayer(){return this.at(0)}get eventSystem(){return this._eventSystem}constructor(e={}){var t;super({}),this._onVisibleChange=e=>{var t;this._skipRender<0||(e?(this.dirtyBounds&&(t=this.window.getViewBox(),this.dirtyBounds.setValue(t.x1,t.y1,t.width(),t.height())),1<this._skipRender&&this.renderNextFrame(),this._skipRender=0):this._skipRender=1)},this.beforeRender=e=>{this._beforeRender&&this._beforeRender(e)},this.afterRender=t=>{this.renderCount++,this._afterRender&&this._afterRender(t),this._afterNextRenderCbs&&this._afterNextRenderCbs.forEach(e=>e(t)),this._afterNextRenderCbs=null},this.params=e,this.theme=new Theme,this.hooks={beforeRender:new SyncHook([\\\"stage\\\"]),afterRender:new SyncHook([\\\"stage\\\"])},this.global=application.global,!this.global.env&&isBrowserEnv()&&this.global.setEnv(\\\"browser\\\"),this.window=container.get(VWindow),this.renderService=container.get(RenderService),this.pluginService=container.get(PluginService),this.layerService=container.get(LayerService),this.pluginService.active(this,e),this.window.create({width:e.width,height:e.height,viewBox:e.viewBox,container:e.container,dpr:e.dpr||this.global.devicePixelRatio,canvasControled:!1!==e.canvasControled,title:e.title||\\\"\\\",canvas:e.canvas}),this.state=\\\"normal\\\",this.renderCount=0,this.tryInitEventSystem(),this._background=null!=(t=e.background)?t:DefaultConfig.BACKGROUND,this.appendChild(this.layerService.createLayer(this,{main:!0})),this.nextFrameRenderLayerSet=new Set,this.willNextFrameRender=!1,(this.stage=this).renderStyle=e.renderStyle,e.autoRender&&this.enableAutoRender(),!1===e.disableDirtyBounds&&this.enableDirtyBounds(),e.enableHtmlAttribute&&this.enableHtmlAttribute(e.enableHtmlAttribute),e.ReactDOM&&this.enableReactAttribute(e.ReactDOM),e.enableLayout&&this.enableLayout(),this.hooks.beforeRender.tap(\\\"constructor\\\",this.beforeRender),this.hooks.afterRender.tap(\\\"constructor\\\",this.afterRender),this._beforeRender=e.beforeRender,this._afterRender=e.afterRender,this.ticker=e.ticker||defaultTicker,this.supportInteractiveLayer=!1!==e.interactiveLayer,this.timeline=new DefaultTimeline,this.ticker.addTimeline(this.timeline),this.timeline.pause(),e.optimize||(e.optimize={}),this.optmize(e.optimize),e.background&&isString_default(this._background)&&this._background.includes(\\\"/\\\")&&this.setAttributes({background:this._background})}pauseRender(){this._skipRender=-1}resumeRender(){this._skipRender=0}tryInitEventSystem(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new EventSystem(Object.assign({targetElement:this.window,resolution:this.window.dpr||this.global.devicePixelRatio,rootNode:this,global:this.global,supportsPointerEvents:this.params.supportsPointerEvents,supportsTouchEvents:this.params.supportsTouchEvents},this.params.event)))}preventRender(e){e?this._skipRender=-1/0:!1!==this.params.optimize.skipRenderWithOutRange?this._skipRender=this.window.isVisible()?0:1:this._skipRender=0}optmize(e){this.optmizeRender(e.skipRenderWithOutRange),this.params.optimize=e}optmizeRender(e=!1){e&&(this._skipRender=this._skipRender<0?this._skipRender:this.window.isVisible()?0:1,this.window.onVisibleChange(this._onVisibleChange))}getTimeline(){return this.timeline}get3dOptions(e){var{center:t={x:this.width/2,y:this.height/2,z:0,dx:0,dy:0,dz:0},light:i={},alpha:r=0,beta:n=0,camera:o,fieldRatio:a=1,fieldDepth:l}=e;return Object.assign(Object.assign({},e),{center:t,light:i,alpha:r,beta:n,camera:o,fieldRatio:a,fieldDepth:l})}set3dOptions(e){this.option3d=e;var t=this.get3dOptions(e),{light:t,center:i,camera:r,alpha:n,beta:o,fieldRatio:a,fieldDepth:l}=t,{dir:t=[1,1,-1],color:s=\\\"white\\\",ambient:h}=t,d=(null!=(d=i.x)?d:this.width/2)+(null!=(d=i.dx)?d:0),u=(null!=(u=i.y)?u:this.height/2)+(null!=(u=i.dy)?u:0),i=[d,u,(null!=(f=i.z)?f:0)+(null!=(f=i.dz)?f:0)];let c=0,g=0,p=0;r||(c=Math.sin(n)+d,g=Math.sin(o)+u,p=Math.cos(n)*Math.cos(o)*1),this.light=new DirectionalLight(t,s,h);var f={left:0,right:this.width,top:0,bottom:this.height,fieldRatio:a,fieldDepth:l,viewParams:{pos:[c,g,p],center:i,up:[0,1,0]}};this.camera?this.camera.params=f:this.camera=new OrthoCamera(f),e.enableView3dTransform&&this.enableView3dTransform()}setBeforeRender(e){this._beforeRender=e}setAfterRender(e){this._afterRender=e}afterNextRender(e){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(e)}enableView3dTransform(){this.view3dTranform||(this.view3dTranform=!0,this.pluginService.register(new ViewTransform3dPlugin))}disableView3dTranform(){this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName(\\\"ViewTransform3dPlugin\\\").forEach(e=>{this.pluginService.unRegister(e)}))}enableAutoRender(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new AutoRenderPlugin))}disableAutoRender(){this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName(\\\"AutoRenderPlugin\\\").forEach(e=>{this.pluginService.unRegister(e)}))}enableIncrementalAutoRender(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new IncrementalAutoRenderPlugin))}disableIncrementalAutoRender(){this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName(\\\"IncrementalAutoRenderPlugin\\\").forEach(e=>{this.pluginService.unRegister(e)}))}enableDirtyBounds(){if(!this.dirtyBounds){this.dirtyBounds=new Bounds;let e=this.pluginService.findPluginsByName(\\\"DirtyBoundsPlugin\\\")[0];e?e.activate(this.pluginService):(e=new DirtyBoundsPlugin,this.pluginService.register(e))}}disableDirtyBounds(){this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName(\\\"DirtyBoundsPlugin\\\").forEach(e=>{this.pluginService.unRegister(e)}))}enableLayout(){this._enableLayout||(this._enableLayout=!0,this.pluginService.register(new FlexLayoutPlugin))}disableLayout(){this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName(\\\"FlexLayoutPlugin\\\").forEach(e=>{this.pluginService.unRegister(e)}))}enableHtmlAttribute(e){this.htmlAttribute||(this.htmlAttribute=e,this.pluginService.register(new HtmlAttributePlugin))}disableHtmlAttribute(){this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName(\\\"HtmlAttributePlugin\\\").forEach(e=>{this.pluginService.unRegister(e)}))}enableReactAttribute(e){this.reactAttribute||(this.reactAttribute=e,this.pluginService.register(new ReactAttributePlugin))}disableReactAttribute(){this.reactAttribute&&(this.reactAttribute=!1,this.pluginService.findPluginsByName(\\\"ReactAttributePlugin\\\").forEach(e=>{this.pluginService.unRegister(e)}))}getPluginsByName(e){return this.pluginService.findPluginsByName(e)}tryUpdateAABBBounds(){var e=this.window.getViewBox();return this._AABBBounds.setValue(e.x1,e.y1,e.x2,e.y2),this._AABBBounds}combineLayer(e,t){throw new Error(\\\"暂不支持\\\")}createLayer(e,t){var i=this.layerService.createLayer(this,{main:!1,layerMode:t,canvasId:e});return this.appendChild(i),i}sortLayer(e){var t=this.children;t.sort(e),this.removeAllChild(),t.forEach(e=>{this.appendChild(e)})}removeLayer(e){return this.removeChild(this.findChildByUid(e))}tryInitInteractiveLayer(){this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name=\\\"_builtin_interactive\\\",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}clearViewBox(e){this.window.clearViewBox(e)}render(e,t){this.ticker.start(),this.timeline.resume();var i=this.state;this.state=\\\"rendering\\\",this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=t,this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=i,this._skipRender&&this._skipRender++}combineLayersToWindow(){}renderNextFrame(e,t){this.nextFrameRenderLayerSet.size!==this.childrenCount&&(e||this).forEach(e=>{this.nextFrameRenderLayerSet.add(e)}),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){this.timeline.resume(),this.ticker.start();var e=this.state;this.state=\\\"rendering\\\",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=e,this._skipRender&&this._skipRender++}renderLayerList(t,i){var r=[];for(let n=0;n<t.length;n++){let e=t[n];\\\"virtual\\\"===e.layerMode&&(e=e.getNativeHandler().mainHandler.layer),r.includes(e)||r.push(e)}r.forEach(e=>{e.renderCount>this.renderCount||(e.renderCount=this.renderCount+1,e.render({renderService:this.renderService,background:e===this.defaultLayer?this.background:void 0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},i)))}),this.interactiveLayer&&!t.includes(this.interactiveLayer)&&this.interactiveLayer.render({renderService:this.renderService,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},i))}resizeWindow(e,t,i=!0){this.window.resize(e,t),i&&this.render()}resize(t,i,e=!0){this.window.hasSubView()||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+i),this.window.resize(t,i),this.forEachChildren(e=>{e.resize(t,i)}),this.camera&&this.option3d&&this.set3dOptions(this.option3d),e&&this.render()}resizeView(t,i,e=!0){this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+i),this.forEachChildren(e=>{e.resizeView(t,i)}),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{right:this.width,bottom:this.height})),e&&this.render()}setViewBox(e,t,i,r,n){let o=!0;\\\"object\\\"==typeof e?(this.viewBox.setValue(e.x1,e.y1,e.x2,e.y2),!1===t&&(o=!1)):(this.viewBox.setValue(e,t,e+i,t+r),!1===n&&(o=!1)),this.forEachChildren(e=>{e.resizeView(this.viewBox.width(),this.viewBox.height())}),o&&this.render()}setDpr(t,e=!0){this.forEachChildren(e=>{e.setDpr(t)}),e&&this.render()}setOrigin(e,t){throw new Error(\\\"暂不支持\\\")}\\\"export\\\"(e){throw new Error(\\\"暂不支持\\\")}pick(e,t){this.pickerService||(this.pickerService=container.get(PickerService));var i=this.pickerService.pick(this.children,new Point(e,t),{bounds:this.AABBBounds});return!!(null!=i&&i.graphic||null!=i&&i.group)&&i}startAnimate(e){throw new Error(\\\"暂不支持\\\")}setToFrame(e){throw new Error(\\\"暂不支持\\\")}release(){super.release(),this.hooks.beforeRender.unTap(\\\"constructor\\\",this.beforeRender),this.hooks.afterRender.unTap(\\\"constructor\\\",this.afterRender),this.eventSystem&&this.eventSystem.release(),this.layerService.releaseStage(this),this.pluginService.release(),this.forEach(e=>{e.release()}),this.interactiveLayer&&this.interactiveLayer.release(),this.window.release(),this.ticker.remTimeline(this.timeline),this.renderService.renderTreeRoots=[]}setStage(e){}dirty(e,t){t&&e.transformWithMatrix(t),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(e.x1,e.y1,e.x2,e.y2),this.dirtyBounds.union(e)}getLayer(t){return this.children.filter(e=>e.name===t)[0]}renderTo(i){this.forEachChildren((e,t)=>{e.drawTo(i,{renderService:this.renderService,viewBox:i.getViewBox(),transMatrix:i.getViewBoxTransform(),background:e===this.defaultLayer?this.background:void 0,clear:0===t,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())})})}renderToNewWindow(e=0,t){var i=container.get(VWindow),r=t?-t.x1:0,n=t?-t.y1:0,o=t?t.x2:this.viewWidth,a=t?t.y2:this.viewHeight,l=t?t.width():this.viewWidth,s=t?t.height():this.viewHeight;return i.create({viewBox:{x1:r,y1:n,x2:o,y2:a},width:l,height:s,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:\\\"\\\"}),this.renderTo(i),i}toCanvas(e=!0,t){var i=this.renderToNewWindow(e,t).getNativeHandler();return i.nativeCanvas||null}setCursor(e){this._cursor=e,this.eventSystem.setCursor(e,\\\"ignore\\\")}getCursor(){return this._cursor}};function createStage(e){return new Stage(e)}init_esbuild_inject();var __decorate32=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata25=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},DefaultConfig2={WIDTH:500,HEIGHT:500,DPR:1},BaseCanvas=class{get displayWidth(){return this._pixelWidth/this._dpr}get displayHeight(){return this._pixelHeight/this._dpr}get id(){return this._id}get x(){return this._x}set x(e){this._x=e}get y(){return this._y}set y(e){this._y=e}get nativeCanvas(){return this._nativeCanvas}get width(){return this._pixelWidth}set width(e){this._pixelWidth=e,this._displayWidth=e/(this._dpr||1)}get height(){return this._pixelHeight}set height(e){this._pixelHeight=e,this._displayHeight=e/(this._dpr||1)}getContext(e){return this._context}get visiable(){return this._visiable}set visiable(e){(this._visiable=e)?this.show():this.hide()}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this.resize(this._displayWidth,this._displayHeight)}constructor(e){var{nativeCanvas:t,width:i=DefaultConfig2.WIDTH,height:r=DefaultConfig2.HEIGHT,dpr:n=DefaultConfig2.DPR,x:o,y:a,id:l,canvasControled:s=!0}=e;this._x=null!=o?o:0,this._y=null!=a?a:0,this._pixelWidth=i*n,this._pixelHeight=r*n,this._visiable=!1!==e.visiable,this.controled=s,this._displayWidth=i,this._displayHeight=r,this._dpr=n,this._nativeCanvas=t,this._id=null!=(o=t.id)?o:l,l&&(t.id=l),this.init(e)}getNativeCanvas(){return this._nativeCanvas}hide(){}show(){}applyPosition(){}resetStyle(e){}resize(e,t){}toDataURL(e,t){return\\\"\\\"}readPixels(e,t,i,r){return this._context.getImageData(e,t,i,r)}convertToBlob(e){throw new Error(\\\"暂未实现\\\")}transferToImageBitmap(){throw new Error(\\\"暂未实现\\\")}release(){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}},__decorate33=(BaseCanvas.env=\\\"browser\\\",BaseCanvas=__decorate32([injectable(),__metadata25(\\\"design:paramtypes\\\",[Object])],BaseCanvas),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),BaseEnvContribution=class{configure(e){e.env===this.type&&e.setActiveEnvContribution(this)}getNativeAABBBounds(e){return new AABBBounds}removeDom(e){return!1}createDom(e){return null}getDynamicCanvasCount(){return 999}getStaticCanvasCount(){return 999}getElementById(e){return document.getElementById(e)}getRootElement(){return document.body}loadJson(e){var t=fetch(e).then(e=>e.json());return t.then(e=>({data:e,state:\\\"success\\\"}))[\\\"catch\\\"](()=>({data:null,state:\\\"fail\\\"})),t}loadArrayBuffer(e){return fetch(e).then(e=>e.arrayBuffer()).then(e=>({data:e,loadState:\\\"success\\\"}))[\\\"catch\\\"](()=>({data:null,loadState:\\\"fail\\\"}))}loadBlob(e){return fetch(e).then(e=>e.blob()).then(e=>({data:e,loadState:\\\"success\\\"}))[\\\"catch\\\"](()=>({data:null,loadState:\\\"fail\\\"}))}getElementTop(e,t){return 0}getElementLeft(e,t){return 0}getElementTopLeft(e,t){return{top:0,left:0}}},BaseEnvContribution=__decorate33([injectable()],BaseEnvContribution),__decorate34=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata26=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},BaseWindowHandlerContribution=class{constructor(){this._uid=Generator.GenAutoIncrementId(),this.viewBox=new AABBBounds,this.modelMatrix=new Matrix(1,0,0,1,0,0)}onChange(e){this._onChangeCb=e}configure(e,t){t.env===this.type&&e.setWindowHandler(this)}release(){this.releaseWindow()}isVisible(e){return!0}onVisibleChange(e){}getTopLeft(e){return{top:0,left:0}}setViewBox(e){this.viewBox.setValue(e.x1,e.y1,e.x2,e.y2)}getViewBox(){return this.viewBox}setViewBoxTransform(e,t,i,r,n,o){this.modelMatrix.setValue(e,t,i,r,n,o)}getViewBoxTransform(){return this.modelMatrix}},BaseWindowHandlerContribution=__decorate34([injectable(),__metadata26(\\\"design:paramtypes\\\",[])],BaseWindowHandlerContribution),__decorate35=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata27=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param19=function(i,r){return function(e,t){r(e,t,i)}},DefaultPickService=class{constructor(e){this.pickItemInterceptorContributions=e,this.type=\\\"default\\\",this.global=application.global}_init(){this.InterceptorContributions=this.pickItemInterceptorContributions.getContributions().sort((e,t)=>e.order-t.order)}pick(i,r,n){let o={graphic:null,group:null};n.pickerService=this;var e=n.bounds.width(),t=n.bounds.height();if((new AABBBounds).setValue(0,0,e,t).containsPoint(r)){this.pickContext&&(this.pickContext.inuse=!0),n.pickContext=this.pickContext,this.pickContext&&this.pickContext.clearMatrix(!0,1);var a=new Matrix(1,0,0,1,0,0);let e;for(let t=i.length-1;0<=t&&!(o=i[t].isContainer?this.pickGroup(i[t],r,a,n):this.pickItem(i[t],r,a,n)).graphic;t--)e=e||o.group;if(o.graphic||(o.group=e),this.pickContext&&(this.pickContext.inuse=!1),o.graphic){let e=o.graphic;for(;e.parent;)e=e.parent;e.shadowHost&&(o.params={shadowTarget:o.graphic},o.graphic=e.shadowHost)}}return o}containsPoint(e,t,i){var r;return!(null==(r=this.pickItem(e,t,null,null!=i?i:{pickContext:this.pickContext,pickerService:this}))||!r.graphic)}pickGroup(n,o,a,l){let s={group:null,graphic:null};if(!1!==n.attribute.visibleAll){var t=l.pickContext,i=t.modelMatrix;if(t.camera&&(d=n.transMatrix,mat3Tomat4(h=mat4Allocate.allocate(),d),i?h&&(d=mat4Allocate.allocate(),t.modelMatrix=multiplyMat4Mat4(d,i,h),mat4Allocate.free(h)):(mat3Tomat4(h,n.globalTransMatrix),t.modelMatrix=h)),this.InterceptorContributions.length)for(let e=0;e<this.InterceptorContributions.length;e++){var r=this.InterceptorContributions[e];if(r.beforePickItem){r=r.beforePickItem(n,this,o,l,{parentMatrix:a});if(r)return t.modelMatrix!==i&&mat4Allocate.free(t.modelMatrix),t.modelMatrix=i,r}}const e=n.transMatrix,u=matrixAllocate.allocateByObj(a),c=new Point(o.x,o.y);u.transformPoint(c,c);var h,d=n.AABBBounds.containsPoint(c);(d||n.stage.camera)&&((h=this.pickItem(n,c.clone(),a,l))&&h.graphic&&(s.graphic=h.graphic,s.params=h.params),d=!1!==n.attribute.pickable&&d,u.multiply(e.a,e.b,e.c,e.d,e.e,e.f),!1===n.attribute.childrenPickable||h&&h.graphic||foreach(n,DefaultAttribute.zIndex,e=>{var t,i,r;return e.isContainer?(r=new Point(o.x,o.y),i=getTheme(n).group,({scrollX:t=i.scrollX,scrollY:i=i.scrollY}=n.attribute),r.x-=t,r.y-=i,s=this.pickGroup(e,r,u,l)):(t=new Point(o.x,o.y),u.transformPoint(t,t),i=getTheme(n).group,({scrollX:r=i.scrollX,scrollY:i=i.scrollY}=n.attribute),t.x-=r,t.y-=i,(r=this.pickItem(e,t,a,l))&&r.graphic&&(s.graphic=r.graphic,s.params=r.params)),!!s.graphic||!!s.group},!0,!!t.camera),t.modelMatrix!==i&&mat4Allocate.free(t.modelMatrix),t.modelMatrix=i,s.graphic||s.group||!d||n.stage.camera||(s.group=n),matrixAllocate.free(u))}return s}selectPicker(e){return this.pickerMap.get(e.numberType)||null}},DefaultPickService=__decorate35([injectable(),__param19(0,inject(ContributionProvider)),__param19(0,named(PickItemInterceptor)),__metadata27(\\\"design:paramtypes\\\",[Object])],DefaultPickService),loadArcModule=(init_esbuild_inject(),!1),arcModule=new ContainerModule(e=>{loadArcModule||(loadArcModule=!0,e(DefaultCanvasArcRender).toSelf().inSingletonScope(),e(ArcRender).to(DefaultCanvasArcRender).inSingletonScope(),e(GraphicRender).toService(ArcRender),e(ArcRenderContribution).toService(DefaultBaseInteractiveRenderContribution),bindContributionProvider(e,ArcRenderContribution))}),loadRectModule=(init_esbuild_inject(),!1),rectModule=new ContainerModule(e=>{loadRectModule||(loadRectModule=!0,e(DefaultCanvasRectRender).toSelf().inSingletonScope(),e(RectRender).to(DefaultCanvasRectRender).inSingletonScope(),e(GraphicRender).toService(RectRender),e(SplitRectAfterRenderContribution).toSelf(),e(SplitRectBeforeRenderContribution).toSelf(),e(RectRenderContribution).toService(SplitRectAfterRenderContribution),e(RectRenderContribution).toService(SplitRectBeforeRenderContribution),e(RectRenderContribution).toService(DefaultBaseInteractiveRenderContribution),bindContributionProvider(e,RectRenderContribution))}),loadLineModule=(init_esbuild_inject(),!1),lineModule=new ContainerModule(e=>{loadLineModule||(loadLineModule=!0,e(DefaultCanvasLineRender).toSelf().inSingletonScope(),e(DefaultIncrementalCanvasLineRender).toSelf().inSingletonScope(),e(LineRender).to(DefaultCanvasLineRender).inSingletonScope(),e(GraphicRender).toService(LineRender))}),loadAreaModule=(init_esbuild_inject(),!1),areaModule=new ContainerModule(e=>{loadAreaModule||(loadAreaModule=!0,e(DefaultCanvasAreaRender).toSelf().inSingletonScope(),e(AreaRender).to(DefaultCanvasAreaRender).inSingletonScope(),e(GraphicRender).toService(AreaRender),e(AreaRenderContribution).toService(DefaultBaseInteractiveRenderContribution),bindContributionProvider(e,AreaRenderContribution),e(DefaultIncrementalCanvasAreaRender).toSelf().inSingletonScope())}),loadSymbolModule=(init_esbuild_inject(),!1),symbolModule=new ContainerModule(e=>{loadSymbolModule||(loadSymbolModule=!0,e(DefaultCanvasSymbolRender).toSelf().inSingletonScope(),e(SymbolRender).to(DefaultCanvasSymbolRender).inSingletonScope(),e(GraphicRender).toService(SymbolRender),e(SymbolRenderContribution).toService(DefaultBaseInteractiveRenderContribution),bindContributionProvider(e,SymbolRenderContribution))}),loadCircleModule=(init_esbuild_inject(),!1),circleModule=new ContainerModule(e=>{loadCircleModule||(loadCircleModule=!0,e(DefaultCanvasCircleRender).toSelf().inSingletonScope(),e(CircleRender).to(DefaultCanvasCircleRender).inSingletonScope(),e(GraphicRender).toService(CircleRender),e(CircleRenderContribution).toService(DefaultBaseInteractiveRenderContribution),bindContributionProvider(e,CircleRenderContribution))}),loadTextModule=(init_esbuild_inject(),!1),textModule=new ContainerModule(e=>{loadTextModule||(loadTextModule=!0,e(TextRender).to(DefaultCanvasTextRender).inSingletonScope(),e(GraphicRender).toService(TextRender),e(TextRenderContribution).toService(DefaultBaseInteractiveRenderContribution),bindContributionProvider(e,TextRenderContribution))}),loadPathModule=(init_esbuild_inject(),!1),pathModule=new ContainerModule(e=>{loadPathModule||(loadPathModule=!0,e(DefaultCanvasPathRender).toSelf().inSingletonScope(),e(PathRender).to(DefaultCanvasPathRender).inSingletonScope(),e(GraphicRender).toService(PathRender),e(PathRenderContribution).toService(DefaultBaseInteractiveRenderContribution),bindContributionProvider(e,PathRenderContribution))}),loadPolygonModule=(init_esbuild_inject(),!1),polygonModule=new ContainerModule(e=>{loadPolygonModule||(loadPolygonModule=!0,e(PolygonRender).to(DefaultCanvasPolygonRender).inSingletonScope(),e(GraphicRender).toService(PolygonRender),e(PolygonRenderContribution).toService(DefaultBaseInteractiveRenderContribution),bindContributionProvider(e,PolygonRenderContribution))}),__decorate36=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),DefaultCanvasGlyphRender=class{constructor(){this.numberType=GLYPH_NUMBER_TYPE}drawShape(e,i,r,n,o,a,l,s){o.drawContribution&&e.getSubGraphic().forEach(e=>{var t=o.drawContribution.getRenderContribution(e);t&&t.drawShape&&t.drawShape(e,i,r,n,o,a,l,s)})}draw(e,t,i,r){var n=i[\\\"context\\\"];if(n&&(n.highPerformanceSave(),i.drawContribution)){const o=getTheme(e),a=e.getSubGraphic();a.length&&a.forEach(e=>{i.drawContribution.renderItem(e,i,{theme:o})}),n.highPerformanceRestore()}}},DefaultCanvasGlyphRender=__decorate36([injectable()],DefaultCanvasGlyphRender),loadGlyphModule=!1,glyphModule=new ContainerModule(e=>{loadGlyphModule||(loadGlyphModule=!0,e(GlyphRender).to(DefaultCanvasGlyphRender).inSingletonScope(),e(GraphicRender).toService(GlyphRender))}),__decorate37=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata28=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},DefaultCanvasRichTextRender=class extends BaseRender{constructor(){super(),this.numberType=RICHTEXT_NUMBER_TYPE,this.builtinContributions=[defaultTextBackgroundRenderContribution],this.init()}drawShape(e,t,i,r,n){var o=getTheme(e).richtext,{strokeOpacity:a=o.strokeOpacity,opacity:l=o.opacity,fillOpacity:s=o.fillOpacity,visible:h=o.visible}=e.attribute;e.valid&&h&&(h=fillVisible(l,s,!0),s=fillVisible(l,a,!0),h)&&(t.translate(i,r),this.beforeRenderStep(e,t,i,r,h,s,h,s,o,n),e.getFrameCache().draw(t,this.drawIcon),this.afterRenderStep(e,t,i,r,h,s,h,s,o,n))}drawIcon(e,t,i,r,n){var o=getTheme(e).richtextIcon,{width:a=o.width,height:l=o.height,opacity:s=o.opacity,image:h,backgroundFill:d=o.backgroundFill,backgroundFillOpacity:u=o.backgroundFillOpacity,backgroundStroke:c=o.backgroundStroke,backgroundStrokeOpacity:g=o.backgroundStrokeOpacity,backgroundRadius:o=o.backgroundRadius,margin:p}=e.attribute,{backgroundWidth:f=a,backgroundHeight:m=l}=e.attribute,b=(p&&(i+=e._marginArray[3],r+=e._marginArray[0]),e._hovered&&(p=(f-a)/2,b=(m-l)/2,0===o?(t.beginPath(),t.rect(i-p,r-b,f,m)):(t.beginPath(),createRectPath(t,i-p,r-b,f,m,o)),d&&(t.globalAlpha=u,t.fillStyle=d,t.fill()),c)&&(t.globalAlpha=g,t.strokeStyle=c,t.stroke()),h&&(null==(p=null==e?void 0:e.resources)?void 0:p.get(h)));b&&\\\"success\\\"===b.state&&(t.globalAlpha=s,t.drawImage(b.data,i,r,a,l))}draw(e,t,i){var r=getTheme(e).richtext;this._draw(e,r,!1,i)}},DefaultCanvasRichTextRender=__decorate37([injectable(),__metadata28(\\\"design:paramtypes\\\",[])],DefaultCanvasRichTextRender),loadRichtextModule=!1,richtextModule=new ContainerModule(e=>{loadRichtextModule||(loadRichtextModule=!0,e(RichTextRender).to(DefaultCanvasRichTextRender).inSingletonScope(),e(GraphicRender).toService(RichTextRender))}),loadImageModule=(init_esbuild_inject(),!1),imageModule=new ContainerModule(e=>{loadImageModule||(loadImageModule=!0,e(ImageRender).to(DefaultCanvasImageRender).inSingletonScope(),e(GraphicRender).toService(ImageRender),e(ImageRenderContribution).toService(DefaultBaseInteractiveRenderContribution),bindContributionProvider(e,ImageRenderContribution))}),__decorate38=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),DefaultCanvasRect3dRender=class extends BaseRender{constructor(){super(...arguments),this.type=\\\"rect3d\\\",this.numberType=RECT3D_NUMBER_TYPE}drawShape(t,i,r,n,e,o,a,l){var s=getTheme(t,null==o?void 0:o.theme).rect3d,{fill:h=s.fill,stroke:d=s.stroke,x1:u,y1:c,x:g,y:p,opacity:f=s.opacity,fillOpacity:m=s.fillOpacity,lineWidth:b=s.lineWidth,strokeOpacity:v=s.strokeOpacity,visible:C=s.visible}=t.attribute,{width:y,height:_}=t.attribute,w=null!=(w=this.z)?w:0,m=rectFillVisible(f,m,y=(null!=y?y:u-g)||0,_=(null!=_?_:c-p)||0,h),u=rectStrokeVisible(f,v,y,_),g=runFill(h),c=runStroke(d,b);if(t.valid&&C&&(g||c)&&(m||u||a||l)){p=(e.stage||{})[\\\"light\\\"],f=t.findFace();if(!1!==h){i.setCommonStyle(t,t.attribute,r,n,s);let e=h;\\\"string\\\"!=typeof e&&(e=\\\"black\\\"),this.fill(r,n,w,f,e,i,p,a)}!1!==d&&(i.setStrokeStyle(t,t.attribute,r,n,s),this.stroke(r,n,w,f,i))}}stroke(r,n,o,e,a){const l=e.vertices;e.edges.forEach(e=>{var t=l[e[0]],t={x:r+t[0],y:n+t[1],z:o+t[2]},i=l[e[1]],i={x:r+i[0],y:n+i[1],z:o+i[2]};a.beginPath(),a.moveTo(t.x,t.y,t.z),a.lineTo(i.x,i.y,i.z),a.stroke()})}fill(a,l,s,e,h,d,u,c){const g=ColorStore.Get(h,ColorType.Color255),p=e.vertices,f=p.map(e=>d.view(e[0],e[1],e[2])[2]),m=[];e.polygons.forEach((e,t)=>{m.push({faceIdx:t,polygon:e});var i=e[\\\"polygon\\\"],r=f[i[0]],n=f[i[1]],o=f[i[2]],i=f[i[3]];e.ave_z=r+n+o+i}),m.sort((e,t)=>t.polygon.ave_z-e.polygon.ave_z),m.forEach(e=>{var{polygon:t,normal:i}=e.polygon,r=p[t[0]],n=p[t[1]],o=p[t[2]],t=p[t[3]],r={x:a+r[0],y:l+r[1],z:s+r[2]},n={x:a+n[0],y:l+n[1],z:s+n[2]},o={x:a+o[0],y:l+o[1],z:s+o[2]},t={x:a+t[0],y:l+t[1],z:s+t[2]};d.beginPath(),d.moveTo(r.x,r.y,r.z),d.lineTo(n.x,n.y,n.z),d.lineTo(o.x,o.y,o.z),d.lineTo(t.x,t.y,t.z),d.closePath(),c?c(d,null,null):(d.fillStyle=u?u.computeColor(i,g):h,d.fill())})}draw(e,t,i){var r=getTheme(e).rect;this._draw(e,r,!1,i)}},DefaultCanvasRect3dRender=__decorate38([injectable()],DefaultCanvasRect3dRender),loadRect3dModule=!1,rect3dModule=new ContainerModule(e=>{loadRect3dModule||(loadRect3dModule=!0,e(Rect3DRender).to(DefaultCanvasRect3dRender).inSingletonScope(),e(GraphicRender).toService(Rect3DRender))}),__decorate39=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a});function drawArcPath2(e,t,i,r,n,o,a){var l,s,h,d,u,c,g,{startAngle:p,endAngle:f}=e.getParsedAngle(),m=abs(f-p),b=p<f;let v=!1;return o<a&&(l=o,o=a,a=l),o<=epsilon?t.moveTo(i,r,n):pi2-epsilon<=m?(t.moveTo(i+o*cos(p),r+o*sin(p),n),t.arc(i,r,o,p,f,!b,n),epsilon<a&&(t.moveTo(i+a*cos(f),r+a*sin(f),n),t.arc(i,r,a,f,p,b,n))):(({outerDeltaAngle:l,innerDeltaAngle:m,outerStartAngle:p,outerEndAngle:f,innerEndAngle:s,innerStartAngle:h}=e.getParsePadAngle(p,f)),d=o*cos(p),u=o*sin(p),c=a*cos(s),g=a*sin(s),l<.001?v=!0:(t.moveTo(i+d,r+u,n),t.arc(i,r,o,p,f,!b,n)),!(epsilon<a)||m<.001?(t.lineTo(i+c,r+g,n),v=!0):(t.lineTo(i+c,r+g,n),t.arc(i,r,a,s,h,b,n))),t.closePath(),v}function drawInnerOuterArcPath(e,t,i,r,n,o,a,l){var s,h,d,u,{startAngle:c,endAngle:g}=e.getParsedAngle(),p=abs(g-c),f=c<g;let m=!1;return a<=epsilon?t.moveTo(i,r,n):pi2-epsilon<=p?(t.moveTo(i+a*cos(c),r+a*sin(c),n),t.arc(i,r,a,c,g,!f,n),t.lineTo(i+a*cos(g),r+a*sin(g),o),t.arc(i,r,a,g,c,f,o)):(({innerouterDeltaAngle:p,innerouterStartAngle:c,innerouterEndAngle:g}=l(c,g)),s=a*cos(c),h=a*sin(c),d=a*cos(g),u=a*sin(g),p<.001?m=!0:(t.moveTo(i+s,r+h,n),t.arc(i,r,a,c,g,!f,n),t.lineTo(i+d,r+u,o),t.arc(i,r,a,g,c,f,o))),t.closePath(),m}var DefaultCanvasArc3DRender=class extends BaseRender{constructor(){super(...arguments),this.numberType=ARC3D_NUMBER_TYPE}drawShape(s,e,t,i,r,n,o,a){var l=getTheme(s,null==n?void 0:n.theme).arc,{fill:h=l.fill}=s.attribute,d=this.valid(s,l,o,a);if(d){var{fVisible:d,sVisible:u,doFill:c,doStroke:g}=d,p=null!=(p=this.z)?p:0,{outerPadding:f=l.outerPadding,innerPadding:m=l.innerPadding,height:b=10}=s.attribute,{outerRadius:v=l.outerRadius,innerRadius:C=l.innerRadius}=s.attribute;v+=f,C-=m;const y=ColorStore.Get(h,ColorType.Color255),_=(r.stage||{})[\\\"light\\\"],w=r.hack_pieFace,x={top:p,bottom:p+b},S={top:[0,1,0],bottom:[0,-1,0],outside:[1,0,-1],inside:[1,0,-1]};\\\"bottom\\\"===w||\\\"top\\\"===w?(e.beginPath(),drawArcPath2(s,e,t,i,x[w],v,C),e.setShadowBlendStyle&&e.setShadowBlendStyle(s,s.attribute,l),c&&(o?o(e,s.attribute,l):d&&(e.setCommonStyle(s,s.attribute,t,i,l),e.fillStyle=_?_.computeColor(S[w],y):h,e.fill())),g&&(a?a(e,s.attribute,l):u&&(e.setStrokeStyle(s,s.attribute,t,i,l),e.stroke()))):\\\"outside\\\"!==w&&\\\"inside\\\"!==w||(\\\"inside\\\"===w&&(e.save(),e.beginPath(),e.arc(t,i,C,0,pi2,!0,x.top),e.clip()),e.beginPath(),drawInnerOuterArcPath(s,e,t,i,x.top,x.bottom,\\\"outside\\\"===w?v:C,(e,t)=>{var{outerDeltaAngle:i,innerDeltaAngle:r,outerStartAngle:n,outerEndAngle:o,innerEndAngle:a,innerStartAngle:l}=s.getParsePadAngle(e,t);return\\\"outside\\\"===w?{innerouterDeltaAngle:i,innerouterEndAngle:o,innerouterStartAngle:n}:{innerouterDeltaAngle:r,innerouterEndAngle:a,innerouterStartAngle:l}}),e.setShadowBlendStyle&&e.setShadowBlendStyle(s,s.attribute,l),c&&(o?o(e,s.attribute,l):d&&(e.setCommonStyle(s,s.attribute,t,i,l),e.fillStyle=_?_.computeColor(S[w],y):h,e.fill())),g&&(a?a(e,s.attribute,l):u&&(e.setStrokeStyle(s,s.attribute,t,i,l),e.stroke())),\\\"inside\\\"===w&&e.restore())}}draw(e,t,i,r){var n=getTheme(e,null==r?void 0:r.theme).arc;this._draw(e,n,!1,i,r)}},DefaultCanvasArc3DRender=__decorate39([injectable()],DefaultCanvasArc3DRender),loadArc3dModule=!1,arc3dModule=new ContainerModule(e=>{loadArc3dModule||(loadArc3dModule=!0,e(Arc3dRender).to(DefaultCanvasArc3DRender).inSingletonScope(),e(GraphicRender).toService(Arc3dRender))}),__decorate40=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),DefaultCanvasPyramid3dRender=class extends BaseRender{constructor(){super(...arguments),this.type=\\\"pyramid3d\\\",this.numberType=PYRAMID3D_NUMBER_TYPE}drawShape(t,i,r,n,e,o,a,l){var s=getTheme(t,null==o?void 0:o.theme).polygon,{fill:h=s.fill,stroke:d=s.stroke,face:u=[!0,!0,!0,!0,!0,!0]}=t.attribute,c=null!=(c=this.z)?c:0;if(this.valid(t,s,a,l)){var{light:g,camera:p}=e.stage||{},f=t.findFace();if(!1!==h){i.setCommonStyle(t,t.attribute,r,n,s);let e=h;\\\"string\\\"!=typeof e&&(e=\\\"black\\\"),this.fill(r,n,c,f,u,e,i,g,p,t,s,a)}!1!==d&&(i.setStrokeStyle(t,t.attribute,r,n,s),this.stroke(r,n,c,f,i))}}stroke(r,n,o,e,a){const l=e.vertices;e.edges.forEach(e=>{var t=l[e[0]],i=l[e[1]],t={x:r+t[0],y:n+t[1],z:o+t[2]},i={x:r+i[0],y:n+i[1],z:o+i[2]};a.beginPath(),a.moveTo(t.x,t.y,t.z),a.lineTo(i.x,i.y,i.z),a.stroke()})}fill(a,l,s,e,h,d,u,c,t,g,p,f){const m=ColorStore.Get(d,ColorType.Color255),b=e.vertices,v=b.map(e=>u.view(e[0],e[1],e[2])[2]),C=[];e.polygons.forEach((e,t)=>{var i,r,n,o,a;h[t]&&(C.push({faceIdx:t,polygon:e}),({polygon:a,normal:i}=e),r=v[a[0]],n=v[a[1]],o=v[a[2]],a=v[a[3]],e.ave_z=r+n+o+a)}),C.sort((e,t)=>t.polygon.ave_z-e.polygon.ave_z),C.forEach(e=>{var{polygon:t,normal:i}=e.polygon,r=b[t[0]],n=b[t[1]],o=b[t[2]],t=b[t[3]],r={x:a+r[0],y:l+r[1],z:s+r[2]},n={x:a+n[0],y:l+n[1],z:s+n[2]},o={x:a+o[0],y:l+o[1],z:s+o[2]},t={x:a+t[0],y:l+t[1],z:s+t[2]};u.beginPath(),u.moveTo(r.x,r.y,r.z),u.lineTo(n.x,n.y,n.z),u.lineTo(o.x,o.y,o.z),u.lineTo(t.x,t.y,t.z),u.closePath(),f?f(u,g.attribute,p):(u.fillStyle=c?c.computeColor(i,m):d,u.fill())})}draw(e,t,i){var r=getTheme(e).polygon;this._draw(e,r,!1,i)}},DefaultCanvasPyramid3dRender=__decorate40([injectable()],DefaultCanvasPyramid3dRender),loadPyramid3dModule=!1,pyramid3dModule=new ContainerModule(e=>{loadPyramid3dModule||(loadPyramid3dModule=!0,e(Pyramid3dRender).to(DefaultCanvasPyramid3dRender).inSingletonScope(),e(GraphicRender).toService(Pyramid3dRender))});function registerArcGraphic(){graphicCreator.RegisterGraphicCreator(\\\"arc\\\",createArc)}function registerArc3dGraphic(){graphicCreator.RegisterGraphicCreator(\\\"arc3d\\\",createArc3d)}function registerAreaGraphic(){graphicCreator.RegisterGraphicCreator(\\\"area\\\",createArea)}function registerCircleGraphic(){graphicCreator.RegisterGraphicCreator(\\\"circle\\\",createCircle)}function registerGlyphGraphic(){graphicCreator.RegisterGraphicCreator(\\\"glyph\\\",createGlyph)}function registerGroupGraphic(){graphicCreator.RegisterGraphicCreator(\\\"group\\\",createGroup)}function registerImageGraphic(){graphicCreator.RegisterGraphicCreator(\\\"image\\\",createImage)}function registerLineGraphic(){graphicCreator.RegisterGraphicCreator(\\\"line\\\",createLine)}function registerPathGraphic(){graphicCreator.RegisterGraphicCreator(\\\"path\\\",createPath)}function registerPolygonGraphic(){graphicCreator.RegisterGraphicCreator(\\\"polygon\\\",createPolygon)}function registerPyramid3dGraphic(){graphicCreator.RegisterGraphicCreator(\\\"pyramid3d\\\",createPyramid3d)}function registerRectGraphic(){graphicCreator.RegisterGraphicCreator(\\\"rect\\\",createRect)}function registerRect3dGraphic(){graphicCreator.RegisterGraphicCreator(\\\"rect3d\\\",createRect3d)}function registerRichtextGraphic(){graphicCreator.RegisterGraphicCreator(\\\"richtext\\\",createRichText)}function registerSymbolGraphic(){graphicCreator.RegisterGraphicCreator(\\\"symbol\\\",createSymbol)}function registerTextGraphic(){graphicCreator.RegisterGraphicCreator(\\\"text\\\",createText)}function registerShadowRootGraphic(){graphicCreator.RegisterGraphicCreator(\\\"shadowRoot\\\",createShadowRoot)}function registerWrapTextGraphic(){graphicCreator.RegisterGraphicCreator(\\\"wrapText\\\",createWrapText)}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var REACT_TO_CANOPUS_EVENTS={onPointerDown:\\\"pointerdown\\\",onPointerUp:\\\"pointerup\\\",onPointerUpOutside:\\\"pointerupoutside\\\",onPointerTap:\\\"pointertap\\\",onPointerOver:\\\"pointerover\\\",onPointerMove:\\\"pointermove\\\",onPointerEnter:\\\"pointerenter\\\",onPointerLeave:\\\"pointerleave\\\",onPointerOut:\\\"pointerout\\\",onMouseDown:\\\"mousedown\\\",onMouseUp:\\\"mouseup\\\",onMouseUpOutside:\\\"mouseupoutside\\\",onMouseMove:\\\"mousemove\\\",onMouseOver:\\\"mouseover\\\",onMouseOut:\\\"mouseout\\\",onMouseEnter:\\\"mouseenter\\\",onMouseLeave:\\\"mouseleave\\\",onPinch:\\\"pinch\\\",onPinchStart:\\\"pinchstart\\\",onPinchEnd:\\\"pinchend\\\",onPan:\\\"pan\\\",onPanStart:\\\"panstart\\\",onPanEnd:\\\"panend\\\",onDrag:\\\"drag\\\",onDragStart:\\\"dragstart\\\",onDragEnter:\\\"dragenter\\\",onDragLeave:\\\"dragleave\\\",onDragOver:\\\"dragover\\\",onDragEnd:\\\"dragend\\\",onRightDown:\\\"rightdown\\\",onRightUp:\\\"rightup\\\",onRightUpOutside:\\\"rightupoutside\\\",onTouchStart:\\\"touchstart\\\",onTouchEnd:\\\"touchend\\\",onTouchEndOutside:\\\"touchendoutside\\\",onTouchMove:\\\"touchmove\\\",onTouchCancel:\\\"touchcancel\\\",onPress:\\\"press\\\",onPressUp:\\\"pressup\\\",onPressEnd:\\\"pressend\\\",onSwipe:\\\"swipe\\\",onDrop:\\\"drop\\\",onWeel:\\\"wheel\\\",onClick:\\\"click\\\",onDblClick:\\\"dblclick\\\"},REACT_TO_CANOPUS_EVENTS_LIST=Object.keys(REACT_TO_CANOPUS_EVENTS);function VRichText(e){return graphicCreator.richtext(e?e.attribute:{})}VRichText.Text=function(e){return Object.assign({type:\\\"rich/text\\\"},e)},VRichText.Image=function(e){return Object.assign({type:\\\"rich/image\\\"},e)},init_esbuild_inject(),init_esbuild_inject();var calcDirection=(e,t)=>{var i=t.x-e.x,r=t.y-e.y;return Math.abs(i)>Math.abs(r)?0<i?\\\"right\\\":\\\"left\\\":0<r?\\\"down\\\":\\\"up\\\"},calcDistance=(e,t)=>{var i=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return Math.sqrt(i*i+r*r)},getCenter=e=>{var t=e.length;if(1===t)return{x:Math.round(e[0].x),y:Math.round(e[0].y)};let i=0,r=0,n=0;for(;n<t;)i+=e[n].x,r+=e[n].y,n++;return{x:Math.round(i/t),y:Math.round(r/t)}},Gesture=class extends import_eventemitter3[\\\"default\\\"]{constructor(e,t={}){var i;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=e=>{this.reset(),this.startTime=clock.now();const{cachedEvents:t,startPoints:i}=this;e&&t.push(e.clone()),i.length=t.length;for(let o=0;o<t.length;o++){var{x:r,y:n}=t[o];i[o]={x:r,y:n}}if(1!==i.length)this.startDistance=calcDistance(i[0],i[1]),this.center=getCenter([i[0],i[1]]);else{const a=t[0];this.pressTimeout=setTimeout(()=>{a.direction=\\\"none\\\",a.deltaX=0,a.deltaY=0,a.points=i,this.triggerStartEvent(\\\"press\\\",a),this.triggerEvent(\\\"press\\\",a),this.eventType=\\\"press\\\",this.direction=\\\"none\\\"},this.config.press.time)}},this.onMove=i=>{this.clearPressTimeout();var{startPoints:r,cachedEvents:n}=this;if(r.length){var o=i.clone(),{x:a,y:l,pointerId:s}=o;for(let e=0,t=n.length;e<t;e++)if(s===n[e].pointerId){n[e]=o;break}var h={x:a,y:l},d=n.map(e=>({x:e.x,y:e.y})),u=clock.now();this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=u,this.lastMovePoint=h,1===r.length?(a=a-(u=r[0]).x,r=l-u.y,l=this.direction||calcDirection(u,h),this.direction=l,u=this.getEventType(h),o.direction=l,o.deltaX=a,o.deltaY=r,o.points=d,this.triggerStartEvent(u,o),this.triggerEvent(u,o)):(h=this[\\\"startDistance\\\"],l=calcDistance(d[0],d[1]),o.scale=l/h,o.center=this.center,o.points=d,this.triggerStartEvent(\\\"pinch\\\",o),this.triggerEvent(\\\"pinch\\\",o))}},this.onEnd=e=>{var t,i,r,n,o=e.clone(),{cachedEvents:a,startPoints:l}=this,s=a.map(e=>({x:e.x,y:e.y}));o.points=s,this.triggerEndEvent(o),1===a.length&&((s=clock.now())-(n=this.lastMoveTime)<100&&0<(n=n-(this.prevMoveTime||this.startTime))&&(t=this.prevMovePoint||l[0],i=this.lastMovePoint||l[0],(n=(r=calcDistance(t,i))/n)>this.config.swipe.velocity)&&r>this.config.swipe.threshold&&(o.velocity=n,o.direction=calcDirection(t,i),this.triggerEvent(\\\"swipe\\\",o)),s-this.lastTapTime<this.config.tap.interval&&e.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=s,this.lastTapTarget=e.target,1===this.tapCount?this.triggerEvent(\\\"tap\\\",o):2===this.tapCount&&(this.triggerEvent(\\\"doubletap\\\",o),this.tapCount=0));for(let h=0,d=a.length;h<d;h++)if(a[h].pointerId===o.pointerId){a.splice(h,1),l.splice(h,1);break}this.reset(),0<a.length&&this.onStart()},this.element=e,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:null!=(i=null==(i=null==t?void 0:t.press)?void 0:i.time)?i:251,threshold:null!=(i=null==(i=null==t?void 0:t.press)?void 0:i.threshold)?i:9},swipe:{threshold:null!=(i=null==(i=null==t?void 0:t.swipe)?void 0:i.threshold)?i:10,velocity:null!=(i=null==(i=null==t?void 0:t.swipe)?void 0:i.velocity)?i:.3},tap:{interval:null!=(i=null==(i=null==t?void 0:t.tap)?void 0:i.interval)?i:300}},this.initEvents()}initEvents(){var e=this[\\\"element\\\"];e&&(e.addEventListener(\\\"pointerdown\\\",this.onStart),e.addEventListener(\\\"pointermove\\\",this.onMove),e.addEventListener(\\\"pointerup\\\",this.onEnd),e.addEventListener(\\\"pointerupoutside\\\",this.onEnd))}removeEvents(){var e=this[\\\"element\\\"];e&&(e.removeEventListener(\\\"pointerdown\\\",this.onStart),e.removeEventListener(\\\"pointermove\\\",this.onMove),e.removeEventListener(\\\"pointerup\\\",this.onEnd),e.removeEventListener(\\\"pointerupoutside\\\",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(e){var{eventType:t,startTime:i,startPoints:r}=this;return t||(t=clock.now()-i>this.config.press.time&&calcDistance(r[0],e)<this.config.press.threshold?\\\"press\\\":\\\"pan\\\",this.eventType=t)}enable(e){this.processEvent[e]=!0}isProcess(e){return this.processEvent[e]}pushEvent(e,t){var i=this[\\\"emitThrottles\\\"],r={type:e,ev:t};for(let n=0,o=i.length;n<o;n++)if(i[n].type===e)return void i.splice(n,1,r);i.push(r)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(e,t){this.pushEvent(e,t);const{throttleTimer:i,emitThrottles:n}=this;i||(this.throttleTimer=application.global.getRequestAnimationFrame()(()=>{for(let i=0,r=n.length;i<r;i++){var{type:e,ev:t}=n[i];this.emitEvent(e,t)}this.throttleTimer=0,this.emitThrottles.length=0}))}triggerStartEvent(e,t){this.isProcess(e)||(this.enable(e),this.triggerEvent(e+\\\"start\\\",t))}triggerEndEvent(t){const i=this.processEvent;Object.keys(i).forEach(e=>{this.triggerEvent(e+\\\"end\\\",t),\\\"press\\\"===e&&this.triggerEvent(e+\\\"up\\\",t),delete i[e]})}emitEvent(i,r){var n=this.element._events[WILDCARD];if(n)if(\\\"fn\\\"in n)n.fn.call(n.context,r,i);else for(let e=0,t=n.length;e<t&&!r.propagationImmediatelyStopped;e++)n[e].fn.call(n[e].context,r,i);this.emit(i,r)}},__decorate41=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata29=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},outP=[0,0,0],addArcToBezierPath2=(e,t,i,r,n,o,a,l)=>{if(l)for(;t<i;)i-=pi2;else for(;i<t;)i+=pi2;var s=pi/3*(t<i?1:-1);let h=t,d=h;for(;d!==i;){d=0<s?Math.min(d+s,i):Math.max(d+s,i);var u=Math.abs(d-h),u=4*Math.tan(u/4)/3,c=d<h?-1:1,g=Math.cos(h),p=Math.sin(h),f=Math.cos(d),m=Math.sin(d),b=f*o+r,v=m*a+n,C=o*u*c,u=a*u*c;e.push([g*o+r-C*p,p*a+n+u*g,b+C*m,v-u*f,b,v]),h=d}},BrowserContext2d=class{set fillStyle(e){this.nativeContext.fillStyle=e}get fillStyle(){return this.nativeContext.fillStyle}set font(e){this.nativeContext.font=e}get font(){return this.nativeContext.font}set globalAlpha(e){this.nativeContext.globalAlpha=e}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(e){this.nativeContext.lineCap=e}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(e){this.nativeContext.lineDashOffset=e}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(e){this.nativeContext.lineJoin=e}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(e){this.nativeContext.lineWidth=e}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(e){this.nativeContext.miterLimit=e}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(e){this.nativeContext.shadowBlur=e}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(e){this.nativeContext.shadowColor=e}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(e){this.nativeContext.shadowOffsetX=e}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(e){this.nativeContext.shadowOffsetY=e}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(e){this.nativeContext.strokeStyle=e}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(e){this.nativeContext.textAlign=e}get textAlign(){return this.nativeContext.textAlign}set textBaseline(e){this.nativeContext.textBaseline=e}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(e){e!==!!this._inuse&&((this._inuse=e)?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}constructor(e,t){this.fillAttributes=Object.assign(Object.assign({},DefaultFillStyle),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},DefaultStrokeStyle),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},DefaultTextStyle),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;var i=e.nativeCanvas.getContext(\\\"2d\\\");if(!i)throw new Error(\\\"发生错误，获取2d上下文失败\\\");this.nativeContext=i,this.canvas=e,this.matrix=new Matrix(1,0,0,1,0,0),this.stack=[],this.dpr=t,this.applyedMatrix=new Matrix(1,0,0,1,0,0),this._clearMatrix=new Matrix(1,0,0,1,0,0)}reset(){this.stack.length&&Logger.getInstance().warn(\\\"可能存在bug，matrix没有清空\\\"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new Matrix(1,0,0,1,0,0),this.stack.length=0,this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(e=!1){!e&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(e){return matrixAllocate.allocateByObj(e)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),0<this.stack.length&&(matrixAllocate.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0))}highPerformanceRestore(){0<this.stack.length&&(matrixAllocate.free(this.matrix),this.matrix=this.stack.pop())}rotate(e,t=!0){this.matrix.rotate(e),t&&this.setTransformForCurrent()}save(){var e=this.cloneMatrix(this.matrix);this.stack.push(e),this.nativeContext.save()}highPerformanceSave(){var e=this.cloneMatrix(this.matrix);this.stack.push(e)}scale(e,t,i=!0){this.matrix.scale(e,t),i&&this.setTransformForCurrent()}setScale(e,t,i=!0){this.matrix.setScale(e,t),i&&this.setTransformForCurrent()}scalePoint(e,t,i,r,n=!0){this.translate(i,r,!1),this.scale(e,t,!1),this.translate(-i,-r,!1),n&&this.setTransformForCurrent()}setTransform(e,t,i,r,n,o,a=!0,l=this.dpr){this.matrix.setValue(l*e,l*t,l*i,l*r,l*n,l*o),a&&this.setTransformForCurrent()}setTransformFromMatrix(e,t=!0,i=this.dpr){this.matrix.setValue(e.a*i,e.b*i,e.c*i,e.d*i,e.e*i,e.f*i),t&&this.setTransformForCurrent()}resetTransform(e=!0,t=this.dpr){this.setTransform(t,0,0,t,0,0),e&&this.setTransformForCurrent()}transform(e,t,i,r,n,o,a=!0){this.matrix.multiply(e,t,i,r,n,o),a&&this.setTransformForCurrent()}transformFromMatrix(e,t){this.matrix.multiply(e.a,e.b,e.c,e.d,e.e,e.f),t&&this.setTransformForCurrent()}translate(e,t,i=!0){this.matrix.translate(e,t),i&&this.setTransformForCurrent()}rotateDegrees(e,t=!0){var i=e*Math.PI/180;this.rotate(i,t)}rotateAbout(e,t,i,r=!0){this.translate(t,i,!1),this.rotate(e,!1),this.translate(-t,-i,!1),r&&this.setTransformForCurrent()}rotateDegreesAbout(e,t,i,r=!0){this.translate(t,i,!1),this.rotateDegrees(e,!1),this.translate(-t,-i,!1),r&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(e,t){e?\\\"string\\\"==typeof e?this.nativeContext.clip(e):this.nativeContext.clip(e,t):this.nativeContext.clip()}arc(t,i,r,n,o,a,l){if(l=l||0,this.camera){var s=[];addArcToBezierPath2(s,n,o,t,i,r,r,a);for(let e=0;e<s.length;++e){var h=s[e];this.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5],l)}}else this.nativeContext.arc(t,i,r,n,o,a)}arcTo(e,t,i,r,n){this.nativeContext.arcTo(e,t,i,r,n)}bezierCurveTo(i,r,n,o,a,l,s){if(s=s||0,this.camera){let e=s,t=s;this.modelMatrix&&(transformMat4(outP,[i,r,s],this.modelMatrix),i=outP[0],r=outP[1],e=outP[2],transformMat4(outP,[n,o,s],this.modelMatrix),n=outP[0],o=outP[1],t=outP[2],transformMat4(outP,[a,l,s],this.modelMatrix),a=outP[0],l=outP[1],s=outP[2]);var h=this.camera.vp(a,l,s);a=h.x,l=h.y,i=(h=this.camera.vp(i,r,e)).x,r=h.y,n=(h=this.camera.vp(n,o,t)).x,o=h.y}this.nativeContext.bezierCurveTo(i,r,n,o,a,l)}closePath(){this.nativeContext.closePath()}ellipse(e,t,i,r,n,o,a,l){null==l?this.nativeContext.ellipse(e,t,i,r,n,o,a):this.nativeContext.ellipse(e,t,i,r,n,o,a,l)}lineTo(e,t,i){var r;i=i||0,this.camera&&(this.modelMatrix&&(transformMat4(outP,[e,t,i],this.modelMatrix),e=outP[0],t=outP[1],i=outP[2]),e=(r=this.camera.vp(e,t,i)).x,t=r.y),this.nativeContext.lineTo(e,t)}moveTo(e,t,i){var r;i=i||0,this.camera&&(this.modelMatrix&&(transformMat4(outP,[e,t,i],this.modelMatrix),e=outP[0],t=outP[1],i=outP[2]),e=(r=this.camera.vp(e,t,i)).x,t=r.y),this.nativeContext.moveTo(e,t)}quadraticCurveTo(t,i,r,n,o){if(o=o||0,this.camera){let e=o;this.modelMatrix&&(transformMat4(outP,[t,i,o],this.modelMatrix),t=outP[0],i=outP[1],e=outP[2],transformMat4(outP,[r,n,o],this.modelMatrix),r=outP[0],n=outP[1],o=outP[2]);var a=this.camera.vp(r,n,o);r=a.x,n=a.y,t=(a=this.camera.vp(t,i,e)).x,i=a.y}this.nativeContext.quadraticCurveTo(t,i,r,n)}rect(e,t,i,r,n){n=n||0,this.camera?(this.moveTo(e,t,n),this.lineTo(e+i,t,n),this.lineTo(e+i,t+r,n),this.lineTo(e,t+r,n),this.closePath()):this.nativeContext.rect(e,t,i,r)}createImageData(){var e=arguments;return 2===e.length?this.nativeContext.createImageData(e[0],e[1]):1===e.length?this.nativeContext.createImageData(e[0]):null}createLinearGradient(e,t,i,r){return this.nativeContext.createLinearGradient(e,t,i,r)}createPattern(e,t){return 0===e.width||0===e.height?null:this.nativeContext.createPattern(e,t)}createRadialGradient(e,t,i,r,n,o){return this.nativeContext.createRadialGradient(e,t,i,r,n,o)}createConicGradient(r,n,o,a){let l,s=!1;const h=this;return{stops:[],addColorStop(e,t){this.stops.push([e,t]),s=!0},GetPattern(e,t,i){return s&&(i=i||a-o,l=createConicalGradient(h,this.stops,r,n,i,o,a,e,t),s=!1),l}}}fill(e,t){this.disableFill||(e?this.nativeContext.fill(e):this.nativeContext.fill())}fillRect(e,t,i,r){this.nativeContext.fillRect(e,t,i,r)}clearRect(e,t,i,r){this.nativeContext.clearRect(e,t,i,r)}project(e,t,i){var r;return i=i||0,this.camera&&(this.modelMatrix&&(transformMat4(outP,[e,t,i],this.modelMatrix),e=outP[0],t=outP[1],i=outP[2]),e=(r=this.camera.vp(e,t,i)).x,t=r.y),{x:e,y:t}}view(e,t,i){return i=i||0,this.camera?(this.modelMatrix&&(transformMat4(outP,[e,t,i],this.modelMatrix),e=outP[0],t=outP[1],i=outP[2]),this.camera.view(e,t,i)):[e,t,i]}fillText(e,t,i,r){var n;r=r||0,this.camera&&(this.modelMatrix&&(transformMat4(outP,[t,i,r],this.modelMatrix),t=outP[0],i=outP[1],r=outP[2]),t=(n=this.camera.vp(t,i,r)).x,i=n.y),this.nativeContext.fillText(e,t,i)}getImageData(e,t,i,r){return this.nativeContext.getImageData(e,t,i,r)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(e,t){return this.nativeContext.isPointInPath(e,t)}isPointInStroke(e,t){return this.nativeContext.isPointInStroke(e,t)}measureText(e,t=application.global.measureTextMethod){if(!t||\\\"native\\\"===t)return this.nativeContext.measureText(e);this.mathTextMeasure||(this.mathTextMeasure=application.graphicUtil.createTextMeasureInstance({},{},()=>this.canvas.nativeCanvas));var i=null!=(i=this.fontFamily)?i:DefaultTextStyle.fontFamily,r=null!=(r=this.fontSize)?r:DefaultTextStyle.fontSize;return this.mathTextMeasure.textSpec.fontFamily===i&&this.mathTextMeasure.textSpec.fontSize===r||(this.mathTextMeasure.textSpec.fontFamily=i,this.mathTextMeasure.textSpec.fontSize=r,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(e,t)}putImageData(e,t,i){this.nativeContext.putImageData(e,t,i)}setLineDash(e){var t=arguments,i=this.nativeContext;this.nativeContext.setLineDash?i.setLineDash(t[0]):\\\"mozDash\\\"in i?i.mozDash=t[0]:\\\"webkitLineDash\\\"in i&&(i.webkitLineDash=t[0])}stroke(e){this.disableStroke||(e?this.nativeContext.stroke(e):this.nativeContext.stroke())}strokeRect(e,t,i,r){this.nativeContext.strokeRect(e,t,i,r)}strokeText(e,t,i,r){var n;r=r||0,this.camera&&(this.modelMatrix&&(transformMat4(outP,[t,i,r],this.modelMatrix),t=outP[0],i=outP[1],r=outP[2]),t=(n=this.camera.vp(t,i,r)).x,i=n.y),this.nativeContext.strokeText(e,t,i)}drawImage(){var e=this.nativeContext,t=arguments;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}setCommonStyle(e,t,i,r,n){if(Array.isArray(n)){if(n.length<=1)return this._setCommonStyle(e,t,i,r,n[0]);const o=Object.create(n[0]);return n.forEach((e,t)=>{0!==t&&Object.assign(o,e)}),this._setCommonStyle(e,t,i,r,o)}return this._setCommonStyle(e,t,i,r,n)}_setCommonStyle(e,t,i,r,n){var o=this.nativeContext,{fillOpacity:a=n.fillOpacity,opacity:l=n.opacity,fill:s=n.fill}=(n=n||this.fillAttributes,t);1e-12<a&&1e-12<l?(o.globalAlpha=a*l,o.fillStyle=createColor(this,s,e,i,r)):o.globalAlpha=a*l}setShadowBlendStyle(e,t,i){if(Array.isArray(i)){if(i.length<=1)return this._setShadowBlendStyle(e,i[0]);const r=Object.create(i[0]);return i.forEach((e,t)=>{0!==t&&Object.assign(r,e)}),this._setShadowBlendStyle(e,t,r)}return this._setShadowBlendStyle(e,t,i)}_setShadowBlendStyle(e,t,i){var r=this.nativeContext,{opacity:n=i.opacity,shadowBlur:o=i.shadowBlur,shadowColor:a=i.shadowColor,shadowOffsetX:l=i.shadowOffsetX,shadowOffsetY:s=i.shadowOffsetY,blur:h=i.blur,globalCompositeOperation:d=i.globalCompositeOperation}=(i=i||this.fillAttributes,t);n<=1e-12||(o||l||s?(r.shadowBlur=o*this.dpr,r.shadowColor=a,r.shadowOffsetX=l*this.dpr,r.shadowOffsetY=s*this.dpr,this._clearShadowStyle=!0):this._clearShadowStyle&&(r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0),h?(r.filter=`blur(${h}px)`,this._clearFilterStyle=!0):this._clearFilterStyle&&(r.filter=\\\"blur(0px)\\\",this._clearFilterStyle=!1),d?(r.globalCompositeOperation=d,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(r.globalCompositeOperation=\\\"source-over\\\",this._clearGlobalCompositeOperationStyle=!1))}setStrokeStyle(e,t,i,r,n){if(Array.isArray(n)){if(n.length<=1)return this._setStrokeStyle(e,t,i,r,n[0]);const o=Object.create(n[0]);return n.forEach((e,t)=>{0!==t&&Object.assign(o,e)}),this._setStrokeStyle(e,t,i,r,o)}return this._setStrokeStyle(e,t,i,r,n)}_setStrokeStyle(e,t,i,r,n){var o,a,l,s,h,d,u=this.nativeContext,{strokeOpacity:c=n.strokeOpacity,opacity:g=n.opacity}=(n=n||this.strokeAttributes,t);1e-12<c&&1e-12<g&&(({lineWidth:o=n.lineWidth,stroke:a=n.stroke,lineJoin:l=n.lineJoin,lineDash:s=n.lineDash,lineCap:h=n.lineCap,miterLimit:d=n.miterLimit}=t),u.globalAlpha=c*g,u.lineWidth=getScaledStroke(this,o,this.dpr),u.strokeStyle=createColor(this,a,e,i,r),u.lineJoin=l,u.setLineDash(s),u.lineCap=h,u.miterLimit=d)}setTextStyleWithoutAlignBaseline(e,t,i){var r=this.nativeContext,{scaleIn3d:n=t.scaleIn3d}=(t=t||this.textAttributes,e),{fontFamily:n=t.fontFamily,fontSize:o=t.fontSize}=(e.font?r.font=e.font:r.font=getContextFont2(e,t,n&&this.camera&&this.camera.getProjectionScale(i)),e);this.fontFamily=n,this.fontSize=o,r.textAlign=\\\"left\\\",r.textBaseline=\\\"alphabetic\\\"}setTextStyle(e,t,i){var r=this.nativeContext,{fontFamily:n=t.fontFamily,fontSize:o=t.fontSize}=(t=t||this.textAttributes,e.font?r.font=e.font:r.font=getContextFont2(e,t,this.camera&&this.camera.getProjectionScale(i)),e);this.fontFamily=n,this.fontSize=o,r.textAlign=null!=(n=e.textAlign)?n:t.textAlign,r.textBaseline=null!=(o=e.textBaseline)?o:t.textBaseline}draw(){}clearMatrix(e=!0,t=this.dpr){this.setTransformFromMatrix(this._clearMatrix,e,t)}setClearMatrix(e,t,i,r,n,o){this._clearMatrix.setValue(e,t,i,r,n,o)}onlyTranslate(e=this.dpr){return this.matrix.a===e&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===e}release(){this.stack.forEach(e=>matrixAllocate.free(e)),this.stack.length=0}},__decorate42=(BrowserContext2d.env=\\\"browser\\\",BrowserContext2d=__decorate41([injectable(),__metadata29(\\\"design:paramtypes\\\",[Object,Number])],BrowserContext2d),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata30=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},BrowserCanvas=class extends BaseCanvas{constructor(e){super(e)}init(e){var t,i=e[\\\"container\\\"];\\\"string\\\"==typeof i?(t=application.global.getElementById(i))&&(this._container=t):this._container=i,this._context=new BrowserContext2d(this,this._dpr),this.initStyle()}initStyle(){var e;this.controled&&(e=this[\\\"nativeCanvas\\\"],e.width=this._pixelWidth,e.height=this._pixelHeight,e.style&&this.setCanvasStyle(e,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(e),this.visiable||this.hide())}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display=\\\"none\\\")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display=\\\"block\\\")}applyPosition(){var e=this._nativeCanvas;e.style.position=\\\"absolute\\\",e.style.top=this._y+\\\"px\\\",e.style.left=this._x+\\\"px\\\"}resetStyle(e){var t,i,r,n,o,a;this.controled&&(({width:t=this._displayWidth,height:i=this._displayHeight,dpr:r=this._dpr,x:n=this._x,y:o=this._y}=e),a=this[\\\"nativeCanvas\\\"],a.width=t*r,a.height=i*r,a.style&&this.setCanvasStyle(a,n,o,t,i),e.id&&(a.id=e.id),this.visiable||this.hide())}setCanvasStyle(e,t,i,r,n){this.controled&&(e.style.width=r+\\\"px\\\",e.style.height=n+\\\"px\\\")}toDataURL(e,t){return\\\"image/jpeg\\\"!==e&&\\\"image/png\\\"===e?this._nativeCanvas.toDataURL(e):this._nativeCanvas.toDataURL(e,t)}resize(e,t){this.controled&&(this._pixelWidth=e*this._dpr,this._pixelHeight=t*this._dpr,this._displayWidth=e,this._displayHeight=t,this._nativeCanvas.style&&(this._nativeCanvas.style.width=e+\\\"px\\\",this._nativeCanvas.style.height=t+\\\"px\\\"),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};function createModule(t,i){return new ContainerModule(e=>{e(CanvasFactory).toDynamicValue(()=>e=>new t(e)).whenTargetNamed(t.env),e(Context2dFactory).toDynamicValue(()=>(e,t)=>new i(e,t)).whenTargetNamed(i.env)})}BrowserCanvas.env=\\\"browser\\\",BrowserCanvas=__decorate42([injectable(),__metadata30(\\\"design:paramtypes\\\",[Object])],BrowserCanvas),init_esbuild_inject();var BrowserWindowHandlerContribution_1,browserCanvasModule=createModule(BrowserCanvas,BrowserContext2d),MathPickerContribution=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),Symbol[\\\"for\\\"](\\\"MathPickerContribution\\\")),MathArcPicker=Symbol[\\\"for\\\"](\\\"MathArcPicker\\\"),MathAreaPicker=Symbol[\\\"for\\\"](\\\"MathAreaPicker\\\"),MathCirclePicker=Symbol[\\\"for\\\"](\\\"MathCirclePicker\\\"),MathImagePicker=Symbol[\\\"for\\\"](\\\"MathImagePicker\\\"),MathLinePicker=Symbol[\\\"for\\\"](\\\"MathLinePicker\\\"),MathPathPicker=Symbol[\\\"for\\\"](\\\"MathPathPicker\\\"),MathRectPicker=Symbol[\\\"for\\\"](\\\"MathRectPicker\\\"),MathSymbolPicker=Symbol[\\\"for\\\"](\\\"MathSymbolPicker\\\"),MathTextPicker=Symbol[\\\"for\\\"](\\\"MathTextPicker\\\"),MathPolygonPicker=Symbol[\\\"for\\\"](\\\"MathPolygonPicker\\\"),MathGlyphPicker=Symbol[\\\"for\\\"](\\\"MathGlyphPicker\\\"),CanvasArcPicker=Symbol[\\\"for\\\"](\\\"CanvasArcPicker\\\"),CanvasArc3dPicker=Symbol[\\\"for\\\"](\\\"CanvasArc3dPicker\\\"),CanvasAreaPicker=Symbol[\\\"for\\\"](\\\"CanvasAreaPicker\\\"),CanvasCirclePicker=Symbol[\\\"for\\\"](\\\"CanvasCirclePicker\\\"),CanvasImagePicker=Symbol[\\\"for\\\"](\\\"CanvasImagePicker\\\"),CanvasLinePicker=Symbol[\\\"for\\\"](\\\"CanvasLinePicker\\\"),CanvasPathPicker=Symbol[\\\"for\\\"](\\\"CanvasPathPicker\\\"),CanvasRectPicker=Symbol[\\\"for\\\"](\\\"CanvasRectPicker\\\"),CanvasRect3dPicker=Symbol[\\\"for\\\"](\\\"CanvasRect3dPicker\\\"),CanvasSymbolPicker=Symbol[\\\"for\\\"](\\\"CanvasSymbolPicker\\\"),CanvasTextPicker=Symbol[\\\"for\\\"](\\\"CanvasTextPicker\\\"),CanvasPolygonPicker=Symbol[\\\"for\\\"](\\\"CanvasPolygonPicker\\\"),CanvasPyramid3dPicker=Symbol[\\\"for\\\"](\\\"CanvasPyramid3dPicker\\\"),CanvasRichTextPicker=Symbol[\\\"for\\\"](\\\"CanvasRichTextPicker\\\"),CanvasGlyphPicker=Symbol[\\\"for\\\"](\\\"CanvasGlyphPicker\\\"),CanvasGroupPicker=Symbol[\\\"for\\\"](\\\"CanvasGroupPicker\\\"),CanvasPickerContribution=Symbol[\\\"for\\\"](\\\"CanvasPickerContribution\\\"),__decorate43=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata31=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param20=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasPickerService=class extends DefaultPickService{constructor(e,t,i){super(i),this.contributions=e,this.drawContribution=t,this.pickItemInterceptorContributions=i,this.global.hooks.onSetEnv.tap(\\\"canvas-picker-service\\\",(e,t,i)=>{this.configure(i,t)}),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach(e=>{this.pickerMap.set(e.numberType,e)}),super._init()}configure(e,t){this.pickCanvas=canvasAllocate.shareCanvas(),this.pickContext=this.pickCanvas.getContext(\\\"2d\\\")}pickItem(t,i,r,n){if(!1===t.attribute.pickable)return null;if(this.InterceptorContributions.length)for(let e=0;e<this.InterceptorContributions.length;e++){var o=this.InterceptorContributions[e];if(o.beforePickItem){o=o.beforePickItem(t,this,i,n,{parentMatrix:r});if(o)return o}}var a=this.pickerMap.get(t.numberType);if(!a)return null;var a=a.contains(t,i,n)?t:null,e={graphic:a};if(!a&&this.InterceptorContributions.length)for(let e=0;e<this.InterceptorContributions.length;e++){var l=this.InterceptorContributions[e];if(l.afterPickItem){l=l.afterPickItem(t,this,i,n,{parentMatrix:r});if(l)return l}}return e}},DefaultCanvasPickerService=__decorate43([injectable(),__param20(0,inject(ContributionProvider)),__param20(0,named(CanvasPickerContribution)),__param20(1,inject(DrawContribution)),__param20(2,inject(ContributionProvider)),__param20(2,named(PickItemInterceptor)),__metadata31(\\\"design:paramtypes\\\",[Object,Object,Object])],DefaultCanvasPickerService),__decorate44=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),DefaultCanvasGroupPicker=class{constructor(){this.type=\\\"group\\\",this.numberType=GROUP_NUMBER_TYPE}contains(e,t,i){return!1}},DefaultCanvasGroupPicker=__decorate44([injectable()],DefaultCanvasGroupPicker),m=new ContainerModule((e,t,i,r)=>{m.__vloaded||(m.__vloaded=!0,e(CanvasGroupPicker).to(DefaultCanvasGroupPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasGroupPicker),bindContributionProvider(e,CanvasPickerContribution))}),module_default2=(m.__vloaded=!1,m),canvasPickerModule=new ContainerModule((e,t,i,r)=>{i(DefaultCanvasPickerService)||e(DefaultCanvasPickerService).toSelf().inSingletonScope(),(i(PickerService)?r:e)(PickerService).toService(DefaultCanvasPickerService)});function loadCanvasPicker(e){e.load(module_default2),e.load(canvasPickerModule)}init_esbuild_inject();var __decorate45=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata32=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},BrowserWindowHandlerContribution=BrowserWindowHandlerContribution_1=class extends BaseWindowHandlerContribution{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return BrowserWindowHandlerContribution_1.idprefix+\\\"_\\\"+BrowserWindowHandlerContribution_1.prefix_count++}constructor(){super(),this.type=\\\"browser\\\",this._canvasIsIntersecting=!0,this.global=application.global,this.viewBox=new AABBBounds,this.modelMatrix=new Matrix(1,0,0,1,0,0)}getTitle(){return this.canvas.id&&this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(e){e.canvas?this.createWindowByCanvas(e):this.createWindowByConfig(e),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch(err){console.error(\\\"发生错误，该环境不存在IntersectionObserver\\\")}}isElementVisible(e){var t=e.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight;return!(t.right<0||t.bottom<0||t.left>i||t.top>r)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);var e=new IntersectionObserver((e,t)=>{e.forEach(e=>{this._canvasIsIntersecting!==e.isIntersecting?(this._canvasIsIntersecting=e.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(e.isIntersecting)):this._canvasIsIntersecting=e.isIntersecting})});e&&e.observe(this.canvas.nativeCanvas)}createWindowByConfig(e){var t=this.global.createCanvas({width:e.width,height:e.height});let i;if(!(i=\\\"string\\\"==typeof e.container?this.global.getElementById(e.container):e.container||this.global.getRootElement()))throw new Error(\\\"发生错误，containerId可能传入有误\\\");e.offscreen?i=null:i.appendChild(t);t={width:e.width,height:e.height,dpr:e.dpr,nativeCanvas:t,container:i,id:BrowserWindowHandlerContribution_1.GenerateCanvasId(),canvasControled:!0};this.canvas=new BrowserCanvas(t)}createWindowByCanvas(e){var t;let i;if(\\\"string\\\"==typeof e.canvas){if(!(i=this.global.getElementById(e.canvas)))throw new Error(\\\"canvasId 参数不正确，请确认canvas存在并插入dom\\\")}else i=e.canvas;if(!i)throw new Error(\\\"发生错误，传入的canvas不正确\\\");let r=e.width,n=e.height,o=(null!=r&&null!=n&&e.canvasControled||(t=i.getBoundingClientRect(),r=t.width,n=t.height),e.dpr);null==o&&(o=null!=(t=i.getContext(\\\"2d\\\").pixelRatio)?t:i.width/r),this.canvas=new BrowserCanvas({width:r,height:n,dpr:o,nativeCanvas:i,canvasControled:e.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(e,t){this.canvas.resize(e,t)}setDpr(e){this.canvas.dpr=e}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(e,t,i){return this.canvas.nativeCanvas.addEventListener(e,t,i)}removeEventListener(e,t,i){return this.canvas.nativeCanvas.removeEventListener(e,t,i)}dispatchEvent(e){return this.canvas.nativeCanvas.dispatchEvent(e)}getStyle(){var e;return null!=(e=this.canvas.nativeCanvas.style)?e:{}}setStyle(e){this.canvas.nativeCanvas.style=e}getBoundingClientRect(){var e=this.canvas.nativeCanvas,t=this.getWH();return e.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:t.width,height:t.height,left:0,top:0,right:0,bottom:0}}clearViewBox(e){var t=this.viewBox,i=this.getContext(),r=this.getDpr();i.nativeContext.save(),i.nativeContext.setTransform(r,0,0,r,0,0),i.clearRect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1),e&&(i.fillStyle=e,i.fillRect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1)),i.nativeContext.restore()}isVisible(e){return this._canvasIsIntersecting}onVisibleChange(e){this._onVisibleChangeCb=e}getTopLeft(e){return this.global.getElementTopLeft(this.canvas.nativeCanvas,e)}},browserWindowModule=(BrowserWindowHandlerContribution.env=\\\"browser\\\",BrowserWindowHandlerContribution.idprefix=\\\"visactor_window\\\",BrowserWindowHandlerContribution.prefix_count=0,BrowserWindowHandlerContribution=BrowserWindowHandlerContribution_1=__decorate45([injectable(),__metadata32(\\\"design:paramtypes\\\",[])],BrowserWindowHandlerContribution),new ContainerModule(e=>{e(BrowserWindowHandlerContribution).toSelf(),e(WindowHandlerContribution).toDynamicValue(e=>e.container.get(BrowserWindowHandlerContribution)).whenTargetNamed(BrowserWindowHandlerContribution.env)})),__decorate46=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata33=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},DynamicB=class{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(e){this.dom=e}};function createImageElement(e,t=!1){const i=document.createElement(\\\"img\\\");var r;return i.crossOrigin=\\\"anonymous\\\",t&&(r=new Blob([e],{type:\\\"image/svg+xml\\\"}),e=window.URL.createObjectURL(r)),i.src=e,i.complete?Promise.resolve(i):new Promise((e,t)=>{i.onload=()=>{e(i)},i.onerror=()=>{t(new Error(\\\"加载失败\\\"))}})}var BrowserEnvContribution=class extends BaseEnvContribution{constructor(){super(),this.type=\\\"browser\\\",this.supportEvent=!0;try{this.supportsTouchEvents=\\\"ontouchstart\\\"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch(err){this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(e,i){let r=0,n=0,t=0,o=0;if(o=e.changedTouches?(a=null!=(a=e.changedTouches[0])?a:{},r=a.clientX||0,n=a.clientY||0,t=r,n):(r=e.clientX||0,n=e.clientY||0,t=e.offsetX||0,e.offsetY||0),i){var a=r,l=n,s=i.getBoundingClientRect(),h=null==(h=i.getNativeHandler)?void 0:h.call(i).nativeCanvas;let e,t;return h&&(e=s.width/h.offsetWidth,t=s.height/h.offsetHeight),{x:(a-s.left)/(isValidNumber_default(e)?e:1),y:(l-s.top)/(isValidNumber_default(t)?t:1)}}return{x:t,y:o}}getNativeAABBBounds(e){let t=e;var i;return(t=\\\"string\\\"==typeof e&&(t=(new DOMParser).parseFromString(e,\\\"text/html\\\").firstChild).lastChild?t.lastChild.firstChild:t).getBoundingClientRect?(i=t.getBoundingClientRect(),new DynamicB(i)):new AABBBounds}removeDom(e){return e.parentElement.removeChild(e),!0}createDom(e){const{tagName:t=\\\"div\\\",width:i,height:r,style:n,parent:o}=e,a=document.createElement(t);var l;return n&&(isString_default(n)?a.setAttribute(\\\"style\\\",n):Object.keys(n).forEach(e=>{a.setAttribute(e,n[e])})),null!=i&&(a.style.width=i+\\\"px\\\"),null!=r&&(a.style.height=r+\\\"px\\\"),o&&(l=isString_default(o)?this.getElementById(o):o)&&l.appendChild&&l.appendChild(a),a}loadImage(e){return createImageElement(e,!1).then(e=>({data:e,loadState:\\\"success\\\"}))[\\\"catch\\\"](()=>({data:null,loadState:\\\"fail\\\"}))}loadSvg(e){return createImageElement(e,!0).then(e=>({data:e,loadState:\\\"success\\\"}))[\\\"catch\\\"](()=>({data:null,loadState:\\\"fail\\\"}))}createCanvas(e){var t=document.createElement(\\\"canvas\\\"),i=(e.id&&(t.id=null!=(i=e.id)?i:Generator.GenAutoIncrementId().toString()),null!=(i=e.dpr)?i:window.devicePixelRatio);return e.width&&e.height&&(t.style.width=e.width+\\\"px\\\",t.style.height=e.height+\\\"px\\\",t.width=e.width*i,t.height=e.height*i),t}createOffscreenCanvas(e){var t=null!=(t=e.dpr)?t:window.devicePixelRatio;return new OffscreenCanvas(e.width*t,e.height*t)}releaseCanvas(e){var t=\\\"string\\\"==typeof e?document.getElementById(e):e;t&&t.parentElement&&t.parentElement.removeChild(t)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(e,t,i){return document.addEventListener(e,t,i)}removeEventListener(e,t,i){return document.removeEventListener(e,t,i)}dispatchEvent(e){return document.dispatchEvent(e)}getElementById(e){return document.getElementById(e)}getRootElement(){return document.body}getDocument(){return document}release(){}getElementTop(e,t){let i=e.offsetTop,r=e.offsetParent;for(;null!==r;)i+=r.offsetTop,r=r.offsetParent;return i}getElementLeft(e,t){let i=e.offsetLeft,r=e.offsetParent;for(;null!==r;)i+=r.offsetLeft,r=r.offsetParent;return i}getElementTopLeft(e,t){let i=e.offsetTop,r=e.offsetLeft,n=e.offsetParent;for(;null!==n;)i+=n.offsetTop,r+=n.offsetLeft,n=n.offsetParent;return{top:i,left:r}}},BrowserEnvContribution=__decorate46([injectable(),__metadata33(\\\"design:paramtypes\\\",[])],BrowserEnvContribution),browserEnvModule=new ContainerModule(e=>{browserEnvModule.isBrowserBound||(browserEnvModule.isBrowserBound=!0,e(BrowserEnvContribution).toSelf().inSingletonScope(),e(EnvContribution).toService(BrowserEnvContribution))});function loadBrowserEnv(e,t=!0){loadBrowserEnv.__loaded||(loadBrowserEnv.__loaded=!0,e.load(browserEnvModule),e.load(browserCanvasModule),e.load(browserWindowModule),t&&loadCanvasPicker(e))}browserEnvModule.isBrowserBound=!1,loadBrowserEnv.__loaded=!1,init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var __decorate47=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata34=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},NodeContext2d=class extends BrowserContext2d{constructor(e,t){super(e,t);var i=e.nativeCanvas.getContext(\\\"2d\\\");if(!i)throw new Error(\\\"发生错误，获取2d上下文失败\\\");this.nativeContext=i,this.canvas=e,this.matrix=new Matrix(1,0,0,1,0,0),this.stack=[],this.dpr=null!=t?t:1}release(){}},__decorate48=(NodeContext2d.env=\\\"node\\\",NodeContext2d=__decorate47([injectable(),__metadata34(\\\"design:paramtypes\\\",[Object,Number])],NodeContext2d),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata35=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},NodeCanvas=class extends BaseCanvas{constructor(e){super(e)}init(){this._context=new NodeContext2d(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(){this._nativeCanvas.release&&isFunction_default(this._nativeCanvas.release)&&this._nativeCanvas.release()}},nodeCanvasModule=(NodeCanvas.env=\\\"node\\\",createModule(NodeCanvas=__decorate48([injectable(),__metadata35(\\\"design:paramtypes\\\",[Object])],NodeCanvas),NodeContext2d)),__decorate49=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata36=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param21=function(i,r){return function(e,t){r(e,t,i)}},NodeWindowHandlerContribution=class extends BaseWindowHandlerContribution{get container(){return null}constructor(e){super(),this.global=e,this.type=\\\"node\\\"}getTitle(){return\\\"\\\"}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(e){e.canvas?this.createWindowByCanvas(e):this.createWindowByConfig(e)}createWindowByConfig(e){var t=this.global.createCanvas({width:e.width,height:e.height}),t={width:e.width,height:e.height,dpr:e.dpr,nativeCanvas:t,id:Generator.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new NodeCanvas(t)}createWindowByCanvas(e){var t=e.canvas;let i=e.width,r=e.height;null!=i&&null!=r&&e.canvasControled||(i=t.width,r=t.height),this.canvas=new NodeCanvas({width:i,height:r,dpr:1,nativeCanvas:t,canvasControled:e.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(e,t){this.canvas.resize(e,t)}setDpr(e){this.canvas.dpr=e}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(e=\\\"image/png\\\"){return this.canvas.nativeCanvas.toBuffer(e)}addEventListener(e,t,i){}dispatchEvent(e){return!0}removeEventListener(e,t,i){}getStyle(){}setStyle(e){}getBoundingClientRect(){return null}clearViewBox(e){}},nodeWindowModule=(NodeWindowHandlerContribution.env=\\\"node\\\",NodeWindowHandlerContribution=__decorate49([injectable(),__param21(0,inject(VGlobal)),__metadata36(\\\"design:paramtypes\\\",[Object])],NodeWindowHandlerContribution),new ContainerModule(e=>{e(NodeWindowHandlerContribution).toSelf(),e(WindowHandlerContribution).toDynamicValue(e=>e.container.get(NodeWindowHandlerContribution)).whenTargetNamed(NodeWindowHandlerContribution.env)})),__decorate50=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),NodeEnvContribution=class extends BaseEnvContribution{constructor(){super(...arguments),this.type=\\\"node\\\",this._lastTime=0,this.supportEvent=!1}configure(e,t){e.env===this.type&&(e.setActiveEnvContribution(this),this.pkg=t)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(e){var t=fetch(e).then(e=>e.json());return t.then(e=>({data:e,state:\\\"success\\\"}))[\\\"catch\\\"](()=>({data:null,state:\\\"fail\\\"})),t}loadArrayBuffer(e){return fetch(e).then(e=>e.arrayBuffer()).then(e=>({data:e,loadState:\\\"success\\\"}))[\\\"catch\\\"](()=>({data:null,loadState:\\\"fail\\\"}))}loadImage(e){var t=this.pkg[\\\"loadImage\\\"];return t?t(e).then(e=>({loadState:e?\\\"success\\\":\\\"fail\\\",data:e}))[\\\"catch\\\"](()=>({loadState:\\\"fail\\\",data:null})):Promise.reject(new Error(\\\"node-canvas loadImage could not be found!\\\"))}loadSvg(e){var t=this.pkg.Resvg;return t?(t=new t(e).render().asPng(),this.loadImage(t)):Promise.reject(new Error(\\\"@resvg/resvg-js svgParser could not be found!\\\"))}createCanvas(e){return this.pkg.createCanvas(e.width,e.height)}releaseCanvas(e){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(e){return rafBasedSto.call(e)}}getCancelAnimationFrame(){return e=>{rafBasedSto.clear(e)}}addEventListener(e,t,i){}removeEventListener(e,t,i){}getElementById(e){return null}getRootElement(){return null}dispatchEvent(e){}release(){}createOffscreenCanvas(e){}},NodeEnvContribution=__decorate50([injectable()],NodeEnvContribution),nodeEnvModule=new ContainerModule(e=>{nodeEnvModule.isNodeBound||(nodeEnvModule.isNodeBound=!0,e(NodeEnvContribution).toSelf().inSingletonScope(),e(EnvContribution).toService(NodeEnvContribution))});function loadNodeEnv(e,t=0){loadNodeEnv.__loaded||(loadNodeEnv.__loaded=!0,e.load(nodeEnvModule),e.load(nodeCanvasModule),e.load(nodeWindowModule))}nodeEnvModule.isNodeBound=!1,loadNodeEnv.__loaded=!1,init_esbuild_inject(),init_esbuild_inject();var __decorate51=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata37=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param22=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasArcPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"arc\\\",this.numberType=ARC_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.containsPoint(o))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i=getTheme(e).arc;a.highPerformanceSave();let{x:r=i.x,y:n=i.y}=e.attribute,l=(e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(i),r+=i.x,n+=i.y,a.setTransformForCurrent()):(r=0,n=0,a.transformFromMatrix(e.transMatrix,!0)),!1);return this.canvasRenderer.drawShape(e,a,r,n,{},null,(e,t,i)=>!!l||(l=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!l||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=getScaledStroke(a,r+n,a.dpr),l=e.isPointInStroke(o.x,o.y))}),a.highPerformanceRestore(),l}},DefaultCanvasArcPicker=__decorate51([injectable(),__param22(0,inject(ArcRender)),__metadata37(\\\"design:paramtypes\\\",[Object])],DefaultCanvasArcPicker),loadArcPick=!1,arcCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadArcPick||(loadArcPick=!0,e(CanvasArcPicker).to(DefaultCanvasArcPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasArcPicker))}),__decorate52=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata38=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param23=function(i,r){return function(e,t){r(e,t,i)}},DefaultMathArcPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"arc\\\",this.numberType=ARC_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.containsPoint(o))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i=getTheme(e).arc;a.highPerformanceSave();let{x:r=i.x,y:n=i.y}=e.attribute,l=(e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(i),r+=i.x,n+=i.y,a.setTransformForCurrent()):(r=0,n=0,a.transformFromMatrix(e.transMatrix,!0)),!1);return this.canvasRenderer.drawShape(e,a,r,n,{},null,(e,t,i)=>!!l||(l=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!l||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=r+n,l=e.isPointInStroke(o.x,o.y))}),a.highPerformanceRestore(),l}},DefaultMathArcPicker=__decorate52([injectable(),__param23(0,inject(ArcRender)),__metadata38(\\\"design:paramtypes\\\",[Object])],DefaultMathArcPicker),loadArcPick2=!1,arcMathPickModule=new ContainerModule((e,t,i,r)=>{loadArcPick2||(loadArcPick2=!0,e(MathArcPicker).to(DefaultMathArcPicker).inSingletonScope(),e(MathPickerContribution).toService(MathArcPicker))}),__decorate53=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata39=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param24=function(i,r){return function(e,t){r(e,t,i)}},_bounds=new AABBBounds,DefaultCanvasRectPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"rect\\\",this.numberType=RECT_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.containsPoint(o))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i,r=getTheme(e).rect,{cornerRadius:n=r.cornerRadius}=e.attribute;let{x:l=r.x,y:s=r.y}=e.attribute,h=(a.highPerformanceSave(),!0),d=(e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(r),l+=i.x,s+=i.y,a.setTransformForCurrent()):(l=0,s=0,h=!1,a.transformFromMatrix(e.transMatrix,!0)),!0);return!h||e.shadowRoot||isNumber_default(n,!0)&&0!==n||isArray_default(n)&&n.some(e=>0!==e)?(d=!1,this.canvasRenderer.drawShape(e,a,l,s,{},null,(e,t,i)=>!!d||(d=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!d||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=getScaledStroke(a,r+n,a.dpr),d=e.isPointInStroke(o.x,o.y))})):(({fill:i=r.fill,stroke:n=r.stroke,lineWidth:r=r.lineWidth}=e.attribute),i?d=!0:n&&(i=e.AABBBounds,_bounds.setValue(i.x1,i.y1,i.x2,i.y2),_bounds.expand(-r/2),d=!_bounds.containsPoint(o))),a.highPerformanceRestore(),d}},DefaultCanvasRectPicker=__decorate53([injectable(),__param24(0,inject(RectRender)),__metadata39(\\\"design:paramtypes\\\",[Object])],DefaultCanvasRectPicker),loadRectPick=!1,rectCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadRectPick||(loadRectPick=!0,e(CanvasRectPicker).to(DefaultCanvasRectPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasRectPicker))}),__decorate54=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata40=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param25=function(i,r){return function(e,t){r(e,t,i)}},_bounds2=new AABBBounds,DefaultMathRectPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"rect\\\",this.numberType=RECT_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.containsPoint(o))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i,r=getTheme(e).rect,{cornerRadius:n=r.cornerRadius}=e.attribute;let{x:l=r.x,y:s=r.y}=e.attribute,h=(a.highPerformanceSave(),!0),d=(e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(r),l+=i.x,s+=i.y,a.setTransformForCurrent()):(l=0,s=0,h=!1,a.transformFromMatrix(e.transMatrix,!0)),!0);return!h||isNumber_default(n,!0)&&0!==n||isArray_default(n)&&n.some(e=>0!==e)?(d=!1,this.canvasRenderer.drawShape(e,a,l,s,{},null,(e,t,i)=>!!d||(d=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!d||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=r+n,d=e.isPointInStroke(o.x,o.y))})):d&&(({fill:i=r.fill,stroke:n=r.stroke,lineWidth:r=r.lineWidth}=e.attribute),i?d=!0:n&&(i=e.AABBBounds,_bounds2.setValue(i.x1,i.y1,i.x2,i.y2),_bounds2.expand(-r/2),d=!_bounds2.containsPoint(o))),a.highPerformanceRestore(),d}},DefaultMathRectPicker=__decorate54([injectable(),__param25(0,inject(RectRender)),__metadata40(\\\"design:paramtypes\\\",[Object])],DefaultMathRectPicker),loadRectPick2=!1,rectMathPickModule=new ContainerModule((e,t,i,r)=>{loadRectPick2||(loadRectPick2=!0,e(MathRectPicker).to(DefaultMathRectPicker).inSingletonScope(),e(MathPickerContribution).toService(MathRectPicker))}),__decorate55=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),BasePicker=class extends BaseRender{},BasePicker=__decorate55([injectable()],BasePicker),__decorate56=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},__metadata41=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param26=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasLinePicker=class extends BasePicker{constructor(e){super(),this.canvasRenderer=e,this.type=\\\"line\\\",this.numberType=LINE_NUMBER_TYPE}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const o=(null!=i?i:{})[\\\"pickContext\\\"];if(!o)return!1;o.highPerformanceSave();var r,n=getTheme(e).line,{x:n,y:a,z:l,lastModelMatrix:s}=this.transform(e,n,o);let h=t,d=(o.camera&&(h=t.clone(),r=e.parent.globalTransMatrix,h.x=r.a*t.x+r.c*t.y+r.e,h.y=r.b*t.x+r.d*t.y+r.f),this.canvasRenderer.z=l,!1);return this.canvasRenderer.drawShape(e,o,n,a,{},null,e=>!!d||(d=e.isPointInPath(h.x,h.y)),(e,t,i)=>{var r,n;return!!d||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,o.lineWidth=getScaledStroke(o,r+n,o.dpr),d=e.isPointInStroke(h.x,h.y))}),this.canvasRenderer.z=0,o.modelMatrix!==s&&mat4Allocate.free(o.modelMatrix),o.modelMatrix=s,o.highPerformanceRestore(),d}},DefaultCanvasLinePicker=__decorate56([injectable(),__param26(0,inject(LineRender)),__metadata41(\\\"design:paramtypes\\\",[Object])],DefaultCanvasLinePicker),loadLinePick=!1,lineCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadLinePick||(loadLinePick=!0,e(CanvasLinePicker).to(DefaultCanvasLinePicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasLinePicker))}),__decorate57=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata42=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param27=function(i,r){return function(e,t){r(e,t,i)}},DefaultMathLinePicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"line\\\",this.numberType=LINE_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.containsPoint(o))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i=getTheme(e).line;let{x:r=i.x,y:n=i.y}=e.attribute,l=(a.highPerformanceSave(),e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(i),r+=i.x,n+=i.y,a.setTransformForCurrent()):(r=0,n=0,a.transformFromMatrix(e.transMatrix,!0)),!1);return this.canvasRenderer.drawShape(e,a,r,n,{},null,e=>!!l||(l=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!l||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=r+n,l=e.isPointInStroke(o.x,o.y))}),a.highPerformanceRestore(),l}},DefaultMathLinePicker=__decorate57([injectable(),__param27(0,inject(LineRender)),__metadata42(\\\"design:paramtypes\\\",[Object])],DefaultMathLinePicker),loadLinePick2=!1,lineMathPickModule=new ContainerModule((e,t,i,r)=>{loadLinePick2||(loadLinePick2=!0,e(MathLinePicker).to(DefaultMathLinePicker).inSingletonScope(),e(MathPickerContribution).toService(MathLinePicker))}),__decorate58=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata43=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param28=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasAreaPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"area\\\",this.numberType=AREA_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.containsPoint(o))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i=getTheme(e).area;let{x:r=i.x,y:n=i.y}=e.attribute;const{fillPickable:l=i.fillPickable,strokePickable:s=i.strokePickable}=e.attribute;a.highPerformanceSave(),e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(i),r+=i.x,n+=i.y,a.setTransformForCurrent()):(r=0,n=0,a.transformFromMatrix(e.transMatrix,!0));let h=!1;return this.canvasRenderer.drawShape(e,a,r,n,{},null,e=>!!h||!!l&&(h=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!h||!!s&&(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=getScaledStroke(a,r+n,a.dpr),h=e.isPointInStroke(o.x,o.y))}),a.highPerformanceRestore(),h}},DefaultCanvasAreaPicker=__decorate58([injectable(),__param28(0,inject(AreaRender)),__metadata43(\\\"design:paramtypes\\\",[Object])],DefaultCanvasAreaPicker),loadAreaPick=!1,areaCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadAreaPick||(loadAreaPick=!0,e(CanvasAreaPicker).to(DefaultCanvasAreaPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasAreaPicker))}),__decorate59=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata44=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param29=function(i,r){return function(e,t){r(e,t,i)}},DefaultMathAreaPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"area\\\",this.numberType=AREA_NUMBER_TYPE}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;var r=(null!=i?i:{})[\\\"pickContext\\\"];if(!r)return!1;var n=getTheme(e).area;let{x:o=n.x,y:a=n.y}=e.attribute,l=(r.highPerformanceSave(),e.transMatrix.onlyTranslate()?(n=e.getOffsetXY(n),o+=n.x,a+=n.y,r.setTransformForCurrent()):(o=0,a=0,r.transformFromMatrix(e.transMatrix,!0)),!1);return this.canvasRenderer.drawShape(e,r,o,a,{},null,e=>!!l||(l=e.isPointInPath(t.x,t.y))),r.highPerformanceRestore(),l}},DefaultMathAreaPicker=__decorate59([injectable(),__param29(0,inject(AreaRender)),__metadata44(\\\"design:paramtypes\\\",[Object])],DefaultMathAreaPicker),loadAreaPick2=!1,areaMathPickModule=new ContainerModule((e,t,i,r)=>{loadAreaPick2||(loadAreaPick2=!0,e(MathAreaPicker).to(DefaultMathAreaPicker).inSingletonScope(),e(MathPickerContribution).toService(MathAreaPicker))}),__decorate60=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata45=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param30=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasSymbolPicker=class extends BasePicker{constructor(e){super(),this.canvasRenderer=e,this.type=\\\"symbol\\\",this.numberType=SYMBOL_NUMBER_TYPE}contains(e,t,i){const o=(null!=i?i:{})[\\\"pickContext\\\"];if(!o)return!1;var r=e.getParsedPath();if(!o.camera){if(!e.AABBBounds.containsPoint(t))return!1;if(r.isSvg||\\\"imprecise\\\"===e.attribute.pickMode)return!0}o.highPerformanceSave();var n,r=getTheme(e).symbol,{x:r,y:a,z:l,lastModelMatrix:s}=this.transform(e,r,o);let h=t,d=(o.camera&&(h=t.clone(),n=e.parent.globalTransMatrix,h.x=n.a*t.x+n.c*t.y+n.e,h.y=n.b*t.x+n.d*t.y+n.f),this.canvasRenderer.z=l,!1);return this.canvasRenderer.drawShape(e,o,r,a,{},null,(e,t,i)=>!!d||(d=e.isPointInPath(h.x,h.y)),(e,t,i)=>{var r,n;return!!d||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,o.lineWidth=getScaledStroke(o,r+n,o.dpr),d=e.isPointInStroke(h.x,h.y))}),this.canvasRenderer.z=0,o.modelMatrix!==s&&mat4Allocate.free(o.modelMatrix),o.modelMatrix=s,o.highPerformanceRestore(),d}},DefaultCanvasSymbolPicker=__decorate60([injectable(),__param30(0,inject(SymbolRender)),__metadata45(\\\"design:paramtypes\\\",[Object])],DefaultCanvasSymbolPicker),loadSymbolPick=!1,symbolCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadSymbolPick||(loadSymbolPick=!0,e(CanvasSymbolPicker).to(DefaultCanvasSymbolPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasSymbolPicker))}),__decorate61=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata46=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param31=function(i,r){return function(e,t){r(e,t,i)}},DefaultMathSymbolPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"symbol\\\",this.numberType=SYMBOL_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.containsPoint(o))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i=getTheme(e).symbol;let{x:r=i.x,y:n=i.y}=e.attribute,l=(a.highPerformanceSave(),e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(i),r+=i.x,n+=i.y,a.setTransformForCurrent()):(r=0,n=0,a.transformFromMatrix(e.transMatrix,!0)),!1);return this.canvasRenderer.drawShape(e,a,r,n,{},null,(e,t,i)=>!!l||(l=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!l||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=r+n,l=e.isPointInStroke(o.x,o.y))}),a.highPerformanceRestore(),l}},DefaultMathSymbolPicker=__decorate61([injectable(),__param31(0,inject(SymbolRender)),__metadata46(\\\"design:paramtypes\\\",[Object])],DefaultMathSymbolPicker),loadSymbolPick2=!1,symbolMathPickModule=new ContainerModule((e,t,i,r)=>{loadSymbolPick2||(loadSymbolPick2=!0,e(MathSymbolPicker).to(DefaultMathSymbolPicker).inSingletonScope(),e(MathPickerContribution).toService(MathSymbolPicker))}),__decorate62=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata47=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param32=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasCirclePicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"circle\\\",this.numberType=CIRCLE_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.containsPoint(o))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i=getTheme(e).circle;let{x:r=i.x,y:n=i.y}=e.attribute,l=(a.highPerformanceSave(),e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(i),r+=i.x,n+=i.y,a.setTransformForCurrent()):(r=0,n=0,a.transformFromMatrix(e.transMatrix,!0)),!1);return this.canvasRenderer.drawShape(e,a,r,n,{},null,(e,t,i)=>!!l||(l=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!l||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=getScaledStroke(a,r+n,a.dpr),l=e.isPointInStroke(o.x,o.y))}),a.highPerformanceRestore(),l}},DefaultCanvasCirclePicker=__decorate62([injectable(),__param32(0,inject(CircleRender)),__metadata47(\\\"design:paramtypes\\\",[Object])],DefaultCanvasCirclePicker),loadCirclePick=!1,circleCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadCirclePick||(loadCirclePick=!0,e(CanvasCirclePicker).to(DefaultCanvasCirclePicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasCirclePicker))}),__decorate63=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata48=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param33=function(i,r){return function(e,t){r(e,t,i)}},DefaultMathCirclePicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"circle\\\",this.numberType=CIRCLE_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.containsPoint(o))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i=getTheme(e).circle;let{x:r=i.x,y:n=i.y}=e.attribute,l=(a.highPerformanceSave(),e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(i),r+=i.x,n+=i.y,a.setTransformForCurrent()):(r=0,n=0,a.transformFromMatrix(e.transMatrix,!0)),!1);return this.canvasRenderer.drawShape(e,a,r,n,{},null,(e,t,i)=>!!l||(l=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!l||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=r+n,l=e.isPointInStroke(o.x,o.y))}),a.highPerformanceRestore(),l}},DefaultMathCirclePicker=__decorate63([injectable(),__param33(0,inject(CircleRender)),__metadata48(\\\"design:paramtypes\\\",[Object])],DefaultMathCirclePicker),loadCirclePick2=!1,circleMathPickModule=new ContainerModule((e,t,i,r)=>{loadCirclePick2||(loadCirclePick2=!0,e(MathCirclePicker).to(DefaultMathCirclePicker).inSingletonScope(),e(MathPickerContribution).toService(MathCirclePicker))}),__decorate64=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata49=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param34=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasTextPicker=class extends BasePicker{constructor(e){super(),this.canvasRenderer=e,this.type=\\\"text\\\",this.numberType=TEXT_NUMBER_TYPE}contains(s,e,t){var i=(null!=t?t:{})[\\\"pickContext\\\"];if(!i)return!1;var r=s.AABBBounds;if(!i.camera)return!!r.containsPoint(e);i.highPerformanceSave();const h=getTheme(s).text,{keepDirIn3d:n=h.keepDirIn3d}=s.attribute,o=!n,a=this.transform(s,h,i,o),{x:d,y:u,z:c,lastModelMatrix:l}=a;this.canvasRenderer.z=c;let g=e,p=(i.camera&&(g=e.clone(),r=s.parent.globalTransMatrix,g.x=r.a*e.x+r.c*e.y+r.e,g.y=r.b*e.x+r.d*e.y+r.f),!1);return this.canvasRenderer.drawShape(s,i,d,u,{},null,(e,t,i)=>{var r,n,o,a,l;return!!p||(({fontSize:l=h.fontSize,textBaseline:a=h.textBaseline,textAlign:r=h.textAlign}=s.attribute),n=(o=s.AABBBounds).height(),o=o.width(),a=textLayoutOffsetY(a,n,l),l=textDrawOffsetX(r,o),e.rect(l+d,a+u,o,n,c),p=e.isPointInPath(g.x,g.y))},(e,t,i)=>p),this.canvasRenderer.z=0,i.modelMatrix!==l&&mat4Allocate.free(i.modelMatrix),i.modelMatrix=l,i.highPerformanceRestore(),p}},DefaultCanvasTextPicker=__decorate64([injectable(),__param34(0,inject(TextRender)),__metadata49(\\\"design:paramtypes\\\",[Object])],DefaultCanvasTextPicker),loadTextPick=!1,textCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadTextPick||(loadTextPick=!0,e(CanvasTextPicker).to(DefaultCanvasTextPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasTextPicker))}),__decorate65=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),DefaultMathTextPicker=class{constructor(){this.type=\\\"text\\\",this.numberType=TEXT_NUMBER_TYPE}contains(e,t,i){return!!e.AABBBounds.containsPoint(t)}},DefaultMathTextPicker=__decorate65([injectable()],DefaultMathTextPicker),loadTextPick2=!1,textMathPickModule=new ContainerModule((e,t,i,r)=>{loadTextPick2||(loadTextPick2=!0,e(MathTextPicker).to(DefaultMathTextPicker).inSingletonScope(),e(MathPickerContribution).toService(MathTextPicker))}),__decorate66=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata50=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param35=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasPathPicker=class extends BasePicker{constructor(e){super(),this.canvasRenderer=e,this.type=\\\"path\\\",this.numberType=PATH_NUMBER_TYPE}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const o=(null!=i?i:{})[\\\"pickContext\\\"];if(!o)return!1;var r,n=getTheme(e).path,n=(o.highPerformanceSave(),this.transform(e,n,o)),{x:n,y:a,z:l,lastModelMatrix:s}=n;let h=t,d=(o.camera&&(h=t.clone(),r=e.parent.globalTransMatrix,h.x=r.a*t.x+r.c*t.y+r.e,h.y=r.b*t.x+r.d*t.y+r.f),this.canvasRenderer.z=l,!1);return this.canvasRenderer.drawShape(e,o,n,a,{},null,(e,t,i)=>!!d||(d=e.isPointInPath(h.x,h.y)),(e,t,i)=>{var r,n;return!!d||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,o.lineWidth=getScaledStroke(o,r+n,o.dpr),d=e.isPointInStroke(h.x,h.y))}),this.canvasRenderer.z=0,o.modelMatrix!==s&&mat4Allocate.free(o.modelMatrix),o.modelMatrix=s,o.highPerformanceRestore(),d}},DefaultCanvasPathPicker=__decorate66([injectable(),__param35(0,inject(PathRender)),__metadata50(\\\"design:paramtypes\\\",[Object])],DefaultCanvasPathPicker),loadPathPick=!1,pathCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadPathPick||(loadPathPick=!0,e(CanvasPathPicker).to(DefaultCanvasPathPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasPathPicker))}),__decorate67=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata51=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param36=function(i,r){return function(e,t){r(e,t,i)}},DefaultMathPathPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"path\\\",this.numberType=PATH_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.containsPoint(o))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i=getTheme(e).path;let{x:r=i.x,y:n=i.y}=e.attribute,l=(a.highPerformanceSave(),e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(i),r+=i.x,n+=i.y,a.setTransformForCurrent()):(r=0,n=0,a.transformFromMatrix(e.transMatrix,!0)),!1);return this.canvasRenderer.drawShape(e,a,r,n,{},null,(e,t,i)=>!!l||(l=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!l||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=r+n,l=e.isPointInStroke(o.x,o.y))}),a.highPerformanceRestore(),l}},DefaultMathPathPicker=__decorate67([injectable(),__param36(0,inject(PathRender)),__metadata51(\\\"design:paramtypes\\\",[Object])],DefaultMathPathPicker),loadPathPick2=!1,pathMathPickModule=new ContainerModule((e,t,i,r)=>{loadPathPick2||(loadPathPick2=!0,e(MathPathPicker).to(DefaultMathPathPicker).inSingletonScope(),e(MathPickerContribution).toService(MathPathPicker))}),__decorate68=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata52=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param37=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasPolygonPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"polygon\\\",this.numberType=POLYGON_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.contains(o.x,o.y))return!1;if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i=getTheme(e).polygon;let{x:r=i.x,y:n=i.y}=e.attribute,l=(a.highPerformanceSave(),e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(i),r+=i.x,n+=i.y,a.setTransformForCurrent()):(r=0,n=0,a.transformFromMatrix(e.transMatrix,!0)),!1);return this.canvasRenderer.drawShape(e,a,r,n,{},null,(e,t,i)=>!!l||(l=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!l||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=getScaledStroke(a,r+n,a.dpr),l=e.isPointInStroke(o.x,o.y))}),a.highPerformanceRestore(),l}},DefaultCanvasPolygonPicker=__decorate68([injectable(),__param37(0,inject(PolygonRender)),__metadata52(\\\"design:paramtypes\\\",[Object])],DefaultCanvasPolygonPicker),loadPolygonPick=!1,polygonCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadPolygonPick||(loadPolygonPick=!0,e(CanvasPolygonPicker).to(DefaultCanvasPolygonPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasPolygonPicker))}),__decorate69=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata53=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param38=function(i,r){return function(e,t){r(e,t,i)}},DefaultMathPolygonPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"polygon\\\",this.numberType=POLYGON_NUMBER_TYPE}contains(e,o,t){if(!e.AABBBounds.contains(o.x,o.y))return!1;const a=(null!=t?t:{})[\\\"pickContext\\\"];if(!a)return!1;var i=getTheme(e).polygon;let{x:r=i.x,y:n=i.y}=e.attribute,l=(a.highPerformanceSave(),e.transMatrix.onlyTranslate()?(i=e.getOffsetXY(i),r+=i.x,n+=i.y,a.setTransformForCurrent()):(r=0,n=0,a.transformFromMatrix(e.transMatrix,!0)),!1);return this.canvasRenderer.drawShape(e,a,r,n,{},null,(e,t,i)=>!!l||(l=e.isPointInPath(o.x,o.y)),(e,t,i)=>{var r,n;return!!l||(r=t.lineWidth||i.lineWidth,n=t.pickStrokeBuffer||i.pickStrokeBuffer,a.lineWidth=r+n,l=e.isPointInStroke(o.x,o.y))}),a.highPerformanceRestore(),l}},DefaultMathPolygonPicker=__decorate69([injectable(),__param38(0,inject(PolygonRender)),__metadata53(\\\"design:paramtypes\\\",[Object])],DefaultMathPolygonPicker),loadPolygonPick2=!1,polygonMathPickModule=new ContainerModule((e,t,i,r)=>{loadPolygonPick2||(loadPolygonPick2=!0,e(MathPolygonPicker).to(DefaultMathPolygonPicker).inSingletonScope(),e(MathPickerContribution).toService(MathPolygonPicker))}),__decorate70=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata54=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param39=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasGlyphPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"glyph\\\",this.numberType=GLYPH_NUMBER_TYPE}contains(e,r,n){if(e.AABBBounds.containsPoint(r)){if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;var t=(null!=n?n:{})[\\\"pickContext\\\"];if(t){const o=null==n?void 0:n.pickerService;if(o){let i=!1;return e.getSubGraphic().forEach(e=>{var t;i||(t=o.pickItem(e,r,null,n),i=!(!t||!t.graphic))}),i}}}return!1}},DefaultCanvasGlyphPicker=__decorate70([injectable(),__param39(0,inject(GlyphRender)),__metadata54(\\\"design:paramtypes\\\",[Object])],DefaultCanvasGlyphPicker),loadGlyphPick=!1,glyphCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadGlyphPick||(loadGlyphPick=!0,e(CanvasGlyphPicker).to(DefaultCanvasGlyphPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasGlyphPicker))}),__decorate71=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata55=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param40=function(i,r){return function(e,t){r(e,t,i)}},DefaultMathGlyphPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"glyph\\\",this.numberType=GLYPH_NUMBER_TYPE}contains(e,i,r){if(e.AABBBounds.containsPoint(i)){if(\\\"imprecise\\\"===e.attribute.pickMode)return!0;var t=(null!=r?r:{})[\\\"pickContext\\\"];if(t){const n=null==r?void 0:r.pickerService;if(n){let t=!1;return e.getSubGraphic().forEach(e=>{t=t||!!n.pickItem(e,i,null,r)}),t}}}return!1}},DefaultMathGlyphPicker=__decorate71([injectable(),__param40(0,inject(GlyphRender)),__metadata55(\\\"design:paramtypes\\\",[Object])],DefaultMathGlyphPicker),loadGlyphPick2=!1,glyphMathPickModule=new ContainerModule((e,t,i,r)=>{loadGlyphPick2||(loadGlyphPick2=!0,e(MathGlyphPicker).to(DefaultMathGlyphPicker).inSingletonScope(),e(DefaultMathGlyphPicker).toService(MathGlyphPicker))}),__decorate72=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata56=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param41=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasRichTextPicker=class{constructor(e){this.canvasRenderer=e,this.type=\\\"richtext\\\",this.numberType=RICHTEXT_NUMBER_TYPE}contains(e,t,i){return!!e.AABBBounds.containsPoint(t)}},DefaultCanvasRichTextPicker=__decorate72([injectable(),__param41(0,inject(RichTextRender)),__metadata56(\\\"design:paramtypes\\\",[Object])],DefaultCanvasRichTextPicker),loadRichtextPick=!1,richtextCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadRichtextPick||(loadRichtextPick=!0,e(CanvasRichTextPicker).to(DefaultCanvasRichTextPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasRichTextPicker))}),__decorate73=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),DefaultMathImagePicker=class{constructor(){this.type=\\\"image\\\",this.numberType=IMAGE_NUMBER_TYPE}contains(e,t,i){var r=(null!=i?i:{})[\\\"pickContext\\\"];return!!r&&!!e.AABBBounds.containsPoint(t)}},DefaultMathImagePicker=__decorate73([injectable()],DefaultMathImagePicker),loadRichTextPick=!1,richTextMathPickModule=new ContainerModule((e,t,i,r)=>{loadRichTextPick||(loadRichTextPick=!0,e(MathImagePicker).to(DefaultMathImagePicker).inSingletonScope(),e(DefaultMathImagePicker).toService(MathImagePicker))}),__decorate74=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),DefaultCanvasImagePicker=class{constructor(){this.type=\\\"image\\\",this.numberType=IMAGE_NUMBER_TYPE}contains(e,t,i){var r=(null!=i?i:{})[\\\"pickContext\\\"];return!!r&&!!e.AABBBounds.containsPoint(t)}},DefaultCanvasImagePicker=__decorate74([injectable()],DefaultCanvasImagePicker),loadImagePick=!1,imageCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadImagePick||(loadImagePick=!0,e(CanvasImagePicker).to(DefaultCanvasImagePicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasImagePicker))}),loadImagePick2=(init_esbuild_inject(),!1),imageMathPickModule=new ContainerModule((e,t,i,r)=>{loadImagePick2||(loadImagePick2=!0,e(MathImagePicker).to(DefaultMathImagePicker).inSingletonScope(),e(DefaultMathImagePicker).toService(MathImagePicker))}),__decorate75=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata57=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param42=function(i,r){return function(e,t){r(e,t,i)}},_bounds3=new AABBBounds,DefaultCanvasRect3dPicker=class extends BasePicker{constructor(e){super(),this.canvasRenderer=e,this.type=\\\"rect3d\\\",this.numberType=RECT3D_NUMBER_TYPE}contains(e,t,i){var r=(null!=i?i:{})[\\\"pickContext\\\"];if(!r)return!1;var n,o=getTheme(e).rect,o=(r.highPerformanceSave(),this.transform(e,o,r)),{x:o,y:a,z:l,lastModelMatrix:s}=o;let h=t,d=(r.camera&&(h=t.clone(),n=e.parent.globalTransMatrix,h.x=n.a*t.x+n.c*t.y+n.e,h.y=n.b*t.x+n.d*t.y+n.f),this.canvasRenderer.z=l,!1);return this.canvasRenderer.drawShape(e,r,o,a,i,null,(e,t,i)=>!!d||(d=e.isPointInPath(h.x,h.y))),this.canvasRenderer.z=0,r.modelMatrix!==s&&mat4Allocate.free(r.modelMatrix),r.modelMatrix=s,r.highPerformanceRestore(),d}},DefaultCanvasRect3dPicker=__decorate75([injectable(),__param42(0,inject(Rect3DRender)),__metadata57(\\\"design:paramtypes\\\",[Object])],DefaultCanvasRect3dPicker),loadRect3dPick=!1,rect3dCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadRect3dPick||(loadRect3dPick=!0,e(CanvasRect3dPicker).to(DefaultCanvasRect3dPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasRect3dPicker))}),__decorate76=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata58=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param43=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasArc3dPicker=class extends BasePicker{constructor(e){super(),this.canvasRenderer=e,this.type=\\\"arc3d\\\",this.numberType=ARC3D_NUMBER_TYPE}contains(e,t,i){var r=(null!=i?i:{})[\\\"pickContext\\\"];if(!r)return!1;var n,o=getTheme(e).arc,o=(r.highPerformanceSave(),this.transform(e,o,r)),{x:o,y:a,z:l,lastModelMatrix:s}=o;let h=t,d=(r.camera&&(h=t.clone(),n=e.parent.globalTransMatrix,h.x=n.a*t.x+n.c*t.y+n.e,h.y=n.b*t.x+n.d*t.y+n.f),this.canvasRenderer.z=l,!1);return this.canvasRenderer.drawShape(e,r,o,a,i,null,(e,t,i)=>!!d||(d=e.isPointInPath(h.x,h.y))),this.canvasRenderer.z=0,r.modelMatrix!==s&&mat4Allocate.free(r.modelMatrix),r.modelMatrix=s,r.highPerformanceRestore(),d}},DefaultCanvasArc3dPicker=__decorate76([injectable(),__param43(0,inject(Arc3dRender)),__metadata58(\\\"design:paramtypes\\\",[Object])],DefaultCanvasArc3dPicker),loadArc3dPick=!1,arc3dCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadArc3dPick||(loadArc3dPick=!0,e(CanvasArc3dPicker).to(DefaultCanvasArc3dPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasArc3dPicker))}),__decorate77=(init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),__metadata59=function(e,t){if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param44=function(i,r){return function(e,t){r(e,t,i)}},DefaultCanvasPyramid3dPicker=class extends BasePicker{constructor(e){super(),this.canvasRenderer=e,this.type=\\\"pyramid3d\\\",this.numberType=PYRAMID3D_NUMBER_TYPE}contains(e,t,i){var r=(null!=i?i:{})[\\\"pickContext\\\"];if(!r)return!1;var n,o=getTheme(e).polygon,o=(r.highPerformanceSave(),this.transform(e,o,r)),{x:o,y:a,z:l,lastModelMatrix:s}=o;let h=t,d=(r.camera&&(h=t.clone(),n=e.parent.globalTransMatrix,h.x=n.a*t.x+n.c*t.y+n.e,h.y=n.b*t.x+n.d*t.y+n.f),this.canvasRenderer.z=l,!1);return this.canvasRenderer.drawShape(e,r,o,a,{},null,(e,t,i)=>!!d||(d=e.isPointInPath(h.x,h.y)),(e,t,i)=>!1),this.canvasRenderer.z=0,r.modelMatrix!==s&&mat4Allocate.free(r.modelMatrix),r.modelMatrix=s,r.highPerformanceRestore(),d}},DefaultCanvasPyramid3dPicker=__decorate77([injectable(),__param44(0,inject(Pyramid3dRender)),__metadata59(\\\"design:paramtypes\\\",[Object])],DefaultCanvasPyramid3dPicker),loadPyramid3dPick=!1,pyramid3dCanvasPickModule=new ContainerModule((e,t,i,r)=>{loadPyramid3dPick||(loadPyramid3dPick=!0,e(CanvasPyramid3dPicker).to(DefaultCanvasPyramid3dPicker).inSingletonScope(),e(CanvasPickerContribution).toService(CanvasPyramid3dPicker))}),browser=(init_esbuild_inject(),init_esbuild_inject(),isBrowserEnv());function _registerArc(){_registerArc.__loaded||(_registerArc.__loaded=!0,registerArcGraphic(),container.load(arcModule),container.load(browser?arcCanvasPickModule:arcMathPickModule))}_registerArc.__loaded=!1;var registerArc=_registerArc;function _registerArc3d(){_registerArc3d.__loaded||(_registerArc3d.__loaded=!0,registerArc3dGraphic(),container.load(arc3dModule),container.load(arc3dCanvasPickModule))}init_esbuild_inject(),_registerArc3d.__loaded=!1;var registerArc3d=_registerArc3d;function _registerArea(){_registerArea.__loaded||(_registerArea.__loaded=!0,registerAreaGraphic(),container.load(areaModule),container.load(browser?areaCanvasPickModule:areaMathPickModule))}init_esbuild_inject(),_registerArea.__loaded=!1;var registerArea=_registerArea;function _registerCircle(){_registerCircle.__loaded||(_registerCircle.__loaded=!0,registerCircleGraphic(),container.load(circleModule),container.load(browser?circleCanvasPickModule:circleMathPickModule))}init_esbuild_inject(),_registerCircle.__loaded=!1;var registerCircle=_registerCircle;function _registerGlyph(){_registerGlyph.__loaded||(_registerGlyph.__loaded=!0,registerGlyphGraphic(),container.load(glyphModule),container.load(browser?glyphCanvasPickModule:glyphMathPickModule))}init_esbuild_inject(),_registerGlyph.__loaded=!1;var registerGlyph=_registerGlyph;function _registerGroup(){_registerGroup.__loaded||(_registerGroup.__loaded=!0,registerGroupGraphic())}init_esbuild_inject(),_registerGroup.__loaded=!1;var registerGroup=_registerGroup;function _registerImage(){_registerImage.__loaded||(_registerImage.__loaded=!0,registerImageGraphic(),container.load(imageModule),container.load(browser?imageCanvasPickModule:imageMathPickModule))}init_esbuild_inject(),_registerImage.__loaded=!1;var registerImage=_registerImage;function _registerLine(){_registerLine.__loaded||(_registerLine.__loaded=!0,registerLineGraphic(),container.load(lineModule),container.load(browser?lineCanvasPickModule:lineMathPickModule))}init_esbuild_inject(),_registerLine.__loaded=!1;var registerLine=_registerLine;function _registerPath(){_registerPath.__loaded||(_registerPath.__loaded=!0,registerPathGraphic(),container.load(pathModule),container.load(browser?pathCanvasPickModule:pathMathPickModule))}init_esbuild_inject(),_registerPath.__loaded=!1;var registerPath=_registerPath;function _registerPolygon(){_registerPolygon.__loaded||(_registerPolygon.__loaded=!0,registerPolygonGraphic(),container.load(polygonModule),container.load(browser?polygonCanvasPickModule:polygonMathPickModule))}init_esbuild_inject(),_registerPolygon.__loaded=!1;var registerPolygon=_registerPolygon;function _registerPyramid3d(){_registerPyramid3d.__loaded||(_registerPyramid3d.__loaded=!0,registerPyramid3dGraphic(),container.load(pyramid3dModule),container.load(pyramid3dCanvasPickModule))}init_esbuild_inject(),_registerPyramid3d.__loaded=!1;var registerPyramid3d=_registerPyramid3d;function _registerRect(){_registerRect.__loaded||(_registerRect.__loaded=!0,registerRectGraphic(),container.load(rectModule),container.load(browser?rectCanvasPickModule:rectMathPickModule))}init_esbuild_inject(),_registerRect.__loaded=!1;var registerRect=_registerRect;function _registerRect3d(){_registerRect3d.__loaded||(_registerRect3d.__loaded=!0,registerRect3dGraphic(),container.load(rect3dModule),container.load(rect3dCanvasPickModule))}init_esbuild_inject(),_registerRect3d.__loaded=!1;var registerRect3d=_registerRect3d;function _registerRichtext(){_registerRichtext.__loaded||(_registerRichtext.__loaded=!0,registerRichtextGraphic(),container.load(richtextModule),container.load(browser?richtextCanvasPickModule:richTextMathPickModule))}init_esbuild_inject(),_registerRichtext.__loaded=!1;var registerRichtext=_registerRichtext;function _registerShadowRoot(){_registerShadowRoot.__loaded||(_registerShadowRoot.__loaded=!0,registerShadowRootGraphic())}init_esbuild_inject(),_registerShadowRoot.__loaded=!1;var registerShadowRoot=_registerShadowRoot;function _registerSymbol(){_registerSymbol.__loaded||(_registerSymbol.__loaded=!0,registerSymbolGraphic(),container.load(symbolModule),container.load(browser?symbolCanvasPickModule:symbolMathPickModule))}init_esbuild_inject(),_registerSymbol.__loaded=!1;var registerSymbol=_registerSymbol;function _registerText(){_registerText.__loaded||(_registerText.__loaded=!0,registerTextGraphic(),container.load(textModule),container.load(browser?textCanvasPickModule:textMathPickModule))}init_esbuild_inject(),_registerText.__loaded=!1;var registerText=_registerText;function _registerWrapText(){_registerWrapText.__loaded||(_registerWrapText.__loaded=!0,registerWrapTextGraphic())}init_esbuild_inject(),_registerWrapText.__loaded=!1;var InteractionState,HighlightScope,Placement,HierarchyState,AggregationType,SortType,IconPosition,IconFuncTypeEnum,InternalIconName,registerWrapText=_registerWrapText,registed=!1;function registerForVrender(){registed||(registed=!0,preLoadAllModule(),isBrowserEnv()?loadBrowserEnv(container):isNodeEnv()&&loadNodeEnv(container),registerArc(),registerArc3d(),registerArea(),registerCircle(),registerGlyph(),registerGroup(),registerImage(),registerLine(),registerPath(),registerPolygon(),registerPyramid3d(),registerRect(),registerRect3d(),registerRichtext(),registerShadowRoot(),registerSymbol(),registerText(),registerWrapText())}init_esbuild_inject(),init_esbuild_inject(),function(e){e[\\\"default\\\"]=\\\"default\\\",e.grabing=\\\"grabing\\\",e.scrolling=\\\"scrolling\\\"}(InteractionState=InteractionState||{}),function(e){e.single=\\\"single\\\",e.column=\\\"column\\\",e.row=\\\"row\\\",e.cross=\\\"cross\\\",e.none=\\\"none\\\"}(HighlightScope=HighlightScope||{}),init_esbuild_inject(),function(e){e.top=\\\"top\\\",e.bottom=\\\"bottom\\\",e.left=\\\"left\\\",e.right=\\\"right\\\"}(Placement=Placement||{}),function(e){e.expand=\\\"expand\\\",e.collapse=\\\"collapse\\\",e.none=\\\"none\\\"}(HierarchyState=HierarchyState||{}),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),function(e){e.RECORD=\\\"RECORD\\\",e.NONE=\\\"NONE\\\",e.SUM=\\\"SUM\\\",e.MIN=\\\"MIN\\\",e.MAX=\\\"MAX\\\",e.AVG=\\\"AVG\\\",e.COUNT=\\\"COUNT\\\",e.CUSTOM=\\\"CUSTOM\\\"}(AggregationType=AggregationType||{}),function(e){e.ASC=\\\"ASC\\\",e.DESC=\\\"DESC\\\"}(SortType=SortType||{}),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),function(e){e.inlineFront=\\\"inlineFront\\\",e.inlineEnd=\\\"inlineEnd\\\",e.left=\\\"left\\\",e.right=\\\"right\\\",e.absoluteRight=\\\"absoluteRight\\\",e.contentLeft=\\\"contentLeft\\\",e.contentRight=\\\"contentRight\\\",e.absolute=\\\"absolute\\\"}(IconPosition=IconPosition||{}),function(e){e.frozen=\\\"frozen\\\",e.sort=\\\"sort\\\",e.dropDown=\\\"dropDown\\\",e.dropDownState=\\\"dropDownState\\\",e.play=\\\"play\\\",e.damagePic=\\\"damagePic\\\",e.expand=\\\"expand\\\",e.collapse=\\\"collapse\\\",e.drillDown=\\\"drillDown\\\",e.drillUp=\\\"drillUp\\\",e.dragReorder=\\\"dragReorder\\\"}(IconFuncTypeEnum=IconFuncTypeEnum||{}),function(e){e.upwardIconName=\\\"sort_upward\\\",e.downwardIconName=\\\"sort_downward\\\",e.normalIconName=\\\"sort_normal\\\",e.freezeIconName=\\\"freeze\\\",e.frozenIconName=\\\"frozen\\\",e.frozenCurrentIconName=\\\"frozenCurrent\\\",e.dropdownIconName=\\\"dropdownIcon\\\",e.expandIconName=\\\"expand\\\",e.collapseIconName=\\\"collapse\\\",e.dragReorderIconName=\\\"dragReorder\\\"}(InternalIconName=InternalIconName||{}),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var defaultStyle,defaultStyle2,defaultStyle3,defaultStyle4,defaultStyle5,defaultStyle6,idCount=1,EventTarget3=class{constructor(){this.listenersData={listeners:{},listenerData:{}}}on(t,i){const r=this.listenersData.listeners[t]||(this.listenersData.listeners[t]=[]),n=(r.push(i),idCount++);return this.listenersData.listenerData[n]={type:t,listener:i,remove:()=>{delete this.listenersData.listenerData[n];var e=r.indexOf(i);r.splice(e,1),this.listenersData.listeners[t].length||delete this.listenersData.listeners[t]}},n}off(e,t){var i;t?this.removeEventListener(e,t):this.listenersData&&null!=(i=this.listenersData.listenerData[e])&&i.remove()}addEventListener(e,t,i){this.on(e,t)}removeEventListener(e,t){if(this.listenersData)for(const r in this.listenersData.listenerData){var i=this.listenersData.listenerData[r];i.type===e&&i.listener===t&&this.off(r)}}hasListeners(e){return!!this.listenersData&&!!this.listenersData.listeners[e]}fireListeners(e,t){var i;return this.listenersData&&(i=this.listenersData.listeners[e])?i.map(e=>e.call(this,t)).filter(e=>isValid_default(e)):[]}release(){delete this.listenersData}},STYLE_EVENT_TYPE={CHANGE_STYLE:\\\"change_style\\\"},Style=class v3b extends EventTarget3{static get EVENT_TYPE(){return STYLE_EVENT_TYPE}static get DEFAULT(){return defaultStyle=defaultStyle||new v3b}constructor(e={},t={}){var i;super(),this._defaultPadding=[10,16,10,16],this._textAlign=null!=(i=null==e?void 0:e.textAlign)?i:null==t?void 0:t.textAlign,this._textBaseline=null!=(i=null==e?void 0:e.textBaseline)?i:null==t?void 0:t.textBaseline,this._color=null!=(i=null==e?void 0:e.color)?i:null==t?void 0:t.color,this._fontSize=null!=(i=e.fontSize)?i:null==t?void 0:t.fontSize,this._fontFamily=null!=(i=e.fontFamily)?i:null==t?void 0:t.fontFamily,this._fontWeight=null!=(i=e.fontWeight)?i:null==t?void 0:t.fontWeight,this._fontVariant=null!=(i=e.fontVariant)?i:null==t?void 0:t.fontVariant,this._fontStyle=null!=(i=e.fontStyle)?i:null==t?void 0:t.fontStyle,this._padding=null!=(i=null!=(i=null==e?void 0:e.padding)?i:null==t?void 0:t.padding)?i:this._defaultPadding,this._borderColor=null!=(i=null==e?void 0:e.borderColor)?i:null==t?void 0:t.borderColor,this._textOverflow=null!=(i=null==e?void 0:e.textOverflow)?i:null==t?void 0:t.textOverflow,this._textStick=null!=(i=null!=(i=e.textStick)?i:null==t?void 0:t.textStick)&&i,this._textStickBaseOnAlign=null!=(i=null!=(i=e.textStickBaseOnAlign)?i:null==t?void 0:t.textStickBaseOnAlign)&&i,this._bgColor=null!=(i=null==e?void 0:e.bgColor)?i:null==t?void 0:t.bgColor,this._lineHeight=null!=(i=null==e?void 0:e.lineHeight)?i:null==t?void 0:t.lineHeight,this._underline=null!=(i=null==e?void 0:e.underline)?i:null==t?void 0:t.underline,this._underlineColor=null!=(i=null==e?void 0:e.underlineColor)?i:null==t?void 0:t.underlineColor,this._underlineDash=null!=(i=null==e?void 0:e.underlineDash)?i:null==t?void 0:t.underlineDash,this._underlineOffset=null!=(i=null==e?void 0:e.underlineOffset)?i:null==t?void 0:t.underlineOffset,this._lineThrough=null!=(i=null==e?void 0:e.lineThrough)?i:null==t?void 0:t.lineThrough,this._lineThroughColor=null!=(i=null==e?void 0:e.lineThroughColor)?i:null==t?void 0:t.lineThroughColor,this._lineThroughDash=null!=(i=null==e?void 0:e.lineThroughDash)?i:null==t?void 0:t.lineThroughDash,this._linkColor=null!=(i=null==e?void 0:e.linkColor)?i:null==t?void 0:t.linkColor,this._cursor=null!=(i=e.cursor)?i:null==t?void 0:t.cursor,this._borderLineWidth=null!=(i=e.borderLineWidth)?i:null==t?void 0:t.borderLineWidth,this._borderLineDash=null!=(i=e.borderLineDash)?i:null==t?void 0:t.borderLineDash,this._marked=null!=(i=e.marked)?i:null==t?void 0:t.marked}get color(){return this._color}set color(e){this._color=e}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e}get padding(){return this._padding}set padding(e){this._padding=e}get textOverflow(){return this._textOverflow}set textOverflow(e){this._textOverflow=e}get bgColor(){return this._bgColor}set bgColor(e){this._bgColor=e}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e}get textStick(){return this._textStick}set textStick(e){this._textStick=e}get textStickBaseOnAlign(){return this._textStickBaseOnAlign}set textStickBaseOnAlign(e){this._textStickBaseOnAlign=e}get textAlign(){return this._textAlign}set textAlign(e){this._textAlign=e}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e}get underline(){return this._underline}set underline(e){this._underline=e}get underlineColor(){return this._underlineColor}set underlineColor(e){this._underlineColor=e}get underlineDash(){return this._underlineDash}set underlineDash(e){this._underlineDash=e}get underlineOffset(){return this._underlineOffset}set underlineOffset(e){this._underlineOffset=e}get lineThrough(){return this._lineThrough}set lineThrough(e){this._lineThrough=e}get lineThroughColor(){return this._lineThroughColor}set lineThroughColor(e){this._lineThroughColor=e}get lineThroughDash(){return this._lineThroughDash}set lineThroughDash(e){this._lineThroughDash=e}get linkColor(){return this._linkColor}set linkColor(e){this._linkColor=e}get cursor(){return this._cursor}set cursor(e){this._cursor=e}get borderLineWidth(){return this._borderLineWidth}set borderLineWidth(e){this._borderLineWidth=e}get borderLineDash(){return this._borderLineDash}set borderLineDash(e){this._borderLineDash=e}get marked(){return this._marked}set marked(e){this._marked=e}clone(){return new v3b(this,null)}},ImageStyle=class Beb extends Style{static get DEFAULT(){return defaultStyle2=defaultStyle2||new Beb}constructor(e={},t={}){super(e,t)}clone(){return new Beb(this,null)}},TextStyle=(init_esbuild_inject(),class Eeb extends Style{static get DEFAULT(){return defaultStyle3=defaultStyle3||new Eeb}constructor(e={},t={}){var i;super(e,t),this._autoWrapText=null!=(i=null==e?void 0:e.autoWrapText)?i:null==t?void 0:t.autoWrapText,this._lineClamp=null!=(i=null==e?void 0:e.lineClamp)?i:null==t?void 0:t.lineClamp}clone(){return new Eeb(this,null)}get lineClamp(){return this._lineClamp}set lineClamp(e){this._lineClamp=e}get autoWrapText(){return this._autoWrapText}set autoWrapText(e){this._autoWrapText=e}}),CheckboxStyle=(init_esbuild_inject(),init_esbuild_inject(),class Leb extends Style{static get DEFAULT(){return defaultStyle4=defaultStyle4||new Leb}constructor(e={},t={},i={}){var r;super(e,t),this._size=(null!=(r=null!=(r=null==e?void 0:e.size)?r:null==t?void 0:t.size)?r:null==i?void 0:i.size)||14,this._spaceBetweenTextAndIcon=(null!=(r=null!=(r=null==e?void 0:e.spaceBetweenTextAndIcon)?r:null==t?void 0:t.spaceBetweenTextAndIcon)?r:null==i?void 0:i.spaceBetweenTextAndIcon)||8,this._defaultFill=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.defaultFill)?r:null==i?void 0:i.defaultFill,this._defaultStroke=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.defaultStroke)?r:null==i?void 0:i.defaultStroke,this._disableFill=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.disableFill)?r:null==i?void 0:i.disableFill,this._checkedFill=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.checkedFill)?r:null==i?void 0:i.checkedFill,this._checkedStroke=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.checkedStroke)?r:null==i?void 0:i.checkedStroke,this._disableCheckedFill=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.disableCheckedFill)?r:null==i?void 0:i.disableCheckedFill,this._disableCheckedStroke=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.disableCheckedStroke)?r:null==i?void 0:i.disableCheckedStroke,this._checkIconImage=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.checkIconImage)?r:null==i?void 0:i.checkIconImage,this._indeterminateIconImage=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.indeterminateIconImage)?r:null==i?void 0:i.indeterminateIconImage}get size(){return this._size}set size(e){this._size=e}get spaceBetweenTextAndIcon(){return this._spaceBetweenTextAndIcon}set spaceBetweenTextAndIcon(e){this._spaceBetweenTextAndIcon=e}get defaultFill(){return this._defaultFill}set defaultFill(e){this._defaultFill=e}get defaultStroke(){return this._defaultStroke}set defaultStroke(e){this._defaultStroke=e}get disableFill(){return this._disableFill}set disableFill(e){this._disableFill=e}get checkedFill(){return this._checkedFill}set checkedFill(e){this._checkedFill=e}get checkedStroke(){return this._checkedStroke}set checkedStroke(e){this._checkedStroke=e}get disableCheckedFill(){return this._disableCheckedFill}set disableCheckedFill(e){this._disableCheckedFill=e}get disableCheckedStroke(){return this._disableCheckedStroke}set disableCheckedStroke(e){this._disableCheckedStroke=e}get checkIconImage(){return this._checkIconImage}set checkIconImage(e){this._checkIconImage=e}get indeterminateIconImage(){return this._indeterminateIconImage}set indeterminateIconImage(e){this._indeterminateIconImage=e}getStyle(e){return new Leb(e,this)}clone(){return new Leb(this)}}),RadioStyle=(init_esbuild_inject(),class v4b extends Style{static get DEFAULT(){return defaultStyle5=defaultStyle5||new v4b}constructor(e={},t={},i={}){var r;super(e,t),this._size=(null!=(r=null!=(r=null==e?void 0:e.size)?r:null==t?void 0:t.size)?r:null==i?void 0:i.size)||14,this._spaceBetweenTextAndIcon=(null!=(r=null!=(r=null==e?void 0:e.spaceBetweenTextAndIcon)?r:null==t?void 0:t.spaceBetweenTextAndIcon)?r:null==i?void 0:i.spaceBetweenTextAndIcon)||8,this._spaceBetweenRadio=(null!=(r=null!=(r=null==e?void 0:e.spaceBetweenRadio)?r:null==t?void 0:t.spaceBetweenRadio)?r:null==i?void 0:i.spaceBetweenRadio)||2,this._innerRadius=null!=(r=null==(r=null==e?void 0:e.radioStyle)?void 0:r.innerRadius)?r:null==i?void 0:i.innerRadius,this._outerRadius=null!=(r=null==(r=null==e?void 0:e.radioStyle)?void 0:r.outerRadius)?r:null==i?void 0:i.outerRadius,this._defaultFill=null!=(r=null==(r=null==e?void 0:e.radioStyle)?void 0:r.defaultFill)?r:null==i?void 0:i.defaultFill,this._defaultStroke=null!=(r=null==(r=null==e?void 0:e.radioStyle)?void 0:r.defaultStroke)?r:null==i?void 0:i.defaultStroke,this._disableFill=null!=(r=null==(r=null==e?void 0:e.radioStyle)?void 0:r.disableFill)?r:null==i?void 0:i.disableFill,this._checkedFill=null!=(r=null==(r=null==e?void 0:e.radioStyle)?void 0:r.checkedFill)?r:null==i?void 0:i.checkedFill,this._checkedStroke=null!=(r=null==(r=null==e?void 0:e.radioStyle)?void 0:r.checkedStroke)?r:null==i?void 0:i.checkedStroke,this._disableCheckedFill=null!=(r=null==(r=null==e?void 0:e.radioStyle)?void 0:r.disableCheckedFill)?r:null==i?void 0:i.disableCheckedFill,this._disableCheckedStroke=null!=(r=null==(r=null==e?void 0:e.radioStyle)?void 0:r.disableCheckedStroke)?r:null==i?void 0:i.disableCheckedStroke}get size(){return this._size}set size(e){this._size=e}get spaceBetweenTextAndIcon(){return this._spaceBetweenTextAndIcon}set spaceBetweenTextAndIcon(e){this._spaceBetweenTextAndIcon=e}get spaceBetweenRadio(){return this._spaceBetweenRadio}set spaceBetweenRadio(e){this._spaceBetweenRadio=e}get innerRadius(){return this._innerRadius}set innerRadius(e){this._innerRadius=e}get outerRadius(){return this._outerRadius}set outerRadius(e){this._outerRadius=e}get defaultFill(){return this._defaultFill}set defaultFill(e){this._defaultFill=e}get defaultStroke(){return this._defaultStroke}set defaultStroke(e){this._defaultStroke=e}get disableFill(){return this._disableFill}set disableFill(e){this._disableFill=e}get checkedFill(){return this._checkedFill}set checkedFill(e){this._checkedFill=e}get checkedStroke(){return this._checkedStroke}set checkedStroke(e){this._checkedStroke=e}get disableCheckedFill(){return this._disableCheckedFill}set disableCheckedFill(e){this._disableCheckedFill=e}get disableCheckedStroke(){return this._disableCheckedStroke}set disableCheckedStroke(e){this._disableCheckedStroke=e}getStyle(e){return new v4b(e,this)}clone(){return new v4b(this)}}),EVENT_TYPE=Style[\\\"EVENT_TYPE\\\"];function of(e,t,i,r=Style,n,o){var a;return e||t?e instanceof Style?e:\\\"function\\\"==typeof e?of(e(i),t,i,r,n,o):(e=e||{},n&&!isValid_default(e.autoWrapText)&&(e.autoWrapText=!0),r===CheckboxStyle?new CheckboxStyle(null!=e?e:{},null!=t?t:{},null!=(a=o.checkboxStyle)?a:{}):r===RadioStyle?new RadioStyle(null!=e?e:{},null!=t?t:{},null!=(a=o.radioStyle)?a:{}):new r(null!=e?e:{},null!=t?t:{})):r.DEFAULT}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var defaultStyle7,defaultStyle8,EVENT_TYPE2={CHANGE_STYLE:\\\"change_style\\\"},Style2=class qfb extends EventTarget3{static get EVENT_TYPE(){return EVENT_TYPE2}static get DEFAULT(){return defaultStyle6=defaultStyle6||new qfb}constructor(e={},t={}){var i;super(),this._defaultPadding=[10,16,10,16],this._color=null!=(i=e.color)?i:null==t?void 0:t.color,this._fontSize=null!=(i=e.fontSize)?i:null==t?void 0:t.fontSize,this._fontFamily=null!=(i=e.fontFamily)?i:null==t?void 0:t.fontFamily,this._fontWeight=null!=(i=e.fontWeight)?i:null==t?void 0:t.fontWeight,this._fontVariant=null!=(i=e.fontVariant)?i:null==t?void 0:t.fontVariant,this._fontStyle=null!=(i=e.fontStyle)?i:null==t?void 0:t.fontStyle,this._textOverflow=(null!=(i=e.textOverflow)?i:null==t?void 0:t.textOverflow)||\\\"ellipsis\\\",this._textStick=null!=(i=null!=(i=e.textStick)?i:null==t?void 0:t.textStick)&&i,this._textStickBaseOnAlign=null!=(i=null!=(i=e.textStickBaseOnAlign)?i:null==t?void 0:t.textStickBaseOnAlign)&&i,this._marked=null!=(i=null!=(i=e.marked)?i:null==t?void 0:t.marked)&&i,this._textAlign=(null!=(i=e.textAlign)?i:null==t?void 0:t.textAlign)||\\\"left\\\",this._textBaseline=(null!=(i=e.textBaseline)?i:null==t?void 0:t.textBaseline)||\\\"middle\\\",this._bgColor=null!=(i=e.bgColor)?i:null==t?void 0:t.bgColor,this._padding=null!=(i=null!=(i=e.padding)?i:null==t?void 0:t.padding)?i:this._defaultPadding,this._borderColor=null!=(i=e.borderColor)?i:null==t?void 0:t.borderColor,this._lineHeight=null!=(i=e.lineHeight)?i:null==t?void 0:t.lineHeight,this._underline=null!=(i=e.underline)?i:null==t?void 0:t.underline,this._underlineColor=null!=(i=e.underlineColor)?i:null==t?void 0:t.underlineColor,this._underlineDash=null!=(i=e.underlineDash)?i:null==t?void 0:t.underlineDash,this._underlineOffset=null!=(i=e.underlineOffset)?i:null==t?void 0:t.underlineOffset,this._lineThrough=null!=(i=e.lineThrough)?i:null==t?void 0:t.lineThrough,this._lineThroughColor=null!=(i=e.lineThroughColor)?i:null==t?void 0:t.lineThroughColor,this._lineThroughDash=null!=(i=e.lineThroughDash)?i:null==t?void 0:t.lineThroughDash,this._linkColor=null!=(i=e.linkColor)?i:null==t?void 0:t.linkColor,this._cursor=null!=(i=e.cursor)?i:null==t?void 0:t.cursor,this._borderLineWidth=null!=(i=e.borderLineWidth)?i:null==t?void 0:t.borderLineWidth,this._borderLineDash=null!=(i=e.borderLineDash)?i:null==t?void 0:t.borderLineDash}get bgColor(){return this._bgColor}set bgColor(e){this._bgColor=e}get color(){return this._color}set color(e){this._color=e}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e}get textOverflow(){return this._textOverflow}set textOverflow(e){this._textOverflow=e}get padding(){var e;return null!=(e=this._padding)?e:this._defaultPadding}set padding(e){this._padding=e}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e}get textStick(){return this._textStick}set textStick(e){this._textStick=e}get textStickBaseOnAlign(){return this._textStickBaseOnAlign}set textStickBaseOnAlign(e){this._textStickBaseOnAlign=e}get marked(){return this._marked}set marked(e){this._marked=e}get textAlign(){return this._textAlign}set textAlign(e){this._textAlign=e}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e}get underline(){return this._underline}set underline(e){this._underline=e}get underlineColor(){return this._underlineColor}set underlineColor(e){this._underlineColor=e}get underlineDash(){return this._underlineDash}set underlineDash(e){this._underlineDash=e}get underlineOffset(){return this._underlineOffset}set underlineOffset(e){this._underlineOffset=e}get lineThrough(){return this._lineThrough}set lineThrough(e){this._lineThrough=e}get lineThroughColor(){return this._lineThroughColor}set lineThroughColor(e){this._lineThroughColor=e}get lineThroughDash(){return this._lineThroughDash}set lineThroughDash(e){this._lineThroughDash=e}get linkColor(){return this._linkColor}set linkColor(e){this._linkColor=e}get cursor(){return this._cursor}set cursor(e){this._cursor=e}get borderLineWidth(){return this._borderLineWidth}set borderLineWidth(e){this._borderLineWidth=e}get borderLineDash(){return this._borderLineDash}set borderLineDash(e){this._borderLineDash=e}clone(){return new qfb(this)}},TextHeaderStyle=class y5b extends Style2{static get DEFAULT(){return defaultStyle7=defaultStyle7||new y5b}constructor(e={},t=null){var i;super(e,t),this._autoWrapText=null!=(i=null==e?void 0:e.autoWrapText)?i:null==t?void 0:t.autoWrapText,this._lineClamp=null!=(i=null==e?void 0:e.lineClamp)?i:null==t?void 0:t.lineClamp}clone(){return new y5b(this,null)}get lineClamp(){return this._lineClamp}set lineClamp(e){this._lineClamp=e}get autoWrapText(){return this._autoWrapText}set autoWrapText(e){this._autoWrapText=e}},CheckboxStyle2=(init_esbuild_inject(),class F5b extends Style2{static get DEFAULT(){return defaultStyle8=defaultStyle8||new F5b}constructor(e={},t={},i={}){var r;super(e,t),this._size=(null!=(r=null!=(r=null==e?void 0:e.size)?r:null==t?void 0:t.size)?r:null==i?void 0:i.size)||14,this._spaceBetweenTextAndIcon=(null!=(r=null!=(r=null==e?void 0:e.spaceBetweenTextAndIcon)?r:null==t?void 0:t.spaceBetweenTextAndIcon)?r:null==i?void 0:i.spaceBetweenTextAndIcon)||8,this._defaultFill=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.defaultFill)?r:null==i?void 0:i.defaultFill,this._defaultStroke=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.defaultStroke)?r:null==i?void 0:i.defaultStroke,this._disableFill=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.disableFill)?r:null==i?void 0:i.disableFill,this._checkedFill=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.checkedFill)?r:null==i?void 0:i.checkedFill,this._checkedStroke=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.checkedStroke)?r:null==i?void 0:i.checkedStroke,this._disableCheckedFill=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.disableCheckedFill)?r:null==i?void 0:i.disableCheckedFill,this._disableCheckedStroke=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.disableCheckedStroke)?r:null==i?void 0:i.disableCheckedStroke,this._checkIconImage=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.checkIconImage)?r:null==i?void 0:i.checkIconImage,this._indeterminateIconImage=null!=(r=null==(r=null==e?void 0:e.checkboxStyle)?void 0:r.indeterminateIconImage)?r:null==i?void 0:i.indeterminateIconImage}get size(){return this._size}set size(e){this._size=e}get spaceBetweenTextAndIcon(){return this._spaceBetweenTextAndIcon}set spaceBetweenTextAndIcon(e){this._spaceBetweenTextAndIcon=e}get defaultFill(){return this._defaultFill}set defaultFill(e){this._defaultFill=e}get defaultStroke(){return this._defaultStroke}set defaultStroke(e){this._defaultStroke=e}get disableFill(){return this._disableFill}set disableFill(e){this._disableFill=e}get checkedFill(){return this._checkedFill}set checkedFill(e){this._checkedFill=e}get checkedStroke(){return this._checkedStroke}set checkedStroke(e){this._checkedStroke=e}get disableCheckedFill(){return this._disableCheckedFill}set disableCheckedFill(e){this._disableCheckedFill=e}get disableCheckedStroke(){return this._disableCheckedStroke}set disableCheckedStroke(e){this._disableCheckedStroke=e}get checkIconImage(){return this._checkIconImage}set checkIconImage(e){this._checkIconImage=e}get indeterminateIconImage(){return this._indeterminateIconImage}set indeterminateIconImage(e){this._indeterminateIconImage=e}getStyle(e){return new F5b(e,this)}clone(){return new F5b(this)}});function of2(e,t,i,r,n,o){var a;return e||t?e instanceof Style2?e:\\\"function\\\"==typeof e?of2(e(i),t,i,r,n,o):(e=e||{},n&&!isValid_default(e.autoWrapText)&&(e.autoWrapText=!0),r===CheckboxStyle2?new CheckboxStyle2(null!=e?e:{},null!=t?t:{},null!=(a=o.checkboxStyle)?a:{}):new r(null!=e?e:{},null!=t?t:{})):r.DEFAULT}init_esbuild_inject(),init_esbuild_inject();var Env=class xgb{static get mode(){return xgb._mode||(xgb._mode=defaultMode()),xgb._mode}static set mode(e){xgb._mode=e}static RegisterCreateCanvas(e){xgb.CreateCanvas=e}static RegisterLoadImage(e){xgb.LoadImage=e}static GetCreateCanvasFunc(){return xgb.CreateCanvas||(\\\"worker\\\"===xgb.mode?(e=200,t=200)=>new OffscreenCanvas(e,t):void 0)}static RegisterRequestAnimationFrame(e){xgb.RequestAnimationFrame=e()}static GetRequestAnimationFrame(){if(xgb.RequestAnimationFrame)return xgb.RequestAnimationFrame}static RegisterCancelAnimationFrame(e){xgb.CancelAnimationFrame=e()}static GetCancelAnimationFrame(){if(xgb.CancelAnimationFrame)return xgb.CancelAnimationFrame}};function defaultMode(){let e=\\\"browser\\\";try{\\\"node\\\"===window.type?e=\\\"node\\\":\\\"undefined\\\"==typeof window||window.performance?\\\"undefined\\\"==typeof window&&(e=\\\"node\\\"):e=\\\"miniApp\\\"}catch(err){e=\\\"node\\\"}return e}function importStyle(){var e;\\\"node\\\"!==Env.mode&&((e=document.createElement(\\\"style\\\")).id=\\\"vtable-style-styleSheet\\\",e.textContent=\\\"\\\\n.vtable .input-container {\\\\n\\\\tposition: absolute;\\\\n\\\\ttop:0px;\\\\n}\\\\n.vtable .table-scrollable {\\\\n\\\\tposition: absolute;\\\\n\\\\toverflow: scroll;\\\\n}\\\\n.vtable .table-scrollable::-webkit-scrollbar-button{\\\\n\\\\tbackground-color: transparent;\\\\n}\\\\n.vtable .table-scrollable::-webkit-scrollbar-track-piece{\\\\n\\\\tbackground-color: transparent;\\\\n}\\\\n.vtable .table-scrollable::-webkit-scrollbar-corner {\\\\n\\\\tbackground-color: transparent;\\\\n}\\\\n.vtable .table-scrollable::-webkit-scrollbar-thumb {\\\\n\\\\tborder-radius      : 4px;\\\\n\\\\tbackground-color   : rgba(100, 100, 100, .5);\\\\n}\\\\n\\\\n.vtable .table-scroll-end-point {\\\\n\\\\topacity: 0;\\\\n\\\\tposition: relative;\\\\n}\\\\n.vtable {\\\\n\\\\t/* 设置overflow: auto 应该是为了滚动条的某个问题 但设置了auto之后 dom的下拉菜单只能显示在vtable节点中 超出会截断;现在去掉auto 暂时滚动条的问题没有发现 */\\\\n\\\\t/* overflow: auto; */\\\\n\\\\tposition: relative;\\\\n\\\\twidth: 100%;\\\\n\\\\theight: 100%;\\\\n\\\\ttext-align: left;\\\\n  -webkit-font-smoothing:auto;\\\\n}\\\\n.vtable > canvas {\\\\n\\\\tposition: absolute;\\\\n\\\\twidth: 0;\\\\n\\\\theight: 0;\\\\n}\\\\n.vtable .table-focus-control {\\\\n\\\\tposition: relative !important;\\\\n\\\\twidth: 1px;\\\\n\\\\theight: 1px;\\\\n\\\\topacity: 0;\\\\n\\\\tpadding: 0;\\\\n\\\\tmargin: 0;\\\\n\\\\tbox-sizing: border-box;\\\\n\\\\tpointer-events: none;\\\\n\\\\tmax-width: 500px;\\\\n\\\\tmax-height: 500px;\\\\n\\\\tfloat: none !important;\\\\n}\\\\n.vtable input.table-focus-control::-ms-clear {\\\\n\\\\tvisibility: hidden;\\\\n}\\\\n.vtable input.table-focus-control.composition {\\\\n\\\\topacity: 1;\\\\n\\\\tmax-width: none;\\\\n\\\\tmax-height: none;\\\\n}\\\\n\\\",document.head.appendChild(e))}function getScrollBarSize(e){var t;return null!=e&&e.hoverOn||\\\"none\\\"===(null==e?void 0:e.visible)?0:null!=(t=null==e?void 0:e.width)?t:7}Env.dpr=0,init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var judgeType=e=>{switch(Object.prototype.toString.call(e)){case\\\"[object Object]\\\":return\\\"object\\\";case\\\"[object Function]\\\":return\\\"function\\\";case\\\"[object Array]\\\":return\\\"array\\\";case\\\"[object String]\\\":return\\\"string\\\";case\\\"[object Number]\\\":return\\\"number\\\";case\\\"[object RegExp]\\\":return\\\"regExp\\\";case\\\"[object Boolean]\\\":return\\\"boolean\\\";case\\\"[object Symbol]\\\":return\\\"symbol\\\";case\\\"[object Date]\\\":return\\\"date\\\";case\\\"[object Undefined]\\\":return\\\"undefined\\\";case\\\"[object Null]\\\":return\\\"null\\\";case\\\"[object Error]\\\":return\\\"error\\\";case\\\"[object HTMLDocument]\\\":return\\\"document\\\";case\\\"[object global]\\\":return\\\"global\\\";default:return null}},isIt=(e,t)=>judgeType(e)===t,isObject2=e=>isIt(e,\\\"object\\\"),isString2=e=>isIt(e,\\\"string\\\"),isNumber2=e=>isIt(e,\\\"number\\\"),isBoolean2=e=>isIt(e,\\\"boolean\\\");function ingoreNoneValueMerge(e,...t){if(!t.length)return e||{};var i=t.shift();if(isObject2(e)&&isObject2(i))for(const r in i)isObject2(i[r])?(e[r]||Object.assign(e,{[r]:{}}),isObject2(e[r])||Object.assign(e,{[r]:i[r]}),ingoreNoneValueMerge(e[r],i[r])):null!==i[r]&&void 0!==i[r]&&Object.assign(e,{[r]:i[r]});return ingoreNoneValueMerge(e,...t)}function convertInternal(e){return\\\"function\\\"==typeof e&&(e=e()),isValid_default(e)?\\\"\\\"+e:\\\"\\\"}function transpose(t){if((null==t?void 0:t.length)<=0)return t;var i=t.length,r=t[0].length,n=new Array(r);for(let o=0;o<i;o++)for(let e=0;e<r;e++)n[e]||(n[e]=new Array(i)),n[e][o]=t[o][e];return n}function throttle2(t,i){let r=null;return function(...e){r||(t.apply(this,e),r=setTimeout(()=>{r=null},i))}}function throttle22(t,i){let r=null;return function(...e){r=r||setTimeout(()=>{t.apply(this,e),r=null},i)}}function pad(e,t){for(e=\\\"\\\"+e;e.length<t;)e=\\\"0\\\"+e;return e}function changeColor(e,t,i){e=(e=e.replace(/^\\\\s*|\\\\s*$/,\\\"\\\")).replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,\\\"#$1$1$2$2$3$3\\\");var r=Math.round(256*t)*(i?-1:1),n=e.match(new RegExp(\\\"^rgba?\\\\\\\\(\\\\\\\\s*(\\\\\\\\d|[1-9]\\\\\\\\d|1\\\\\\\\d{2}|2[0-4][0-9]|25[0-5])\\\\\\\\s*,\\\\\\\\s*(\\\\\\\\d|[1-9]\\\\\\\\d|1\\\\\\\\d{2}|2[0-4][0-9]|25[0-5])\\\\\\\\s*,\\\\\\\\s*(\\\\\\\\d|[1-9]\\\\\\\\d|1\\\\\\\\d{2}|2[0-4][0-9]|25[0-5])(?:\\\\\\\\s*,\\\\\\\\s*(0|1|0?\\\\\\\\.\\\\\\\\d+))?\\\\\\\\s*\\\\\\\\)$\\\",\\\"i\\\")),o=n&&isValid_default(n[4])?n[4]:null,a=n?[n[1],n[2],n[3]]:e.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return`${parseInt(arguments[1],16)},${parseInt(arguments[2],16)},`+parseInt(arguments[3],16)}).split(/,/);return n?`rgb${null!==o?\\\"a\\\":\\\"\\\"}(${Math[i?\\\"max\\\":\\\"min\\\"](parseInt(a[0],10)+r,i?0:255)}, ${Math[i?\\\"max\\\":\\\"min\\\"](parseInt(a[1],10)+r,i?0:255)}, ${Math[i?\\\"max\\\":\\\"min\\\"](parseInt(a[2],10)+r,i?0:255)}${null!==o?\\\", \\\"+o:\\\"\\\"})`:[\\\"#\\\",pad(Math[i?\\\"max\\\":\\\"min\\\"](parseInt(a[0],10)+r,i?0:255).toString(16),2),pad(Math[i?\\\"max\\\":\\\"min\\\"](parseInt(a[1],10)+r,i?0:255).toString(16),2),pad(Math[i?\\\"max\\\":\\\"min\\\"](parseInt(a[2],10)+r,i?0:255).toString(16),2)].join(\\\"\\\")}function validToString(e){return isString2(e)||isNumber2(e)||isBoolean2(e)?e.toString():\\\"\\\"}function isMobile(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}function defaultOrderFn(e,t,i){return\\\"desc\\\"!==i?e===t?0:t<e?1:-1:e===t?0:e<t?1:-1}function getValueByPath(e,t){let i,r=e;for(;i=t.shift();)r=r[i];return r}function isAllDigits(e){return/^-?\\\\d+(\\\\.\\\\d+)?$/.test(e)}function deduplication(e){var t=[];for(let i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i]);return t}var arrayFind,arrayFindIndex,isNode=\\\"undefined\\\"==typeof window||void 0===window.window,array2={get find(){return arrayFind||(arrayFind=Array.prototype.find?(e,t)=>Array.prototype.find.call(e,t):(e,t)=>{var i=array2.findIndex(e,t);return 0<=i?e[i]:void 0})},get findIndex(){return arrayFindIndex||(arrayFindIndex=Array.prototype.findIndex?(e,t)=>Array.prototype.findIndex.call(e,t):(e,t)=>{var i=e[\\\"length\\\"];for(let r=0;r<i;r++)if(t(e[r],r,e))return r;return-1})}};function analyzeUserAgent(){var e;return isNode?{IE:!1,Edge:!1,Chrome:!1,Firefox:!1,Safari:!1}:(e=window.navigator.userAgent.toLowerCase(),{IE:!!/(msie|trident)/.exec(e),Edge:-1<e.indexOf(\\\"edge\\\"),Chrome:-1<e.indexOf(\\\"chrome\\\")&&-1===e.indexOf(\\\"edge\\\"),Firefox:-1<e.indexOf(\\\"firefox\\\"),Safari:-1<e.indexOf(\\\"safari\\\")&&-1===e.indexOf(\\\"edge\\\")})}var{IE,Chrome,Firefox,Edge:Edge2,Safari}=analyzeUserAgent();function isObject3(e){return e===Object(e)}function extend(...e){const r={};return e.forEach(t=>{for(const i in t)Object.defineProperty(r,i,{get:()=>t[i],set(e){t[i]=e},configurable:!0,enumerable:!0})}),r}function applyChainSafe(e,t,...i){let r=e;for(let n=0;n<i.length&&null!=r;n++)r=t(r,i[n]);return r}function getChainSafe(e,...t){return applyChainSafe(e,(e,t)=>e[t],...t)}function getOrApply(e,...t){return\\\"function\\\"==typeof e?e(...t):e}function endsWith(e,t,i){var r=validToString(e),r=((\\\"number\\\"!=typeof i||!isFinite(i)||Math.floor(i)!==i||i>r.length)&&(i=r.length),i-=t.length,r.lastIndexOf(t,i));return-1!==r&&r===i}function isPromise(e){return Boolean(e&&\\\"function\\\"==typeof e.then)}function isTouchEvent(e){return!!e.changedTouches}function getIgnoreCase(e,t){if(e[t])return e[t];var i=t.toLowerCase();if(e[i])return e[i];var r=t.toLowerCase();if(e[r])return e[r];for(const n in e)if(n.toLowerCase()===i)return e[n]}function toBoxArray(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],e[1]]:2===e.length?[e[0],e[1],e[0],e[1]]:1===e.length?[e[0],e[0],e[0],e[0]]:[e[0],e[1],e[2],e[3]]:[e,e,e,e]}function cellInRange(e,t,i){return e.start.col<=t&&t<=e.end.col&&e.start.row<=i&&i<=e.end.row||e.end.col<=t&&t<=e.start.col&&e.end.row<=i&&i<=e.start.row}function cellInRanges(e,t,i){for(let n=0;n<e.length;n++){var r=e[n];if(r.start.col<=t&&t<=r.end.col&&r.start.row<=i&&i<=r.end.row||r.end.col<=t&&t<=r.start.col&&r.end.row<=i&&i<=r.start.row)return!0}return!1}function adjust(e){return{start:{col:Math.min(e.start.col,e.end.col),row:Math.min(e.start.row,e.end.row)},end:{col:Math.max(e.start.col,e.end.col),row:Math.max(e.start.row,e.end.row)}}}function rangeIntersected(e,t){var i=adjust(e),r=adjust(t);return Math.max(i.start.col,r.start.col)<=Math.min(i.end.col,r.end.col)&&Math.max(i.start.row,r.start.row)<=Math.min(i.end.row,r.end.row)}var browser2={IE:IE,Edge:Edge2,Chrome:Chrome,Firefox:Firefox,Safari:Safari,heightLimit:Chrome?33554431:Firefox?17895588:10737433},obj={isObject:isObject3},str={endsWith:endsWith},event={isTouchEvent:isTouchEvent},style={toBoxArray:toBoxArray},emptyFn=Function.prototype,TABLE_EVENT_TYPE=(init_esbuild_inject(),{CLICK_CELL:\\\"click_cell\\\",DBLCLICK_CELL:\\\"dblclick_cell\\\",MOUSEDOWN_CELL:\\\"mousedown_cell\\\",MOUSEUP_CELL:\\\"mouseup_cell\\\",SELECTED_CELL:\\\"selected_cell\\\",KEYDOWN:\\\"keydown\\\",MOUSEENTER_TABLE:\\\"mouseenter_table\\\",MOUSELEAVE_TABLE:\\\"mouseleave_table\\\",MOUSEDOWN_TABLE:\\\"mousedown_table\\\",MOUSEMOVE_CELL:\\\"mousemove_cell\\\",MOUSEENTER_CELL:\\\"mouseenter_cell\\\",MOUSELEAVE_CELL:\\\"mouseleave_cell\\\",CONTEXTMENU_CELL:\\\"contextmenu_cell\\\",RESIZE_COLUMN:\\\"resize_column\\\",RESIZE_COLUMN_END:\\\"resize_column_end\\\",RESIZE_ROW:\\\"resize_row\\\",RESIZE_ROW_END:\\\"resize_row_end\\\",CHANGE_HEADER_POSITION:\\\"change_header_position\\\",SORT_CLICK:\\\"sort_click\\\",FREEZE_CLICK:\\\"freeze_click\\\",SCROLL:\\\"scroll\\\",SCROLL_HORIZONTAL_END:\\\"scroll_horizontal_end\\\",SCROLL_VERTICAL_END:\\\"scroll_vertical_end\\\",DROPDOWN_MENU_CLICK:\\\"dropdown_menu_click\\\",MOUSEOVER_CHART_SYMBOL:\\\"mouseover_chart_symbol\\\",DRAG_SELECT_END:\\\"drag_select_end\\\",COPY_DATA:\\\"copy_data\\\",DROPDOWN_ICON_CLICK:\\\"dropdown_icon_click\\\",DROPDOWN_MENU_CLEAR:\\\"dropdown_menu_clear\\\",TREE_HIERARCHY_STATE_CHANGE:\\\"tree_hierarchy_state_change\\\",SHOW_MENU:\\\"show_menu\\\",HIDE_MENU:\\\"hide_menu\\\",ICON_CLICK:\\\"icon_click\\\",LEGEND_ITEM_CLICK:\\\"legend_item_click\\\",LEGEND_ITEM_HOVER:\\\"legend_item_hover\\\",LEGEND_ITEM_UNHOVER:\\\"legend_item_unHover\\\",LEGEND_CHANGE:\\\"legend_change\\\",MOUSEENTER_AXIS:\\\"mouseenter_axis\\\",MOUSELEAVE_AXIS:\\\"mouseleave_axis\\\",CHECKBOX_STATE_CHANGE:\\\"checkbox_state_change\\\",RADIO_STATE_CHANGE:\\\"radio_state_change\\\",AFTER_RENDER:\\\"after_render\\\",INITIALIZED:\\\"initialized\\\",CHANGE_CELL_VALUE:\\\"change_cell_value\\\",DRAG_FILL_HANDLE_END:\\\"drag_fill_handle_end\\\",MOUSEDOWN_FILL_HANDLE:\\\"mousedown_fill_handle\\\",DBLCLICK_FILL_HANDLE:\\\"dblclick_fill_handle\\\"}),judgeType2=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),e=>{switch(Object.prototype.toString.call(e)){case\\\"[object Object]\\\":return\\\"object\\\";case\\\"[object Function]\\\":return\\\"function\\\";case\\\"[object Array]\\\":return\\\"array\\\";case\\\"[object String]\\\":return\\\"string\\\";case\\\"[object Number]\\\":return\\\"number\\\";case\\\"[object RegExp]\\\":return\\\"regExp\\\";case\\\"[object Boolean]\\\":return\\\"boolean\\\";case\\\"[object Symbol]\\\":return\\\"symbol\\\";case\\\"[object Date]\\\":return\\\"date\\\";case\\\"[object Undefined]\\\":return\\\"undefined\\\";case\\\"[object Null]\\\":return\\\"null\\\";case\\\"[object Error]\\\":return\\\"error\\\";case\\\"[object HTMLDocument]\\\":return\\\"document\\\";case\\\"[object global]\\\":return\\\"global\\\";default:return null}}),isIt2=(e,t)=>judgeType2(e)===t,isObject4=e=>isIt2(e,\\\"object\\\");function debounce2(r,n,e){let o,a,l,s,h,d,u=0,c=!1,g=!1,p=!0;const i=!n&&0!==n&&\\\"function\\\"==typeof requestAnimationFrame;if(\\\"function\\\"!=typeof r)throw new TypeError(\\\"Expected a function\\\");function f(e){var t=o,i=a;return a=void 0,o=void 0,u=e,s=r.apply(i,t)}function m(e,t){return i?requestAnimationFrame(e):setTimeout(e,t)}function b(e){var t=e-d;return void 0===d||n<=t||t<0||c&&e-u>=l}function v(){var e,t,i=Date.now();if(b(i))return e=i,h=void 0,p&&o?f(e):(a=void 0,o=void 0,s);h=m(v,(i=(e=i)-u,t=n&&-(e-d),c?Math.min(t,l-i):t))}return n=+n||0,isObject4(e)&&(g=!!e.leading,(c=\\\"maxWait\\\"in e)&&(l=Math.max(+e.maxWait||0,n)),p=\\\"trailing\\\"in e?!!e.trailing:p),function(...e){var t=Date.now(),i=b(t);if(o=e,a=this,d=t,i){if(void 0===h)return e=d,u=e,h=m(v,n),g?f(e):s;if(c)return h=m(v,n),f(d)}return void 0===h&&(h=m(v,n)),s}}var idCount2=1,ResizeObserver=class{constructor(e,t,i){var r;this.resizeTime=100,this.lastSize={width:0,height:0},this.mutationResize=()=>{this.onResize()},this.callBack=()=>{var e=this.getSize();e.width===this.lastSize.width&&e.height===this.lastSize.height||(this.lastSize=e,this.cb&&this.cb(Object.assign({},this.lastSize)))},this.onResize=()=>{this.checkSize()&&this.callBackDebounce()},this.element=e,this.cb=t,this.lastSize=this.getSize(),i&&(this.resizeTime=Math.max(i,16)),this.callBackDebounce=debounce2(this.callBack,this.resizeTime),null!==window&&void 0!==window&&window.addEventListener(\\\"resize\\\",this.onResize),\\\"ResizeObserver\\\"in window?(r=window.ResizeObserver,this.observer=new r(this.mutationResize),null!=(r=this.observer)&&r.observe(this.element)):\\\"MutationObserver\\\"in window&&(this.observer=new MutationObserver(this.mutationResize),this.observer.observe(this.element,{attributes:!0,attributeFilter:[\\\"style\\\"]}))}disConnect(){window.removeEventListener(\\\"resize\\\",this.onResize),this.observer&&(this.observer.disconnect(),this.observer=void 0)}setSize(e){this.lastSize=e}checkSize(){var e=this.getSize();return e.width!==this.lastSize.width||e.height!==this.lastSize.height}getSize(){return this.element?{width:Math.floor(this.element.clientWidth),height:Math.floor(this.element.clientHeight)}:Object.assign({},this.lastSize)}},EventHandler=class{constructor(){this.listeners={},this.reseizeListeners={}}on(e,t,i,...r){var n,o;return\\\"node\\\"===Env.mode?-1:(n=idCount2++,null!=e&&e.addEventListener&&(\\\"resize\\\"!==t||e===window?null!=e&&e.addEventListener(t,i,...r):(o=new ResizeObserver(e,i,this.resizeTime),this.reseizeListeners[n]=o)),this.listeners[n]={target:e,type:t,listener:i,options:r},n)}once(e,t,i,...r){if(\\\"node\\\"===Env.mode)return-1;const n=this.on(e,t,(...e)=>{this.off(n),i(...e)},...r);return n}off(e){var t;\\\"node\\\"!==Env.mode&&null!=e&&(t=null==(t=this.listeners)?void 0:t[e])&&(delete this.listeners[e],t.target.removeEventListener)&&t.target.removeEventListener(t.type,t.listener,...t.options)}fire(e,t,...i){if(\\\"node\\\"!==Env.mode)for(const n in this.listeners){var r=this.listeners[n];r.target===e&&r.type===t&&r.listener.call(r.target,...i)}}hasListener(e,t){if(\\\"node\\\"===Env.mode)return!1;let i=!1;for(const n in this.listeners){var r=this.listeners[n];r.target===e&&r.type===t&&(i=!0)}return i}clear(){if(\\\"node\\\"!==Env.mode){for(const i in this.listeners){var e=this.listeners[i];e.target.removeEventListener&&e.target.removeEventListener(e.type,e.listener,...e.options)}for(const r in this.reseizeListeners){var t=this.reseizeListeners[r];null!=t&&t.disConnect()}this.listeners={}}}release(){\\\"node\\\"!==Env.mode&&(this.clear(),this.listeners={})}},indexFirst=(init_esbuild_inject(),(e,t)=>{let i=0,r=e.length-1;for(;i<=r;){var n=Math.floor((i+r)/2);if(e[n]===t)return n;e[n]>t?r=n-1:i=n+1}return r<0?0:r}),NumberMap=class{constructor(){this._keys=[],this._vals={},this._sorted=!1}count(){return this._keys.length}values(){return this._vals}valueArr(){return Object.values(this._vals)}adjustOrder(i,r,n){var o=this[\\\"_keys\\\"];if(this._sorted||(o.sort((e,t)=>e<t?-1:t<e?1:0),this._sorted=!0),r<i){var a=[];for(let e=indexFirst(o,i+n-1);0<=e;e--){var l=o[e];if(i<=l)a.push(this.get(l));else if(r<=l&&l<i)this.put(l+n,this.get(l));else if(l<r)break}for(let t=0;t<n;t++)this.put(r+t,a[n-1-t])}var s=o[\\\"length\\\"];if(i<r){var h=[];for(let e=indexFirst(o,i);e<s;e++){var d=o[e];if(i<=d&&d<i+n)h.push(this.get(d));else if(i+n<=d&&d<=r)this.put(d-n,this.get(d));else if(r<d)break}for(let t=0;t<n;t++)this.put(r+t,h[t])}}exchangeOrder(r,n,o,a,l){var s=this[\\\"_keys\\\"];if(this._sorted||(s.sort((e,t)=>e<t?-1:t<e?1:0),this._sorted=!0),o<r){var h=[],d=[];for(let e=indexFirst(s,o);e<r+n;e++){var u=s[e];(r<=u&&u<r+n?d:h).push(this.get(u))}for(let t=0;t<n;t++)this.put(l+t,d[t]);for(let i=0;i<h.length;i++)this.put(l+n+i,h[i])}else{var c=[],g=[];for(let e=indexFirst(s,r);e<o+a;e++){var p=s[e];(r<=p&&p<r+n?g:c).push(this.get(p))}for(let t=0;t<n;t++)this.put(l+t,g[t]);for(let i=0;i<c.length;i++)this.put(r+i,c[i])}}del(e){delete this._vals[e];var t=this._keys.indexOf(e);-1!==t&&this._keys.splice(t,1)}put(e,t){e in this._vals||(this._keys.push(e),this._sorted=!1),this._vals[e]=t}get(e){return this._vals[e]}has(e){return isValid_default(this._vals[e])}contain(e){return 0<=Object.values(this._vals).indexOf(e)}each(e,t,i){var r=this[\\\"_keys\\\"],n=r[\\\"length\\\"];this._sorted||(r.sort((e,t)=>e<t?-1:t<e?1:0),this._sorted=!0);for(let a=indexFirst(r,e);a<n;a++){var o=r[a];if(e<=o&&o<=t){if(!1===i(this.get(o),o))break}else if(t<o)return}}clear(){this._keys.length=0,this._vals={},this._sorted=!1}getLastIndex(){return this._keys[this._keys.length-1]}delLast(){var e=this.getLastIndex();this.del(e)}delAndReorder(e){var t;this.has(e)&&(t=this.getLastIndex(),this.adjustOrder(e+1,e,t-e),this.delLast())}addAndReorder(e,t){var i=this.getLastIndex();this.adjustOrder(e,e+1,i-e),isValid_default(t)&&this.put(e,t)}},Rect2=(init_esbuild_inject(),class f8b{constructor(e,t,i,r){this.bounds=new Bounds,this.bounds.set(e,t,e+i,t+r)}static bounds(e,t,i,r){return new f8b(e,t,Math.round(i-e),Math.round(r-t))}get left(){return this.bounds.x1}set left(e){this.bounds.x1=e}get top(){return this.bounds.y1}set top(e){this.bounds.y1=e}get right(){return this.bounds.x2}set right(e){this.bounds.x2=e}get bottom(){return this.bounds.y2}set bottom(e){this.bounds.y2=e}get width(){return this.bounds.width()}set width(e){this.bounds.x2=this.bounds.x1+e}get height(){return this.bounds.height()}set height(e){this.bounds.y2=this.bounds.y1+e}offsetLeft(e){this.bounds.translate(e,0)}offsetTop(e){this.bounds.translate(0,e)}copy(){return new f8b(this.left,this.top,this.width,this.height)}contains(e){return this.bounds.encloses(e.bounds)}inPoint(e,t){return this.bounds.contains(e,t)}}),themes_exports={};function getBackgroundColor(e){var{row:t,table:i}=e;return 1&t-i.frozenRowCount?\\\"#282a2e\\\":\\\"#2d3137\\\"}__export(themes_exports,{ARCO:()=>ARCO,BRIGHT:()=>BRIGHT,DARK:()=>DARK,DEFAULT:()=>DEFAULT,SIMPLIFY:()=>SIMPLIFY,\\\"default\\\":()=>themes_default,get:()=>get2,of:()=>of3,theme:()=>theme}),init_esbuild_inject(),init_esbuild_inject();var DARK_default={underlayBackgroundColor:\\\"transparent\\\",defaultStyle:{color:\\\"#D3D5DA\\\",bgColor:\\\"#373b45\\\",fontSize:12,fontFamily:\\\"PingFang SC\\\",fontWeight:500,lineHeight:12,borderColor:\\\"#444A54\\\",padding:[8,12,8,12],hover:{cellBgColor:\\\"#2F4774\\\"}},headerStyle:{color:\\\"#D3D5DA\\\",bgColor:\\\"#373b45\\\",fontSize:12,fontFamily:\\\"PingFang SC\\\",fontWeight:500,lineHeight:12,borderColor:\\\"#444A54\\\",padding:[8,12,8,12],hover:{cellBgColor:\\\"#2F4774\\\"}},rowHeaderStyle:{},cornerHeaderStyle:{},bodyStyle:{color:\\\"#e5e7ea\\\",bgColor:getBackgroundColor,fontSize:12,fontFamily:\\\"PingFang SC\\\",fontWeight:500,lineHeight:12,borderColor:\\\"#444A54\\\",padding:[8,12,8,12],hover:{cellBgColor:\\\"#29364D\\\"}},frameStyle:{borderColor:\\\"#d1d5da\\\",borderLineWidth:1,borderLineDash:[],cornerRadius:10,shadowBlur:6,shadowOffsetX:0,shadowOffsetY:0,shadowColor:\\\"rgba(00, 24, 47, 0.06)\\\"},columnResize:{lineWidth:1,lineColor:\\\"#416EFF\\\",bgColor:\\\"#D9E2FF\\\",width:3},frozenColumnLine:{shadow:{width:4,startColor:\\\"rgba(00, 24, 47, 0.05)\\\",endColor:\\\"rgba(00, 24, 47, 0)\\\"}},selectionStyle:{cellBgColor:\\\"rgba(255, 255, 255, 0.1)\\\",cellBorderColor:\\\"#4284FF\\\",cellBorderLineWidth:2},tooltipStyle:{bgColor:\\\"#FFF\\\",color:\\\"#000\\\",fontSize:12,fontFamily:\\\"Arial,sans-serif\\\"}};function getBackgroundColor2(e){var{row:t,table:i}=e;return 1&t-i.frozenRowCount?\\\"#FFF\\\":\\\"#F4F8FF\\\"}init_esbuild_inject();var BRIGHT_default={underlayBackgroundColor:\\\"#FFF\\\",defaultStyle:{color:\\\"#FFF\\\",bgColor:\\\"#5389FF\\\",borderColor:\\\"#5286FA\\\",hover:{cellBgColor:\\\"#2E67E3\\\"}},headerStyle:{color:\\\"#FFF\\\",bgColor:\\\"#5389FF\\\",borderColor:\\\"#A1C1FF\\\",hover:{cellBgColor:\\\"#2E67E3\\\"}},bodyStyle:{color:\\\"#000\\\",bgColor:getBackgroundColor2,borderColor:\\\"#E0EAFE\\\",hover:{cellBgColor:\\\"#E9EFFD\\\"}},frameStyle:{borderColor:\\\"#E1E4E8\\\",borderLineWidth:1,borderLineDash:[],cornerRadius:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:\\\"black\\\"},columnResize:{lineWidth:1,lineColor:\\\"#416EFF\\\",bgColor:\\\"#D9E2FF\\\",width:3},frozenColumnLine:{shadow:{width:3,startColor:\\\"#CBDCFE\\\",endColor:\\\"#CBDCFE\\\"}},selectionStyle:{cellBgColor:\\\"rgba(0, 0, 255,0.1)\\\"},tooltipStyle:{bgColor:\\\"#FFF\\\",color:\\\"#000\\\",fontSize:12,fontFamily:\\\"Arial,sans-serif\\\"}};function getBackgroundColor3(e){var{row:t,table:i}=e;return 1&t-i.frozenRowCount?\\\"#fbfbfc\\\":\\\"#FFF\\\"}init_esbuild_inject();var ARCO_default={underlayBackgroundColor:\\\"#FFF\\\",defaultStyle:{color:\\\"#1B1F23\\\",bgColor:\\\"#EEF1F5\\\",fontSize:14,fontFamily:\\\"Arial,sans-serif\\\",fontWeight:600,lineHeight:14,borderColor:\\\"#e1e4e8\\\",padding:[8,12,8,12]},headerStyle:{color:\\\"#1B1F23\\\",bgColor:\\\"#EEF1F5\\\",fontSize:14,fontFamily:\\\"Arial,sans-serif\\\",fontWeight:600,lineHeight:14,borderColor:\\\"#e1e4e8\\\",padding:[8,12,8,12],hover:{cellBgColor:\\\"#c8daf6\\\"}},rowHeaderStyle:{color:\\\"#1B1F23\\\",bgColor:\\\"#EEF1F5\\\",fontSize:12,fontFamily:\\\"PingFang SC\\\",fontWeight:500,lineHeight:12,borderColor:\\\"#e1e4e8\\\",padding:[8,12,8,12],hover:{cellBgColor:\\\"#c8daf6\\\"}},cornerHeaderStyle:{color:\\\"#1B1F23\\\",bgColor:\\\"#EEF1F5\\\",fontSize:12,fontFamily:\\\"PingFang SC\\\",fontWeight:500,lineHeight:12,borderColor:\\\"#e1e4e8\\\",padding:[8,12,8,12],hover:{cellBgColor:\\\"#c8daf6\\\"}},bodyStyle:{padding:[8,12,8,12],color:\\\"#141414\\\",fontSize:14,fontFamily:\\\"Arial,sans-serif\\\",fontWeight:400,textAlign:\\\"left\\\",bgColor:getBackgroundColor3,borderColor:\\\"#e1e4e8\\\",lineHeight:14,hover:{cellBgColor:\\\"#F7F8FA\\\",inlineRowBgColor:\\\"#F3F8FF\\\",inlineColumnBgColor:\\\"#F3F8FF\\\"}},frameStyle:{borderColor:\\\"#d1d5da\\\",borderLineWidth:1,borderLineDash:[],cornerRadius:4,shadowBlur:6,shadowOffsetX:0,shadowOffsetY:0,shadowColor:\\\"rgba(00, 24, 47, 0.06)\\\"},columnResize:{lineWidth:1,lineColor:\\\"#416EFF\\\",bgColor:\\\"#D9E2FF\\\",width:3},frozenColumnLine:{shadow:{width:4,startColor:\\\"rgba(00, 24, 47, 0.05)\\\",endColor:\\\"rgba(00, 24, 47, 0)\\\"}},selectionStyle:{cellBgColor:\\\"rgba(0, 0, 255,0.1)\\\",cellBorderLineWidth:2,cellBorderColor:\\\"#3073f2\\\"},tooltipStyle:{bgColor:\\\"#FFF\\\",color:\\\"#000\\\",fontSize:12,fontFamily:\\\"Arial,sans-serif\\\"}};function getBackgroundColor4(e){var{row:t,table:i}=e;return 1&t-i.frozenRowCount?\\\"#FDFDFD\\\":\\\"#FAF9FB\\\"}init_esbuild_inject();var DEFAULT_default={underlayBackgroundColor:\\\"#FFF\\\",defaultStyle:{borderColor:\\\"#E1E4E8\\\",color:\\\"#000\\\",bgColor:\\\"#ECF1F5\\\"},headerStyle:{fontSize:16,fontWeight:\\\"bold\\\",bgColor:\\\"#ECF1F5\\\",hover:{cellBgColor:\\\"#CCE0FF\\\",inlineRowBgColor:\\\"#F3F8FF\\\",inlineColumnBgColor:\\\"#F3F8FF\\\"}},rowHeaderStyle:{fontSize:16,fontWeight:\\\"bold\\\",bgColor:\\\"#ECF1F5\\\",hover:{cellBgColor:\\\"#CCE0FF\\\",inlineRowBgColor:\\\"#F3F8FF\\\",inlineColumnBgColor:\\\"#F3F8FF\\\"}},cornerHeaderStyle:{fontSize:16,fontWeight:\\\"bold\\\"},bodyStyle:{fontSize:14,bgColor:getBackgroundColor4,hover:{cellBgColor:\\\"#CCE0FF\\\",inlineRowBgColor:\\\"#F3F8FF\\\",inlineColumnBgColor:\\\"#F3F8FF\\\"}},frameStyle:{borderColor:\\\"#E1E4E8\\\",borderLineWidth:1,borderLineDash:[],cornerRadius:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:\\\"black\\\"},columnResize:{lineWidth:1,lineColor:\\\"#416EFF\\\",bgColor:\\\"#D9E2FF\\\",width:3},frozenColumnLine:{shadow:{width:3,startColor:\\\"rgba(225, 228, 232, 0.6)\\\",endColor:\\\"rgba(225, 228, 232, 0.6)\\\"}},selectionStyle:{cellBgColor:\\\"rgba(0, 0, 255,0.1)\\\",cellBorderLineWidth:2,inlineColumnBgColor:\\\"#CCE0FF\\\",inlineRowBgColor:\\\"#CCE0FF\\\",cellBorderColor:\\\"#0000ff\\\"},tooltipStyle:{bgColor:\\\"#FFF\\\",color:\\\"#000\\\",fontSize:12,fontFamily:\\\"Arial,sans-serif\\\"}};function getFrozenRowsBorderColor(e){var{row:t,table:{frozenRowCount:i}}=e;return i-1===t?[\\\"#f2f2f2\\\",\\\"#f2f2f2\\\",\\\"#ccc7c7\\\",\\\"#f2f2f2\\\"]:[\\\"#f2f2f2\\\"]}function getBorderColor(e){var{col:t,table:i}=e,{colCount:i,frozenColCount:r}=i;return r-1===t||i-1===t?[\\\"#ccc7c7\\\",\\\"#f2f2f2\\\",\\\"#ccc7c7\\\",null]:[\\\"#ccc7c7\\\",null,\\\"#ccc7c7\\\",null]}init_esbuild_inject();var SIMPLIFY_default={underlayBackgroundColor:\\\"#FFF\\\",defaultStyle:{borderColor:getBorderColor,hover:{cellBorderColor:\\\"#0000FF\\\",cellBgColor:\\\"#D0E0E3\\\"},bgColor:\\\"#FFF\\\"},headerStyle:{color:\\\"rgba(0, 0, 0, 0.87)\\\",borderColor:getFrozenRowsBorderColor},bodyStyle:{color:\\\"rgba(0, 0, 0, 0.87)\\\"},frameStyle:{borderColor:\\\"#f2f2f2\\\",borderLineWidth:1},columnResize:{lineWidth:1,lineColor:\\\"#416EFF\\\",bgColor:\\\"#D9E2FF\\\"},selectionStyle:{cellBorderColor:\\\"#FD5\\\",cellBgColor:\\\"rgba(111, 168, 220, 0.1)\\\"},tooltipStyle:{bgColor:\\\"#FFF\\\",color:\\\"#000\\\",fontSize:12,fontFamily:\\\"Arial,sans-serif\\\"}},themes=(init_esbuild_inject(),{}),DEFAULTFONTSIZE=(init_esbuild_inject(),init_esbuild_inject(),16),DEFAULTFONTFAMILY=\\\"Arial,sans-serif\\\",DEFAULTBGCOLOR=\\\"#FFF\\\",DEFAULTBORDERCOLOR=\\\"#000\\\",DEFAULTBORDERLINEWIDTH=1,DEFAULTBORDERLINEDASH=[],DEFAULTFONTCOLOR=\\\"#000\\\",regUrl=/^(https?|ftp|file):\\\\/\\\\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/,ResizeColumnHotSpotSize=16,ResizeRowHotSpotSize=16,IndicatorDimensionKeyPlaceholder=\\\"$$indicator$$\\\",DrillDown='<svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"200\\\" height=\\\"200\\\"><rect x=\\\"0\\\" y=\\\"0\\\" width=\\\"1024\\\" height=\\\"1024\\\" rx=\\\"20%\\\" ry=\\\"20%\\\" fill=\\\"#ffffff\\\" /><path  d=\\\"M810.666667 85.333333c70.688 0 128 57.312 128 128v597.333334c0 70.688-57.312 128-128 128H213.333333c-70.688 0-128-57.312-128-128V213.333333c0-70.688 57.312-128 128-128h597.333334z m0 85.333334H213.333333a42.666667 42.666667 0 0 0-42.613333 40.533333L170.666667 213.333333v597.333334a42.666667 42.666667 0 0 0 40.533333 42.613333L213.333333 853.333333h597.333334a42.666667 42.666667 0 0 0 42.613333-40.533333L853.333333 810.666667V213.333333a42.666667 42.666667 0 0 0-40.533333-42.613333L810.666667 170.666667zM549.333333 288a5.333333 5.333333 0 0 1 5.333334 5.333333V469.333333h176a5.333333 5.333333 0 0 1 5.333333 5.333334v74.666666a5.333333 5.333333 0 0 1-5.333333 5.333334H554.666667v176a5.333333 5.333333 0 0 1-5.333334 5.333333h-74.666666a5.333333 5.333333 0 0 1-5.333334-5.333333V554.666667H293.333333a5.333333 5.333333 0 0 1-5.333333-5.333334v-74.666666a5.333333 5.333333 0 0 1 5.333333-5.333334H469.333333V293.333333a5.333333 5.333333 0 0 1 5.333334-5.333333h74.666666z\\\"></path></svg>',DrillUp='<svg class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"200\\\" height=\\\"200\\\"><rect x=\\\"0\\\" y=\\\"0\\\" width=\\\"1024\\\" height=\\\"1024\\\" rx=\\\"20%\\\" ry=\\\"20%\\\" fill=\\\"#ffffff\\\" /><path d=\\\"M810.666667 85.333333c70.688 0 128 57.312 128 128v597.333334c0 70.688-57.312 128-128 128H213.333333c-70.688 0-128-57.312-128-128V213.333333c0-70.688 57.312-128 128-128h597.333334z m0 85.333334H213.333333a42.666667 42.666667 0 0 0-42.613333 40.533333L170.666667 213.333333v597.333334a42.666667 42.666667 0 0 0 40.533333 42.613333L213.333333 853.333333h597.333334a42.666667 42.666667 0 0 0 42.613333-40.533333L853.333333 810.666667V213.333333a42.666667 42.666667 0 0 0-40.533333-42.613333L810.666667 170.666667zM693.333333 469.333333a42.666667 42.666667 0 1 1 0 85.333334H330.666667a42.666667 42.666667 0 1 1 0-85.333334h362.666666z\\\"></path></svg>',DefaultSparklineSpec={type:\\\"line\\\"};function getAxisStyle(e){return{defaultAxisStyle:getSingleAxisStyle(e.defaultAxisStyle),leftAxisStyle:getSingleAxisStyle(e.leftAxisStyle),rightAxisStyle:getSingleAxisStyle(e.rightAxisStyle),topAxisStyle:getSingleAxisStyle(e.topAxisStyle),bottomAxisStyle:getSingleAxisStyle(e.bottomAxisStyle)}}function getSingleAxisStyle(e){return e||{}}init_esbuild_inject();var defalutPoptipStyle={visible:!0,position:\\\"auto\\\",padding:8,titleStyle:{fontSize:12,fontWeight:\\\"bold\\\",fill:\\\"#4E5969\\\"},contentStyle:{fontSize:12,fill:\\\"#4E5969\\\"},panel:{visible:!0,fill:\\\"#fff\\\",stroke:\\\"#ffffff\\\",lineWidth:0,cornerRadius:3,shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:\\\"rgba(0, 0, 0, 0.1)\\\",size:0,space:12}};function getProp(e,t,i,r){var n;return null!=(n=null!=(n=null!=(n=getChainSafe(e,...i))?n:getChainSafe(t,...i))?n:r&&getChainSafe(e,...r))?n:r&&getChainSafe(t,...r)}var TableTheme=class bjb{constructor(e,t){this._defaultStyle=null,this._header=null,this._cornerHeader=null,this._cornerRightTopCell=null,this._cornerLeftBottomCell=null,this._cornerRightBottomCell=null,this._rightFrozen=null,this._bottomFrozen=null,this._rowHeader=null,this._body=null,this._scroll=null,this._tooltip=null,this._frameStyle=null,this._columnResize=null,this._dragHeaderSplitLine=null,this._frozenColumnLine=null,this._selectionStyle=null,this._axisStyle=null,this._checkboxStyle=null,this._radioStyle=null,this._textPopTipStyle=null,this.isPivot=!1,this.internalTheme={obj:e,superTheme:t}}get font(){var{obj:e,superTheme:t}=this.internalTheme;return getProp(e,t,[\\\"font\\\"],[\\\"bodyStyle\\\",\\\"font\\\"])}get underlayBackgroundColor(){var{obj:e,superTheme:t}=this.internalTheme;return getProp(e,t,[\\\"underlayBackgroundColor\\\"])}get cellInnerBorder(){var{obj:e,superTheme:t}=this.internalTheme;return null==(e=getProp(e,t,[\\\"cellInnerBorder\\\"]))||e}get cellBorderClipDirection(){var{obj:e,superTheme:t}=this.internalTheme;return null!=(e=getProp(e,t,[\\\"cellBorderClipDirection\\\"]))?e:\\\"top-left\\\"}get _contentOffset(){var{obj:e,superTheme:t}=this.internalTheme;return null!=(e=getProp(e,t,[\\\"_contentOffset\\\"]))?e:0}get defaultStyle(){if(!this._defaultStyle){const{obj:e,superTheme:t}=this.internalTheme,i=ingoreNoneValueMerge({},t.defaultStyle,e.defaultStyle);this._defaultStyle={get fontSize(){var e;return null!=(e=i.fontSize)?e:DEFAULTFONTSIZE},get fontFamily(){var e;return null!=(e=i.fontFamily)?e:DEFAULTFONTFAMILY},get fontWeight(){return i.fontWeight},get fontVariant(){return i.fontVariant},get fontStyle(){return i.fontStyle},get bgColor(){var e;return null!=(e=i.bgColor)?e:DEFAULTBGCOLOR},get color(){var e;return null!=(e=i.color)?e:DEFAULTFONTCOLOR},get borderColor(){var e;return null!=(e=i.borderColor)?e:DEFAULTBORDERCOLOR},get borderLineWidth(){var e;return null!=(e=i.borderLineWidth)?e:DEFAULTBORDERLINEWIDTH},get borderLineDash(){var e;return null!=(e=i.borderLineDash)?e:DEFAULTBORDERLINEDASH},get hover(){if(i.hover)return{get cellBgColor(){var e;return null!=(e=null==(e=i.hover)?void 0:e.cellBgColor)?e:void 0},get inlineColumnBgColor(){var e;return null!=(e=null!=(e=null==(e=i.hover)?void 0:e.inlineColumnBgColor)?e:null!=(e=i.hover)&&e.cellBgColor&&\\\"string\\\"==typeof(null==(e=i.hover)?void 0:e.cellBgColor)?changeColor(null==(e=i.hover)?void 0:e.cellBgColor,.1,!1):void 0)?e:void 0},get inlineRowBgColor(){var e;return null!=(e=null!=(e=null==(e=i.hover)?void 0:e.inlineRowBgColor)?e:null!=(e=i.hover)&&e.cellBgColor&&\\\"string\\\"==typeof(null==(e=i.hover)?void 0:e.cellBgColor)?changeColor(null==(e=i.hover)?void 0:e.cellBgColor,.1,!1):void 0)?e:void 0}}},get padding(){var e;return null!=(e=i.padding)?e:[10,16,10,16]},get textAlign(){var e;return null!=(e=i.textAlign)?e:\\\"left\\\"},get textBaseline(){var e;return null!=(e=i.textBaseline)?e:\\\"middle\\\"},get textOverflow(){var e;return null!=(e=i.textOverflow)?e:\\\"ellipsis\\\"},get lineHeight(){return i.lineHeight},get autoWrapText(){var e;return null!=(e=i.autoWrapText)&&e},get lineClamp(){var e;return null!=(e=i.lineClamp)?e:\\\"auto\\\"},get linkColor(){var e;return null!=(e=i.linkColor)?e:\\\"#3772ff\\\"},get cursor(){var e;return null!=(e=i.cursor)?e:\\\"auto\\\"},get marked(){var e;return null!=(e=i.marked)&&e},get underline(){var e;return null!=(e=i.underline)&&e},get underlineColor(){return i.underlineColor},get underlineDash(){return i.underlineDash},get underlineOffset(){return i.underlineOffset},get lineThrough(){var e;return null!=(e=i.lineThrough)&&e},get lineThroughColor(){return i.lineThroughColor},get lineThroughDash(){return i.lineThroughDash}}}return this._defaultStyle}get headerStyle(){var e,t;return this._header||(({obj:e,superTheme:t}=this.internalTheme),t=ingoreNoneValueMerge({},this.defaultStyle,t.headerStyle,e.headerStyle),this._header=this.getStyle(t)),this._header}get cornerHeaderStyle(){var e,t;return this._cornerHeader||(({obj:e,superTheme:t}=this.internalTheme),t=ingoreNoneValueMerge({},this.defaultStyle,t.cornerHeaderStyle,e.cornerHeaderStyle),this._cornerHeader=this.getStyle(t)),this._cornerHeader}get cornerRightTopCellStyle(){if(!this._cornerRightTopCell){var{obj:e,superTheme:t}=this.internalTheme;if(!t.cornerRightTopCellStyle&&!e.cornerRightTopCellStyle)return this._cornerRightTopCell;t=ingoreNoneValueMerge({},this.defaultStyle,t.cornerRightTopCellStyle,e.cornerRightTopCellStyle);this._cornerRightTopCell=this.getStyle(t)}return this._cornerRightTopCell}get cornerLeftBottomCellStyle(){if(!this._cornerLeftBottomCell){var{obj:e,superTheme:t}=this.internalTheme;if(!t.cornerLeftBottomCellStyle&&!e.cornerLeftBottomCellStyle)return this._cornerLeftBottomCell;t=ingoreNoneValueMerge({},this.defaultStyle,t.cornerLeftBottomCellStyle,e.cornerLeftBottomCellStyle);this._cornerLeftBottomCell=this.getStyle(t)}return this._cornerLeftBottomCell}get cornerRightBottomCellStyle(){if(!this._cornerRightBottomCell){var{obj:e,superTheme:t}=this.internalTheme;if(!t.cornerRightBottomCellStyle&&!e.cornerRightBottomCellStyle)return this._cornerRightBottomCell;t=ingoreNoneValueMerge({},this.defaultStyle,t.cornerRightBottomCellStyle,e.cornerRightBottomCellStyle);this._cornerRightBottomCell=this.getStyle(t)}return this._cornerRightBottomCell}get rightFrozenStyle(){if(!this._rightFrozen){var{obj:e,superTheme:t}=this.internalTheme;if(!t.rightFrozenStyle&&!e.rightFrozenStyle)return this._rightFrozen;t=ingoreNoneValueMerge({},this.defaultStyle,this.rowHeaderStyle,t.rightFrozenStyle,e.rightFrozenStyle);this._rightFrozen=this.getStyle(t)}return this._rightFrozen}get bottomFrozenStyle(){if(!this._bottomFrozen){var{obj:e,superTheme:t}=this.internalTheme;if(!t.bottomFrozenStyle&&!e.bottomFrozenStyle)return this._bottomFrozen;t=ingoreNoneValueMerge({},this.defaultStyle,this.headerStyle,t.bottomFrozenStyle,e.bottomFrozenStyle);this._bottomFrozen=this.getStyle(t)}return this._bottomFrozen}get rowHeaderStyle(){var e,t;return this._rowHeader||(({obj:e,superTheme:t}=this.internalTheme),t=ingoreNoneValueMerge({},this.defaultStyle,t.rowHeaderStyle,null!=(t=e.rowHeaderStyle)?t:this.isPivot?null:e.headerStyle),this._rowHeader=this.getStyle(t)),this._rowHeader}get bodyStyle(){var e,t;return this._body||(({obj:e,superTheme:t}=this.internalTheme),t=ingoreNoneValueMerge({},this.defaultStyle,t.bodyStyle,e.bodyStyle),this._body=this.getStyle(t)),this._body}get frameStyle(){if(!this._frameStyle){const{obj:e,superTheme:t}=this.internalTheme,i=ingoreNoneValueMerge({},t.frameStyle,e.frameStyle);this._frameStyle={get borderColor(){return i.borderColor},get borderLineWidth(){return i.borderLineWidth},get borderLineDash(){return i.borderLineDash},get innerBorder(){return i.innerBorder},get shadowBlur(){return i.shadowBlur},get shadowColor(){return i.shadowColor},get shadowOffsetX(){return i.shadowOffsetX},get shadowOffsetY(){return i.shadowOffsetY},get cornerRadius(){return i.cornerRadius}}}return this._frameStyle}get scrollStyle(){if(!this._scroll){const{obj:e,superTheme:t}=this.internalTheme,i=ingoreNoneValueMerge({},t.scrollStyle,e.scrollStyle);this._scroll={get scrollSliderColor(){var e;return null!=(e=i.scrollSliderColor)?e:\\\"#C0C0C0\\\"},get scrollRailColor(){return i.scrollRailColor},get visible(){var e;return null!=(e=i.visible)?e:\\\"scrolling\\\"},get width(){var e;return null!=(e=i.width)?e:7},get hoverOn(){var e;return null==(e=i.hoverOn)||e},get barToSide(){var e;return null!=(e=i.barToSide)&&e}}}return this._scroll}get tooltipStyle(){if(!this._tooltip){const{obj:e,superTheme:t}=this.internalTheme,i=ingoreNoneValueMerge({},t.tooltipStyle,e.tooltipStyle);this._tooltip={get fontFamily(){var e;return null!=(e=i.fontFamily)?e:DEFAULTFONTFAMILY},get fontSize(){var e;return null!=(e=i.fontSize)?e:DEFAULTFONTSIZE},get bgColor(){var e;return null!=(e=i.bgColor)?e:\\\"#000\\\"},get padding(){var e;return null!=(e=i.padding)?e:[6,8]},get color(){var e;return null!=(e=i.color)?e:\\\"#FFF\\\"}}}return this._tooltip}get columnResize(){if(!this._columnResize){const{obj:e,superTheme:t}=this.internalTheme,i=ingoreNoneValueMerge({},t.columnResize,e.columnResize);this._columnResize={get lineColor(){var e;return null!=(e=i.lineColor)?e:\\\"#416EFF\\\"},get bgColor(){var e;return null!=(e=i.bgColor)?e:\\\"#D9E2FF\\\"},get lineWidth(){var e;return null!=(e=i.lineWidth)?e:1},get width(){var e;return null!=(e=i.width)?e:i.lineWidth+2},get labelColor(){var e;return null!=(e=i.labelColor)?e:\\\"#FFF\\\"},get labelFontSize(){var e;return null!=(e=i.labelFontSize)?e:10},get labelFontFamily(){var e;return null!=(e=i.labelFontFamily)?e:\\\"sans-serif\\\"},get labelBackgroundFill(){var e;return null!=(e=i.labelBackgroundFill)?e:\\\"#3073F2\\\"},get labelBackgroundCornerRadius(){var e;return null!=(e=i.labelBackgroundCornerRadius)?e:5}}}return this._columnResize}get dragHeaderSplitLine(){if(!this._dragHeaderSplitLine){const{obj:e,superTheme:t}=this.internalTheme,i=ingoreNoneValueMerge({},t.dragHeaderSplitLine,e.dragHeaderSplitLine);this._dragHeaderSplitLine={get lineColor(){var e;return null!=(e=i.lineColor)?e:\\\"blue\\\"},get lineWidth(){var e;return null!=(e=i.lineWidth)?e:2},get shadowBlockColor(){var e;return null!=(e=i.shadowBlockColor)?e:\\\"rgba(204,204,204,0.3)\\\"}}}return this._dragHeaderSplitLine}get frozenColumnLine(){if(!this._frozenColumnLine){const{obj:e,superTheme:t}=this.internalTheme,i=ingoreNoneValueMerge({},t.frozenColumnLine,e.frozenColumnLine);this._frozenColumnLine={get shadow(){if(i.shadow)return{get width(){var e;return null!=(e=null==(e=i.shadow)?void 0:e.width)?e:24},get startColor(){var e;return null!=(e=null==(e=i.shadow)?void 0:e.startColor)?e:\\\"rgba(00, 24, 47, 0.06)\\\"},get endColor(){var e;return null!=(e=null==(e=i.shadow)?void 0:e.endColor)?e:\\\"rgba(00, 24, 47, 0)\\\"}}},get border(){if(i.border)return{get lineColor(){var e;return null!=(e=null==(e=i.border)?void 0:e.lineColor)?e:\\\"rgba(00, 24, 47, 0.06)\\\"},get bgColor(){var e;return null!=(e=null!=(e=null==(e=i.border)?void 0:e.bgColor)?e:null==(e=i.border)?void 0:e.lineColor)?e:\\\"rgba(00, 24, 47, 0.06)\\\"},get lineWidth(){var e;return null!=(e=null==(e=i.border)?void 0:e.lineWidth)?e:4},get width(){var e;return null!=(e=null!=(e=null==(e=i.border)?void 0:e.width)?e:null==(e=i.border)?void 0:e.lineWidth)?e:4}}}}}return this._frozenColumnLine}get selectionStyle(){if(!this._selectionStyle){const{obj:e,superTheme:t}=this.internalTheme,i=ingoreNoneValueMerge({},t.selectionStyle,e.selectionStyle);this._selectionStyle={get cellBgColor(){var e;return null!=(e=null==i?void 0:i.cellBgColor)?e:\\\"rgba(0, 0, 255,0.1)\\\"},get cellBorderColor(){var e;return null!=(e=null==i?void 0:i.cellBorderColor)?e:\\\"#3073f2\\\"},get cellBorderLineWidth(){var e;return null!=(e=null==i?void 0:i.cellBorderLineWidth)?e:2}}}return this._selectionStyle}get axisStyle(){var e,t;return this._axisStyle||(({obj:e,superTheme:t}=this.internalTheme),t=ingoreNoneValueMerge({},t.axisStyle,e.axisStyle),this._axisStyle=getAxisStyle(t)),this._axisStyle}get checkboxStyle(){var e,t;return this._checkboxStyle||(({obj:e,superTheme:t}=this.internalTheme),t=ingoreNoneValueMerge({},t.checkboxStyle,e.checkboxStyle),this._checkboxStyle=t),this._checkboxStyle}get radioStyle(){var e,t;return this._radioStyle||(({obj:e,superTheme:t}=this.internalTheme),t=ingoreNoneValueMerge({},t.radioStyle,e.radioStyle),this._radioStyle=t),this._radioStyle}get textPopTipStyle(){var e,t;return this._textPopTipStyle||(({obj:e,superTheme:t}=this.internalTheme),t=ingoreNoneValueMerge({},defalutPoptipStyle,t.textPopTipStyle,e.textPopTipStyle),this._textPopTipStyle=t),this._textPopTipStyle}hasProperty(e){var{obj:t,superTheme:i}=this.internalTheme;return hasThemeProperty(t,e)||hasThemeProperty(i,e)}\\\"extends\\\"(e){return new bjb(e,this)}getStyle(t){return{get fontSize(){return t.fontSize},get fontFamily(){return t.fontFamily},get fontWeight(){return t.fontWeight},get fontVariant(){return t.fontVariant},get fontStyle(){return t.fontStyle},get bgColor(){return t.bgColor},get color(){return t.color},get borderColor(){return t.borderColor},get borderLineWidth(){return t.borderLineWidth},get borderLineDash(){return t.borderLineDash},get hover(){if(t.hover)return{get cellBgColor(){var e;return null!=(e=null==(e=t.hover)?void 0:e.cellBgColor)?e:void 0},get inlineColumnBgColor(){var e;return null!=(e=null!=(e=null==(e=t.hover)?void 0:e.inlineColumnBgColor)?e:null!=(e=t.hover)&&e.cellBgColor&&\\\"string\\\"==typeof(null==(e=t.hover)?void 0:e.cellBgColor)?changeColor(null==(e=t.hover)?void 0:e.cellBgColor,.1,!1):void 0)?e:void 0},get inlineRowBgColor(){var e;return null!=(e=null!=(e=null==(e=t.hover)?void 0:e.inlineRowBgColor)?e:null!=(e=t.hover)&&e.cellBgColor&&\\\"string\\\"==typeof(null==(e=t.hover)?void 0:e.cellBgColor)?changeColor(null==(e=t.hover)?void 0:e.cellBgColor,.1,!1):void 0)?e:void 0}}},get frameStyle(){if(t.frameStyle)return{get borderColor(){var e;return null!=(e=null==(e=t.frameStyle)?void 0:e.borderColor)?e:void 0},get borderLineWidth(){var e;return null!=(e=null==(e=t.frameStyle)?void 0:e.borderLineWidth)?e:void 0},get borderLineDash(){var e;return null!=(e=null==(e=t.frameStyle)?void 0:e.borderLineDash)?e:void 0}}},get padding(){return t.padding},get textAlign(){return t.textAlign},get textBaseline(){return t.textBaseline},get textOverflow(){return t.textOverflow},get lineHeight(){return t.lineHeight},get autoWrapText(){return t.autoWrapText},get lineClamp(){return t.lineClamp},get linkColor(){return t.linkColor},get cursor(){return t.cursor},get textStick(){return t.textStick},get marked(){return t.marked},get underline(){var e;return null!=(e=t.underline)&&e},get underlineColor(){return t.underlineColor},get underlineDash(){return t.underlineDash},get underlineOffset(){return t.underlineOffset},get lineThrough(){var e;return null!=(e=t.lineThrough)&&e},get lineThroughColor(){return t.lineThroughColor},get lineThroughDash(){return t.lineThroughDash}}}};function hasThemeProperty(e,t){if(e instanceof TableTheme)return e.hasProperty(t);let i=e;if(!i)return!1;for(let r=0;r<t.length;r++)if(!(i=i[t[r]]))return!1;return!!i}var DARK=new TableTheme(DARK_default,DARK_default),BRIGHT=new TableTheme(BRIGHT_default,BRIGHT_default),ARCO=new TableTheme(ARCO_default,ARCO_default),DEFAULT=new TableTheme(DEFAULT_default,DEFAULT_default),SIMPLIFY=new TableTheme(SIMPLIFY_default,SIMPLIFY_default),builtin={DEFAULT:DEFAULT,SIMPLIFY:SIMPLIFY,ARCO:ARCO,DARK:DARK,BRIGHT:BRIGHT},theme={TableTheme:TableTheme};function of3(e){var t;return e?\\\"string\\\"==typeof e?(t=getIgnoreCase(get2(),e))?t instanceof TableTheme?t:new TableTheme(t,t):null:e instanceof TableTheme?e:new TableTheme(e,e):null}function get2(){return extend(builtin,themes)}var themes_default={DARK:DARK,BRIGHT:BRIGHT,ARCO:ARCO,DEFAULT:DEFAULT,SIMPLIFY:SIMPLIFY,theme:theme,of:of3,get:get2};function getCellMergeInfo(e,t,i){if(e.internalProps.customMergeCell){var r=e.getCustomMerge(t,i);if(r)return r.range}return!(!(e.isHeader(t,i)||null!=(r=e.getBodyColumnDefine(t,i))&&r.mergeCell)||(r=e.getCellRange(t,i)).start.col===r.end.col&&r.start.row===r.end.row)&&r}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var GROUP_ATTRIBUTES=[\\\"x\\\",\\\"y\\\",\\\"dx\\\",\\\"dy\\\",\\\"scaleX\\\",\\\"scaleY\\\",\\\"angle\\\",\\\"anchor\\\",\\\"postMatrix\\\",\\\"visible\\\",\\\"clip\\\",\\\"pickable\\\",\\\"childrenPickable\\\",\\\"zIndex\\\",\\\"cursor\\\"],AbstractComponent=class extends Group{constructor(e,t){super(e),null!=t&&t.mode&&(this.mode=t.mode,this.setMode(t.mode)),null!=t&&t.skipDefault&&(this.skipDefault=!0),this.setTheme({common:{strokeBoundsBuffer:0}}),this.attribute=e,this.onSetStage(()=>{this.render(),this.bindEvents()})}setAttribute(e,t,i){isPlainObject_default(this.attribute[e])&&isPlainObject_default(t)&&!isFunction_default(this.attribute[e])&&!isFunction_default(t)?merge(this.attribute[e],t):this.attribute[e]=t,GROUP_ATTRIBUTES.includes(e)||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!i&&!this.needUpdateTag(e)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}setAttributes(e,t){var i=Object.keys(e);this._mergeAttributes(e,i),i.every(e=>GROUP_ATTRIBUTES.includes(e))||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!t&&!this.needUpdateTags(i)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}_mergeAttributes(e,t){isNil_default(t)&&(t=Object.keys(e));for(let r=0;r<t.length;r++){var i=t[r];!isPlainObject_default(this.attribute[i])||isFunction_default(this.attribute[i])||isFunction_default(e[i])?this.attribute[i]=e[i]:merge(this.attribute[i],e[i])}}bindEvents(){}_getNodeId(e){return`${this.id}-${this.name}-`+e}_dispatchEvent(e,t){var i,r=new CustomEvent(e,t);r.manager=null==(i=this.stage)?void 0:i.eventSystem.manager,this.dispatchEvent(r)}};function loadScrollbarComponent(){registerGroup(),registerRect()}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var StateValue,POLAR_START_ANGLE=-.5*Math.PI,POLAR_END_ANGLE=1.5*Math.PI,DEFAULT_TEXT_FONT_FAMILY=\\\"PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol\\\",DEFAULT_STATES=(!function(e){e.selected=\\\"selected\\\",e.selectedReverse=\\\"selected_reverse\\\",e.hover=\\\"hover\\\",e.hoverReverse=\\\"hover_reverse\\\"}(StateValue=StateValue||{}),{[StateValue.selectedReverse]:{},[StateValue.selected]:{},[StateValue.hover]:{},[StateValue.hoverReverse]:{}}),DEFAULT_HTML_TEXT_SPEC={container:\\\"\\\",width:30,height:30,style:{}},SCROLLBAR_EVENT=\\\"scrollDrag\\\",delayMap={debounce:debounce_default,throttle:throttle_default},ScrollBar=(loadScrollbarComponent(),class $lb extends AbstractComponent{constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},$lb.defaultAttributes,e)),this.name=\\\"scrollbar\\\",this._onRailPointerDown=e=>{var{viewX:t,viewY:i}=e,{direction:r,width:n,height:o,range:a}=this.attribute,l=this._sliderSize,[s,h]=this._getScrollRange();let d;\\\"vertical\\\"===r?(r=i-this._viewPosition.y,i=clamp_default(r-l/2,s,h),d=r/o,this._slider.setAttribute(\\\"y\\\",i,!0)):(r=t-this._viewPosition.x,o=clamp_default(r-l/2,s,h),d=r/n,this._slider.setAttribute(\\\"x\\\",o,!0)),this.setScrollRange([d-(a[1]-a[0])/2,d+(a[1]-a[0])/2],!1),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()},this._onSliderPointerDown=e=>{e.stopPropagation();var t=this.attribute[\\\"direction\\\"];this._prePos=\\\"horizontal\\\"===t?e.clientX:e.clientY,this._dispatchEvent(\\\"scrollDown\\\",{pos:this._prePos,event:e}),\\\"browser\\\"===vglobal.env?(vglobal.addEventListener(\\\"pointermove\\\",this._onSliderPointerMoveWithDelay,{capture:!0}),vglobal.addEventListener(\\\"pointerup\\\",this._onSliderPointerUp)):(this.stage.addEventListener(\\\"pointermove\\\",this._onSliderPointerMoveWithDelay,{capture:!0}),this.stage.addEventListener(\\\"pointerup\\\",this._onSliderPointerUp),this.stage.addEventListener(\\\"pointerupoutside\\\",this._onSliderPointerUp))},this._computeScrollValue=e=>{var t=this.attribute[\\\"direction\\\"];let i,r,n=0;var{width:o,height:a}=this._getSliderRenderBounds();return i=\\\"vertical\\\"===t?(r=e.clientY,(n=r-this._prePos)/a):(r=e.clientX,(n=r-this._prePos)/o),[r,i]},this._onSliderPointerMove=e=>{e.stopPropagation();var t=this.getScrollRange(),[i,r]=this._computeScrollValue(e);this.setScrollRange([t[0]+r,t[1]+r],!0),this._prePos=i},this._onSliderPointerMoveWithDelay=0===this.attribute.delayTime?this._onSliderPointerMove:delayMap[this.attribute.delayType](this._onSliderPointerMove,this.attribute.delayTime),this._onSliderPointerUp=e=>{e.preventDefault();var{range:t,limitRange:i=[0,1]}=this.attribute,r=this.getScrollRange(),[,n]=this._computeScrollValue(e),r=[r[0]+n,r[1]+n];this._dispatchEvent(\\\"scrollUp\\\",{pre:t,value:clampRange_default(r,i[0],i[1])}),\\\"browser\\\"===vglobal.env?(vglobal.removeEventListener(\\\"pointermove\\\",this._onSliderPointerMoveWithDelay,{capture:!0}),vglobal.removeEventListener(\\\"pointerup\\\",this._onSliderPointerUp)):(this.stage.removeEventListener(\\\"pointermove\\\",this._onSliderPointerMoveWithDelay,{capture:!0}),this.stage.removeEventListener(\\\"pointerup\\\",this._onSliderPointerUp),this.stage.removeEventListener(\\\"pointerupoutside\\\",this._onSliderPointerUp))}}setScrollRange(e,t=!0){var i,r,{direction:n=\\\"horizontal\\\",limitRange:o=[0,1],range:a,realTime:l=!0}=this.attribute,o=clampRange_default(e,o[0],o[1]);t&&(i=this._getSliderPos(o),this._slider)&&(r=i[1]-i[0],this._sliderSize=r,\\\"horizontal\\\"===n?this._slider.setAttributes({x:i[0],width:r},!0):this._slider.setAttributes({y:i[0],height:r},!0),this.stage)&&!this.stage.autoRender&&this.stage.renderNextFrame(),this.attribute.range=o,l&&this._dispatchEvent(SCROLLBAR_EVENT,{pre:a,value:o})}getScrollRange(){return this.attribute.range}bindEvents(){var e,t;this.attribute.disableTriggerEvent||(({delayType:e=\\\"throttle\\\",delayTime:t=0}=this.attribute),this._rail&&this._rail.addEventListener(\\\"pointerdown\\\",delayMap[e](this._onRailPointerDown,t)),this._slider&&this._slider.addEventListener(\\\"pointerdown\\\",this._onSliderPointerDown))}render(){this._reset();var{direction:e=\\\"horizontal\\\",width:t,height:i,range:r,limitRange:n=[0,1],railStyle:o,sliderStyle:a,padding:l=2}=this.attribute,s=this.createOrUpdateChild(\\\"scrollbar-container\\\",{},\\\"group\\\"),t=s.createOrUpdateChild(\\\"scrollbar-rail\\\",Object.assign({x:0,y:0,width:t,height:i},o),\\\"rect\\\"),i=(this._rail=t,this._getSliderRenderBounds()),o=this._getSliderPos(clampRange_default(r,n[0],n[1])),t=o[1]-o[0],n=(this._sliderSize=t,r=\\\"horizontal\\\"===e?{x:o[0],y:i.y1,width:t,height:i.height}:{x:i.x1,y:o[0],width:i.width,height:t},s.createOrUpdateChild(\\\"slider\\\",Object.assign(Object.assign(Object.assign(Object.assign({},r),{cornerRadius:this._getDefaultSliderCornerRadius()}),a),{boundsPadding:normalizePadding(l),pickMode:\\\"imprecise\\\"}),\\\"rect\\\")),e=(this._slider=n,this._container=s,this._container.AABBBounds);this._viewPosition={x:e.x1,y:e.y1}}_getSliderRenderBounds(){var e,t,i,r,n,o;return this._sliderRenderBounds||(({width:o,height:e,padding:t=2}=this.attribute),([t,i,r,n]=normalizePadding(t)),o={x1:n,y1:t,x2:o-i,y2:e-r,width:Math.max(0,o-(n+i)),height:Math.max(0,e-(t+r))},this._sliderRenderBounds=o)}_getDefaultSliderCornerRadius(){var e,{direction:t,round:i}=this.attribute;return i?(({width:i,height:e}=this._getSliderRenderBounds()),\\\"horizontal\\\"===t?e:i):0}_getSliderPos(e){var t=this.attribute[\\\"direction\\\"],{width:i,height:r,x1:n,y1:o}=this._getSliderRenderBounds();return\\\"horizontal\\\"===t?[i*e[0]+n,i*e[1]+n]:[r*e[0]+o,r*e[1]+o]}_getScrollRange(){var e,t,i,r,n,o,a,l;return this._sliderLimitRange||(({limitRange:t=[0,1],direction:e}=this.attribute),([t,i]=clampRange_default(t,0,1)),({width:r,height:n,x1:o,y1:a}=this._getSliderRenderBounds()),l=this._sliderSize,\\\"horizontal\\\"===e?clampRange_default([o+t*r,o+i*r],o,r-l):clampRange_default([a+t*n,a+i*n],a,n-l))}_reset(){this._sliderRenderBounds=null,this._sliderLimitRange=null}});function traverseGroup(e,i){e.forEachChildren(e=>{var t=i(e);e.isContainer&&!t&&traverseGroup(e,i)})}function scale3(e,t){return[e[0]*t,e[1]*t]}function normalize(e){var[t,i]=e;let r=t*t+i*i;return 0<r&&(r=1/Math.sqrt(r)),[e[0]*r,e[1]*r]}function angle(e,t){var[i,r]=e,[n,o]=t,a=Math.sqrt((i*i+r*r)*(n*n+o*o));return Math.acos(Math.min(Math.max(a&&(i*n+r*o)/a,-1),1))}function direction(e,t){return e[0]*t[1]-t[0]*e[1]}function angleTo(e,t,i){var r=angle(e,t),n=0<=direction(e,t);return i?n?2*Math.PI-r:r:n?r:2*Math.PI-r}function measureTextSize(e,t,i={}){var r;return e?{width:(r=getTextBounds({text:e,fontFamily:t.fontFamily||i.fontFamily||DEFAULT_TEXT_FONT_FAMILY,fontSize:t.fontSize||i.fontSize||12,fontWeight:t.fontWeight||i.fontWeight,textAlign:t.textAlign||\\\"center\\\",textBaseline:t.textBaseline,ellipsis:!!t.ellipsis,maxLineWidth:t.maxLineWidth||1/0,lineHeight:t.fontSize||i.fontSize||12})).width(),height:r.height()}:{width:0,height:0}}function isRichText(e,t=\\\"type\\\"){return t in e&&\\\"rich\\\"===e[t]||isObject_default(e.text)&&\\\"rich\\\"===e.text.type}function richTextAttributeTransform(e){var t;return e.width=null!=(t=e.width)?t:0,e.height=null!=(t=e.height)?t:0,e.maxWidth=e.maxLineWidth,e.textConfig=e.text.text||e.text,e}function loadTagComponent(){registerGroup(),registerRect(),registerSymbol(),registerRichtext(),registerText()}ScrollBar.defaultAttributes={direction:\\\"horizontal\\\",round:!0,sliderSize:20,sliderStyle:{fill:\\\"rgba(0, 0, 0, .5)\\\"},railStyle:{fill:\\\"rgba(0, 0, 0, .0)\\\"},padding:2,scrollRange:[0,1],delayType:\\\"throttle\\\",delayTime:0,realTime:!0},init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var __rest=function(e,t){var i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\\\"function\\\"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i},Tag=(loadTagComponent(),class wob extends AbstractComponent{constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},wob.defaultAttributes,e)),this.name=\\\"tag\\\"}render(){var{text:r=\\\"\\\",textStyle:n={},shape:o={},panel:a={},space:l=4,minWidth:s,maxWidth:h,padding:d=4,visible:u,state:c,type:g,textAlwaysCenter:p}=this.attribute,d=normalizePadding(d),f=this.createOrUpdateChild(\\\"tag-content\\\",{x:0,y:0,zIndex:1},\\\"group\\\");let m,b=d[1]+d[3],v=d[0]+d[2],C=0,y=0;var _=o[\\\"visible\\\"],w=__rest(o,[\\\"visible\\\"]);isBoolean_default(_)&&(S=(null==w?void 0:w.size)||10,A=isNumber_default(S)?S:Math.max(S[0],S[1]),m=f.createOrUpdateChild(\\\"tag-shape\\\",Object.assign(Object.assign({symbolType:\\\"circle\\\",size:S,strokeBoundsBuffer:0},w),{visible:_,x:A/2,y:A/2}),\\\"symbol\\\"),isEmpty_default(null==c?void 0:c.shape)||(m.states=c.shape),_)&&(y=A+l);let x;if(b+=y,C+=y,isRichText({text:r})||\\\"rich\\\"===g){var S=Object.assign(Object.assign(Object.assign({},richTextAttributeTransform(Object.assign({type:g,text:r},n))),n),{visible:isValid_default(r)&&!1!==u,x:C,y:0}),w=(x=f.createOrUpdateChild(\\\"tag-text\\\",S,\\\"richtext\\\"),a)[\\\"visible\\\"],_=__rest(a,[\\\"visible\\\"]);u&&isBoolean_default(w)&&(A=this.createOrUpdateChild(\\\"tag-panel\\\",Object.assign(Object.assign({},_),{visible:w&&!!r,x:x.AABBBounds.x1,y:x.AABBBounds.y1,width:x.AABBBounds.width(),height:x.AABBBounds.height()}),\\\"rect\\\"),isEmpty_default(null==c?void 0:c.panel)||(A.states=c.panel))}else{var l=Object.assign(Object.assign({text:isObject_default(r)&&\\\"type\\\"in r&&\\\"text\\\"===r.type?r.text:r,visible:isValid_default(r)&&!1!==u,lineHeight:null==n?void 0:n.fontSize},n),{x:C,y:0}),_=(isNil_default(l.lineHeight)&&(l.lineHeight=n.fontSize),x=f.createOrUpdateChild(\\\"tag-text\\\",l,\\\"text\\\"),isEmpty_default(null==c?void 0:c.text)||(x.states=c.text),measureTextSize(l.text,n,null==(S=null==(g=this.stage)?void 0:g.getTheme())?void 0:S.text)),w=_.width,A=_.height,g=(b+=w,null!=(l=o.size)?l:10),S=isNumber_default(g)?g:Math.max(g[0],g[1]),{textAlign:_,textBaseline:l}=(v+=Math.max(A,o.visible?S:0),n);(isValid_default(s)||isValid_default(h))&&(isValid_default(s)&&b<s&&(b=s),isValid_default(h))&&b>h&&(b=h,x.setAttribute(\\\"maxLineWidth\\\",h-d[1]-d[2]));let e=0,t=0,i=0;\\\"left\\\"===_||\\\"start\\\"===_?i=1:\\\"right\\\"===_||\\\"end\\\"===_?i=-1:\\\"center\\\"===_&&(i=0),i?i<0?(e-=b,m&&m.setAttribute(\\\"x\\\",(m.attribute.x||0)-w),f.setAttribute(\\\"x\\\",-d[1]-y)):0<i&&f.setAttribute(\\\"x\\\",d[3]):(e-=b/2,m&&m.setAttribute(\\\"x\\\",(m.attribute.x||0)-w/2),f.setAttribute(\\\"x\\\",-y/2)),p&&i&&(n=((g=b-d[1]-d[3])-(o=w+y))/2+y+w/2,s=(g-o)/2+S/2,x.setAttributes({x:n*i,textAlign:\\\"center\\\"}),null!=m&&m.setAttributes({x:s*i}),f.setAttribute(\\\"x\\\",d[2+i]*i)),\\\"middle\\\"===l?(t-=v/2,m&&m.setAttribute(\\\"y\\\",0)):\\\"bottom\\\"===l?(t-=v,m&&m.setAttribute(\\\"y\\\",-A/2),f.setAttribute(\\\"y\\\",-d[2])):\\\"top\\\"===l&&(f.setAttribute(\\\"y\\\",d[0]),m)&&m.setAttribute(\\\"y\\\",A/2);h=a[\\\"visible\\\"],_=__rest(a,[\\\"visible\\\"]);u&&isBoolean_default(h)&&(p=this.createOrUpdateChild(\\\"tag-panel\\\",Object.assign(Object.assign({},_),{visible:h&&!!r,x:e,y:t,width:b,height:v}),\\\"rect\\\"),isEmpty_default(null==c?void 0:c.panel)||(p.states=c.panel))}}}),DEFAULT_THEME=(Tag.defaultAttributes={visible:!0,textStyle:{fontSize:12,fill:\\\"#000\\\",textAlign:\\\"left\\\",textBaseline:\\\"top\\\"},space:4,padding:4,shape:{fill:\\\"#000\\\"}},init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),{visible:!0,position:\\\"auto\\\",titleStyle:{fontSize:16,fill:\\\"#08979c\\\"},contentStyle:{fontSize:12,fill:\\\"green\\\"},panel:{visible:!0,fill:\\\"#e6fffb\\\",size:12,space:0,stroke:\\\"#87e8de\\\",lineWidth:1,cornerRadius:4}}),theme2={poptip:merge({},DEFAULT_THEME)};function loadPoptipComponent(){registerGroup(),registerText(),registerSymbol(),registerRect()}function setPoptipTheme(e){merge(theme2.poptip,DEFAULT_THEME,e)}var __rest2=function(e,t){var i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\\\"function\\\"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i},_tBounds=new AABBBounds,PopTip=(loadPoptipComponent(),class Apb extends AbstractComponent{constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},Apb.defaultAttributes,e)),this.name=\\\"poptip\\\",this.positionList=[\\\"top\\\",\\\"tl\\\",\\\"tr\\\",\\\"bottom\\\",\\\"bl\\\",\\\"br\\\",\\\"left\\\",\\\"lt\\\",\\\"lb\\\",\\\"right\\\",\\\"rt\\\",\\\"rb\\\"]}render(){var{titleStyle:e={},position:t,contentStyle:i={},panel:r={},space:n=4,minWidth:o=0,maxWidth:a=1/0,padding:l=4,maxWidthPercent:s,visible:h,state:d,dx:u=0,dy:c=0}=this.attribute,{title:g=\\\"\\\",content:p=\\\"\\\"}=this.attribute,g=this.attribute.titleFormatMethod?this.attribute.titleFormatMethod(g):g,p=this.attribute.contentFormatMethod?this.attribute.contentFormatMethod(p):p,l=normalizePadding(l),f=this.createOrUpdateChild(\\\"poptip-content\\\",{x:0,y:0,zIndex:1},\\\"group\\\"),m=a-l[1]-l[3],b=isValid_default(g)&&!1!==h,g=Object.assign(Object.assign({text:isArray_default(g)?g:[g],visible:b,wrap:!0},e),{x:l[3],y:l[0],maxLineWidth:m,textAlign:\\\"left\\\",textBaseline:\\\"top\\\"}),e=f.createOrUpdateChild(\\\"poptip-title\\\",g,\\\"text\\\"),g=(isEmpty_default(null==d?void 0:d.title)||(e.states=d.title),e.AABBBounds),v=g.height(),g=g.width();let C=v+n;b||(C=0);var y=isValid_default(p)&&!1!==h,v=Object.assign(Object.assign({text:isArray_default(p)?p:[p],visible:y,wrap:!0},i),{x:l[3],y:l[0]+C,maxLineWidth:m,textAlign:\\\"left\\\",textBaseline:\\\"top\\\"}),h=f.createOrUpdateChild(\\\"poptip-content\\\",v,\\\"text\\\"),p=(isEmpty_default(null==d?void 0:d.content)||(h.states=d.content),h.AABBBounds),i=p.height(),m=p.width();y&&(C+=i);let _=max(g+l[1]+l[3],m+l[1]+l[3]),w=(_>a?_=a:_<o&&(_=o),l[0]+l[2]+C);var x=r[\\\"visible\\\"],S=__rest2(r,[\\\"visible\\\"]),A=null!=(v=S.size)?v:12,T=isArray_default(A)?[A[0]+(null!=(p=S.space)?p:0),A[1]+(null!=(i=S.space)?i:0)]:A+(null!=(g=S.space)?g:0),R=null!=(m=S.lineWidth)?m:1,M=this.stage?[null!=(a=this.stage.viewWidth)?a:this.stage.width,null!=(o=this.stage.viewHeight)?o:this.stage.height]:void 0,B=(M&&(r=this.AABBBounds,p=null!=(v=this.attribute.x)?v:r.x1,i=M[0]-r.x1,g=Math.max(p,i),m=(isArray_default(A)?A[0]:12)+3,(g=Math.min(g-m,g*s))<_)&&(_=g,a=l[1]+l[3],e.setAttribute(\\\"maxLineWidth\\\",g-a),h.setAttribute(\\\"maxLineWidth\\\",g-a),w=l[0]+l[2],b&&(w+=e.AABBBounds.height()+n),w+=h.AABBBounds.height()),\\\"auto\\\"===t);let E,P=-1/0;for(let I=0;I<this.positionList.length+1;I++){var L=B?this.positionList[I===this.positionList.length?E:I]:t,{angle:L,offset:k}=this.getAngleAndOffset(L,_,w,isArray_default(T)?T:[T,T-R]);if(isBoolean_default(x)&&(H=(isArray_default(A)?A[0]:A)/4,H=f.createOrUpdateChild(\\\"poptip-symbol-panel\\\",Object.assign(Object.assign({},S),{visible:x&&(y||b),x:H,y:0,strokeBoundsBuffer:-1,boundsPadding:-2,anchor:[0,0],symbolType:\\\"arrow2Left\\\",angle:L,dx:k[0],dy:k[1],size:A,zIndex:-9}),\\\"symbol\\\"),isEmpty_default(null==d?void 0:d.panel)||(H.states=d.panel),L=f.createOrUpdateChild(\\\"poptip-rect-panel\\\",Object.assign(Object.assign({},S),{visible:x&&(y||b),x:0,y:0,width:_,height:w,zIndex:-8}),\\\"rect\\\"),isEmpty_default(null==d?void 0:d.panel)||(L.states=d.panel)),f.setAttributes({x:-k[0]+u,y:-k[1]+c}),!B||!M)break;_tBounds.setValue(0,0,_,w).transformWithMatrix(f.globalTransMatrix);var H=_tBounds,L=(new Bounds).setValue(0,0,M[0],M[1]);if(rectInsideAnotherRect(H,L,!1))break;k=getRectIntersect(H,L,!1),L=(k.x2-k.x1)*(k.y2-k.y1);L>P&&(P=L,E=I)}}getAngleAndOffset(e,t,i,r){var n=r[1]/2;switch(e){case\\\"tl\\\":return{angle:pi/2*3,offset:[t/4,i+n],rectOffset:[-t/4,-i-r[1]]};case\\\"top\\\":return{angle:pi/2*3,offset:[t/2,i+n],rectOffset:[0,-i-r[1]]};case\\\"tr\\\":return{angle:pi/2*3,offset:[t/4*3,i+n],rectOffset:[t/4*3,-i-r[1]]};case\\\"rt\\\":return{angle:0,offset:[-n,i/5],rectOffset:[t/4*3,-i-r[1]]};case\\\"right\\\":return{angle:0,offset:[-n,i/2],rectOffset:[t/4*3,-i-r[1]]};case\\\"rb\\\":return{angle:0,offset:[-n,i/5*4],rectOffset:[t/4*3,-i-r[1]]};case\\\"bl\\\":return{angle:pi/2,offset:[t/4,-n],rectOffset:[-t/4,-i-r[1]]};case\\\"bottom\\\":return{angle:pi/2,offset:[t/2,-n],rectOffset:[0,-i-r[1]]};case\\\"br\\\":return{angle:pi/2,offset:[t/4*3,-n],rectOffset:[t/4*3,-i-r[1]]};case\\\"lt\\\":return{angle:pi,offset:[t+n,i/5],rectOffset:[-t/4,-i-r[1]]};case\\\"left\\\":return{angle:pi,offset:[t+n,i/2],rectOffset:[0,-i-r[1]]};case\\\"lb\\\":return{angle:pi,offset:[t+n,i/5*4],rectOffset:[t/4*3,-i-r[1]]}}}}),__decorate78=(PopTip.defaultAttributes={position:\\\"rt\\\",visible:!0,title:null,content:null,titleStyle:{fontSize:12,fill:\\\"#000\\\",textAlign:\\\"left\\\",textBaseline:\\\"top\\\"},contentStyle:{fontSize:12,fill:\\\"#000\\\",textAlign:\\\"left\\\",textBaseline:\\\"top\\\"},maxWidthPercent:.8,space:8,padding:10},init_esbuild_inject(),init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a});function wrapPoptip(e,t){return merge(e,theme2.poptip,t),e}var PopTipRenderContribution=class{render(t,e,i,r,n,o,a,l,s,h,d,u,c){if(1===t._showPoptip){var{visible:g,visibleCb:p}=t.attribute.poptip||{};if(!(!1===g||p&&!1===p(t))){var g={};merge(g,PopTip.defaultAttributes,t.attribute.poptip||{}),this.poptipComponent?this.poptipComponent.initAttributes(g):this.poptipComponent=new PopTip(g);let e=t.attribute.poptip||{};\\\"text\\\"===t.type&&null==e.title&&null==e.content&&(wrapPoptip(p={},e),(e=p).content=null!=(g=e.content)?g:t.attribute.text);p=t.globalTransMatrix,g=(this.poptipComponent.setAttributes(Object.assign(Object.assign({visibleAll:!0,pickable:!1,childrenPickable:!1},e),{x:p.e,y:p.f})),h.stage.tryInitInteractiveLayer(),h.stage.getLayer(\\\"_builtin_interactive\\\"));g&&g.add(this.poptipComponent)}}else 2===t._showPoptip&&(t._showPoptip=0,this.poptipComponent)&&this.poptipComponent.setAttributes({visibleAll:!1})}},PopTipRenderContribution=__decorate78([injectable()],PopTipRenderContribution),__decorate79=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),PopTipPlugin=class{constructor(){this.name=\\\"poptip\\\",this.activeEvent=\\\"onRegister\\\",this._uid=Generator.GenAutoIncrementId(),this.key=this.name+this._uid,this.poptip=e=>{var t,i=e.target;i.isContainer||!i.attribute?this.unpoptip(e):i!==this.activeGraphic&&(t=i.attribute[\\\"poptip\\\"],t&&(i.setAttributes({}),i._showPoptip=1),this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2),this.setActiveGraphic(i,!0))},this.unpoptip=e=>{this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2,this.setActiveGraphic(null,!0))}}activate(e){this.pluginService=e;var t=this.pluginService[\\\"stage\\\"];t.addEventListener(\\\"pointerover\\\",this.poptip)}setActiveGraphic(e,t){this.activeGraphic=e,this.pluginService.stage.renderNextFrame()}deactivate(e){var t=this.pluginService[\\\"stage\\\"];t.removeEventListener(\\\"pointerover\\\",this.poptip)}},PopTipPlugin=__decorate79([injectable()],PopTipPlugin),PopTipForClipedTextPlugin=class{constructor(){this.name=\\\"poptipForText\\\",this.activeEvent=\\\"onRegister\\\",this._uid=Generator.GenAutoIncrementId(),this.key=this.name+this._uid,this.pointerlave=e=>{var t=this.pluginService[\\\"stage\\\"];e.target===t&&this.unpoptip(e)},this.poptip=e=>{var t,i=e.target;\\\"text\\\"!==i.type||!i.cliped||i.isContainer||!i.attribute||i.attribute.disableAutoClipedPoptip?this.unpoptip(e):i!==this.activeGraphic&&(({poptip:t={}}=i.attribute),t&&(i.setAttributes({}),i._showPoptip=1),this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2),this.setActiveGraphic(i,!0))},this.unpoptip=e=>{this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2,this.setActiveGraphic(null,!0))}}activate(e){this.pluginService=e;var t=this.pluginService[\\\"stage\\\"];t.addEventListener(\\\"pointerover\\\",this.poptip),t.addEventListener(\\\"pointerleave\\\",this.pointerlave)}setActiveGraphic(e,t){this.activeGraphic=e,this.pluginService.stage.renderNextFrame()}deactivate(e){var t=this.pluginService[\\\"stage\\\"];t.removeEventListener(\\\"pointerover\\\",this.poptip),t.removeEventListener(\\\"pointerleave\\\",this.pointerlave)}},PopTipForClipedTextPlugin=__decorate79([injectable()],PopTipForClipedTextPlugin),popTipModule=new ContainerModule((e,t,i,r)=>{i(PopTipRenderContribution)||(e(PopTipRenderContribution).toSelf().inSingletonScope(),e(InteractiveSubRenderContribution).toService(PopTipRenderContribution)),i(PopTipPlugin)||(e(PopTipPlugin).toSelf(),e(AutoEnablePlugins).toService(PopTipPlugin)),i(PopTipForClipedTextPlugin)||(e(PopTipForClipedTextPlugin).toSelf(),e(AutoEnablePlugins).toService(PopTipForClipedTextPlugin))});function loadPoptip(){container.load(popTipModule)}function loadSegmentComponent(){registerGroup(),registerLine(),registerPolygon(),registerSymbol()}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),loadSegmentComponent();var AXIS_ELEMENT_NAME,AxisStateValue,Segment=class fsb extends AbstractComponent{getStartAngle(){return this._startAngle}getEndAngle(){return this._endAngle}getMainSegmentPoints(){return this._mainSegmentPoints}constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},fsb.defaultAttributes,e)),this.name=\\\"segment\\\"}render(){this.removeAllChild(!0),this._reset();const{startSymbol:e,endSymbol:t,lineStyle:n,state:o,visible:i=!0,multiSegment:r,mainSegmentIndex:a}=this.attribute;if(i){this._computeLineAngle();var l=this._renderSymbol(e,\\\"start\\\"),s=this._renderSymbol(t,\\\"end\\\");if(this.startSymbol=l,this.endSymbol=s,r){l=[...this.attribute.points];isValidNumber_default(a)?l[a]=this._clipPoints(l[a]):(s=this._clipPoints(flattenArray(l)),l[0][0]=s[0],l[l.length-1][l[l.length-1].length-1]=s[s.length-1]),l.forEach((e,t)=>{var i,r=graphicCreator.line(Object.assign(Object.assign({points:e},isArray_default(n)?null!=(r=n[t])?r:n[n.length-1]:n),{fill:!1}));r.name=this.name+\\\"-line\\\",r.id=this._getNodeId(\\\"line\\\"+t),isEmpty_default(null==o?void 0:o.line)||(r.states=isArray_default(o.line)?null!=(i=o.line[t])?i:o.line[o.line.length-1]:o.line),this.add(r)})}else{let e=graphicCreator.line;s=(e=array(n)[0].cornerRadius?graphicCreator.polygon:e)(Object.assign(Object.assign({points:this._clipPoints(this.attribute.points)},array(n)[0]),{fill:!1,closePath:!1}));s.name=this.name+\\\"-line\\\",s.id=this._getNodeId(\\\"line\\\"),isEmpty_default(null==o?void 0:o.line)||(s.states=[].concat(o.line)[0]),this.add(s)}}}_renderSymbol(r,n){var o=this._getMainSegmentPoints();if(o.length){var{autoRotate:a=!0}=r;let i;if(r&&r.visible){var l=this._startAngle,s=this._endAngle,h=this.attribute[\\\"state\\\"],d=o[0],o=o[o.length-1],{refX:u=0,refY:c=0,refAngle:g=0,style:p,symbolType:f,size:m=12}=r;let e,t;t=\\\"start\\\"===n?(e={x:d.x+(isValidNumber_default(l)?u*Math.cos(l)+c*Math.cos(l-Math.PI/2):0),y:d.y+(isValidNumber_default(l)?u*Math.sin(l)+c*Math.sin(l-Math.PI/2):0)},l+Math.PI/2):(e={x:o.x+(isValidNumber_default(s)?u*Math.cos(s)+c*Math.cos(s-Math.PI/2):0),y:o.y+(isValidNumber_default(s)?u*Math.sin(s)+c*Math.sin(s-Math.PI/2):0)},s+Math.PI/2),(i=graphicCreator.symbol(Object.assign(Object.assign(Object.assign({},e),{symbolType:f,size:m,angle:a?t+g:0,strokeBoundsBuffer:0}),p))).name=this.name+`-${n}-symbol`,i.id=this._getNodeId(n+\\\"-symbol\\\"),isEmpty_default(null==h?void 0:h.symbol)||(i.states=h.symbol),this.add(i)}return i}}_getMainSegmentPoints(){var e,t,i;return this._mainSegmentPoints||(({points:e,multiSegment:i,mainSegmentIndex:t}=this.attribute),i=i?isValidNumber_default(t)?e[t]:flattenArray(e):e,this._mainSegmentPoints=i)}_clipPoints(e){var{startSymbol:t={},endSymbol:i={}}=this.attribute;let r=e;return t.visible&&(t=t.clip?t.size||10:0,r=[{x:e[0].x-t/2*(Math.cos(this._startAngle)||0),y:e[0].y-t/2*(Math.sin(this._startAngle)||0)},...r.slice(1)]),i.visible&&(t=i.clip?i.size||10:0,i={x:e[e.length-1].x-t/2*(Math.cos(this._endAngle)||0),y:e[e.length-1].y-t/2*(Math.sin(this._endAngle)||0)},r=[...r.slice(0,r.length-1),i]),r}_computeLineAngle(){var e,t,i,r=this._getMainSegmentPoints();r.length<=1||(i=r[0],t=r[1],e=r[r.length-2],r=r[r.length-1],i=[i.x-t.x,i.y-t.y],t=Math.atan2(i[1],i[0]),i=[r.x-e.x,r.y-e.y],r=Math.atan2(i[1],i[0]),this._startAngle=t,this._endAngle=r)}_reset(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}},DEFAULT_STATES2=(Segment.defaultAttributes={visible:!0,lineStyle:{lineWidth:1,stroke:\\\"#000\\\"},startSymbol:{visible:!1,autoRotate:!0,symbolType:\\\"triangle\\\",size:12,refX:0,refY:0,refAngle:0,style:{fill:\\\"#000\\\",zIndex:1}},endSymbol:{visible:!1,autoRotate:!0,symbolType:\\\"triangle\\\",size:12,refX:0,refY:0,refAngle:0,style:{fill:\\\"#000\\\",zIndex:1}}},init_esbuild_inject(),init_esbuild_inject(),!function(e){e.innerView=\\\"inner-view\\\",e.axisContainer=\\\"axis-container\\\",e.labelContainer=\\\"axis-label-container\\\",e.tickContainer=\\\"axis-tick-container\\\",e.tick=\\\"axis-tick\\\",e.subTick=\\\"axis-sub-tick\\\",e.label=\\\"axis-label\\\",e.title=\\\"axis-title\\\",e.gridContainer=\\\"axis-grid-container\\\",e.grid=\\\"axis-grid\\\",e.gridRegion=\\\"axis-grid-region\\\",e.line=\\\"axis-line\\\",e.background=\\\"axis-background\\\",e.axisLabelBackground=\\\"axis-label-background\\\"}(AXIS_ELEMENT_NAME=AXIS_ELEMENT_NAME||{}),!function(e){e.selected=\\\"selected\\\",e.selectedReverse=\\\"selected_reverse\\\",e.hover=\\\"hover\\\",e.hoverReverse=\\\"hover_reverse\\\"}(AxisStateValue=AxisStateValue||{}),{[AxisStateValue.selectedReverse]:{},[AxisStateValue.selected]:{},[AxisStateValue.hover]:{},[AxisStateValue.hoverReverse]:{}}),DEFAULT_AXIS_THEME=(init_esbuild_inject(),{title:{space:4,padding:0,textStyle:{fontSize:12,fill:\\\"#333333\\\",fontWeight:\\\"normal\\\",fillOpacity:1}},label:{visible:!0,inside:!1,space:4,padding:0,style:{fontSize:12,fill:\\\"#333\\\",fontWeight:\\\"normal\\\",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:\\\"#000\\\",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:\\\"#999\\\",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:\\\"#000\\\",strokeOpacity:1}}});function getElMap(e){const t={};return traverseGroup(e,e=>{\\\"group\\\"!==e.type&&e.id&&(t[e.id]=e)}),t}function getVerticalCoord(e,t){return{x:e.x+t[0],y:e.y+t[1]}}init_esbuild_inject();var AxisBase=class extends AbstractComponent{constructor(){super(...arguments),this.name=\\\"axis\\\",this.data=[],this.tickLineItems=[],this.subTickLineItems=[],this.axisLabelLayerSize={},this.axisLabelsContainer=null,this._onHover=e=>{const t=e.target;t!==this._lastHover&&t.name&&!isEmpty_default(t.states)&&(t.addState(StateValue.hover,!0),traverseGroup(this.axisContainer,e=>{e!==t&&e.name&&!isEmpty_default(e.states)&&e.addState(StateValue.hoverReverse,!0)}),this._lastHover=t)},this._onUnHover=e=>{this._lastHover&&(traverseGroup(this.axisContainer,e=>{e.name&&!isEmpty_default(e.states)&&(e.removeState(StateValue.hoverReverse),e.removeState(StateValue.hover))}),this._lastHover=null)},this._onClick=e=>{const t=e.target;this._lastSelect===t&&t.hasState(StateValue.selected)?(this._lastSelect=null,traverseGroup(this.axisContainer,e=>{e.name&&!isEmpty_default(e.states)&&(e.removeState(StateValue.selectedReverse),e.removeState(StateValue.selected))})):t.name&&!isEmpty_default(t.states)&&(t.addState(StateValue.selected,!0),traverseGroup(this.axisContainer,e=>{e!==t&&e.name&&!isEmpty_default(e.states)&&e.addState(StateValue.selectedReverse,!0)}),this._lastSelect=t)}}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}getBoundsWithoutRender(e){var t=cloneDeep(this.attribute),i=(merge(this.attribute,e),graphicCreator.group({x:this.attribute.x,y:this.attribute.y}));return this.add(i),this._renderInner(i),this.removeChild(i),this.attribute=t,i.AABBBounds}render(){this._prevInnerView=this._innerView&&getElMap(this._innerView),this.removeAllChild(!0),this._innerView=graphicCreator.group({x:0,y:0,pickable:!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent()}_bindEvent(){var e,t;this.attribute.disableTriggerEvent||(({hover:e,select:t}=this.attribute),e&&(this._innerView.addEventListener(\\\"pointermove\\\",this._onHover),this._innerView.addEventListener(\\\"pointerout\\\",this._onUnHover)),t&&this._innerView.addEventListener(\\\"pointerdown\\\",this._onClick))}_renderInner(e){const{title:t,label:i,tick:r,line:n,items:o}=this.attribute,a=graphicCreator.group({x:0,y:0,zIndex:1});if(a.name=AXIS_ELEMENT_NAME.axisContainer,a.id=this._getNodeId(\\\"container\\\"),a.setMode(this.mode),this.axisContainer=a,e.add(a),n&&n.visible&&this.renderLine(a),o&&o.length&&(this.data=this._transformItems(o[0]),r&&r.visible&&this.renderTicks(a),i)&&i.visible){const d=graphicCreator.group({x:0,y:0,pickable:!1});d.name=AXIS_ELEMENT_NAME.labelContainer,d.id=this._getNodeId(\\\"label-container\\\"),this.axisLabelsContainer=d,a.add(d),o.forEach((e,t)=>{var i=this.renderLabels(d,e,t),r=i.getChildren();this.beforeLabelsOverlap(r,e,i,t,o.length),this.handleLabelsOverlap(r,e,i,t,o.length),this.afterLabelsOverlap(r,e,i,t,o.length);let a=0,l=0,s=\\\"center\\\",h=\\\"middle\\\";r.forEach(e=>{var t=e.attribute,i=null!=(i=t.angle)?i:0,r=e.AABBBounds;let n=r.width(),o=r.height();i&&(n=Math.abs(n*Math.cos(i)),o=Math.abs(o*Math.sin(i))),a=Math.max(a,n),l=Math.max(l,o),s=t.textAlign,h=t.textBaseline}),this.axisLabelLayerSize[t]={width:a,height:l,textAlign:s,textBaseline:h}})}t&&t.visible&&this.renderTitle(a)}renderTicks(e){const a=this.getTickLineItems(),l=graphicCreator.group({x:0,y:0,pickable:!1}),n=(l.name=AXIS_ELEMENT_NAME.tickContainer,l.id=this._getNodeId(\\\"tick-container\\\"),e.add(l),a.forEach((e,t)=>{var i,r=graphicCreator.line(Object.assign({},this._getTickLineAttribute(\\\"tick\\\",e,t,a)));if(r.name=AXIS_ELEMENT_NAME.tick,r.id=this._getNodeId(e.id),isEmpty_default(null==(i=this.attribute.tick)?void 0:i.state))r.states=DEFAULT_STATES;else{const n=this.data[t],o=merge({},DEFAULT_STATES,this.attribute.tick.state);Object.keys(o).forEach(e=>{isFunction_default(o[e])&&(o[e]=o[e](n.rawValue,t,n,this.data))}),r.states=o}l.add(r)}),this.tickLineItems=a,this.attribute)[\\\"subTick\\\"];var t;n&&n.visible&&((t=this.getSubTickLineItems()).length&&t.forEach((t,i)=>{var e=graphicCreator.line(Object.assign({},this._getTickLineAttribute(\\\"subTick\\\",t,i,a)));if(e.name=AXIS_ELEMENT_NAME.subTick,e.id=this._getNodeId(\\\"\\\"+i),isEmpty_default(n.state))e.states=DEFAULT_STATES;else{const r=merge({},DEFAULT_STATES,n.state);Object.keys(r).forEach(e=>{isFunction_default(r[e])&&(r[e]=r[e](t.value,i,t,a))}),e.states=r}l.add(e)}),this.subTickLineItems=t)}renderLabels(e,t,o){var i=this.attribute.label[\\\"dataFilter\\\"];i&&isFunction_default(i)&&(t=i(t,o));const a=this._transformItems(t),l=graphicCreator.group({x:0,y:0,pickable:!1});return l.name=AXIS_ELEMENT_NAME.labelContainer+\\\"-layer-\\\"+o,l.id=this._getNodeId(\\\"label-container-layer-\\\"+o),e.add(l),a.forEach((t,i)=>{var e,r=this._getLabelAttribute(t,i,a,o),r=isRichText(r)?graphicCreator.richtext(richTextAttributeTransform(r)):graphicCreator.text(r);if(r.name=AXIS_ELEMENT_NAME.label,r.id=this._getNodeId(`layer${o}-label-`+t.id),isEmpty_default(null==(e=this.attribute.label)?void 0:e.state))r.states=DEFAULT_STATES;else{const n=merge({},DEFAULT_STATES,this.attribute.label.state);Object.keys(n).forEach(e=>{isFunction_default(n[e])&&(n[e]=n[e](t,i,a,o))}),r.states=n}l.add(r)}),l}renderTitle(e){var t=this.getTitleAttribute(),t=new Tag(Object.assign({},t));t.name=AXIS_ELEMENT_NAME.title,t.id=this._getNodeId(\\\"title\\\"),e.add(t)}getVerticalCoord(e,t,i){return getVerticalCoord(e,this.getVerticalVector(t,i,e))}getTextAlign(e){let t=\\\"center\\\";return isNumberClose(e[0],0)?isNumberClose(e[1],0)?Object.is(e[1],-0)?t=\\\"start\\\":Object.is(e[0],-0)&&(t=\\\"end\\\"):t=\\\"center\\\":0<e[0]?t=\\\"start\\\":e[0]<0&&(t=\\\"end\\\"),t}getTickLineItems(){const e=this.attribute[\\\"tick\\\"],t=this.data,l=[],{alignWithLabel:s,inside:h=!1,length:d,dataFilter:i}=e;let u=1;return 2<=t.length&&(u=t[1].value-t[0].value),(i&&isFunction_default(i)?i(t):t).forEach(i=>{let r=i.point,n=i.value;if(!s){var o=i.value-u/2;if(this.isInValidValue(o))return;r=this.getTickCoord(o),n=o}o=this.getVerticalCoord(r,d,h);if(\\\"3d\\\"===this.mode){var a=this.getVerticalVector(d,h,r);let e=0,t=0;abs(a[0])>abs(a[1])?e=pi/2*(o.x>r.x?1:-1):t=pi/2*(o.y>r.y?-1:1),l.push({start:r,end:o,value:n,id:\\\"tick-\\\"+i.id,anchor:[r.x,r.y],alpha:e,beta:t})}else l.push({start:r,end:o,value:n,id:\\\"tick-\\\"+i.id})}),l}getSubTickLineItems(){var e=this.attribute[\\\"subTick\\\"],i=[],{count:r=4,inside:n=!1,length:o=2}=e,a=this.tickLineItems,l=a.length;if(2<=l)for(let t=0;t<l-1;t++){var s=a[t],h=a[t+1];for(let e=0;e<r;e++){var d=(e+1)/(r+1),d=(1-d)*s.value+d*h.value,u=this.getTickCoord(d),c=this.getVerticalCoord(u,o,n);i.push({start:u,end:c,value:d,id:\\\"sub-tick-\\\"+d})}}return i}_getTickLineAttribute(e,t,i,r){let n=get_default(this.attribute,e+\\\".style\\\");var o=this.data[i],{start:o,end:a,anchor:l,alpha:s,beta:h}=(n=isFunction_default(n)?merge({},get_default(DEFAULT_AXIS_THEME,e+\\\".style\\\"),\\\"tick\\\"===e?n(o.rawValue,i,o,this.data):n(t.value,i,t,r)):n,t);return Object.assign({points:[o,a],anchor:l,alpha:s,beta:h},n)}_getLabelAttribute(e,t,i,r){var{space:n=4,inside:o=!1,formatMethod:a,type:l=\\\"text\\\",text:s}=this.attribute.label;let h=n,d=0;null!=(n=this.attribute.tick)&&n.visible&&this.attribute.tick.inside===o&&(d=this.attribute.tick.length||4),null!=(n=this.attribute.subTick)&&n.visible&&this.attribute.subTick.inside===o&&(d=Math.max(d,this.attribute.subTick.length||2)),h+=d;var n=this.getRelativeVector(e.point),n=(0<r&&(0===n[1]?h+=(this.axisLabelLayerSize[r-1].height+get_default(this.attribute,\\\"label.space\\\",4))*r:h+=(this.axisLabelLayerSize[r-1].width+get_default(this.attribute,\\\"label.space\\\",4))*r),this.getVerticalCoord(e.point,h,o)),u=this.getVerticalVector(h||1,o,n),a=a?a(\\\"\\\"+e.label,e,t,i,r):e.label;let c=this.attribute.label[\\\"style\\\"];c=isFunction_default(c)?merge({},DEFAULT_AXIS_THEME.label.style,c(e,t,i,r)):c;o=this.getLabelAlign(u,o,c.angle);return c=merge(o,c),isFunction_default(c.text)&&(c.text=c.text({label:e.label,value:e.rawValue,index:e.index,layer:r})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(n,u,a,c)),{text:null!=s?s:a,lineHeight:null==c?void 0:c.fontSize,type:l}),c)}getLabelPosition(e,t,i,r){return e}_transformItems(e){const i=[];return e.forEach(e=>{var t;i.push(Object.assign(Object.assign({},e),{point:this.getTickCoord(e.value),id:null!=(t=e.id)?t:e.label}))}),i}release(){super.release(),this._prevInnerView=null,this._innerView=null}};function rotate2(e,t,i,r,n){return{x:(e-r)*Math.cos(i)+(t-n)*Math.sin(i)+r,y:(e-r)*Math.sin(i)+(n-t)*Math.cos(i)+n}}function genNormalBounds(e){var t=e.AABBBounds;return{x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,centerX:e.attribute.x,centerY:e.attribute.y,angle:e.attribute.angle}}function genRotateBounds(e){e.forEach(e=>{var t,i,r;!e.rotatedBounds&&e.attribute.angle&&(i=(r=rotate2((t=genNormalBounds(e)).centerX,t.centerY,t.angle,e.attribute.x,e.attribute.y)).x-t.centerX,r=r.y-t.centerY,t.x1+=i,t.x2+=i,t.y1+=r,t.y2+=r,t.centerX+=i,t.centerY+=r,e.rotatedBounds=t)})}function itemIntersect(e,t){return isRectIntersect(e.AABBBounds,t.AABBBounds,!1)&&(!e.rotatedBounds||!t.rotatedBounds||isRotateAABBIntersect(e.rotatedBounds,t.rotatedBounds,!0))}init_esbuild_inject(),init_esbuild_inject();var methods={parity:function(e){return e.filter((e,t)=>t%2?e.setAttribute(\\\"opacity\\\",0):1)},greedy:function(e,i){let r;return e.filter((e,t)=>t&&intersect2(r,e,i)?e.setAttribute(\\\"opacity\\\",0):(r=e,1))}};function intersect2(e,t,i){var r=e.AABBBounds,n=t.AABBBounds;return i>Math.max(n.x1-r.x2,r.x1-n.x2,n.y1-r.y2,r.y1-n.y2)&&(!e.rotatedBounds||!t.rotatedBounds||i>Math.max(t.rotatedBounds.x1-e.rotatedBounds.x2,e.rotatedBounds.x1-t.rotatedBounds.x2,t.rotatedBounds.y1-e.rotatedBounds.y2,e.rotatedBounds.y1-t.rotatedBounds.y2))}function hasOverlap(e,t){for(let i,r=1,n=e.length,o=e[0];r<n;o=i,++r)if(intersect2(o,i=e[r],t))return!0}function hasBounds(e){var t=e.AABBBounds;return 1<t.width()&&1<t.height()}function reset(e){return e.forEach(e=>e.setAttribute(\\\"opacity\\\",1)),e}function autoHide(e,i){if(!isEmpty_default(e)){var r=e.filter(hasBounds);if(!isEmpty_default(r)){let t;genRotateBounds(t=reset(r));var{method:n=\\\"parity\\\",separation:o=0}=i,a=isFunction_default(n)?n:methods[n]||methods.parity;if(3<=t.length&&hasOverlap(t,o)){for(;3<=(t=a(t,o)).length&&hasOverlap(t,o););if(t.length<3||i.lastVisible){var l=last(r);if(!l.attribute.opacity){n=t.length;if(1<n){l.setAttribute(\\\"opacity\\\",1);for(let e=n-1;0<=e&&intersect2(t[e],l,o);e--)t[e].setAttribute(\\\"opacity\\\",0)}}}}r.forEach(e=>{e.setAttribute(\\\"visible\\\",!!e.attribute.opacity)})}}}function autoRotate(i,e){if(!isEmpty_default(i)){var{orient:r,labelRotateAngle:n=[0,45,90]}=e;if(0!==n.length&&!i.some(e=>!!e.attribute.angle)){let e=0,t=0;for(n&&0<n.length&&(t=n.length);e<t;){const o=n[e++];if(i.forEach(e=>{e.attribute.angle=degreeToRadian(o)}),tryRotate(r,i),!hasIntersect(i))break}}}}function hasIntersect(e){for(let t=1;t<e.length;t++)if(itemIntersect(e[t-1],e[t]))return!0;return!1}function tryRotate(e,t){\\\"bottom\\\"!==e&&\\\"top\\\"!==e||rotateXAxis(e,t),\\\"left\\\"!==e&&\\\"right\\\"!==e||rotateYAxis(e,t),genRotateBounds(t)}function clampAngle(e=0){if(e<0)for(;e<0;)e+=2*Math.PI;if(0<e)for(;e>=2*Math.PI;)e-=2*Math.PI;return e}function rotateYAxis(i,e){e.forEach((e,t)=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},getYAxisLabelAlign(i,e.attribute.angle)),{angle:clampAngle(e.attribute.angle)}))})}function rotateXAxis(t,e){e.forEach(e=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},getXAxisLabelAlign(t,e.attribute.angle)),{angle:clampAngle(e.attribute.angle)}))})}function getXAxisLabelAlign(e,t=0){let i=[\\\"center\\\",\\\"left\\\",\\\"left\\\",\\\"left\\\",\\\"center\\\",\\\"right\\\",\\\"right\\\",\\\"right\\\",\\\"left\\\"],r=[\\\"top\\\",\\\"top\\\",\\\"middle\\\",\\\"bottom\\\",\\\"bottom\\\",\\\"bottom\\\",\\\"middle\\\",\\\"top\\\",\\\"top\\\"];\\\"top\\\"===e&&(i=[\\\"center\\\",\\\"right\\\",\\\"right\\\",\\\"right\\\",\\\"center\\\",\\\"left\\\",\\\"left\\\",\\\"left\\\",\\\"right\\\"],r=[\\\"bottom\\\",\\\"bottom\\\",\\\"middle\\\",\\\"top\\\",\\\"top\\\",\\\"top\\\",\\\"middle\\\",\\\"bottom\\\",\\\"bottom\\\"]);var n=(t=clampAngle(t))/(.5*Math.PI),n=n===Math.floor(n)?2*Math.floor(n):2*Math.floor(n)+1;return{textAlign:i[n],textBaseline:r[n]}}function getYAxisLabelAlign(e,t=0){let i=[\\\"right\\\",\\\"right\\\",\\\"center\\\",\\\"left\\\",\\\"center\\\",\\\"left\\\",\\\"center\\\",\\\"right\\\",\\\"right\\\"],r=[\\\"middle\\\",\\\"middle\\\",\\\"top\\\",\\\"top\\\",\\\"middle\\\",\\\"middle\\\",\\\"bottom\\\",\\\"bottom\\\",\\\"middle\\\"];\\\"right\\\"===e&&(i=[\\\"left\\\",\\\"right\\\",\\\"right\\\",\\\"right\\\",\\\"left\\\",\\\"left\\\",\\\"left\\\",\\\"left\\\",\\\"right\\\"],r=[\\\"middle\\\",\\\"bottom\\\",\\\"middle\\\",\\\"top\\\",\\\"top\\\",\\\"top\\\",\\\"middle\\\",\\\"bottom\\\",\\\"bottom\\\"]);var n=(t=clampAngle(t))/(.5*Math.PI),n=n===Math.floor(n)?2*Math.floor(n):2*Math.floor(n)+1;return{textAlign:i[n],textBaseline:r[n]}}function autoLimit(e,t){const{limitLength:s,verticalLimitLength:h,ellipsis:d=\\\"...\\\",orient:u,axisLength:c}=t;if(!isEmpty_default(e)&&isValidNumber_default(s)){const g=Math.sin(Math.PI/10);e.forEach(e=>{var t=e.attribute.angle,i=!isNil_default(t),r=i?Math.cos(t):1,t=i?Math.sin(t):0,n=!i||Math.abs(t)<=g,i=i&&Math.abs(r)<=g,o=\\\"top\\\"===u||\\\"bottom\\\"===u;if(o){if(i&&Math.floor(e.AABBBounds.height())<=s)return;if(n&&Math.floor(e.AABBBounds.width())<=h)return}var a=e.attribute.direction;if(!o){if(\\\"vertical\\\"===a&&Math.floor(e.AABBBounds.height())<=h)return;if(\\\"vertical\\\"!==a){if(n&&Math.floor(e.AABBBounds.width())<=s)return;if(i&&Math.floor(e.AABBBounds.height())<=h)return}}let l=null;l=n||i?o?n?h:s:\\\"vertical\\\"===a||i?h:s:o?(({x1:n,x2:a}=e.AABBBounds),0<(i=t/r)&&n<=c&&s/i+n>c?(c-n)/Math.abs(r):i<0&&0<=a&&s/i+a<0?a/Math.abs(r):Math.abs(s/t)):Math.abs(s/r),isValidNumber_default(e.attribute.maxLineWidth)&&(l=isValidNumber_default(l)?Math.min(e.attribute.maxLineWidth,l):e.attribute.maxLineWidth),e.setAttributes({maxLineWidth:l,ellipsis:null!=(o=e.attribute.ellipsis)?o:d})})}}function alignAxisLabels(e,t,i,r,n){if(\\\"right\\\"===r||\\\"left\\\"===r){if(\\\"left\\\"===n){const o=\\\"right\\\"===r?0:-1;e.forEach(e=>{e.setAttributes({x:t+i*o,textAlign:\\\"left\\\"})})}else if(\\\"right\\\"===n){const a=\\\"right\\\"===r?1:0;e.forEach(e=>{e.setAttributes({x:t+i*a,textAlign:\\\"right\\\"})})}else if(\\\"center\\\"===n){const l=\\\"right\\\"===r?1:-1;e.forEach(e=>{e.setAttributes({x:t+.5*i*l,textAlign:\\\"center\\\"})})}}else if(\\\"bottom\\\"===r||\\\"top\\\"===r)if(\\\"top\\\"===n){const s=\\\"bottom\\\"===r?0:-1;e.forEach(e=>{e.setAttributes({y:t+i*s,textBaseline:\\\"top\\\"})})}else if(\\\"bottom\\\"===n){const h=\\\"bottom\\\"===r?1:0;e.forEach(e=>{e.setAttributes({y:t+i*h,textBaseline:\\\"bottom\\\"})})}else if(\\\"middle\\\"===n){const d=\\\"bottom\\\"===r?1:-1;e.forEach(e=>{e.setAttributes({y:t+.5*i*d,textBaseline:\\\"middle\\\"})})}}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var LineAxisMixin=class{isInValidValue(e){return e<0||1<e}getTickCoord(e){var t=this.attribute[\\\"start\\\"],i=this.getRelativeVector();return{x:t.x+i[0]*e,y:t.y+i[1]*e}}getRelativeVector(e){var{start:t,end:i}=this.attribute;return[i.x-t.x,i.y-t.y]}getVerticalVector(e,t=!1,i){var{verticalFactor:r=1}=this.attribute,n=normalize(this.getRelativeVector());return scale3([n[1],-1*n[0]],e*(t?1:-1)*r)}};function loadBasicAxis(){registerGroup(),registerLine(),registerRichtext(),registerText()}function loadLineAxisComponent(){loadBasicAxis(),registerRect()}init_esbuild_inject();var __rest3=function(e,t){var i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\\\"function\\\"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i},LineAxis=(loadLineAxisComponent(),class Fyb extends AxisBase{constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},Fyb.defaultAttributes,e),t)}_renderInner(e){var t,i,r=(super._renderInner(e),this.attribute)[\\\"panel\\\"];r&&r.visible&&(i=(t=this.axisContainer).AABBBounds,(i=graphicCreator.rect(Object.assign({x:i.x1,y:i.y1,width:i.width(),height:i.height()},r.style))).name=AXIS_ELEMENT_NAME.background,i.id=this._getNodeId(\\\"background\\\"),i.states=merge({},DEFAULT_STATES2,null!=(r=r.state)?r:{}),t.insertBefore(i,t.firstChild))}renderLine(e){var{start:t,end:i,line:r}=this.attribute,{startSymbol:n,endSymbol:o,style:a,state:l}=r,r=__rest3(r,[\\\"startSymbol\\\",\\\"endSymbol\\\",\\\"style\\\",\\\"breakRange\\\",\\\"breakShape\\\",\\\"breakShapeStyle\\\",\\\"state\\\"]),t=Object.assign({points:[t,i],startSymbol:n,endSymbol:o,lineStyle:a},r),i=(isEmpty_default(l)||(t.state={line:merge({},DEFAULT_STATES2,l),symbol:merge({},DEFAULT_STATES2,l)}),new Segment(t));i.name=AXIS_ELEMENT_NAME.line,i.id=this._getNodeId(\\\"line\\\"),e.add(i)}getTitleAttribute(){var e=this.attribute.title,{position:t=\\\"middle\\\",space:i=4,textStyle:r={},autoRotate:n=!0,shape:o,background:a,state:l={},maxWidth:s}=e,e=__rest3(e,[\\\"position\\\",\\\"space\\\",\\\"textStyle\\\",\\\"autoRotate\\\",\\\"shape\\\",\\\"background\\\",\\\"state\\\",\\\"maxWidth\\\"]);let h=.5;\\\"start\\\"===t?h=0:\\\"end\\\"===t&&(h=1);var{verticalFactor:d=1}=this.attribute,d=-1*d,u=this.getTickCoord(h),c=this.getRelativeVector();let g=0;if(null!=(p=this.attribute.label)&&p.visible&&!1===this.attribute.label.inside){const w=+get_default(this.attribute,\\\"label.space\\\",4);g+=w;var p=Object.keys(this.axisLabelLayerSize).length;0===c[1]?(b=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0,isFinite(b)?g+=b+(p-1)*w:g=0):(0===c[0]?(b=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.width():0,isFinite(b)?g+=b+(p-1)*w:g=0):Object.keys(this.axisLabelLayerSize).forEach((e,t)=>{g+=this.axisLabelLayerSize[e].width+(0<t?w:0)}),p=\\\"start\\\"===(b=this.axisLabelLayerSize[0].textAlign)||\\\"left\\\"===b,b=\\\"center\\\"===b,m=0<c[1],g=1==d?m?p?g:b?g/2:w:p?w:b?g/2:g:m?p?w:b?g/2:g:p?g:b?g/2:w)}let f=0;null!=(d=this.attribute.tick)&&d.visible&&!1===this.attribute.tick.inside&&(f=this.attribute.tick.length||4);var m,p=(f=null!=(m=this.attribute.subTick)&&m.visible&&!1===this.attribute.subTick.inside?Math.max(f,this.attribute.subTick.length||2):f)+g+i,b=this.getVerticalCoord(u,p,!1),d=this.getVerticalVector(p,!1,{x:0,y:0});let v,C,y=e[\\\"angle\\\"],_=(v=\\\"start\\\"===t?\\\"start\\\":\\\"end\\\"===t?\\\"end\\\":\\\"center\\\",C=isNil_default(y)&&n?(y=angleTo(c,[1,0],!0),({verticalFactor:m=1}=this.attribute),1==-1*m?\\\"bottom\\\":\\\"top\\\"):(v=this.getTextAlign(d),this.getTextBaseline(d,!1)),s);isNil_default(_)&&(({verticalLimitSize:i,verticalMinSize:u,orient:t}=this.attribute),n=Math.min(i||1/0,u||1/0),isValidNumber_default(n))&&(_=\\\"bottom\\\"===t||\\\"top\\\"===t?y!==Math.PI/2?(c=Math.abs(Math.cos(null!=y?y:0)))<1e-6?1/0:this.attribute.end.x/c:n-p:y&&0!==y?(m=Math.abs(Math.sin(y)))<1e-6?1/0:this.attribute.end.y/m:n-p);d=Object.assign(Object.assign(Object.assign({},b),e),{maxWidth:_,textStyle:Object.assign({textAlign:v,textBaseline:C},r),state:{text:merge({},DEFAULT_STATES2,l.text),shape:merge({},DEFAULT_STATES2,l.shape),panel:merge({},DEFAULT_STATES2,l.background)}});return d.angle=y,o&&o.visible&&(d.shape=Object.assign({visible:!0},o.style),o.space)&&(d.space=o.space),a&&a.visible&&(d.panel=Object.assign({visible:!0},a.style)),d}getTextBaseline(e,t){let i=\\\"middle\\\";var{verticalFactor:r=1}=this.attribute,r=(t?1:-1)*r;return isNumberClose(e[1],0)?i=!isNumberClose(e[0],0)||Object.is(e[0],-0)||Object.is(e[1],-0)?\\\"middle\\\":1==r?\\\"bottom\\\":\\\"top\\\":0<e[1]?i=\\\"top\\\":e[1]<0&&(i=\\\"bottom\\\"),i}getLabelAlign(e,t,i){var r=this.attribute.orient;if([\\\"top\\\",\\\"bottom\\\",\\\"right\\\",\\\"left\\\"].includes(r)||0===e[0]&&0===e[1]){if(\\\"top\\\"===r||\\\"bottom\\\"===r)return getXAxisLabelAlign(t?\\\"bottom\\\"===r?\\\"top\\\":\\\"bottom\\\":r,i);if(\\\"left\\\"===r||\\\"right\\\"===r)return getYAxisLabelAlign(t?\\\"left\\\"===r?\\\"right\\\":\\\"left\\\":r,i)}return{textAlign:this.getTextAlign(e),textBaseline:this.getTextBaseline(e,t)}}beforeLabelsOverlap(e,t,i,r,n){var o,a,l,s,h,d,u,c,g,p,f,{flush:m=!1}=this.attribute.label||{};m&&e.length&&(({orient:m,start:o,end:a}=this.attribute),m=\\\"bottom\\\"===m||\\\"top\\\"===m,l=e[0],s=last(e),h=m?l.attribute.x>s.attribute.x:l.attribute.y<s.attribute.y,m?(m=o.x,f=a.x,u=(c=h?s:l).AABBBounds.x1,p=(d=h?l:s).AABBBounds.x2,u<m&&(c.attribute.angle?c.setAttributes({dx:(null!=(g=c.attribute.dx)?g:0)+m-u}):c.setAttributes({x:m,textAlign:\\\"left\\\"})),f<p&&(d.attribute.angle?d.setAttributes({dx:(null!=(g=d.attribute.dx)?g:0)+f-p}):d.setAttributes({x:f,textAlign:\\\"right\\\"}))):(m=(u=h?s:l).AABBBounds.y2,g=(c=h?l:s).AABBBounds.y1,p=o.y,f=a.y,g<p&&(c.attribute.angle?c.setAttributes({dy:(null!=(d=c.attribute.dy)?d:0)+p-g}):c.setAttributes({y:p,textBaseline:\\\"top\\\"})),f<m&&(u.attribute.angle?u.setAttributes({dy:(null!=(h=u.attribute.dy)?h:0)+f-m}):u.setAttributes({y:f,textBaseline:\\\"bottom\\\"}))))}handleLabelsOverlap(e,t,i,r,n){var o,a,l,s,h,d,u,c,g,p,f;isEmpty_default(e)||(({verticalLimitSize:a,label:p,orient:o}=this.attribute),a=this._getAxisLabelLimitLength(a,n),({layoutFunc:p,autoRotate:l,autoRotateAngle:f,autoLimit:s,limitEllipsis:h,autoHide:d,autoHideMethod:u,autoHideSeparation:c,lastVisible:g}=p),isFunction_default(p)?p(e,t,r,this):(l&&autoRotate(e,{labelRotateAngle:f,orient:o}),s&&isValidNumber_default(a)&&0<a&&(f=(p=\\\"left\\\"===o||\\\"right\\\"===o)?Math.abs(this.attribute.start.y-this.attribute.end.y):Math.abs(this.attribute.start.x-this.attribute.end.x),autoLimit(e,{limitLength:a,verticalLimitLength:!p&&(d||l)?1/0:f/e.length,ellipsis:h,orient:o,axisLength:f})),d&&autoHide(e,{orient:o,method:u,separation:c,lastVisible:g})))}afterLabelsOverlap(t,e,i,r,n){var{verticalLimitSize:o,orient:a}=this.attribute,l=\\\"bottom\\\"===a||\\\"top\\\"===a,s=i.AABBBounds;let h=l?s.height():s.width();var d=this.attribute[\\\"verticalMinSize\\\"];if(isValidNumber_default(d)&&(!isValidNumber_default(o)||d<=o)){o=this._getAxisLabelLimitLength(d,n);let e,t;h=Math.max(h,o),\\\"left\\\"===a?(e=s.x2-h,t=s.y1):\\\"right\\\"===a?(e=s.x1,t=s.y1):\\\"top\\\"===a?(e=s.x1,t=s.y2-h):\\\"bottom\\\"===a&&(e=s.x1,t=s.y1);d=graphicCreator.rect({x:e,y:t,width:l?s.width():h,height:l?h:s.height(),pickable:!1});d.name=AXIS_ELEMENT_NAME.axisLabelBackground,d.id=this._getNodeId(\\\"axis-label-background\\\"),i.insertBefore(d,i.firstChild)}if(isValid_default(this.attribute.label.containerAlign)){let e;\\\"left\\\"===a?e=s.x2:\\\"right\\\"===a?e=s.x1:\\\"top\\\"===a?e=s.y2:\\\"bottom\\\"===a&&(e=s.y1),alignAxisLabels(t,e,h,a,this.attribute.label.containerAlign)}}_getAxisLabelLimitLength(e,t){var{label:i,title:r,line:n,tick:o}=this.attribute,i=null!=(i=i.space)?i:4;let a=e,l=0,s=0;var h,n=n&&n.visible?null!=(n=n.style.lineWidth)?n:1:0,o=o&&o.visible?null!=(o=o.length)?o:4:0;return r&&r.visible&&\\\"string\\\"==typeof r.text&&(l=measureTextSize(r.text,r.textStyle,null==(h=null==(h=this.stage)?void 0:h.getTheme())?void 0:h.text).height,h=normalizePadding(r.padding),s=r.space+h[0]+h[2]),a=a&&(a-i-s-l-n-o)/t}});function loadPagerComponent(){registerGroup(),registerSymbol(),registerText()}LineAxis.defaultAttributes=DEFAULT_AXIS_THEME,mixin(LineAxis,LineAxisMixin),init_esbuild_inject(),init_esbuild_inject();var LegendStateValue,LegendEvent,LEGEND_ELEMENT_NAME,DEFAULT_HANDLER_STYLE={space:8,style:{fill:\\\"rgb(47, 69, 84)\\\",cursor:\\\"pointer\\\",size:15},state:{disable:{fill:\\\"rgb(170, 170, 170)\\\",cursor:\\\"not-allowed\\\"},hover:{}}},Pager=(loadPagerComponent(),class FBb extends AbstractComponent{getCurrent(){return this._current}constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},FBb.defaultAttributes,e)),this.name=\\\"pager\\\",this._current=1,this._onHover=e=>{var t=e.target;t.hasState(\\\"disable\\\")||t.addState(\\\"hover\\\")},this._onUnHover=e=>{e.target.removeState(\\\"hover\\\")},this._onClick=e=>{var t=e.target;if(\\\"preHandler\\\"===t.name){if(1===this._current)return;--this._current,1===this._current?t.addState(\\\"disable\\\"):t.removeState(\\\"disable\\\"),this._dispatchEvent(\\\"toPrev\\\",{current:this._current,total:this._total,direction:\\\"pre\\\",event:e})}if(\\\"nextHandler\\\"===t.name){if(this._current===this._total)return;this._current+=1,this._current===this._total?t.addState(\\\"disable\\\"):t.removeState(\\\"disable\\\"),this._dispatchEvent(\\\"toNext\\\",{current:this._current,total:this._total,direction:\\\"next\\\",event:e})}1<this._current&&this.preHandler.removeState(\\\"disable\\\"),this._current<this._total&&this.nextHandler.removeState(\\\"disable\\\"),this.text.setAttribute(\\\"text\\\",this._getPageText(this._current))}}render(){this._reset();var{layout:e=\\\"horizontal\\\",handler:t=DEFAULT_HANDLER_STYLE,total:i,defaultCurrent:r=1,textStyle:n,padding:o=0}=this.attribute,o=(this._current=r,normalizePadding(o)),e=\\\"horizontal\\\"===e,a=graphicCreator.group({x:0,y:0}),l=t.style||{},s=l.size||15,h=null!=(h=t.space)?h:8,d=t.state||{};let{preShape:u,nextShape:c}=t;u=u||(e?\\\"triangleLeft\\\":\\\"triangleUp\\\"),c=c||(e?\\\"triangleRight\\\":\\\"triangleDown\\\");var t=graphicCreator.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:\\\"imprecise\\\"},l),{x:0,y:0,symbolType:u,size:s})),{width:g,height:p}=(t.states=d,t.name=\\\"preHandler\\\",this.preHandler=t,a.add(t),measureTextSize(this._getPageText(i),Object.assign({textAlign:\\\"center\\\",textBaseline:\\\"middle\\\"},n),null==(g=null==(g=this.stage)?void 0:g.getTheme())?void 0:g.text)),f=isNumber_default(s)?s:s[0],m=isNumber_default(s)?s:s[1],r=graphicCreator.text(Object.assign({x:e?f/2+h+g/2:0,y:e?0:m/2+h+p/2,text:this._getPageText(r),textAlign:\\\"center\\\",textBaseline:\\\"middle\\\",lineHeight:null==n?void 0:n.fontSize},n)),n=(this.text=r,a.add(r),graphicCreator.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:\\\"imprecise\\\"},l),{x:e?f+2*h+g:0,y:e?0:m+2*h+p,symbolType:c,size:s}))),r=(n.name=\\\"nextHandler\\\",n.states=d,this.nextHandler=n,a.add(n),1===this._total?(t.addState(\\\"disable\\\"),n.addState(\\\"disable\\\")):1===this._current?t.addState(\\\"disable\\\"):this._current===i&&n.addState(\\\"disable\\\"),a.AABBBounds),l=r.width(),f=r.height();a.translateTo(0-r.x1+o[3],0-r.y1+o[0]),this.add(a),this.attribute.width=l+o[1]+o[3],this.attribute.height=f+o[0]+o[2],this._bindEvents()}_bindEvents(){this.attribute.disableTriggerEvent||(this.preHandler&&(this.preHandler.addEventListener(\\\"pointerenter\\\",this._onHover),this.preHandler.addEventListener(\\\"pointerleave\\\",this._onUnHover),this.preHandler.addEventListener(\\\"pointerdown\\\",this._onClick)),this.nextHandler&&(this.nextHandler.addEventListener(\\\"pointerenter\\\",this._onHover),this.nextHandler.addEventListener(\\\"pointerleave\\\",this._onUnHover),this.nextHandler.addEventListener(\\\"pointerdown\\\",this._onClick)))}_reset(){this.removeAllChild(!0),this._current=1,this._total=this.attribute.total,this.preHandler=this.nextHandler=this.text=null}_getPageText(e){var t=this.attribute[\\\"pageFormatter\\\"];return t?isFunction_default(t)?t(e,this._total):(\\\"\\\"+t).replace(\\\"{current}\\\",\\\"\\\"+e).replace(\\\"{total}\\\",\\\"\\\"+this._total):e+\\\"/\\\"+this._total}setTotal(e){e!==this.attribute.total&&(this._total=e,1!==this._current&&this._current<=e?this.setAttributes({total:e,defaultCurrent:this._current}):this.setAttribute(\\\"total\\\",e))}}),DEFAULT_SHAPE_SIZE=(Pager.defaultAttributes={handler:DEFAULT_HANDLER_STYLE,textStyle:{fill:\\\"rgb(51, 51, 51)\\\",fontSize:12}},init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),10),DEFAULT_SHAPE_SPACE=8,DEFAULT_LABEL_SPACE=8,DEFAULT_VALUE_SPACE=8,DEFAULT_ITEM_SPACE_COL=16,DEFAULT_ITEM_SPACE_ROW=8,DEFAULT_TITLE_SPACE=12,DEFAULT_PAGER_SPACE=12,LegendBase=(!function(e){e.selected=\\\"selected\\\",e.unSelected=\\\"unSelected\\\",e.selectedHover=\\\"selectedHover\\\",e.unSelectedHover=\\\"unSelectedHover\\\",e.focus=\\\"focus\\\"}(LegendStateValue=LegendStateValue||{}),!function(e){e.legendItemHover=\\\"legendItemHover\\\",e.legendItemUnHover=\\\"legendItemUnHover\\\",e.legendItemClick=\\\"legendItemClick\\\",e.legendItemAttributeUpdate=\\\"legendItemAttributeUpdate\\\"}(LegendEvent=LegendEvent||{}),!function(e){e.innerView=\\\"innerView\\\",e.title=\\\"legendTitle\\\",e.item=\\\"legendItem\\\",e.itemShape=\\\"legendItemShape\\\",e.itemLabel=\\\"legendItemLabel\\\",e.itemValue=\\\"legendItemValue\\\",e.focus=\\\"legendItemFocus\\\"}(LEGEND_ELEMENT_NAME=LEGEND_ELEMENT_NAME||{}),class extends AbstractComponent{constructor(){super(...arguments),this.name=\\\"legend\\\",this._title=null}render(){this.removeAllChild(!0);var{interactive:e=!0,title:t,padding:i=0}=this.attribute,i=normalizePadding(i),r=graphicCreator.group({x:i[3],y:i[0],pickable:e,childrenPickable:e}),r=(r.name=LEGEND_ELEMENT_NAME.innerView,this.add(r),this._innerView=r,null!=t&&t.visible&&this._renderTitle(t),this._renderContent(),this._adjustLayout(),e&&this._bindEvents(),this._innerView.AABBBounds);this.attribute.width=r.width()+i[1]+i[3],this.attribute.height=r.height()+i[0]+i[2]}_renderTitle(e){var{text:t=\\\"\\\",textStyle:i,padding:r=0,background:n,minWidth:o,maxWidth:a,shape:l}=e,t={x:0,y:0,text:t,textStyle:i,padding:normalizePadding(r),minWidth:o,maxWidth:a},i=(l&&l.visible&&(t.shape=Object.assign({visible:!0},l.style),isValid_default(l.space))&&(t.space=l.space),n&&n.visible&&(t.panel=Object.assign({visible:!0},n.style)),new Tag(t));i.name=LEGEND_ELEMENT_NAME.title,this._title=i,this._innerView.add(i)}_adjustLayout(){var e,t,i;this._title&&(e=this._innerView.AABBBounds.width(),t=this._title.AABBBounds.width(),\\\"center\\\"===(i=null==(i=this.attribute.title)?void 0:i.align)?this._title.setAttribute(\\\"x\\\",(e-t)/2):\\\"end\\\"===i&&this._title.setAttribute(\\\"x\\\",e-t))}});function loadSliderComponent(){registerGroup(),registerText(),registerRect(),registerSymbol()}function loadBaseLegend(){registerGroup(),loadTagComponent()}function loadDiscreteLegendComponent(){loadBaseLegend(),loadPagerComponent(),loadScrollbarComponent()}function loadColorContinuousLegendComponent(){loadBaseLegend(),loadSliderComponent()}function loadSizeContinuousLegendComponent(){loadBaseLegend(),loadSliderComponent(),registerPath()}init_esbuild_inject(),init_esbuild_inject();var __rest4=function(e,t){var i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\\\"function\\\"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i},DEFAULT_STATES3={[LegendStateValue.focus]:{},[LegendStateValue.selected]:{},[LegendStateValue.selectedHover]:{},[LegendStateValue.unSelected]:{},[LegendStateValue.unSelectedHover]:{}},DiscreteLegend=(loadDiscreteLegendComponent(),class SCb extends LegendBase{constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},SCb.defaultAttributes,e)),this.name=\\\"discreteLegend\\\",this._itemsContainer=null,this._itemHeightByUser=void 0,this._itemHeight=0,this._itemMaxWidth=0,this._onHover=e=>{var t=e.target;if(t&&t.name&&t.name.startsWith(LEGEND_ELEMENT_NAME.item)){t=t.delegate;if(this._lastActiveItem){if(this._lastActiveItem.id===t.id)return;this._unHover(this._lastActiveItem,e)}this._hover(t,e)}else this._lastActiveItem&&(this._unHover(this._lastActiveItem,e),this._lastActiveItem=null)},this._onUnHover=e=>{this._lastActiveItem&&(this._unHover(this._lastActiveItem,e),this._lastActiveItem=null)},this._onClick=t=>{var e=t.target;if(e&&e.name&&e.name.startsWith(LEGEND_ELEMENT_NAME.item)){const o=e.delegate;if(e.name===LEGEND_ELEMENT_NAME.focus){var e=o.hasState(LegendStateValue.focus);o.toggleState(LegendStateValue.focus),e?null!=(e=this._itemsContainer)&&e.getChildren().forEach(e=>{this._removeLegendItemState(e,[LegendStateValue.unSelected,LegendStateValue.unSelectedHover,LegendStateValue.focus],t),this._setLegendItemState(e,LegendStateValue.selected,t)}):(this._setLegendItemState(o,LegendStateValue.selected,t),this._removeLegendItemState(o,[LegendStateValue.unSelected,LegendStateValue.unSelectedHover],t),null!=(e=this._itemsContainer)&&e.getChildren().forEach(e=>{o!==e&&(this._removeLegendItemState(e,[LegendStateValue.selected,LegendStateValue.selectedHover,LegendStateValue.focus],t),this._setLegendItemState(e,LegendStateValue.unSelected,t))}))}else{null!=(e=this._itemsContainer)&&e.getChildren().forEach(e=>{e.removeState(LegendStateValue.focus)});var{selectMode:e=\\\"multiple\\\",allowAllCanceled:i=!0}=this.attribute,r=o.hasState(LegendStateValue.selected),n=this._getSelectedLegends();if(\\\"multiple\\\"===e){if(!1===i&&r&&1===n.length)return void this._dispatchLegendEvent(LegendEvent.legendItemClick,o,t);r?(this._removeLegendItemState(o,[LegendStateValue.selected,LegendStateValue.selectedHover],t),this._setLegendItemState(o,LegendStateValue.unSelected,t)):(this._setLegendItemState(o,LegendStateValue.selected,t),this._removeLegendItemState(o,[LegendStateValue.unSelected,LegendStateValue.unSelectedHover],t))}else this._setLegendItemState(o,LegendStateValue.selected,t),this._removeLegendItemState(o,[LegendStateValue.unSelected,LegendStateValue.unSelectedHover],t),null!=(e=this._itemsContainer)&&e.getChildren().forEach(e=>{o!==e&&(this._removeLegendItemState(e,[LegendStateValue.selected,LegendStateValue.selectedHover],t),this._setLegendItemState(e,LegendStateValue.unSelected,t))})}this._dispatchLegendEvent(LegendEvent.legendItemClick,o,t)}}}setSelected(i){var e;(null==(e=this._itemsContainer)?void 0:e.getChildren()).forEach(e=>{var t=e.data;i.includes(t.label)?(this._setLegendItemState(e,LegendStateValue.selected),this._removeLegendItemState(e,[LegendStateValue.unSelected,LegendStateValue.unSelectedHover])):(this._removeLegendItemState(e,[LegendStateValue.selected,LegendStateValue.selectedHover]),this._setLegendItemState(e,LegendStateValue.unSelected))})}_renderItems(){var{item:e={},maxCol:t=1,maxRow:i=2,maxWidth:r,maxHeight:n,defaultSelected:o,lazyload:a,autoPage:l}=this.attribute,{spaceCol:s=DEFAULT_ITEM_SPACE_COL,spaceRow:h=DEFAULT_ITEM_SPACE_ROW}=e,d=this._itemsContainer,{items:u,isHorizontal:c,startIndex:e,isScrollbar:g}=this._itemContext,p=g?1:c?i:t;let f,{doWrap:m,maxWidthInCol:b,startX:v,startY:C,pages:y}=this._itemContext;for(let S=e,A=u.length;S<A&&!(a&&y>this._itemContext.currentPage*p);S++){a&&(this._itemContext.startIndex=S+1),(f=u[S]).id||(f.id=f.label),f.index=S;let e=!0;isArray_default(o)&&(e=o.includes(f.label));var _=this._renderEachItem(f,e,S,u),w=_.attribute.width,x=_.attribute.height;this._itemHeight=Math.max(this._itemHeight,x),b=Math.max(w,b),this._itemMaxWidth=Math.max(w,this._itemMaxWidth),c?(isValid_default(r)&&(g&&l?(y=Math.ceil((v+w)/r),m=1<y):v+w>r&&(m=!0,0<v)&&(y+=1,v=0,C+=x+h)),0===v&&0===C||_.setAttributes({x:v,y:C}),v+=s+w):(isValid_default(n)&&(g&&l?(y=Math.ceil((C+x)/n),m=1<y):n<C+x&&(y+=1,m=!0,C=0,v+=b+s,b=0)),0===v&&0===C||_.setAttributes({x:v,y:C}),C+=h+x),d.add(_)}return this._itemContext.doWrap=m,this._itemContext.startX=v,this._itemContext.startY=C,this._itemContext.maxWidthInCol=b,this._itemContext.pages=y,this._itemContext.maxPages=p,g&&(this._itemContext.totalPage=y),a||(this._itemContext.startIndex=u.length),this._itemContext}_renderContent(){var{item:i={},items:r,reversed:n,maxWidth:o}=this.attribute;if(!1!==i.visible&&!isEmpty_default(r)){let e=r;n&&(e=null==r?void 0:r.reverse());var n=graphicCreator.group({x:0,y:0}),{layout:r,autoPage:a}=(this._itemsContainer=n,this.attribute),r=\\\"horizontal\\\"===r,{maxWidth:i,width:l,height:s}=i,h=[],i=(isValid_default(i)&&h.push(i),isValid_default(l)&&h.push(l),h.length&&(isValid_default(o)&&h.push(o),this._itemWidthByUser=minInArray(h)),isValid_default(s)&&(this._itemHeightByUser=s),this.attribute.pager);this._itemContext={currentPage:i&&i.defaultCurrent||1,doWrap:!1,maxWidthInCol:0,maxPages:1,pages:1,startX:0,startY:0,startIndex:0,items:e,isHorizontal:r,totalPage:1/0,isScrollbar:i&&\\\"scrollbar\\\"===i.type},this._itemContext=this._renderItems();let t=!1;(t=this._itemContext.doWrap&&a&&this._itemContext.pages>this._itemContext.maxPages?this._renderPagerComponent():t)||(n.setAttribute(\\\"y\\\",this._title?this._title.AABBBounds.height()+get_default(this.attribute,\\\"title.space\\\",8):0),this._innerView.add(n))}}_bindEvents(){var e,t;this.attribute.disableTriggerEvent||this._itemsContainer&&(({hover:e=!0,select:t=!0}=this.attribute),e&&(this._itemsContainer.addEventListener(\\\"pointermove\\\",this._onHover),this._itemsContainer.addEventListener(\\\"pointerleave\\\",this._onUnHover)),t)&&this._itemsContainer.addEventListener(\\\"pointerdown\\\",this._onClick)}_autoEllipsis(e,t,i,r){var{label:n,value:o}=this.attribute.item,a=r.AABBBounds,l=i.AABBBounds,a=a.width(),l=l.width();let s=!1;\\\"labelFirst\\\"===e?t<l?s=!0:r.setAttribute(\\\"maxLineWidth\\\",t-l):\\\"valueFirst\\\"===e?t<a?s=!0:i.setAttribute(\\\"maxLineWidth\\\",t-a):t<a+l&&(s=!0),s&&(r.setAttribute(\\\"maxLineWidth\\\",Math.max(t*(null!=(n=n.widthRatio)?n:.5),t-l)),i.setAttribute(\\\"maxLineWidth\\\",Math.max(t*(null!=(n=o.widthRatio)?n:.5),t-a)))}_renderEachItem(e,t,i,r){const{id:n,label:o,value:a,shape:l}=e,{padding:s=0,focus:h,focusIconStyle:d,align:u,autoEllipsisStrategy:c}=this.attribute.item,{shape:g,label:p,value:f,background:m}=this.attribute.item,b=this._handleStyle(g,e,t,i,r),v=this._handleStyle(p,e,t,i,r),C=this._handleStyle(f,e,t,i,r),y=this._handleStyle(m,e,t,i,r),_=normalizePadding(s);let w;!1===m.visible?(w=graphicCreator.group({x:0,y:0,cursor:null==(x=y.style)?void 0:x.cursor}),this._appendDataToShape(w,LEGEND_ELEMENT_NAME.item,e,w)):(w=graphicCreator.group(Object.assign({x:0,y:0},y.style)),this._appendDataToShape(w,LEGEND_ELEMENT_NAME.item,e,w,y.state)),w.id=`${null!=n?n:o}-`+i,w.addState(t?LegendStateValue.selected:LegendStateValue.unSelected);var x=graphicCreator.group({x:0,y:0,pickable:!1});w.add(x);let S,A=0,T=0,R=0;g&&!1!==g.visible&&(E=get_default(b,\\\"style.size\\\",DEFAULT_SHAPE_SIZE),T=isArray_default(E)?E[0]||0:E,R=get_default(g,\\\"space\\\",DEFAULT_SHAPE_SPACE),E=graphicCreator.symbol(Object.assign(Object.assign({x:0,y:0,symbolType:\\\"circle\\\",strokeBoundsBuffer:0},l),b.style)),Object.keys(b.state||{}).forEach(e=>{var t=b.state[e].fill||b.state[e].stroke;l.fill&&isNil_default(b.state[e].fill)&&t&&(b.state[e].fill=t),l.stroke&&isNil_default(b.state[e].stroke)&&t&&(b.state[e].stroke=t)}),this._appendDataToShape(E,LEGEND_ELEMENT_NAME.itemShape,e,w,b.state),E.addState(t?LegendStateValue.selected:LegendStateValue.unSelected),x.add(E));let M,B=0;h&&(E=get_default(d,\\\"size\\\",DEFAULT_SHAPE_SIZE),S=graphicCreator.symbol(Object.assign(Object.assign({x:0,y:-E/2-1,strokeBoundsBuffer:0},d),{visible:!0,pickMode:\\\"imprecise\\\",boundsPadding:_})),this._appendDataToShape(S,LEGEND_ELEMENT_NAME.focus,e,w),B=E);var E=p.formatMethod?p.formatMethod(o,e,i):o,P=Object.assign(Object.assign({x:T/2+R,y:0,textAlign:\\\"start\\\",textBaseline:\\\"middle\\\",lineHeight:null==(P=v.style)?void 0:P.fontSize},v.style),{text:E}),E=(M=isRichText(P)?graphicCreator.richtext(richTextAttributeTransform(P)):graphicCreator.text(P),this._appendDataToShape(M,LEGEND_ELEMENT_NAME.itemLabel,e,w,v.state),M.addState(t?LegendStateValue.selected:LegendStateValue.unSelected),x.add(M),get_default(p,\\\"space\\\",DEFAULT_LABEL_SPACE)),L=(isValid_default(a)?(P=get_default(f,\\\"space\\\",h?DEFAULT_VALUE_SPACE:0),k=f.formatMethod?f.formatMethod(a,e,i):a,k=isRichText(k=Object.assign(Object.assign({x:0,y:0,textAlign:\\\"start\\\",textBaseline:\\\"middle\\\",lineHeight:C.style.fontSize},C.style),{text:k}))?graphicCreator.richtext(richTextAttributeTransform(k)):graphicCreator.text(k),this._appendDataToShape(k,LEGEND_ELEMENT_NAME.itemValue,e,w,C.state),k.addState(t?LegendStateValue.selected:LegendStateValue.unSelected),this._itemWidthByUser&&(L=this._itemWidthByUser-_[1]-_[3]-T-R-E-B-P,this._autoEllipsis(c,L,M,k),f.alignRight)?k.setAttributes({textAlign:\\\"right\\\",x:this._itemWidthByUser-T/2-_[1]-_[3]-B-P}):k.setAttribute(\\\"x\\\",P+(M.AABBBounds.empty()?0:M.AABBBounds.x2)),A=P+(k.AABBBounds.empty()?0:k.AABBBounds.x2),x.add(k)):A=(this._itemWidthByUser&&M.setAttribute(\\\"maxLineWidth\\\",this._itemWidthByUser-_[1]-_[3]-T-R-B),E+(M.AABBBounds.empty()?0:M.AABBBounds.x2)),S&&(S.setAttribute(\\\"x\\\",A),x.add(S)),x.AABBBounds),P=L.width();if(\\\"right\\\"===u){const H=L.x2,I=L.x1;x.forEachChildren((e,t)=>{\\\"symbol\\\"!==e.type&&\\\"right\\\"!==e.attribute.textAlign||e===S?e.setAttribute(\\\"x\\\",I+H-e.attribute.x-e.AABBBounds.width()):\\\"symbol\\\"!==e.type?e.setAttributes({x:I+H-e.attribute.x,textAlign:\\\"left\\\"}):e.setAttribute(\\\"x\\\",I+H-e.attribute.x)})}var k=L.height(),E=isValid_default(this.attribute.item.width)?this.attribute.item.width:P+_[1]+_[3],P=this._itemHeightByUser||k+_[0]+_[2];return w.attribute.width=E,w.attribute.height=P,S&&S.setAttribute(\\\"visible\\\",!1),x.translateTo(-L.x1+_[3],-L.y1+_[0]),w}_createPager(e){var{disableTriggerEvent:t,maxRow:i}=this.attribute;return this._itemContext.isHorizontal?new Pager(Object.assign(Object.assign({layout:1===i?\\\"horizontal\\\":\\\"vertical\\\",total:99},merge({handler:{preShape:\\\"triangleUp\\\",nextShape:\\\"triangleDown\\\"}},e)),{defaultCurrent:null==(i=this.attribute.pager)?void 0:i.defaultCurrent,disableTriggerEvent:t})):new Pager(Object.assign({layout:\\\"horizontal\\\",total:99,disableTriggerEvent:t,defaultCurrent:null==(i=this.attribute.pager)?void 0:i.defaultCurrent},e))}_createScrollbar(e,t){var i=this.attribute[\\\"disableTriggerEvent\\\"];return this._itemContext.isHorizontal?new ScrollBar(Object.assign(Object.assign({direction:\\\"horizontal\\\",disableTriggerEvent:i,range:[0,.5],height:12},e),{width:t})):new ScrollBar(Object.assign(Object.assign({direction:\\\"vertical\\\",width:12,range:[0,.5]},e),{height:t,disableTriggerEvent:i}))}_updatePositionOfPager(e,t,i,r,n){var{maxHeight:o,pager:a}=this.attribute,{totalPage:l,isHorizontal:s}=this._itemContext,a=a&&a.position||\\\"middle\\\";this._pagerComponent.setTotal(l),s?(l=\\\"start\\\"===a?i:\\\"end\\\"===a?i+n-this._pagerComponent.AABBBounds.height()/2:i+n/2-this._pagerComponent.AABBBounds.height()/2,this._pagerComponent.setAttributes({x:e,y:l})):(s=\\\"start\\\"===a?0:\\\"end\\\"===a?r-this._pagerComponent.AABBBounds.width():(r-this._pagerComponent.AABBBounds.width())/2,this._pagerComponent.setAttributes({x:s,y:o-this._pagerComponent.AABBBounds.height()}))}_updatePositionOfScrollbar(e,t,i){var{currentPage:r,totalPage:n,isHorizontal:o}=this._itemContext;this._pagerComponent.setScrollRange([(r-1)/n,r/n]),o?this._pagerComponent.setAttributes({x:0,y:i+t}):this._pagerComponent.setAttributes({x:e,y:i})}_bindEventsOfPager(r,n){const o=this.attribute.pager||{},{animation:a=!0,animationDuration:l=450,animationEasing:s=\\\"quadIn\\\"}=o,h=this._itemContext.isScrollbar?e=>{var t=e.detail[\\\"value\\\"];let i=t[0]*this._itemContext.totalPage;return o.scrollByPosition?i+=1:i=Math.floor(i)+1,i}:e=>e.detail.current,e=e=>{var t,i=h(e);i!==this._itemContext.currentPage&&(this._itemContext.currentPage=i,this._itemContext&&this._itemContext.startIndex<this._itemContext.items.length&&(this._renderItems(),t=Math.ceil(this._itemContext.pages/this._itemContext.maxPages),this._itemContext.totalPage=t,this._pagerComponent.setScrollRange([(i-1)/t,i/t])),a?this._itemsContainer.animate().to({[n]:-(i-1)*r},l,s):this._itemsContainer.setAttribute(n,-(i-1)*r))};this._itemContext.isScrollbar?(this._pagerComponent.addEventListener(\\\"scrollDrag\\\",e),this._pagerComponent.addEventListener(\\\"scrollUp\\\",e)):(this._pagerComponent.addEventListener(\\\"toPrev\\\",e),this._pagerComponent.addEventListener(\\\"toNext\\\",e))}_renderPager(){const e=this._title?this._title.AABBBounds.height()+get_default(this.attribute,\\\"title.space\\\",8):0,{maxWidth:t,maxHeight:i,maxCol:r=1,maxRow:n=2,item:o={},pager:a={}}=this.attribute,{spaceCol:l=DEFAULT_ITEM_SPACE_COL,spaceRow:s=DEFAULT_ITEM_SPACE_ROW}=o,h=this._itemsContainer,{space:d=DEFAULT_PAGER_SPACE,defaultCurrent:u=1}=a,c=__rest4(a,[\\\"space\\\",\\\"defaultCurrent\\\"]),g=this._itemContext[\\\"isHorizontal\\\"];let p,f=0,m=0,b=0,v=0,C=0,y=0,_=1;if(g){if(m=(n-1)*s+this._itemHeight*n,f=t,p=this._createPager(c),this._pagerComponent=p,this._innerView.add(p),(b=t-p.AABBBounds.width()-d)<=0)return this._innerView.removeChild(p),!1;h.getChildren().forEach((e,t)=>{var{width:i,height:r}=e.attribute;b<C+i&&(C=0,y+=r+s,_+=1),0<t&&e.setAttributes({x:C,y:y}),C+=l+i}),this._itemContext.startX=C,this._itemContext.startY=y,this._itemContext.pages=_;var w=Math.ceil(_/n);this._itemContext.totalPage=w}else{if(f=this._itemMaxWidth*r+(r-1)*l,m=i,b=f,p=this._createPager(c),this._pagerComponent=p,this._innerView.add(p),(v=i-p.AABBBounds.height()-d-e)<=0)return this._innerView.removeChild(p),!1;h.getChildren().forEach((e,t)=>{var i=e.attribute[\\\"height\\\"];v<y+i&&(y=0,C+=this._itemMaxWidth+l,_+=1),0<t&&e.setAttributes({x:C,y:y}),y+=s+i});w=Math.ceil(_/r);this._itemContext.totalPage=w}this._updatePositionOfPager(b,v,e,f,m),1<u&&(g?h.setAttribute(\\\"y\\\",-(u-1)*(m+s)):h.setAttribute(\\\"x\\\",-(u-1)*(f+l)));w=graphicCreator.group({x:0,y:e,width:g?b:f,height:g?m:v,clip:!0,pickable:!1});return w.add(h),this._innerView.add(w),this._bindEventsOfPager(g?m+s:f+l,g?\\\"y\\\":\\\"x\\\"),!0}_renderScrollbar(){const e=this._title?this._title.AABBBounds.height()+get_default(this.attribute,\\\"title.space\\\",8):0,{maxWidth:t,maxHeight:i,item:r={},pager:n={}}=this.attribute,{spaceCol:o=DEFAULT_ITEM_SPACE_COL,spaceRow:a=DEFAULT_ITEM_SPACE_ROW}=r,l=this._itemsContainer,{defaultCurrent:s=1}=n,h=__rest4(n,[\\\"space\\\",\\\"defaultCurrent\\\"]),d=this._itemContext[\\\"isHorizontal\\\"];let u,c=0,g=0,p=0,f=0,m=1;if(d)c=t,g=t,p=this._itemHeight,u=this._createScrollbar(h,c),this._pagerComponent=u,this._innerView.add(u);else{if(c=i,u=this._createScrollbar(h,c),this._pagerComponent=u,this._innerView.add(u),p=i-e,g=this._itemMaxWidth,p<=0)return this._innerView.removeChild(u),!1;l.getChildren().forEach((e,t)=>{var i=e.attribute[\\\"height\\\"];m=Math.floor((f+i)/p)+1,f+=a+i}),this._itemContext.totalPage=m,this._itemContext.pages=m}this._updatePositionOfScrollbar(g,p,e),1<s&&(d?l.setAttribute(\\\"x\\\",-(s-1)*(g+o)):l.setAttribute(\\\"y\\\",-(s-1)*(p+a)));var b=graphicCreator.group({x:0,y:e,width:g,height:p,clip:!0,pickable:!1});return b.add(l),this._innerView.add(b),this._bindEventsOfPager(d?g:p,d?\\\"x\\\":\\\"y\\\"),!0}_renderPagerComponent(){return this._itemContext.isScrollbar?this._renderScrollbar():this._renderPager(),!0}_hover(e,t){(this._lastActiveItem=e).hasState(LegendStateValue.selected)?this._setLegendItemState(e,LegendStateValue.selectedHover,t):this._setLegendItemState(e,LegendStateValue.unSelectedHover,t);var i=e.getChildren()[0].find(e=>e.name===LEGEND_ELEMENT_NAME.focus,!1);i&&i.setAttribute(\\\"visible\\\",!0),this._dispatchLegendEvent(LegendEvent.legendItemHover,e,t)}_unHover(e,t){let i=!1;(e.hasState(LegendStateValue.unSelectedHover)||e.hasState(LegendStateValue.selectedHover))&&(i=!0),e.removeState(LegendStateValue.unSelectedHover),e.removeState(LegendStateValue.selectedHover),e.getChildren()[0].getChildren().forEach(e=>{i||!e.hasState(LegendStateValue.unSelectedHover)&&!e.hasState(LegendStateValue.selectedHover)||(i=!0),e.removeState(LegendStateValue.unSelectedHover),e.removeState(LegendStateValue.selectedHover)});var r=e.getChildren()[0].find(e=>e.name===LEGEND_ELEMENT_NAME.focus,!1);r&&r.setAttribute(\\\"visible\\\",!1),i&&this._dispatchLegendEvent(LegendEvent.legendItemAttributeUpdate,e,t),this._dispatchLegendEvent(LegendEvent.legendItemUnHover,e,t)}_setLegendItemState(e,t,i){let r=!1;e.hasState(t)||(r=!0),e.addState(t,!0),e.getChildren()[0].getChildren().forEach(e=>{e.name!==LEGEND_ELEMENT_NAME.focus&&(r||e.hasState(t)||(r=!0),e.addState(t,!0))}),r&&this._dispatchLegendEvent(LegendEvent.legendItemAttributeUpdate,e,i)}_removeLegendItemState(t,e,i){let r=!1;e.forEach(e=>{!r&&t.hasState(e)&&(r=!0),t.removeState(e)}),t.getChildren()[0].getChildren().forEach(t=>{t.name!==LEGEND_ELEMENT_NAME.focus&&e.forEach(e=>{!r&&t.hasState(e)&&(r=!0),t.removeState(e)})}),r&&this._dispatchLegendEvent(LegendEvent.legendItemAttributeUpdate,t,i)}_getSelectedLegends(){var e;const t=[];return null!=(e=this._itemsContainer)&&e.getChildren().forEach(e=>{e.hasState(LegendStateValue.selected)&&t.push(e.data)}),t}_appendDataToShape(e,t,i,r,n={}){e.name=t,e.data=i,e.delegate=r,e.states=merge({},DEFAULT_STATES3,n)}_dispatchLegendEvent(e,t,i){var r=this._getSelectedLegends(),n=(r.sort((e,t)=>e.index-t.index),r.map(e=>e.label));this._dispatchEvent(e,{item:t,data:t.data,selected:t.hasState(LegendStateValue.selected),currentSelectedItems:r,currentSelected:n,event:i})}_handleStyle(t,i,r,n,o){const a={};return t.style&&(isFunction_default(t.style)?a.style=t.style(i,r,n,o):a.style=t.style),t.state&&(a.state={},Object.keys(t.state).forEach(e=>{t.state[e]&&(isFunction_default(t.state[e])?a.state[e]=t.state[e](i,r,n,o):a.state[e]=t.state[e])})),a}}),import_eventemitter32=(DiscreteLegend.defaultAttributes={layout:\\\"horizontal\\\",title:{align:\\\"start\\\",space:DEFAULT_TITLE_SPACE,textStyle:{fontSize:12,fontWeight:\\\"bold\\\",fill:\\\"#2C3542\\\"}},item:{spaceCol:DEFAULT_ITEM_SPACE_COL,spaceRow:DEFAULT_ITEM_SPACE_ROW,shape:{space:DEFAULT_SHAPE_SPACE,style:{size:DEFAULT_SHAPE_SIZE,cursor:\\\"pointer\\\"},state:{selectedHover:{opacity:.85},unSelected:{opacity:.5}}},label:{space:DEFAULT_LABEL_SPACE,style:{fontSize:12,fill:\\\"#2C3542\\\",cursor:\\\"pointer\\\"},state:{selectedHover:{opacity:.85},unSelected:{fill:\\\"#D8D8D8\\\"}}},value:{alignRight:!1,style:{fontSize:12,fill:\\\"#ccc\\\",cursor:\\\"pointer\\\"},state:{selectedHover:{opacity:.85},unSelected:{fill:\\\"#D8D8D8\\\"}}},background:{style:{cursor:\\\"pointer\\\"}},focus:!1,focusIconStyle:{size:DEFAULT_SHAPE_SIZE,symbolType:\\\"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8.75044 2.55077L8.75 3.75H7.25L7.25006 2.5507C4.81247 2.88304 2.88304 4.81247 2.5507 7.25006L3.75 7.25V8.75L2.55077 8.75044C2.8833 11.1878 4.81264 13.117 7.25006 13.4493L7.25 12.25H8.75L8.75044 13.4492C11.1876 13.1167 13.1167 11.1876 13.4492 8.75044L12.25 8.75V7.25L13.4493 7.25006C13.117 4.81264 11.1878 2.8833 8.75044 2.55077ZM8 5.5C9.38071 5.5 10.5 6.61929 10.5 8C10.5 9.38071 9.38071 10.5 8 10.5C6.61929 10.5 5.5 9.38071 5.5 8C5.5 6.61929 6.61929 5.5 8 5.5ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z\\\",fill:\\\"#333\\\",cursor:\\\"pointer\\\"}},autoPage:!0,pager:{space:DEFAULT_PAGER_SPACE,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:\\\"multiple\\\",allowAllCanceled:!0},init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),__toESM(require_eventemitter3())),isType2=(init_esbuild_inject(),init_esbuild_inject(),(e,t)=>Object.prototype.toString.call(e)===`[object ${t}]`),isType_default2=isType2,isNil2=(init_esbuild_inject(),e=>null==e),isNil_default2=isNil2,isValid2=(init_esbuild_inject(),e=>null!=e),isValid_default2=isValid2,isArray2=(init_esbuild_inject(),e=>Array.isArray?Array.isArray(e):isType_default2(e,\\\"Array\\\")),isArray_default2=isArray2,isNumber3=(init_esbuild_inject(),(e,t=!1)=>{var i=typeof e;return t?\\\"number\\\"==i:\\\"number\\\"==i||isType_default2(e,\\\"Number\\\")}),isNumber_default2=isNumber3;function range2(e,t,i){isValid_default2(t)||(t=e,e=0),isValid_default2(i)||(i=1);let r=-1;for(var n=0|Math.max(0,Math.ceil((t-e)/i)),o=new Array(n);++r<n;)o[r]=e+r*i;return o}function ascending2(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function toNumber2(e){return Number(e)}function bisect2(e,t,i=0,r){for(isNil_default2(r)&&(r=e.length);i<r;){var n=i+r>>>1;0<ascending2(e[n],t)?r=n:i=1+n}return i}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var memoize2=t=>{let i=null,r=null;return(...e)=>(i&&e.every((e,t)=>e===i[t])||(i=e,r=t(...e)),r)},clamp2=(init_esbuild_inject(),function(e,t,i){return e<t?t:i<e?i:e}),clamp_default2=clamp2;function clamper2(t,i){var e;return i<t&&(e=t,t=i,i=e),e=>Math.max(t,Math.min(i,e))}function interpolateNumber2(t,i){return e=>t*(1-e)+i*e}function interpolateNumberRound2(t,i){return function(e){return Math.round(t*(1-e)+i*e)}}function interpolateDate2(e,t){const i=e.valueOf(),r=t.valueOf(),n=new Date;return e=>(n.setTime(i*(1-e)+r*e),n)}init_esbuild_inject(),init_esbuild_inject();var reA2=/[-+]?(?:\\\\d+\\\\.?\\\\d*|\\\\.?\\\\d+)(?:[eE][-+]?\\\\d+)?/g,reB2=new RegExp(reA2.source,\\\"g\\\"),color_exports2={};function hslToRgb2(e,t,i){t/=100,i/=100;var r=(1-Math.abs(2*i-1))*t,n=r*(1-Math.abs(e/60%2-1)),o=i-r/2;let a=0,l=0,s=0;return 0<=e&&e<60?(a=r,l=n,s=0):60<=e&&e<120?(a=n,l=r,s=0):120<=e&&e<180?(a=0,l=r,s=n):180<=e&&e<240?(a=0,l=n,s=r):240<=e&&e<300?(a=n,l=0,s=r):300<=e&&e<360&&(a=r,l=0,s=n),a=Math.round(255*(a+o)),l=Math.round(255*(l+o)),s=Math.round(255*(s+o)),{r:a,g:l,b:s}}function rgbToHsl2(e,t,i){e/=255,t/=255,i/=255;var r=Math.min(e,t,i),n=Math.max(e,t,i),o=n-r;let a=0,l,s;return a=0==o?0:n===e?(t-i)/o%6:n===t?(i-e)/o+2:(e-t)/o+4,(a=Math.round(60*a))<0&&(a+=360),s=(n+r)/2,l=+(100*(0==o?0:o/(1-Math.abs(2*s-1)))).toFixed(1),s=+(100*s).toFixed(1),{h:a,s:l,l:s}}__export(color_exports2,{Color:()=>Color2,DEFAULT_COLORS:()=>DEFAULT_COLORS2,RGB:()=>RGB2,hexToRgb:()=>hexToRgb2,hslToRgb:()=>hslToRgb2,interpolateRgb:()=>interpolateRgb2,rgbToHex:()=>rgbToHex2,rgbToHsl:()=>rgbToHsl2}),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var REG_HEX2=/^#([0-9a-f]{3,8})$/,DEFAULT_COLORS_OPACITY2={transparent:4294967040},DEFAULT_COLORS2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hex2(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?\\\"0\\\":\\\"\\\")+e.toString(16)}function rgb2(e){return isNumber_default2(e)?new RGB2(e>>16,e>>8&255,255&e,1):isArray_default2(e)?new RGB2(e[0],e[1],e[2]):new RGB2(255,255,255)}function rgba2(e){return isNumber_default2(e)?new RGB2(e>>>24,e>>>16&255,e>>>8&255,255&e):isArray_default2(e)?new RGB2(e[0],e[1],e[2],e[3]):new RGB2(255,255,255,1)}function SRGBToLinear2(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function LinearToSRGB2(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var ScaleEnum,Color2=class pJb{static Brighter(e,t=1){return 1===t?e:new pJb(e).brighter(t).toRGBA()}static SetOpacity(e,t=1){return 1===t?e:new pJb(e).setOpacity(t).toRGBA()}static getColorBrightness(e,t=\\\"hsl\\\"){var i=e instanceof pJb?e:new pJb(e);switch(t){case\\\"hsv\\\":default:return i.getHSVBrightness();case\\\"hsl\\\":return i.getHSLBrightness();case\\\"lum\\\":return i.getLuminance();case\\\"lum2\\\":return i.getLuminance2();case\\\"lum3\\\":return i.getLuminance3()}}static parseColorString(e){var t,i,r;return isValid_default2(DEFAULT_COLORS_OPACITY2[e])?rgba2(DEFAULT_COLORS_OPACITY2[e]):isValid_default2(DEFAULT_COLORS2[e])?rgb2(DEFAULT_COLORS2[e]):(t=(\\\"\\\"+e).trim().toLowerCase(),(r=REG_HEX2.exec(t))?(i=parseInt(r[1],16),3===(r=r[1].length)?new RGB2((i>>8&15)+((i>>8&15)<<4),(i>>4&15)+((i>>4&15)<<4),(15&i)+((15&i)<<4),1):6===r?rgb2(i):8===r?new RGB2(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):void 0):/^(rgb|RGB|rgba|RGBA)/.test(t)?(r=t.replace(/(?:\\\\(|\\\\)|rgba|RGBA|rgb|RGB)*/g,\\\"\\\").split(\\\",\\\"),new RGB2(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseFloat(r[3]))):/^(hsl|HSL|hsla|HSLA)/.test(t)?(i=t.replace(/(?:\\\\(|\\\\)|hsla|HSLA|hsl|HSL)*/g,\\\"\\\").split(\\\",\\\"),r=hslToRgb2(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)),new RGB2(r.r,r.g,r.b,parseFloat(i[3]))):void 0)}constructor(e){var t=pJb.parseColorString(e);t?this.color=t:(console.warn(`Warn: 传入${e}无法解析为Color`),this.color=new RGB2(255,255,255))}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(e){var{r:t,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(t*e))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*e))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*e))),this}add(e){var{r:t,g:i,b:r}=this.color;return this.color.r+=Math.min(255,t+e.color.r),this.color.g+=Math.min(255,i+e.color.g),this.color.b+=Math.min(255,r+e.color.b),this}sub(e){return this.color.r=Math.max(0,this.color.r-e.color.r),this.color.g=Math.max(0,this.color.g-e.color.g),this.color.b=Math.max(0,this.color.b-e.color.b),this}multiply(e){var{r:t,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(t*e.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*e.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*e.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return.5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(e,t,i){var r=this.color.opacity,n=rgbToHsl2(this.color.r,this.color.g,this.color.b),n=hslToRgb2(isNil_default2(e)?n.h:clamp_default2(e,0,360),isNil_default2(t)?n.s:0<=t&&t<=1?100*t:t,isNil_default2(i)?n.l:i<=1&&0<=i?100*i:i);return this.color=new RGB2(n.r,n.g,n.b,r),this}setRGB(e,t,i){return isNil_default2(e)||(this.color.r=e),isNil_default2(t)||(this.color.g=t),isNil_default2(i)||(this.color.b=i),this}setHex(e){var t=(\\\"\\\"+e).trim().toLowerCase(),t=REG_HEX2.exec(t),i=parseInt(t[1],16),t=t[1].length;return 3===t?new RGB2((i>>8&15)+((i>>8&15)<<4),(i>>4&15)+((i>>4&15)<<4),(15&i)+((15&i)<<4),1):6===t?rgb2(i):8===t?new RGB2(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):this}setColorName(e){var t=DEFAULT_COLORS2[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn(\\\"THREE.Color: Unknown color \\\"+e),this}setScalar(e){return this.color.r=e,this.color.g=e,this.color.b=e,this}setOpacity(e=1){return this.color.opacity=e,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}clone(){return new pJb(this.color.toString())}copyGammaToLinear(e,t=2){return this.color.r=Math.pow(e.color.r,t),this.color.g=Math.pow(e.color.g,t),this.color.b=Math.pow(e.color.b,t),this}copyLinearToGamma(e,t=2){var i=0<t?1/t:1;return this.color.r=Math.pow(e.color.r,i),this.color.g=Math.pow(e.color.g,i),this.color.b=Math.pow(e.color.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.color.r=SRGBToLinear2(e.color.r),this.color.g=SRGBToLinear2(e.color.g),this.color.b=SRGBToLinear2(e.color.b),this}copyLinearToSRGB(e){return this.color.r=LinearToSRGB2(e.color.r),this.color.g=LinearToSRGB2(e.color.g),this.color.b=LinearToSRGB2(e.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}},RGB2=class{constructor(e,t,i,r){this.r=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.g=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.b=isNaN(+i)?255:Math.max(0,Math.min(255,+i)),isValid_default2(r)?this.opacity=isNaN(+r)?1:Math.max(0,Math.min(1,+r)):this.opacity=1}formatHex(){return\\\"#\\\"+(hex2(this.r)+hex2(this.g)+hex2(this.b)+(1===this.opacity?\\\"\\\":hex2(255*this.opacity)))}formatRgb(){var e=this.opacity;return(1===e?\\\"rgb(\\\":\\\"rgba(\\\")+this.r+`,${this.g},`+this.b+(1===e?\\\")\\\":`,${e})`)}formatHsl(){var e=this.opacity,{h:t,s:i,l:r}=rgbToHsl2(this.r,this.g,this.b);return(1===e?\\\"hsl(\\\":\\\"hsla(\\\")+t+`,${i}%,${r}%`+(1===e?\\\")\\\":`,${e})`)}toString(){return this.formatHex()}};function hexToRgb2(e){let t=\\\"\\\",i=\\\"\\\",r=\\\"\\\";var n=\\\"#\\\"===e[0]?1:0;for(let o=n;o<e.length;o++)\\\"#\\\"!==e[o]&&(o<2+n?t+=e[o]:o<4+n?i+=e[o]:o<6+n&&(r+=e[o]));return[parseInt(t,16),parseInt(i,16),parseInt(r,16)]}function rgbToHex2(e,t,i){return Number((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)}function interpolateRgb2(e,t){const n=e.r,o=t.r,a=e.g,l=t.g,s=e.b,h=t.b,d=e.opacity,u=t.opacity;return e=>{var t=Math.round(n*(1-e)+o*e),i=Math.round(a*(1-e)+l*e),r=Math.round(s*(1-e)+h*e);return new RGB2(t,i,r,d*(1-e)+u*e)}}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),function(e){e.Identity=\\\"identity\\\",e.Linear=\\\"linear\\\",e.Log=\\\"log\\\",e.Pow=\\\"pow\\\",e.Sqrt=\\\"sqrt\\\",e.Symlog=\\\"symlog\\\",e.Time=\\\"time\\\",e.Quantile=\\\"quantile\\\",e.Quantize=\\\"quantize\\\",e.Threshold=\\\"threshold\\\",e.Ordinal=\\\"ordinal\\\",e.Point=\\\"point\\\",e.Band=\\\"band\\\"}(ScaleEnum=ScaleEnum||{});var EnableScaleMap={};function identity2(e){return e}function normalize2(t,i){if(t=Number(t),i=Number(i),i-=t)return e=>(e-t)/i;const e=Number.isNaN(i)?NaN:.5;return()=>e}function bimap(e,t,i){var r=e[0],n=e[1],o=t[0],a=t[1];let l,s;return s=n<r?(l=normalize2(n,r),i(a,o)):(l=normalize2(r,n),i(o,a)),e=>s(l(e))}function calculateWholeRangeFromRangeFactor(e,t){var i=(e[1]-e[0])/(t[1]-t[0]),r=e[0]-i*t[0];return[r,i+r]}function polymap(i,e,t){const r=Math.min(i.length,e.length)-1,n=new Array(r),o=new Array(r);let a=-1;for(i[r]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++a<r;)n[a]=normalize2(i[a],i[a+1]),o[a]=t(e[a],e[a+1]);return function(e){var t=bisect2(i,e,1,r)-1;return o[t](n[t](e))}}Object.values(ScaleEnum).forEach(e=>{EnableScaleMap[e]=!0}),init_esbuild_inject(),init_esbuild_inject();var niceNumber=(e,t=!1)=>{var i=Math.floor(Math.log10(e)),r=e/Math.pow(10,i);return(t?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,i)},restrictNumber=(e,t)=>{let i,r;return r=t[0]<t[1]?(i=t[0],t[1]):(i=t[1],t[0]),Math.min(Math.max(e,i),r)},BaseScale=class{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(e){return this._wholeRange||(isValid_default2(this._rangeFactorStart)&&isValid_default2(this._rangeFactorEnd)&&2===e.length?(this._wholeRange=calculateWholeRangeFromRangeFactor(e,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):e)}rangeFactor(e,t,i){return e?(2===e.length&&e.every(e=>0<=e&&e<=1)&&(this._wholeRange=null,0===e[0]&&1===e[1]?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=e[0],this._rangeFactorEnd=e[1])),this):i?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):isValid_default2(this._rangeFactorStart)&&isValid_default2(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(e,t){var i;return isNil_default2(e)?this._rangeFactorStart:(0<=e&&e<=1&&(this._wholeRange=null,0!==e||!isNil_default2(this._rangeFactorEnd)&&1!==this._rangeFactorEnd?(this._rangeFactorStart=e,this._rangeFactorEnd=null!=(i=this._rangeFactorEnd)?i:1):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}rangeFactorEnd(e,t){var i;return isNil_default2(e)?this._rangeFactorEnd:(0<=e&&e<=1&&(this._wholeRange=null,0!==e||!isNil_default2(this._rangeFactorStart)&&0!==this._rangeFactorStart?(this._rangeFactorEnd=e,this._rangeFactorStart=null!=(i=this._rangeFactorStart)?i:0):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}generateFishEyeTransform(){var e;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);const{distortion:t=2,radiusRatio:i=.1,radius:r}=this._fishEyeOptions,n=this.range(),o=n[0],a=n[n.length-1],l=Math.min(o,a),s=Math.max(o,a),h=clamp_default2(null!=(e=this._fishEyeOptions.focus)?e:0,l,s),d=isNil_default2(r)?(s-l)*i:r;let u=Math.exp(t);u=u/(u-1)*d;const c=t/d;this._fishEyeTransform=e=>{var t=Math.abs(e-h);return t>=d?e:t<=1e-6?h:(t=u*(1-Math.exp(-t*c))/t*.75+.25,h+(e-h)*t)}}unknown(e){return arguments.length?(this._unknown=e,this):this._unknown}},interpolateRgb3=(init_esbuild_inject(),init_esbuild_inject(),color_exports2)[\\\"interpolateRgb\\\"];function interpolate(e,t){var i=typeof t;if(isNil_default2(t)||\\\"boolean\\\"==i)return()=>t;if(\\\"number\\\"==i)return interpolateNumber2(e,t);if(\\\"string\\\"!=i)return t instanceof color_exports2.RGB?interpolateRgb3(e,t):t instanceof color_exports2.Color?interpolateRgb3(e.color,t.color):t instanceof Date?interpolateDate2(e,t):interpolateNumber2(Number(e),Number(t));if(i=color_exports2.Color.parseColorString(t)){const r=interpolateRgb3(color_exports2.Color.parseColorString(e),i);return e=>r(e).formatRgb()}return interpolateNumber2(Number(e),Number(t))}var ContinuousScale=class extends BaseScale{constructor(e=identity2,t=identity2){super(),this._unknown=void 0,this.transformer=e,this.untransformer=t,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=identity2,this._piecewise=bimap,this._interpolate=interpolate}calculateVisibleDomain(e){var t;return isValid_default2(this._rangeFactorStart)&&isValid_default2(this._rangeFactorEnd)&&2===e.length?[this.invert(e[0]),this.invert(e[1])]:null!=(t=this._niceDomain)?t:this._domain}fishEye(e,t,i){return e||i?(this._fishEyeOptions=e,this._fishEyeTransform=null,this.rescale(t)):this._fishEyeOptions}scale(e){if(e=Number(e),Number.isNaN(e)||this._domainValidator&&!this._domainValidator(e))return this._unknown;this._output||(this._output=this._piecewise((null!=(t=this._niceDomain)?t:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));var t=this._output(this.transformer(this._clamp(e)));return this._fishEyeTransform?this._fishEyeTransform(t):t}invert(e){var t;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),(null!=(t=this._niceDomain)?t:this._domain).map(this.transformer),interpolateNumber2)),this._clamp(this.untransformer(this._input(e)))}domain(e,t){if(!e)return(null!=(i=this._niceDomain)?i:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;var i=Array.from(e,toNumber2);return this._domain=i,this.rescale(t)}range(e,t){var i;return e?(i=Array.from(e),this._range=i,this.rescale(t)):this._range.slice()}rangeRound(e,t){var i=Array.from(e);return this._range=i,this._interpolate=interpolateNumberRound2,this.rescale(t)}rescale(e){if(!e){var i=null!=(n=this._niceDomain)?n:this._domain,r=i.length,n=this._range.length;let t=Math.min(r,n);if(r&&r<n&&this._forceAlign){var o=n-r+1,a=i[r-1],l=2<=r?(a-i[r-2])/o:0;for(let e=1;e<=o;e++)i[r-2+e]=a-l*(o-e);t=n}this._autoClamp&&(this._clamp=clamper2(i[0],i[t-1])),this._piecewise=2<t?polymap:bimap,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform()}return this}clamp(e,t,i){return arguments.length?(t?(this._autoClamp=!1,this._clamp=t):(this._autoClamp=!!e,this._clamp=e?void 0:identity2),this.rescale(i)):this._clamp!==identity2}interpolate(e,t){return arguments.length?(this._interpolate=e,this.rescale(t)):this._interpolate}ticks(e=0){return[]}tickData(e=10){var t=this.ticks(e);return(null!=t?t:[]).map((e,t)=>({index:t,tick:e,value:(this.scale(e)-this._range[0])/(this._range[1]-this._range[0])}))}rangeFactor(e,t){return e?(super.rangeFactor(e),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(e,t){return isNil_default2(e)?super.rangeFactorStart():(super.rangeFactorStart(e),this._output=this._input=null,this)}rangeFactorEnd(e,t){return isNil_default2(e)?super.rangeFactorEnd():(super.rangeFactorEnd(e),this._output=this._input=null,this)}forceAlignDomainRange(e){return arguments.length?(this._forceAlign=e,this):this._forceAlign}},e10=(init_esbuild_inject(),init_esbuild_inject(),Math.sqrt(50)),e5=Math.sqrt(10),e2=Math.sqrt(2),niceNumbers=[1,2,5,10],calculateTicksOfSingleValue=(e,t,i)=>{let r=1,n=e;var o=Math.floor((t-1)/2),a=Math.abs(e);return 0<=e&&e<=Number.MIN_VALUE?n=0:e<0&&e>=-Number.MIN_VALUE?n=-(t-1):!i&&a<1?r=getNickStep(a).step:(i||1<a)&&(n=Math.floor(e)-o*r),0<r?(0<e?n=Math.max(n,0):e<0&&(n=Math.min(n,-(t-1)*r)),range2(0,t).map(e=>n+e*r)):0<e?calculateTicksByStep(0,-(t-1)/r,r):calculateTicksByStep((t-1)/r,0,r)},d3Ticks=memoize2((i,r,e,t)=>{let n,o,a,l,s=-1;if(e=+e,(i=+i)==(r=+r))return[i];if(Math.abs(i-r)<=Number.MIN_VALUE&&0<e)return[i];if((n=r<i)&&(o=i,i=r,r=o),l=tickIncrement(i,r,e).step,!isFinite(l))return[];if(0<l){let e=Math.round(i/l),t=Math.round(r/l);for(e*l<i&&++e,t*l>r&&--t,a=new Array(o=t-e+1);++s<o;)a[s]=(e+s)*l}else if(l<0&&null!=t&&t.noDecimals){l=1;var h=Math.ceil(i),d=Math.floor(r);if(!(h<=d))return[];for(a=new Array(o=d-h+1);++s<o;)a[s]=h+s}else{l=-l;let e=Math.round(i*l),t=Math.round(r*l);for(e/l<i&&++e,t/l>r&&--t,a=new Array(o=t-e+1);++s<o;)a[s]=(e+s)/l}return n&&a.reverse(),a}),calculateTicksByStep=(i,r,n)=>{let o,a,l=-1;if(0<n){let e=Math.floor(i/n),t=Math.ceil(r/n);for((e+1)*n<i&&++e,(t-1)*n>r&&--t,a=new Array(o=t-e+1);++l<o;)a[l]=(e+l)*n}else{n=-n;let e=Math.floor(i*n),t=Math.ceil(r*n);for((e+1)/n<i&&++e,(t-1)/n>r&&--t,a=new Array(o=t-e+1);++l<o;)a[l]=(e+l)/n}return a},appendTicksToCount=(e,t,i)=>{let r;var n=e[0],o=e[e.length-1],a=t-e.length;if(o<=0){var l=[];for(r=a;1<=r;r--)l.push(n-r*i);return l.concat(e)}if(0<=n){for(r=1;r<=a;r++)e.push(o+r*i);return e}let s=[];var h=[];for(r=1;r<=a;r++)r%2==0?s=[n-Math.floor(r/2)*i].concat(s):h.push(o+Math.ceil(r/2)*i);return s.concat(e).concat(h)},ticks=memoize2((t,i,r,e)=>{let n,o,a;if(r=+r,(t=+t)==(i=+i))return calculateTicksOfSingleValue(t,r,null==e?void 0:e.noDecimals);if(Math.abs(t-i)<=Number.MIN_VALUE&&0<r)return calculateTicksOfSingleValue(t,r,null==e?void 0:e.noDecimals);(n=i<t)&&(a=t,t=i,i=a);var l=tickIncrement(t,i,r);let s=l.step;if(!isFinite(s))return[];if(0<s){let e=1;for(var{power:l,gap:h}=l,d=10===h?2*10**l:10**l;e<=5&&(o=calculateTicksByStep(t,i,s)).length>r+1&&2<r;)s+=d,e+=1;2<r&&o.length<r-1&&(o=appendTicksToCount(o,r,s))}else null!=e&&e.noDecimals&&s<0&&(s=1),o=calculateTicksByStep(t,i,s);return n&&o.reverse(),o}),getNickStep=e=>{var t=Math.floor(Math.log(e)/Math.LN10),i=e/10**t;let r=niceNumbers[0];return e10<=i?r=niceNumbers[3]:e5<=i?r=niceNumbers[2]:e2<=i&&(r=niceNumbers[1]),0<=t?{step:r*10**t,gap:r,power:t}:{step:-(10**-t)/r,gap:r,power:t}};function tickIncrement(e,t,i){var r=(t-e)/Math.max(0,i);return getNickStep(r)}function forceTicks(e,t,i){let r;if(i=+i,(e=+e)==(t=+t)&&0<i)return[e];if(i<=0||0===(r=forceTickIncrement(e,t,i))||!isFinite(r))return[];var n=new Array(i);for(let o=0;o<i;o++)n[o]=e+o*r;return n}function forceTickIncrement(e,t,i){return(t-e)/Math.max(1,i-1)}function stepTicks(e,t,i){let r,n,o=-1;if(i=+i,(n=(t=+t)<(e=+e))&&(r=e,e=t,t=r),!isFinite(i)||t-e<=i)return[e];for(var a=Math.floor((t-e)/i+1),l=new Array(a);++o<a;)l[o]=e+o*i;return n&&l.reverse(),l}function niceLinear(e,t=10){let i,r,n=0,o=e.length-1,a=e[n],l=e[o],s=10;for(l<a&&(r=a,a=l,l=r,r=n,n=o,o=r);0<s--;){if((r=tickIncrement(a,l,t).step)===i)return e[n]=a,e[o]=l,e;if(0<r)a=Math.floor(a/r)*r,l=Math.ceil(l/r)*r;else{if(!(r<0))break;a=Math.ceil(a*r)/r,l=Math.floor(l*r)/r}i=r}}function parseNiceOptions(e,t){var i=isNumber_default2(t.forceMin),r=isNumber_default2(t.forceMax);let n=null;var o=[];let a=null;var l=i&&r?e=>e>=t.forceMin&&e<=t.forceMax:i?e=>e>=t.forceMin:r?e=>e<=t.forceMax:null;return i?o[0]=t.forceMin:isNumber_default2(t.min)&&t.min<=Math.min(e[0],e[e.length-1])&&(o[0]=t.min),r?o[1]=t.forceMax:isNumber_default2(t.max)&&t.max>=Math.max(e[0],e[e.length-1])&&(o[1]=t.max),isNumber_default2(o[0])&&isNumber_default2(o[1])?((a=e.slice())[0]=o[0],a[a.length-1]=o[1]):n=isNumber_default2(o[0])||isNumber_default2(o[1])?isNumber_default2(o[0])?\\\"max\\\":\\\"min\\\":\\\"all\\\",{niceType:n,niceDomain:a,niceMinMax:o,domainValidator:l}}var SLIDER_ELEMENT_NAME,fixPrecision=(e,t,i)=>Math.abs(t-e)<1?+i.toFixed(1):Math.round(+i),d3TicksForLog=memoize2((e,t,i,r,n,o,a)=>{let l=e,s=t;var h=s<l;h&&([l,s]=[s,l]);let d,u,c=n(l),g=n(s),p=[];if(!(r%1)&&g-c<i){if(c=Math.floor(c),g=Math.ceil(g),0<l){for(;c<=g;++c)for(d=1;d<r;++d)if(!((u=c<0?d/o(-c):d*o(c))<l)){if(u>s)break;p.push(u)}}else for(;c<=g;++c)for(d=r-1;1<=d;--d)if(!((u=0<c?d/o(-c):d*o(c))<l)){if(u>s)break;p.push(u)}2*p.length<i&&(p=ticks(l,s,i))}else p=ticks(c,g,Math.min(g-c,i)).map(o);return p=p.filter(e=>0!==e),null!=a&&a.noDecimals&&(p=Array.from(new Set(p.map(e=>Math.floor(e))))),h?p.reverse():p}),ticksBaseTransform=memoize2((i,r,t,n,e,o)=>{const a=[],l={},s=e(i),h=e(r);let d=[];if(Number.isInteger(n))d=ticks(s,h,t);else{var u=(h-s)/(t-1);for(let e=0;e<t;e++)d.push(s+e*u)}return d.forEach(e=>{var t=o(e),t=Number.isInteger(n)?fixPrecision(i,r,t):fixPrecision(i,r,niceNumber(t)),t=fixPrecision(i,r,restrictNumber(t,[i,r]));!l[t]&&!isNaN(t)&&1<d.length&&(l[t]=1,a.push(t))}),a}),forceTicksBaseTransform=memoize2((e,t,i,r,n)=>forceTicks(r(e),r(t),i).map(e=>niceNumber(n(e)))),forceStepTicksBaseTransform=memoize2((e,t,i,r,n)=>stepTicks(r(e),r(t),i).map(e=>niceNumber(n(e)))),LinearScale=class _Pb extends ContinuousScale{constructor(){super(...arguments),this.type=ScaleEnum.Linear}clone(){return(new _Pb).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}tickFormat(){return()=>{}}d3Ticks(e=10,t){var i=this.calculateVisibleDomain(this._range);return d3Ticks(i[0],i[i.length-1],e,t)}ticks(e=10,t){if(isValid_default2(this._rangeFactorStart)&&isValid_default2(this._rangeFactorEnd)&&(0<this._rangeFactorStart||this._rangeFactorEnd<1)&&2===this._range.length||!this._niceType)return this.d3Ticks(e,t);var i=null!=(i=this._niceDomain)?i:this._domain,r=this._domain,n=i[0],o=i[i.length-1];let a=ticks(r[0],r[r.length-1],e,t);if(a.length)if(this._domainValidator)a=a.filter(this._domainValidator);else if((a[0]!==n||a[a.length-1]!==o)&&this._niceType){r=i.slice();if(\\\"all\\\"===this._niceType?(r[0]=a[0],r[r.length-1]=a[a.length-1],this._niceDomain=r,this.rescale()):\\\"min\\\"===this._niceType&&a[0]!==n?(r[0]=a[0],this._niceDomain=r,this.rescale()):\\\"max\\\"===this._niceType&&a[a.length-1]!==o&&(r[r.length-1]=a[a.length-1],this._niceDomain=r,this.rescale()),\\\"all\\\"!==this._niceType){const l=Math.min(r[0],r[r.length-1]),s=Math.max(r[0],r[r.length-1]);a=a.filter(e=>e>=l&&e<=s)}}return a}forceTicks(e=10){var t=this.calculateVisibleDomain(this._range);return forceTicks(t[0],t[t.length-1],e)}stepTicks(e){var t=this.calculateVisibleDomain(this._range);return stepTicks(t[0],t[t.length-1],e)}nice(e=10,t){var i=this._domain;let r=[];if(t){var n=parseNiceOptions(i,t);if(r=n.niceMinMax,this._domainValidator=n.domainValidator,this._niceType=n.niceType,n.niceDomain)return this._niceDomain=n.niceDomain,this.rescale(),this}else this._niceType=\\\"all\\\";return this._niceType&&(n=niceLinear(i.slice(),e),\\\"min\\\"===this._niceType?n[n.length-1]=null!=(i=r[1])?i:n[n.length-1]:\\\"max\\\"===this._niceType&&(n[0]=null!=(i=r[0])?i:n[0]),this._niceDomain=n,this.rescale()),this}niceMin(e=10){this._niceType=\\\"min\\\";var t=this._domain[this._domain.length-1],i=niceLinear(this.domain(),e);return i&&(i[i.length-1]=t,this._niceDomain=i,this.rescale()),this}niceMax(e=10){this._niceType=\\\"max\\\";var t=this._domain[0],i=niceLinear(this._domain.slice(),e);return i&&(i[0]=t,this._niceDomain=i,this.rescale()),this}};function convertValueToRange(e){return isArray_default(e)?e:[e,e]}function getDefaultCursor(e){return e?\\\"ew-resize\\\":\\\"ns-resize\\\"}init_esbuild_inject(),init_esbuild_inject(),function(e){e.innerView=\\\"innerView\\\",e.railContainer=\\\"sliderRailContainer\\\",e.rail=\\\"sliderRail\\\",e.startText=\\\"sliderStartText\\\",e.endText=\\\"sliderEndText\\\",e.startHandler=\\\"sliderStartHandler\\\",e.startHandlerText=\\\"startHandlerText\\\",e.endHandler=\\\"sliderEndHandler\\\",e.endHandlerText=\\\"sliderEndHandlerText\\\",e.track=\\\"sliderTrack\\\",e.trackContainer=\\\"sliderTrackContainer\\\"}(SLIDER_ELEMENT_NAME=SLIDER_ELEMENT_NAME||{}),loadSliderComponent();var Slider=class KQb extends AbstractComponent{get track(){return this._track}get currentValue(){return this._currentValue}get startHandler(){return this._startHandler}get endHandler(){return this._endHandler}get tooltipShape(){return this._tooltipShape}constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},KQb.defaultAttributes,e)),this.name=\\\"slider\\\",this._isHorizontal=!0,this._startHandler=null,this._endHandler=null,this._startHandlerText=null,this._endHandlerText=null,this._currentHandler=null,this._currentValue={},this._onTooltipShow=e=>{this._isChanging||this._tooltipState&&this._tooltipState.isActive||(this._tooltipState?this._tooltipState.isActive=!0:this._tooltipState={isActive:!0},this._onTooltipUpdate(e),this._dispatchTooltipEvent(\\\"sliderTooltipShow\\\"))},this._onTooltipUpdate=e=>{var t,i;!this._isChanging&&this._tooltipState&&this._tooltipState.isActive&&(t=this._isHorizontal?this._rail.globalAABBBounds.width():this._rail.globalAABBBounds.height(),(i=clamp_default(this._isHorizontal?(e.viewX-this._rail.globalAABBBounds.x1)/t:(e.viewY-this._rail.globalAABBBounds.y1)/t,0,1))!==this._tooltipState.pos)&&(this._tooltipState.pos=i,this._tooltipState.value=this.calculateValueByPos(i*t),this._updateTooltip(),this._dispatchTooltipEvent(\\\"sliderTooltipUpdate\\\"))},this._onTooltipHide=()=>{var e=this.attribute[\\\"tooltip\\\"];e&&e.alwaysShow||(this._tooltipState=null,this._tooltipShape&&this._tooltipShape.setAttribute(\\\"visible\\\",!1),this._tooltipText&&this._tooltipText.setAttribute(\\\"visible\\\",!1),this._dispatchTooltipEvent(\\\"sliderTooltipHide\\\"))},this._onHandlerPointerdown=e=>{e.stopPropagation(),this._isChanging=!0,this._currentHandler=e.target,this._prePos=this._isHorizontal?e.clientX:e.clientY,\\\"browser\\\"===vglobal.env?(vglobal.addEventListener(\\\"pointermove\\\",this._onHandlerPointerMove,{capture:!0}),vglobal.addEventListener(\\\"pointerup\\\",this._onHandlerPointerUp)):(this.stage.addEventListener(\\\"pointermove\\\",this._onHandlerPointerMove,{capture:!0}),this.stage.addEventListener(\\\"pointerup\\\",this._onHandlerPointerUp),this.stage.addEventListener(\\\"pointerupoutside\\\",this._onHandlerPointerUp))},this._onHandlerPointerMove=n=>{n.stopPropagation(),this._isChanging=!0;var{railWidth:o,railHeight:a,min:l,max:s}=this.attribute;if(s!==l){let e,t,i,r=0;i=this._isHorizontal?(e=n.clientX,r=e-this._prePos,t=null==(s=this._currentHandler)?void 0:s.attribute.x,o):(e=n.clientY,r=e-this._prePos,t=null==(l=this._currentHandler)?void 0:l.attribute.y,a);s=clamp_default(t+r,0,i),o=this.calculateValueByPos(s);\\\"text\\\"===this._currentHandler.type?this._updateHandlerText(this._currentHandler,s,o):this._updateHandler(this._currentHandler,s,o),this._updateTrack(),this._prePos=e,this._dispatchChangeEvent()}},this._onHandlerPointerUp=e=>{e.preventDefault(),this._isChanging=!1,this._currentHandler=null,\\\"browser\\\"===vglobal.env?(vglobal.removeEventListener(\\\"pointermove\\\",this._onHandlerPointerMove,{capture:!0}),vglobal.removeEventListener(\\\"pointerup\\\",this._onHandlerPointerUp)):(this.stage.removeEventListener(\\\"pointermove\\\",this._onHandlerPointerMove,{capture:!0}),this.stage.removeEventListener(\\\"pointerup\\\",this._onHandlerPointerUp),this.stage.removeEventListener(\\\"pointerupoutside\\\",this._onHandlerPointerUp))},this._onTrackPointerdown=e=>{e.stopPropagation(),this._isChanging=!0,this._prePos=this._isHorizontal?e.clientX:e.clientY,\\\"browser\\\"===vglobal.env?(vglobal.addEventListener(\\\"pointermove\\\",this._onTrackPointerMove,{capture:!0}),vglobal.addEventListener(\\\"pointerup\\\",this._onTrackPointerUp)):(this.stage.addEventListener(\\\"pointermove\\\",this._onTrackPointerMove,{capture:!0}),this.stage.addEventListener(\\\"pointerup\\\",this._onTrackPointerUp),this.stage.addEventListener(\\\"pointerupoutside\\\",this._onTrackPointerUp))},this._onTrackPointerMove=r=>{r.stopPropagation(),this._isChanging=!0;var{railWidth:n,railHeight:o,min:a,max:l,inverse:s}=this.attribute;if(l!==a){var{startHandler:l,endHandler:a}=this._getHandlers();let e,t,i;i=this._isHorizontal?(e=r.clientX,t=this._track.attribute.width,n):(e=r.clientY,t=this._track.attribute.height,o);var h,n=e-this._prePos;l&&(o=this._isHorizontal?l.attribute.x:l.attribute.y,o=s?clamp_default(o+n,t,i):clamp_default(o+n,0,i-t),h=this.calculateValueByPos(o),this._updateHandler(l,o,h)),a&&(o=this._isHorizontal?a.attribute.x:a.attribute.y,h=s?clamp_default(o+n,0,i-t):clamp_default(o+n,t,i),s=this.calculateValueByPos(h),o=null==l?void 0:l.attribute,this._updateHandler(a,h,s),this._track.setAttributes(this._isHorizontal?{x:Math.min(o.x,a.attribute.x),width:Math.abs(o.x-a.attribute.x)}:{y:Math.min(o.y,a.attribute.y),height:Math.abs(o.y-a.attribute.y)})),this._prePos=e,this._dispatchChangeEvent()}},this._onTrackPointerUp=e=>{e.preventDefault(),this._isChanging=!1,\\\"browser\\\"===vglobal.env?(vglobal.removeEventListener(\\\"pointermove\\\",this._onTrackPointerMove,{capture:!0}),vglobal.removeEventListener(\\\"pointerup\\\",this._onTrackPointerUp)):(this.stage.removeEventListener(\\\"pointermove\\\",this._onTrackPointerMove,{capture:!0}),this.stage.removeEventListener(\\\"pointerup\\\",this._onTrackPointerUp),this.stage.removeEventListener(\\\"pointerupoutside\\\",this._onTrackPointerUp))},this._onRailPointerDown=n=>{n.stopPropagation(),this._isChanging=!0;var{railWidth:o,railHeight:a,min:l,max:s}=this.attribute;if(s!==l){s=this._startHandler,l=this._endHandler;let e,t,i,r;r=this._isHorizontal?(e=n.viewX-this._rail.globalAABBBounds.x1,t=null==s?void 0:s.attribute.x,i=null==l?void 0:l.attribute.x,o):(e=n.viewY-this._rail.globalAABBBounds.y1,t=null==s?void 0:s.attribute.y,i=null==l?void 0:l.attribute.y,a);o=this.calculateValueByPos(e);isValid_default(i)?(a=Math.abs(e-t)>Math.abs(e-i)?l:s,this._updateHandler(a,e,o)):this._updateHandler(s,e,o),this._updateTrack(),this._dispatchChangeEvent()}}}calculatePosByValue(e,t){var{layout:i,railWidth:r,railHeight:n,min:o,max:a,inverse:l}=this.attribute,a=o===a?\\\"start\\\"!==t&&\\\"end\\\"===t?1:0:(e-o)/(a-o);return(l?1-a:a)*(\\\"vertical\\\"===i?n:r)}calculateValueByPos(e){var{layout:t,railWidth:i,railHeight:r,min:n,max:o,inverse:a}=this.attribute,t=\\\"vertical\\\"===t?r:i;return n+(o-n)*(a?1-e/t:e/t)}setValue(e){var t,i,{min:r,max:n}=this.attribute;n!==r&&(([n,r]=array(e)),({startHandler:t,endHandler:i}=this._getHandlers()),t&&this._updateHandler(t,this.calculatePosByValue(n),n),i&&this._updateHandler(i,this.calculatePosByValue(r),r),this._updateTrack())}render(){this.removeAllChild(!0);var{layout:e=\\\"horizontal\\\",railWidth:t,railHeight:i,startText:r,endText:n,min:o,max:a,showHandler:l=!0,showTooltip:s}=this.attribute;let h=this.attribute[\\\"value\\\"];isNil_default(h)&&(h=[o,a]),this._currentValue={startValue:convertValueToRange(h)[0],endValue:convertValueToRange(h)[1]};o=\\\"horizontal\\\"===e,this._isHorizontal=o,a=graphicCreator.group({x:0,y:0});a.name=SLIDER_ELEMENT_NAME.innerView,this.add(a),this._innerView=a;let d,u=0;r&&r.visible&&((d=graphicCreator.text(Object.assign({x:o?0:t/2,y:o?i/2:0,textAlign:o?\\\"start\\\":\\\"center\\\",textBaseline:o?\\\"middle\\\":\\\"top\\\",text:r.text,lineHeight:null==(e=r.style)?void 0:e.fontSize},r.style))).name=SLIDER_ELEMENT_NAME.startText,a.add(d),e=isValid_default(r.space)?r.space:0,u+=(o?d.AABBBounds.width():d.AABBBounds.height())+e);var c,r=graphicCreator.group({x:o?u:0,y:o?0:u}),e=(a.add(r),graphicCreator.group({x:0,y:0}));e.name=SLIDER_ELEMENT_NAME.railContainer,this._railContainer=e,r.add(e),this._mainContainer=r,this._renderRail(e),u+=o?t:i,n&&n.visible&&(c=isValid_default(n.space)?n.space:0,(i=graphicCreator.text(Object.assign({x:o?u+c:t/2,y:o?i/2:u+c,textAlign:o?\\\"start\\\":\\\"center\\\",textBaseline:o?\\\"middle\\\":\\\"top\\\",text:n.text,lineHeight:null==(t=n.style)?void 0:t.fontSize},n.style))).name=SLIDER_ELEMENT_NAME.endText,a.add(i)),this._renderTrack(e),l&&(this._renderHandlers(r),this._bindEvents()),s&&(this._renderTooltip(),this._bindTooltipEvents())}_renderRail(e){var{railWidth:t,railHeight:i,railStyle:r,slidable:n}=this.attribute;let o=\\\"default\\\";!1!==n&&(o=\\\"pointer\\\");n=graphicCreator.rect(Object.assign({x:0,y:0,width:t,height:i,cursor:o},r));return n.name=SLIDER_ELEMENT_NAME.rail,e.add(n),this._rail=n}_renderHandlers(e){var{range:t,min:i,max:r,handlerSize:n=14,handlerStyle:o,handlerText:a,railHeight:l,railWidth:s,slidable:h}=this.attribute;let d=this.attribute[\\\"value\\\"];isNil_default(d)&&(d=[i,r]);var i=a&&a.visible,r=this._isHorizontal,[a,u]=convertValueToRange(d),c=this.calculatePosByValue(a,t?\\\"start\\\":\\\"end\\\"),g=this._renderHandler(Object.assign({x:r?c:s/2,y:r?l/2:c,size:n,strokeBoundsBuffer:0,cursor:!1===h?\\\"default\\\":getDefaultCursor(r)},o));g.name=SLIDER_ELEMENT_NAME.startHandler,this._startHandler=g,e.add(g),this._currentValue.startPos=c,i&&((g=this._renderHandlerText(a,t?\\\"start\\\":\\\"end\\\")).name=SLIDER_ELEMENT_NAME.startHandlerText,e.add(g),this._startHandlerText=g),t&&(c=this.calculatePosByValue(u,\\\"end\\\"),(a=this._renderHandler(Object.assign({x:r?c:s/2,y:r?l/2:c,size:n,strokeBoundsBuffer:0,cursor:!1===h?\\\"default\\\":getDefaultCursor(r)},o))).name=SLIDER_ELEMENT_NAME.endHandler,this._endHandler=a,e.add(a),this._currentValue.endPos=c,i)&&((g=this._renderHandlerText(u,\\\"end\\\")).name=SLIDER_ELEMENT_NAME.endHandlerText,e.add(g),this._endHandlerText=g)}_renderTrack(e){var{range:t,min:i,max:r,railHeight:n,railWidth:o,trackStyle:a,railStyle:l,slidable:s,value:h}=this.attribute;let d,u;isNil_default(h)?t?(d=i,u=r):d=u=i:u=t?(c=clampRange_default(h,i,r),d=c[0],c[1]):(d=i,clamp_default(h,i,r));var c=this._isHorizontal,h=(t||(d=i),graphicCreator.group({x:0,y:0,width:o,height:n,cornerRadius:null==l?void 0:l.cornerRadius,clip:!0,pickable:!1})),r=(h.name=SLIDER_ELEMENT_NAME.trackContainer,isObject_default(t)&&!0===t.draggableTrack),i=!1===s?\\\"default\\\":!1===t||!1===r?\\\"pointer\\\":getDefaultCursor(c),l=this.calculatePosByValue(d,\\\"start\\\"),s=this.calculatePosByValue(u,t?\\\"end\\\":\\\"start\\\"),r=graphicCreator.rect(Object.assign({x:c?Math.min(l,s):0,y:c?0:Math.min(l,s),width:c?Math.abs(s-l):o,height:c?n:Math.abs(s-l),cursor:i},a));r.name=SLIDER_ELEMENT_NAME.track,this._track=r,h.add(r),e.add(h)}_renderHandler(e){return graphicCreator.symbol(e)}_renderHandlerText(e,t){var{align:i,handlerSize:r=14,handlerText:n={},railHeight:o,railWidth:a,slidable:l}=this.attribute,s=this._isHorizontal,h=this.calculatePosByValue(e,t),d=null!=(d=n.space)?d:4,u={text:n.formatter?n.formatter(e):e.toFixed(null!=(u=n.precision)?u:0),lineHeight:null==(u=n.style)?void 0:u.lineHeight,cursor:!1===l?\\\"default\\\":getDefaultCursor(s)};return s?\\\"top\\\"===i?(u.textBaseline=\\\"bottom\\\",u.textAlign=\\\"center\\\",u.x=h,u.y=(o-r)/2-d):(u.textBaseline=\\\"top\\\",u.textAlign=\\\"center\\\",u.x=h,u.y=(o+r)/2+d):(\\\"left\\\"===i?(u.textBaseline=\\\"middle\\\",u.textAlign=\\\"end\\\",u.x=(a-r)/2-d):(u.textBaseline=\\\"middle\\\",u.textAlign=\\\"start\\\",u.x=(a+r)/2+d),u.y=h),graphicCreator.text(Object.assign(Object.assign({},u),n.style))}_renderTooltip(){var{tooltip:e,railHeight:t,railWidth:i,align:r}=this.attribute,n=(e&&e.alwaysShow?this._tooltipState={value:this._currentValue.startValue,pos:this._currentValue.startPos}:this._tooltipState=null,this._isHorizontal?0:i/2),o=this._isHorizontal?t/2:0,a=(e&&e.shape&&(a=graphicCreator.symbol(Object.assign({pickable:!1,visible:!!this._tooltipState,x:n,y:o,symbolType:\\\"circle\\\"},e.shapeStyle)),this._tooltipShape=a,this._mainContainer.add(a)),e&&e.text||{}),e=null!=(e=a.space)?e:6,l={pickable:!1,visible:!!this._tooltipState,text:\\\"\\\"},t=(this._isHorizontal?(l.x=n,l.y=\\\"top\\\"===r?o-t/2-e:o+t/2+e,l.textAlign=\\\"center\\\",l.textBaseline=\\\"top\\\"===r?\\\"bottom\\\":\\\"top\\\"):(l.y=o,l.x=\\\"left\\\"===r?n-i/2-e:o+i/2+e,l.textAlign=\\\"left\\\"===r?\\\"end\\\":\\\"start\\\",l.textBaseline=\\\"middle\\\"),graphicCreator.text(Object.assign(Object.assign({},l),a.style)));this._mainContainer.add(t),this._tooltipText=t,this._tooltipState&&this._updateTooltip()}_updateTooltip(){var e,t,i,r;(this._tooltipShape||this._tooltipText)&&this._tooltipState&&(({railWidth:t,railHeight:e}=this.attribute),t=this._isHorizontal?t:e,e=this._tooltipState.pos*t,t=this._isHorizontal?\\\"x\\\":\\\"y\\\",i=(this._tooltipShape&&this._tooltipShape.setAttributes({visible:!0,[t]:e}),this.attribute)[\\\"align\\\"],this._tooltipText)&&(r=this.attribute.tooltip&&this.attribute.tooltip.text||{},this._tooltipText.setAttributes({visible:!0,[t]:e,text:r.formatter?r.formatter(this._tooltipState.value):this._isHorizontal||\\\"left\\\"!==i?\\\"≈ \\\"+this._tooltipState.value.toFixed(null!=(t=r.precision)?t:0):this._tooltipState.value.toFixed(null!=(e=r.precision)?e:0)+\\\" ≈\\\"}))}_bindEvents(){var e,t;this.attribute.disableTriggerEvent||(({slidable:e,range:t}=this.attribute),e&&(this._startHandler&&this._startHandler.addEventListener(\\\"pointerdown\\\",this._onHandlerPointerdown),this._startHandlerText&&this._startHandlerText.addEventListener(\\\"pointerdown\\\",this._onHandlerPointerdown),this._endHandler&&this._endHandler.addEventListener(\\\"pointerdown\\\",this._onHandlerPointerdown),this._endHandlerText&&this._endHandlerText.addEventListener(\\\"pointerdown\\\",this._onHandlerPointerdown),isObject_default(t)&&t.draggableTrack&&this._track.addEventListener(\\\"pointerdown\\\",this._onTrackPointerdown),this._railContainer.addEventListener(\\\"pointerdown\\\",this._onRailPointerDown)))}_bindTooltipEvents(){this.attribute.disableTriggerEvent||(this._mainContainer.addEventListener(\\\"pointerenter\\\",this._onTooltipShow),this._mainContainer.addEventListener(\\\"pointermove\\\",this._onTooltipUpdate),this._mainContainer.addEventListener(\\\"pointerleave\\\",this._onTooltipHide))}_updateTrack(){var e,t,{inverse:i,railWidth:r,railHeight:n}=this.attribute,o=this._startHandler,a=this._endHandler;this._isHorizontal?(e=null==o?void 0:o.attribute.x,a?(t=null==a?void 0:a.attribute.x,this._track.setAttributes({x:Math.min(e,t),width:Math.abs(e-t)})):i?this._track.setAttributes({x:e,width:r-e}):this._track.setAttributes({width:e})):(t=null==o?void 0:o.attribute.y,a?(r=null==a?void 0:a.attribute.y,this._track.setAttributes({y:Math.min(t,r),height:Math.abs(t-r)})):i?this._track.setAttributes({y:t,height:n-t}):this._track.setAttributes({height:t}))}_updateHandler(e,t,i){var r,n=this._isHorizontal,o=(e.setAttribute(n?\\\"x\\\":\\\"y\\\",t),e.name===SLIDER_ELEMENT_NAME.startHandler?this._startHandlerText:this._endHandlerText);o&&(({handlerText:r={}}=this.attribute),o.setAttributes({text:r.formatter?r.formatter(i):i.toFixed(null!=(r=r.precision)?r:0),[n?\\\"x\\\":\\\"y\\\"]:t})),e.name===SLIDER_ELEMENT_NAME.startHandler?(this._currentValue.startValue=i,this._currentValue.startPos=t):(this._currentValue.endValue=i,this._currentValue.endPos=t)}_updateHandlerText(e,t,i){var r=this._isHorizontal,{handlerText:n={}}=this.attribute,n=(e.setAttributes({[r?\\\"x\\\":\\\"y\\\"]:t,text:n.formatter?n.formatter(i):i.toFixed(null!=(n=n.precision)?n:0)}),e.name===SLIDER_ELEMENT_NAME.startHandlerText?this._startHandler:this._endHandler);n&&n.setAttributes({[r?\\\"x\\\":\\\"y\\\"]:t}),e.name===SLIDER_ELEMENT_NAME.startHandlerText?(this._currentValue.startValue=i,this._currentValue.startPos=t):(this._currentValue.endValue=i,this._currentValue.endPos=t)}_dispatchChangeEvent(){var e=!!this.attribute.range,t=this._currentValue;this._dispatchEvent(\\\"change\\\",{value:e?[Math.min(t.endValue,t.startValue),Math.max(t.endValue,t.startValue)]:t.startValue,position:e?[Math.min(t.endPos,t.startPos),Math.max(t.endPos,t.startPos)]:t.startPos})}_dispatchTooltipEvent(e){this._dispatchEvent(\\\"sliderTooltip\\\",{type:e,position:this._tooltipState&&this._tooltipState.pos,value:this._tooltipState&&this._tooltipState.value})}_getHandlers(){var e=this.attribute[\\\"inverse\\\"];let t=this._startHandler,i=this._endHandler;return i&&(this._isHorizontal?(!e&&i.attribute.x<(null==t?void 0:t.attribute.x)||e&&i.attribute.x>(null==t?void 0:t.attribute.x))&&([t,i]=[i,t]):(!e&&i.attribute.y<(null==t?void 0:t.attribute.y)||e&&i.attribute.y>(null==t?void 0:t.attribute.y))&&([t,i]=[i,t])),{startHandler:t,endHandler:i}}},ColorContinuousLegend=(Slider.defaultAttributes={slidable:!0,layout:\\\"horizontal\\\",align:\\\"bottom\\\",height:8,showHandler:!0,handlerSize:14,handlerStyle:{symbolType:\\\"circle\\\",fill:\\\"#fff\\\",stroke:\\\"#91caff\\\",lineWidth:2},tooltip:{shapeStyle:{symbolType:\\\"circle\\\",fill:\\\"#fff\\\",stroke:\\\"#91caff\\\",lineWidth:2},text:{style:{fill:\\\"#2C3542\\\",fontSize:12}}},railStyle:{fill:\\\"rgba(0,0,0,.04)\\\"},trackStyle:{fill:\\\"#91caff\\\"},showValue:!0,valueStyle:{fill:\\\"#2C3542\\\",fontSize:12},startText:{style:{fill:\\\"#2C3542\\\",fontSize:12}},endText:{style:{fill:\\\"#2C3542\\\",fontSize:12}},handlerText:{visible:!0,space:4,precision:0,style:{fill:\\\"#2C3542\\\",fontSize:12}}},loadColorContinuousLegendComponent(),class MUb extends LegendBase{constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},MUb.defaultAttributes,e)),this.name=\\\"colorLegend\\\",this._onSliderToolipChange=e=>{var t,i=this._slider.tooltipShape;i&&e.detail&&!isNil_default(e.detail.value)&&(t=this._colorScale.scale(e.detail.value),i.setAttribute(\\\"fill\\\",t)),this.dispatchEvent(e)},this._onSliderChange=e=>{this._updateColor(),this.dispatchEvent(e)}}setSelected(e){this._slider&&(this._slider.setValue(e),this._updateColor())}_renderContent(){var{colors:e,slidable:t,layout:i,align:r,min:n,max:o,value:a,railWidth:l,railHeight:s,showHandler:h=!0,handlerSize:d,handlerStyle:u,railStyle:c,trackStyle:g,startText:p,endText:f,handlerText:m,showTooltip:b,tooltip:v,inverse:C,disableTriggerEvent:y}=this.attribute,_=[],w=(o-n)/(e.length-1);for(let x=0;x<e.length;x++)_.push(n+w*x);this._colorScale=(new LinearScale).domain(_,!0).range(e),this._color=this._getTrackColor();t=new Slider({x:0,y:0,range:{draggableTrack:!0},slidable:t,layout:i,align:r,min:n,max:o,value:a,railWidth:l,railHeight:s,showHandler:h,handlerSize:d,handlerStyle:u,railStyle:c,trackStyle:Object.assign({fill:this._color},g),startText:p,endText:f,handlerText:m,showTooltip:b,tooltip:v,disableTriggerEvent:y,inverse:C});this._innerView.add(t),(this._slider=t).translateTo(0-t.AABBBounds.x1,(this._title?this._title.AABBBounds.height()+get_default(this.attribute,\\\"title.space\\\",DEFAULT_TITLE_SPACE):0)-t.AABBBounds.y1),this._updateColor()}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener(\\\"change\\\",this._onSliderChange),this._slider.addEventListener(\\\"sliderTooltip\\\",this._onSliderToolipChange))}_getTrackColor(){var{colors:t,layout:i,inverse:r}=this.attribute;if(!isEmpty_default(t)){var n=t.length;if(1===n)return t[0];var o=[];for(let e=0;e<n;e++){var a=e/(n-1);o.push({offset:a,color:t[e]})}var i=\\\"horizontal\\\"===i,l={gradient:\\\"linear\\\",stops:o,x0:0,y0:0,x1:i?1:0,y1:i?0:1};return r&&(i?(l.x0=1,l.x1=0):(l.y0=1,l.y1=0)),l}}_updateColor(){var{layout:e=\\\"horizontal\\\",colors:t,railWidth:i,railHeight:r}=this.attribute,{startHandler:n,endHandler:o,track:a}=this._slider,{startValue:l,endValue:s,startPos:h,endPos:d}=this._slider.currentValue,u=this._colorScale.scale(l),c=this._colorScale.scale(s),u=(null!=n&&n.setAttribute(\\\"fill\\\",u),null!=o&&o.setAttribute(\\\"fill\\\",c),\\\"horizontal\\\"===e?i:r);if(Math.abs(h-d)!==u&&t&&1<t.length){const g=this._color.stops,p=Math.min(h,d),f=Math.max(h,d),m=p/u,b=f/u,v=b-m,C=g.filter(e=>e.offset>m&&e.offset<b),y=Math.min(l,s),_=Math.max(l,s),w=this._colorScale.scale(y),x=this._colorScale.scale(_),S=[{offset:0,color:w}];C.forEach(e=>{S.push({offset:(e.offset-m)/v,color:e.color})}),S.push({offset:1,color:x}),a.setAttribute(\\\"fill\\\",Object.assign(Object.assign({},this._color),{stops:S}))}}});function getSizeHandlerPath(e=\\\"bottom\\\"){let t=0;return\\\"top\\\"===e?`\\n    M${t},-6L${t-3.5},-2.5\\n    v5\\n    h7\\n    v-5\\n    Z\\n`:\\\"left\\\"===e?`\\n    M${(t=1)-6},0L${t-6+2.5},-3.5\\n    h5\\n    v7\\n    h-5\\n    Z\\n`:\\\"right\\\"===e?`\\n    M${(t=-1)+6},0L${t+6-2.5},-3.5\\n    h-5\\n    v7\\n    h5\\n    Z\\n  `:`\\n    M${t},6L${t-3.5},2.5\\n    v-5\\n    h7\\n    v5\\n    Z\\n`}ColorContinuousLegend.defaultAttributes={layout:\\\"horizontal\\\",title:{align:\\\"start\\\",space:DEFAULT_TITLE_SPACE,textStyle:{fontSize:12,fontWeight:\\\"bold\\\",fill:\\\"rgba(46, 47, 50, 1)\\\"}},handlerSize:10,handlerStyle:{lineWidth:4,stroke:\\\"#fff\\\",outerBorder:{distance:2,lineWidth:1,stroke:\\\"#ccc\\\"}},tooltip:{shapeStyle:{lineWidth:4,stroke:\\\"#fff\\\"}}},init_esbuild_inject(),init_esbuild_inject(),loadSizeContinuousLegendComponent();var SizeContinuousLegend=class cWb extends LegendBase{constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},cWb.defaultAttributes,e)),this.name=\\\"sizeLegend\\\",this._onSliderChange=e=>{this.dispatchEvent(e)},this._onSliderToolipChange=e=>{this.dispatchEvent(e)}}setSelected(e){this._slider&&this._slider.setValue(e)}_renderContent(){var{slidable:e,layout:t,align:i,min:r,max:n,value:o,railWidth:a,railHeight:l,showHandler:s=!0,handlerSize:h,handlerStyle:d,railStyle:u,trackStyle:c,startText:g,endText:p,handlerText:f,showTooltip:m,tooltip:b,sizeBackground:v,disableTriggerEvent:C,inverse:y}=this.attribute,_=graphicCreator.group({x:0,y:0}),e=(this._innerView.add(_),new Slider({x:0,y:0,zIndex:1,range:{draggableTrack:!0},slidable:e,layout:t,align:i,min:r,max:n,value:o,railWidth:a,railHeight:l,showHandler:s,handlerSize:h,handlerStyle:Object.assign({symbolType:getSizeHandlerPath(i)},d),railStyle:u,trackStyle:c,startText:g,endText:p,handlerText:f,showTooltip:m,tooltip:b,disableTriggerEvent:C,inverse:y}));_.add(e);let w,x=0;\\\"horizontal\\\"===t?\\\"top\\\"===i?(w=`M0,0L${a},0L${y?0:a},12Z`,x=l):(w=`M0,12L${a},12L${y?0:a},0Z`,e.setAttribute(\\\"y\\\",12)):\\\"left\\\"===i?w=`M${a},0L${a+12},${y?0:l}L${a},${l}Z`:(w=`M0,${y?0:l}L12,${l}L12,0Z`,e.setAttribute(\\\"x\\\",12));r=graphicCreator.path(Object.assign(Object.assign({x:0,y:x,path:w},v),{zIndex:0})),_.add(r),n=this._title?this._title.AABBBounds.height()+get_default(this.attribute,\\\"title.space\\\",DEFAULT_TITLE_SPACE):0;_.translate(0-_.AABBBounds.x1,n-_.AABBBounds.y1),this._slider=e}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener(\\\"change\\\",this._onSliderChange),this._slider.addEventListener(\\\"sliderTooltip\\\",this._onSliderToolipChange))}};function loadTitleComponent(){registerGroup(),registerText(),registerRichtext()}SizeContinuousLegend.defaultAttributes={layout:\\\"horizontal\\\",title:{align:\\\"start\\\",space:DEFAULT_TITLE_SPACE,textStyle:{fontSize:12,fontWeight:\\\"bold\\\",fill:\\\"rgba(46, 47, 50, 1)\\\"}},handlerSize:10,handlerStyle:{lineWidth:1,stroke:\\\"#ccc\\\",fill:\\\"#fff\\\"},sizeBackground:{fill:\\\"rgba(20,20,20,0.1)\\\"}},init_esbuild_inject(),init_esbuild_inject(),loadTitleComponent();var Title=class JWb extends AbstractComponent{constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},JWb.defaultAttributes,e)),this.name=\\\"title\\\"}render(){var e,{textType:t,text:i,subtextType:r,textStyle:n={},subtext:o,subtextStyle:a={},width:l,height:s,minWidth:h,maxWidth:d,minHeight:u,maxHeight:c,align:g,verticalAlign:p,padding:f=0}=this.attribute,f=normalizePadding(f),m=this.createOrUpdateChild(\\\"title-container\\\",{x:f[3],y:f[0],zIndex:1},\\\"group\\\"),i=(!1!==this.attribute.visible&&!1!==n.visible&&(\\\"rich\\\"===t||isValid_default(n.character)?(e=Object.assign({x:null!=(e=n.x)?e:0,y:null!=(e=n.y)?e:0,width:null!=(e=null!=(e=n.width)?e:l)?e:0,height:null!=(e=null!=(e=n.height)?e:s)?e:0,ellipsis:null==(e=n.ellipsis)||e,wordBreak:null!=(e=n.wordBreak)?e:\\\"break-word\\\",maxHeight:n.maxHeight,maxWidth:n.maxWidth,textConfig:null!=(e=n.character)?e:i},n),this._mainTitle=m.createOrUpdateChild(\\\"mainTitle\\\",e,\\\"richtext\\\")):\\\"html\\\"===t?(e=Object.assign({html:Object.assign(Object.assign({dom:i},DEFAULT_HTML_TEXT_SPEC),n),x:null!=(e=n.x)?e:0,y:null!=(t=n.y)?t:0,width:null!=(t=null!=(e=n.width)?e:l)?t:0,height:null!=(t=null!=(e=n.height)?e:s)?t:0,ellipsis:null==(e=n.ellipsis)||e,wordBreak:null!=(t=n.wordBreak)?t:\\\"break-word\\\",maxHeight:n.maxHeight,maxWidth:n.maxWidth,textConfig:[]},n),this._mainTitle=m.createOrUpdateChild(\\\"mainTitle\\\",e,\\\"richtext\\\")):isValid_default(i)&&(this._mainTitle=m.createOrUpdateChild(\\\"mainTitle\\\",Object.assign(Object.assign({text:isArray_default(i)?i:[i],wrap:!0},n),{maxLineWidth:null!=(t=n.maxLineWidth)?t:l,heightLimit:n.heightLimit,lineClamp:n.lineClamp,ellipsis:null==(e=n.ellipsis)||e,x:0,y:0}),\\\"text\\\"))),this._mainTitle?this._mainTitle.AABBBounds.height():0),t=this._mainTitle?this._mainTitle.AABBBounds.width():0,o=(!1!==this.attribute.visible&&!1!==a.visible&&(\\\"rich\\\"===r||isValid_default(a.character)?(e=Object.assign({x:null!=(e=a.x)?e:0,y:null!=(e=a.y)?e:0,width:null!=(e=null!=(e=a.width)?e:l)?e:0,height:null!=(e=null!=(e=a.height)?e:s)?e:0,ellipsis:null==(e=a.ellipsis)||e,wordBreak:null!=(e=a.wordBreak)?e:\\\"break-word\\\",maxHeight:a.maxHeight,maxWidth:a.maxWidth,textConfig:null!=(e=a.character)?e:o},a),this._subTitle=m.createOrUpdateChild(\\\"subTitle\\\",e,\\\"richtext\\\")):\\\"html\\\"===r?(e=Object.assign({html:Object.assign(Object.assign({dom:o},DEFAULT_HTML_TEXT_SPEC),a),x:null!=(e=a.x)?e:0,y:null!=(r=a.y)?r:0,width:null!=(r=null!=(e=a.width)?e:l)?r:0,height:null!=(r=null!=(e=a.height)?e:s)?r:0,ellipsis:null==(e=a.ellipsis)||e,wordBreak:null!=(r=a.wordBreak)?r:\\\"break-word\\\",maxHeight:a.maxHeight,maxWidth:a.maxWidth,textConfig:[]},a),this._subTitle=m.createOrUpdateChild(\\\"subTitle\\\",e,\\\"richtext\\\")):isValid_default(o)&&(this._subTitle=m.createOrUpdateChild(\\\"subTitle\\\",Object.assign(Object.assign({text:isArray_default(o)?o:[o],wrap:!0},a),{maxLineWidth:null!=(r=a.maxLineWidth)?r:l,heightLimit:a.heightLimit,lineClamp:a.lineClamp,ellipsis:null==(e=a.ellipsis)||e,x:0,y:i}),\\\"text\\\"))),this._subTitle?this._subTitle.AABBBounds.height():0),r=this._subTitle?this._subTitle.AABBBounds.width():0;let b=Math.max(t,r),v=i+(null!=(e=a.height)?e:o);isValid_default(l)&&(b=l,this._mainTitle&&this._mainTitle.setAttribute(\\\"maxLineWidth\\\",l),this._subTitle)&&this._subTitle.setAttribute(\\\"maxLineWidth\\\",l),isValid_default(s)&&(v=s),isValid_default(h)&&b<h&&(b=h),isValid_default(d)&&(this._mainTitle&&this._mainTitle.setAttribute(\\\"maxLineWidth\\\",d),this._subTitle&&this._subTitle.setAttribute(\\\"maxLineWidth\\\",d),this._mainTitle&&this._mainTitle.setAttribute(\\\"maxWidth\\\",d),this._subTitle&&this._subTitle.setAttribute(\\\"maxWidth\\\",d),b>d)&&(b=d),isValid_default(u)&&v<u&&(v=u),isValid_default(c)&&(this._mainTitle&&this._mainTitle.setAttribute(\\\"maxHeight\\\",c),this._subTitle&&this._subTitle.setAttribute(\\\"maxHeight\\\",c-i),v>c)&&(v=c),m.attribute.width=b,m.attribute.height=v,m.attribute.boundsPadding=f,this._mainTitle&&((isValid_default(g)||isValid_default(n.align))&&(e=n.align||g,l=null!=(o=n.width)?o:t,\\\"left\\\"===e?(this._mainTitle.setAttribute(\\\"x\\\",0),this._mainTitle.setAttribute(\\\"textAlign\\\",\\\"left\\\")):\\\"center\\\"===e?(this._mainTitle.setAttribute(\\\"x\\\",l/2),this._mainTitle.setAttribute(\\\"textAlign\\\",\\\"center\\\")):\\\"right\\\"===e&&(this._mainTitle.setAttribute(\\\"x\\\",l),this._mainTitle.setAttribute(\\\"textAlign\\\",\\\"right\\\"))),isValid_default(p)||isValid_default(n.verticalAlign))&&(s=n.verticalAlign||p,h=n.height||v,\\\"top\\\"===s?(this._mainTitle.setAttribute(\\\"y\\\",0),this._mainTitle.setAttribute(\\\"textBaseline\\\",\\\"top\\\")):\\\"middle\\\"===s?(this._mainTitle.setAttribute(\\\"y\\\",h/2),this._mainTitle.setAttribute(\\\"textBaseline\\\",\\\"middle\\\")):\\\"bottom\\\"===s&&(this._mainTitle.setAttribute(\\\"y\\\",h),this._mainTitle.setAttribute(\\\"textBaseline\\\",\\\"bottom\\\"))),this._subTitle&&((isValid_default(g)||isValid_default(a.align))&&(d=a.align||g,c=null!=(u=a.width)?u:r,\\\"left\\\"===d?(this._subTitle.setAttribute(\\\"x\\\",0),this._subTitle.setAttribute(\\\"textAlign\\\",\\\"left\\\")):\\\"center\\\"===d?(this._subTitle.setAttribute(\\\"x\\\",c/2),this._subTitle.setAttribute(\\\"textAlign\\\",\\\"center\\\")):\\\"right\\\"===d&&(this._subTitle.setAttribute(\\\"x\\\",c),this._subTitle.setAttribute(\\\"textAlign\\\",\\\"right\\\"))),isValid_default(p)||isValid_default(n.verticalAlign))&&(m=a.verticalAlign||p,f=i,t=null!=(o=a.height)?o:0,\\\"top\\\"===m?(this._subTitle.setAttribute(\\\"y\\\",f),this._subTitle.setAttribute(\\\"textBaseline\\\",\\\"top\\\")):\\\"middle\\\"===m?(this._subTitle.setAttribute(\\\"y\\\",f+t/2),this._subTitle.setAttribute(\\\"textBaseline\\\",\\\"middle\\\")):\\\"bottom\\\"===m&&(this._subTitle.setAttribute(\\\"y\\\",f+t),this._subTitle.setAttribute(\\\"textBaseline\\\",\\\"bottom\\\")))}};function loadCheckBoxComponent(){registerGroup(),registerRect(),registerText(),registerImage()}Title.defaultAttributes={textStyle:{ellipsis:\\\"...\\\",fill:\\\"#333\\\",fontSize:20,fontWeight:\\\"bold\\\",textAlign:\\\"left\\\",textBaseline:\\\"top\\\"},subtextStyle:{ellipsis:\\\"...\\\",fill:\\\"#6F6F6F\\\",fontSize:16,fontWeight:\\\"normal\\\",textAlign:\\\"left\\\",textBaseline:\\\"top\\\"}},init_esbuild_inject(),init_esbuild_inject();var checkSvg='<svg width=\\\"200\\\" height=\\\"200\\\" viewBox=\\\"0 0 1024 1024\\\" fill=\\\"#fff\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M877.44815445 206.10060629a64.72691371 64.72691371 0 0 0-95.14856334 4.01306852L380.73381888 685.46812814 235.22771741 533.48933518a64.72691371 64.72691371 0 0 0-92.43003222-1.03563036l-45.82665557 45.82665443a64.72691371 64.72691371 0 0 0-0.90617629 90.61767965l239.61903446 250.10479331a64.72691371 64.72691371 0 0 0 71.19960405 15.14609778 64.33855261 64.33855261 0 0 0 35.08198741-21.23042702l36.24707186-42.71976334 40.5190474-40.77795556-3.36579926-3.49525333 411.40426297-486.74638962a64.72691371 64.72691371 0 0 0-3.88361443-87.64024149l-45.3088404-45.43829334z\\\"></path></svg>',indeterminateSvg='<svg width=\\\"200\\\" height=\\\"200\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" fill=\\\"none\\\"><path stroke=\\\"#fff\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"5\\\" d=\\\"M5 12h14\\\"/></svg>',CheckBox=(loadCheckBoxComponent(),class iYb extends AbstractComponent{constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},iYb.defaultAttributes,e)),this._handlePointerUp=()=>{this.attribute.disabled||(this.attribute.checked?this.setAttribute(\\\"checked\\\",!1):this.setAttribute(\\\"checked\\\",!0),this.setAttribute(\\\"indeterminate\\\",!1),this._dispatchEvent(\\\"checkbox_state_change\\\",{eventType:\\\"checkbox_state_change\\\",checked:this.attribute.checked}),this.stage.renderNextFrame())},this.renderGroup(),this.onBeforeAttributeUpdate=(e,t,i)=>{\\\"interactive\\\"in e&&this.setAttribute(\\\"pickable\\\",e.interactive),\\\"disabled\\\"in e&&this.setAttribute(\\\"cursor\\\",e.disable?this.attribute.disableCursor:this.attribute.cursor)},this.addEventListener(\\\"pointerup\\\",this._handlePointerUp)}render(){this.removeAllChild(!0),this.renderBox(),this.renderIcon(),this.renderText(),this.layout()}renderBox(){this._box=new Rect(merge({},this.attribute.box));var e=this.attribute.checked||this.attribute.indeterminate;e&&this.attribute.disabled?this._box.setAttributes({fill:this.attribute.box.disableCheckedFill,stroke:this.attribute.box.disableCheckedStroke}):e&&this._box.setAttributes({fill:this.attribute.box.checkedFill,stroke:this.attribute.box.checkedStroke}),this.appendChild(this._box)}renderIcon(){this._checkIcon=new Image2(merge({image:this.attribute.icon.checkIconImage},this.attribute.icon)),this.appendChild(this._checkIcon),this._indeterminateIcon=new Image2(merge({image:this.attribute.icon.indeterminateIconImage},this.attribute.icon)),this.appendChild(this._indeterminateIcon),this.attribute.checked?(this._checkIcon.setAttribute(\\\"visible\\\",!0),this._indeterminateIcon.setAttribute(\\\"visible\\\",!1)):this.attribute.indeterminate?(this._checkIcon.setAttribute(\\\"visible\\\",!1),this._indeterminateIcon.setAttribute(\\\"visible\\\",!0)):(this._checkIcon.setAttribute(\\\"visible\\\",!1),this._indeterminateIcon.setAttribute(\\\"visible\\\",!1))}renderText(){this._text=new Text(merge({wrap:!0},this.attribute.text)),this.attribute.disabled&&this._text.setAttribute(\\\"fill\\\",this.attribute.text.disableFill),this.appendChild(this._text)}renderGroup(){this.attribute.interactive||this.setAttribute(\\\"pickable\\\",!1),this.attribute.disabled&&this.setAttribute(\\\"cursor\\\",this.attribute.disableCursor)}layout(){var e=this.attribute.box.height,t=this.attribute.icon.height,i=this._text.AABBBounds.height(),r=Math.max(e,t,i),e=r/2-e/2,t=r/2-t/2,r=r/2-i/2,i=this.attribute.box.width,n=this.attribute.icon.width,o=Math.max(i,n),n=o/2-n/2,a=o+this.attribute.spaceBetweenTextAndIcon;this._box.setAttributes({x:o/2-i/2,y:e}),this._checkIcon.setAttributes({x:n,y:t}),this._indeterminateIcon.setAttributes({x:n,y:t}),this._text.setAttributes({x:a,y:r})}});function loadRadioComponent(){registerGroup(),registerRect(),registerWrapText(),registerImage()}CheckBox.defaultAttributes={interactive:!0,disabled:!1,checked:!1,indeterminate:!1,cursor:\\\"pointer\\\",disableCursor:\\\"not-allowed\\\",spaceBetweenTextAndIcon:8,text:{text:\\\"text\\\",fontSize:14,fill:\\\"#000\\\",disableFill:\\\"rgb(201,205,212)\\\",textBaseline:\\\"top\\\",pickable:!1},icon:{checkIconImage:checkSvg,indeterminateIconImage:indeterminateSvg,width:10,height:10,pickable:!1},box:{width:14,height:14,cornerRadius:2,fill:\\\"#fff\\\",stroke:\\\"rgb(229,230,235)\\\",disableFill:\\\"rgb(242,243,245)\\\",checkedFill:\\\"rgb(22, 93, 255)\\\",checkedStroke:\\\"rgb(22, 93, 255)\\\",disableCheckedFill:\\\"rgb(148, 191, 255)\\\",disableCheckedStroke:\\\"rgb(148, 191, 255)\\\",pickable:!1}},init_esbuild_inject(),init_esbuild_inject(),loadRadioComponent();var Radio=class CYb extends AbstractComponent{constructor(e,t){super(null!=t&&t.skipDefault?e:merge({},CYb.defaultAttributes,e)),this._handlePointerUp=()=>{this.attribute.disabled||this.attribute.checked||(this.setAttribute(\\\"checked\\\",!0),this._dispatchEvent(\\\"radio_checked\\\",{eventType:\\\"radio_checked\\\",target:this}),this.stage.renderNextFrame())},this.renderGroup(),this.onBeforeAttributeUpdate=(e,t,i)=>{\\\"interactive\\\"in e&&this.setAttribute(\\\"pickable\\\",e.interactive),\\\"disabled\\\"in e&&this.setAttribute(\\\"cursor\\\",e.disable?this.attribute.disableCursor:this.attribute.cursor)},this.addEventListener(\\\"pointerup\\\",this._handlePointerUp)}render(){this.removeAllChild(!0),this.renderCircle(),this.renderText(),this.layout()}renderCircle(){this._circle=new Arc(merge({},this.attribute.circle));var e=this.attribute.checked;e&&this.attribute.disabled?this._circle.setAttributes({fill:this.attribute.circle.disableCheckedFill,stroke:this.attribute.circle.disableCheckedStroke}):e&&this._circle.setAttributes({fill:this.attribute.circle.checkedFill,stroke:this.attribute.circle.checkedStroke}),this.appendChild(this._circle)}renderText(){this._text=new WrapText(merge({},this.attribute.text)),this.attribute.disabled&&this._text.setAttribute(\\\"fill\\\",this.attribute.text.disableFill),this.appendChild(this._text)}renderGroup(){this.attribute.interactive||this.setAttribute(\\\"pickable\\\",!1),this.attribute.disabled&&this.setAttribute(\\\"cursor\\\",this.attribute.disableCursor)}layout(){var e=2*(this.attribute.circle.outerRadius+this.attribute.circle.lineWidth),t=this._text.AABBBounds.height(),i=Math.max(e,t),e=i/2-e/2+this.attribute.circle.outerRadius+this.attribute.circle.lineWidth,i=i/2-t/2,t=2*(this.attribute.circle.outerRadius+this.attribute.circle.lineWidth),r=this.attribute.circle.outerRadius+this.attribute.circle.lineWidth,t=t+this.attribute.spaceBetweenTextAndIcon;this._circle.setAttributes({x:r,y:e}),this._text.setAttributes({x:t,y:i})}};function transformLegendTitleAttributes(e){var t,i=Object.assign({},e);return isEmpty_default(e.style)||(i.textStyle=transformToGraphic(e.style)),isEmpty_default(e.textStyle)||merge(i.textStyle,transformToGraphic(e.textStyle)),null!=(t=e.shape)&&t.style&&transformToGraphic(i.shape.style),null!=(t=e.background)&&t.style&&transformToGraphic(i.background.style),i}function transformToGraphic(e){return isEmpty_default(e)||e.angle&&(e.angle=degreeToRadian(e.angle)),e}function transformComponentStyle(t={}){return isEmpty_default(t.style)||(t.style=transformToGraphic(t.style)),isEmpty_default(t.state)||Object.keys(t.state).forEach(e=>{isEmpty_default(t.state[e])||(t.state[e]=transformToGraphic(t.state[e]))}),t}function transformStateStyle(t){return isEmpty_default(t)?null:(Object.keys(t).forEach(e=>{isEmpty_default(t[e])||(t[e]=transformToGraphic(t[e]))}),t)}function transformAxisLineStyle(e){return transformComponentStyle(e),transformComponentStyle(e.startSymbol),transformComponentStyle(e.endSymbol),e}Radio.defaultAttributes={interactive:!0,disabled:!1,checked:!1,cursor:\\\"pointer\\\",disableCursor:\\\"not-allowed\\\",spaceBetweenTextAndIcon:8,text:{text:\\\"text\\\",fontSize:14,fill:\\\"#000\\\",disableFill:\\\"rgb(201,205,212)\\\",textBaseline:\\\"top\\\",pickable:!1},circle:{outerRadius:7,innerRadius:3,startAngle:0,endAngle:2*Math.PI,lineWidth:1,fill:\\\"#fff\\\",stroke:\\\"rgb(229,230,235)\\\",disableFill:\\\"rgb(242,243,245)\\\",checkedFill:\\\"rgb(22, 93, 255)\\\",checkedStroke:\\\"rgb(22, 93, 255)\\\",disableCheckedFill:\\\"rgb(148, 191, 255)\\\",disableCheckedStroke:\\\"rgb(148, 191, 255)\\\",pickable:!1}},init_esbuild_inject(),init_esbuild_inject();var ScaleEnum2,DEFAULT_TITLE_STYLE={left:{textAlign:\\\"center\\\",textBaseline:\\\"bottom\\\"},right:{textAlign:\\\"center\\\",textBaseline:\\\"bottom\\\"},radius:{},angle:{}},DEFAULT_TEXT_FONT_FAMILY2=\\\"PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol\\\",DEFAULT_TEXT_FONT_SIZE2=14,THEME_CONSTANTS={FONT_FAMILY:DEFAULT_TEXT_FONT_FAMILY2,LABEL_FONT_SIZE:14,MAP_LABEL_FONT_SIZE:10,TITLE_FONT_SIZE:18,AXIS_TICK_SIZE:4},commonAxis={domainLine:{visible:!0,style:{lineWidth:1,stroke:\\\"#D9DDE4\\\",strokeOpacity:1}},grid:{visible:!0,style:{lineWidth:1,stroke:\\\"#EBEDF2\\\",strokeOpacity:1,lineDash:[]}},subGrid:{visible:!1,style:{lineWidth:1,stroke:\\\"#EBEDF2\\\",strokeOpacity:1,lineDash:[4,4]}},tick:{visible:!0,tickSize:THEME_CONSTANTS.AXIS_TICK_SIZE,style:{lineWidth:1,stroke:\\\"#D9DDE4\\\",strokeOpacity:1}},subTick:{visible:!1,tickSize:THEME_CONSTANTS.AXIS_TICK_SIZE/2,style:{lineWidth:1,stroke:\\\"#D9DDE4\\\",strokeOpacity:1}},label:{visible:!0,space:1,style:{fontSize:THEME_CONSTANTS.LABEL_FONT_SIZE,fill:\\\"#89909D\\\",fontWeight:\\\"normal\\\",fillOpacity:1},autoLimit:!0},title:{space:10,style:{fontSize:THEME_CONSTANTS.LABEL_FONT_SIZE,fill:\\\"#333333\\\",fontWeight:\\\"normal\\\",fillOpacity:1}}};function getCommonAxis(e){var t;return null!=(t=null==(t=null==e?void 0:e.colorScheme)?void 0:t[\\\"default\\\"])&&t.palette?merge({},commonAxis,{tick:{style:{stroke:e.colorScheme[\\\"default\\\"].palette.axisDomainColor||\\\"#D9DDE4\\\"}},subTick:{style:{stroke:e.colorScheme[\\\"default\\\"].palette.axisDomainColor||\\\"#D9DDE4\\\"}},label:{style:{fill:e.colorScheme[\\\"default\\\"].palette.axisLabelFontColor||\\\"#89909D\\\"}},title:{style:{fill:e.colorScheme[\\\"default\\\"].palette.secondaryFontColor||\\\"#333333\\\"}}}):commonAxis}function getAxisAttributes(e){const r=merge({},e);let t,i=null!=(n=null==(n=r.title)?void 0:n.angle)?n:0;\\\"left\\\"!==r.orient&&\\\"right\\\"!==r.orient||null!=(n=r.title)&&n.autoRotate&&isNil_default(r.title.angle)&&(i=\\\"left\\\"===r.orient?-90:90,t=DEFAULT_TITLE_STYLE[r.orient]);var n=pickWithout(r.label,[\\\"style\\\",\\\"formatMethod\\\",\\\"state\\\"]);return{orient:r.orient,select:r.select,hover:r.hover,line:transformAxisLineStyle(r.domainLine),label:Object.assign({style:transformToGraphic(r.label.style),formatMethod:r.label.formatMethod?(e,t,i)=>r.label.formatMethod(t.rawValue,t):null,state:transformStateStyle(r.label.state)},n),tick:{visible:r.tick.visible,length:r.tick.tickSize,inside:r.tick.inside,alignWithLabel:r.tick.alignWithLabel,style:transformToGraphic(r.tick.style),state:transformStateStyle(r.tick.state),dataFilter:r.tick.dataFilter},subTick:{visible:r.subTick.visible,length:r.subTick.tickSize,inside:r.subTick.inside,count:r.subTick.tickCount,style:transformToGraphic(r.subTick.style),state:transformStateStyle(r.subTick.state)},grid:{type:\\\"line\\\",visible:r.grid.visible,alternateColor:r.grid.alternateColor,alignWithLabel:r.grid.alignWithLabel,style:transformToGraphic(r.grid.style)},subGrid:{type:\\\"line\\\",visible:r.subGrid.visible,alternateColor:r.subGrid.alternateColor,style:transformToGraphic(r.subGrid.style)},title:{visible:r.title.visible,position:r.title.position,space:r.title.space,autoRotate:!1,angle:i?degreeToRadian(i):null,textStyle:merge({},t,transformToGraphic(r.title.style)),padding:r.title.padding,shape:{visible:null==(n=r.title.shape)?void 0:n.visible,space:null==(n=r.title.shape)?void 0:n.space,style:transformToGraphic(null==(n=r.title.shape)?void 0:n.style)},background:{visible:null==(n=r.title.background)?void 0:n.visible,style:transformToGraphic(null==(n=r.title.background)?void 0:n.style)},state:{text:transformStateStyle(r.title.state),shape:transformStateStyle(null==(n=r.title.shape)?void 0:n.state),background:transformStateStyle(null==(n=r.title.background)?void 0:n.state)}},panel:{visible:null==(n=r.background)?void 0:n.visible,style:transformToGraphic(null==(n=r.background)?void 0:n.style),state:transformStateStyle(null==(n=r.background)?void 0:n.state)}}}function isXAxis(e){return\\\"bottom\\\"===e||\\\"top\\\"===e}function isYAxis(e){return\\\"left\\\"===e||\\\"right\\\"===e}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),function(e){e.Identity=\\\"identity\\\",e.Linear=\\\"linear\\\",e.Log=\\\"log\\\",e.Pow=\\\"pow\\\",e.Sqrt=\\\"sqrt\\\",e.Symlog=\\\"symlog\\\",e.Time=\\\"time\\\",e.Quantile=\\\"quantile\\\",e.Quantize=\\\"quantize\\\",e.Threshold=\\\"threshold\\\",e.Ordinal=\\\"ordinal\\\",e.Point=\\\"point\\\",e.Band=\\\"band\\\"}(ScaleEnum2=ScaleEnum2||{});var EnableScaleMap2={};function isContinuous(e){switch(e){case ScaleEnum2.Linear:case ScaleEnum2.Log:case ScaleEnum2.Pow:case ScaleEnum2.Sqrt:case ScaleEnum2.Symlog:case ScaleEnum2.Time:return!0;default:return!1}}function isDiscrete(e){switch(e){case ScaleEnum2.Ordinal:case ScaleEnum2.Point:case ScaleEnum2.Band:return!0;default:return!1}}function identity3(e){return e}Object.values(ScaleEnum2).forEach(e=>{EnableScaleMap2[e]=!0}),init_esbuild_inject(),init_esbuild_inject();var logNegative=e=>-Math.log(-e),expNegative=e=>-Math.exp(-e),pow10=e=>isFinite(e)?Math.pow(10,e):e<0?0:e,powp=t=>10===t?pow10:t===Math.E?Math.exp:e=>Math.pow(t,e),logp=t=>t===Math.E?Math.log:10===t?Math.log10:2===t?Math.log2:(t=Math.log(t),e=>Math.log(e)/t),symlog=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),symexp=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t;function normalize3(t,i){if(t=Number(t),i=Number(i),i-=t)return e=>(e-t)/i;const e=Number.isNaN(i)?NaN:.5;return()=>e}function bimap2(e,t,i){var r=e[0],n=e[1],o=t[0],a=t[1];let l,s;return s=n<r?(l=normalize3(n,r),i(a,o)):(l=normalize3(r,n),i(o,a)),e=>s(l(e))}function bandSpace(e,t,i){var r=1===e?e+2*i:e-t+2*i;return e?0<r?r:1:0}function scaleWholeRangeSize(e,t,i,r){return bandSpace(e,i=1===i?0:i,r)*(t/(1-i))}function calculateBandwidthFromWholeRangeSize(e,t,i,r,n){var o=bandSpace(e,i,r);let a=t/Math.max(1,o||1),l=(a=n?Math.floor(a):a)*(1-i);return l=n?Math.round(l):l}function calculateWholeRangeFromRangeFactor2(e,t){var i=(e[1]-e[0])/(t[1]-t[0]),r=e[0]-i*t[0];return[r,i+r]}function polymap2(i,e,t){const r=Math.min(i.length,e.length)-1,n=new Array(r),o=new Array(r);let a=-1;for(i[r]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++a<r;)n[a]=normalize3(i[a],i[a+1]),o[a]=t(e[a],e[a+1]);return function(e){var t=bisect(i,e,1,r)-1;return o[t](n[t](e))}}var nice=(e,t)=>{var i=e.slice();let r=0,n=i.length-1,o=i[r],a=i[n];return a<o&&(([r,n]=[n,r]),([o,a]=[a,o])),i[r]=t.floor(o),i[n]=t.ceil(a),i},niceNumber2=(e,t=!1)=>{var i=Math.floor(Math.log10(e)),r=e/Math.pow(10,i);return(t?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,i)},restrictNumber2=(e,t)=>{let i,r;return r=t[0]<t[1]?(i=t[0],t[1]):(i=t[1],t[0]),Math.min(Math.max(e,i),r)},BaseScale2=class{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(e){return this._wholeRange||(isValid_default(this._rangeFactorStart)&&isValid_default(this._rangeFactorEnd)&&2===e.length?(this._wholeRange=calculateWholeRangeFromRangeFactor2(e,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):e)}rangeFactor(e,t,i){return e?(2===e.length&&e.every(e=>0<=e&&e<=1)&&(this._wholeRange=null,0===e[0]&&1===e[1]?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=e[0],this._rangeFactorEnd=e[1])),this):i?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):isValid_default(this._rangeFactorStart)&&isValid_default(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(e,t){var i;return isNil_default(e)?this._rangeFactorStart:(0<=e&&e<=1&&(this._wholeRange=null,0!==e||!isNil_default(this._rangeFactorEnd)&&1!==this._rangeFactorEnd?(this._rangeFactorStart=e,this._rangeFactorEnd=null!=(i=this._rangeFactorEnd)?i:1):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}rangeFactorEnd(e,t){var i;return isNil_default(e)?this._rangeFactorEnd:(0<=e&&e<=1&&(this._wholeRange=null,0!==e||!isNil_default(this._rangeFactorStart)&&0!==this._rangeFactorStart?(this._rangeFactorEnd=e,this._rangeFactorStart=null!=(i=this._rangeFactorStart)?i:0):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}generateFishEyeTransform(){var e;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);const{distortion:t=2,radiusRatio:i=.1,radius:r}=this._fishEyeOptions,n=this.range(),o=n[0],a=n[n.length-1],l=Math.min(o,a),s=Math.max(o,a),h=clamp_default(null!=(e=this._fishEyeOptions.focus)?e:0,l,s),d=isNil_default(r)?(s-l)*i:r;let u=Math.exp(t);u=u/(u-1)*d;const c=t/d;this._fishEyeTransform=e=>{var t=Math.abs(e-h);return t>=d?e:t<=1e-6?h:(t=u*(1-Math.exp(-t*c))/t*.75+.25,h+(e-h)*t)}}unknown(e){return arguments.length?(this._unknown=e,this):this._unknown}},implicit=Symbol(\\\"implicit\\\"),OrdinalScale=class u_b extends BaseScale2{specified(e){var t;return e?(this._specified=Object.assign(null!=(t=this._specified)?t:{},e),this):Object.assign({},this._specified)}_getSpecifiedValue(e){if(this._specified)return this._specified[e]}constructor(){super(),this.type=ScaleEnum2.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=implicit}clone(){var e=(new u_b).domain(this._domain).range(this._ordinalRange).unknown(this._unknown);return this._specified&&e.specified(this._specified),e}calculateVisibleDomain(e){return isValid_default(this._rangeFactorStart)&&isValid_default(this._rangeFactorEnd)&&2===e.length?[this.invert(e[0]),this.invert(e[1])]:this._domain}scale(e){var t=\\\"\\\"+e,i=this._getSpecifiedValue(t);if(void 0!==i)return i;let r=this._index.get(t);if(!r){if(this._unknown!==implicit)return this._unknown;r=this._domain.push(e),this._index.set(t,r)}i=this._ordinalRange[(r-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(i):i}invert(e){let t=0;for(;t<this._ordinalRange.length&&this._ordinalRange[t]!==e;)t++;return this._domain[(t-1)%this._domain.length]}domain(e){if(!e)return this._domain.slice();this._domain=[],this._index=new Map;for(const i of e){var t=\\\"\\\"+i;this._index.has(t)||this._index.set(t,this._domain.push(i))}return this}range(e){var t;return e?(t=Array.from(e),this._ordinalRange=t,this):this._ordinalRange.slice()}index(e){var t;return this._index&&null!=(t=this._index.get(\\\"\\\"+e))?t:-1}};function ticks2(e,t,i,r){var n,o,a=[];let l;if(t=Math.floor(+t),e=Math.floor(+e),!(i=Math.floor(+i)))return[];if(e===t)return[e];(n=t<e)&&(o=e,e=t,t=o);let s=clamper(1,t-e+1)(i);if(l=Math.floor((t-e+1)/s),!r)for(;Math.ceil((t-e+1)/l)>i&&1<s;)--s,l=Math.floor((t-e)/s);let h=e;for(;h<=t;)a.push(h),h+=l;return n&&a.reverse(),a}function stepTicks2(e,t,i){var r,n,o=[];i=clamper(1,(t=Math.floor(+t))-(e=Math.floor(+e))+1)(Math.floor(+i)),(r=t<e)&&(n=e,e=t,t=n);let a=e;for(;a<=t;)o.push(a),a+=i;return r&&o.reverse(),o}init_esbuild_inject();var BandScale=class da1 extends OrdinalScale{constructor(e){super(),this.type=ScaleEnum2.Band,this._range=[0,1],this._step=void 0,this._bandwidth=void 0,this._isFixed=!1,this._round=!1,this._paddingInner=0,this._paddingOuter=0,this._align=.5,this._unknown=void 0,delete this.unknown,this.rescale(e)}rescale(e,t){if(!e){this._wholeRange=null;var i=this._calculateWholeRange(this._range,t),r=super.domain().length,n=i[1]<i[0];let e=i[+Number(n)];var i=i[1-Number(n)],o=bandSpace(r,this._paddingInner,this._paddingOuter);this._step=(i-e)/Math.max(1,o||1),this._round&&(this._step=Math.floor(this._step)),e+=(i-e-this._step*(r-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(e=Math.round(e),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={reverse:n,start:n?e+this._step*(r-1):e,count:r},this.generateFishEyeTransform()}return this}scale(t){if(this._bandRangeState){var i=\\\"\\\"+t,r=this._getSpecifiedValue(i);if(void 0!==r)return r;let e=this._index.get(i);if(!e){if(this._unknown!==implicit)return this._unknown;e=this._domain.push(t),this._index.set(i,e)}var{count:r,start:i,reverse:n}=this._bandRangeState,i=i+(n?-1:1)*((e-1)%r)*this._step;return this._fishEyeTransform?this._fishEyeTransform(i):i}}_calculateWholeRange(t,e){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){let e;e=isValid_default(this._rangeFactorStart)&&isValid_default(this._rangeFactorEnd)&&2===t.length?(i=calculateWholeRangeFromRangeFactor2(t,[this._rangeFactorStart,this._rangeFactorEnd]),Math.abs(i[1]-i[0])):Math.abs(t[1]-t[0]);var i=calculateBandwidthFromWholeRangeSize(super.domain().length,e,this._paddingInner,this._paddingOuter,this._round);i<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):i>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=i,this._isFixed=!1)}var r,n,o;return this.isBandwidthFixed()?(i=scaleWholeRangeSize(super.domain().length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(t[1]-t[0]),r=Math.min((t[1]-t[0])/i,1),isValid_default(this._rangeFactorStart)&&isValid_default(this._rangeFactorEnd)?(0<i?(n=t[0]-i*this._rangeFactorStart,this._wholeRange=[n,n+i]):(n=t[1]+i*(1-this._rangeFactorEnd),this._wholeRange=[n-i,n]),n=this._rangeFactorStart+r<=1,o=0<=this._rangeFactorEnd-r,\\\"rangeFactorStart\\\"===e&&n?this._rangeFactorEnd=this._rangeFactorStart+r:\\\"rangeFactorEnd\\\"===e&&o?this._rangeFactorStart=this._rangeFactorEnd-r:t[0]<=t[1]?n?this._rangeFactorEnd=this._rangeFactorStart+r:o?this._rangeFactorStart=this._rangeFactorEnd-r:(this._rangeFactorStart=0,this._rangeFactorEnd=r):o?this._rangeFactorStart=this._rangeFactorEnd-r:n?this._rangeFactorEnd=this._rangeFactorStart+r:(this._rangeFactorStart=1-r,this._rangeFactorEnd=1)):(this._rangeFactorStart=0,this._rangeFactorEnd=r,this._wholeRange=[t[0],t[0]+i]),this._wholeRange):super._calculateWholeRange(t)}calculateWholeRangeSize(){var e=this._calculateWholeRange(this._range);return Math.abs(e[1]-e[0])}calculateVisibleDomain(e){var t,i,r=this._domain;return isValid_default(this._rangeFactorStart)&&isValid_default(this._rangeFactorEnd)&&r.length?(t=this._getInvertIndex(e[0]),i=this._getInvertIndex(e[1]),r.slice(Math.min(t,i),Math.max(t,i)+1)):r}domain(e,t){return e?(super.domain(e),this.rescale(t)):super.domain()}range(e,t){return e?(this._range=[toNumber(e[0]),toNumber(e[1])],this.rescale(t)):this._range}rangeRound(e,t){return this._range=[toNumber(e[0]),toNumber(e[1])],this._round=!0,this.rescale(t)}ticks(e=10){const t=this.calculateVisibleDomain(this._range);return-1===e?t:ticks2(0,t.length-1,e,!1).map(e=>t[e])}tickData(e=10){return this.ticks(e).map((e,t)=>({index:t,tick:e,value:(this.scale(e)-this._range[0]+this._bandwidth/2)/(this._range[1]-this._range[0])}))}forceTicks(e=10){const t=this.calculateVisibleDomain(this._range);return ticks2(0,t.length-1,e,!0).filter(e=>e<t.length).map(e=>t[e])}stepTicks(e){const t=this.calculateVisibleDomain(this._range);return stepTicks2(0,t.length-1,e).map(e=>t[e])}_getInvertIndex(e){let t=0;var i=this.step()/2,r=this.bandwidth()/2,n=this._domain.length,o=this.range(),a=o[0]>o[o.length-1];for(t=0;t<n;t++){var l=this.scale(this._domain[t])+r;if(0===t&&(!a&&!isGreater(e,l+i)||a&&!isLess(e,l-i)))break;if(t===n-1)break;if(!isLess(e,l-i)&&!isGreater(e,l+i))break}return 0<=t&&t<=n-1?t:n-1}invert(e){return this._domain[this._getInvertIndex(e)]}padding(e,t){return void 0!==e?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(e)?Math.min.apply(null,e):e)),this._paddingInner=this._paddingOuter,this.rescale(t)):this._paddingInner}paddingInner(e,t){return void 0!==e?(this._paddingInner=Math.max(0,Math.min(1,e)),this.rescale(t)):this._paddingInner}paddingOuter(e,t){return void 0!==e?(this._paddingOuter=Math.max(0,Math.min(1,e)),this.rescale(t)):this._paddingOuter}step(){return this._step}round(e,t){return void 0!==e?(this._round=e,this.rescale(t)):this._round}align(e,t){return void 0!==e?(this._align=Math.max(0,Math.min(1,e)),this.rescale(t)):this._align}rangeFactor(e,t){return e?(super.rangeFactor(e),this.rescale(t)):super.rangeFactor()}rangeFactorStart(e,t){return isNil_default(e)?super.rangeFactorStart():(super.rangeFactorStart(e),this.rescale(t,\\\"rangeFactorStart\\\"))}rangeFactorEnd(e,t){return isNil_default(e)?super.rangeFactorEnd():(super.rangeFactorEnd(e),this.rescale(t,\\\"rangeFactorEnd\\\"))}bandwidth(e,t){return e?(\\\"auto\\\"===e?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=e,this._isFixed=!0),this._userBandwidth=e,this.rescale(t)):this._bandwidth}maxBandwidth(e,t){return e?(this._maxBandwidth=\\\"auto\\\"===e?void 0:e,this.rescale(t)):this._maxBandwidth}minBandwidth(e,t){return e?(this._minBandwidth=\\\"auto\\\"===e?void 0:e,this.rescale(t)):this._minBandwidth}fishEye(e,t,i){return e||i?(this._fishEyeOptions=e,this._fishEyeTransform=null,this.rescale(t)):this._fishEyeOptions}isBandwidthFixed(){return this._isFixed&&!!this._bandwidth}_isBandwidthFixedByUser(){return this._isFixed&&this._userBandwidth&&isNumber_default(this._userBandwidth)}clone(){var e;return new da1(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth(null!=(e=this._userBandwidth)?e:\\\"auto\\\",!0).maxBandwidth(null!=(e=this._maxBandwidth)?e:\\\"auto\\\",!0).minBandwidth(null!=(e=this._maxBandwidth)?e:\\\"auto\\\")}},interpolateRgb4=(init_esbuild_inject(),init_esbuild_inject(),color_exports)[\\\"interpolateRgb\\\"];function interpolate2(e,t){var i=typeof t;if(isNil_default(t)||\\\"boolean\\\"==i)return()=>t;if(\\\"number\\\"==i)return interpolateNumber(e,t);if(\\\"string\\\"!=i)return t instanceof color_exports.RGB?interpolateRgb4(e,t):t instanceof color_exports.Color?interpolateRgb4(e.color,t.color):t instanceof Date?interpolateDate(e,t):interpolateNumber(Number(e),Number(t));if(i=color_exports.Color.parseColorString(t)){const r=interpolateRgb4(color_exports.Color.parseColorString(e),i);return e=>r(e).formatRgb()}return interpolateNumber(Number(e),Number(t))}var ContinuousScale2=class extends BaseScale2{constructor(e=identity3,t=identity3){super(),this._unknown=void 0,this.transformer=e,this.untransformer=t,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=identity3,this._piecewise=bimap2,this._interpolate=interpolate2}calculateVisibleDomain(e){var t;return isValid_default(this._rangeFactorStart)&&isValid_default(this._rangeFactorEnd)&&2===e.length?[this.invert(e[0]),this.invert(e[1])]:null!=(t=this._niceDomain)?t:this._domain}fishEye(e,t,i){return e||i?(this._fishEyeOptions=e,this._fishEyeTransform=null,this.rescale(t)):this._fishEyeOptions}scale(e){if(e=Number(e),Number.isNaN(e)||this._domainValidator&&!this._domainValidator(e))return this._unknown;this._output||(this._output=this._piecewise((null!=(t=this._niceDomain)?t:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));var t=this._output(this.transformer(this._clamp(e)));return this._fishEyeTransform?this._fishEyeTransform(t):t}invert(e){var t;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),(null!=(t=this._niceDomain)?t:this._domain).map(this.transformer),interpolateNumber)),this._clamp(this.untransformer(this._input(e)))}domain(e,t){if(!e)return(null!=(i=this._niceDomain)?i:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;var i=Array.from(e,toNumber);return this._domain=i,this.rescale(t)}range(e,t){var i;return e?(i=Array.from(e),this._range=i,this.rescale(t)):this._range.slice()}rangeRound(e,t){var i=Array.from(e);return this._range=i,this._interpolate=interpolateNumberRound,this.rescale(t)}rescale(e){if(!e){var i=null!=(n=this._niceDomain)?n:this._domain,r=i.length,n=this._range.length;let t=Math.min(r,n);if(r&&r<n&&this._forceAlign){var o=n-r+1,a=i[r-1],l=2<=r?(a-i[r-2])/o:0;for(let e=1;e<=o;e++)i[r-2+e]=a-l*(o-e);t=n}this._autoClamp&&(this._clamp=clamper(i[0],i[t-1])),this._piecewise=2<t?polymap2:bimap2,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform()}return this}clamp(e,t,i){return arguments.length?(t?(this._autoClamp=!1,this._clamp=t):(this._autoClamp=!!e,this._clamp=e?void 0:identity3),this.rescale(i)):this._clamp!==identity3}interpolate(e,t){return arguments.length?(this._interpolate=e,this.rescale(t)):this._interpolate}ticks(e=0){return[]}tickData(e=10){var t=this.ticks(e);return(null!=t?t:[]).map((e,t)=>({index:t,tick:e,value:(this.scale(e)-this._range[0])/(this._range[1]-this._range[0])}))}rangeFactor(e,t){return e?(super.rangeFactor(e),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(e,t){return isNil_default(e)?super.rangeFactorStart():(super.rangeFactorStart(e),this._output=this._input=null,this)}rangeFactorEnd(e,t){return isNil_default(e)?super.rangeFactorEnd():(super.rangeFactorEnd(e),this._output=this._input=null,this)}forceAlignDomainRange(e){return arguments.length?(this._forceAlign=e,this):this._forceAlign}},e102=(init_esbuild_inject(),init_esbuild_inject(),Math.sqrt(50)),e52=Math.sqrt(10),e22=Math.sqrt(2),niceNumbers2=[1,2,5,10],calculateTicksOfSingleValue2=(e,t,i)=>{let r=1,n=e;var o=Math.floor((t-1)/2),a=Math.abs(e);return 0<=e&&e<=Number.MIN_VALUE?n=0:e<0&&e>=-Number.MIN_VALUE?n=-(t-1):!i&&a<1?r=getNickStep2(a).step:(i||1<a)&&(n=Math.floor(e)-o*r),0<r?(0<e?n=Math.max(n,0):e<0&&(n=Math.min(n,-(t-1)*r)),range(0,t).map(e=>n+e*r)):0<e?calculateTicksByStep2(0,-(t-1)/r,r):calculateTicksByStep2((t-1)/r,0,r)},d3Ticks2=memoize((i,r,e,t)=>{let n,o,a,l,s=-1;if(e=+e,(i=+i)==(r=+r))return[i];if(Math.abs(i-r)<=Number.MIN_VALUE&&0<e)return[i];if((n=r<i)&&(o=i,i=r,r=o),l=tickIncrement2(i,r,e).step,!isFinite(l))return[];if(0<l){let e=Math.round(i/l),t=Math.round(r/l);for(e*l<i&&++e,t*l>r&&--t,a=new Array(o=t-e+1);++s<o;)a[s]=(e+s)*l}else if(l<0&&null!=t&&t.noDecimals){l=1;var h=Math.ceil(i),d=Math.floor(r);if(!(h<=d))return[];for(a=new Array(o=d-h+1);++s<o;)a[s]=h+s}else{l=-l;let e=Math.round(i*l),t=Math.round(r*l);for(e/l<i&&++e,t/l>r&&--t,a=new Array(o=t-e+1);++s<o;)a[s]=(e+s)/l}return n&&a.reverse(),a}),calculateTicksByStep2=(i,r,n)=>{let o,a,l=-1;if(0<n){let e=Math.floor(i/n),t=Math.ceil(r/n);for((e+1)*n<i&&++e,(t-1)*n>r&&--t,a=new Array(o=t-e+1);++l<o;)a[l]=(e+l)*n}else{n=-n;let e=Math.floor(i*n),t=Math.ceil(r*n);for((e+1)/n<i&&++e,(t-1)/n>r&&--t,a=new Array(o=t-e+1);++l<o;)a[l]=(e+l)/n}return a},appendTicksToCount2=(e,t,i)=>{let r;var n=e[0],o=e[e.length-1],a=t-e.length;if(o<=0){var l=[];for(r=a;1<=r;r--)l.push(n-r*i);return l.concat(e)}if(0<=n){for(r=1;r<=a;r++)e.push(o+r*i);return e}let s=[];var h=[];for(r=1;r<=a;r++)r%2==0?s=[n-Math.floor(r/2)*i].concat(s):h.push(o+Math.ceil(r/2)*i);return s.concat(e).concat(h)},ticks3=memoize((t,i,r,e)=>{let n,o,a;if(r=+r,(t=+t)==(i=+i))return calculateTicksOfSingleValue2(t,r,null==e?void 0:e.noDecimals);if(Math.abs(t-i)<=Number.MIN_VALUE&&0<r)return calculateTicksOfSingleValue2(t,r,null==e?void 0:e.noDecimals);(n=i<t)&&(a=t,t=i,i=a);var l=tickIncrement2(t,i,r);let s=l.step;if(!isFinite(s))return[];if(0<s){let e=1;for(var{power:l,gap:h}=l,d=10===h?2*10**l:10**l;e<=5&&(o=calculateTicksByStep2(t,i,s)).length>r+1&&2<r;)s+=d,e+=1;2<r&&o.length<r-1&&(o=appendTicksToCount2(o,r,s))}else null!=e&&e.noDecimals&&s<0&&(s=1),o=calculateTicksByStep2(t,i,s);return n&&o.reverse(),o}),getNickStep2=e=>{var t=Math.floor(Math.log(e)/Math.LN10),i=e/10**t;let r=niceNumbers2[0];return e102<=i?r=niceNumbers2[3]:e52<=i?r=niceNumbers2[2]:e22<=i&&(r=niceNumbers2[1]),0<=t?{step:r*10**t,gap:r,power:t}:{step:-(10**-t)/r,gap:r,power:t}};function tickIncrement2(e,t,i){var r=(t-e)/Math.max(0,i);return getNickStep2(r)}function forceTicks2(e,t,i){let r;if(i=+i,(e=+e)==(t=+t)&&0<i)return[e];if(i<=0||0===(r=forceTickIncrement2(e,t,i))||!isFinite(r))return[];var n=new Array(i);for(let o=0;o<i;o++)n[o]=e+o*r;return n}function forceTickIncrement2(e,t,i){return(t-e)/Math.max(1,i-1)}function stepTicks3(e,t,i){let r,n,o=-1;if(i=+i,(n=(t=+t)<(e=+e))&&(r=e,e=t,t=r),!isFinite(i)||t-e<=i)return[e];for(var a=Math.floor((t-e)/i+1),l=new Array(a);++o<a;)l[o]=e+o*i;return n&&l.reverse(),l}function niceLinear2(e,t=10){let i,r,n=0,o=e.length-1,a=e[n],l=e[o],s=10;for(l<a&&(r=a,a=l,l=r,r=n,n=o,o=r);0<s--;){if((r=tickIncrement2(a,l,t).step)===i)return e[n]=a,e[o]=l,e;if(0<r)a=Math.floor(a/r)*r,l=Math.ceil(l/r)*r;else{if(!(r<0))break;a=Math.ceil(a*r)/r,l=Math.floor(l*r)/r}i=r}}function parseNiceOptions2(e,t){var i=isNumber_default(t.forceMin),r=isNumber_default(t.forceMax);let n=null;var o=[];let a=null;var l=i&&r?e=>e>=t.forceMin&&e<=t.forceMax:i?e=>e>=t.forceMin:r?e=>e<=t.forceMax:null;return i?o[0]=t.forceMin:isNumber_default(t.min)&&t.min<=Math.min(e[0],e[e.length-1])&&(o[0]=t.min),r?o[1]=t.forceMax:isNumber_default(t.max)&&t.max>=Math.max(e[0],e[e.length-1])&&(o[1]=t.max),isNumber_default(o[0])&&isNumber_default(o[1])?((a=e.slice())[0]=o[0],a[a.length-1]=o[1]):n=isNumber_default(o[0])||isNumber_default(o[1])?isNumber_default(o[0])?\\\"max\\\":\\\"min\\\":\\\"all\\\",{niceType:n,niceDomain:a,niceMinMax:o,domainValidator:l}}var fixPrecision2=(e,t,i)=>Math.abs(t-e)<1?+i.toFixed(1):Math.round(+i),d3TicksForLog2=memoize((e,t,i,r,n,o,a)=>{let l=e,s=t;var h=s<l;h&&([l,s]=[s,l]);let d,u,c=n(l),g=n(s),p=[];if(!(r%1)&&g-c<i){if(c=Math.floor(c),g=Math.ceil(g),0<l){for(;c<=g;++c)for(d=1;d<r;++d)if(!((u=c<0?d/o(-c):d*o(c))<l)){if(u>s)break;p.push(u)}}else for(;c<=g;++c)for(d=r-1;1<=d;--d)if(!((u=0<c?d/o(-c):d*o(c))<l)){if(u>s)break;p.push(u)}2*p.length<i&&(p=ticks3(l,s,i))}else p=ticks3(c,g,Math.min(g-c,i)).map(o);return p=p.filter(e=>0!==e),null!=a&&a.noDecimals&&(p=Array.from(new Set(p.map(e=>Math.floor(e))))),h?p.reverse():p}),ticksBaseTransform2=memoize((i,r,t,n,e,o)=>{const a=[],l={},s=e(i),h=e(r);let d=[];if(Number.isInteger(n))d=ticks3(s,h,t);else{var u=(h-s)/(t-1);for(let e=0;e<t;e++)d.push(s+e*u)}return d.forEach(e=>{var t=o(e),t=Number.isInteger(n)?fixPrecision2(i,r,t):fixPrecision2(i,r,niceNumber2(t)),t=fixPrecision2(i,r,restrictNumber2(t,[i,r]));!l[t]&&!isNaN(t)&&1<d.length&&(l[t]=1,a.push(t))}),a}),forceTicksBaseTransform2=memoize((e,t,i,r,n)=>forceTicks2(r(e),r(t),i).map(e=>niceNumber2(n(e)))),forceStepTicksBaseTransform2=memoize((e,t,i,r,n)=>stepTicks3(r(e),r(t),i).map(e=>niceNumber2(n(e)))),LinearScale2=class I21 extends ContinuousScale2{constructor(){super(...arguments),this.type=ScaleEnum2.Linear}clone(){return(new I21).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}tickFormat(){return()=>{}}d3Ticks(e=10,t){var i=this.calculateVisibleDomain(this._range);return d3Ticks2(i[0],i[i.length-1],e,t)}ticks(e=10,t){if(isValid_default(this._rangeFactorStart)&&isValid_default(this._rangeFactorEnd)&&(0<this._rangeFactorStart||this._rangeFactorEnd<1)&&2===this._range.length||!this._niceType)return this.d3Ticks(e,t);var i=null!=(i=this._niceDomain)?i:this._domain,r=this._domain,n=i[0],o=i[i.length-1];let a=ticks3(r[0],r[r.length-1],e,t);if(a.length)if(this._domainValidator)a=a.filter(this._domainValidator);else if((a[0]!==n||a[a.length-1]!==o)&&this._niceType){r=i.slice();if(\\\"all\\\"===this._niceType?(r[0]=a[0],r[r.length-1]=a[a.length-1],this._niceDomain=r,this.rescale()):\\\"min\\\"===this._niceType&&a[0]!==n?(r[0]=a[0],this._niceDomain=r,this.rescale()):\\\"max\\\"===this._niceType&&a[a.length-1]!==o&&(r[r.length-1]=a[a.length-1],this._niceDomain=r,this.rescale()),\\\"all\\\"!==this._niceType){const l=Math.min(r[0],r[r.length-1]),s=Math.max(r[0],r[r.length-1]);a=a.filter(e=>e>=l&&e<=s)}}return a}forceTicks(e=10){var t=this.calculateVisibleDomain(this._range);return forceTicks2(t[0],t[t.length-1],e)}stepTicks(e){var t=this.calculateVisibleDomain(this._range);return stepTicks3(t[0],t[t.length-1],e)}nice(e=10,t){var i=this._domain;let r=[];if(t){var n=parseNiceOptions2(i,t);if(r=n.niceMinMax,this._domainValidator=n.domainValidator,this._niceType=n.niceType,n.niceDomain)return this._niceDomain=n.niceDomain,this.rescale(),this}else this._niceType=\\\"all\\\";return this._niceType&&(n=niceLinear2(i.slice(),e),\\\"min\\\"===this._niceType?n[n.length-1]=null!=(i=r[1])?i:n[n.length-1]:\\\"max\\\"===this._niceType&&(n[0]=null!=(i=r[0])?i:n[0]),this._niceDomain=n,this.rescale()),this}niceMin(e=10){this._niceType=\\\"min\\\";var t=this._domain[this._domain.length-1],i=niceLinear2(this.domain(),e);return i&&(i[i.length-1]=t,this._niceDomain=i,this.rescale()),this}niceMax(e=10){this._niceType=\\\"max\\\";var t=this._domain[0],i=niceLinear2(this._domain.slice(),e);return i&&(i[0]=t,this._niceDomain=i,this.rescale()),this}};function reflect(t){return e=>-t(-e)}function limitPositiveZero(t=Number.EPSILON){return e=>Math.max(e,t)}function limitNegativeZero(t=Number.EPSILON){return e=>Math.min(e,-t)}init_esbuild_inject();var LogScale=class ud1 extends ContinuousScale2{constructor(){super(logp(10),powp(10)),this.type=ScaleEnum2.Log,this._limit=limitPositiveZero(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return(new ud1).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(e){var t,i,r;return e||(super.rescale(),i=logp(this._base),r=powp(this._base),(null!=(t=this._niceDomain)?t:this._domain)[0]<0?(this._logs=reflect(i),this._pows=reflect(r),this._limit=limitNegativeZero(),this.transformer=logNegative,this.untransformer=expNegative):(this._logs=i,this._pows=r,this._limit=limitPositiveZero(),this.transformer=this._logs,this.untransformer=r)),this}scale(e){if(e=Number(e),Number.isNaN(e)||this._domainValidator&&!this._domainValidator(e))return this._unknown;this._output||(this._output=this._piecewise((null!=(t=this._niceDomain)?t:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));var t=this._output(this.transformer(this._limit(this._clamp(e))));return this._fishEyeTransform?this._fishEyeTransform(t):t}base(e,t){return arguments.length?(this._base=e,this.rescale(t)):this._base}tickFormat(){return identity3}d3Ticks(e=10,t){var i=this.domain(),r=this._limit(i[0]),i=this._limit(i[i.length-1]);return d3TicksForLog2(r,i,e,this._base,this.transformer,this.untransformer,t)}ticks(e=10){var t=this.calculateVisibleDomain(this._range);return ticksBaseTransform2(this._limit(t[0]),this._limit(t[t.length-1]),e,this._base,this.transformer,this.untransformer)}forceTicks(e=10){var t=this.calculateVisibleDomain(this._range);return forceTicksBaseTransform2(t[0],t[t.length-1],e,this.transformer,this.untransformer)}stepTicks(e){var t=this.calculateVisibleDomain(this._range);return forceTicksBaseTransform2(this._limit(t[0]),this._limit(t[t.length-1]),e,this.transformer,this.untransformer)}nice(e=0,t){var i=this._domain;let r=[],n=null;if(t){var o=parseNiceOptions2(i,t);if(r=o.niceMinMax,this._domainValidator=o.domainValidator,n=o.niceType,o.niceDomain)return this._niceDomain=o.niceDomain,this.rescale(),this}else n=\\\"all\\\";return n&&(o=nice(i.slice(),{floor:e=>this._pows(Math.floor(this._logs(this._limit(e)))),ceil:e=>1<=Math.abs(e)?Math.ceil(e):this._pows(Math.ceil(this._logs(this._limit(e))))}),\\\"min\\\"===n?o[o.length-1]=null!=(i=r[1])?i:o[o.length-1]:\\\"max\\\"===n&&(o[0]=null!=(i=r[0])?i:o[0]),this._niceDomain=o,this.rescale()),this}niceMin(){var e=this._domain[this._domain.length-1],t=(this.nice(),this._domain.slice());return this._domain&&(t[t.length-1]=e,this._niceDomain=t,this.rescale()),this}niceMax(){var e=this._domain[0],t=(this.nice(),this._domain.slice());return this._domain&&(t[0]=e,this._niceDomain=t,this.rescale()),this}},PointScale=(init_esbuild_inject(),class extends BandScale{constructor(e){super(!1),this.type=ScaleEnum2.Point,this._padding=0,this.paddingInner(1,e),this.padding=this.paddingOuter,this.paddingInner=void 0,this.paddingOuter=void 0}}),SymlogScale=(init_esbuild_inject(),class d31 extends LinearScale2{constructor(){super(symlog(1),symexp(1)),this.type=ScaleEnum2.Symlog,this._const=1}clone(){return(new d31).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).constant(this._const)}constant(e,t){return arguments.length?(this._const=e,this.transformer=symlog(e),this.untransformer=symexp(e),this.rescale(t)):this._const}d3Ticks(e=10,t){var i=this.domain(),r=i[0],i=i[i.length-1];return d3TicksForLog2(r,i,e,this._const,this.transformer,this.untransformer,t)}ticks(e=10){var t=this.calculateVisibleDomain(this._range);return ticksBaseTransform2(t[0],t[t.length-1],e,this._const,this.transformer,this.untransformer)}forceTicks(e=10){var t=this.calculateVisibleDomain(this._range);return forceTicksBaseTransform2(t[0],t[t.length-1],e,this.transformer,this.untransformer)}stepTicks(e){var t=this.calculateVisibleDomain(this._range);return forceTicksBaseTransform2(t[0],t[t.length-1],e,this.transformer,this.untransformer)}nice(e=0,t){var i=this._domain;let r=[],n=null;if(t){var o=parseNiceOptions2(i,t);if(r=o.niceMinMax,this._domainValidator=o.domainValidator,n=o.niceType,o.niceDomain)return this._niceDomain=o.niceDomain,this.rescale(),this}else n=\\\"all\\\";return n&&(o=nice(i.slice(),{floor:e=>Math.floor(e),ceil:e=>Math.ceil(e)}),\\\"min\\\"===n?o[o.length-1]=null!=(i=r[1])?i:o[o.length-1]:\\\"max\\\"===n&&(o[0]=null!=(i=r[0])?i:o[0]),this._niceDomain=o,this.rescale()),this}niceMin(){var e=this._domain[this._domain.length-1],t=(this.nice(),this._domain.slice());return this._domain&&(t[t.length-1]=e,this._niceDomain=t,this.rescale()),this}niceMax(){var e=this._domain[0],t=(this.nice(),this._domain.slice());return this._domain&&(t[0]=e,this._niceDomain=t,this.rescale()),this}}),BandAxisScale=class{constructor(){this._scale=new BandScale,this._scales=[this._scale]}valueToPosition(e){return this._scale.scale(e)}getPosition(t){let i=0,r=this._scale;if(1===this._scales.length||1===t.length)i=this.valueToPosition(t[0]);else{var n=Math.min(t.length,this._scales.length);for(let e=0;e<n;e++)i+=this._scales[e].scale(t[e]);r=this._scales[n-1]}return{position:i,bandScale:r}}calcScales(e,t){var{bandPadding:i,paddingInner:r,paddingOuter:n}=this,o=isArray_default(i),a=isArray_default(r),l=isArray_default(n);for(let u=0;u<this._scales.length;u++){var s=o?i[u]:i,h=a?r[u]:r,d=l?n[u]:n;this._scales[u].paddingInner(null!=(h=null!=h?h:s)?h:e,!0).paddingOuter(null!=(h=null!=d?d:s)?h:t)}}dataToPosition(e,t={}){var i,r;return 0===e.length||0===this._scales.length?0:(({position:i,bandScale:r}=this.getPosition(e)),i+r.bandwidth()*(null!=(i=t.bandPosition)?i:.5))}updateScaleDomain(e){for(let t=0;t<this._scales.length;t++)this._scales[t].domain(e)}updateRange(e){var[t,i]=this._scale.range();e[0]===t&&e[1]===i||this._scale.range(e)}};function registerDataSetInstanceTransform(e,t,i){e.getTransform(t)||e.registerTransform(t,i)}function registerDataSetInstanceParser(e,t,i){e.getParser(t)||e.registerParser(t,i)}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var fields=(t,e)=>{var i;if(null!=e&&e.fields&&0!==t.length){const r=e.fields,n=t[0],o={},a=[];for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const s=r[l];if(!s.type){let e=n;l in n||(e=null!=(i=t.find(e=>l in e))?i:n),s.type=\\\"number\\\"==typeof e[l]?\\\"linear\\\":\\\"ordinal\\\"}let e;if(\\\"number\\\"==typeof s.sortIndex&&(e={key:l,type:s.type,index:s.sortIndex,sortIndex:{},sortIndexCount:0,sortReverse:!0===s.sortReverse},a.push(e)),0<(null==(i=s.domain)?void 0:i.length))if(\\\"ordinal\\\"===s.type){s._domainCache={},o[l]=s;const h={};s.domain.forEach((e,t)=>{h[e]=t,s._domainCache[e]=t}),e&&(e.sortIndex=h,e.sortIndexCount=s.domain.length)}else 2<=s.domain.length&&(o[l]=s)}0<Object.keys(o).length&&(t=t.filter(e=>{for(const i in o){var t=o[i];if(\\\"ordinal\\\"===t.type){if(!(e[i]in t._domainCache))return!1}else if(t.domain[0]>e[i]||t.domain[1]<e[i])return!1}return!0})),a.sort((e,t)=>e.index-t.index),t.sort((e,t)=>sortData(e,t,a))}return t};function sortData(t,i,r){for(let o=0;o<r.length;o++){var n=r[o];let e=0;if(\\\"ordinal\\\"===n.type?(void 0===n.sortIndex[i[n.key]]&&(n.sortIndex[i[n.key]]=n.sortIndexCount++),void 0===n.sortIndex[t[n.key]]&&(n.sortIndex[t[n.key]]=n.sortIndexCount++),e=n.sortIndex[t[n.key]]-n.sortIndex[i[n.key]]):\\\"linear\\\"===n.type&&(e=t[n.key]-i[n.key]),0!==(e=n.sortReverse?-e:e))return e}return 0}init_esbuild_inject(),init_esbuild_inject();var idIndex=0,maxId=1e8;function getUUID(e=\\\"dataset\\\"){return maxId<idIndex&&(idIndex=0),e+\\\"_\\\"+idIndex++}var text2,DataSet=class{constructor(e){var t;this.options=e,this.isDataSet=!0,this.transformMap={},this.parserMap={},this.dataViewMap={},this.target=new import_eventemitter3[\\\"default\\\"],t=null!=e&&e.name?e.name:getUUID(\\\"dataset\\\"),this.name=t,this._logger=null!=(t=null==e?void 0:e.logger)?t:Logger.getInstance()}setLogger(e){this._logger=e}getDataView(e){return this.dataViewMap[e]}setDataView(e,t){var i;this.dataViewMap[e]&&null!=(i=this._logger)&&i.error(`Error: dataView ${e} 之前已存在，请重新命名`),this.dataViewMap[e]=t}removeDataView(e){this.dataViewMap[e]=null,delete this.dataViewMap[e]}registerParser(e,t){var i;this.parserMap[e]&&null!=(i=this._logger)&&i.warn(`Warn: transform ${e} 之前已注册，执行覆盖逻辑`),this.parserMap[e]=t}removeParser(e){this.parserMap[e]=null,delete this.parserMap[e]}getParser(e){return this.parserMap[e]||this.parserMap[\\\"default\\\"]}registerTransform(e,t){var i;this.transformMap[e]&&null!=(i=this._logger)&&i.warn(`Warn: transform ${e} 之前已注册，执行覆盖逻辑`),this.transformMap[e]=t}removeTransform(e){this.transformMap[e]=null,delete this.transformMap[e]}getTransform(e){return this.transformMap[e]}multipleDataViewAddListener(e,t,i){this._callMap||(this._callMap=new Map);let r=this._callMap.get(i);r=r||(()=>{e.some(e=>e.isRunning)||i()}),e.forEach(e=>{e.target.addListener(t,r)}),this._callMap.set(i,r)}allDataViewAddListener(e,t){this.multipleDataViewAddListener(Object.values(this.dataViewMap),e,t)}multipleDataViewRemoveListener(e,t,i){if(this._callMap){const r=this._callMap.get(i);r&&e.forEach(e=>{e.target.removeListener(t,r)}),this._callMap[\\\"delete\\\"](i)}}multipleDataViewUpdateInParse(e){e.forEach(e=>{var t;return null==(t=this.getDataView(e.name))?void 0:t.markRunning()}),e.forEach(e=>{var t;return null==(t=this.getDataView(e.name))?void 0:t.parseNewData(e.data,e.options)})}multipleDataViewUpdateInRawData(e){e.forEach(e=>{var t;return null==(t=this.getDataView(e.name))?void 0:t.markRunning()}),e.forEach(e=>{var t;return null==(t=this.getDataView(e.name))?void 0:t.updateRawData(e.data,e.options)})}destroy(){this.transformMap=null,this.parserMap=null,this.dataViewMap=null,this._callMap=null,this.target.removeAllListeners()}},DataViewDiffRank=(init_esbuild_inject(),\\\"_data-view-diff-rank\\\"),DataView=class G41{constructor(e,t){var i;this.dataSet=e,this.options=t,this.isDataView=!0,this.target=new import_eventemitter3[\\\"default\\\"],this.parseOption=null,this.transformsArr=[],this.isRunning=!1,this.rawData={},this.history=!1,this.parserData={},this.latestData={},this._fields=null,this.reRunAllTransform=(t={pushHistory:!0,emitMessage:!0})=>(this.isRunning=!0,this.resetTransformData(),this.transformsArr.forEach(e=>{this.executeTransform(e,{pushHistory:t.pushHistory,emitMessage:!1}),this.isLastTransform(e)&&this.diffLastData()}),(this.isRunning=!1)!==t.emitMessage&&this.target.emit(\\\"change\\\",[]),this),this.markRunning=()=>{this.isRunning=!0,this.target.emit(\\\"markRunning\\\",[])},i=null!=t&&t.name?t.name:getUUID(\\\"dataview\\\"),this.name=i,null!=t&&t.history&&(this.history=t.history,this.historyData=[]),this.dataSet.setDataView(i,this),this.setFields(null==t?void 0:t.fields)}parse(e,t,i=!1){this.isRunning=!0,i&&this.target.emit(\\\"beforeParse\\\",[]),t&&(this.parseOption=t);var r,n=this.cloneParseData(e,t);return null!=t&&t.type?(r=(null!=(r=this.dataSet.getParser(t.type))?r:this.dataSet.getParser(\\\"bytejson\\\"))(n,t.options,this),this.rawData=n,this.parserData=r,this.history&&this.historyData.push(n,r),this.latestData=r):(this.parserData=n,this.rawData=n,this.history&&this.historyData.push(n),this.latestData=n),this.isRunning=!1,i&&this.target.emit(\\\"afterParse\\\",[]),this}transform(t,i=!0){if(this.isRunning=!0,t&&t.type){let e=!0;var r;\\\"fields\\\"===t.type&&(this._fields=t.options.fields,0<=(r=this.transformsArr.findIndex(e=>e.type===t.type)))&&(e=!1,this.transformsArr[r].options.fields=this._fields),e&&this.transformsArr.push(t),i&&(r=this.isLastTransform(t),this.executeTransform(t),r)&&this.diffLastData()}return this.sortTransform(),this.isRunning=!1,this}isLastTransform(e){return this.transformsArr[this.transformsArr.length-1]===e}sortTransform(){2<=this.transformsArr.length&&this.transformsArr.sort((e,t)=>{var i;return(null!=(i=e.level)?i:0)-(null!=(i=t.level)?i:0)})}executeTransform(e,t={pushHistory:!0,emitMessage:!0}){var{pushHistory:i,emitMessage:r}=t,n=this.dataSet.getTransform(e.type)(this.latestData,e.options);this.history&&!1!==i&&this.historyData.push(n),this.latestData=n,!1!==r&&this.target.emit(\\\"change\\\",[])}resetTransformData(){this.latestData=this.parserData,this.history&&(this.historyData.length=0,this.historyData.push(this.rawData,this.parserData))}enableDiff(e){this._diffData=!0,this._diffKeys=e,this._diffMap=new Map,this._diffRank=0}disableDiff(){this._diffData=!1,this._diffMap=null,this._diffRank=null}resetDiff(){this._diffMap=new Map,this._diffRank=0}diffLastData(){var e;if(this._diffData&&this.latestData.forEach&&null!=(e=this._diffKeys)&&e.length){const r=this._diffRank+1;if(0===this._diffRank)this.latestData.forEach(i=>{i[DataViewDiffRank]=r,this._diffMap.set(this._diffKeys.reduce((e,t)=>e+i[t],\\\"\\\"),i)}),this.latestDataAUD={add:Array.from(this.latestData),del:[],update:[]};else{let e;this.latestDataAUD={add:[],del:[],update:[]},this.latestData.forEach(i=>{i[DataViewDiffRank]=r,e=this._diffKeys.reduce((e,t)=>e+i[t],\\\"\\\"),(this._diffMap.get(e)?this.latestDataAUD.update:this.latestDataAUD.add).push(i),this._diffMap.set(e,i)}),this._diffMap.forEach((e,t)=>{e[DataViewDiffRank]<r&&(this.latestDataAUD.del.push(e),this._diffMap[\\\"delete\\\"](t))})}this._diffRank=r}}cloneParseData(e,t){let i=!1;return(i=e instanceof G41||!0!==(null==t?void 0:t.clone)?i:!0)?cloneDeep(e):e}parseNewData(e,t){this.parse(e,t||this.parseOption),this.reRunAllTransform()}updateRawData(e,t){var i=this.cloneParseData(e,t);this.rawData=i,this.parserData=i,this.latestData=i,this.reRunAllTransform()}getFields(){var e;return this._fields||(\\\"dataview\\\"===(null==(e=this.parseOption)?void 0:e.type)&&1===this.rawData.length&&this.rawData[0].getFields?this.rawData[0].getFields():null)}setFields(e,t=!1){this._fields=e&&t?merge({},this._fields,e):e;var i=this.transformsArr.find(e=>\\\"fields\\\"===e.type);!isNil_default(this._fields)&&isNil_default(i)?(this.dataSet.registerTransform(\\\"fields\\\",fields),this.transform({type:\\\"fields\\\",options:{fields:this._fields}},!1)):i&&(i.options.fields=this._fields)}destroy(){this.dataSet.removeDataView(this.name),this._diffMap=null,this._diffRank=null,this.latestData=null,this.rawData=null,this.parserData=null,this.transformsArr=null,this.target=null}},DEFAULT_CONTINUOUS_TICK_COUNT=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),5),GraphicCreator3=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),class{constructor(){this.store=new Map}RegisterGraphicCreator(e,t){this.store.set(e,t),this[e]=t}CreateGraphic(e,t){var i=this.store.get(e);return i?i(t):null}}),graphicCreator2=new GraphicCreator3;function getTextBounds2(e){return(text2=text2||graphicCreator2.CreateGraphic(\\\"text\\\",{})).initAttributes(e),text2.AABBBounds}init_esbuild_inject();var initTextMeasure=(e,t,i,r)=>new TextMeasure(Object.assign({defaultFontParams:Object.assign({fontFamily:\\\"PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol\\\",fontSize:14},r),getTextBounds:i?void 0:getTextBounds2,specialCharSet:`-/: .,@%'\\\"~`+TextMeasure.ALPHABET_CHAR_SET+TextMeasure.ALPHABET_CHAR_SET.toUpperCase()},null!=t?t:{}),e);function scale4(e,t){return[e[0]*t,e[1]*t]}function length(e){var[t,i]=e;return Math.sqrt(t*t+i*i)}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var clampRadian2=(e=0)=>{if(e<0)for(;e<0;)e+=tau;else if(0<e)for(;tau<e;)e-=tau;return e};function isInRange(e,t,i){return!isLess(e,t,0,1e-6)&&!isGreater(e,i,0,1e-6)}function getCircleLabelPosition(e,t,i,r){var n=getTextBounds2(Object.assign({text:i},r)),o=n.width(),n=n.height(),a=clampRadian2(Math.atan2(t[1],t[0]))-Math.PI,l=3*Math.PI/4,s=Math.PI/4,h=Math.PI/2;return{x:e.x-(isInRange(a,-l,-s)?((a+l)/h-.5)*o:isInRange(a,s,l)?(.5-(a-s)/h)*o:0<=Math.cos(a)?.5*o:.5*-o),y:e.y-(isInRange(a,-l,-s)?.5*-n:isInRange(a,s,l)?.5*n:0<=Math.cos(a)?(.5-(s-a)/h)*n:(.5-clampRadian2(a-l)/h)*n)}}function getVerticalCoord2(e,t){return{x:e.x+t[0],y:e.y+t[1]}}function getCircleVerticalVector(e,t,i,r=!1,n=!1){var o=[t.x-i.x,t.y-i.y];return scale4(o,(r?-1:1)*(n?-1:1)*e/length(o))}function getLabelPosition(e,t,i,r,n,o,a){var l=polarToCartesian({x:0,y:0},i,e),l=getVerticalCoord2(l,getCircleVerticalVector(r,l,t,n));return getCircleLabelPosition(l,getCircleVerticalVector(r||1,l,t,n),o,a)}var convertDomainToTickData=e=>e.map((e,t)=>({index:t,value:e})),labelOverlap=(e,t,i=0)=>{var r=new AABBBounds(e).expand(i/2),n=new AABBBounds(t).expand(i/2);return r.intersects(n)};function intersect3(e,t,i){return i>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2)}function hasOverlap2(e,t){for(let i,r=1,n=e.length,o=e[0];r<n;o=i,++r)if(i=e[r],intersect3(o.AABBBounds,i.AABBBounds,t))return!0;return!1}var getCartesianLabelBounds=(u,c,e)=>{var t;const{labelStyle:g,axisOrientType:i,labelFlush:p,labelFormatter:f,startAngle:r=0}=e;let m=null!=(t=g.angle)?t:0;\\\"vertical\\\"===g.direction&&(m+=degreeToRadian(90));const b=[\\\"bottom\\\",\\\"top\\\"].includes(i),v=[\\\"left\\\",\\\"right\\\"].includes(i);let C=1,y=0;b||(v?(C=0,y=1):r&&(C=Math.cos(r),y=-Math.sin(r)));const _=initTextMeasure(g),n=c.map((e,t)=>{var i=f?f(e):\\\"\\\"+e,{width:i,height:r}=_.quickMeasure(i),i=Math.max(i,12),r=Math.max(r,12),n=u.scale(e),o=C*n,n=y*n;let a,l,s=o,h=n;\\\"right\\\"===(a=p&&b&&0===t?\\\"left\\\":p&&b&&t===c.length-1?\\\"right\\\":null!=(d=g.textAlign)?d:\\\"center\\\")?s-=i:\\\"center\\\"===a&&(s-=i/2),\\\"bottom\\\"===(l=p&&v&&0===t?\\\"top\\\":p&&v&&t===c.length-1?\\\"bottom\\\":null!=(d=g.textBaseline)?d:\\\"middle\\\")?h-=r:\\\"middle\\\"===l&&(h-=r/2);var d=(new AABBBounds).set(s,h,s+i,h+r);return m&&d.rotate(m,o,n),d});return n},getPolarAngleLabelBounds=(l,e,t)=>{var i;const{labelStyle:s,getRadius:r,labelOffset:h,labelFormatter:d,inside:u}=t,c=null==r?void 0:r(),g=null!=(i=s.angle)?i:0,p=initTextMeasure(s),n=e.map(e=>{var t=d?d(e):\\\"\\\"+e,{width:i,height:r}=p.quickMeasure(t),i=Math.max(i,12),r=Math.max(r,12),n=l.scale(e),o=null!=(o=s.textAlign)?o:\\\"center\\\",a=null!=(a=s.textBaseline)?a:\\\"middle\\\",{x:n,y:t}=getLabelPosition(n,{x:0,y:0},c,h,u,t,s),n=n+(\\\"right\\\"===o?-i:\\\"center\\\"===o?-i/2:0),o=t+(\\\"bottom\\\"===a?-r:\\\"middle\\\"===a?-r/2:0);return(new AABBBounds).set(n,o,n+i,o+r).rotate(g,n+i/2,o+r/2)});return n},isAxisHorizontal=e=>[\\\"bottom\\\",\\\"top\\\",\\\"z\\\"].includes(e),continuousTicks=(t,i)=>{if(!isContinuous(t.type))return convertDomainToTickData(t.domain());var r=t.range(),r=Math.abs(r[r.length-1]-r[0]);if(r<2)return convertDomainToTickData([t.domain()[0]]);var{tickCount:e,forceTickCount:n,tickStep:o,noDecimals:a=!1,labelStyle:l}=i;let s;if(s=isValid_default(o)?t.stepTicks(o):isValid_default(n)?t.forceTicks(n):\\\"d3\\\"===i.tickMode?(o=isFunction_default(e)?e({axisLength:r,labelStyle:l}):e,t.d3Ticks(null!=o?o:DEFAULT_CONTINUOUS_TICK_COUNT,{noDecimals:a})):(n=isFunction_default(e)?e({axisLength:r,labelStyle:l}):e,t.ticks(null!=n?n:DEFAULT_CONTINUOUS_TICK_COUNT,{noDecimals:a})),i.sampling&&(\\\"cartesian\\\"===i.coordinateType||\\\"polar\\\"===i.coordinateType&&\\\"radius\\\"===i.axisOrientType)){var{labelGap:h=4,labelFlush:o}=i;let e=getCartesianLabelBounds(t,s,i).map((e,t)=>({AABBBounds:e,value:s[t]}));for(;3<=e.length&&hasOverlap2(e,h);)e=methods2.parity(e);r=e.map(e=>e.value);r.length<3&&o&&(1<r.length&&r.pop(),last(r)!==last(s))&&r.push(last(s)),s=r}return convertDomainToTickData(s)},methods2={parity:function(e){return e.filter((e,t)=>t%2==0)},greedy:function(e,i){let r;return e.filter((e,t)=>!(t&&intersect3(r.AABBBounds,e.AABBBounds,i)||(r=e,0)))}},binaryFuzzySearchInNumberRange=(init_esbuild_inject(),init_esbuild_inject(),(e,t,i)=>{let r=e,n=t;for(;r<n;){var o=Math.floor((r+n)/2);0<=i(o)?n=o:r=o+1}return r}),getOneDimensionalLabelBounds=(e,t,i,r)=>getCartesianLabelBounds(e,t,i).map(e=>r?[e.x1,e.x2,e.width()]:[e.y1,e.y2,e.height()]),boundsOverlap=(e,t,i=0)=>Math.max(e[0],t[0])-i/2<=Math.min(e[1],t[1])+i/2,boundsDistance=(e,t)=>e[1]<t[0]?t[0]-e[1]:t[1]<e[0]?e[0]-t[1]:0,linearDiscreteTicks=(e,i)=>{var r=e.domain();if(!r.length)return[];var{tickCount:n,forceTickCount:o,tickStep:a,labelGap:l=4,axisOrientType:s,labelStyle:t}=i,s=isAxisHorizontal(s),h=e.range(),d=e.calculateWholeRangeSize();if(d<2)return i.labelLastVisible?convertDomainToTickData([r[r.length-1]]):convertDomainToTickData([r[0]]);let u;if(isValid_default(a))u=e.stepTicks(a);else if(isValid_default(o))u=e.forceTicks(o);else if(isValid_default(n)){a=isFunction_default(n)?n({axisLength:d,labelStyle:t}):n;u=e.ticks(a)}else if(i.sampling){t=(null!=(o=i.labelStyle.fontSize)?o:12)+2,n=minInArray(h),a=maxInArray(h);if(r.length<=d/t){o=(a-n)/r.length,h=getOneDimensionalLabelBounds(e,r,i,s),d=Math.min(...h.map(e=>e[2])),t=getStep(r,h,l,i.labelLastVisible,Math.floor(d/o),!1);u=e.stepTicks(t.step),i.labelLastVisible&&(u=t.delCount?u.slice(0,u.length-t.delCount):u).push(r[r.length-1])}else{h=[r[0],r[Math.floor(r.length/2)],r[r.length-1]],d=getOneDimensionalLabelBounds(e,h,i,s);let t=null;d.forEach(e=>{(!t||t[2]<e[2])&&(t=e)});o=0<a-n-l?Math.ceil(r.length*(l+t[2])/(a-n-l)):r.length-1;u=e.stepTicks(o),!i.labelLastVisible||u.length&&u[u.length-1]===r[r.length-1]||(u=u.length&&Math.abs(e.scale(u[u.length-1])-e.scale(r[r.length-1]))<t[2]?u.slice(0,-1):u).push(r[r.length-1])}}else u=e.domain();return convertDomainToTickData(u)},getStep=(r,n,o,e,t,i)=>{let a=0,l=0,s=-1,h=Number.MAX_VALUE;const d=e=>{let t=!0,i=0;for(;i+e<r.length&&boundsOverlap(n[i],n[i+e],o)&&(t=!1),i+=e,t&&i<r.length;);return t},u=binaryFuzzySearchInNumberRange(t,r.length,e=>d(e)?1:-1);let c=u;do{if(!(c>u)||i||d(c)){if(!e){l=c;break}{var g=r.length-1;let e,t=0;for(e=0<r.length%c?r.length-r.length%c+c:r.length;((e-=c)==g||boundsOverlap(n[e],n[g],o))&&(t++,0<e););if(e===g){l=c,a=t;break}var p=Math.floor(r.length/c)-t+1;if(p<s)break;s=p;var p=boundsDistance(n[e],n[g]),f=0<=e-c?boundsDistance(n[e-c],n[e]):p,m=Math.abs(p-f);if(m<h&&(h=m,l=c,a=t),p<=f)break}}}while(++c<=r.length);return{step:l,delCount:a}},polarAngleAxisDiscreteTicks=(init_esbuild_inject(),(e,t)=>{var{tickCount:i,forceTickCount:r,tickStep:n,getRadius:o,labelOffset:a,labelGap:l=0,labelStyle:s}=t,o=null==o?void 0:o();if(!o)return convertDomainToTickData(e.domain());let h;return h=isValid_default(n)?e.stepTicks(n):isValid_default(r)?e.forceTicks(r):isValid_default(i)?(n=e.range(),r=Math.abs(n[n.length-1]-n[0]),n=isFunction_default(i)?i({axisLength:r,labelStyle:s}):i,e.ticks(n)):t.sampling?(r=e.domain(),s=e.range(),i=getPolarAngleLabelBounds(e,r,t),n=minInArray(s),s=maxInArray(s),s=Math.abs(s-n)*(o+a)/r.length,({step:n,delCount:o}=getStep2(r,i,l,Math.floor(i.reduce((e,t)=>Math.min(e,t.width(),t.height()),Number.MAX_VALUE)/s))),(h=e.stepTicks(n)).slice(0,h.length-o)):e.domain(),convertDomainToTickData(h)}),getStep2=(i,r,n,e)=>{let o=e;do{let e=!0,t=(o++,0);for(;t+o<i.length&&labelOverlap(r[t],r[t+o],n)&&(e=!1),t+=o,e&&t<i.length;);if(e)break}while(o<=i.length);let t=0;if(2<i.length){let e=i.length-i.length%o;for(e>=i.length&&(e-=o);0<e&&labelOverlap(r[0],r[e]);)t++,e-=o}return{step:o,delCount:t}},ticks4=(e,t)=>{if(isContinuous(e.type))return continuousTicks(e,t);if(isDiscrete(e.type)){if(\\\"cartesian\\\"===t.coordinateType)return linearDiscreteTicks(e,t);if(\\\"polar\\\"===t.coordinateType&&\\\"angle\\\"===t.axisOrientType)return polarAngleAxisDiscreteTicks(e,t)}return convertDomainToTickData(e.domain())};function isDataView(e){return e instanceof DataView}function isHTMLElement(e){try{return e instanceof Element}catch(t){const i=[\\\"children\\\",\\\"innerHTML\\\",\\\"classList\\\",\\\"setAttribute\\\",\\\"tagName\\\",\\\"getBoundingClientRect\\\"],r=Object.keys(e);return i.every(e=>r.includes(e))}}function cloneDeepSpec(e,t=[\\\"data\\\"]){var i=e;if(!isValid_default(i)||\\\"object\\\"!=typeof i)return i;if(isDataView(i)||isHTMLElement(i))return i;var r=isArray_default(i),n=i.length,o=r?new Array(n):\\\"object\\\"==typeof i?{}:isBoolean_default(i)||isNumber_default(i)||isString_default(i)?i:isDate_default(i)?new Date(+i):void 0,a=r?void 0:Object.keys(Object(i));let l=-1;if(o)for(;++l<(a||i).length;){var s=a?a[l]:l,h=i[s];null!=t&&t.includes(s.toString())?o[s]=h:o[s]=cloneDeepSpec(h,t)}return o}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var e103=Math.sqrt(50),e53=Math.sqrt(10),e23=Math.sqrt(2),LinearAxisScale=class{constructor(e){this._extend={},this.type=null!=e?e:\\\"linear\\\",this._scale=new(\\\"log\\\"===e?LogScale:\\\"symlog\\\"===e?SymlogScale:LinearScale2),this._scales=[this._scale]}setExtraAttrFromSpec(e,t,i,r,n,o){this.nice=!1,this.zero=t,this.zero&&(i.min=Math.min(i.min,0),i.max=Math.max(i.max,0)),this.domain=i,this.expand=r,\\\"log\\\"===this.type?this._scale.base(null!=n?n:10):\\\"symlog\\\"===this.type&&this._scale.constant(null!=o?o:10)}transformScaleDomain(){\\\"symlog\\\"!==this.type&&\\\"log\\\"!==this.type&&this.setScaleNice()}setScaleNice(){\\\"log\\\"===this.type?this.setLogScaleNice():this.setLinearScaleNice()}setLogScaleNice(){var e;isNil_default(null==(e=this.domain)?void 0:e.min)&&isNil_default(null==(e=this.domain)?void 0:e.max)?this.nice&&this._scale.nice():isValid_default(null==(e=this.domain)?void 0:e.min)&&isNil_default(null==(e=this.domain)?void 0:e.max)?this.nice&&this._scale.niceMax():isNil_default(null==(e=this.domain)?void 0:e.min)&&isValid_default(null==(e=this.domain)?void 0:e.max)&&this.nice&&this._scale.niceMin()}setLinearScaleNice(){var e;let t=null!=(e=null!=(e=this.forceTickCount)?e:this.tickCount)?e:10;\\\"accurateFirst\\\"===this.niceType&&(t=Math.max(10,t)),isNil_default(null==(e=this.domain)?void 0:e.min)&&isNil_default(null==(e=this.domain)?void 0:e.max)?this.nice&&this._scale.nice(t):isValid_default(null==(e=this.domain)?void 0:e.min)&&isNil_default(null==(e=this.domain)?void 0:e.max)?this.nice&&this._scale.niceMax(t):isNil_default(null==(e=this.domain)?void 0:e.min)&&isValid_default(null==(e=this.domain)?void 0:e.max)?this.nice&&this._scale.niceMin(t):this.nice&&this._scale.nice(t)}dataToPosition(e){return this.valueToPosition(e[0])}valueToPosition(e){return this._scale.scale(e)}computeLinearDomain(e){const r=[];return e.forEach(e=>{var{min:t,max:i}=e;r[0]=void 0===r[0]?t:Math.min(r[0],t),r[1]=void 0===r[1]?i:Math.max(r[1],i)}),this.expandDomain(r),this.includeZero(r),this.setDomainMinMax(r),r}expandDomain(e){var t,i;this.expand&&(t=e[0],i=e[e.length-1],isValid_default(this.expand.min)&&(e[0]=t-(i-t)*this.expand.min),isValid_default(this.expand.max))&&(e[e.length-1]=i+(i-t)*this.expand.max)}niceDomain(e){var t,i,r,n;return isValid_default(e[0])||isValid_default(e[1])||\\\"linear\\\"!==this.type||Math.abs(minInArray(e)-maxInArray(e))<=1e-12&&(t=0<=(n=e[0])?1:-1,(n=Math.abs(n))<1?(e[0]=0,e[1]=1):(n=n/5,i=Math.floor(Math.log(n)/Math.LN10),r=n/Math.pow(10,i),n=(e103<=r?10:e53<=r?5:e23<=r?2:1)*Math.pow(10,i),e[0]=0,e[1]=10*n),t<0)&&(e.reverse(),e[0]*=-1,e[1]*=-1),e}niceMinMax(){var t;if(this.nice){let e=null!=(t=null!=(t=this.forceTickCount)?t:this.tickCount)?t:10;\\\"accurateFirst\\\"===this.niceType&&(e=Math.max(10,e)),isNil_default(null==(t=this.domain)?void 0:t.min)&&isNil_default(null==(t=this.domain)?void 0:t.max)?this._scale.nice(e):isValid_default(null==(t=this.domain)?void 0:t.min)&&isNil_default(null==(t=this.domain)?void 0:t.max)?this._scale.niceMax(e):isNil_default(null==(t=this.domain)?void 0:t.min)&&isValid_default(null==(t=this.domain)?void 0:t.max)?this._scale.niceMin(e):this._scale.nice(e)}}includeZero(e){this.zero&&(e[0]=Math.min(e[0],0),e[e.length-1]=Math.max(e[e.length-1],0))}setExtendDomain(e,t){var i;void 0===t?delete this._extend[e]:(this._extend[e]=t,i=this._scale.domain(),this.extendDomain(i),this.includeZero(i),this.setDomainMinMax(i),this.niceDomain(i),this._scale.domain(i,this.nice),this.niceMinMax())}extendDomain(e){var t,i=e.length-1,r=0<e[0]-e[i],n=r?i:0,o=r?0:i;for(const a in this._extend)t=this._extend[a],t>e[o]&&(e[o]=t),t<e[n]&&(e[n]=t)}setDomainMinMax(e){var t,i;this.domain&&(({min:t,max:i}=this.domain),isValid_default(t)&&(e[0]=t),isValid_default(i))&&(e[1]=i)}setZero(e){this.zero!==e&&(this.zero=e,this.updateScaleDomain())}updateScaleDomain(){var e=this.computeDomain([this.domain]);this.updateScaleDomainByModel(e)}computeDomain(e){return this.computeLinearDomain(e)}updateScaleDomainByModel(e){e=null!=e?e:this._scale.domain(),this.extendDomain(e),this.includeZero(e),this.setDomainMinMax(e),this.niceDomain(e),this._scale.domain(e,this.nice),this.niceMinMax()}updateRange(e){var[t,i]=this._scale.range();e[0]===t&&e[1]===i||this._scale.range(e)}};function doOverlap(e,t){var i=e.find(e=>\\\"axis-label-container-layer-0\\\"===e.name,!0),r=e.find(e=>\\\"axis-label-container-layer-1\\\"===e.name,!0);overlap(i?i.getChildren():[],t),overlap(r?r.getChildren():[],t)}function labelFlush(e,t){var i,{width:r,height:n}=t.getLayoutRect(),o=isXAxis(t.orient),a=!0===t.option.inverse,l=e[0],s=last(e);o?a?(o=l.AABBBounds.x2,i=s.AABBBounds.x1,r<o&&l.setAttributes({x:r,textAlign:\\\"right\\\"}),i<0&&s.setAttributes({x:0,textAlign:\\\"left\\\"})):(o=r,i=l.AABBBounds.x1,r=s.AABBBounds.x2,i<0&&l.setAttributes({x:0,textAlign:\\\"left\\\"}),o<r&&s.setAttributes({x:o,textAlign:\\\"right\\\"})):a?(i=l.AABBBounds.y1,r=s.AABBBounds.y2,o=n,i<0&&l.setAttributes({y:0,textBaseline:\\\"top\\\"}),o<r&&s.setAttributes({y:o,textBaseline:\\\"bottom\\\"})):(a=l.AABBBounds.y2,i=s.AABBBounds.y1,n<a&&l.setAttributes({y:n,textBaseline:\\\"bottom\\\"}),i<0&&s.setAttributes({y:0,textBaseline:\\\"top\\\"}))}function overlap(e,t){var i=t.option;isEmpty_default(e)||null!=(i=null==i?void 0:i.label)&&i.flush&&labelFlush(e,t)}init_esbuild_inject();var scaleParser=e=>e,CartesianAxis=class{constructor(e,t,i,r,n){var o;this.x=0,this.y=0,this.table=n,this.orient=null!=(o=e.orient)?o:\\\"left\\\",this.type=null!=(o=e.type)?o:\\\"band\\\",this.option=merge({},getCommonAxis(e.__vtableChartTheme),getTableAxisTheme(this.orient,n.theme),getChartSpecAxisTheme(this.orient,this.type,e.__vtableChartTheme),e),\\\"left\\\"===this.orient||\\\"right\\\"===this.orient?(this.width=t,this.height=i-r[2],this.y=r[0]+0):\\\"top\\\"!==this.orient&&\\\"bottom\\\"!==this.orient||(this.width=t-r[1],this.height=i,this.x=r[3]+0),this.visible=null==(o=e.visible)||o,this.inverse=\\\"inverse\\\"in e&&!!e.inverse,\\\"band\\\"===e.type&&(this.data=e.domain),this.initScale(),this.initData(),this.createComponent(),this.initEvent()}initScale(){var e=this.option;\\\"band\\\"===this.type||\\\"point\\\"===this.type?(this.scale=new BandAxisScale,this.scale.bandPadding=e.bandPadding,this.scale.paddingInner=e.paddingInner,this.scale.paddingOuter=e.paddingOuter,this.scale.calcScales(.1,.3),this.scale.updateScaleDomain(this.data),this.updateScaleRange()):\\\"linear\\\"!==this.type&&\\\"time\\\"!==this.type&&\\\"log\\\"!==this.type&&\\\"symlog\\\"!==this.type||(this.scale=new LinearAxisScale(this.type),this.scale.setExtraAttrFromSpec(e.nice,e.zero,e.range,e.expand,e.base,e.constant),this.scale.transformScaleDomain(),this.scale.updateScaleDomain(),this.updateScaleRange())}initData(){registerDataSetInstanceParser(this.table._vDataSet,\\\"scale\\\",scaleParser),registerDataSetInstanceTransform(this.table._vDataSet,\\\"ticks\\\",ticks4);var e=this.option.label||{},t=this.option.tick||{},t=new DataView(this.table._vDataSet).parse(this.scale._scale,{type:\\\"scale\\\"}).transform({type:\\\"ticks\\\",options:{sampling:!1!==this.option.sampling,tickCount:t.tickCount,forceTickCount:t.forceTickCount,tickStep:t.tickStep,tickMode:t.tickMode,noDecimals:t.noDecimals,axisOrientType:this.orient,coordinateType:\\\"cartesian\\\",labelStyle:e.style,labelFormatter:e.formatMethod,labelGap:e.minGap,labelLastVisible:e.lastVisible,labelFlush:e.flush}},!1);this.tickData=t,this.computeData()}computeData(){this.tickData.reRunAllTransform()}initEvent(){}createComponent(){var e=getAxisAttributes(this.option),t=this.getUpdateAttribute();t.verticalFactor=\\\"top\\\"===this.orient||\\\"right\\\"===this.orient?-1:1,this.component=new LineAxis(merge({},e,t)),this.component.setAttributes(this.setLayoutStartPosition({x:0,y:0})),this.component.originAxis=this}resize(e,t){this.width=e,this.height=t,this.updateScaleRange(),this.computeData();var i=getAxisAttributes(this.option),r=this.getUpdateAttribute();r.verticalFactor=\\\"top\\\"===this.orient||\\\"right\\\"===this.orient?-1:1,this.component.setAttributes(merge({},i,r)),this.component.setAttributes(this.setLayoutStartPosition({x:0,y:0})),this.overlap()}overlap(){doOverlap(this.component,this)}getLayoutRect(){return{width:this.width,height:this.height}}getUpdateAttribute(){var e=this.table.tableNoFrameHeight,t=this.table.tableNoFrameWidth,{width:i,height:r}=this.getLayoutRect(),n=isXAxis(this.orient),o=isYAxis(this.orient);let a={x:0,y:0},l=0,s=0;n?(a={x:i,y:0},l=e,s=i):o&&(a={x:0,y:r},l=t,s=r);e=\\\"top\\\"===this.orient||\\\"bottom\\\"===this.orient?r:i;return{start:{x:this.x,y:this.y},end:a,title:{text:this.option.title.text,maxWidth:this._getTitleLimit(n)},items:this.getLabelItems(s),verticalLimitSize:e,verticalMinSize:e}}getLabelItems(t){return[this.tickData.latestData.map(e=>({id:e.value,label:e.value,value:0===t?0:this.scale.dataToPosition([e.value])/t,rawValue:e.value})).filter(e=>0<=e.value&&e.value<=1)]}updateScaleRange(){var e=null!=(e=null==(e=this.option.innerOffset)?void 0:e.right)?e:0,t=null!=(t=null==(t=this.option.innerOffset)?void 0:t.left)?t:0,i=null!=(i=null==(i=this.option.innerOffset)?void 0:i.top)?i:0,r=null!=(r=null==(r=this.option.innerOffset)?void 0:r.bottom)?r:0,{width:n,height:o}=this.getLayoutRect(),a=this.option.inverse||!1;let l=[0,0];isXAxis(this.orient)?isValidNumber_default(n)&&(l=a?[n-e,t]:[t,n-e]):isValidNumber_default(o)&&(l=a?[i,o-r]:[o-r,i]),this.scale.updateRange(l)}setLayoutStartPosition(e){let{x:t,y:i}=e;return isValidNumber_default(t)&&(t+=Number(\\\"left\\\"===this.orient)*this.getLayoutRect().width),isValidNumber_default(i)&&(i+=Number(\\\"top\\\"===this.orient)*this.getLayoutRect().height),{x:t,y:i}}_getTitleLimit(t){var i,r;if(this.option.title.visible&&isNil_default(null==(i=this.option.title.style)?void 0:i.maxLineWidth)){let e=(null==(i=this.option.title.style)?void 0:i.angle)||0;return(null!=(i=this.option.title)&&i.autoRotate&&isNil_default(this.option.title.angle)&&(e=\\\"left\\\"===this.option.orient?-90:90),t)?(i=this.getLayoutRect().width,(r=Math.abs(Math.cos(degreeToRadian(e))))<1e-6?1/0:i/r):(i=this.getLayoutRect().height,(r=Math.abs(Math.sin(degreeToRadian(e))))<1e-6?1/0:i/r)}return null}getScale(){return this.scale._scale}getDomainSpec(){return this.scale.domain}};function getTableAxisTheme(e,t){let i;return\\\"left\\\"===e?i=t.axisStyle.leftAxisStyle:\\\"right\\\"===e?i=t.axisStyle.rightAxisStyle:\\\"top\\\"===e?i=t.axisStyle.topAxisStyle:\\\"bottom\\\"===e&&(i=t.axisStyle.bottomAxisStyle),merge({},t.axisStyle.defaultAxisStyle,i)}function getChartSpecAxisTheme(e,t,i){if(!i)return{};var r=i.axis;let n,o;return\\\"linear\\\"===t||\\\"log\\\"===t||\\\"symlog\\\"===t?n=i.axisLinear:\\\"band\\\"===t&&(n=i.axisBand),\\\"top\\\"===e||\\\"bottom\\\"===e?o=i.axisX:\\\"left\\\"!==e&&\\\"right\\\"!==e||(o=i.axisY),merge({},r,n,o)}function createArray(e,t){var i=new Array(t);for(let r=0;r<t;r++)i[r]=e(r);return i}function sort(e,t,i,r,n,o){var a=createArray(e,i);a.sort((e,t)=>r(o(e),o(t),n));for(let l=0;l<i;l++)t(l,a[l])}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var Aggregator=class{constructor(e,t,i){this.className=\\\"Aggregator\\\",this.isRecord=!0,this.records=[],this.field=e,this.formatFun=t,this.isRecord=null!=i?i:this.isRecord}clearCacheValue(){this._formatedValue=void 0}formatValue(e,t,i){return this._formatedValue||(this.formatFun?this._formatedValue=this.formatFun(this.value(),e,t,i):this._formatedValue=this.value()),this._formatedValue}reset(){this.records=[]}},RecordAggregator=class extends Aggregator{constructor(){super(...arguments),this.type=AggregationType.RECORD,this.isRecord=!0}push(e){this.isRecord&&(\\\"Aggregator\\\"===e.className?this.records.push(...e.records):this.records.push(e))}value(){return this.records}reset(){this.records=[]}recalculate(){}},NoneAggregator=class extends Aggregator{constructor(){super(...arguments),this.type=AggregationType.NONE,this.isRecord=!0}push(e){this.isRecord&&(this.records=[e]),this.fieldValue=e[this.field]}value(){return this.fieldValue}reset(){this.records=[],this.fieldValue=void 0}recalculate(){}},CustomAggregator=class extends Aggregator{constructor(e,t,i,r){super(e,t,i),this.type=AggregationType.CUSTOM,this.isRecord=!0,this.values=[],this.aggregationFun=r}push(e){this.isRecord&&(\\\"Aggregator\\\"===e.className?this.records.push(...e.records):this.records.push(e)),this.values.push(e[this.field])}value(){var e;return this.fieldValue||(this.fieldValue=null==(e=this.aggregationFun)?void 0:e.call(this,this.values,this.records,this.field)),this.fieldValue}reset(){this.records=[],this.fieldValue=void 0}recalculate(){}},SumAggregator=class extends Aggregator{constructor(e,t,i,r){super(e,t,i),this.type=AggregationType.SUM,this.sum=0,this.positiveSum=0,this.nagetiveSum=0,this.needSplitPositiveAndNegativeForSum=!1,this.needSplitPositiveAndNegativeForSum=null!=r&&r}push(e){var t;this.isRecord&&(\\\"Aggregator\\\"===e.className?this.records.push(...e.records):this.records.push(e)),\\\"Aggregator\\\"===e.className?(t=e.value(),this.sum+=t,this.needSplitPositiveAndNegativeForSum&&(0<t?this.positiveSum+=t:t<0&&(this.nagetiveSum+=t))):isNaN(parseFloat(e[this.field]))||(t=parseFloat(e[this.field]),this.sum+=t,this.needSplitPositiveAndNegativeForSum&&(0<t?this.positiveSum+=t:t<0&&(this.nagetiveSum+=t)))}value(){return this.sum}positiveValue(){return this.positiveSum}negativeValue(){return this.nagetiveSum}reset(){this.records=[],this.sum=0}recalculate(){this.sum=0,this._formatedValue=void 0;for(let i=0;i<this.records.length;i++){var e,t=this.records[i];\\\"Aggregator\\\"===t.className?(e=t.value(),this.sum+=e,this.needSplitPositiveAndNegativeForSum&&(0<e?this.positiveSum+=e:e<0&&(this.nagetiveSum+=e))):isNaN(parseFloat(t[this.field]))||(e=parseFloat(t[this.field]),this.sum+=e,this.needSplitPositiveAndNegativeForSum&&(0<e?this.positiveSum+=e:e<0&&(this.nagetiveSum+=e)))}}},CountAggregator=class extends Aggregator{constructor(){super(...arguments),this.type=AggregationType.COUNT,this.count=0}push(e){this.isRecord&&(\\\"Aggregator\\\"===e.className?this.records.push(...e.records):this.records.push(e)),\\\"Aggregator\\\"===e.className?this.count+=e.value():this.count++}value(){return this.count}reset(){this.records=[],this.count=0}recalculate(){this.count=0,this._formatedValue=void 0;for(let t=0;t<this.records.length;t++){var e=this.records[t];\\\"Aggregator\\\"===e.className?this.count+=e.value():this.count++}}},AvgAggregator=class extends Aggregator{constructor(){super(...arguments),this.type=AggregationType.AVG,this.sum=0,this.count=0}push(e){this.isRecord&&(\\\"Aggregator\\\"===e.className?this.records.push(...e.records):this.records.push(e)),\\\"Aggregator\\\"===e.className&&e.type===AggregationType.AVG?(this.sum+=e.sum,this.count+=e.count):isNaN(parseFloat(e[this.field]))||(this.sum+=parseFloat(e[this.field]),this.count++)}value(){return this.sum/this.count}reset(){this.records=[],this.sum=0,this.count=0}recalculate(){this.sum=0,this.count=0,this._formatedValue=void 0;for(let t=0;t<this.records.length;t++){var e=this.records[t];\\\"Aggregator\\\"===e.className&&e.type===AggregationType.AVG?(this.sum+=e.sum,this.count+=e.count):isNaN(parseFloat(e[this.field]))||(this.sum+=parseFloat(e[this.field]),this.count++)}}},MaxAggregator=class extends Aggregator{constructor(){super(...arguments),this.type=AggregationType.MAX,this.max=Number.MIN_SAFE_INTEGER}push(e){this.isRecord&&(\\\"Aggregator\\\"===e.className?this.records.push(...e.records):this.records.push(e)),\\\"Aggregator\\\"===e.className?this.max=(e.max>this.max?e:this).max:\\\"number\\\"==typeof e?this.max=e>this.max?e:this.max:\\\"number\\\"==typeof e[this.field]?this.max=e[this.field]>this.max?e[this.field]:this.max:isNaN(e[this.field])||(this.max=parseFloat(e[this.field])>this.max?parseFloat(e[this.field]):this.max)}value(){return this.max}reset(){this.records=[],this.max=Number.MIN_SAFE_INTEGER}recalculate(){this.max=Number.MIN_SAFE_INTEGER,this._formatedValue=void 0;for(let t=0;t<this.records.length;t++){var e=this.records[t];\\\"Aggregator\\\"===e.className?this.max=(e.max>this.max?e:this).max:\\\"number\\\"==typeof e?this.max=e>this.max?e:this.max:\\\"number\\\"==typeof e[this.field]?this.max=e[this.field]>this.max?e[this.field]:this.max:isNaN(e[this.field])||(this.max=parseFloat(e[this.field])>this.max?parseFloat(e[this.field]):this.max)}}},MinAggregator=class extends Aggregator{constructor(){super(...arguments),this.type=AggregationType.MIN,this.min=Number.MAX_SAFE_INTEGER}push(e){this.isRecord&&(\\\"Aggregator\\\"===e.className?this.records.push(...e.records):this.records.push(e)),\\\"Aggregator\\\"===e.className?this.min=(e.min<this.min?e:this).min:\\\"number\\\"==typeof e?this.min=e<this.min?e:this.min:\\\"number\\\"==typeof e[this.field]&&(this.min=e[this.field]<this.min?e[this.field]:this.min)}value(){return this.min}reset(){this.records=[],this.min=Number.MAX_SAFE_INTEGER}recalculate(){this.min=Number.MAX_SAFE_INTEGER,this._formatedValue=void 0;for(let t=0;t<this.records.length;t++){var e=this.records[t];\\\"Aggregator\\\"===e.className?this.min=(e.min<this.min?e:this).min:\\\"number\\\"==typeof e?this.min=e<this.min?e:this.min:\\\"number\\\"==typeof e[this.field]&&(this.min=e[this.field]<this.min?e[this.field]:this.min)}}};function typeSort(e,t){return e&&t?e.toString().localeCompare(t.toString(),\\\"zh\\\"):e?1:-1}function naturalSort(e,t){var i=/(\\\\d+)|(\\\\D+)/g,r=/\\\\d/,n=/^0/;let o,a,l,s,h,d;if(null!==t&&null===e)return-1;if(null!==e&&null===t)return 1;if(\\\"number\\\"==typeof e&&isNaN(e))return-1;if(\\\"number\\\"==typeof t&&isNaN(t))return 1;if((h=+e)<(d=+t))return-1;if(d<h)return 1;if(\\\"number\\\"==typeof e&&\\\"number\\\"!=typeof t)return-1;if(\\\"number\\\"==typeof t&&\\\"number\\\"!=typeof e)return 1;if(\\\"number\\\"==typeof e&&\\\"number\\\"==typeof t)return 0;if(isNaN(d)&&!isNaN(h))return-1;if(isNaN(h)&&!isNaN(d))return 1;if(o=String(e),l=String(t),o===l)return 0;if(!r.test(o)||!r.test(l))return o>l?1:-1;for(o=o.match(i),l=l.match(i);o.length&&l.length;)if(a=o.shift(),s=l.shift(),a!==s)return r.test(a)&&r.test(s)?a.replace(n,\\\".0\\\")-s.replace(n,\\\".0\\\"):s<a?1:-1;return o.length-l.length}function sortBy(e){var t;const i={},r={};for(let n=0;n<e.length;n++)t=e[n],i[t]=n,\\\"string\\\"==typeof t&&(r[t.toLowerCase()]=n);return function(e,t){return null!==i[e]&&void 0!==i[e]&&null!==i[t]&&void 0!==i[t]?i[e]-i[t]:null!==i[e]&&void 0!==i[e]?-1:null!==i[t]&&void 0!==i[t]?1:null!==r[e]&&void 0!==i[e]&&null!==r[t]&&void 0!==i[t]?r[e]-r[t]:null===r[e]||void 0===i[e]||null===r[t]||void 0===i[t]?0:null!==r[e]&&void 0!==i[e]?-1:null!==r[t]&&void 0!==i[t]?1:naturalSort(e,t)}}function isFieldAssessor(e){if(obj.isObject(e)){var t=e;if(isValid_default(t.get)&&isValid_default(t.set))return!0}return!1}var EVENT_TYPE3={SOURCE_LENGTH_UPDATE:\\\"source_length_update\\\",CHANGE_ORDER:\\\"change_order\\\"};function getValue(e,t){var i,r=getOrApply(e);return isPromise(r)?(i=r.then(e=>(t(e),e)),t(i),i):r}function getField(e,t,i,r,n,o){var a,l;if(null!=e)return isPromise(e)?e.then(e=>getField(e,t,i,r,n,o)):(a=isFieldAssessor(t)?t.get:t)in e?getValue(e[a],o):\\\"function\\\"==typeof a?getValue(a(e,i,r,n),o):Array.isArray(a)?getValue(getValueByPath(e,[...a]),o):(l=(\\\"\\\"+a).split(\\\".\\\")).length<=1?getValue(e[a],o):getValue(applyChainSafe(e,(e,t)=>getField(e,t,i,r,n,emptyFn),...l),o)}function _getIndex(e,t){var i;return e&&(i=e[t],isValid_default(i))?i:t}var DataSource=class extends EventTarget3{static get EVENT_TYPE(){return EVENT_TYPE3}constructor(e,t,i,r,n,o){var a;super(),this.currentIndexedData=[],this.hierarchyExpandLevel=0,this.hasHierarchyStateExpand=!1,this.beforeChangedRecordsMap=[],this.registedAggregators={},this.fieldAggregators=[],this.layoutColumnObjects=[],this.registerAggregators(),this.dataSourceObj=e,this.dataConfig=t,this._get=null==e?void 0:e.get,this.layoutColumnObjects=r,this._source=null!=e&&e.records?this.processRecords(null==e?void 0:e.records):e,this._sourceLength=(null==(a=this._source)?void 0:a.length)||0,this.sortedIndexMap=new Map,this._currentPagerIndexedData=[],this.userPagination=i,this.pagination=i||{totalCount:this._sourceLength,perPageCount:this._sourceLength,currentPage:0},1<=o&&(this.hierarchyExpandLevel=o),this.currentIndexedData=Array.from({length:this._sourceLength},(e,t)=>t),\\\"tree\\\"===n&&this.initTreeHierarchyState(),this.rowHierarchyType=n,this.updatePagerData()}initTreeHierarchyState(){this.currentIndexedData=Array.from({length:this._sourceLength},(e,t)=>t);let e=this._sourceLength;for(let n=0;n<e;n++){var t=this.currentIndexedData[n],i=this.getOriginalRecord(t),r=null!=(r=i.filteredChildren)?r:i.children;0<(null==r?void 0:r.length)?(1<this.hierarchyExpandLevel?i.hierarchyState||(i.hierarchyState=HierarchyState.expand):i.hierarchyState||(i.hierarchyState=HierarchyState.collapse),this.hasHierarchyStateExpand=!0,i.hierarchyState!==HierarchyState.collapse&&(r=this.initChildrenNodeHierarchy(t,this.hierarchyExpandLevel,2,i),n+=r,e+=r)):!0!==i.children||i.hierarchyState||(i.hierarchyState=HierarchyState.collapse)}}registerAggregator(e,t){this.registedAggregators[e]=t}registerAggregators(){this.registerAggregator(AggregationType.RECORD,RecordAggregator),this.registerAggregator(AggregationType.SUM,SumAggregator),this.registerAggregator(AggregationType.COUNT,CountAggregator),this.registerAggregator(AggregationType.MAX,MaxAggregator),this.registerAggregator(AggregationType.MIN,MinAggregator),this.registerAggregator(AggregationType.AVG,AvgAggregator),this.registerAggregator(AggregationType.NONE,NoneAggregator),this.registerAggregator(AggregationType.CUSTOM,CustomAggregator)}_generateFieldAggragations(){var t=this.layoutColumnObjects;for(let a=0;a<(null==t?void 0:t.length);a++){t[a].aggregator=null;var i=t[a].field,r=t[a].aggregation;if(r)if(Array.isArray(r))for(let e=0;e<r.length;e++){var n=r[e],n=new this.registedAggregators[n.aggregationType](i,n.formatFun,!0,n.aggregationFun);this.fieldAggregators.push(n),t[a].aggregator||(t[a].aggregator=[]),t[a].aggregator.push(n)}else{var o=new this.registedAggregators[r.aggregationType](i,r.formatFun,!0,r.aggregationFun);this.fieldAggregators.push(o),t[a].aggregator=o}}}processRecords(i){this._generateFieldAggragations();var r,n,o=[],a=1<=this.fieldAggregators.length;if(1<=(null==(n=null==(n=this.dataConfig)?void 0:n.filterRules)?void 0:n.length)||1<=(null==(n=this.lastFilterRules)?void 0:n.length)||a){for(let e=0,t=i.length;e<t;e++){var l=i[e];1<=(null==(r=null==(r=this.dataConfig)?void 0:r.filterRules)?void 0:r.length)?this.filterRecord(l)&&(o.push(l),\\\"tree\\\"===this.rowHierarchyType&&l.children&&(l.filteredChildren=this.filteredChildren(l.children)),a)&&this.processRecord(l):(1<=(null==(r=this.lastFilterRules)?void 0:r.length)&&this.clearFilteredChildren(l),a&&this.processRecord(l))}if(1<=(null==(n=null==(n=this.dataConfig)?void 0:n.filterRules)?void 0:n.length))return o}return i}filteredChildren(e){var t=[];for(let r=0,n=e.length;r<n;r++){var i=e[r];this.filterRecord(i)&&(t.push(i),i.children)&&(i.filteredChildren=this.filteredChildren(i.children))}return t}processRecord(e){for(let t=0;t<this.fieldAggregators.length;t++)this.fieldAggregators[t].push(e)}initChildrenNodeHierarchy(e,t,i,r){var n,o;let a=0;var l=r.filteredChildren?r.filteredChildren.length:null!=(n=null==(n=r.children)?void 0:n.length)?n:0;for(let d=0;d<l;d++){(i<=t||r.hierarchyState===HierarchyState.expand)&&(a+=1);var s=(r.filteredChildren||r.children)[d],h=Array.isArray(e)?e.concat(d):[e,d];(i<=t||r.hierarchyState===HierarchyState.expand)&&this.currentIndexedData.splice(this.currentIndexedData.indexOf(e)+a,0,h),(s.filteredChildren?0<s.filteredChildren.length:0<(null==(o=s.children)?void 0:o.length))&&(i<t||s.hierarchyState===HierarchyState.expand?(s.hierarchyState||(s.hierarchyState=HierarchyState.expand),this.hasHierarchyStateExpand=!0):s.hierarchyState||(s.hierarchyState=HierarchyState.collapse)),s.hierarchyState===HierarchyState.expand&&(a+=this.initChildrenNodeHierarchy(h,t,i+1,s))}return a}updatePagination(e){this.pagination=e||{totalCount:this._sourceLength,perPageCount:this._sourceLength,currentPage:0},this.updatePagerData()}updatePagerData(){var i=this[\\\"currentIndexedData\\\"],{perPageCount:e,currentPage:t}=this.pagination,r=e*(t||0),n=r+e;if(this._currentPagerIndexedData.length=0,i&&0<i.length){let e=-1;for(let t=0;t<i.length;t++)if((Array.isArray(i[t])&&1===i[t].length||!Array.isArray(i[t]))&&e++,e>=r&&e<n)this._currentPagerIndexedData.push(i[t]);else if(e>=n)break}else if(0<this._sourceLength)throw new Error(\\\"currentIndexedData should has values!\\\")}get records(){return Array.isArray(this._source)?this._source:[]}get source(){return this._source}get(e){return this.getOriginalRecord(_getIndex(this.currentPagerIndexedData,e))}getRaw(e){return this.getRawRecord(_getIndex(this.currentPagerIndexedData,e))}getIndexKey(e){return _getIndex(this.currentPagerIndexedData,e)}getTableIndex(t){return Array.isArray(t)?this.currentPagerIndexedData.findIndex(e=>arrayEqual(e,t)):this.currentPagerIndexedData.findIndex(e=>e===t)}getField(e,t,i,r,n){return this.getOriginalField(_getIndex(this.currentPagerIndexedData,e),t,i,r,n)}getRawField(e,t,i,r,n){return this.getRawFieldData(_getIndex(this.currentPagerIndexedData,e),t,i,r,n)}hasField(e,t){return this.hasOriginalField(_getIndex(this.currentPagerIndexedData,e),t)}getHierarchyState(e){var t=this.getOriginalRecord(this.currentIndexedData[e]);return null!=(t=null==t?void 0:t.hierarchyState)?t:null}toggleHierarchyState(t,e,i){var r=this.currentIndexedData.slice(0),n=this.getIndexKey(t),a=this.getHierarchyState(t),l=this.getOriginalRecord(n);if(this.clearSortedIndexMap(),a===HierarchyState.collapse)l.hierarchyState=HierarchyState.expand,this.pushChildrenNode(n,HierarchyState.expand,l),this.hasHierarchyStateExpand=!0;else if(a===HierarchyState.expand){let o=0;const u=(t,e,i)=>{if(e&&e!==HierarchyState.collapse&&e!==HierarchyState.none){var r=i.filteredChildren||i.children;if(r)for(let e=0;e<r.length;e++){o+=1;var n=Array.isArray(t)?t.concat([e]):[t,e];u(n,r[e].hierarchyState,r[e])}}};u(n,a,l),this.currentIndexedData.splice(this.currentIndexedData.indexOf(n)+1,o),l.hierarchyState=HierarchyState.collapse}this.updatePagerData();var o=[],s=[];if(a===HierarchyState.collapse){var h=this.currentIndexedData.length-r.length;for(let e=0;e<h;e++)o.push(t+e+1)}else if(a===HierarchyState.expand){var d=r.length-this.currentIndexedData.length;for(let e=0;e<d;e++)s.push(t+e+1)}return{add:o,remove:s}}pushChildrenNode(t,e,i){var r;if(!e||e===HierarchyState.collapse||e===HierarchyState.none)return 0;let n=0;var o=i.filteredChildren||i.children;if(o){const s=Array.from({length:o.length},(e,t)=>t);this.lastOrder&&\\\"normal\\\"!==this.lastOrder&&this.lastOrderField&&sort(e=>isValid_default(s[e])?s[e]:s[e]=e,(e,t)=>{s[e]=t},o.length,this.lastOrderFn,this.lastOrder,e=>this.getOriginalField(Array.isArray(t)?t.concat([e]):[t,e],this.lastOrderField));for(let e=0;e<s.length;e++){n+=1;var a=Array.isArray(t)?t.concat([s[e]]):[t,s[e]],l=(this.currentIndexedData.splice(this.currentIndexedData.indexOf(t)+n,0,a),this.getOriginalRecord(a));!l.hierarchyState&&(null!=(r=l.filteredChildren)?r:l.children)&&(l.hierarchyState=HierarchyState.collapse),n+=this.pushChildrenNode(a,l.hierarchyState,o[s[e]])}}return n}changeFieldValue(e,t,i,r,n,o){if(null!==i&&0<=t){var a=this.getIndexKey(t);if(this.beforeChangedRecordsMap[a]||(l=this.getOriginalRecord(a),this.beforeChangedRecordsMap[a]=cloneDeep(l)),\\\"string\\\"==typeof i||\\\"number\\\"==typeof i){var l=this.beforeChangedRecordsMap[a][i],a=this.getOriginalRecord(a);let t=e;\\\"number\\\"==typeof l&&isAllDigits(e)&&(t=parseFloat(e)),isPromise(a)?a.then(e=>{e[i]=t})[\\\"catch\\\"](e=>{}):a[i]=t}}}setRecord(e,t){var i;let r=!0;1<=(null==(i=null==(i=this.dataConfig)?void 0:i.filterRules)?void 0:i.length)&&(this.filterRecord(e)?\\\"tree\\\"===this.rowHierarchyType&&e.children&&(e.filteredChildren=this.filteredChildren(e.children)):r=!1),r&&Array.isArray(this.records)&&(i=this.getIndexKey(t),Array.isArray(i)||this.records.splice(i,1,e))}addRecord(e,t){var i,r;Array.isArray(this.records)&&(this.records.splice(t,0,e),this.currentIndexedData.push(this.currentIndexedData.length),this._sourceLength+=1,\\\"tree\\\"===this.rowHierarchyType&&this.initTreeHierarchyState(),this.userPagination?(this.pagination.totalCount=this._sourceLength,({perPageCount:i,currentPage:r}=this.pagination),t<i*(r||0)+i&&this.updatePagerData()):(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength,this.updatePagerData()),null!=(r=this.dataSourceObj))&&r.added&&this.dataSourceObj.added(t,1)}addRecords(t,i){var e,r;if(Array.isArray(this.records)){if(Array.isArray(t)){this.records.splice(i,0,...t);for(let e=0;e<t.length;e++)this.currentIndexedData.push(this.currentIndexedData.length);this._sourceLength+=t.length}this.userPagination?(this.pagination.totalCount=this._sourceLength,({perPageCount:e,currentPage:r}=this.pagination),i<e*(r||0)+e&&this.updatePagerData()):(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength,this.updatePagerData()),null!=(r=this.dataSourceObj)&&r.added&&this.dataSourceObj.added(i,t.length)}}addRecordForSorted(e){Array.isArray(this.records)&&(this.records.push(e),this.currentIndexedData.push(this.currentIndexedData.length),this._sourceLength+=1,this.sortedIndexMap.clear(),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength))}addRecordsForSorted(t){if(Array.isArray(this.records)){if(Array.isArray(t)){this.records.push(...t);for(let e=0;e<t.length;e++)this.currentIndexedData.push(this.currentIndexedData.length);this._sourceLength+=t.length,this.sortedIndexMap.clear()}this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength)}}deleteRecords(t){var i;if(Array.isArray(this.records)){var r=[],n=t.sort((e,t)=>t-e);for(let e=0;e<n.length;e++){var o=n[e];o>=this._sourceLength||o<0||(r.push(o),this.records.splice(o,1),this.currentIndexedData.pop(),--this._sourceLength)}return this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength),this.updatePagerData(),null!=(i=this.dataSourceObj)&&i.deleted&&this.dataSourceObj.deleted(r),r}return[]}deleteRecordsForSorted(t){if(Array.isArray(this.records)){var i=t.sort((e,t)=>t-e);for(let e=0;e<i.length;e++){var r=i[e];r>=this._sourceLength||r<0||(r=this.currentIndexedData[r],this.records.splice(r,1),--this._sourceLength)}this.sortedIndexMap.clear(),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength)}}updateRecords(e,t){var i=[];for(let n=0;n<t.length;n++){var r=t[n];r>=this._sourceLength||r<0||(i.push(r),this.records[r]=e[n])}return this.userPagination&&this.updatePagerData(),i}updateRecordsForSorted(e,t){var i=[];for(let o=0;o<t.length;o++){var r=t[o];if(!(r>=this._sourceLength||r<0)){var n=this.currentIndexedData[r];if(\\\"number\\\"!=typeof n)return;i.push(r),this.records[n]=e[o]}}this.sortedIndexMap.clear()}sort(t,i,r=\\\"desc\\\"!==i?(e,t)=>e===t?0:t<e?1:-1:(e,t)=>e===t?0:e<t?1:-1){this.lastOrderField=t,this.lastOrder=i,this.lastOrderFn=r;let e,n=this.sortedIndexMap.get(t);if(n&&(e=n[i])&&0<e.length)this.currentIndexedData=e;else{const a=[];if(\\\"normal\\\"===i)for(let e=0;e<this._sourceLength;e++)a[e]=e;else sort(e=>isValid_default(a[e])?a[e]:a[e]=e,(e,t)=>{a[e]=t},this._sourceLength,r,i,e=>this.getOriginalField(e,t));if(this.currentIndexedData=a,this.hierarchyExpandLevel){let e=a.length;window.performance.now();for(let t=0;t<e;t++){var o=this.getOriginalRecord(a[t]),o=this.pushChildrenNode(a[t],o.hierarchyState,this.getOriginalRecord(a[t]));e+=o,t+=o}}n||(n={asc:[],desc:[],normal:[]},this.sortedIndexMap.set(t,n)),n[i]=a}this.updatePagerData(),this.fireListeners(EVENT_TYPE3.CHANGE_ORDER,null)}clearFilteredChildren(e){var t;e.filteredChildren=void 0;for(let i=0;null!==(t=i<(null==(t=e.children)?void 0:t.length))&&t;i++)this.clearFilteredChildren(e.children[i])}filterRecord(e){let t=!0;for(let n=0;n<(null==(i=this.dataConfig.filterRules)?void 0:i.length);n++){var i=null==(i=this.dataConfig)?void 0:i.filterRules[n];if(i.filterKey){var r=e[i.filterKey];if(-1===i.filteredValues.indexOf(r)){t=!1;break}}else if(null==(r=i.filterFunc)||!r.call(i,e)){t=!1;break}}return t}updateFilterRulesForSorted(e){var t;this.lastFilterRules=this.dataConfig.filterRules,this.dataConfig.filterRules=e,this._source=this.processRecords(null!=(t=null==(t=this.dataSourceObj)?void 0:t.records)?t:this.dataSourceObj),this._sourceLength=(null==(t=this._source)?void 0:t.length)||0,this.sortedIndexMap.clear(),this.currentIndexedData=Array.from({length:this._sourceLength},(e,t)=>t),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength)}updateFilterRules(e){var t;this.lastFilterRules=this.dataConfig.filterRules,this.dataConfig.filterRules=e,this._source=this.processRecords(null!=(t=null==(t=this.dataSourceObj)?void 0:t.records)?t:this.dataSourceObj),this._sourceLength=(null==(t=this._source)?void 0:t.length)||0,this.currentIndexedData=Array.from({length:this._sourceLength},(e,t)=>t),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength,\\\"tree\\\"===this.rowHierarchyType&&this.initTreeHierarchyState()),this.updatePagerData()}clearSortedIndexMap(){this.lastOrderField&&this.lastOrder&&this.sortedIndexMap.forEach((e,t)=>{t!==this.lastOrderField?this.sortedIndexMap[\\\"delete\\\"](t):\\\"asc\\\"===this.lastOrder?(e.desc=[],e.normal=[]):\\\"desc\\\"===this.lastOrder?(e.asc=[],e.normal=[]):(e.desc=[],e.asc=[])})}get sourceLength(){return this._sourceLength}set sourceLength(e){this._sourceLength!==e&&(this._sourceLength=e,this.fireListeners(EVENT_TYPE3.SOURCE_LENGTH_UPDATE,this._sourceLength))}get length(){return this.currentPagerIndexedData.length}get dataSource(){return this}get currentPagerIndexedData(){return 0<this._currentPagerIndexedData.length?this._currentPagerIndexedData:[]}release(){var e;null!=(e=super.release)&&e.call(this),this.lastFilterRules=null}clearSortedMap(){this.currentIndexedData&&(this.currentIndexedData.length=0),this.currentIndexedData=null,this.sortedIndexMap.forEach(e=>{e.asc&&(e.asc.length=0),e.desc&&(e.desc.length=0)}),this.sortedIndexMap.clear()}clearCurrentIndexedData(){this.currentIndexedData=null,this.currentPagerIndexedData.length=0}getOriginalRecord(t){return getValue(this.dataSourceObj.records?Array.isArray(t)?getValueFromDeepArray(this.records,t):this.records[t]:this._get(t),e=>{this.recordPromiseCallBack(t,e)})}getRawRecord(t){var e;return null!=(e=this.beforeChangedRecordsMap)&&e[t]?this.beforeChangedRecordsMap[t]:getValue(this.dataSourceObj.records?Array.isArray(t)?getValueFromDeepArray(this.records,t):this.records[t]:this._get(t),e=>{this.recordPromiseCallBack(t,e)})}getOriginalField(t,i,e,r,n){if(null!==i)return getField(this.getOriginalRecord(t),i,e,r,n,e=>{this.fieldPromiseCallBack(t,i,e)})}getRawFieldData(t,i,e,r,n){if(null!==i)return getField(this.getRawRecord(t),i,e,r,n,e=>{this.fieldPromiseCallBack(t,i,e)})}hasOriginalField(e,t){var i;return null!==t&&(\\\"function\\\"==typeof t||(i=this.getOriginalRecord(e),Boolean(i&&t in i)))}fieldPromiseCallBack(e,t,i){}recordPromiseCallBack(e,t){}isCanExchangeOrder(t,i){if(this.hasHierarchyStateExpand){var r,n=this.currentPagerIndexedData[t],o=this.currentPagerIndexedData[i],n=Array.isArray(n)?[...n]:[n],o=Array.isArray(o)?[...o]:[o];if(t<i&&o.length>n.length&&(r=this.currentPagerIndexedData[i+1],(r=Array.isArray(r)?[...r]:[r]).length<o.length)&&o.splice(o.length-1,1),n.length!==o.length)return!1;for(let e=0;e<=n.length-2;e++)if(n[e]!==o[e])return!1}return!0}reorderRecord(n,o){var a,l;if(\\\"asc\\\"!==this.lastOrder&&\\\"desc\\\"!==this.lastOrder&&this.isCanExchangeOrder(n,o))if(this.hasHierarchyStateExpand){let e,t,i=this.currentPagerIndexedData[n],r=this.currentPagerIndexedData[o];i=Array.isArray(i)?[...i]:[i],r=Array.isArray(r)?[...r]:[r],1<i.length||1<r.length?(n<o&&r.length>i.length&&(l=this.currentPagerIndexedData[o+1],(l=Array.isArray(l)?[...l]:[l]).length<r.length)&&r.splice(r.length-1,1),e=i.splice(i.length-1,1)[0],t=r.splice(r.length-1,1)[0],1<=i.length?((s=((l=this.getOriginalRecord(i)).filteredChildren||l.children).splice(e,1)).unshift(t,0),Array.prototype.splice.apply(null!=(a=l.filteredChildren)?a:l.children,s)):((a=this.records.splice(e,1)).unshift(t,0),Array.prototype.splice.apply(this.records,a))):(e=this.currentPagerIndexedData[n],t=this.currentPagerIndexedData[o],(l=this.records.splice(e,1)).unshift(t,0),Array.prototype.splice.apply(this.records,l)),this.restoreTreeHierarchyState(),this.updatePagerData()}else{var s=this.records.splice(n,1);s.unshift(o,0),Array.prototype.splice.apply(this.records,s)}}restoreTreeHierarchyState(){var r;if(this.hierarchyExpandLevel){for(let t=0;t<this._sourceLength;t++){var n=this.getOriginalRecord(t);(null!=(r=n.filteredChildren)?r:n.children)&&!n.hierarchyState&&(n.hierarchyState=HierarchyState.collapse)}this.currentIndexedData=Array.from({length:this._sourceLength},(e,t)=>t);let e=this._sourceLength;for(let i=0;i<e;i++){var o=this.currentIndexedData[i],a=this.getOriginalRecord(o),l=null!=(l=a.filteredChildren)?l:a.children;0<(null==l?void 0:l.length)&&a.hierarchyState===HierarchyState.expand?(this.hasHierarchyStateExpand=!0,l=this.restoreChildrenNodeHierarchy(o,a),i+=l,e+=l):!0!==a.children||a.hierarchyState||(a.hierarchyState=HierarchyState.collapse)}}}restoreChildrenNodeHierarchy(e,t){var i;let r=0;var n=null!=(i=t.filteredChildren)?i:t.children,o=null!=(i=null==n?void 0:n.length)?i:0;for(let s=0;s<o;s++){t.hierarchyState===HierarchyState.expand&&(r+=1);var a=n[s],l=Array.isArray(e)?e.concat(s):[e,s];t.hierarchyState===HierarchyState.expand&&this.currentIndexedData.splice(this.currentIndexedData.indexOf(e)+r,0,l),r+=this.restoreChildrenNodeHierarchy(l,a)}return r}};function getValueFromDeepArray(e,t){let i=e;for(let n=0;n<t.length;n++){var r=t[n];if(!i[r])return;r=null!=(r=(i=i[r]).filteredChildren)?r:null==i?void 0:i.children;r&&n+1<t.length&&(i=r)}return i}function _setFieldCache(e,t,i,r){(e[t]||(e[t]=new Map)).set(i,r)}DataSource.EMPTY=new DataSource({get(){},length:0}),init_esbuild_inject();var CachedDataSource=class zq1 extends DataSource{static get EVENT_TYPE(){return DataSource.EVENT_TYPE}static ofArray(t,e,i,r,n,o){return new zq1({get:e=>t[e],length:t.length,records:t},e,i,r,n,o)}constructor(e,t,i,r,n,o){super(e,t,i,r,n,o),this._recordCache=[],this._fieldCache={}}getOriginalRecord(e){return this._recordCache&&this._recordCache[e]?this._recordCache[e]:super.getOriginalRecord(e)}getOriginalField(e,t,i,r,n){var o=this._fieldCache&&this._fieldCache[e];if(o){o=o.get(t);if(o)return o}return super.getOriginalField(e,t,i,r,n)}clearCache(){this._recordCache&&(this._recordCache=[]),this._fieldCache&&(this._fieldCache={})}fieldPromiseCallBack(e,t,i){_setFieldCache(this._fieldCache,e,t,i)}recordPromiseCallBack(e,t){this._recordCache[e]=t}get records(){return Array.isArray(this._recordCache)&&0<this._recordCache.length?this._recordCache:super.records}release(){var e;null!=(e=super.release)&&e.call(this),this._recordCache=null,this._fieldCache=null}},import_cssfontparser=(init_esbuild_inject(),__toESM(require_cssfontparser()));function parseFont(e){return(0,import_cssfontparser[\\\"default\\\"])(e)}function getQuadProps(t){var e;if(isNumber_default(t)||isString_default(t)||isArray_default(t)){let e=parsePadding(t);return\\\"number\\\"==typeof e||\\\"string\\\"==typeof e?e=[e,e,e,e]:Array.isArray(e)&&(e=e.slice(0)),e}return t&&(isFinite(t.bottom)||isFinite(t.left)||isFinite(t.right)||isFinite(t.top))?[null!=(e=t.top)?e:0,null!=(e=t.right)?e:0,null!=(e=t.bottom)?e:0,null!=(e=t.left)?e:0]:[0,0,0,0]}init_esbuild_inject(),init_esbuild_inject();var TYPE_PAREN=0,TYPE_UNIT=1,TYPE_OPERATOR=2,TYPE_NUMBER=3,NODE_TYPE_UNIT=10,NODE_TYPE_BINARY_EXPRESSION=11,NODE_TYPE_NUMBER=12,TABULATION=9,CARRIAGE_RETURN=13,LINE_FEED=10,FORM_FEED=12,SPACE=32,PERCENT=37,FULL_STOP=46,DIGIT_0=48,DIGIT_9=57,LATIN_CAPITAL_A=65,LATIN_CAPITAL_Z=90,LATIN_SMALL_A=97,LATIN_SMALL_Z=122;function isUpperLetter(e){return LATIN_CAPITAL_A<=e&&e<=LATIN_CAPITAL_Z}function isLowerLetter(e){return LATIN_SMALL_A<=e&&e<=LATIN_SMALL_Z}function isLetter(e){return isLowerLetter(e)||isUpperLetter(e)}function isWhitespace(e){return e===TABULATION||e===LINE_FEED||e===FORM_FEED||e===CARRIAGE_RETURN||e===SPACE}function isDigit(e){return DIGIT_0<=e&&e<=DIGIT_9}function isDot(e){return e===FULL_STOP}function isUnit(e){return isLetter(e)||e===PERCENT}function createError(e){return new Error(\\\"calc parse error: \\\"+e)}function tokenize(h){const d=h.replace(/calc\\\\(/g,\\\"(\\\").trim(),u=[],c=d.length;for(let i=0;i<c;i++){var e=d[i],t=e.charCodeAt(0);if(\\\"(\\\"===e||\\\")\\\"===e)u.push({value:e,type:TYPE_PAREN});else if(\\\"*\\\"===e||\\\"/\\\"===e)u.push({value:e,type:TYPE_OPERATOR});else if(\\\"+\\\"===e||\\\"-\\\"===e)i=function(e,t){if(t<c){var i=d[t],r=i.charCodeAt(0);if(isDigit(r)||isDot(r))return n(e+i,t+1)}return u.push({value:e,type:TYPE_OPERATOR}),t}(e,i+1)-1;else if(isDigit(t)||isDot(t))i=n(e,i+1)-1;else if(!isWhitespace(t))throw createError(h)}function n(t,e){let i=e;for(;i<c;i++){var r=d[i],n=r.charCodeAt(0);if(!isDigit(n)){if(\\\".\\\"!==r){if(isUnit(n)){var o=t;var a=r;var l=i+1;let e=l;for(;e<c;e++){var s=d[e];if(!isUnit(s.charCodeAt(0)))break;a+=s}return u.push({value:parseFloat(o),unit:a,type:TYPE_UNIT}),e;return}break}if(0<=t.indexOf(\\\".\\\"))throw createError(h)}t+=r}if(\\\".\\\"===t)throw createError(h);return u.push({value:parseFloat(t),type:TYPE_NUMBER}),i}return u}var PRECEDENCE={\\\"*\\\":3,\\\"/\\\":3,\\\"+\\\":2,\\\"-\\\":2};function lex(e,n){function t(e){var t=e.pop(),i=e.pop(),r=e.pop();if(r&&r.nodeType&&i&&i.type===TYPE_OPERATOR&&t&&t.nodeType)return{nodeType:NODE_TYPE_BINARY_EXPRESSION,left:r,op:i,right:t};throw createError(n)}for(var i=[];e.length;){var r,o,a=e.shift();if(a.type===TYPE_PAREN&&\\\"(\\\"===a.value){let t=0;var l=array2.findIndex(e,e=>{if(e.type===TYPE_PAREN&&\\\"(\\\"===e.value)t++;else if(e.type===TYPE_PAREN&&\\\")\\\"===e.value){if(!t)return!0;t--}return!1});if(-1===l)throw createError(n);i.push(lex(e.splice(0,l),n)),e.shift()}else a.type===TYPE_OPERATOR?(3<=i.length&&(l=i[i.length-2].value,PRECEDENCE[a.value]<=PRECEDENCE[l])&&i.push(t(i)),i.push(a)):a.type===TYPE_UNIT?(({value:r,unit:o}=a),i.push({nodeType:NODE_TYPE_UNIT,value:r,unit:o})):a.type===TYPE_NUMBER&&i.push({nodeType:NODE_TYPE_NUMBER,value:a.value})}for(;1<i.length;)i.push(t(i));return i[0]}function parse3(e){return lex(tokenize(e),e)}function calcNode(e,t){if(e.nodeType===NODE_TYPE_BINARY_EXPRESSION){var i=calcNode(e.left,t),r=calcNode(e.right,t);switch(e.op.value){case\\\"+\\\":return i+r;case\\\"-\\\":return i-r;case\\\"*\\\":return i*r;case\\\"/\\\":return i/r;default:throw new Error(\\\"calc error. unknown operator: \\\"+e.op.value)}}else if(e.nodeType===NODE_TYPE_UNIT)switch(e.unit){case\\\"%\\\":return e.value*t.full/100;case\\\"px\\\":return e.value;default:throw new Error(\\\"calc error. unknown unit: \\\"+e.unit)}else if(e.nodeType===NODE_TYPE_NUMBER)return e.value;throw new Error(\\\"calc error.\\\")}function toPxInternal(e,t){return calcNode(parse3(e),t)}function toPx(e,t){return\\\"string\\\"==typeof e?toPxInternal(e.trim(),t):+e}function couldBeValidNumber(e){return!(isNil_default(e)||!isNumber_default(e)&&+e!=+e)}function isPercent(e){return!!isString_default(e)&&!!e.endsWith(\\\"%\\\")&&couldBeValidNumber(e.substring(0,e.length-1))}function createRootElement(e){var t=document.createElement(\\\"div\\\"),i=(t.setAttribute(\\\"tabindex\\\",\\\"0\\\"),t.classList.add(\\\"vtable\\\"),t.style.outline=\\\"none\\\",t.style.margin=`${e.top}px ${e.right}px ${e.bottom}px ${e.left}px`,(t.offsetWidth||(null==(i=t.parentElement)?void 0:i.offsetWidth)||1)-1),r=(t.offsetHeight||(null==(r=t.parentElement)?void 0:r.offsetHeight)||1)-1;return t.style.width=i&&i-e.left-e.right+\\\"px\\\"||\\\"0px\\\",t.style.height=r&&r-e.top-e.bottom+\\\"px\\\"||\\\"0px\\\",t}function updateRootElementPadding(e,t){e.style.margin=`${t.top}px ${t.right}px ${t.bottom}px ${t.left}px`;var i=(e.offsetWidth||(null==(i=e.parentElement)?void 0:i.offsetWidth)||1)-1,r=(e.offsetHeight||(null==(r=e.parentElement)?void 0:r.offsetHeight)||1)-1;e.style.width=i&&i-t.left-t.right+\\\"px\\\"||\\\"0px\\\",e.style.height=r&&r-t.top-t.bottom+\\\"px\\\"||\\\"0px\\\"}function _dealWithUpdateDataSource(t,e){var i=t.internalProps[\\\"dataSourceEventIds\\\"];i&&i.forEach(e=>t.internalProps.handler.off(e)),e(t),t.internalProps.dataSourceEventIds=[t.internalProps.handler.on(t.internalProps.dataSource,DataSource.EVENT_TYPE.CHANGE_ORDER,()=>{t.dataSource.hierarchyExpandLevel&&t.refreshRowColCount(),t.render()})]}function _setRecords(t,i=[]){_dealWithUpdateDataSource(t,()=>{t.internalProps.records=i;var e=t.internalProps.dataSource=CachedDataSource.ofArray(i,t.internalProps.dataConfig,t.pagination,t.internalProps.layoutMap.columnObjects,t.internalProps.layoutMap.rowHierarchyType,null!=(e=t.options.hierarchyExpandLevel)?e:null!=(e=t._hasHierarchyTreeHeader)&&e.call(t)?1:void 0);t.addReleaseObj(e)})}function _setDataSource(t,i){_dealWithUpdateDataSource(t,()=>{var e;i?i instanceof DataSource?t.internalProps.dataSource=i:(e=t.internalProps.dataSource=new CachedDataSource(i),t.addReleaseObj(e)):t.internalProps.dataSource=DataSource.EMPTY,t.internalProps.records=null})}function _getTargetFrozenRowAt(i,r){if(i.internalProps.frozenRowCount){let e=i[\\\"scrollTop\\\"];var n=i.internalProps.frozenRowCount;for(let t=0;t<n;t++){var o=i.getRowHeight(t),a=e+o;if(r<a)return{top:e,row:t,bottom:a,height:o};e=a}}return null}function _getTargetFrozenColAt(i,r){if(i.internalProps.frozenColCount){let e=i[\\\"scrollLeft\\\"];var n=i.internalProps.frozenColCount;for(let t=0;t<n;t++){var o=i.getColWidth(t),a=e+o;if(r<a)return{left:e,col:t,right:a,width:o};e=a}}return null}function _toPxWidth(e,t){return Math.round(toPx(t,e.internalProps.calcWidthContext))}function _applyColWidthLimits(e,t){return e?e.min&&e.min>t?e.min:e.max&&e.max<t?e.max:t:t}function _getScrollableVisibleRect(e){let t=0,i=0,r=(0<e.frozenColCount&&(t=e.getFrozenColsWidth()),0<e.rightFrozenColCount&&(i=e.getRightFrozenColsWidth()),0),n=0;return 0<e.frozenRowCount&&(r=e.getFrozenRowsHeight()),0<e.bottomFrozenRowCount&&(n=e.getBottomFrozenRowsHeight()),new Rect2(e.scrollLeft+t,e.scrollTop+r,e.tableNoFrameWidth-t-i,e.tableNoFrameHeight-r-n)}function getStyleTheme(e,t,i,r,n,o=!0){var a=getQuadProps(n(\\\"padding\\\",e,i,r,t)),l=n(\\\"bgColor\\\",e,i,r,t),s=n(\\\"font\\\",e,i,r,t);let h,d,u,c,g;s?(({family:p,size:f,weight:m,style:b,variant:v}=parseFont(s)),h=p.join(\\\" \\\"),d=f,u=m,c=b,c=v):(h=n(\\\"fontFamily\\\",e,i,r,t),d=n(\\\"fontSize\\\",e,i,r,t),u=n(\\\"fontWeight\\\",e,i,r,t),c=n(\\\"fontStyle\\\",e,i,r,t),g=n(\\\"fontVariant\\\",e,i,r,t));var p=n(\\\"textAlign\\\",e,i,r,t),f=n(\\\"textBaseline\\\",e,i,r,t),m=n(\\\"color\\\",e,i,r,t),b=n(\\\"lineHeight\\\",e,i,r,t),v=n(\\\"underline\\\",e,i,r,t),C=n(\\\"underlineDash\\\",e,i,r,t),y=n(\\\"underlineOffset\\\",e,i,r,t),_=n(\\\"lineThrough\\\",e,i,r,t),w=Math.max(1,Math.floor(d/10)),x=n(\\\"textOverflow\\\",e,i,r,t),S=n(\\\"borderColor\\\",e,i,r,t),A=n(\\\"borderLineWidth\\\",e,i,r,t),T=n(\\\"borderLineDash\\\",e,i,r,t),R=n(\\\"marked\\\",e,i,r,t),M=n(\\\"cursor\\\",e,i,r,t),s=!(a&&l&&s&&p&&f&&m&&x&&S&&A&&T&&\\\"boolean\\\"==typeof v&&\\\"boolean\\\"==typeof _&&\\\"boolean\\\"==typeof R);return o?(m={text:{fontFamily:h,fontSize:d,fontWeight:u,fontStyle:c,fontVariant:g,fill:m,textAlign:p,textBaseline:f,lineHeight:null!=b?b:d,underline:v?w:void 0,underlineDash:C,underlineOffset:y,lineThrough:_?w:void 0,ellipsis:x&&\\\"clip\\\"!==x?\\\"ellipsis\\\"===x?\\\"...\\\":x:void 0},group:{fill:l,lineDash:T,lineWidth:A,stroke:S,cursor:\\\"auto\\\"===M||\\\"default\\\"===M?void 0:M},_vtable:{padding:a,marked:R}},Array.isArray(A)&&(m.group.strokeArrayWidth=getQuadProps(A)),Array.isArray(S)&&(p=getQuadProps(S),m.group.stroke=!p.every(e=>!e)&&p,m.group.strokeArrayColor=getQuadProps(S)),{theme:m,hasFunctionPros:s}):{hasFunctionPros:s}}function sortRecords(i){var r,n;if(i.sortState){let e,t;Array.isArray(i.sortState)?0!==i.sortState.length&&({order:e,field:t}=null==(r=i.sortState)?void 0:r[0]):({order:e,field:t}=i.sortState),e&&t&&\\\"normal\\\"!==e&&(r=i._getSortFuncFromHeaderOption(void 0,t),n=i.internalProps.layoutMap.headerObjects.find(e=>e&&e.field===t),i.dataSource.sort(n.field,e,null!=r?r:defaultOrderFn))}}function getCellCornerRadius(e,t,i){var r=i.theme.frameStyle.cornerRadius;if(r){if(0===e&&0===t)return[r,0,0,0];if(e===i.colCount-1&&0===t)return[0,r,0,0];if(0===e&&t===i.rowCount-1)return[0,0,0,r];if(e===i.colCount-1&&t===i.rowCount-1)return[0,0,r,0]}return 0}init_esbuild_inject(),init_esbuild_inject();var Icon=class extends Image2{constructor(e){super(e),\\\"mouseenter_cell\\\"!==this.attribute.visibleTime&&\\\"click_cell\\\"!==this.attribute.visibleTime||(this.attribute.opacity=0),this.attribute.hoverImage&&(this.attribute.originImage=this.attribute.image)}get backgroundWidth(){var e;return null!=(e=null!=(e=this.attribute.backgroundWidth)?e:this.attribute.width)?e:0}get backgroundHeight(){var e;return null!=(e=null!=(e=this.attribute.backgroundHeight)?e:this.attribute.height)?e:0}};function dealWithCustom(e,t,i,r,n,o,a,l,s,h){let d,u,c,g,p=!0,f=!1;var m;return\\\"function\\\"==typeof e?((m=e({col:i,row:r,dataValue:h.getCellOriginValue(i,r),value:h.getCellValue(i,r)||\\\"\\\",rect:{left:0,top:0,right:n,bottom:o,width:n,height:o},table:h})).rootContainer&&(m.rootContainer=decodeReactDom(m.rootContainer)),m.rootContainer instanceof Group&&((g=m.rootContainer).name=\\\"custom-container\\\"),p=m.renderDefault,f=m.enableCellPadding):\\\"function\\\"==typeof t?(m=t({col:i,row:r,dataValue:h.getCellOriginValue(i,r),value:h.getCellValue(i,r)||\\\"\\\",rect:{left:0,top:0,right:n,bottom:o,width:n,height:o},table:h}))&&(c=m.elements,p=m.renderDefault,d=m.expectedWidth,u=m.expectedHeight):t&&(d=t.expectedWidth,u=t.expectedHeight,c=t.elements,p=t.renderDefault),c&&(g=adjustElementToGroup(c,a?d:n,l?u:o,h.getCellValue(i,r))),f&&g.setAttributes({x:s[3],y:s[0],width:n-s[1]-s[3],height:o-s[0]-s[2]}),dealPercentCalc(g,n,o),{elementsGroup:g,renderDefault:p}}function adjustElementToGroup(e,t,i,r){const n=new Group({x:0,y:0,width:t,height:i,fill:!1,stroke:!1,pickable:!1});return n.name=\\\"custom-container\\\",adjustElementsPos(e,t,i,r).forEach(e=>{switch(e.clickable&&(e.pickable=e.clickable),e.type){case\\\"arc\\\":var t=createArc({x:e.x,y:e.y,dx:null!=(t=e.dx)?t:0,dy:null!=(t=e.dy)?t:0,fill:e.fill,stroke:e.stroke,outerRadius:e.radius,startAngle:e.startAngle,endAngle:e.endAngle,pickable:!!e.pickable,cursor:e.cursor});t.name=e.name,n.appendChild(t);break;case\\\"text\\\":e.background&&(t=null!=(t=null==(t=e.background)?void 0:t.expandX)?t:0,i=null!=(i=null==(i=e.background)?void 0:i.expandY)?i:0,t=createRect({x:e.x-t,y:e.y-i,dx:null!=(r=e.dx)?r:0,dy:null!=(r=e.dy)?r:0,width:e.width+2*t,height:e.height+2*i,cornerRadius:null!=(t=null==(r=e.background)?void 0:r.cornerRadius)?t:0,fill:null!=(r=null==(i=e.background)?void 0:i.fill)?r:\\\"#888\\\"}),n.appendChild(t));var i,r=new Text(Object.assign({pickable:!!e.pickable,fill:null!=(i=e.color)?i:e.fill},e));r.name=e.name,n.appendChild(r);break;case\\\"rect\\\":var r=createRect({x:e.x,y:e.y,dx:null!=(t=e.dx)?t:0,dy:null!=(i=e.dy)?i:0,width:e.width,height:e.height,cornerRadius:e.radius,fill:e.fill,stroke:e.stroke,pickable:!!e.pickable,cursor:e.cursor});r.name=e.name,n.appendChild(r);break;case\\\"circle\\\":var r=createCircle({x:e.x,y:e.y,dx:null!=(t=e.dx)?t:0,dy:null!=(i=e.dy)?i:0,radius:e.radius,fill:e.fill,stroke:e.stroke,pickable:!!e.pickable,cursor:e.cursor});r.name=e.name,n.appendChild(r);break;case\\\"icon\\\":r=new Icon({x:e.x,y:e.y,dx:null!=(t=e.dx)?t:0,dy:null!=(i=e.dy)?i:0,width:e.width,height:e.height,image:e.svg,backgroundWidth:e.hover?null!=(r=e.hover.width)?r:e.width:void 0,backgroundHeight:e.hover?null!=(t=e.hover.width)?t:e.width:void 0,backgroundColor:e.hover?null!=(i=e.hover.bgColor)?i:\\\"rgba(22,44,66,0.2)\\\":void 0,pickable:!!e.pickable,cursor:e.cursor});r.name=e.name,r.role=\\\"icon-custom\\\",n.appendChild(r);break;case\\\"image\\\":r=new Icon({x:e.x,y:e.y,dx:null!=(t=e.dx)?t:0,dy:null!=(i=e.dy)?i:0,width:e.width,height:e.height,image:e.src,backgroundWidth:e.hover?null!=(r=e.hover.width)?r:e.width:void 0,backgroundHeight:e.hover?null!=(t=e.hover.width)?t:e.width:void 0,backgroundColor:e.hover?null!=(i=e.hover.bgColor)?i:\\\"rgba(22,44,66,0.2)\\\":void 0,pickable:!!e.pickable,cursor:e.cursor,shape:e.shape});r.name=e.name,r.role=\\\"image-custom\\\",n.appendChild(r);break;case\\\"line\\\":t=createLine({points:e.points,stroke:e.stroke,pickable:!!e.pickable,cursor:e.cursor});t.name=e.name,n.appendChild(t)}}),n}function adjustElementsPos(e,t,i,r){var n=[],o=[0,0,0,0];for(let s=0;s<e.length;s++){var a=e[s],l=Object.assign({},a);for(const h in l)l.hasOwnProperty(h)&&isFunction_default(l[h])&&(l[h]=l[h](r));a=l;isValid_default(a.x)&&(a.x=isString_default(a.x)?transformString(a.x,t-o[1]):Number(a.x)),isValid_default(a.y)&&(a.y=isString_default(a.y)?transformString(a.y,i-o[2]):Number(a.y)),\\\"width\\\"in l&&(l.width=isString_default(l.width)?transformString(l.width,t-o[1]):Number(l.width)),\\\"height\\\"in l&&(l.height=isString_default(l.height)?transformString(l.height,i-o[2]):Number(l.height)),\\\"radius\\\"in l&&(l.radius=isString_default(l.radius)?transformString(l.radius,Math.min(t-o[1],i-o[2])):Number(l.radius)),\\\"hover\\\"in l&&(l.hover.x=isString_default(l.hover.x)?transformString(l.hover.x,t-o[1]):Number(l.hover.x),l.hover.y=isString_default(l.hover.y)?transformString(l.hover.y,i-o[2]):Number(l.hover.y),l.hover.width=isString_default(l.hover.width)?transformString(l.hover.width,t-o[1]):Number(l.hover.width),l.hover.height=isString_default(l.hover.height)?transformString(l.hover.height,i-o[2]):Number(l.hover.height),l.hover.x+=0,l.hover.y+=0),a.x=a.x+0,a.y=a.y+0,n.push(l)}return n}function transformString(e,t){return!e.endsWith(\\\"px\\\")&&e.endsWith(\\\"%\\\")&&t?parseInt(e,10)/100*t:parseInt(e,10)}function dealPercentCalc(e,i,r){e&&e.forEachChildren(e=>{var t;e&&(isObject_default(e.attribute.width)&&e.attribute.width.percent&&e.setAttribute(\\\"width\\\",Math.max(0,e.attribute.width.percent/100*i+(null!=(t=e.attribute.width.delta)?t:0))),e.attribute.width<0&&e.setAttribute(\\\"width\\\",0),isObject_default(e.attribute.height)&&e.attribute.height.percent&&e.setAttribute(\\\"height\\\",Math.max(0,e.attribute.height.percent/100*r+(null!=(t=e.attribute.height.delta)?t:0))),e.attribute.height<0&&e.setAttribute(\\\"height\\\",0),\\\"group\\\"===e.type)&&dealPercentCalc(e,e.attribute.width,e.attribute.height)})}function decodeReactDom(e){if(!e||!isValid_default(e.$$typeof)&&!isValid_default(e.vtype))return e;const t=e.type,{attribute:i,children:r,stateProxy:n}=e.props,o=t({attribute:i});return parseToGraphic(o,e.props),n&&(o.stateProxy=n),o.id=i.id,o.name=i.name,isArray_default(r)?r.forEach(e=>{var t=decodeReactDom(e);t&&t.type&&o.add(t)}):r&&o.add(decodeReactDom(r)),o}function parseToGraphic(i,r){let e=!1;switch(i.type){case\\\"richtext\\\":case\\\"rich/image\\\":break;default:e=!0}e&&Object.keys(r).forEach(e=>{var t=REACT_TO_CANOPUS_EVENTS[e];t&&i.on(t,r[e])})}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var icons={},IconCache=class{static setIcon(e,t){this.cache.set(e,t)}static getIcon(e){return this.cache.has(e)?this.cache.get(e):null}static hasIcon(e){return this.cache.has(e)}static clear(e){return this.cache[\\\"delete\\\"](e)}static clearAll(){this.cache=new Map}},builtins=(IconCache.cache=new Map,{get sort_downward(){return{type:\\\"svg\\\",svg:'<svg width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"> <path d=\\\"M4.6665 9H11.3332L7.99984 13.1667L4.6665 9Z\\\" fill=\\\"#282F38\\\" fill-opacity=\\\"0.35\\\"/><path d=\\\"M11.3335 7L4.66683 7L8.00016 2.83333L11.3335 7Z\\\" fill=\\\"#416EFF\\\"/> </svg>',width:16,height:16,funcType:IconFuncTypeEnum.sort,name:\\\"sort_downward\\\",positionType:IconPosition.contentRight,marginLeft:3,hover:{width:22,height:22,bgColor:\\\"rgba(101, 117, 168, 0.1)\\\"},cursor:\\\"pointer\\\"}},get sort_upward(){return{type:\\\"svg\\\",svg:'<svg width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"> <path d=\\\"M4.6665 9H11.3332L7.99984 13.1667L4.6665 9Z\\\" fill=\\\"#416EFF\\\"/><path d=\\\"M11.3335 7L4.66683 7L8.00016 2.83333L11.3335 7Z\\\" fill=\\\"#282F38\\\" fill-opacity=\\\"0.35\\\"/></svg> ',width:16,height:16,funcType:IconFuncTypeEnum.sort,positionType:IconPosition.contentRight,name:\\\"sort_upward\\\",marginLeft:3,hover:{width:22,height:22,bgColor:\\\"rgba(101, 117, 168, 0.1)\\\"},cursor:\\\"pointer\\\"}},get sort_normal(){return{type:\\\"svg\\\",svg:'<svg width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M4.6665 9H11.3332L7.99984 13.1667L4.6665 9Z\\\" fill=\\\"#282F38\\\" fill-opacity=\\\"0.35\\\"/><path d=\\\"M11.3335 7L4.66683 7L8.00016 2.83333L11.3335 7Z\\\" fill=\\\"#282F38\\\" fill-opacity=\\\"0.35\\\"/></svg> ',width:16,height:16,funcType:IconFuncTypeEnum.sort,positionType:IconPosition.contentRight,name:\\\"sort_normal\\\",marginLeft:3,hover:{width:22,height:22,bgColor:\\\"rgba(101, 117, 168, 0.1)\\\"},cursor:\\\"pointer\\\"}},get freeze(){return{type:\\\"svg\\\",svg:'<svg width=\\\"22\\\" height=\\\"22\\\" viewBox=\\\"0 0 22 22\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><g clip-path=\\\"url(#clip0)\\\"><path d=\\\"M17.1313 8.42047C17.1932 8.48238 17.2423 8.55587 17.2759 8.63676C17.3094 8.71764 17.3266 8.80434 17.3266 8.89189C17.3266 8.97944 17.3094 9.06613 17.2759 9.14702C17.2423 9.2279 17.1932 9.3014 17.1313 9.3633L13.3843 13.1103C13.7007 14.3048 13.5305 15.4443 12.8388 16.2395C12.8104 16.2781 12.7778 16.3136 12.7417 16.3451L12.712 16.3755C12.6501 16.4374 12.5766 16.4865 12.4957 16.52C12.4148 16.5535 12.3281 16.5707 12.2406 16.5707C12.153 16.5707 12.0663 16.5535 11.9854 16.52C11.9046 16.4865 11.8311 16.4374 11.7692 16.3755L9.17633 13.7826L6.05316 16.9058L5.11983 17.0925C5.09291 17.0979 5.06508 17.0965 5.03881 17.0886C5.01254 17.0806 4.98863 17.0663 4.96923 17.0469C4.94982 17.0275 4.9355 17.0036 4.92755 16.9773C4.9196 16.951 4.91827 16.9232 4.92366 16.8963L5.11033 15.963L8.23333 12.8396L5.64066 10.2471C5.57875 10.1852 5.52964 10.1117 5.49614 10.0309C5.46263 9.94997 5.44539 9.86327 5.44539 9.77572C5.44539 9.68817 5.46263 9.60148 5.49614 9.52059C5.52964 9.43971 5.57875 9.36621 5.64066 9.3043C5.65066 9.2943 5.66066 9.2843 5.67099 9.27464C5.70266 9.2383 5.73833 9.20547 5.77766 9.17664C6.57283 8.48564 7.71199 8.31564 8.90599 8.63197L12.6528 4.88497C12.7147 4.82306 12.7882 4.77395 12.8691 4.74045C12.95 4.70694 13.0367 4.6897 13.1242 4.6897C13.2118 4.6897 13.2985 4.70694 13.3794 4.74045C13.4603 4.77395 13.5338 4.82306 13.5957 4.88497L17.1312 8.42047H17.1313ZM15.7172 8.8918L13.1243 6.29914L9.56483 9.8588C9.47574 9.94788 9.36323 10.0099 9.24034 10.0376C9.11746 10.0654 8.98922 10.0578 8.87049 10.0156C8.22783 9.78764 7.63899 9.7553 7.17749 9.89814L12.1182 14.8388C12.261 14.3771 12.2287 13.7885 12.0007 13.146C11.9585 13.0272 11.9509 12.899 11.9787 12.7761C12.0064 12.6532 12.0684 12.5407 12.1575 12.4516L15.7172 8.89164V8.8918Z\\\" fill=\\\"#282F38\\\" fill-opacity=\\\"0.2\\\"/></g><defs><clipPath id=\\\"clip0\\\"><rect width=\\\"22\\\" height=\\\"22\\\" fill=\\\"white\\\"/></clipPath></defs></svg>',width:22,height:22,name:\\\"freeze\\\",funcType:IconFuncTypeEnum.frozen,positionType:IconPosition.right,marginRight:0,hover:{width:22,height:22,bgColor:\\\"rgba(101, 117, 168, 0.1)\\\"},cursor:\\\"pointer\\\"}},get frozen(){return{type:\\\"svg\\\",svg:'<svg width=\\\"22\\\" height=\\\"22\\\" viewBox=\\\"0 0 22 22\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"> <path d=\\\"M8.49975 3.66663C8.32294 3.66663 8.15337 3.73686 8.02835 3.86189C7.90332 3.98691 7.83309 4.15648 7.83309 4.33329V9.63246C6.76475 10.2533 6.07942 11.1795 6.00625 12.2308C5.99892 12.2786 5.99692 12.3268 6.00009 12.3741L5.99975 12.4166C5.99975 12.5934 6.06999 12.763 6.19501 12.888C6.32004 13.0131 6.48961 13.0833 6.66642 13.0833H10.3333L10.3331 17.5L10.8611 18.292C10.8763 18.3148 10.8969 18.3335 10.9211 18.3464C10.9453 18.3594 10.9723 18.3662 10.9998 18.3662C11.0272 18.3662 11.0542 18.3594 11.0784 18.3464C11.1026 18.3335 11.1232 18.3148 11.1384 18.292L11.6664 17.5L11.6666 13.0833H15.3331C15.5099 13.0833 15.6795 13.0131 15.8045 12.888C15.9295 12.763 15.9998 12.5934 15.9998 12.4166C15.9998 12.4025 15.9998 12.3883 15.9994 12.3741C16.0028 12.3263 16.0008 12.2776 15.9933 12.2295C15.9196 11.1786 15.2343 10.2528 14.1664 9.63229V4.33329C14.1664 4.15648 14.0962 3.98691 13.9712 3.86189C13.8461 3.73686 13.6766 3.66663 13.4998 3.66663H8.49975Z\\\" fill=\\\"#282F38\\\" fill-opacity=\\\"0.35\\\"/></svg>',width:22,height:22,name:\\\"frozen\\\",funcType:IconFuncTypeEnum.frozen,positionType:IconPosition.right,marginRight:0,hover:{width:22,height:22,bgColor:\\\"rgba(101, 117, 168, 0.1)\\\"},cursor:\\\"pointer\\\"}},get frozenCurrent(){return{type:\\\"svg\\\",svg:'<svg width=\\\"22\\\" height=\\\"22\\\" viewBox=\\\"0 0 22 22\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M8.49975 3.66663C8.32294 3.66663 8.15337 3.73686 8.02835 3.86189C7.90332 3.98691 7.83309 4.15648 7.83309 4.33329V9.63246C6.76475 10.2533 6.07942 11.1795 6.00625 12.2308C5.99892 12.2786 5.99692 12.3268 6.00009 12.3741L5.99975 12.4166C5.99975 12.5934 6.06999 12.763 6.19501 12.888C6.32004 13.0131 6.48961 13.0833 6.66642 13.0833H10.3333L10.3331 17.5L10.8611 18.292C10.8763 18.3148 10.8969 18.3335 10.9211 18.3464C10.9453 18.3594 10.9723 18.3662 10.9998 18.3662C11.0272 18.3662 11.0542 18.3594 11.0784 18.3464C11.1026 18.3335 11.1232 18.3148 11.1384 18.292L11.6664 17.5L11.6666 13.0833H15.3331C15.5099 13.0833 15.6795 13.0131 15.8045 12.888C15.9295 12.763 15.9998 12.5934 15.9998 12.4166C15.9998 12.4025 15.9998 12.3883 15.9994 12.3741C16.0028 12.3263 16.0008 12.2776 15.9933 12.2295C15.9196 11.1786 15.2343 10.2528 14.1664 9.63229V4.33329C14.1664 4.15648 14.0962 3.98691 13.9712 3.86189C13.8461 3.73686 13.6766 3.66663 13.4998 3.66663H8.49975Z\\\" fill=\\\"#416EFF\\\"/></svg>',width:22,height:22,funcType:IconFuncTypeEnum.frozen,positionType:IconPosition.right,name:\\\"frozenCurrent\\\",marginRight:0,hover:{width:22,height:22,bgColor:\\\"rgba(101, 117, 168, 0.1)\\\"},cursor:\\\"pointer\\\"}},get dropdownIcon(){return{type:\\\"svg\\\",svg:'<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><g><rect x=\\\"2\\\" y=\\\"1\\\" width=\\\"20\\\" height=\\\"20\\\" rx=\\\"10\\\" fill=\\\"white\\\"/><rect x=\\\"2.5\\\" y=\\\"1.5\\\" width=\\\"19\\\" height=\\\"19\\\" rx=\\\"9.5\\\" stroke=\\\"#959DA5\\\"/></g><path d=\\\"M14.9492 9.39531C15.0086 9.31911 15.0165 9.21887 14.9698 9.1356C14.923 9.05234 14.8294 9 14.7273 9L9.27273 9C9.17057 9 9.07697 9.05234 9.03023 9.1356C8.98348 9.21887 8.99142 9.31911 9.0508 9.39531L11.7781 12.8953C11.8293 12.961 11.9119 13 12 13C12.0881 13 12.1707 12.961 12.2219 12.8953L14.9492 9.39531Z\\\" fill=\\\"#4F5965\\\"/></svg>',width:24,height:24,funcType:IconFuncTypeEnum.dropDown,positionType:IconPosition.absoluteRight,name:\\\"dropdownIcon\\\",marginRight:0,hover:{width:24,height:24,bgColor:\\\"rgba(101, 117, 168, 0.1)\\\",image:'<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><g><rect x=\\\"2\\\" y=\\\"1\\\" width=\\\"20\\\" height=\\\"20\\\" rx=\\\"10\\\" fill=\\\"#1E54C9\\\"/><rect x=\\\"2.5\\\" y=\\\"1.5\\\" width=\\\"19\\\" height=\\\"19\\\" rx=\\\"9.5\\\" stroke=\\\"#141414\\\" stroke-opacity=\\\"0.2\\\"/></g><path d=\\\"M14.9492 9.39531C15.0086 9.31911 15.0165 9.21887 14.9698 9.1356C14.923 9.05234 14.8294 9 14.7273 9L9.27273 9C9.17057 9 9.07697 9.05234 9.03023 9.1356C8.98348 9.21887 8.99142 9.31911 9.0508 9.39531L11.7781 12.8953C11.8293 12.961 11.9119 13 12 13C12.0881 13 12.1707 12.961 12.2219 12.8953L14.9492 9.39531Z\\\" fill=\\\"white\\\"/></svg>'},cursor:\\\"pointer\\\",visibleTime:\\\"mouseenter_cell\\\"}},get play(){return{type:\\\"svg\\\",svg:'<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect width=\\\"48\\\" height=\\\"48\\\" fill=\\\"white\\\" fill-opacity=\\\"0.01\\\" /><path d=\\\"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z\\\" fill=\\\"none\\\" stroke=\\\"#686a6e\\\" stroke-width=\\\"4\\\" stroke-linejoin=\\\"round\\\" stroke-opacity=\\\"0.7\\\" /><path d=\\\"M20 24V17.0718L26 20.5359L32 24L26 27.4641L20 30.9282V24Z\\\" fill=\\\"none\\\" stroke=\\\"#686a6e\\\" stroke-width=\\\"4\\\" stroke-linejoin=\\\"round\\\" stroke-opacity=\\\"0.7\\\" /></svg>',width:24,height:24,funcType:IconFuncTypeEnum.play,positionType:IconPosition.right,name:\\\"play\\\",marginRight:0,hover:{width:24,height:24,bgColor:\\\"rgba(101, 117, 168, 0.1)\\\"},cursor:\\\"pointer\\\"}},get damage_pic(){return{type:\\\"svg\\\",svg:'<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M5 10V38C5 39.1046 5.89543 40 7 40H14H18L15 29L22 27L21 20L29 16L27 13L30 8H7C5.89543 8 5 8.89543 5 10Z\\\" fill=\\\"none\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M43 38V10C43 8.89543 42.1046 8 41 8H38L34 14L37 19L28 23L29 31L22 33L24 40H41C42.1046 40 43 39.1046 43 38Z\\\" fill=\\\"none\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M14.5 18C15.3284 18 16 17.3284 16 16.5C16 15.6716 15.3284 15 14.5 15C13.6716 15 13 15.6716 13 16.5C13 17.3284 13.6716 18 14.5 18Z\\\" fill=\\\"none\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/></svg>',width:24,height:24,funcType:IconFuncTypeEnum.damagePic,positionType:IconPosition.left,name:\\\"damage_pic\\\",marginRight:0,hover:{width:24,height:24,bgColor:\\\"rgba(101, 117, 168, 0.1)\\\"},cursor:\\\"pointer\\\"}},get loading_pic(){return{type:\\\"svg\\\",svg:'<svg viewBox=\\\"0 0 400 300\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><mask id=\\\"a\\\" style=\\\"mask-type:alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"50\\\" y=\\\"65\\\" width=\\\"301\\\" height=\\\"170\\\"><path d=\\\"M350.3 65H50v169.8h300.3V65Z\\\" fill=\\\"#fff\\\"/></mask><g mask=\\\"url(#a)\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M58.3 233.2h32.8v-36.8H58.3v36.8Z\\\" fill=\\\"#C7DEFF\\\"/><path d=\\\"M91.1 224.5v8.8H58.3M82.4 196.2H58.3\\\" stroke=\\\"#071F4D\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M305.4 182.5s-2.7 12.6 0 17.4c2.7 4.8 8.3 6.7 12.4 4.4 4.2-2.4 5.3-8.1 2.6-12.9-2.7-4.8-15-8.9-15-8.9ZM336 204.7c4.3 2 9.7-.4 12-5.4 2.3-5-1.5-17.3-1.5-17.3s-11.8 5.1-14.1 10.1c-2.3 5-.7 10.6 3.6 12.6Z\\\" fill=\\\"#00E4E5\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M326.7 174s-10 11.8-10 18.6c0 6.7 4.5 12.2 10 12.2s10-5.5 10-12.3c0-6.8-10-18.5-10-18.5Z\\\" fill=\\\"#00E4E5\\\"/><path d=\\\"M332.3 181.5c2.3 3.6 4.4 7.8 4.4 10.9M316.7 192.5c0-3.1 2.1-7.2 4.3-10.8\\\" stroke=\\\"#071F4D\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M343.1 227.3v-9.7h-34v9.7c0 3.7 3 6.6 6.6 6.6h20.9c3.6 0 6.5-2.9 6.5-6.6Z\\\" fill=\\\"#071F4D\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M350.4 220.8V198H302v22.8c0 5.9 4.8 10.7 10.7 10.7h26.9c5.9 0 10.7-4.8 10.8-10.7Z\\\" fill=\\\"#C7DEFF\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M331.7 74.2H117.8L87.4 203h213.8l30.5-128.8Z\\\" fill=\\\"#fff\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M337 74.2h-6.2l-30.6 129.2h6.2L337 74.2Z\\\" fill=\\\"#fff\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M303.8 203.5h2.4l30.7-129.3h-1.8l-31.3 129.3Z\\\" fill=\\\"#C7DEFF\\\"/><path d=\\\"m337 74.2-30.6 129.2h-5.9\\\" stroke=\\\"#071F4D\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M229.9 202.1h-47.6l2 9.6h47.3l-1.7-9.6Z\\\" fill=\\\"#C7DEFF\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M94.7 172.6 87.4 203h213.1l7.8-30.4H94.7Z\\\" fill=\\\"#006EFF\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M94.7 172.6 87.4 203h213.1l7.8-30.4H94.7Z\\\" fill=\\\"#006EFF\\\"/><path d=\\\"M138.5 74.2h193.2l-23.4 98.6M94.5 172.7l11-46.3M104.8 155.4l-2.3 11.5h6.7M316 112.1l1.1-4.5\\\" stroke=\\\"#071F4D\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M148.3 138.1h97V119h-97v19.1Z\\\" fill=\\\"#00E4E5\\\"/><path d=\\\"M303.1 80.6h20.3l-4.6 19.6M228.3 234.3c3.6 0 6.3-3.2 5.7-6.8l-4.1-24.1\\\" stroke=\\\"#071F4D\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M226.2 229.5h-68.9v1.2c0 2 1.6 3.7 3.7 3.7h60.1c2.8 0 5-2.2 5.1-4.9Z\\\" fill=\\\"#C7DEFF\\\"/><path d=\\\"M180.699 226.8h-19.9c-2.8 0-4.6 3-3.3 5.5m0 0c.6 1.2 1.9 2 3.3 2h57.8M175.9 203.4l3.6 17.6M241.2 234.3h65.1M104.6 234.3h41.3\\\" stroke=\\\"#071F4D\\\"/><path d=\\\"M206.2 234.3h14.9c3.1 0 5.5-2.8 5-5.9l-4.3-24.9M160.7 226.8h46M62.2 226.1h-9.5c-1.2 0-2.2-1-2.2-2.2v-18.3c0-1.2 1-2.2 2.2-2.2h9.5\\\" stroke=\\\"#071F4D\\\"/><path d=\\\"M53.4 171.7H68c2.1 0 3.7 1.7 3.7 3.7v16.1M79.1 192v-21.8c0-2.5 2-4.6 4.6-4.6h2.2c2.5 0 4.5-2 4.5-4.5m0 0c0-2.5-2-4.5-4.5-4.5H56.1c-2.4 0-4.3-1.9-4.3-4.3V148M71.2 165.2h-18M64 181.7v10.1\\\" stroke=\\\"#C7DEFF\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M85.7 120H124c4.3 0 7.7-3.5 7.7-7.7V65.5H94.2c-4.7 0-8.5 4.9-8.5 11V120Z\\\" fill=\\\"#C7DEFF\\\"/><path d=\\\"M85.7 110.7V73c0-4.1 3.4-7.5 7.5-7.5h38.5M146.2 73.8v-2.5c0-3.2-2-5.8-5.8-5.8-2.8 0-6 1.1-6 5.8v42.4c0 4.7-3.8 8.5-8.5 8.5h-15.6\\\" stroke=\\\"#071F4D\\\"/><path d=\\\"M119.7 122.3H87c-6.1 0-11.1-5-11.1-11.1m0 0h39M126.1 122.3c-6.1 0-11.1-5-11.1-11.1\\\" stroke=\\\"#071F4D\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M85.4 122.1h37.2c-6.5-1.8-8-10.5-8-10.5H76.2c.6 8.8 9.2 10.5 9.2 10.5Z\\\" fill=\\\"#071F4D\\\"/><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M95.8 102.9h4.8V83.6h-4.8v19.3ZM106.6 102.9h4.8V77.6h-4.8v25.3ZM117.3 102.9h4.8V89.1h-4.8v13.8Z\\\" fill=\\\"#fff\\\"/><path d=\\\"M273.2 195.9h16.9M261.2 195.9h5\\\" stroke=\\\"#fff\\\"/><path d=\\\"M62.4 201.9v2.9M62.4 224.5v2.9\\\" stroke=\\\"#071F4D\\\"/><path d=\\\"m153.6 138.1 9.7-19.1M168.8 138.1l9.7-19.1M184.1 138.1l9.7-19.1M199.4 138.1l9.7-19.1M214.6 138.1l9.8-19.1M229.9 138.1l9.7-19.1\\\" stroke=\\\"#fff\\\"/><path d=\\\"M148.3 138.1h121.6V119H148.3v19.1Z\\\" stroke=\\\"#071F4D\\\"/></g></svg>',width:400,height:300,name:\\\"loading_pic\\\",positionType:IconPosition.left}},get expand(){return{type:\\\"svg\\\",svg:'<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\">\\\\n      <path d=\\\"M4.64988 6.81235C4.38797 6.48497 4.62106 6 5.04031 6L10.9597 6C11.3789 6 11.612 6.48497 11.3501 6.81235L8.39043 10.512C8.19027 10.7622 7.80973 10.7622 7.60957 10.512L4.64988 6.81235Z\\\" fill=\\\"#141414\\\" fill-opacity=\\\"0.65\\\"/>\\\\n      </svg>',width:16,height:16,funcType:IconFuncTypeEnum.expand,name:\\\"expand\\\",positionType:IconPosition.contentLeft,marginLeft:0,marginRight:4,hover:{width:22,height:22,bgColor:\\\"rgba(101, 117, 168, 0.1)\\\"},cursor:\\\"pointer\\\"}},get collapse(){return{type:\\\"svg\\\",svg:'<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\">\\\\n      <path d=\\\"M5.81235 11.3501C5.48497 11.612 5 11.3789 5 10.9597L5 5.04031C5 4.62106 5.48497 4.38797 5.81235 4.64988L9.51196 7.60957C9.76216 7.80973 9.76216 8.19027 9.51196 8.39044L5.81235 11.3501Z\\\" fill=\\\"#141414\\\" fill-opacity=\\\"0.65\\\"/>\\\\n      </svg>',width:16,height:16,funcType:IconFuncTypeEnum.collapse,name:\\\"collapse\\\",positionType:IconPosition.contentLeft,marginLeft:0,marginRight:4,hover:{width:22,height:22,bgColor:\\\"rgba(101, 117, 168, 0.1)\\\"},cursor:\\\"pointer\\\"}},get drillDown(){return{name:\\\"drillDown\\\",type:\\\"svg\\\",positionType:IconPosition.absolute,funcType:IconFuncTypeEnum.drillDown,svg:DrillDown,width:13,height:13,cursor:\\\"pointer\\\"}},get drillUp(){return{name:\\\"drillUp\\\",type:\\\"svg\\\",positionType:IconPosition.absolute,funcType:IconFuncTypeEnum.drillUp,svg:DrillUp,width:13,height:13,cursor:\\\"pointer\\\"}},get dragReorder(){return{type:\\\"svg\\\",svg:'<svg t=\\\"1710129136961\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"5166\\\" width=\\\"200\\\" height=\\\"200\\\"><path d=\\\"M362.666667 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z\\\" fill=\\\"#666666\\\" p-id=\\\"5167\\\"></path><path d=\\\"M661.333333 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z\\\" fill=\\\"#666666\\\" p-id=\\\"5168\\\"></path><path d=\\\"M362.666667 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z\\\" fill=\\\"#666666\\\" p-id=\\\"5169\\\"></path><path d=\\\"M661.333333 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z\\\" fill=\\\"#666666\\\" p-id=\\\"5170\\\"></path><path d=\\\"M362.666667 832m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z\\\" fill=\\\"#666666\\\" p-id=\\\"5171\\\"></path><path d=\\\"M661.333333 832m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z\\\" fill=\\\"#666666\\\" p-id=\\\"5172\\\"></path></svg>',width:20,height:20,funcType:IconFuncTypeEnum.dragReorder,positionType:IconPosition.left,name:\\\"dragReorder\\\",marginLeft:-10,marginRight:10,cursor:\\\"grab\\\"}}});function get3(){return extend(builtins,icons)}init_esbuild_inject();var Group2=class extends Group{clear(){this.removeAllChild()}getChildByName(i,e){let r=null;return this.forEachChildren(e=>e.name===i&&(r=e,!0)),e&&this.forEachChildren(e=>{if(e.getChildByName){var t=e.getChildByName(i,!0);if(t)return r=t,!0}return!1}),r}get width(){var e;let t=this.AABBBounds.width();return t!==1/0&&t!==-1/0||(t=0),Math.max(t,null!=(e=this.attribute.width)?e:0)}get height(){var e;let t=this.AABBBounds.height();return t!==1/0&&t!==-1/0||(t=0),Math.max(t,null!=(e=this.attribute.height)?e:0)}setDeltaWidth(e){var t;0!==e&&(this.setAttribute(\\\"width\\\",(null!=(t=this.attribute.width)?t:0)+e),this.border)&&(this.border.setAttribute(\\\"width\\\",this.border.attribute.width+e),\\\"group\\\"===this.border.type)&&this.border.firstChild.setAttribute(\\\"width\\\",this.border.firstChild.attribute.width+e)}setDeltaHeight(e){var t;0!==e&&(this.setAttribute(\\\"height\\\",(null!=(t=this.attribute.height)?t:0)+e),this.border)&&(this.border.setAttribute(\\\"height\\\",this.border.attribute.height+e),\\\"group\\\"===this.border.type)&&this.border.firstChild.setAttribute(\\\"width\\\",this.border.firstChild.attribute.height+e)}setDeltaX(e){0!==e&&this.setAttribute(\\\"x\\\",this.attribute.x+e)}setDeltaY(e){0!==e&&this.setAttribute(\\\"y\\\",this.attribute.y+e)}forEachChildrenSkipChild(i,r=\\\"border-rect\\\",e=!1){if(e){let e=this._lastChild,t=0;for(;e;){if(e.name!==r&&i(e,t++))return;e=e._prev}}else{let e=this._firstChild,t=0;for(;e;){if(e.name!==r&&i(e,t++))return;e=e._next}}}getColGroup(t){let i=this._firstChild;if(i)for(let e=0;e<this.childrenCount;e++){if(i.col===t)return i;i=i._next}return null}getRowGroup(t){let i=this._firstChild;if(i)for(let e=0;e<this.childrenCount;e++){if(i.row===t)return i;i=i._next}return null}addCellGroup(i){if(0!==this.childrenCount&&this.lastChild.row!==i.row-1){let e=this._firstChild;for(let t=0;t<this.childrenCount;t++){if(e.row===i.row-1)return void this.insertAfter(i,e);e=e._next}}this.addChild(i)}getChildAt(e){var t=super.getChildAt(e);return t&&\\\"border-rect\\\"===t.name?t._next:t}tryUpdateAABBBounds(){var e,t;return\\\"cell\\\"===this.role?this.shouldUpdateAABBBounds()?(e=this.shouldSelfChangeUpdateAABBBounds(),t=this.doUpdateAABBBounds(),this.addUpdateLayoutTag(),after(this,e),t):this._AABBBounds:super.tryUpdateAABBBounds()}doUpdateAABBBounds(){var e,t,i,r;return\\\"cell\\\"===this.role?(({x:e,y:t,width:i,height:r}=this.attribute),this._AABBBounds.setValue(e,t,e+i,t+r),this.parent&&this.parent.addChildUpdateBoundTag(),this.clearUpdateBoundTag(),this._AABBBounds):\\\"body\\\"===this.role||\\\"row-header\\\"===this.role||\\\"col-header\\\"===this.role||\\\"right-frozen\\\"===this.role||\\\"bottom-frozen\\\"===this.role||\\\"corner-header\\\"===this.role||\\\"corner-right-top-header\\\"===this.role||\\\"corner-right-bottom-header\\\"===this.role||\\\"corner-left-bottom-header\\\"===this.role?(this._AABBBounds.setValue(-1/0,-1/0,1/0,1/0),this.parent&&this.parent.addChildUpdateBoundTag(),this.clearUpdateBoundTag(),this._AABBBounds):super.doUpdateAABBBounds()}updateColumnRowNumber(e){this.rowNumber?this.rowNumber=Math.max(this.rowNumber,e):this.rowNumber=e}updateColumnHeight(e){this.colHeight?this.colHeight+=e:this.colHeight=e}};function after(e,t){e.stage.dirtyBounds&&e.stage&&e.stage.renderCount&&(e.isContainer&&!t||e.stage.dirty(e.globalAABBBounds))}function calcKeepAspectRatioSize(e,t,i,r){var n=e/t;let o,a,l,s;return i/r<n?(o=i,a=o/n,l=0,s=(r-a)/2):(a=r,o=a*n,s=0,l=(i-o)/2),{width:o,height:a}}function calcStartPosition(e,t,i,r,n,o,a=\\\"left\\\",l=\\\"middle\\\",s=[0,0,0,0],h=0,d=0,u=0,c=0){let g=e+s[3]+h,p=(\\\"right\\\"===a||\\\"end\\\"===a?g=e+i-n-s[1]-d:\\\"center\\\"===a&&(g=e+(i-n+h-d)/2),t+s[0]+u);return\\\"bottom\\\"===l||\\\"alphabetic\\\"===l||\\\"ideographic\\\"===l?p=t+r-o-s[2]-c:\\\"middle\\\"===l&&(p=t+(r-o+u-c)/2),{x:g,y:p}}function getProp2(e,t,i,r,n){var o=t&&isValid_default(t[e])?t[e]:void 0;return\\\"function\\\"==typeof o?o({col:i,row:r,table:n,value:n.getCellValue(i,r),dataValue:n.getCellOriginValue(i,r),cellHeaderPaths:n.getCellHeaderPaths(i,r)}):o}function getFunctionalProp(e,t,i,r,n){var o=t&&isValid_default(t[e])?t[e]:void 0;if(\\\"function\\\"==typeof o)return o({col:i,row:r,table:n,value:n.getCellValue(i,r),dataValue:n.getCellOriginValue(i,r),cellHeaderPaths:n.getCellHeaderPaths(i,r)})}function getCellBorderStrokeWidth(e,t,i,r){var n,o=style.toBoxArray(null!=(o=null==(o=r.internalProps.theme.frameStyle)?void 0:o.borderLineWidth)?o:[null]);let a=null!=(n=null==(n=null==i?void 0:i.group)?void 0:n.strokeArrayWidth)?n:void 0;return r.theme.cellInnerBorder||(0===e&&o[3]&&((a=null!=a?a:[null==(n=null==i?void 0:i.group)?void 0:n.lineWidth,null==(n=null==i?void 0:i.group)?void 0:n.lineWidth,null==(n=null==i?void 0:i.group)?void 0:n.lineWidth,null==(n=null==i?void 0:i.group)?void 0:n.lineWidth])[3]=0),e===r.colCount-1&&o[1]&&((a=null!=a?a:[null==(n=null==i?void 0:i.group)?void 0:n.lineWidth,null==(n=null==i?void 0:i.group)?void 0:n.lineWidth,null==(n=null==i?void 0:i.group)?void 0:n.lineWidth,null==(n=null==i?void 0:i.group)?void 0:n.lineWidth])[1]=0),0===t&&o[0]&&((a=null!=a?a:[null==(n=null==i?void 0:i.group)?void 0:n.lineWidth,null==(n=null==i?void 0:i.group)?void 0:n.lineWidth,null==(n=null==i?void 0:i.group)?void 0:n.lineWidth,null==(n=null==i?void 0:i.group)?void 0:n.lineWidth])[0]=0),t===r.rowCount-1&&o[2]&&((a=null!=a?a:[null==(n=null==i?void 0:i.group)?void 0:n.lineWidth,null==(o=null==i?void 0:i.group)?void 0:o.lineWidth,null==(n=null==i?void 0:i.group)?void 0:n.lineWidth,null==(o=null==i?void 0:i.group)?void 0:o.lineWidth])[2]=0)),a}function createImageCellGroup(e,t,i,r,n,o,a,l,s,h,d,u,c,g,p){var f,m=getFunctionalProp(\\\"padding\\\",c._getCellStyle(r,n),r,n,c),m=(isValid_default(m)&&(h=m),null!=(m=null==g?void 0:g.text)&&m.textAlign&&(d=null==(m=null==g?void 0:g.text)?void 0:m.textAlign),null!=(m=null==g?void 0:g.text)&&m.textBaseline&&(u=null==(m=null==g?void 0:g.text)?void 0:m.textBaseline),getCellBorderStrokeWidth(r,n,g,c));let b;p&&(b=c.scenegraph.highPerformanceGetCell(r,n,!0))&&\\\"cell\\\"===b.role&&b.setAttributes({x:t,y:i,width:o,height:a,lineWidth:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.lineWidth)?f:void 0,fill:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.fill)?f:void 0,stroke:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.stroke)?f:void 0,strokeArrayWidth:null!=m?m:void 0,strokeArrayColor:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.strokeArrayColor)?f:void 0,cursor:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.cursor)?f:void 0,lineDash:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.lineDash)?f:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:g.group.cornerRadius}),b&&\\\"cell\\\"===b.role||((b=new Group2({x:t,y:i,width:o,height:a,lineWidth:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.lineWidth)?f:void 0,fill:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.fill)?f:void 0,stroke:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.stroke)?f:void 0,strokeArrayWidth:null!=m?m:void 0,strokeArrayColor:null!=(m=null==(f=null==g?void 0:g.group)?void 0:f.strokeArrayColor)?m:void 0,cursor:null!=(m=null==(f=null==g?void 0:g.group)?void 0:f.cursor)?m:void 0,lineDash:null!=(m=null==(f=null==g?void 0:g.group)?void 0:f.lineDash)?m:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:g.group.cornerRadius})).role=\\\"cell\\\",b.col=r,b.row=n,null==e)||e.addCellGroup(b);const v=c.getCellValue(r,n),C=createImage({x:h[3],y:h[0],width:o-h[1]-h[3],height:a-h[0]-h[2],image:v,cursor:\\\"pointer\\\"});return C.name=\\\"image\\\",C.keepAspectRatio=l,C.textAlign=d,C.textBaseline=u,l||s?C.resources&&C.resources.has(C.attribute.image)&&\\\"success\\\"===C.resources.get(C.attribute.image).state?setTimeout(()=>{updateAutoSizingAndKeepAspectRatio(s,l,h,d,u,C,b,c)},0):C.successCallback=()=>{updateAutoSizingAndKeepAspectRatio(s,l,h,d,u,C,b,c),c.scenegraph.updateNextFrame()}:C.resources&&C.resources.has(C.attribute.image)&&\\\"success\\\"===C.resources.get(C.attribute.image).state?updateImageCellContentWhileResize(b,r,n,c):C.successCallback=()=>{updateImageCellContentWhileResize(b,r,n,c)},C.failCallback=()=>{var e=get3();C.image=e.damage_pic.svg},b.appendChild(C),b}function _adjustWidthHeight(t,i,e,r,n,o,a){let l=!1,s=null,h=null;var{width:d,height:u,isMerge:c}=getCellRange(a,n.table);if(d<e+o[1]+o[3]&&(s=e+o[1]+o[3],l=!0),u<r+o[2]+o[0]&&(h=r+o[2]+o[0],l=!0),l){if(\\\"number\\\"==typeof s)if(c)for(let e=a.mergeStartCol;e<=a.mergeEndCol;e++)n.setColWidth(e,s/(a.mergeEndCol-a.mergeStartCol+1));else n.setColWidth(t,s);if(\\\"number\\\"==typeof h)if(c)for(let e=a.mergeStartRow;e<=a.mergeEndRow;e++)n.setRowHeight(e,h/(a.mergeEndRow-a.mergeStartRow+1));else n.setRowHeight(i,h);return n.component.updateScrollBar(),!0}return!1}function updateImageCellContentWhileResize(e,t,i,r){var n=e.getChildByName(\\\"image\\\");if(n){var o=\\\"string\\\"!=typeof n.attribute.image&&n.attribute.image||(null==(o=n.resources)?void 0:o.get(n.attribute.image).data);if(o){var a=r._getCellStyle(t,i),l=null!=(l=getProp2(\\\"textAlign\\\",a,t,i,r))?l:\\\"left\\\",s=null!=(s=getProp2(\\\"textBaseline\\\",a,t,i,r))?s:\\\"middle\\\",h=null!=(a=getQuadProps(getProp2(\\\"padding\\\",a,t,i,r)))?a:[0,0,0,0],{width:d,height:u,isMerge:a}=getCellRange(e,r),c=null!=(c=e.mergeStartCol)?c:e.col,g=null!=(_=e.mergeStartRow)?_:e.row,p=null!=(_=e.mergeEndCol)?_:e.col,f=null!=(_=e.mergeEndCol)?_:e.row;if(n.keepAspectRatio){var{width:m,height:b}=calcKeepAspectRatioSize(o.width||o.videoWidth,o.height||o.videoHeight,d-(h[1]+h[3]),u-(h[0]+h[2])),v=calcStartPosition(0,0,d,u,m,b,l,s,h);for(let t=c;t<=p;t++)for(let e=g;e<=f;e++){var C=r.scenegraph.getCell(t,e).getChildByName(\\\"image\\\");null!=C&&C.setAttributes({x:v.x,y:v.y,width:m,height:b})}}else for(let t=c;t<=p;t++)for(let e=g;e<=f;e++){var y=r.scenegraph.getCell(t,e).getChildByName(\\\"image\\\");null!=y&&y.setAttributes({x:h[3],y:h[0],width:d-h[1]-h[3],height:u-h[0]-h[2]})}if(e.getChildByName(\\\"play-icon\\\")){var{width:_,height:o}=getCellRange(e,r),w=Math.floor(Math.min(_-h[1]-h[3],o-h[2]-h[0])/2),x=0+(_>n.attribute.width?+n.attribute.x+n.attribute.width/2:_/2),S=0+(o>n.attribute.height?+n.attribute.y+n.attribute.height/2:o/2);for(let t=c;t<=p;t++)for(let e=g;e<=f;e++)r.scenegraph.getCell(t,e).getChildByName(\\\"play-icon\\\").setAttributes({x:x-w/2,y:S-w/2,width:w,height:w})}a&&updateImageDxDy(e.mergeStartCol,e.mergeEndCol,e.mergeStartRow,e.mergeEndRow,r)}}}function getCellRange(e,t){return\\\"cell\\\"===e.role&&isValid_default(e.mergeStartCol)&&isValid_default(e.mergeEndCol)&&isValid_default(e.mergeStartRow)&&isValid_default(e.mergeEndRow)?{width:t.getColsWidth(e.mergeStartCol,e.mergeEndCol),height:t.getRowsHeight(e.mergeStartRow,e.mergeEndRow),isMerge:!0}:{width:e.attribute.width,height:e.attribute.height,isMerge:!1}}function updateImageDxDy(t,i,r,n,o){for(let s=t;s<=i;s++)for(let e=r;e<=n;e++){var a,l=o.scenegraph.getCell(s,e);l&&((a=l.getChildByName(\\\"image\\\"))&&a.setAttributes({dx:-o.getColsWidth(l.mergeStartCol,s-1),dy:-o.getRowsHeight(l.mergeStartRow,e-1)}),a=l.getChildByName(\\\"play-icon\\\"))&&a.setAttributes({dx:-o.getColsWidth(l.mergeStartCol,s-1),dy:-o.getRowsHeight(l.mergeStartRow,e-1)})}}function updateAutoSizingAndKeepAspectRatio(e,t,i,r,n,o,a,l){var s,h,d=o.resources.get(o.attribute.image).data,{col:u,row:c}=a;e&&!isDamagePic(o)&&_adjustWidthHeight(u,c,d.width,d.height,l.scenegraph,i,a),(t||isDamagePic(o))&&(({width:u,height:c,isMerge:s}=getCellRange(a,l)),({width:d,height:h}=calcKeepAspectRatioSize(d.width,d.height,u-i[1]-i[3],c-i[0]-i[2])),u=calcStartPosition(0,0,u,c,d,h,r,n,i),o.setAttributes({x:u.x,y:u.y,width:d,height:h}),s)&&updateImageDxDy(a.mergeStartCol,a.mergeEndCol,a.mergeStartRow,a.mergeEndRow,l)}function isDamagePic(e){var t=get3();return e.attribute.image===t.damage_pic.svg}function createProgressBarCell(t,e,r,i,n,o,a,D,l){t.dependField&&(n=null!=(c=null==(c=l.getCellOriginRecord(o,a))?void 0:c[t.dependField])?c:n),t.barType=null!=(c=t.barType)?c:\\\"default\\\",t.min=null!=(c=getOrApply(t.min,{col:o,row:a,table:l,value:i,dataValue:n,cellHeaderPaths:void 0}))?c:0,t.max=null!=(c=getOrApply(t.max,{col:o,row:a,table:l,value:i,dataValue:n,cellHeaderPaths:void 0}))?c:t.min+100;const s=l.getRowHeight(a);let h=r,d=s,u=0;isNumber_default(l.theme._contentOffset)&&(u=l.theme._contentOffset);var c=new Group2({x:-u,y:-u,width:h,height:d}),{showBar:g,barColor:p,barBgColor:f,barPositiveColor:m,barNegativeColor:b,barAxisColor:v,barRightToLeft:C,showBarMark:F,barMarkPositiveColor:O,barMarkNegativeColor:N,barMarkWidth:y,barMarkPosition:_}=(c.name=\\\"progress-bar\\\",e);let{barHeight:w,barBottom:x,barPadding:S}=e;1===S.length?S=[S[0],S[0],S[0],S[0]]:2===S.length?S=[S[0],S[1],S[0],S[1]]:3===S.length&&(S=[S[0],S[1],S[2],S[1]]),S=S.map((e,t)=>{var i;return\\\"string\\\"==typeof e&&str.endsWith(e,\\\"%\\\")?(i=Number(e.substr(0,e.length-1)),0===t||2===t?s*i/100:r*i/100):Number(e)});var A=getQuadProps(getProp2(\\\"borderLineWidth\\\",e,o,a,l)),T=Math.max(S[0],Math.ceil(A[0]/2)),R=Math.max(S[1],Math.floor(A[1]/2)),M=Math.max(S[2],Math.floor(A[2]/2)),A=Math.max(S[3],Math.ceil(A[3]/2)),R=(h-=R+A,d-=M+T,a===l.rowCount-1&&[0,\\\"0\\\"].includes(x)&&--d,T),M=A,T=h;if(w=\\\"string\\\"==typeof w&&str.endsWith(w,\\\"%\\\")?(w=Number(w.substr(0,w.length-1)),d*w/100):Number(w),x=\\\"string\\\"==typeof x&&str.endsWith(x,\\\"%\\\")?(x=Number(x.substr(0,x.length-1)),d*x/100):Number(x),getOrApply(g,{col:o,row:a,table:l,context:null,value:i,dataValue:n})){let e=\\\"\\\"+n;str.endsWith(e,\\\"%\\\")&&(e=e.substr(0,e.length-1));A=Number(e);if(isNaN(A))return c;if(\\\"default\\\"===(null!=(g=t.barType)?g:\\\"default\\\")){var g=A<t.min?0:A>t.max?1:(A-t.min)/(t.max-t.min),B=h,E=R+d-w-x;let e=Math.min(B*g,B);var P=C?M+T-e:M,L=(o===l.colCount-1&&1==g&&--e,getOrApply(f,{col:o,row:a,table:l,context:null,value:i,dataValue:n,percentile:g})),L=(L&&(B=createRect({x:P,y:E,width:B,height:w,fill:L}),c.addChild(B)),getOrApply(p,{col:o,row:a,table:l,context:null,value:i,dataValue:n,percentile:g})||\\\"#20a8d8\\\"),B=createRect({x:P,y:E,width:e,height:w,fill:L});c.addChild(B)}else if(\\\"negative\\\"===t.barType){var p=t.min<0?-t.min:0,g=0<t.max?t.max:0,P=p/(p+g),E=1-P,L=0<A?A/g:0,B=A<0?-A/p:0,g=h,p=R+d-w-x,k=M,H=getOrApply(f,{col:o,row:a,table:l,context:null,value:i,dataValue:n,percentile:L}),H=(H&&(H=createRect({x:k,y:p,width:g,height:w,fill:H}),c.addChild(H)),C?E*g:P*g),P=Math.min(g*P*B,g),P=C?{left:k+H,top:p,width:P,height:w}:{left:k+H-P,top:p,width:P,height:w},I=getOrApply(b,{col:o,row:a,table:l,context:null,value:i,dataValue:n,percentile:B})||\\\"#20a8d8\\\",I=createRect({x:P.left,y:P.top,width:P.width,height:P.height,fill:I});c.addChild(I);let e=Math.min(g*E*L,g);o===l.colCount-1&&1==L&&--e;I=C?{left:k+H-e,top:p,width:e,height:w}:{left:k+H,top:p,width:e,height:w},E=getOrApply(m,{col:o,row:a,table:l,context:null,value:i,dataValue:n,percentile:L})||\\\"#20a8d8\\\",g=createRect({x:I.left,y:I.top,width:I.width,height:I.height,fill:E}),k=(c.addChild(g),(C?P:I).left),H=createLine({x:0,y:0,stroke:getOrApply(v),lineWidth:1,lineDash:[2,2],points:[{x:k,y:0},{x:k,y:s}]});if(c.addChild(H),F&&(L||B)){p=y,E=[];let e;0<L?(e=getOrApply(O,{col:o,row:a,table:l,context:null,value:i,dataValue:n,percentile:L})||\\\"#20a8d8\\\",\\\"right\\\"===_?(E.push({x:g=C?I.left+y/2:I.left+I.width-y/2,y:I.top}),E.push({x:g,y:I.top+I.height})):\\\"bottom\\\"===_&&(E.push({x:I.left,y:I.top+I.height-y/2}),E.push({x:I.left+I.width,y:I.top+I.height-y/2}))):0<B&&(e=getOrApply(N,{col:o,row:a,table:l,context:null,value:i,dataValue:n,percentile:B})||\\\"#20a8d8\\\",\\\"right\\\"===_?(E.push({x:v=C?P.left+P.width-y/2:P.left+y/2,y:P.top}),E.push({x:v,y:P.top+P.height})):\\\"bottom\\\"===_&&(E.push({x:P.left,y:P.top+P.height-y/2}),E.push({x:P.left+P.width,y:P.top+P.height-y/2})));k=createLine({x:0,y:0,stroke:e,lineWidth:p,points:E});c.addChild(k)}}else if(\\\"negative_no_axis\\\"===t.barType){H=t.min<0?-t.min:0,L=0<t.max?t.max:0,g=Math.max(H,L),I=0===g?0:Math.abs(A)/g,B=h;let e=Math.min(B*I,B);o===l.colCount-1&&1==I&&--e;v=R+d-w-x,P=C?M+T-e:M,p=getOrApply(f,{col:o,row:a,table:l,context:null,value:i,dataValue:n,percentile:I}),k=(p&&(E=createRect({x:P,y:v,width:B,height:w,fill:p}),c.addChild(E)),{left:P,top:v,width:e,height:w}),H=0<=A?getOrApply(m,{col:o,row:a,table:l,context:null,value:i,percentile:I,dataValue:n})||\\\"#20a8d8\\\":getOrApply(b,{col:o,row:a,table:l,context:null,value:i,dataValue:n,percentile:I})||\\\"#20a8d8\\\",L=createRect({x:k.left,y:k.top,width:k.width,height:k.height,fill:H});c.addChild(L),F&&A&&(g=y,R=[],T=0<=A?getOrApply(O,{col:o,row:a,table:l,context:null,value:i,dataValue:n,percentile:I})||\\\"#20a8d8\\\":getOrApply(N,{col:o,row:a,table:l,context:null,value:i,dataValue:n,percentile:I})||\\\"#20a8d8\\\",\\\"right\\\"===_?(R.push({x:M=C?k.left+y/2:k.left+k.width-y/2,y:k.top}),R.push({x:M,y:k.top+k.height})):\\\"bottom\\\"===_&&(R.push({x:k.left,y:k.top+k.height-y/2}),R.push({x:k.left+k.width,y:k.top+k.height-y/2})),f=createLine({x:0,y:0,stroke:T,lineWidth:g,points:R}),c.addChild(f))}}return c}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var xScale=new PointScale,yScale=new LinearScale2;function createSparkLineCellGroup(e,t,i,r,n,o,a,l,s,h,d,u){e||(c=getCellBorderStrokeWidth(n,o,d,h),u&&(e=h.scenegraph.highPerformanceGetCell(n,o,!0))&&\\\"cell\\\"===e.role&&e.setAttributes({x:i,y:r,width:a,height:l,lineWidth:null!=(g=null==(g=null==d?void 0:d.group)?void 0:g.lineWidth)?g:void 0,fill:null!=(g=null==(g=null==d?void 0:d.group)?void 0:g.fill)?g:void 0,stroke:null!=(g=null==(g=null==d?void 0:d.group)?void 0:g.stroke)?g:void 0,strokeArrayWidth:c,strokeArrayColor:null!=(g=null==(g=null==d?void 0:d.group)?void 0:g.strokeArrayColor)?g:void 0,cursor:null!=(g=null==(g=null==d?void 0:d.group)?void 0:g.cursor)?g:void 0,lineDash:null!=(g=null==(g=null==d?void 0:d.group)?void 0:g.lineDash)?g:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:d.group.cornerRadius}),e&&\\\"cell\\\"===e.role)||((e=new Group2({x:i,y:r,width:a,height:l,lineWidth:null!=(g=null==(g=null==d?void 0:d.group)?void 0:g.lineWidth)?g:void 0,fill:null!=(g=null==(g=null==d?void 0:d.group)?void 0:g.fill)?g:void 0,stroke:null!=(g=null==(g=null==d?void 0:d.group)?void 0:g.stroke)?g:void 0,strokeArrayWidth:c,strokeArrayColor:null!=(c=null==(g=null==d?void 0:d.group)?void 0:g.strokeArrayColor)?c:void 0,cursor:null!=(c=null==(g=null==d?void 0:d.group)?void 0:g.cursor)?c:void 0,lineDash:null!=(c=null==(g=null==d?void 0:d.group)?void 0:g.lineDash)?c:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:d.group.cornerRadius})).role=\\\"cell\\\",e.col=n,e.row=o,null==t)||t.addCellGroup(e);var c,g=createSparkLine(n,o,a,l,s,h);return g&&e.appendChild(g),e}function createSparkLine(e,t,i,o,a,l){let s,h;var d=l.internalProps.layoutMap.getBody(e,t).sparklineSpec,u=l.getCellValue(e,t);if(Array.isArray(u)){var c,g=a[3],p=a[0],f=(i-=a[1]+a[3],o-=a[0]+a[2]),m=(h=\\\"function\\\"==typeof d?(c={col:e,row:t,dataValue:l.getCellOriginValue(e,t)||\\\"\\\",value:l.getCellValue(e,t)||\\\"\\\",rect:l.getCellRangeRelativeRect(l.getCellRange(e,t)),table:l},createChartGroup(s=d(c),g,p,i,o)):createChartGroup(s=d,g,p,i,o),[]),b=[];let r,n;if(\\\"object\\\"==typeof s.xField?(xScale.domain(s.xField.domain),r=s.xField.field):\\\"string\\\"==typeof s.xField?(c=u.map(e=>e[s.xField]),xScale.domain(c),r=s.xField):Array.isArray(u)&&(xScale.domain(Array.from({length:u.length},(e,t)=>t)),r=s.xField),xScale.range([0,i]),\\\"object\\\"==typeof s.yField?(yScale.domain(s.yField.domain),n=s.yField.field):\\\"string\\\"==typeof s.yField?(d=u.map(e=>e[s.yField]),yScale.domain([Math.min(...d),Math.max(...d)]),n=s.yField):Array.isArray(u)&&u.every(e=>\\\"number\\\"==typeof e)&&(yScale.domain([Math.min(...u),Math.max(...u)]),n=s.yField),yScale.range([0,o]),\\\"object\\\"==typeof s.xField&&Array.isArray(s.xField.domain)){var v=u.map(e=>e[s.xField.field]),C=s.xField.domain;for(let i=0;i<C.length;i++){let e=!1;for(let t=0;t<v.length;t++)if(C[i]==v[t]){var y=u[t];if(!isValid_default(y[r])||!isValid_default(y[n]))break;m.push({x:0+xScale.scale(y[r]),y:f-yScale.scale(y[n]),defined:isValid_default(y[n])}),b.push(y),e=!0;break}e||(m.push({x:0+xScale.scale(C[i]),y:0,defined:!1}),b.push({[r]:C[i],[n]:null}))}}else for(let e=0;e<u.length;e++){var _=u[e];m.push({x:0+xScale.scale(r?_[r]:e),y:f-yScale.scale(n?_[n]:_),defined:isValid_default(n?_[n]:_),rawData:_}),b.push(_)}var g=h.getChildByName(\\\"sparkline-line\\\"),w=(g&&g.setAttribute(\\\"points\\\",m),g.bandwidth=xScale.step(),g.min=yScale.range()[0],g.max=yScale.range()[1],h.getChildByName(\\\"sparkline-symbol-group\\\"));if(w){p=\\\"isolatedPoint\\\"===s.pointShowRule;if(\\\"all\\\"===s.pointShowRule)for(let e=0;e<m.length;e++){var{x,y:S,defined:A}=m[e];A&&(A=createSymbol({x:x,y:S}),w.appendChild(A))}else if(p)for(let e=0;e<m.length;e++){var{x:T,y:R,defined:M}=m[e];!M||m[e-1]&&m[e-1].defined||m[e+1]&&m[e+1].defined||(M=createSymbol({x:T,y:R}),w.appendChild(M))}}return h}}function createChartGroup(e,t,i,r,n){var o,a,l=\\\"function\\\"==typeof e?e(null):e,s=new Group2({x:t,y:i,width:r,height:n,stroke:!1,fill:!1});return s.name=\\\"sparkline\\\",\\\"line\\\"===l.type&&((a=createLine({x:0,y:0,curveType:l.smooth?\\\"monotoneX\\\":\\\"linear\\\",stroke:null!=(a=null==(a=null==(a=l.line)?void 0:a.style)?void 0:a.stroke)?a:\\\"blue\\\",lineWidth:null!=(a=null==(a=null==(a=l.line)?void 0:a.style)?void 0:a.strokeWidth)?a:2})).name=\\\"sparkline-line\\\",s.addChild(a),l.crosshair&&(a.hover=null!=(a=null==(a=l.crosshair)?void 0:a.style)?a:{stroke:\\\"#000\\\",interpolate:\\\"linear\\\"}),(a=new Group2({x:0,y:0,width:r,height:n,stroke:!1,fill:!1})).name=\\\"sparkline-symbol-group\\\",a.setTheme({symbol:{stroke:null!=(o=null==(o=null==(o=l.point)?void 0:o.style)?void 0:o.stroke)?o:\\\"#000\\\",lineWidth:null!=(o=null==(o=null==(o=l.point)?void 0:o.style)?void 0:o.strokeWidth)?o:1,fill:null!=(o=null==(o=null==(o=l.point)?void 0:o.style)?void 0:o.fill)?o:\\\"#000\\\",size:2*(null!=(o=null==(o=null==(o=l.point)?void 0:o.style)?void 0:o.size)?o:3),symbolType:\\\"circle\\\"}}),s.addChild(a),a.hover=null!=(a=null==(o=l.point)?void 0:o.hover)&&a),s}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var CHART_NUMBER_TYPE=genNumberType(),Chart=class DE1 extends Group{constructor(e,t){var i;super(t),this.type=\\\"chart\\\",this.numberType=CHART_NUMBER_TYPE,this.isShareChartSpec=e,t.chartInstance?this.chartInstance=t.chartInstance:((i=new t.ClassType(t.spec,{renderCanvas:t.canvas,mode:\\\"node\\\"===this.attribute.mode?\\\"node\\\":\\\"desktop-browser\\\",modeParams:this.attribute.modeParams,canvasControled:!1,viewBox:{x1:0,x2:0,y1:0,y2:0},dpr:t.dpr,interactive:!1,animation:!1,autoFit:!1})).renderSync(),t.chartInstance=this.chartInstance=i)}activate(i){var e,t;this.active=!0;const{col:r,row:n}=this.parent,{x1:o,y1:a,x2:l,y2:s}=this.getViewBox(),h=getTableBounds(r,n,i).intersect({x1:o-i.scrollLeft,x2:l-i.scrollLeft,y1:a-i.scrollTop,y2:s-i.scrollTop});this.activeChartInstance=new this.attribute.ClassType(this.attribute.spec,{renderCanvas:this.attribute.canvas,mode:\\\"desktop-browser\\\",canvasControled:!1,viewBox:{x1:o-i.scrollLeft,x2:l-i.scrollLeft,y1:a-i.scrollTop,y2:s-i.scrollTop},dpr:i.internalProps.pixelRatio,animation:!1,interactive:!0,autoFit:!1,beforeRender:e=>{var t=e.window.getContext();t.inuse=!0,t.clearMatrix(),t.setTransformForCurrent(!0),t.beginPath(),t.rect(h.x1,h.y1,h.x2-h.x1,h.y2-h.y1),t.clip()},afterRender(e){e.window.getContext().inuse=!1}}),this.activeChartInstance.renderSync(),null!=(e=null==(t=i.internalProps.layoutMap)?void 0:t.updateDataStateToActiveChartInstance)&&e.call(t,this.activeChartInstance),this.activeChartInstance.on(\\\"click\\\",e=>{DE1.temp&&i.scenegraph.updateChartState(null==e?void 0:e.datum)}),this.activeChartInstance.on(\\\"brushEnd\\\",e=>{var t;i.scenegraph.updateChartState(null==(t=null==e?void 0:e.value)?void 0:t.inBrushData),DE1.temp=0,setTimeout(()=>{DE1.temp=1},0)}),null!=(t=i._bindChartEvent)&&t.call(i,this.activeChartInstance)}deactivate(){var e;this.active=!1,null!=(e=this.activeChartInstance)&&e.updateViewBox({x1:-1e3,x2:-800,y1:-1e3,y2:-800},!1,!1),null!=(e=this.activeChartInstance)&&e.release(),this.activeChartInstance=null}updateData(e){this.attribute.data=e}getViewBox(){var e=this.parent,t=this.attribute.cellPadding,i=this.stage.table;return{x1:Math.ceil(e.globalAABBBounds.x1+t[3]+i.scrollLeft),x2:Math.ceil(e.globalAABBBounds.x1+e.attribute.width-t[1]+i.scrollLeft),y1:Math.ceil(e.globalAABBBounds.y1+t[0]+i.scrollTop),y2:Math.ceil(e.globalAABBBounds.y1+e.attribute.height-t[2]+i.scrollTop)}}};function getTableBounds(e,t,i){var r=i.internalProps[\\\"layoutMap\\\"],n=new Bounds,o=i.scenegraph.tableGroup.globalAABBBounds;return n.x1=o.x1,n.x2=o.x2,n.y1=o.y1,n.y2=o.y2,r.isFrozenColumn(e,t)||r.isRightFrozenColumn(e,t)?r.isLeftBottomCorner(e,t)||r.isRightTopCorner(e,t)||(r.isFrozenColumn(e,t)||r.isRightFrozenColumn(e,t)?(n.y1=o.y1+i.getFrozenRowsHeight(),n.y2=o.y2-i.getBottomFrozenRowsHeight()):r.isBottomFrozenRow(e,t)&&(n.x1=o.x1+i.getFrozenColsWidth(),n.x2=o.x2-i.getRightFrozenColsWidth())):(n.x1=o.x1+i.getFrozenColsWidth(),n.x2=o.x2-i.getRightFrozenColsWidth(),n.y1=o.y1+i.getFrozenRowsHeight(),n.y2=o.y2-i.getBottomFrozenRowsHeight()),n}Chart.temp=1,init_esbuild_inject(),init_esbuild_inject();var chartTypes={},builtin2={};function get4(){return extend(builtin2,chartTypes)}function createChartCellGroup(e,t,i,r,n,o,a,l,s,h,d,u,c,g,p,f,m,b){var v,C=get4()[d],y=getFunctionalProp(\\\"padding\\\",p._getCellStyle(n,o),n,o,p),y=(isValid_default(y)&&(s=y),e||(y=getCellBorderStrokeWidth(n,o,f,p),b&&(e=p.scenegraph.highPerformanceGetCell(n,o,!0))&&\\\"cell\\\"===e.role&&e.setAttributes({x:i,y:r,width:a,height:l,lineWidth:null!=(v=null==(v=null==f?void 0:f.group)?void 0:v.lineWidth)?v:void 0,fill:null!=(v=null==(v=null==f?void 0:f.group)?void 0:v.fill)?v:void 0,stroke:null!=(v=null==(v=null==f?void 0:f.group)?void 0:v.stroke)?v:void 0,strokeArrayWidth:y,strokeArrayColor:null!=(v=null==(v=null==f?void 0:f.group)?void 0:v.strokeArrayColor)?v:void 0,cursor:null!=(v=null==(v=null==f?void 0:f.group)?void 0:v.cursor)?v:void 0,lineDash:null!=(v=null==(v=null==f?void 0:f.group)?void 0:v.lineDash)?v:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:f.group.cornerRadius}),e&&\\\"cell\\\"===e.role)||((e=new Group2({x:i,y:r,width:a,height:l,lineWidth:null!=(v=null==(v=null==f?void 0:f.group)?void 0:v.lineWidth)?v:void 0,fill:null!=(v=null==(v=null==f?void 0:f.group)?void 0:v.fill)?v:void 0,stroke:null!=(v=null==(v=null==f?void 0:f.group)?void 0:v.stroke)?v:void 0,strokeArrayWidth:y,strokeArrayColor:null!=(y=null==(v=null==f?void 0:f.group)?void 0:v.strokeArrayColor)?y:void 0,cursor:null!=(y=null==(v=null==f?void 0:f.group)?void 0:v.cursor)?y:void 0,lineDash:null!=(y=null==(v=null==f?void 0:f.group)?void 0:v.lineDash)?y:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:f.group.cornerRadius})).role=\\\"cell\\\",e.col=n,e.row=o,null==t)||t.addCellGroup(e),e.AABBBounds.width(),new Chart(m,{stroke:!1,x:s[3],y:s[0],canvas:null!=(v=p.canvas)?v:p.scenegraph.stage.window.getContext().canvas,mode:p.options.mode,modeParams:p.options.modeParams,spec:u,ClassType:C,width:a-s[3]-s[1],height:l-s[2]-s[0],chartInstance:c,dataId:g,data:p.getCellValue(n,o),cellPadding:s,dpr:p.internalProps.pixelRatio,axes:p.isPivotChart()?p.internalProps.layoutMap.getChartAxes(n,o):[]}));return e.appendChild(y),p.internalProps.layoutMap.setChartInstance(n,o,y.chartInstance),e}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var CellContent=class extends Group2{constructor(e){super(e),this._autoWidth=!1,this._autoHeight=!1,this._leftGroup=new Group2({pickable:!1,fill:!1,stroke:!1}),this._leftGroup.role=\\\"content-left\\\",this._rightGroup=new Group2({pickable:!1,fill:!1,stroke:!1}),this._rightGroup.role=\\\"content-right\\\",this._centerGroup=new Group2({pickable:!1,fill:!1,stroke:!1}),this._centerGroup.role=\\\"content-center\\\",this.appendChild(this._leftGroup),this.appendChild(this._rightGroup),this.appendChild(this._centerGroup)}setCellContentOption(e){this._autoWidth=e.autoWidth,this._autoHeight=e.autoHeight,this._cellWidth=e.cellWidth,this._originCellWidth=e.cellWidth,this._cellHeight=e.cellHeight,this._align=e.align,this._baseline=e.baseline}addLeftOccupyingIcon(e){var t;e.setAttribute(\\\"x\\\",this._leftGroup.width+(null!=(t=e.attribute.marginLeft)?t:0)),this._leftGroup.appendChild(e),this._leftGroup.setDeltaWidth((null!=(t=e.attribute.marginLeft)?t:0)+(null!=(t=e.attribute.marginRight)?t:0)+e.attribute.width)}addRightOccupyingIcon(e){var t;e.setAttribute(\\\"x\\\",this._rightGroup.width+(null!=(t=e.attribute.marginLeft)?t:0)),this._rightGroup.appendChild(e),this._rightGroup.setDeltaWidth((null!=(t=e.attribute.marginLeft)?t:0)+(null!=(t=e.attribute.marginRight)?t:0)+e.attribute.width)}addContent(e){var t=this._centerGroup.lastChild;t&&e.setAttributes({x:t.attribute.x+t.AABBBounds.width()}),this._centerGroup.appendChild(e),e instanceof Text&&(this._centerGroup.setAttribute(\\\"pickable\\\",!1),e.setAttribute(\\\"textAlign\\\",\\\"left\\\"))}layout(){let e=this._leftGroup.width,t=(e===1/0&&(e=0),this._rightGroup.width);t===-1/0&&(t=0),this._autoWidth?(i=this._centerGroup.width,this._cellWidth=e+t+i):(i=this._cellWidth-e-t,this.updateCenterLayout(i),i=this._centerGroup.width,this._cellWidth=e+t+i),this.setAttribute(\\\"width\\\",this._cellWidth),this.updateHorizontalPos();var i=this._leftGroup.height,r=this._rightGroup.height,n=this._centerGroup.height;this._cellHeight=Math.max(i,r,n),this.setAttribute(\\\"height\\\",this._cellHeight),this.updateVerticalPos()}updateCenterLayout(e){let t=e;this._centerGroup.forEachChildren(e=>{e instanceof Icon&&(t-=e.AABBBounds.width())});var i=this._centerGroup.getChildByName(\\\"text\\\");i instanceof RichText?i.setAttribute(\\\"width\\\",t):i instanceof Text&&i.setAttribute(\\\"maxLineWidth\\\",t);let r=0;this._centerGroup.forEachChildren(e=>{e.setAttribute(\\\"x\\\",r),r+=e.AABBBounds.width()})}updateHorizontalPos(){this._leftGroup.setAttribute(\\\"x\\\",0),this._rightGroup.setAttribute(\\\"x\\\",this._cellWidth-this._rightGroup.width),this._centerGroup.setAttribute(\\\"x\\\",this._leftGroup.width),\\\"left\\\"===this._align||\\\"start\\\"===this._align?this.setAttribute(\\\"dx\\\",0):\\\"center\\\"===this._align?this.setAttribute(\\\"dx\\\",-this.attribute.width/2):\\\"right\\\"!==this._align&&\\\"end\\\"!==this._align||this.setAttribute(\\\"dx\\\",-this.attribute.width)}updateVerticalPos(){\\\"top\\\"===this._baseline?(this._leftGroup.setAttribute(\\\"y\\\",0),this._rightGroup.setAttribute(\\\"y\\\",0),this._centerGroup.setAttribute(\\\"y\\\",0)):\\\"middle\\\"===this._baseline?(this._leftGroup.forEachChildren(e=>{e.setAttribute(\\\"y\\\",(this._leftGroup.height-e.AABBBounds.height())/2)}),this._rightGroup.forEachChildren(e=>{e.setAttribute(\\\"y\\\",(this._rightGroup.height-e.AABBBounds.height())/2)}),this._leftGroup.setAttribute(\\\"y\\\",this._cellHeight/2-this._leftGroup.height/2),this._rightGroup.setAttribute(\\\"y\\\",this._cellHeight/2-this._rightGroup.height/2),this._centerGroup.setAttribute(\\\"y\\\",this._cellHeight/2-this._centerGroup.height/2)):\\\"bottom\\\"===this._baseline&&(this._leftGroup.forEachChildren(e=>{e.setAttribute(\\\"y\\\",this._leftGroup.height-e.AABBBounds.height())}),this._rightGroup.forEachChildren(e=>{e.setAttribute(\\\"y\\\",this._rightGroup.height-e.AABBBounds.height())}),this._leftGroup.setAttribute(\\\"y\\\",this._cellHeight-this._leftGroup.height),this._rightGroup.setAttribute(\\\"y\\\",this._cellHeight-this._rightGroup.height),this._centerGroup.setAttribute(\\\"y\\\",this._cellHeight-this._centerGroup.height))}updateWidth(e){this._cellWidth=e,this._originCellWidth=e,this.layout()}updateHeight(e){this._cellHeight=e,this._cellWidth=this._originCellWidth,this.layout()}};function getHierarchyOffset(e,t,i){let r=0;var n,o=i.internalProps.layoutMap;return o.isHeader(e,t)?(n=o.getHeader(e,t),isValid_default(null==n?void 0:n.hierarchyLevel)&&(r=(null!=(n=n.hierarchyLevel)?n:0)*(null!=(n=o.rowHierarchyIndent)?n:0),o.rowHierarchyTextStartAlignment)&&!i.internalProps.headerHelper.getHierarchyIcon(e,t)&&(r+=i.internalProps.headerHelper.getHierarchyIconWidth())):null!=(n=i.getBodyColumnDefine(e,t))&&n.tree&&(n=i.dataSource.getIndexKey(i.getRecordShowIndexByCell(e,t)),r=Array.isArray(n)&&i.getHierarchyState(e,t)!==HierarchyState.none?(n.length-1)*(null!=(n=o.hierarchyIndent)?n:0):0,o.hierarchyTextStartAlignment)&&!i.internalProps.bodyHelper.getHierarchyIcon(e,t)&&(r+=i.internalProps.bodyHelper.getHierarchyIconWidth()),r}function breakString(e,t){for(var i,r=t.internalProps.enableLineBreak||null!=(i=t.options.customConfig)&&i.multilinesForXTable?convertInternal(e).replace(/\\\\r?\\\\n/g,\\\"\\\\n\\\").replace(/\\\\r/g,\\\"\\\\n\\\").split(\\\"\\\\n\\\")||[]:[convertInternal(e)];r.length&&!r[r.length-1];)r.pop();return r}function createCellContent(r,e,i,n,o,a,l,s,h,d,u,c,g,p,f){const m=[],b=[],v=[],C=[],y=[],_=[],w=[];let x,S,A=0,T=0,R=0,M=0,B=0,E=0;if(Array.isArray(e)&&0!==e.length){let t;if(e.forEach(e=>{switch(e.positionType){case IconPosition.left:m.push(e);break;case IconPosition.right:b.push(e);break;case IconPosition.contentLeft:v.push(e);break;case IconPosition.contentRight:C.push(e);break;case IconPosition.absoluteRight:w.push(e);break;case IconPosition.inlineFront:y.push(e);break;case IconPosition.inlineEnd:_.push(e)}}),m.forEach(e=>{var t,i=dealWithIcon(e,void 0,r.col,r.row,f,g);i.role=\\\"icon-left\\\",i.name=e.name,i.setAttribute(\\\"x\\\",A+(null!=(t=i.attribute.marginLeft)?t:0)),A+=i.AABBBounds.width()+(null!=(t=i.attribute.marginLeft)?t:0)+(null!=(t=i.attribute.marginRight)?t:0),T=Math.max(T,i.AABBBounds.height()),r.appendChild(i)}),b.forEach(e=>{var t,i=dealWithIcon(e,void 0,r.col,r.row,f,g);i.role=\\\"icon-right\\\",i.name=e.name,i.setAttribute(\\\"x\\\",R+(null!=(t=i.attribute.marginLeft)?t:0)),R+=i.AABBBounds.width()+(null!=(t=i.attribute.marginLeft)?t:0)+(null!=(t=i.attribute.marginRight)?t:0),M=Math.max(M,i.AABBBounds.height()),r.appendChild(i)}),[].forEach(e=>{var t,i=dealWithIcon(e,void 0,r.col,r.row,f,g);i.role=\\\"icon-absolute-left\\\",i.name=e.name,i.setAttribute(\\\"x\\\",B+(null!=(t=i.attribute.marginLeft)?t:0)),B+=i.AABBBounds.width()+(null!=(t=i.attribute.marginLeft)?t:0)+(null!=(t=i.attribute.marginRight)?t:0),r.appendChild(i)}),w.forEach(e=>{var t,i=dealWithIcon(e,void 0,r.col,r.row,f,g);i.role=\\\"icon-absolute-right\\\",i.name=e.name,i.setAttribute(\\\"x\\\",E+(null!=(t=i.attribute.marginLeft)?t:0)),E+=i.AABBBounds.width()+(null!=(t=i.attribute.marginLeft)?t:0)+(null!=(t=i.attribute.marginRight)?t:0),r.appendChild(i)}),0===y.length&&0===_.length){let e=0;isNumber_default(g.theme._contentOffset)&&(\\\"left\\\"===u?e=g.theme._contentOffset:\\\"right\\\"===u&&(e=-g.theme._contentOffset));var P=f?getHierarchyOffset(f.start.col,f.start.row,g):getHierarchyOffset(r.col,r.row,g),L=breakString(i,g),k={text:1===L.length?L[0]:L,maxLineWidth:o?1/0:h-(n[1]+n[3])-A-R-P,textBaseline:\\\"top\\\",heightLimit:!a||null!=(k=g.options.customConfig)&&k.multilinesForXTable?d-(n[0]+n[2]):-1,pickable:!1,autoWrapText:l,lineClamp:s,wordBreak:\\\"break-word\\\",whiteSpace:1!==L.length||l?\\\"normal\\\":\\\"no-wrap\\\",dx:(\\\"left\\\"!==u||v.length||C.length?0:P)+e},L=new Text(p.text?Object.assign({},p.text,k):k);L.name=\\\"text\\\",t=L}else{P=Object.assign({text:null==i?void 0:i.toString()},(null==(L=null==(k=null==(P=r.parent)?void 0:P.theme)?void 0:k.userTheme)?void 0:L.text)||{}),k=(p.text&&Object.assign(P,p.text),P.textBaseline=\\\"middle\\\",[...y.map(e=>dealWithRichTextIcon(e)),P,..._.map(e=>dealWithRichTextIcon(e))]),L=(k[0].textAlign=u,new RichText({width:o?0:h-(n[1]+n[3])-A-R,height:a&&l?0:Math.ceil(d-(n[0]+n[2])),textConfig:k,verticalDirection:a&&l?\\\"top\\\":c,ellipsis:P.ellipsis}));L.name=\\\"text\\\",(t=L).bindIconEvent()}if(0!==v.length||0!==C.length){const I=new CellContent({x:0,y:0,fill:!1,stroke:!1});I.name=\\\"content\\\",I.setCellContentOption({autoWidth:o,autoHeight:a,cellWidth:h-(n[1]+n[3])-A-R,cellHeight:d-(n[0]+n[2]),align:u,baseline:c}),v.forEach(e=>{var t=dealWithIcon(e,void 0,r.col,r.row,f,g);t.role=\\\"icon-content-left\\\",t.name=e.name,I.addLeftOccupyingIcon(t)}),C.forEach(e=>{var t=dealWithIcon(e,void 0,r.col,r.row,f,g);t.role=\\\"icon-content-right\\\",t.name=e.name,I.addRightOccupyingIcon(t)}),I.addContent(t),r.appendChild(I),I.layout(),x=I.AABBBounds.width(),S=I.AABBBounds.height()}else r.firstChild?r.insertBefore(t,r.firstChild):r.appendChild(t),x=t.AABBBounds.width(),S=t.AABBBounds.height()}else if(isValid_default(i)){k=breakString(i,g),P=f?getHierarchyOffset(f.start.col,f.start.row,g):getHierarchyOffset(r.col,r.row,g);let e=0;isNumber_default(g.theme._contentOffset)&&(\\\"left\\\"===u?e=g.theme._contentOffset:\\\"right\\\"===u&&(e=-g.theme._contentOffset));L={text:1===k.length?k[0]:k,maxLineWidth:o?1/0:h-(n[1]+n[3]+P),textBaseline:\\\"top\\\",autoWrapText:l,lineClamp:s,wordBreak:\\\"break-word\\\",heightLimit:!a||null!=(L=g.options.customConfig)&&L.multilinesForXTable?d-(n[0]+n[2]):-1,pickable:!1,dx:(\\\"left\\\"===u?P:0)+e,whiteSpace:1!==k.length||l?\\\"normal\\\":\\\"no-wrap\\\"},P=new Text(p.text?Object.assign({},p.text,L):L);P.name=\\\"text\\\",P.textBaseline=c,r.appendChild(P),x=P.AABBBounds.width(),S=P.AABBBounds.height()}const t=o?A+x+R:h-(n[1]+n[3]),H=d-(n[0]+n[2]);r.forEachChildren(e=>{\\\"icon-left\\\"===e.role?e.setAttribute(\\\"x\\\",e.attribute.x+n[3]):\\\"icon-right\\\"===e.role?e.setAttribute(\\\"x\\\",e.attribute.x+t-R+n[3]):\\\"icon-absolute-right\\\"===e.role?e.setAttribute(\\\"x\\\",e.attribute.x+t-E+n[3]+n[1]):\\\"content\\\"!==e.name&&\\\"text\\\"!==e.name||(\\\"center\\\"===u&&\\\"richtext\\\"!==e.type?e.setAttribute(\\\"x\\\",n[3]+A+(t-A-R)/2):\\\"right\\\"===u&&\\\"richtext\\\"!==e.type?e.setAttribute(\\\"x\\\",n[3]+t-R):e.setAttribute(\\\"x\\\",n[3]+A))}),r.forEachChildren(e=>{\\\"middle\\\"===c?e.setAttribute(\\\"y\\\",n[0]+(H-e.AABBBounds.height())/2):\\\"bottom\\\"===c?e.setAttribute(\\\"y\\\",n[0]+H-e.AABBBounds.height()):e.setAttribute(\\\"y\\\",n[0])}),r.setAttributes({width:t+n[1]+n[3],height:H+n[0]+n[2]})}function dealWithIcon(e,t,i,r,n,o){var a,l={};\\\"image\\\"===e.type?l.image=e.src:(\\\"svg\\\"===e.type||\\\"svg\\\"in e)&&(l.image=e.svg),l.width=e.width,l.height=e.height,l.visibleTime=null!=(a=e.visibleTime)?a:\\\"always\\\",l.funcType=e.funcType,l.interactive=e.interactive;let s=0;return isNumber_default(i)&&isNumber_default(r)&&o&&(e.funcType===IconFuncTypeEnum.collapse||e.funcType===IconFuncTypeEnum.expand)&&(s=n?getHierarchyOffset(n.start.col,n.start.row,o):getHierarchyOffset(i,r,o)),l.marginLeft=(null!=(a=e.marginLeft)?a:0)+s,l.marginRight=null!=(a=e.marginRight)?a:0,!1===e.interactive&&(l.pickable=!1),e.hover&&(l.backgroundWidth=null!=(a=e.hover.width)?a:e.width,l.backgroundHeight=null!=(a=e.hover.width)?a:e.width,l.backgroundColor=null!=(a=e.hover.bgColor)?a:\\\"rgba(22,44,66,0.2)\\\",l.hoverImage=e.hover.image),e.cursor&&(l.cursor=e.cursor),\\\"shape\\\"in e&&\\\"circle\\\"===e.shape&&(l.shape=e.shape),t?(t.setAttributes(l),t.loadImage(l.image),t):((a=new Icon(l)).tooltip=e.tooltip,a)}function dealWithRichTextIcon(e){var t,i={};return\\\"image\\\"===e.type?i.image=e.src:(\\\"svg\\\"===e.type||\\\"svg\\\"in e)&&(i.image=e.svg),i.visibleTime=null!=(t=e.visibleTime)?t:\\\"always\\\",i.funcType=e.funcType,i.id=e.name,i.width=e.width,i.height=e.height,(e.marginRight||e.marginLeft)&&(i.margin=[0,null!=(t=e.marginRight)?t:0,0,null!=(t=e.marginLeft)?t:0]),e.hover&&(i.backgroundWidth=null!=(t=e.hover.width)?t:e.width,i.backgroundHeight=null!=(t=e.hover.height)?t:e.height,i.backgroundShowMode=\\\"hover\\\",i.hoverImage=e.hover.image,i.backgroundStroke=!1,i.backgroundFill=null!=(t=e.hover.bgColor)?t:\\\"rgba(22,44,66,0.2)\\\"),e.cursor&&(i.cursor=e.cursor),i.tooltip=e.tooltip,i}function updateCellContentWidth(i,r,n,o,e,a,l,s,h){let t,d=0,u=0,c=0,g=0;i.forEachChildren(e=>{\\\"icon-left\\\"===e.role?(d+=e.AABBBounds.width(),u=Math.max(u,e.AABBBounds.height())):\\\"icon-right\\\"===e.role&&(c+=e.AABBBounds.width(),g=Math.max(g,e.AABBBounds.height()))});var p=i.getChildByName(\\\"text\\\"),f=i.getChildByName(\\\"content\\\");let m;p instanceof Text?(t=p.AABBBounds.height(),p.setAttribute(\\\"maxLineWidth\\\",r-d-g-(a[1]+a[3])-(null!=(b=p.attribute.dx)?b:0)),m=p.AABBBounds.height()):p instanceof RichText?(t=p.AABBBounds.height(),p.setAttribute(\\\"width\\\",r-d-g-(a[1]+a[3])),m=p.AABBBounds.height()):f&&(t=f.AABBBounds.height(),f.updateWidth(r-d-g-(a[1]+a[3])),m=f.AABBBounds.height());var b=Math.round(Math.max(u,g,t)+a[0]+a[2]);if(i.forEachChildren(e=>{var t;\\\"icon-left\\\"!==e.role&&(\\\"icon-right\\\"===e.role||\\\"icon-absolute-right\\\"===e.role?e.setAttribute(\\\"x\\\",e.attribute.x+o):\\\"content\\\"===e.name||\\\"text\\\"===e.name?\\\"center\\\"===(t=null!=(t=e.attribute.textAlign)?t:l)?e.setAttribute(\\\"x\\\",a[3]+d+(r-(a[1]+a[3])-d-c)/2):\\\"right\\\"===t&&e.setAttribute(\\\"x\\\",a[3]+r-(a[1]+a[3])-c):\\\"mark\\\"===e.name&&e.setAttribute(\\\"x\\\",i.attribute.width))}),e){let t=Math.max(u,m,g);if(isCellHeightUpdate(h,i,t+a[0]+a[2],b))return!0;t=(null!=(p=i.contentHeight)?p:n)-(a[0]+a[2]),i.forEachChildren(e=>{\\\"rect\\\"!==e.type&&\\\"chart\\\"!==e.type&&(\\\"mark\\\"===e.name?e.setAttribute(\\\"y\\\",0):\\\"middle\\\"===s?e.setAttribute(\\\"y\\\",a[0]+(t-e.AABBBounds.height())/2):\\\"bottom\\\"===s?e.setAttribute(\\\"y\\\",a[0]+t-e.AABBBounds.height()):e.setAttribute(\\\"y\\\",a[0]))})}else\\\"middle\\\"!==s&&\\\"bottom\\\"!==s||i.forEachChildren(e=>{\\\"rect\\\"!==e.type&&\\\"chart\\\"!==e.type&&(\\\"mark\\\"===e.name?e.setAttribute(\\\"y\\\",0):\\\"middle\\\"===s?e.setAttribute(\\\"y\\\",(n-a[2]+a[0]-e.AABBBounds.height())/2):\\\"bottom\\\"===s?e.setAttribute(\\\"y\\\",n-e.AABBBounds.height()-a[2]):e.setAttribute(\\\"y\\\",a[0]))});return!1}function updateCellContentHeight(e,t,i,r,n,o,a){const l=t-(n[0]+n[2]),s=e.getChildByName(\\\"text\\\");s instanceof Text&&!r?s.setAttributes({heightLimit:l}):s instanceof RichText&&!r?s.setAttributes({height:l}):e.getChildByName(\\\"content\\\")&&e.getChildByName(\\\"content\\\").updateHeight(l),e.forEachChildren(e=>{e.setAttribute(\\\"dy\\\",0),\\\"rect\\\"!==e.type&&\\\"chart\\\"!==e.type&&(\\\"mark\\\"===e.name?e.setAttribute(\\\"y\\\",0):\\\"middle\\\"===a?e.setAttribute(\\\"y\\\",n[0]+(l-e.AABBBounds.height())/2):\\\"bottom\\\"===a?e.setAttribute(\\\"y\\\",n[0]+l-e.AABBBounds.height()):e.setAttribute(\\\"y\\\",n[0]))})}function isCellHeightUpdate(e,t,i,r){var n=e.table,o=getCellMergeInfo(n,t.col,t.row);if(o&&o.end.row-o.start.row){r/=o.end.row-o.start.row+1,i/=o.end.row-o.start.row+1;for(let e=o.start.row;e<=o.end.row;e++){var a=n.getRowHeight(e);if(a===r&&i!==a)return!0;if(a<i)return!0}}else{var l=n.getRowHeight(t.row);if(l===r&&i!==l)return!0;if(l<i)return!0}return!1}function createCellGroup(r,e,t,i,n,o,a,l,s,h,d,u,c,g,p,f,m,b,v){var C=r._getCellStyle(o,a),y=getFunctionalProp(\\\"padding\\\",C,o,a,r),y=(isValid_default(y)&&(d=y),null!=(y=null==m?void 0:m.text)&&y.textAlign&&(u=null==(y=null==m?void 0:m.text)?void 0:y.textAlign),null!=(y=null==m?void 0:m.text)&&y.textBaseline&&(c=null==(y=null==m?void 0:m.text)?void 0:y.textBaseline),r.isAutoRowHeight(a)),_=\\\"auto\\\"===l,w=null!=(w=C.autoWrapText)?w:r.internalProps.autoWrapText,C=C.lineClamp,x=getCellBorderStrokeWidth(o,a,m,r);let S;if(v&&(S=r.scenegraph.getCell(o,a,!0))&&\\\"cell\\\"===S.role&&S.setAttributes({x:i,y:n,width:s,height:h,lineWidth:null!=(A=null==(A=null==m?void 0:m.group)?void 0:A.lineWidth)?A:void 0,fill:null!=(A=null==(A=null==m?void 0:m.group)?void 0:A.fill)?A:void 0,stroke:null!=(A=null==(A=null==m?void 0:m.group)?void 0:A.stroke)?A:void 0,strokeArrayWidth:null!=x?x:void 0,strokeArrayColor:null!=(A=null==(A=null==m?void 0:m.group)?void 0:A.strokeArrayColor)?A:void 0,cursor:null!=(A=null==(A=null==m?void 0:m.group)?void 0:A.cursor)?A:void 0,lineDash:null!=(A=null==(A=null==m?void 0:m.group)?void 0:A.lineDash)?A:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:m.group.cornerRadius}),S&&\\\"cell\\\"===S.role||((S=new Group2({x:i,y:n,width:s,height:h,lineWidth:null!=(A=null==(A=null==m?void 0:m.group)?void 0:A.lineWidth)?A:void 0,fill:null!=(A=null==(A=null==m?void 0:m.group)?void 0:A.fill)?A:void 0,stroke:null!=(A=null==(A=null==m?void 0:m.group)?void 0:A.stroke)?A:void 0,strokeArrayWidth:null!=x?x:void 0,strokeArrayColor:null!=(x=null==(A=null==m?void 0:m.group)?void 0:A.strokeArrayColor)?x:void 0,cursor:null!=(x=null==(A=null==m?void 0:m.group)?void 0:A.cursor)?x:void 0,lineDash:null!=(x=null==(A=null==m?void 0:m.group)?void 0:A.lineDash)?x:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:m.group.cornerRadius})).role=\\\"cell\\\",S.col=o,S.row=a,null==t)||t.addCellGroup(S),p&&S.appendChild(p),f){var A=e;let i;if(g){let e=o,t=a;b&&(e=b.start.col,t=b.start.row),i=r.getCellIcons(e,t)}createCellContent(S,i,A,d,_,y,w,\\\"number\\\"==typeof C?C:void 0,s,h,u,c,r,m,b),null!=(x=null==m?void 0:m._vtable)&&x.marked&&((A=createArc({x:S.attribute.width,y:0,startAngle:Math.PI/2,endAngle:Math.PI,outerRadius:6,fill:\\\"#3073F2\\\",pickable:!1})).name=\\\"mark\\\",S.appendChild(A))}return p&&S.setAttributes({width:Math.max(S.attribute.width,null!=(_=p.attribute.width)?_:0),height:Math.max(S.attribute.height,null!=(y=p.attribute.height)?y:0)}),S}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var regedIcons=get3();function createVideoCellGroup(e,t,i,a,l,r,n,s,h,d,u,c,g,o,p){var f,m=getFunctionalProp(\\\"padding\\\",g._getCellStyle(a,l),a,l,g),m=(isValid_default(m)&&(d=m),null!=(m=null==o?void 0:o.text)&&m.textAlign&&(u=null==(m=null==o?void 0:o.text)?void 0:m.textAlign),null!=(m=null==o?void 0:o.text)&&m.textBaseline&&(c=null==(m=null==o?void 0:o.text)?void 0:m.textBaseline),getCellBorderStrokeWidth(a,l,o,g));let b;p&&(b=g.scenegraph.highPerformanceGetCell(a,l,!0))&&\\\"cell\\\"===b.role&&b.setAttributes({x:t,y:i,width:r,height:n,lineWidth:null!=(f=null==(f=null==o?void 0:o.group)?void 0:f.lineWidth)?f:void 0,fill:null!=(f=null==(f=null==o?void 0:o.group)?void 0:f.fill)?f:void 0,stroke:null!=(f=null==(f=null==o?void 0:o.group)?void 0:f.stroke)?f:void 0,strokeArrayWidth:m,strokeArrayColor:null!=(f=null==(f=null==o?void 0:o.group)?void 0:f.strokeArrayColor)?f:void 0,cursor:null!=(f=null==(f=null==o?void 0:o.group)?void 0:f.cursor)?f:void 0,lineDash:null!=(f=null==(f=null==o?void 0:o.group)?void 0:f.lineDash)?f:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:o.group.cornerRadius}),b&&\\\"cell\\\"===b.role||((b=new Group2({x:t,y:i,width:r,height:n,lineWidth:null!=(f=null==(f=null==o?void 0:o.group)?void 0:f.lineWidth)?f:void 0,fill:null!=(f=null==(f=null==o?void 0:o.group)?void 0:f.fill)?f:void 0,stroke:null!=(f=null==(f=null==o?void 0:o.group)?void 0:f.stroke)?f:void 0,strokeArrayWidth:m,strokeArrayColor:null!=(m=null==(f=null==o?void 0:o.group)?void 0:f.strokeArrayColor)?m:void 0,cursor:null!=(m=null==(f=null==o?void 0:o.group)?void 0:f.cursor)?m:void 0,lineDash:null!=(m=null==(f=null==o?void 0:o.group)?void 0:f.lineDash)?m:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:o.group.cornerRadius})).role=\\\"cell\\\",b.col=a,b.row=l,null==e)||e.addCellGroup(b);const v=g.getCellValue(a,l),C=document.createElement(\\\"video\\\"),y=(C.addEventListener(\\\"loadeddata\\\",()=>{h&&_adjustWidthHeight(a,l,C.videoWidth,C.videoHeight,g.scenegraph,d,b);var{width:e,height:t,isMerge:i}=getCellRange(b,g),{width:r,height:n}=(s?(({width:r,height:n}=calcKeepAspectRatioSize(C.videoWidth,C.videoHeight,e-d[1]-d[3],t-d[0]-d[2])),o=calcStartPosition(0,0,e,t,r,n,u,c,d),y.setAttributes({width:r,height:n,x:o.x,y:o.y,dx:0})):y.setAttributes({x:d[3],y:d[0],width:e-d[1]-d[3],height:t-d[2]-d[0],dy:0}),i&&updateImageDxDy(b.mergeStartCol,b.mergeEndCol,b.mergeStartRow,b.mergeEndRow,g),getCellRange(b,g)),o=Math.floor(Math.min(r-d[1]-d[3],n-d[2]-d[0])/2),e=0+(r>y.attribute.width?+y.attribute.x+y.attribute.width/2:r/2),t=0+(n>y.attribute.height?+y.attribute.y+y.attribute.height/2:n/2),i=new Icon({x:e-o/2,y:t-o/2,width:o,height:o,image:regedIcons.play.svg,cursor:regedIcons.play.cursor});i.name=\\\"play-icon\\\",b.appendChild(i),g.scenegraph.updateNextFrame()}),C.onerror=()=>{y.image=regedIcons.damage_pic.svg},C.src=v,C.setAttribute(\\\"preload\\\",\\\"auto\\\"),createImage({x:d[3],y:d[0],width:r-d[1]-d[3],height:n-d[2]-d[0],image:C,cursor:\\\"pointer\\\"}));return y.name=\\\"image\\\",y.keepAspectRatio=s,y.textAlign=u,y.textBaseline=c,b.appendChild(y),b}function dealPromiseData(e,t,i){e.then(()=>{i(),t.scenegraph.updateNextFrame()})[\\\"catch\\\"](e=>{})}function createCheckboxCellGroup(e,t,i,r,n,o,a,l,s,h,d,u,c,g,p,f){e||(m=getCellBorderStrokeWidth(n,o,g,c),f&&(e=c.scenegraph.highPerformanceGetCell(n,o,!0))&&\\\"cell\\\"===e.role&&e.setAttributes({x:i,y:r,width:l,height:s,lineWidth:null!=(b=null==(b=null==g?void 0:g.group)?void 0:b.lineWidth)?b:void 0,fill:null!=(b=null==(b=null==g?void 0:g.group)?void 0:b.fill)?b:void 0,stroke:null!=(b=null==(b=null==g?void 0:g.group)?void 0:b.stroke)?b:void 0,strokeArrayWidth:m,strokeArrayColor:null!=(b=null==(b=null==g?void 0:g.group)?void 0:b.strokeArrayColor)?b:void 0,cursor:null!=(b=null==(b=null==g?void 0:g.group)?void 0:b.cursor)?b:void 0,lineDash:null!=(b=null==(b=null==g?void 0:g.group)?void 0:b.lineDash)?b:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:g.group.cornerRadius}),e&&\\\"cell\\\"===e.role)||((e=new Group2({x:i,y:r,width:l,height:s,lineWidth:null!=(b=null==(b=null==g?void 0:g.group)?void 0:b.lineWidth)?b:void 0,fill:null!=(b=null==(b=null==g?void 0:g.group)?void 0:b.fill)?b:void 0,stroke:null!=(b=null==(b=null==g?void 0:g.group)?void 0:b.stroke)?b:void 0,strokeArrayWidth:m,strokeArrayColor:null!=(m=null==(b=null==g?void 0:g.group)?void 0:b.strokeArrayColor)?m:void 0,cursor:null!=(m=null==(b=null==g?void 0:g.group)?void 0:b.cursor)?m:void 0,lineDash:null!=(m=null==(b=null==g?void 0:g.group)?void 0:b.lineDash)?m:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:g.group.cornerRadius})).role=\\\"cell\\\",e.col=n,e.row=o,null==t)||t.addCellGroup(e);var m,b=createCheckbox(n,o,a,l,s,h,g,p,c);return b&&e.appendChild(b),b.render(),l-=h[1]+h[3],s-=h[0]+h[2],\\\"center\\\"===d?b.setAttribute(\\\"x\\\",h[3]+(l-b.AABBBounds.width())/2):\\\"right\\\"===d?b.setAttribute(\\\"x\\\",h[3]+l-b.AABBBounds.width()):b.setAttribute(\\\"x\\\",h[3]),\\\"middle\\\"===u?b.setAttribute(\\\"y\\\",h[0]+(s-b.AABBBounds.height())/2):\\\"bottom\\\"===u?b.setAttribute(\\\"y\\\",h[0]+s-b.AABBBounds.height()):b.setAttribute(\\\"y\\\",h[0]),e}function createCheckbox(e,t,i,r,n,o,a,l,s){var h=s._getCellStyle(e,t),d=getProp2(\\\"size\\\",h,e,t,s),u=getProp2(\\\"spaceBetweenTextAndIcon\\\",h,e,t,s),c=getProp2(\\\"defaultFill\\\",h,e,t,s),g=getProp2(\\\"defaultStroke\\\",h,e,t,s),p=getProp2(\\\"disableFill\\\",h,e,t,s),f=getProp2(\\\"checkedFill\\\",h,e,t,s),m=getProp2(\\\"checkedStroke\\\",h,e,t,s),b=getProp2(\\\"disableCheckedFill\\\",h,e,t,s),v=getProp2(\\\"disableCheckedStroke\\\",h,e,t,s),C=getProp2(\\\"checkIconImage\\\",h,e,t,s),h=getProp2(\\\"indeterminateIconImage\\\",h,e,t,s),y=s.getCellValue(e,t),_=s.getCellOriginValue(e,t);let w,x,S=null!=(A=y)?A:\\\"\\\";isObject_default(y)?(w=y.checked,x=y.disable,S=null!=(A=y.text)?A:\\\"\\\"):\\\"boolean\\\"==typeof y&&(w=y,S=\\\"\\\"),w=s.stateManager.syncCheckedState(e,t,l.field,w);var A=getHierarchyOffset(e,t,s),T=s._getCellStyle(e,t),R=null!=(R=T.autoWrapText)?R:s.internalProps.autoWrapText,T=T[\\\"lineClamp\\\"],{checked:M,disable:B}=l,M=(null!=w&&\\\"function\\\"!=typeof w||(M=getOrApply(M,{col:e,row:t,table:s,context:null,value:y,dataValue:_}),w=s.stateManager.syncCheckedState(e,t,l.field,M)),getOrApply(B,{col:e,row:t,table:s,context:null,value:y,dataValue:_})),B=\\\"auto\\\"===i,y=s.isAutoRowHeight(t),_={text:1===S.length?S[0]:S,maxLineWidth:B?1/0:r-(o[1]+o[3]+A)-d-u,textBaseline:\\\"top\\\",autoWrapText:R,lineClamp:T,wordBreak:\\\"break-word\\\",heightLimit:y?-1:n-(o[0]+o[2]),pickable:!1,dx:A,whiteSpace:1!==S.length||R?\\\"normal\\\":\\\"no-wrap\\\"},T={x:0,y:0,text:a.text?Object.assign({},a.text,_):_,icon:{width:Math.floor(d/1.4),height:Math.floor(d/1.4)},box:{width:d,height:d},spaceBetweenTextAndIcon:u,disabled:null!=(B=null!=x?x:M)&&B},y=(\\\"indeterminate\\\"===w?(T.checked=void 0,T.indeterminate=!0):(T.checked=w,T.indeterminate=void 0),c&&(T.box.fill=c),g&&(T.box.stroke=g),p&&(T.box.disableFill=p),f&&(T.box.checkedFill=f),m&&(T.box.checkedStroke=m),b&&(T.box.disableCheckedFill=b),v&&(T.box.disableCheckedStroke=v),C&&(T.icon.checkIconImage=C),h&&(T.icon.indeterminateIconImage=h),new CheckBox(T));return y.name=\\\"checkbox\\\",y}function createRadioCellGroup(e,t,i,r,n,o,a,l,s,h,d,u,c,g,p){var f,m;e||(m=getCellBorderStrokeWidth(n,o,g,c),(e=new Group2({x:i,y:r,width:l,height:s,lineWidth:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.lineWidth)?f:void 0,fill:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.fill)?f:void 0,stroke:null!=(f=null==(f=null==g?void 0:g.group)?void 0:f.stroke)?f:void 0,strokeArrayWidth:m,strokeArrayColor:null!=(m=null==(f=null==g?void 0:g.group)?void 0:f.strokeArrayColor)?m:void 0,cursor:null!=(m=null==(f=null==g?void 0:g.group)?void 0:f.cursor)?m:void 0,lineDash:null!=(m=null==(f=null==g?void 0:g.group)?void 0:f.lineDash)?m:void 0,lineCap:\\\"butt\\\",clip:!0,cornerRadius:g.group.cornerRadius})).role=\\\"cell\\\",e.col=n,e.row=o,null!=t&&t.addCellGroup(e));const{width:b,height:v}=createRadio(n,o,a,l,s,h,g,p,e,c);return l-=h[1]+h[3],s-=h[0]+h[2],e.forEachChildren(e=>{\\\"center\\\"===d?e.setAttribute(\\\"x\\\",h[3]+e.attribute.x+(l-b)/2):\\\"right\\\"===d?e.setAttribute(\\\"x\\\",h[3]+e.attribute.x+l-b):e.setAttribute(\\\"x\\\",h[3]+e.attribute.x),\\\"middle\\\"===u?e.setAttribute(\\\"y\\\",h[0]+e.attribute.y+(s-v)/2):\\\"bottom\\\"===u?e.setAttribute(\\\"y\\\",h[0]+e.attribute.y+s-v):e.setAttribute(\\\"y\\\",h[0]+e.attribute.y)}),e}function createRadio(n,o,e,t,i,r,a,l,s,h){var d=h._getCellStyle(n,o);let u=getProp2(\\\"size\\\",d,n,o,h),c=getProp2(\\\"innerRadius\\\",d,n,o,h),g=getProp2(\\\"outerRadius\\\",d,n,o,h);const p=getProp2(\\\"spaceBetweenTextAndIcon\\\",d,n,o,h),f=getProp2(\\\"spaceBetweenRadio\\\",d,n,o,h),m=getProp2(\\\"defaultFill\\\",d,n,o,h),b=getProp2(\\\"defaultStroke\\\",d,n,o,h),v=getProp2(\\\"disableFill\\\",d,n,o,h),C=getProp2(\\\"checkedFill\\\",d,n,o,h),y=getProp2(\\\"checkedStroke\\\",d,n,o,h),_=getProp2(\\\"disableCheckedFill\\\",d,n,o,h),w=getProp2(\\\"disableCheckedStroke\\\",d,n,o,h),x=(isNumber_default(g)?u=2*g:g=Math.round(u/2),(!isNumber_default(c)||c<0)&&(c=Math.round(g/7*3)),h.getCellValue(n,o)),S=h.getCellOriginValue(n,o),A=getHierarchyOffset(n,o,h),T=h._getCellStyle(n,o),R=null!=(d=T.autoWrapText)?d:h.internalProps.autoWrapText,M=T[\\\"lineClamp\\\"],B=\\\"auto\\\"===e,E=\\\"autoHeight\\\"===h.heightMode,P={maxLineWidth:B?1/0:t-(r[1]+r[3]+A)-u-p,textBaseline:\\\"top\\\",autoWrapText:R,lineClamp:M,wordBreak:\\\"break-word\\\",heightLimit:E?-1:i-(r[0]+r[2]),pickable:!1,dx:A},L={x:0,y:0,text:a.text?Object.assign({},a.text,P):P,circle:{innerRadius:c,outerRadius:g},spaceBetweenTextAndIcon:p};m&&(L.circle.fill=m),b&&(L.circle.stroke=b),v&&(L.circle.disableFill=v),C&&(L.circle.checkedFill=C),y&&(L.circle.checkedStroke=y),_&&(L.circle.disableCheckedFill=_),w&&(L.circle.disableCheckedStroke=w);let k=0,H=0;const I=null!=(d=l.radioDirectionInCell)?d:\\\"vertical\\\";return isArray_default(x)?x.forEach((e,t)=>{var i=createSingleRadio(e,S,t,n,o,l,R,L,h),r=(i&&s.appendChild(i),i.id=`radio-${n}-${o}-`+t,i.render(),i.AABBBounds);\\\"vertical\\\"===I?(i.setAttribute(\\\"y\\\",H),H+=r.height()+(t!==x.length-1?f:0),k=Math.max(k,r.width())):\\\"horizontal\\\"===I&&(i.setAttribute(\\\"x\\\",k),k+=r.width()+(t!==x.length-1?f:0),H=Math.max(H,r.height()))}):((d=createSingleRadio(x,S,void 0,n,o,l,R,L,h))&&s.appendChild(d),d.id=`radio-${n}-`+o,d.render(),d=d.AABBBounds,k=d.width(),H=d.height()),{width:k,height:H}}function createSingleRadio(e,t,i,r,n,o,a,l,s){var h=getChecked(e,t,i,r,n,o,s),d=getDisable(e,t,r,n,o,s),u=isObject_default(e)?e.text:!isBoolean_default(e)&&null!=e?e:\\\"\\\",h=merge({},l,{checked:h,disabled:d,text:{text:1===u.length?u[0]:u,whiteSpace:1!==u.length||a?\\\"normal\\\":\\\"no-wrap\\\"},boundsPadding:0}),d=new Radio(h);return d.name=\\\"radio\\\",d}function getChecked(e,t,i,r,n,o,a){var l=null!=(l=o.radioCheckType)?l:\\\"column\\\";let s,h;return isObject_default(e)?s=e.checked:\\\"boolean\\\"==typeof e&&(s=e),null!=(s=a.stateManager.syncRadioState(r,n,o.field,l,i,s))&&\\\"function\\\"!=typeof s||(h=getOrApply(o.checked,{col:r,row:n,table:a,context:null,value:e,dataValue:t}),s=a.stateManager.syncRadioState(r,n,o.field,l,i,h)),null!=(l=null!=s?s:h)&&l}function getDisable(e,t,i,r,n,o){let a;isObject_default(e)&&(a=e.disable);var l=getOrApply(n.disable,{col:i,row:r,table:o,context:null,value:e,dataValue:t});return null!=(l=null!=a?a:l)&&l}function createCell(e,t,n,o,a,l,s,h,d,u,c,g,p,f,m,b,v,C){let y,_=!1;if(isPromise(t)&&(t=o.getCellValue(a,l),_=!0),\\\"text\\\"===e||\\\"link\\\"===e){\\\"link\\\"===e&&(w=t,x=o._getCellStyle(a,l),\\\"link\\\"!==e||!(\\\"templateLink\\\"in n&&n.templateLink)&&\\\"linkDetect\\\"in n&&n.linkDetect&&!regUrl.test(w)||(b?(b.text.fill=getProp2(\\\"linkColor\\\",x,a,l,o),b.group.cursor=\\\"pointer\\\"):b={text:{fill:getProp2(\\\"linkColor\\\",x,a,l,o)},group:{cursor:\\\"pointer\\\"}}));let i,r=!0;if(C)i=C.elementsGroup,r=C.renderDefault;else{let e,t;((t=\\\"body\\\"!==o.getCellLocation(a,l)?(e=null==n?void 0:n.headerCustomRender,null==n?void 0:n.headerCustomLayout):(e=(null==n?void 0:n.customRender)||o.customRender,null==n?void 0:n.customLayout))||e)&&(w=dealWithCustom(t,e,a,l,h,d,!1,o.isAutoRowHeight(l),g,o),i=w.elementsGroup,r=w.renderDefault)}y=createCellGroup(o,t,u,0,c,a,l,s,h,d,g,p,f,m,i,r,b,v,_);var w,x=o.internalProps.layoutMap.getAxisConfigInPivotChart(a,l);x?(w=new CartesianAxis(x,y.attribute.width,y.attribute.height,g,o),y.clear(),y.appendChild(w.component),w.overlap()):o.internalProps.layoutMap.isEmpty(a,l)?(y.setAttributes({fill:!1,stroke:!1}),y.clear()):o.internalProps.layoutMap.isAxisCell(a,l)&&y.clear()}else\\\"image\\\"===e?y=createImageCellGroup(u,0,c,a,l,h,d,n.keepAspectRatio,n.imageAutoSizing,g,p,f,o,b,_):\\\"video\\\"===e?y=createVideoCellGroup(u,0,c,a,l,h,d,n.keepAspectRatio,n.imageAutoSizing,g,p,f,o,b,_):\\\"chart\\\"===e?(x=o.internalProps.layoutMap.getChartInstance(a,l),y=createChartCellGroup(null,u,0,c,a,l,h,d,g,t,n.chartModule,o.internalProps.layoutMap.getChartSpec(a,l),x,null!=(w=o.internalProps.layoutMap.getChartDataId(a,l))?w:\\\"data\\\",o,b,o.internalProps.layoutMap.isShareChartSpec(a,l),_)):\\\"progressbar\\\"===e?(x=o._getCellStyle(a,l),w=o.getCellOriginValue(a,l),y=createCellGroup(o,t,u,0,c,a,l,s,h,d,g,p,f,!1,null,!0,b,v,_),x=createProgressBarCell(n,x,s,t,w,a,l,g,o),y.firstChild?y.insertBefore(x,y.firstChild):y.appendChild(x)):\\\"sparkline\\\"===e?y=createSparkLineCellGroup(null,u,0,c,a,l,h,d,g,o,b,_):\\\"checkbox\\\"===e?y=createCheckboxCellGroup(null,u,0,c,a,l,s,h,d,g,p,f,o,b,n,_):\\\"radio\\\"===e&&(y=createRadioCellGroup(null,u,0,c,a,l,s,h,d,g,p,f,o,b,n));return y}function updateCell(r,n,o,a){var l=o.scenegraph.highPerformanceGetCell(r,n,!0),e=o._getCellStyle(r,n),s=null!=(s=e.autoWrapText)?s:o.internalProps.autoWrapText,h=o.getCellLocation(r,n);let d,u,c,g,p=o.getCellValue(r,n),t=(o.internalProps.customMergeCell&&(w=o.getCustomMerge(r,n))&&(({range:w,text:b,style:v,customLayout:x,customRender:f}=w),u=w,d=u.start.col!==u.end.col||u.start.row!==u.end.row,p=b,v&&((c=getStyleTheme(v,o,u.start.col,u.start.row,getProp2).theme).group.cornerRadius=getCellCornerRadius(r,n,o)),x||f)&&(g=dealWithCustom(x,f,w.start.col,w.start.row,o.getColsWidth(w.start.col,w.end.col),o.getRowsHeight(w.start.row,w.end.row),!1,o.isAutoRowHeight(n),[0,0,0,0],o)),r),i=n;u&&(t=u.start.col,i=u.start.row);var f,m,b=\\\"body\\\"!==h?o.getHeaderDefine(t,i):o.getBodyColumnDefine(t,i);if(!u&&(\\\"body\\\"!==h||null!=b&&b.mergeCell)&&(u=o.getCellRange(r,n),d=u.start.col!==u.end.col||u.start.row!==u.end.row),(c=c||getStyleTheme(e,o,d?u.start.col:r,d?u.start.row:n,getProp2).theme).group.cornerRadius=getCellCornerRadius(r,n,o),!a&&!d&&canUseFastUpdate(r,n,l,s,o))return v=o.getColWidth(r),x=o.getRowHeight(n),l.setAttributes({width:v,height:x,lineWidth:null!=(w=null==(f=null==c?void 0:c.group)?void 0:f.lineWidth)?w:void 0,fill:null!=(w=null==(f=null==c?void 0:c.group)?void 0:f.fill)?w:void 0,stroke:null!=(w=null==(f=null==c?void 0:c.group)?void 0:f.stroke)?w:void 0,strokeArrayWidth:null!=(w=null==(f=null==c?void 0:c.group)?void 0:f.strokeArrayWidth)?w:void 0,strokeArrayColor:null!=(w=null==(f=null==c?void 0:c.group)?void 0:f.strokeArrayColor)?w:void 0,cursor:null!=(w=null==(f=null==c?void 0:c.group)?void 0:f.cursor)?w:void 0,cornerRadius:null!=(w=null==(f=null==c?void 0:c.group)?void 0:f.cornerRadius)?w:0,y:o.scenegraph.getCellGroupY(n)}),l.forEachChildren(e=>{e.setAttributes({dx:0,dy:0})}),(f=l.getChildByName(\\\"text\\\"))&&(w=breakString(o.getCellValue(r,n),o),y=getHierarchyOffset(r,n,o),m=e.lineClamp,e=null!=(e=getQuadProps(getProp2(\\\"padding\\\",e,r,n,o)))?e:[0,0,0,0],_=0,_=\\\"center\\\"===(C=c.text.textAlign)?e[3]+(v-(e[1]+e[3]))/2:\\\"right\\\"===C?e[3]+v-(e[1]+e[3]):e[3],w={text:1!==w.length||s?w:w[0],maxLineWidth:v-(e[1]+e[3]+y),textBaseline:\\\"top\\\",autoWrapText:s,lineClamp:m,wordBreak:\\\"break-word\\\",heightLimit:x-(e[0]+e[2]),pickable:!1,dx:\\\"left\\\"===C?y:0,x:_},f.setAttributes(c.text?Object.assign({},c.text,w):w),f.attribute.text)&&(v=c.text.textBaseline,s=x-(e[0]+e[2]),m=0,m=\\\"middle\\\"===v?e[0]+(s-f.AABBBounds.height())/2:\\\"bottom\\\"===v?e[0]+s-f.AABBBounds.height():e[0],f.setAttributes({y:m})),l;if(a||\\\"empty\\\"!==l.role){var v,C=o.isHeader(r,n)?o._getHeaderLayoutMap(r,n).headerType:o.getBodyColumnType(r,n),y=\\\"body\\\"!==h||(null==b?void 0:b.dragOrder)||!(null==b||!b.icon)||!(null==b||!b.tree),_=c._vtable.padding,w=c.text.textAlign,x=c.text.textBaseline;let e,t,i;return i=u?(t=o.getColsWidth(u.start.col,u.end.col),o.getRowsHeight(u.start.row,u.end.row)):(t=o.getColWidth(r),o.getRowHeight(n)),isPromise(p)?(l.removeAllChild(),dealPromiseData(p,o,updateCellContent.bind(null,C,p,b,o,r,n,t,i,l,_,w,x,y,a,c,u,g))):e=updateCellContent(C,p,b,o,r,n,t,i,l,_,w,x,y,a,c,u,g),d&&(v=e.attribute[\\\"width\\\"],s=e.attribute[\\\"height\\\"],e.contentWidth=v,e.contentHeight=s,dealWithMergeCellSize(u,t,i,_,w,x,o)),e}}function updateCellContent(e,t,i,r,n,o,a,l,s,h,d,u,c,g,p,f,m){var b,v;return isPromise(t)&&(t=r.getCellValue(n,o)),g||s.row===o&&s.col===n?(v=createCell(e,t,i,r,n,o,r.getColWidth(n),a,l,g?r.scenegraph.getColGroup(n):s.parent,g?0:r.scenegraph.getCellGroupY(o),h,d,u,c,p,f,m),!g&&s.parent&&(s.parent.insertAfter(v,s),s.parent.removeChild(s),null!=(b=r.scenegraph))&&b.proxy.cellCache.get(n)&&null!=(b=r.scenegraph)&&b.proxy.cellCache.set(n,v),v):null}function canUseFastUpdate(e,t,i,r,n){var o=n.getBodyColumnDefine(e,t),o=!(null==o||!o.icon)||!(null==o||!o.tree)||(null==o?void 0:o.dragOrder),a=n.getBodyColumnType(e,t),l=n.isAutoRowHeight(t),s=n.getCellValue(e,t);return!(n.isHeader(e,t)||\\\"cell\\\"!==i.role||\\\"text\\\"!==a||r||l||o||\\\"text\\\"!==(null==(a=i.firstChild)?void 0:a.type)||isPromise(s))}function dealWithMergeCellSize(t,i,r,n,o,a,l){for(let d=t.start.col;d<=t.end.col;d++)for(let e=t.start.row;e<=t.end.row;e++){var s=l.scenegraph.getCell(d,e,!0),h=(\\\"cell\\\"===s.role&&t.start.row!==t.end.row&&s.contentWidth!==i&&updateCellContentHeight(s,r,r,l.isAutoRowHeight(e),n,o,a),\\\"cell\\\"===s.role&&t.start.col!==t.end.col&&s.contentHeight!==r&&updateCellContentWidth(s,i,r,0,l.isAutoRowHeight(e),n,o,a,l.scenegraph),s.contentWidth=i,s.contentHeight=r,l.getRowHeight(e));resizeCellGroup(s,l.getColWidth(d),h,t,l)}}function resizeCellGroup(e,t,i,r,n){const{col:o,row:a}=e,l=-n.getColsWidth(r.start.col,o-1),s=-n.getRowsHeight(r.start.row,a-1);e.forEachChildren(e=>{var t;\\\"number\\\"==typeof e._dx?e.setAttributes({dx:(null!=(t=e._dx)?t:0)+l}):(e._dx=null!=(t=e.attribute.dx)?t:0,e.setAttributes({dx:(null!=(t=e.attribute.dx)?t:0)+l})),\\\"number\\\"==typeof e._dy?e.setAttributes({dy:(null!=(t=e._dy)?t:0)+s}):(e._dy=null!=(t=e.attribute.dy)?t:0,e.setAttributes({dy:(null!=(t=e.attribute.dy)?t:0)+s}))});var h=null!=(h=e.attribute.strokeArrayWidth)?h:e.attribute.lineWidth,d=isArray_default(h),u=[0,0,0,0],d=(o===r.start.col&&(u[3]=d?h[3]:h),a===r.start.row&&(u[0]=d?h[0]:h),o===r.end.col&&(u[1]=d?h[1]:h),a===r.end.row&&(u[2]=d?h[2]:h),t!==e.attribute.width),h=i!==e.attribute.height;return e.setAttributes({width:t,height:i,strokeArrayWidth:u}),e.mergeStartCol=r.start.col,e.mergeStartRow=r.start.row,e.mergeEndCol=r.end.col,e.mergeEndRow=r.end.row,{widthChange:d,heightChange:h}}function getCustomCellMergeCustom(e,t,i,r){if(r.internalProps.customMergeCell){var n=r.getCustomMerge(e,t);if(n){var o,a,l,{range:n,customLayout:s,customRender:h}=n;if(s||h)return h=(s=dealWithCustom(s,h,n.start.col,n.start.row,r.getColsWidth(n.start.col,n.end.col),r.getRowsHeight(n.start.row,n.end.row),!1,r.isAutoRowHeight(t),[0,0,0,0],r)).elementsGroup,0<i.childrenCount&&h?i.insertBefore(h,i.firstChild):h&&i.appendChild(h),h=r.getRowHeight(t),o=r.getColWidth(e),a=i.attribute[\\\"width\\\"],l=i.attribute[\\\"height\\\"],i.contentWidth=a,i.contentHeight=l,resizeCellGroup(i,o,h,n,r),s}}}function isMergeCellGroup(e){return!!(\\\"cell\\\"===e.role&&isNumber_default(e.mergeStartCol)&&isNumber_default(e.mergeStartRow)&&isNumber_default(e.mergeEndCol)&&isNumber_default(e.mergeEndRow))}function getAxisDomainRangeAndLabels(e,t,i,r,n,o){var a,l;null!=i&&i.zero&&(e=Math.min(e,0),t=Math.max(t,0)),null!=i&&i.expand&&(a=e,l=t,isValid_default(i.expand.min)&&(e=a-(l-a)*i.expand.min),isValid_default(i.expand.max))&&(t=l+(l-a)*i.expand.max);let s,h;if(isNumber_default(null==i?void 0:i.min)&&(e=i.min),isNumber_default(null==i?void 0:i.max)&&(t=i.max),\\\"log\\\"===(null==i?void 0:i.type)?(s=new LogScale).base(null!=(l=null==i?void 0:i.base)?l:10):\\\"symlog\\\"===(null==i?void 0:i.type)?(s=new SymlogScale).constant(null!=(a=null==i?void 0:i.constant)?a:10):s=new LinearScale2,s.domain([e,t],!(null==i||!i.nice)),null!=i&&i.nice){let e=null!=(a=null!=(a=null==(l=i.tick)?void 0:l.forceTickCount)?a:null==(l=i.tick)?void 0:l.tickCount)?a:10;isFunction_default(e)&&(e=e({axisLength:n,labelStyle:null!=(a=null==(l=null==i?void 0:i.label)?void 0:l.style)?a:{fontSize:THEME_CONSTANTS.LABEL_FONT_SIZE}})),\\\"accurateFirst\\\"===i.niceType&&(e=Math.max(10,e)),isNil_default(i.min)&&isNil_default(i.max)?s.nice(e):isValid_default(i.min)&&isNil_default(i.max)?s.niceMax(e):isNil_default(i.min)&&isValid_default(i.max)&&s.niceMin(e)}return delete s._niceType,o||(h=s.ticks(isNumber_default(null==i?void 0:i.tickCount)?null==i?void 0:i.tickCount:5,{noDecimals:null==(l=null==i?void 0:i.tick)?void 0:l.noDecimals})),{range:s.domain(),ticks:h}}function isValidAlignDomain(e){return 2===e.length&&isValidNumber_default(e[0])&&isValidNumber_default(e[1])&&e[1]>=e[0]}function getScaleInfo(e){var t=e[1]-e[0],i=e[1]*e[0]<0;let r=e[0]<=0?0-e[0]:0,n=0<e[1]?+e[1]:0;return 0==t?e[0]<0?(r=1,n=0):0<e[0]&&(r=0,n=1):(r/=t,n/=t),{total:t,negative:r,positive:n,includeZero:i,domain:e,extendable_min:!0,extendable_max:!0}}function inDifferentCrossZero(e,t){var{positive:i,negative:r,extendable_min:n,extendable_max:o,domain:a}=e,{positive:l,negative:s,extendable_min:h,extendable_max:d,domain:u}=t;if(0<l){if(!h)return!1;let e=r/i;o&&(e=r/Math.max(i,l),a[1]=-a[0]/e),u[0]=-u[1]*e}else if(0<s){if(!d)return!1;let e=i/r;n&&(e=i/Math.max(r,r),a[0]=-a[1]/e),u[1]=-u[0]*e}return!0}function inOnlyZeroDomain(e,t){var{extendable_min:i,extendable_max:r,domain:n}=e,{positive:o,negative:a,domain:l}=t;return!(0===o&&0===a||0<o&&!r||0<a&&!i||(n[0]=l[0],n[1]=l[1],0))}function inAllCrossZero(e,t){var{positive:i,negative:r,extendable_max:n,domain:o}=e,{positive:a,negative:l,extendable_min:s,domain:h}=t;if(n&&s){var d=Math.max(r,l)/Math.max(i,a);o[1]=-o[0]/d,h[0]=-h[1]*d}else if(s)h[0]=-h[1]*(r/i);else{if(!n)return!1;o[1]=-o[0]/(l/a)}return!0}function inNoCrossDifferentSide(e,t){var{extendable_min:i,domain:r}=e,{extendable_max:n,domain:o}=t;return!(!i||!n||(r[0]=-r[1],o[1]=-o[0],0))}function getNewRangeToAlign(e,t){var i=[e.min,e.max],r=[t.min,t.max];if(isValidAlignDomain(i)&&isValidAlignDomain(r)){var n=getScaleInfo(i),o=getScaleInfo(r),{positive:a,negative:l,extendable_min:s,extendable_max:h,includeZero:d}=n,{positive:u,negative:c,extendable_min:g,extendable_max:p,includeZero:f}=o;if(0===a&&0===l){if(!inOnlyZeroDomain(n,o))return}else if(0===u&&0===c){if(!inOnlyZeroDomain(o,n))return}else if(d||f)if(d&&!f){if(!inDifferentCrossZero(n,o))return}else if(f&&!d){if(!inDifferentCrossZero(o,n))return}else{if(l===c)return;if(c<l){if(!inAllCrossZero(n,o))return}else if(!inAllCrossZero(o,n))return}else{if(0===l&&0===u){if(!inNoCrossDifferentSide(n,o))return}else if(0===c&&0===a&&!inNoCrossDifferentSide(o,n))return;if(0===l&&0===c)if(0===i[0]&&0<r[0]){if(!g)return;r[0]=0}else{if(!(0===r[0]&&0<i[0]))return;if(!s)return;i[0]=0}if(0===a&&0===u)if(0===i[1]&&0<r[1]){if(!p)return;r[1]=0}else{if(!(0===r[1]&&0<i[1]))return;if(!h)return;i[1]=0}}return{range1:i,range2:r}}}function getAxisConfigInPivotChart(t,r,n){if(n._table.isPivotChart())if(n.indicatorsAsCol){if(n.hasTwoIndicatorAxes&&r===n.columnHeaderLevelCount-1&&t>=n.rowHeaderLevelCount&&t<n.colCount-n.rightFrozenColCount)return(a=getRange(\\\"top\\\",t,r+1,t,n.columnHeaderLevelCount-1,t,r,1,n))?(({range:a,ticks:h,axisOption:l,isZeroAlign:o,theme:s}=a),o&&(o=getRange(\\\"bottom\\\",t,r+1,t,n.columnHeaderLevelCount-1,t,r,0,n))&&(o=o[\\\"range\\\"],o=getNewRangeToAlign(a,o))&&(a.min=o.range1[0],a.max=o.range1[1]),isNumber_default(null==l?void 0:l.min)&&(a.min=l.min,0<a.min)&&(l.zero=!1),isNumber_default(null==l?void 0:l.max)&&(a.max=l.max,a.max<0)&&(l.zero=!1),merge({range:a},l,{orient:\\\"top\\\",type:(null==l?void 0:l.type)||\\\"linear\\\",label:{flush:!0},__ticksForVTable:h,__vtableChartTheme:s})):void 0;if(r===n.rowCount-n.bottomFrozenRowCount&&t>=n.rowHeaderLevelCount&&t<n.colCount-n.rightFrozenColCount){var o=n.getIndicatorKeyInChartSpec(t,r);let i=null;null!=o&&o.forEach(e=>{var t=n.getIndicatorInfo(e);t&&(i=t)});var a=getRange(\\\"bottom\\\",t,r-1,t,r,t,r,0,n);return a?(({range:l,ticks:h,axisOption:s,isZeroAlign:o,theme:a}=a),o&&(o=getRange(\\\"top\\\",t,r-1,t,r,t,r,1,n))&&(o=o[\\\"range\\\"],o=getNewRangeToAlign(l,o))&&(l.min=o.range1[0],l.max=o.range1[1]),isNumber_default(null==s?void 0:s.min)&&(l.min=s.min,0<l.min)&&(s.zero=!1),isNumber_default(null==s?void 0:s.max)&&(l.max=s.max,l.max<0)&&(s.zero=!1),merge({title:{visible:!0,text:null==i?void 0:i.title},range:l},s,{orient:\\\"bottom\\\",type:(null==s?void 0:s.type)||\\\"linear\\\",label:{flush:!0},__ticksForVTable:h,__vtableChartTheme:a})):void 0}if(t===n.rowHeaderLevelCount-1&&r>=n.columnHeaderLevelCount&&r<n.rowCount-n.bottomFrozenRowCount){let e=n.getDimensionKeyInChartSpec(n.rowHeaderLevelCount,r);isArray_default(e)&&(e=e[0]);var l=null!=(o=n.dataset.collectedValues[e])?o:[],s=n.getRowKeysPath(t,r),a=null!=(h=l[null!=s?s:\\\"\\\"])?h:[],{axisOption:o,theme:s,chartType:l}=getAxisOption(t+1,r,\\\"left\\\",n);if(!1!==(null==o?void 0:o.visible))return merge({domain:\\\"common\\\"===l?Array.from(a):Array.from(a).reverse(),title:{autoRotate:!0}},o,{orient:\\\"left\\\",type:\\\"band\\\",__vtableChartTheme:s})}}else{if(t===n.rowHeaderLevelCount-1&&r>=n.columnHeaderLevelCount&&r<n.rowCount-n.bottomFrozenRowCount){var h=n.getIndicatorKeyInChartSpec(t,r);let i=null;null!=h&&h.forEach(e=>{var t=n.getIndicatorInfo(e);t&&(i=t)});var l=getRange(\\\"left\\\",t+1,r,t,r,t,r,0,n);return l?(({range:a,ticks:o,axisOption:s,isZeroAlign:h,theme:l}=l),h&&(h=getRange(\\\"right\\\",t+1,r,t,r,t,r,1,n))&&(h=h[\\\"range\\\"],h=getNewRangeToAlign(a,h))&&(a.min=h.range1[0],a.max=h.range1[1]),isNumber_default(null==s?void 0:s.min)&&(a.min=s.min,0<a.min)&&(s.zero=!1),isNumber_default(null==s?void 0:s.max)&&(a.max=s.max,a.max<0)&&(s.zero=!1),merge({title:{visible:!0,text:null==i?void 0:i.title,autoRotate:!0},range:a},s,{orient:\\\"left\\\",type:(null==s?void 0:s.type)||\\\"linear\\\",label:{flush:!0},__ticksForVTable:o,__vtableChartTheme:l})):void 0}if(t===n.colCount-n.rightFrozenColCount&&r>=n.columnHeaderLevelCount&&r<n.rowCount-n.bottomFrozenRowCount)return(h=getRange(\\\"right\\\",t-1,r,n.rowHeaderLevelCount-1,r,t,r,1,n))?(({range:a,ticks:s,axisOption:o,isZeroAlign:l,theme:h}=h),l&&(l=getRange(\\\"left\\\",t-1,r,n.rowHeaderLevelCount-1,r,t,r,0,n))&&(l=l[\\\"range\\\"],l=getNewRangeToAlign(a,l))&&(a.min=l.range1[0],a.max=l.range1[1]),isNumber_default(null==o?void 0:o.min)&&(a.min=o.min,0<a.min)&&(o.zero=!1),isNumber_default(null==o?void 0:o.max)&&(a.max=o.max,a.max<0)&&(o.zero=!1),merge({range:a,title:{autoRotate:!0}},o,{orient:\\\"right\\\",type:(null==o?void 0:o.type)||\\\"linear\\\",label:{flush:!0},__ticksForVTable:s,__vtableChartTheme:h})):void 0;if(r===n.rowCount-n.bottomFrozenRowCount&&t>=n.rowHeaderLevelCount&&t<n.colCount-n.rightFrozenColCount){let e=n.getDimensionKeyInChartSpec(t,n.columnHeaderLevelCount);isArray_default(e)&&(e=e[0]);var a=null!=(l=n.dataset.collectedValues[e])?l:[],o=n.getColKeysPath(t,r),h=null!=(s=null==a?void 0:a[null!=o?o:\\\"\\\"])?s:[],{axisOption:l,theme:o}=getAxisOption(t,r-1,\\\"bottom\\\",n);if(!1!==(null==l?void 0:l.visible))return merge({domain:Array.from(h)},l,{orient:\\\"bottom\\\",type:\\\"band\\\",__vtableChartTheme:o})}}}function getAxisOption(e,t,i,r){const n=r.getRawChartSpec(e,t);if(n&&isArray_default(n.axes)){var o=n.axes.find(e=>e.orient===i);if(o){var{seriesIndex:a,seriesId:l}=o;let e;return isValid_default(l)&&isArray_default(n.series)?e=(isArray_default(l)?l:[l]).map(t=>n.series.findIndex(e=>e.id===t)):isValid_default(a)&&isArray_default(n.series)&&(e=a),{axisOption:o,isPercent:n.percent,isZeroAlign:checkZeroAlign(n,i,r),seriesIndice:e,theme:n.theme,chartType:n.type}}}return{axisOption:r._table.pivotChartAxes.find(e=>e.orient===i),isPercent:!1,isZeroAlign:checkZeroAlign(n,i,r),theme:n.theme,chartType:n.type}}function checkZeroAlign(e,t,i){const r=[];var n;if(\\\"left\\\"===t||\\\"right\\\"===t?r.push(\\\"left\\\",\\\"right\\\"):\\\"top\\\"!==t&&\\\"bottom\\\"!==t||r.push(\\\"top\\\",\\\"bottom\\\"),n=e&&isArray_default(e.axes)?e.axes:i._table.pivotChartAxes,isArray_default(n)){const o=[];n.forEach(e=>{r.includes(e.orient)&&o.push(e)});for(let e=0;e<o.length;e++){const a=o[e];if(a.sync&&a.sync.zeroAlign&&a.sync.axisId&&o.find(e=>e.id===a.sync.axisId))return!0}}return!1}function getAxisRange(t,i,r,n,o){var e;if(isArray_default(o)){var a={min:1/0,max:-1/0};for(let e=0;e<o.length;e++){var l=getAxisRange(t,i,r,n,o[e]);l&&(a.min=Math.min(a.min,l.min),a.max=Math.max(a.max,l.max))}return isFinite(a.min)&&isFinite(a.max)?a:null}let s=null==i?void 0:i[o];return(s=isArray_default(s)?s[0]:s)?((e=merge({},null!=(e=null==(e=t[s])?void 0:e[null!=n?n:\\\"\\\"])?e:{min:0,max:1})).positiveMax&&e.positiveMax>e.max&&(e.max=e.positiveMax),e.negativeMin&&e.negativeMin<e.min&&(e.min=e.negativeMin),e.min===e.max&&(0<e.min?e.min=0:e.max=0),e):null}function getRange(e,t,i,r,n,o,a,l,s){var{axisOption:h,isPercent:d,isZeroAlign:u,seriesIndice:c,theme:g,chartType:p}=getAxisOption(t,i,e,s);if(!1!==(null==h?void 0:h.visible)){var f=s.getIndicatorKeyInChartSpec(r,n),m=\\\"top\\\"===e||\\\"bottom\\\"===e?s.getColKeysPath(o,a):s.getRowKeysPath(o,a),f=getAxisRange(s.dataset.collectedValues,f,u,m,null!=c?c:l);if(f)return d&&(f.min=f.min<0?-1:0,f.max=0<f.max?1:0),({range:m,ticks:c}=getAxisDomainRangeAndLabels(f.min,f.max,h,u,s._table.getColWidth(o))),f.min=isNaN(m[0])?0:m[0],f.max=isNaN(m[1])?1:m[1],isNumber_default(null==h?void 0:h.min)&&(f.min=h.min,0<f.min)&&(h.zero=!1),isNumber_default(null==h?void 0:h.max)&&(f.max=h.max,f.max<0)&&(h.zero=!1),{axisOption:h,isZeroAlign:u,range:f,ticks:c,theme:g,chartType:p}}}function isTopOrBottomAxis(e,t,i){return!!i._table.isPivotChart()&&(!!(i.indicatorsAsCol&&i.hasTwoIndicatorAxes&&t===i.columnHeaderLevelCount-1&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount)||t===i.rowCount-i.bottomFrozenRowCount&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount)}function isLeftOrRightAxis(e,t,i){if(i._table.isPivotChart())if(i.indicatorsAsCol){if(e===i.rowHeaderLevelCount-1&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount)return!0}else{if(e===i.rowHeaderLevelCount-1&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount)return!0;if(e===i.colCount-i.rightFrozenColCount&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount)return!0}return!1}function computeAxisComponentWidth(t,o){var i,e,r;const a=merge({},commonAxis,t);let n=0,l=(!1!==a.tick.visible&&(n=null!=(r=a.tick.width)?r:4),0);if(a.label.visible){if(\\\"band\\\"===a.type)a.domain.forEach(e=>{a.label.formatMethod&&(e=a.label.formatMethod(e));var{width:t,height:i}=o.measureText(e,{fontSize:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontSize)?t:DEFAULT_TEXT_FONT_SIZE2,fontWeight:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontWeight)?t:\\\"normal\\\",fontFamily:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontFamily)?t:DEFAULT_TEXT_FONT_FAMILY2}),r=(null==(r=null==(r=a.label)?void 0:r.style)?void 0:r.maxLineWidth)||1/0,n=(null!=(n=null==(n=null==(n=a.label)?void 0:n.style)?void 0:n.angle)?n:0)+(\\\"vertical\\\"===(null==(n=null==(n=a.label)?void 0:n.style)?void 0:n.direction)?90:0);l=Math.max(l,getSizeAfterResize(Math.min(t,r),i,n).width)});else{let e;(e=isArray_default(t.__ticksForVTable)?t.__ticksForVTable:(r=a.range,i=1<Math.abs(r.min)?Math.round(r.min):r.min,r=1<Math.abs(r.max)?Math.round(r.max):r.max,[formatDecimal(i),formatDecimal(r)])).forEach(e=>{a.label.formatMethod&&(e=a.label.formatMethod(e));var{width:t,height:i}=o.measureText(e,{fontSize:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontSize)?t:DEFAULT_TEXT_FONT_SIZE2,fontWeight:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontWeight)?t:\\\"normal\\\",fontFamily:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontFamily)?t:DEFAULT_TEXT_FONT_FAMILY2}),r=(null==(r=null==(r=a.label)?void 0:r.style)?void 0:r.maxLineWidth)||1/0,n=(null!=(n=null==(n=null==(n=a.label)?void 0:n.style)?void 0:n.angle)?n:0)+(\\\"vertical\\\"===(null==(n=null==(n=a.label)?void 0:n.style)?void 0:n.direction)?90:0);l=Math.max(l,getSizeAfterResize(Math.min(t,r),i,n).width)})}l+=null!=(i=a.label.space)?i:4}let s=0;return a.title.visible&&a.title.text&&(({width:i,height:r}=o.measureText(a.title.text,{fontSize:null!=(r=null==(i=null==(r=a.title)?void 0:r.style)?void 0:i.fontSize)?r:DEFAULT_TEXT_FONT_SIZE2,fontWeight:null!=(i=null==(r=null==(i=a.title)?void 0:i.style)?void 0:r.fontWeight)?i:\\\"normal\\\",fontFamily:null!=(r=null==(i=null==(r=a.title)?void 0:r.style)?void 0:i.fontFamily)?r:DEFAULT_TEXT_FONT_FAMILY2})),e=(null==(e=null==(e=a.label)?void 0:e.style)?void 0:e.maxLineWidth)||1/0,r=getSizeAfterResize(Math.min(i,e),r,null==(e=null==(i=a.title)?void 0:i.style)?void 0:e.angle),s=\\\"left\\\"!==t.orient&&\\\"right\\\"!==t.orient||!a.title.autoRotate?r.width:r.height,s+=null!=(i=a.title.space)?i:4),n+l+s+1}function computeAxisComponentHeight(t,o){var i,e,r;const a=merge({},commonAxis,t);let n=0,l=(!1!==a.tick.visible&&(n=null!=(r=a.tick.width)?r:4),0);if(a.label.visible){if(\\\"band\\\"===a.type)a.domain.forEach(e=>{a.label.formatMethod&&(e=a.label.formatMethod(e));var{width:t,height:i}=o.measureText(e,{fontSize:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontSize)?t:DEFAULT_TEXT_FONT_SIZE2,fontWeight:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontWeight)?t:\\\"normal\\\",fontFamily:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontFamily)?t:DEFAULT_TEXT_FONT_FAMILY2}),r=(null==(r=null==(r=a.label)?void 0:r.style)?void 0:r.maxLineWidth)||1/0,n=(null!=(n=null==(n=null==(n=a.label)?void 0:n.style)?void 0:n.angle)?n:0)+(\\\"vertical\\\"===(null==(n=null==(n=a.label)?void 0:n.style)?void 0:n.direction)?90:0);l=Math.max(l,getSizeAfterResize(Math.min(t,r),i,n).height)});else{let e;(e=isArray_default(t.__ticksForVTable)?t.__ticksForVTable:(r=a.range,i=1<Math.abs(r.min)?Math.round(r.min):r.min,r=1<Math.abs(r.max)?Math.round(r.max):r.max,[formatDecimal(i),formatDecimal(r)])).forEach(e=>{a.label.formatMethod&&(e=a.label.formatMethod(e));var{width:t,height:i}=o.measureText(e,{fontSize:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontSize)?t:DEFAULT_TEXT_FONT_SIZE2,fontWeight:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontWeight)?t:\\\"normal\\\",fontFamily:null!=(t=null==(t=null==(t=a.label)?void 0:t.style)?void 0:t.fontFamily)?t:DEFAULT_TEXT_FONT_FAMILY2}),r=(null==(r=null==(r=a.label)?void 0:r.style)?void 0:r.maxLineWidth)||1/0,n=(null!=(n=null==(n=null==(n=a.label)?void 0:n.style)?void 0:n.angle)?n:0)+(\\\"vertical\\\"===(null==(n=null==(n=a.label)?void 0:n.style)?void 0:n.direction)?90:0);l=Math.max(l,getSizeAfterResize(Math.min(t,r),i,n).height)})}l+=null!=(i=a.label.space)?i:4}let s=0;return a.title.visible&&a.title.text&&(({width:i,height:r}=o.measureText(a.title.text,{fontSize:null!=(r=null==(i=null==(r=a.title)?void 0:r.style)?void 0:i.fontSize)?r:DEFAULT_TEXT_FONT_SIZE2,fontWeight:null!=(i=null==(r=null==(i=a.title)?void 0:i.style)?void 0:r.fontWeight)?i:\\\"normal\\\",fontFamily:null!=(r=null==(i=null==(r=a.title)?void 0:r.style)?void 0:i.fontFamily)?r:DEFAULT_TEXT_FONT_FAMILY2})),e=(null==(e=null==(e=a.label)?void 0:e.style)?void 0:e.maxLineWidth)||1/0,r=getSizeAfterResize(Math.min(i,e),r,null==(e=null==(i=a.title)?void 0:i.style)?void 0:e.angle),s=\\\"bottom\\\"!==t.orient&&\\\"top\\\"!==t.orient||!a.title.autoRotate?r.height:r.width,s+=null!=(i=a.title.space)?i:4),n+l+s+1}function formatDecimal(e){return\\\"number\\\"!=typeof e&&(e=Number(e)),Number(e.toPrecision(1)).toString()}function getSizeAfterResize(e,t,i=0){var r=i*Math.PI/180,n=-e/2,o=-t/2,a=e/2,l=-t/2,s=e/2,h=t/2,d=-e/2,u=t/2,n={x:n*Math.cos(r)-o*Math.sin(r),y:n*Math.sin(r)+o*Math.cos(r)},o={x:a*Math.cos(r)-l*Math.sin(r),y:a*Math.sin(r)+l*Math.cos(r)},a={x:s*Math.cos(r)-h*Math.sin(r),y:s*Math.sin(r)+h*Math.cos(r)},l={x:d*Math.cos(r)-u*Math.sin(r),y:d*Math.sin(r)+u*Math.cos(r)},s=Math.min(n.x,o.x,a.x,l.x),h=Math.max(n.x,o.x,a.x,l.x),d=Math.min(n.y,o.y,a.y,l.y);return{width:h-s,height:Math.max(n.y,o.y,a.y,l.y)-d}}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var utilCheckBoxMark=new CheckBox({}),utilRadioMark=new Radio({});function computeCheckboxCellHeight(e,t,i,r,n,o,a,l,s,h,d,u,c,g){var p,f=validToString(isObject_default(e)?e.text:e).split(\\\"\\\\n\\\")||[],m=g.getColsWidth(t,r),b=getProp2(\\\"size\\\",n,t,i,g);let v=0;return v=o?(p=getProp2(\\\"spaceBetweenTextAndIcon\\\",n,t,i,g),m=m-(c[1]+c[3])-a-b-p,utilCheckBoxMark.setAttributes({text:{maxLineWidth:m,text:f,fontSize:l,fontStyle:s,fontWeight:h,fontFamily:d,lineHeight:u,wordBreak:\\\"break-word\\\"},icon:{width:Math.floor(b/1.4),height:Math.floor(b/1.4)},box:{width:b,height:b},spaceBetweenTextAndIcon:p}),utilCheckBoxMark.render(),utilCheckBoxMark.AABBBounds.height()):Math.max(b,f.length*u)}function computeRadioCellHeight(n,o,a,l,s,h,d,u,c,g,p,f,m,b){var e;if(isArray_default(n)){let r=0;const t=b.getBodyColumnDefine(o,a),v=getProp2(\\\"spaceBetweenRadio\\\",s,o,a,b),i=null!=(e=null==t?void 0:t.radioDirectionInCell)?e:\\\"vertical\\\";return\\\"vertical\\\"===i?n.forEach((e,t)=>{var i=computeSingleRadioCellHeight(e,o,a,l,s,h,d,u,c,g,p,f,m,b);r+=i,t!==n.length-1&&(r+=v)}):\\\"horizontal\\\"===i&&n.forEach(e=>{var t=computeSingleRadioCellHeight(e,o,a,l,s,h,d,u,c,g,p,f,m,b);r=Math.max(t,r)}),r}return computeSingleRadioCellHeight(n,o,a,l,s,h,d,u,c,g,p,f,m,b)}function computeSingleRadioCellHeight(e,t,i,r,n,o,a,l,s,h,d,u,c,g){var p=validToString(isObject_default(e)?e.text:e).split(\\\"\\\\n\\\")||[],f=g.getColsWidth(t,r),m=getProp2(\\\"size\\\",n,t,i,g);let b=getProp2(\\\"outerRadius\\\",n,t,i,g);var v,C=isNumber_default(b)?2*b:m;let y=0;return y=o?(v=getProp2(\\\"spaceBetweenTextAndIcon\\\",n,t,i,g),f=f-(c[1]+c[3])-a-C-v,isNumber_default(b)||(b=Math.round(m/2)),utilRadioMark.setAttributes({text:{maxLineWidth:f,text:p,fontSize:l,fontStyle:s,fontWeight:h,fontFamily:d,lineHeight:u,wordBreak:\\\"break-word\\\"},circle:{outerRadius:b},spaceBetweenTextAndIcon:v}),utilRadioMark.render(),utilRadioMark.AABBBounds.height()):Math.max(m,p.length*u)}init_esbuild_inject();var customAlphabetCharSet=\\\"\\\",textMeasureMode=\\\"quick\\\",textMeasureModule=new ContainerModule((e,t,i,r)=>{(i(TextMeasureContribution)?r:e)(TextMeasureContribution).to(FastTextMeasureContribution).inSingletonScope()}),restoreTextMeasureModule=new ContainerModule((e,t,i,r)=>{(i(TextMeasureContribution)?r:e)(TextMeasureContribution).to(DefaultTextMeasureContribution).inSingletonScope()}),text_measure_default=textMeasureModule,fastTextMeasureCache=new Map;function getFastTextMeasure(e,t,i,r=\\\"normal\\\"){var n=e+`-${t}-${i}-`+r,o=fastTextMeasureCache.get(n);return o||(o={fontSize:e,fontFamily:i,fontWeight:t,fontStyle:r},o=new TextMeasure(Object.assign({defaultFontParams:{fontFamily:DefaultTextStyle.fontFamily,fontSize:DefaultTextStyle.fontSize},getTextBounds:getTextBounds,specialCharSet:`{}()//&-/: .,@%'\\\"~…=${TextMeasure.ALPHABET_CHAR_SET}${TextMeasure.ALPHABET_CHAR_SET.toUpperCase()}0123456789`+customAlphabetCharSet},{}),o),fastTextMeasureCache.set(n,o),o)}var FastTextMeasureContribution=class extends DefaultTextMeasureContribution{measureTextWidth(e,t){var{fontSize:i,fontFamily:r=\\\"Arial,sans-serif\\\",fontWeight:n=\\\"normal\\\",fontStyle:o=\\\"normal\\\"}=t;return getFastTextMeasure(i,n,r,o).measure(e,textMeasureMode).width}measureText(e,t){var{fontSize:i,fontFamily:r=\\\"Arial,sans-serif\\\",fontWeight:n=\\\"normal\\\",fontStyle:o=\\\"normal\\\"}=t;return getFastTextMeasure(i,n,r,o).measure(e,textMeasureMode)}},TextMeasureTool=class{measureText(e,t){var{fontSize:i,fontFamily:r=\\\"Arial,sans-serif\\\",fontWeight:n=\\\"normal\\\",fontStyle:o=\\\"normal\\\"}=t;return getFastTextMeasure(i,n,r,o).measure(e,textMeasureMode)}measureTextWidth(e,t){var{fontSize:i,fontFamily:r=\\\"Arial,sans-serif\\\",fontWeight:n=\\\"normal\\\",fontStyle:o=\\\"normal\\\"}=t;return getFastTextMeasure(i,n,r,o).measure(e,textMeasureMode).width}clipText(e,t,i){var r;return 0===e.length?{str:\\\"\\\",width:0}:(r=this.measureTextWidth(e,t))<=i?{str:e,width:r}:i<(r=this.measureTextWidth(e[0],t))?{str:\\\"\\\",width:0}:this._clipText(e,t,i,0,e.length-1)}_clipText(e,t,i,r,n){var o,a=Math.floor((r+n)/2),l=e.substring(0,a+1),s=this.measureTextWidth(l,t);let h;return i<s?l.length<=1?{str:\\\"\\\",width:0}:(o=e.substring(0,a),(h=this.measureTextWidth(o,t))<=i?{str:o,width:h}:this._clipText(e,t,i,r,a)):s<i?a>=e.length-1?{str:e,width:this.measureTextWidth(e,t)}:(o=e.substring(0,a+2),(h=this.measureTextWidth(o,t))>=i?{str:l,width:s}:this._clipText(e,t,i,a,n)):{str:l,width:s}}clipTextWithSuffix(e,t,i,r){var n,o;return\\\"\\\"===r?this.clipText(e,t,i):0===e.length?{str:\\\"\\\",width:0}:(n=this.measureTextWidth(e,t))<=i?{str:e,width:n}:i<(n=this.measureTextWidth(r,t))?{str:\\\"\\\",width:0}:((o=this._clipText(e,t,i-=n,0,e.length-1)).str+=r,o.width+=n,o)}},textMeasure=new TextMeasureTool,utilTextMark=new Text({ignoreBuf:!0});function measureTextBounds(e){return utilTextMark.setAttributes(e),utilTextMark.AABBBounds}var MenuType,utilRichTextMark=new RichText({width:0,height:0,textConfig:[]});function computeRowsHeight(a,r,n,t=!0,l){\\\"undefined\\\"!=typeof window&&window.performance.now();var i=[],s=[];if(l)for(let e=r;e<=n;e++)i[e]=a.getRowHeight(e);a.defaultHeaderRowHeight,a.defaultHeaderColWidth;var o,h,d,u=\\\"auto\\\"===a.defaultHeaderRowHeight||isArray_default(a.defaultHeaderRowHeight)&&a.defaultHeaderRowHeight.some(e=>\\\"auto\\\"===e),c=\\\"autoHeight\\\"===a.heightMode||\\\"adaptive\\\"===a.heightMode;if(c||u){n=null!=n?n:a.rowCount-1,(0===(r=null!=r?r:0)&&n===a.rowCount-1||t)&&a._clearRowRangeHeightsMap();for(let i=r;i<a.columnHeaderLevelCount;i++){let e=0,t=a.colCount-1;(a.isPivotTable()&&!a.isPivotChart()||a.isPivotChart()&&!a.internalProps.layoutMap.indicatorsAsCol)&&checkPivotFixedStyleAndNoWrap(a,i)&&!getCellMergeInfo(a,a.rowHeaderLevelCount,i)&&(e=0,t=a.rowHeaderLevelCount),!c&&\\\"auto\\\"!==a.getDefaultRowHeight(i)||(o=computeRowHeight(i,e,t,a),s[i]=Math.round(o),a._setRowHeight(i,o))}for(let e=a.rowCount-a.bottomFrozenRowCount;e<=n;e++)!c&&\\\"auto\\\"!==a.getDefaultRowHeight(e)||(h=computeRowHeight(e,0,a.colCount-1,a),l?s[e]=Math.round(h):a._setRowHeight(e,h));if(!(n<a.columnHeaderLevelCount)&&c)if(a.internalProps.transpose||a.isPivotTable()&&!a.internalProps.layoutMap.indicatorsAsCol||!checkFixedStyleAndNoWrap(a))if(a.internalProps.transpose||a.isPivotTable()&&!a.internalProps.layoutMap.indicatorsAsCol)for(let e=Math.max(r,a.columnHeaderLevelCount);e<=n;e++){var g=checkFixedStyleAndNoWrapForTranspose(a,e)?computeRowHeight(e,0,a.rowHeaderLevelCount,a):computeRowHeight(e,0,a.colCount-1,a);l?s[e]=Math.round(g):a._setRowHeight(e,g)}else for(let t=Math.max(r,a.columnHeaderLevelCount);t<=n;t++){var p=computeRowHeight(t,0,a.colCount-1,a);l?s[t]=Math.round(p):a._setRowHeight(t,p)}else{fillRowsHeight(computeRowHeight(a.columnHeaderLevelCount,0,a.colCount-1,a),a.columnHeaderLevelCount,a.rowCount-1-a.bottomFrozenRowCount,a,l?s:void 0);for(let e=a.rowCount-a.bottomFrozenRowCount;e<=n;e++){var f=computeRowHeight(e,0,a.colCount-1,a);l?s[e]=Math.round(f):a._setRowHeight(e,f)}}}else if(\\\"adaptive\\\"!==a.heightMode&&!a.autoFillHeight||a.clearRowHeightCache(),l)for(let e=r;e<=n;e++)s[e]=a.getRowHeight(e);if((0===r&&n===a.rowCount-1||t)&&a._clearRowRangeHeightsMap(),\\\"adaptive\\\"===a.heightMode){a._clearRowRangeHeightsMap();let e=a.tableNoFrameHeight,r=0,n=a.rowCount;\\\"only-body\\\"===a.heightAdaptiveMode&&(u=a.getRowsHeight(0,a.columnHeaderLevelCount-1),d=a.isPivotChart()?a.getBottomFrozenRowsHeight():0,e=a.tableNoFrameHeight-u-d,r=a.columnHeaderLevelCount,n=a.isPivotChart()?a.rowCount-a.bottomFrozenRowCount:a.rowCount);let t=0;for(let i=r;i<n;i++)t+=l?s[i]:a.getRowHeight(i);var m=e/t;for(let o=r;o<n;o++){var b=o===n-1?e-(l?s.reduce((e,t,i)=>i>=r&&i<=n-2?e+t:e,0):a.getRowsHeight(r,n-2)):Math.round((l?s[o]:a.getRowHeight(o))*m);l?s[o]=b:a._setRowHeight(o,b,!1)}}else if(a.autoFillHeight){a._clearRowRangeHeightsMap();var v=a.tableNoFrameHeight;let t=0,i=0;for(let e=0;e<a.rowCount;e++){var C=l&&null!=(C=s[e])?C:a.getRowHeight(e);(e<a.columnHeaderLevelCount||a.isPivotChart()&&e>=a.rowCount-a.bottomFrozenRowCount)&&(i+=C),t+=C}if((a.scenegraph._dealAutoFillHeightOriginRowsHeight=t)<v&&0<t-i){const A=a.columnHeaderLevelCount,T=a.isPivotChart()?a.rowCount-a.bottomFrozenRowCount:a.rowCount,R=(v-i)/(t-i);for(let e=A;e<T;e++){var y=e===T-1?v-i-(l?s.reduce((e,t,i)=>i>=A&&i<=T-2?e+t:e,0):a.getRowsHeight(A,T-2)):Math.round((l?s[e]:a.getRowHeight(e))*R);l?s[e]=y:a._setRowHeight(e,y,!1)}}}if(l){for(let e=r;e<=n;e++){var _=null!=(_=s[e])?_:a.getRowHeight(e);_!==i[e]&&a._setRowHeight(e,_)}if(\\\"adaptive\\\"===a.heightMode||a.autoFillHeight&&a.getAllRowsHeight()<=a.tableNoFrameHeight){for(let e=0;e<=a.columnHeaderLevelCount-1;e++){var w=a.getRowHeight(e);w!==i[e]&&a.scenegraph.updateRowHeight(e,w-i[e],!0)}for(let t=a.rowCount-a.bottomFrozenRowCount;t<=a.rowCount-1;t++){var x=a.getRowHeight(t);x!==i[t]&&a.scenegraph.updateRowHeight(t,x-i[t],!0)}}for(let t=a.scenegraph.proxy.rowStart;t<=a.scenegraph.proxy.rowEnd;t++){var S=a.getRowHeight(t);S!==i[t]&&a.scenegraph.updateRowHeight(t,S-i[t],!0)}}}function computeRowHeight(e,t,i,r){let n;if(r.isPivotChart()&&e>=r.columnHeaderLevelCount&&e<r.rowCount-r.bottomFrozenRowCount)if(r.internalProps.layoutMap.indicatorsAsCol){var o=r.internalProps.layoutMap.getOptimunHeightForChart(e);if(0<o)return o}else{var o=r.getDefaultRowHeight(e);if(isNumber_default(o))return o}for(let l=t;l<=i;l++){var a=computeCustomRenderHeight(l,e,r);if(!a||(n=isValid_default(n)?Math.max(a.height,n):a.height,a.renderDefault)){if(r.isPivotChart()){var a=r.internalProps.layoutMap,a=getAxisConfigInPivotChart(l,e,a);if(a){a=computeAxisComponentHeight(a,r);if(\\\"number\\\"==typeof a){n=isValid_default(n)?Math.max(a,n):a;continue}}}r.isPivotChart()&&(r.isLeftFrozenColumn(l)&&r.isBottomFrozenRow(e)||r.isRightFrozenColumn(l)&&r.isBottomFrozenRow(e))||(a=computeTextHeight(l,e,r.isHeader(l,e)?null==(a=r._getHeaderLayoutMap(l,e))?void 0:a.headerType:r.getBodyColumnType(l,e),r),n=isValid_default(n)?Math.max(a,n):a)}}return isValid_default(n)?n:(o=r.getDefaultRowHeight(e),isNumber_default(o)?o:r.defaultRowHeight)}function checkFixedStyleAndNoWrap(e){var t,i=e.internalProps[\\\"layoutMap\\\"],r=e.columnHeaderLevelCount;if((e.internalProps.autoWrapText||e.internalProps.enableLineBreak||e.isPivotChart())&&(\\\"autoHeight\\\"===e.options.heightMode||\\\"adaptive\\\"===e.options.heightMode))return!1;for(let o=0;o<e.colCount;o++){var n=i.getBody(o,r);if(\\\"radio\\\"===n.cellType)return!1;if(\\\"function\\\"==typeof n.style||\\\"function\\\"==typeof n.icon||null!=(t=n.define)&&t.customRender||null!=(t=n.define)&&t.customLayout||\\\"function\\\"==typeof(null==(t=n.define)?void 0:t.icon))return!1;n=e._getCellStyle(o,r);if(\\\"function\\\"==typeof n.padding||\\\"function\\\"==typeof n.fontSize||\\\"function\\\"==typeof n.lineHeight||!0===n.autoWrapText)return!1}return!0}function checkFixedStyleAndNoWrapForTranspose(e,t){var i,r=e.internalProps[\\\"layoutMap\\\"];return(!e.internalProps.autoWrapText&&!e.internalProps.enableLineBreak||\\\"autoHeight\\\"!==e.options.heightMode&&\\\"adaptive\\\"!==e.options.heightMode)&&!(\\\"function\\\"==typeof(r=r.getBody(e.rowHeaderLevelCount,t)).style||\\\"function\\\"==typeof r.icon||null!=(i=r.define)&&i.customRender||null!=(i=r.define)&&i.customLayout||\\\"function\\\"==typeof(null==(i=r.define)?void 0:i.icon))&&\\\"function\\\"!=typeof(r=e._getCellStyle(e.rowHeaderLevelCount,t)).padding&&\\\"function\\\"!=typeof r.fontSize&&\\\"function\\\"!=typeof r.lineHeight&&!0!==r.autoWrapText}function checkPivotFixedStyleAndNoWrap(e,t){var i,r=e.internalProps[\\\"layoutMap\\\"];return!(e.internalProps.autoWrapText&&(\\\"autoHeight\\\"===e.options.heightMode||\\\"adaptive\\\"===e.options.heightMode)||\\\"function\\\"==typeof(r=r.getHeader(e.rowHeaderLevelCount,t)).style||\\\"function\\\"==typeof r.icons||null!=(i=r.define)&&i.headerCustomRender||null!=(i=r.define)&&i.headerCustomLayout||\\\"function\\\"==typeof(null==(i=r.define)?void 0:i.icon)||\\\"function\\\"==typeof(r=e._getCellStyle(e.rowHeaderLevelCount,t)).padding||\\\"function\\\"==typeof r.fontSize||\\\"function\\\"==typeof r.lineHeight||!0===r.autoWrapText)}function fillRowsHeight(e,t,i,r,n){for(let o=t;o<=i;o++)n?n[o]=e:r._setRowHeight(o,e)}function computeCustomRenderHeight(n,o,a){var l=a.getCustomRender(n,o),s=a.getCustomLayout(n,o);if(l||s){let e=1,t=0,i=!1,r=!1;(a.isHeader(n,o)||null!=(d=a.getBodyColumnDefine(n,o))&&d.mergeCell||a.hasCustomMerge())&&(d=a.getCellRange(n,o),e=d.end.row-d.start.row+1);var h,d={col:n,row:o,dataValue:a.getCellOriginValue(n,o),value:a.getCellValue(n,o)||\\\"\\\",rect:getCellRect(n,o,a),table:a};return s?(s=s(d)).rootContainer instanceof Group?(s.rootContainer=decodeReactDom(s.rootContainer),dealPercentCalc(s.rootContainer,a.getColWidth(n),0),s.rootContainer.setStage(a.scenegraph.stage),t=null!=(h=s.rootContainer.AABBBounds.height())?h:0,i=s.renderDefault,r=s.enableCellPadding):t=0:i=\\\"function\\\"==typeof l?(h=l(d),t=null!=(s=null==h?void 0:h.expectedHeight)?s:0,null==h?void 0:h.renderDefault):(t=null!=(d=null==l?void 0:l.expectedHeight)?d:0,null==l?void 0:l.renderDefault),r&&(s=getQuadProps(getProp2(\\\"padding\\\",a._getCellStyle(n,o),n,o,a)),t+=s[0]+s[2]),{height:t/e,renderDefault:i}}}function computeTextHeight(e,t,i,r){let n=0;var o,a=r.getCellValue(e,t),l=r._getCellStyle(e,t);let s=0,h=0;const d=[];let u=0;const c=[];let g=0,p=!1,f=((p=\\\"body\\\"!==r.getCellLocation(e,t)||!(null==(o=r.getBodyColumnDefine(e,t))||!o.icon)||!(null==o||!o.tree)||(null==o?void 0:o.dragOrder))&&null!=(o=r.getCellIcons(e,t))&&o.forEach(e=>{var t;e.positionType!==IconPosition.absoluteRight&&e.positionType!==IconPosition.inlineFront&&e.positionType!==IconPosition.inlineEnd?(h+=(null!=(t=e.width)?t:0)+(null!=(t=e.marginLeft)?t:0)+(null!=(t=e.marginRight)?t:0),s=Math.max(s,null!=(t=e.height)?t:0)):e.positionType===IconPosition.inlineFront?(d.push(e),u=Math.max(u,(null!=(t=e.height)?t:0)+(null!=(t=e.marginLeft)?t:0)+(null!=(t=e.marginRight)?t:0))):e.positionType===IconPosition.inlineEnd&&(c.push(e),g=Math.max(g,(null!=(t=e.height)?t:0)+(null!=(t=e.marginLeft)?t:0)+(null!=(t=e.marginRight)?t:0)))}),1),m=e;(r.isHeader(e,t)||null!=(o=r.getBodyColumnDefine(e,t))&&o.mergeCell||r.hasCustomMerge())&&(o=r.getCellRange(e,t),f=o.end.row-o.start.row+1,e=o.start.col,m=o.end.col);const b=getQuadProps(getProp2(\\\"padding\\\",l,e,t,r)),v=getProp2(\\\"fontSize\\\",l,e,t,r),C=getProp2(\\\"fontStyle\\\",l,e,t,r),y=getProp2(\\\"fontWeight\\\",l,e,t,r),_=null!=(o=getProp2(\\\"lineHeight\\\",l,e,t,r))?o:v,w=getProp2(\\\"fontFamily\\\",l,e,t,r),x=getProp2(\\\"autoWrapText\\\",l,e,t,r);if(\\\"text\\\"!==i&&\\\"link\\\"!==i&&\\\"progressbar\\\"!==i&&\\\"checkbox\\\"!==i&&\\\"radio\\\"!==i)n=_;else if(\\\"checkbox\\\"===i)n=computeCheckboxCellHeight(a,e,t,m,l,x,h,v,C,y,w,_,b,r);else if(\\\"radio\\\"===i)n=computeRadioCellHeight(a,e,t,m,l,x,h,v,C,y,w,_,b,r);else{const S=validToString(a).split(\\\"\\\\n\\\")||[],A=r.getColsWidth(e,m);d.length||c.length?x?((o=Object.assign({text:null==a?void 0:a.toString(),fontFamily:w,fontSize:v,fontStyle:C,fontWeight:y,lineHeight:_})).textBaseline=\\\"middle\\\",l=[...d.map(e=>dealWithRichTextIcon(e)),o,...c.map(e=>dealWithRichTextIcon(e))],utilRichTextMark.setAttributes({width:A-(b[1]+b[3])-h,height:0,textConfig:l}),n=utilRichTextMark.AABBBounds.height()):(n=0,S.forEach((e,t)=>{var i;null!=(i=r.options.customConfig)&&i.multilinesForXTable&&0!==t||(0===t&&d.length?n+=Math.max(_,u):t===S.length-1&&c.length?n+=Math.max(_,g):n+=_)})):n=x?(a=getHierarchyOffset(e,t,r),measureTextBounds({maxLineWidth:A-(b[1]+b[3])-h-a,text:S,fontSize:v,fontStyle:C,fontWeight:y,fontFamily:w,lineHeight:_,wordBreak:\\\"break-word\\\",whiteSpace:1!==S.length||x?\\\"normal\\\":\\\"no-wrap\\\"}).height()||(\\\"number\\\"==typeof _?_:v)):S.length*_}return(Math.max(n,s)+b[0]+b[2])/f}function getCellRect(e,t,i){return{left:0,top:0,right:i.getColWidth(e),bottom:i.getRowHeight(t),width:i.getColWidth(e),height:0}}function getCellMergeRange(e,t){if(!t||!t.proxy)return{colStart:0,colEnd:0,rowStart:0,rowEnd:0};var{mergeStartCol:i,mergeEndCol:r,mergeStartRow:n,mergeEndRow:o,col:a,row:l}=e,{colStart:s,colEnd:h,rowStart:d,rowEnd:u,bodyLeftCol:c,bodyRightCol:g,bodyTopRow:p,bodyBottomRow:f}=t.proxy;let m=i,b=r,v=n,C=o;return c<=a&&a<=g&&(m=Math.max(e.mergeStartCol,s),b=Math.min(e.mergeEndCol,h)),p<=l&&l<=f&&(v=Math.max(e.mergeStartRow,d),C=Math.min(e.mergeEndRow,u)),{colStart:m,colEnd:b,rowStart:v,rowEnd:C}}function updateRowHeight(t,e,i,r){r||t.table._setRowHeight(e,t.table.getRowHeight(e)+i,!0);for(let h=0;h<t.table.colCount;h++){var n,o=t.getCell(h,e);\\\"empty\\\"===o.role||(n=getCellMergeInfo(t.table,h,e))&&n.start.col!==h||(updateCellHeightForRow(t,o,h,e,o.attribute.height+i,i,t.table.isHeader(h,e)),t.updateCellContentWhileResize(h,e))}let a=0,l=0;l=e<t.table.columnHeaderLevelCount?(a=e+1,t.table.columnHeaderLevelCount-1):e>=t.table.rowCount-t.table.bottomFrozenRowCount?(a=e+1,t.table.rowCount-1):(a=e+1,Math.min(t.proxy.rowEnd,t.table.rowCount-t.table.bottomFrozenRowCount-1));for(let d=a;d<=l;d++)for(let e=0;e<t.table.colCount;e++){var s=t.getCell(e,d);\\\"cell\\\"===s.role&&s.setAttribute(\\\"y\\\",s.attribute.y+i)}}function updateCellHeightForRow(e,t,i,r,n,o,a){t&&updateCellHeight(e,t,i,r,n,o,a)}function updateCellHeight(a,l,s,h,e,t,i){if(l.attribute.height!==e||l.needUpdateHeight){l.needUpdateHeight=!1,l.setAttribute(\\\"height\\\",e);var d=a.table.isHeader(s,h)?a.table._getHeaderLayoutMap(s,h).headerType:a.table.getBodyColumnType(s,h);if(\\\"progressbar\\\"===d){var r=a.table.getBodyColumnDefine(s,h),u=a.table._getCellStyle(s,h),c=a.table.getCellValue(s,h),g=a.table.getCellOriginValue(s,h),p=getQuadProps(getProp2(\\\"padding\\\",u,s,h,a.table)),r=createProgressBarCell(r,u,l.attribute.width,c,g,s,h,p,a.table),u=l.getChildByName(\\\"progress-bar\\\");l.insertBefore(r,u),l.removeChild(u),u.removeAllChild(),u.release()}else if(\\\"sparkline\\\"===d){l.removeAllChild();c=a.table._getCellStyle(s,h),g=getQuadProps(getProp2(\\\"padding\\\",c,s,h,a.table));createSparkLineCellGroup(l,l.parent,l.attribute.x,l.attribute.y,s,h,l.attribute.width,l.attribute.height,g,a.table,getStyleTheme(c,a.table,s,h,getProp2).theme,!1)}else if(\\\"image\\\"===d||\\\"video\\\"===d)updateImageCellContentWhileResize(l,s,h,a.table);else if(\\\"axis\\\"===(null==(p=l.firstChild)?void 0:p.name))null!=(r=l.firstChild)&&r.originAxis.resize(l.attribute.width,l.attribute.height);else{let o=!0;u=l.getChildByName(\\\"custom-container\\\");if(u){let n;if(u.removeAllChild(),l.removeChild(u),!getCustomCellMergeCustom(s,h,l,a.table)){let i,r;if((r=\\\"body\\\"!==a.table.getCellLocation(s,h)?(g=a.table.getHeaderDefine(s,h),i=null==g?void 0:g.headerCustomRender,null==g?void 0:g.headerCustomLayout):(c=a.table.getBodyColumnDefine(s,h),i=(null==c?void 0:c.customRender)||a.table.customRender,null==c?void 0:c.customLayout))||i){d=getQuadProps(getProp2(\\\"padding\\\",a.table._getCellStyle(s,h),s,h,a.table));let e=l.attribute.width,t=l.attribute.height;isMergeCellGroup(l)&&(e=a.table.getColsWidth(l.mergeStartCol,l.mergeEndCol),t=a.table.getRowsHeight(l.mergeStartRow,l.mergeEndRow));p=dealWithCustom(r,i,s,h,e,t,!1,a.table.isAutoRowHeight(h),d,a.table);n=p.elementsGroup,o=p.renderDefault}0<l.childrenCount&&n?l.insertBefore(n,l.firstChild):n&&l.appendChild(n)}}updateMergeCellContentHeight(l,e,t,a.table.isAutoRowHeight(h),o,a.table)}}}function updateMergeCellContentHeight(i,r,n,o,a,l){if(isMergeCellGroup(i)){r=0;for(let e=i.mergeStartRow;e<=i.mergeEndRow;e++)r+=l.getRowHeight(e);var{colStart:s,colEnd:h,rowStart:d,rowEnd:u}=getCellMergeRange(i,l.scenegraph);for(let t=s;t<=h;t++)for(let e=d;e<=u;e++){var c=l.scenegraph.getCell(t,e),g=(c.forEachChildren(e=>{e.setAttributes({dx:0,dy:0})}),a&&updateCellContentHeight(c,r,n,o,getQuadProps((g=l._getCellStyle(t,e)).padding),g.textAlign,g.textBaseline),l.getRowHeight(e)),p=l.getColWidth(t),p=(c.contentHeight=r,resizeCellGroup(c,p,g,{start:{col:i.mergeStartCol,row:i.mergeStartRow},end:{col:i.mergeEndCol,row:i.mergeEndRow}},l))[\\\"widthChange\\\"];p&&(c.needUpdateWidth=!0)}}else{s=l._getCellStyle(i.col,i.row);updateCellContentHeight(i,r,n,o,getQuadProps(s.padding),s.textAlign,s.textBaseline)}}function updateColWidth(e,i,r,t){t||e.table._setColWidth(i,e.table.getColWidth(i)+r,!0);var n=e.getColGroup(i,!0),o=e.getColGroupInRightTopCorner(i),n=(n&&!o&&updateColunmWidth(n,r,\\\"col-corner\\\",e),o&&updateColunmWidth(o,r,\\\"right-top\\\",e),e.getColGroup(i)),o=(n&&updateColunmWidth(n,r,\\\"row-body\\\",e),e.getColGroupInLeftBottomCorner(i)),n=(o&&updateColunmWidth(o,r,\\\"left-bottom\\\",e),e.getColGroupInBottom(i)),a=(n&&updateColunmWidth(n,r,\\\"bottom\\\",e),e.getColGroupInRightBottomCorner(i));a&&updateColunmWidth(a,r,\\\"right-bottom\\\",e),i<e.frozenColCount?(e.cornerHeaderGroup.forEachChildrenSkipChild((e,t)=>{e.col>i&&e.setAttribute(\\\"x\\\",e.attribute.x+r)}),e.rowHeaderGroup.forEachChildrenSkipChild((e,t)=>{e.col>i&&e.setAttribute(\\\"x\\\",e.attribute.x+r)})):(e.colHeaderGroup.forEachChildrenSkipChild((e,t)=>{e.col>i&&e.setAttribute(\\\"x\\\",e.attribute.x+r)}),e.bodyGroup.forEachChildrenSkipChild((e,t)=>{e.col>i&&e.setAttribute(\\\"x\\\",e.attribute.x+r)})),o&&e.leftBottomCornerGroup.forEachChildrenSkipChild((e,t)=>{e.col>i&&e.setAttribute(\\\"x\\\",e.attribute.x+r)}),n&&e.bottomFrozenGroup.forEachChildrenSkipChild((e,t)=>{e.col>i&&e.setAttribute(\\\"x\\\",e.attribute.x+r)}),a&&e.rightBottomCornerGroup.forEachChildrenSkipChild((e,t)=>{e.col>i&&e.setAttribute(\\\"x\\\",e.attribute.x+r)})}function updateColunmWidth(e,r,s,h){var t,d,u,c;let n=!1;const o=null!=(t=null==e?void 0:e.attribute.width)?t:0;if(null!=e&&e.setAttribute(\\\"width\\\",o+r),null!=e&&e.forEachChildren((t,e)=>{if(updateCellWidth(h,t,t.col,t.row,o,o+r,r,\\\"row-body\\\"!==s||t.col<h.table.rowHeaderLevelCount,h.table.internalProps.autoWrapText)){var i=getCellMergeInfo(h.table,t.col,t.row);if(i&&i.end.row-i.start.row)for(let e=i.start.row;e<=i.end.row;e++)resetRowHeight(h,e);else resetRowHeight(h,t.row);n=!0}}),n){let e,t,i,r=0;for(let n=0;n<h.table.colCount;n++)if(\\\"col-corner\\\"===s?(i=0,e=h.getColGroup(n,!0),t=null!=(d=h.colHeaderGroup.attribute.height)?d:0):\\\"row-body\\\"===s?(i=h.table.frozenRowCount,e=h.getColGroup(n,!1),t=null!=(d=h.bodyGroup.attribute.height)?d:0):\\\"bottom\\\"===s?(i=h.table.rowCount-h.table.bottomFrozenRowCount,e=h.getColGroupInBottom(n),t=null!=(u=h.bottomFrozenGroup.attribute.height)?u:0):\\\"left-bottom\\\"===s?(i=h.table.rowCount-h.table.bottomFrozenRowCount,e=h.getColGroupInLeftBottomCorner(n),t=null!=(u=h.leftBottomCornerGroup.attribute.height)?u:0):\\\"right-top\\\"===s?(i=0,e=h.getColGroupInRightTopCorner(n),t=null!=(c=h.rightTopCornerGroup.attribute.height)?c:0):\\\"right-bottom\\\"===s&&(i=h.table.rowCount-h.table.bottomFrozenRowCount,e=h.getColGroupInRightBottomCorner(n),t=null!=(c=h.rightBottomCornerGroup.attribute.height)?c:0),e){let i=0;e.forEachChildren(e=>{var t;e.setAttribute(\\\"y\\\",i),i+=null!=(t=h.table.getRowHeight(e.row))?t:0}),r=i}h.updateContainerHeight(i,r-t);for(let o=0;o<h.table.frozenColCount;o++){var g=h.getColGroupInLeftBottomCorner(o);let t=0;null!=g&&g.forEachChildren(e=>{e.setAttribute(\\\"y\\\",t),t+=h.table.getRowHeight(e.row)})}for(let a=h.table.colCount-h.table.rightFrozenColCount;a<h.table.colCount;a++){var p=h.getColGroupInRightBottomCorner(a);let t=0;null!=p&&p.forEachChildren(e=>{e.setAttribute(\\\"y\\\",t),t+=h.table.getRowHeight(e.row)})}for(let l=h.table.frozenColCount;l<h.table.colCount-h.table.rightFrozenColCount;l++){var f=h.getColGroupInBottom(l);let t=0;null!=f&&f.forEachChildren(e=>{e.setAttribute(\\\"y\\\",t),t+=h.table.getRowHeight(e.row)})}}}function updateCellWidth(a,e,l,s,t,i,r,n,o){if(e.attribute.width===i&&!e.needUpdateWidth)return!1;e.needUpdateWidth=!1,e.setAttribute(\\\"width\\\",i);var h=e;if(!h)return!1;var d=a.table.isAutoRowHeight(s),u=a.table.isHeader(l,s)?a.table._getHeaderLayoutMap(l,s).headerType:a.table.getBodyColumnType(l,s);let c=!1;if(\\\"progressbar\\\"===u){var g=a.table.getBodyColumnDefine(l,s),p=a.table._getCellStyle(l,s),f=a.table.getCellValue(l,s),m=a.table.getCellOriginValue(l,s),b=getQuadProps(getProp2(\\\"padding\\\",p,l,s,a.table)),g=createProgressBarCell(g,p,h.attribute.width,f,m,l,s,b,a.table),p=h.getChildByName(\\\"progress-bar\\\");h.insertBefore(g,p),h.removeChild(p),p.removeAllChild(),p.release()}else if(\\\"sparkline\\\"===u){h.removeAllChild();var f=a.table._getCellStyle(l,s),m=getQuadProps(getProp2(\\\"padding\\\",f,l,s,a.table));createSparkLineCellGroup(h,h.parent,h.attribute.x,h.attribute.y,l,s,h.attribute.width,h.attribute.height,m,a.table,getStyleTheme(f,a.table,l,s,getProp2).theme,!1)}else if(\\\"image\\\"===u||\\\"video\\\"===u)updateImageCellContentWhileResize(h,l,s,a.table);else if(\\\"axis\\\"===(null==(b=h.firstChild)?void 0:b.name)){g=a.table.internalProps.layoutMap.getAxisConfigInPivotChart(l,s),p=getQuadProps(getProp2(\\\"padding\\\",a.table._getCellStyle(l,s),l,s,a.table));g&&(m=new CartesianAxis(g,h.attribute.width,h.attribute.height,p,a.table),h.clear(),h.appendChild(m.component),m.overlap())}else if(\\\"axis\\\"===(null==(f=e.firstChild)?void 0:f.name))null!=(u=e.firstChild)&&u.originAxis.resize(e.attribute.width,e.attribute.height);else{let o=!0;b=e.getChildByName(\\\"custom-container\\\");if(b){let n;if(b.removeAllChild(),e.removeChild(b),!getCustomCellMergeCustom(l,s,e,a.table)){let i,r;if((r=\\\"body\\\"!==a.table.getCellLocation(l,s)?(g=a.table.getHeaderDefine(l,s),i=null==g?void 0:g.headerCustomRender,null==g?void 0:g.headerCustomLayout):(p=a.table.getBodyColumnDefine(l,s),i=(null==p?void 0:p.customRender)||a.table.customRender,null==p?void 0:p.customLayout))||i){m=getQuadProps(getProp2(\\\"padding\\\",a.table._getCellStyle(l,s),l,s,a.table));let e=h.attribute.width,t=h.attribute.height;isMergeCellGroup(h)&&(e=a.table.getColsWidth(h.mergeStartCol,h.mergeEndCol),t=a.table.getRowsHeight(h.mergeStartRow,h.mergeEndRow));f=dealWithCustom(r,i,l,s,e,t,!1,a.table.isAutoRowHeight(s),m,a.table);n=f.elementsGroup,o=f.renderDefault,c=!0}0<e.childrenCount&&n?e.insertBefore(n,e.firstChild):n&&e.appendChild(n)}}u=updateMergeCellContentWidth(h,i,r,d,o,a.table);c=c||u}return!(!d||!o)&&c}function updateMergeCellContentWidth(o,a,l,s,h,d){if(isMergeCellGroup(o)){a=0;let i=!1;for(let e=o.mergeStartCol;e<=o.mergeEndCol;e++)a+=d.getColWidth(e);let r=0;for(let t=o.mergeStartRow;t<=o.mergeEndRow;t++)r+=d.getRowHeight(t);var{colStart:u,colEnd:c,rowStart:g,rowEnd:p}=getCellMergeRange(o,d.scenegraph);for(let n=u;n<=c;n++)for(let t=g;t<=p;t++)if(n!==o.col||t===o.row){var f=d.scenegraph.getCell(n,t);f.forEachChildren(e=>{e.setAttributes({dx:0,dy:0})});let e=!1;h&&(b=getQuadProps((m=d._getCellStyle(n,t)).padding),v=m.textAlign,m=m.textBaseline,e=updateCellContentWidth(f,a,r,l,s,b,v,m,d.scenegraph),b=getHierarchyOffset(f.col,f.row,d))&&(v=f.getChildByName(\\\"text\\\"),\\\"icon-left\\\"!==(null==(m=f.getChildByName(\\\"expand\\\")||f.getChildByName(\\\"collapse\\\"))?void 0:m.role))&&v&&v.setAttribute(\\\"dx\\\",b);var m=d.getRowHeight(t),b=d.getColWidth(n),v=(f.contentWidth=a,resizeCellGroup(f,b,m,{start:{col:o.mergeStartCol,row:o.mergeStartRow},end:{col:o.mergeEndCol,row:o.mergeEndRow}},d))[\\\"heightChange\\\"];v&&(f.needUpdateHeight=!0),i=i||e}return i}var u=d._getCellStyle(o.col,o.row),e=getQuadProps(u.padding),t=u.textAlign,u=u.textBaseline;return updateCellContentWidth(o,a,d.getRowHeight(o.row),l,s,e,t,u,d.scenegraph)}function resetRowHeight(e,t){var i=Math.round(computeRowHeight(t,0,e.table.colCount-1,e.table));e.table._setRowHeight(t,i,!0);for(let o=0;o<e.table.colCount;o++){var r=i,n=e.highPerformanceGetCell(o,t);if(\\\"empty\\\"===n.role)return;updateCellHeightForRow(e,n,o,t,r,r-n.attribute.height,e.table.isHeader(o,t))}}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),function(e){e.dropDown=\\\"dropDown\\\",e.contextmenu=\\\"contextmenu\\\",e.custom=\\\"custom\\\"}(MenuType=MenuType||{});var menuStyle={fontSize:12,fontFamily:\\\"Arial,sans-serif\\\",color:\\\"#000\\\",highlightColor:\\\"#2E68CF\\\",hoverBgColor:\\\"#EEE\\\",lineHeight:30,bgColor:\\\"#FFF\\\",cornerRadius:4,borderWidth:.5,borderColor:\\\"#CCC\\\",menuPadding:6,menuItemPadding:9,maxLineWidth:200},MenuHandler=class{constructor(e){this._table=e,this._menuInstance=new Group2({x:0,y:0,fill:menuStyle.bgColor,stroke:menuStyle.borderColor,cornerRadius:menuStyle.cornerRadius,lineWidth:menuStyle.borderWidth}),this._menuInfo={x:-1,y:-1,col:-1,row:-1,type:MenuType.dropDown,menuInfo:[],highlightIndex:-1}}bindTableComponent(e){e.appendChild(this._menuInstance),this.bindEvent()}release(){}attach(e,t,i,r,n,o){if(n===MenuType.dropDown&&this.checkDropDownMenuChange(i,r)){var a=this.getMenuInfo(i,r,n);if(!a)return;var{menuInfo:a,highlightIndex:l}=a;this.updateMenuInfo(i,r,n,a,l),this.updateMenuInstance(a,l)}else if(n===MenuType.contextmenu&&this.checkContextMenuChange(e,t)){a=this.getMenuInfo(i,r,n);if(!a)return;var{menuInfo:l,highlightIndex:a}=a;this.updateMenuInfo(i,r,n,l,a),this.updateMenuInstance(l,a)}this.updatePosition(e-this._table.scenegraph.x,t-this._table.scenegraph.y),this.addToScene()}updateMenuInfo(e,t,i,r,n){this._menuInfo.col=e,this._menuInfo.row=t,this._menuInfo.type=i,this._menuInfo.menuInfo=r,this._menuInfo.highlightIndex=n}checkDropDownMenuChange(e,t){var{type:i,col:r,row:n}=this._menuInfo;return i!==MenuType.dropDown||e!==r||t!==n}checkContextMenuChange(e,t){var{type:i,menuInfo:r}=this._menuInfo;return i!==MenuType.contextmenu||r!==(null==(i=this._table.internalProps.menu)?void 0:i.contextMenuItems)}updateMenuInstance(e,s){this._menuInstance.removeAllChild();let h=menuStyle.menuPadding;const d=menuStyle.menuPadding;let u=0;e.forEach((e,t)=>{var i=s===t;let r,n;\\\"string\\\"==typeof e?n=e:\\\"object\\\"==typeof e&&(n=e.text,r=i?e.selectedIcon:e.icon);const o=new Group2({y:h,x:d,height:menuStyle.lineHeight,fill:menuStyle.bgColor});o.role=\\\"menu-item\\\",this._menuInstance.appendChild(o),o.stateProxy=e=>\\\"hover\\\"===e?{fill:menuStyle.hoverBgColor}:{fill:menuStyle.bgColor},o.addEventListener(\\\"pointerenter\\\",e=>{o.addState(\\\"hover\\\",!0,!1),this._table.scenegraph.updateNextFrame()}),o.addEventListener(\\\"pointerleave\\\",e=>{o.removeState(\\\"hover\\\",!1),this._table.scenegraph.updateNextFrame()});var a,l,i=new Text({x:menuStyle.menuItemPadding,y:menuStyle.menuItemPadding,fill:i?menuStyle.highlightColor:menuStyle.color,text:n,textBaseline:\\\"top\\\",fontSize:menuStyle.fontSize,fontFamily:menuStyle.fontFamily,pickable:!1,maxLineWidth:menuStyle.maxLineWidth,ellipsis:\\\"…\\\"});o.addChild(i),r&&(i.AABBBounds.height(),a=null!=(a=r.width)?a:16,l=null!=(l=r.height)?l:16,(l=new Icon({x:menuStyle.menuItemPadding,y:(menuStyle.lineHeight-l)/2,width:a,height:l,image:r.svg,pickable:!1})).role=\\\"menu-icon\\\",o.insertBefore(l,i),i.setAttribute(\\\"x\\\",a+menuStyle.menuItemPadding)),u=Math.max(o.AABBBounds.width(),u),h+=menuStyle.lineHeight}),this._menuInstance.setAttributes({width:u+2*menuStyle.menuItemPadding+2*menuStyle.menuPadding,height:h+menuStyle.menuPadding}),this._menuInstance.forEachChildren(e=>{e.setAttribute(\\\"width\\\",u+2*menuStyle.menuItemPadding)})}updatePosition(e,t){this._menuInstance.setAttributes({x:this._menuInfo.type===MenuType.dropDown?e-this._menuInstance.attribute.width:e,y:t}),this._menuInfo.x=MenuType.dropDown?e-this._menuInstance.attribute.width:e,this._menuInfo.y=t}addToScene(){this._table.scenegraph.updateNextFrame()}detach(){this._menuInstance.setAttributes({x:-1e3,y:-1e3}),this._table.scenegraph.updateNextFrame()}getMenuInfo(i,r,e){if(e===MenuType.dropDown){var{dropDownMenu:n=this._table.globalDropDownMenu}=this._table._getHeaderLayoutMap(i,r);let t=-1;if(Array.isArray(n))for(let e=0;e<n.length;e++)if(this._table._dropDownMenuIsHighlight(i,r,e)){t=e;break}return{menuInfo:n,highlightIndex:t}}if(e===MenuType.contextmenu){var t,o=null==(o=this._table.internalProps.menu)?void 0:o.contextMenuItems;let e;return Array.isArray(o)?e=o:\\\"function\\\"==typeof o&&(t=(this._table.isHeader(i,r)?this._table.getHeaderDefine(i,r):this._table.getBodyColumnDefine(i,r))[\\\"field\\\"],e=o(t,r,i)),{menuInfo:e,highlightIndex:-1}}}bindEvent(){this._menuInstance.addEventListener(\\\"click\\\",e=>{var t,i=e[\\\"target\\\"];i&&\\\"menu-item\\\"===i.role&&(i=this.getEventInfo(i),t=this._table.getMenuInfo(this._menuInfo.col,this._menuInfo.row,this._menuInfo.type),(i=Object.assign(i,t)).event=e.nativeEvent,this._table.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLICK,i))})}getEventInfo(i){var e=i.parent;let r=0;e.forEachChildren((e,t)=>e===i&&(r=t-1,!0));var e=\\\"string\\\"==typeof this._menuInfo.menuInfo[r]?this._menuInfo.menuInfo[r]:this._menuInfo.menuInfo[r].text,t=\\\"string\\\"!=typeof this._menuInfo.menuInfo[r]&&this._menuInfo.menuInfo[r].menuKey||e;return{col:this._menuInfo.col,row:this._menuInfo.row,dropDownIndex:r,highlight:r===this._menuInfo.highlightIndex,text:e,menuKey:t}}get bounds(){return this._menuInstance.globalAABBBounds}},regedIcons2=(init_esbuild_inject(),get3()),DrillIcon=class{constructor(){var e=regedIcons2.drillDown;this.icon=new Icon({x:-1e3,y:-1e3,image:e.svg,width:e.width,height:e.height,dx:-e.width/2,dy:-e.height/2,visible:!1,funcType:e.funcType,cursor:e.cursor}),this.icon.role=\\\"icon-drill\\\"}appand(e){e.appendChild(this.icon)}update(e,t,i,r,n,o){var a,l;!e||r&&n?this.icon.setAttributes({x:-1e3,y:-1e3,visible:!1}):(a=regedIcons2.drillDown,l=regedIcons2.drillUp,this.icon.setAttributes({x:t,y:i,image:(r?a:l).svg,visible:!0}),this.icon.loadImage(this.icon.attribute.image)),o.updateNextFrame()}},CellMover=(init_esbuild_inject(),class{constructor(e){var t=e.theme.dragHeaderSplitLine.lineWidth,i=e.theme.dragHeaderSplitLine.lineColor,r=e.theme.dragHeaderSplitLine.shadowBlockColor;this.columnMoverLabel=createSymbol({visible:!1,pickable:!1,x:0,y:0,symbolType:\\\"triangle\\\",fill:i}),this.columnMoverLine=createLine({visible:!1,pickable:!1,stroke:i,lineWidth:t,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]}),this.columnMoverBack=createRect({visible:!1,pickable:!1,fill:r,x:0,y:0,width:0,height:0}),this.table=e}appand(e){e.appendChild(this.columnMoverLabel),e.appendChild(this.columnMoverLine),e.appendChild(this.columnMoverBack)}show(e,t,i){var r=this.table.getCellLocation(e,t),n=getCellMergeInfo(this.table,e,t);n&&(e=n.start.col,t=n.start.row);let o=0,a=0,l=0,s=0,h=0,d=0,u=0,c=0,g=Math.PI;var p=[];\\\"columnHeader\\\"===r?(o=this.table.getColsWidth(0,e-1)-this.table.stateManager.scroll.horizontalBarPos,a=this.table.getRowsHeight(0,this.table.frozenRowCount-1),s=this.table.tableNoFrameHeight,l=n?this.table.getColsWidth(n.start.col,n.end.col):this.table.getColWidth(e),h=o-i,u=o+l,c=2,p.push({x:0,y:0}),p.push({x:0,y:this.table.tableNoFrameHeight})):\\\"rowHeader\\\"!==r&&!this.table.internalProps.layoutMap.isSeriesNumberInBody(e,t)||(a=this.table.getRowsHeight(0,t-1)-this.table.stateManager.scroll.verticalBarPos,o=this.table.getColsWidth(0,this.table.frozenColCount-1),l=this.table.tableNoFrameWidth,s=n?this.table.getRowsHeight(n.start.row,n.end.row):this.table.getRowHeight(t),d=a-i,u=2,c=a+s,g=Math.PI/2,p.push({x:0,y:0}),p.push({x:this.table.tableNoFrameWidth,y:0})),this.columnMoverBack.setAttributes({visible:!0,x:o-h,y:a-d,width:l,height:s,dx:h,dy:d}),this.columnMoverLine.setAttributes({x:u,y:c,visible:!0,points:p}),this.columnMoverLabel.setAttributes({visible:!0,x:u,y:c,angle:g})}hide(){this.columnMoverLabel.setAttribute(\\\"visible\\\",!1),this.columnMoverLine.setAttribute(\\\"visible\\\",!1),this.columnMoverBack.setAttribute(\\\"visible\\\",!1)}update(e,t,i,r){\\\"number\\\"==typeof e&&\\\"number\\\"==typeof t?(this.columnMoverLabel.setAttribute(\\\"x\\\",t),this.columnMoverLine.setAttribute(\\\"x\\\",t),this.columnMoverBack.setAttribute(\\\"x\\\",e)):\\\"number\\\"==typeof i&&\\\"number\\\"==typeof r&&(this.columnMoverLabel.setAttribute(\\\"y\\\",r),this.columnMoverLine.setAttribute(\\\"y\\\",r),this.columnMoverBack.setAttribute(\\\"y\\\",i))}updateStyle(){var e=this.table.theme.dragHeaderSplitLine.lineWidth,t=this.table.theme.dragHeaderSplitLine.lineColor,i=this.table.theme.dragHeaderSplitLine.shadowBlockColor;this.columnMoverLabel.setAttributes({fill:t}),this.columnMoverLine.setAttributes({stroke:t,lineWidth:e}),this.columnMoverBack.setAttributes({fill:i})}});function getColX(e,t,i){if(i)return Math.min(t.tableNoFrameWidth,t.getAllColsWidth())-t.getColsWidth(e,t.colCount-1);let r=t.getColsWidth(0,e);return e>=t.frozenColCount&&(r-=t.scrollLeft),r}function getRowY(e,t,i){if(i)return Math.min(t.tableNoFrameWidth,t.getAllRowsHeight())-t.getRowsHeight(e,t.rowCount-1);let r=t.getRowsHeight(0,e);return e>=t.frozenRowCount&&(r-=t.scrollLeft),r}init_esbuild_inject();var TableComponent=class{constructor(e){this.table=e;var t=this.table.theme,i=(this.createScrollBar(),null==(i=t.columnResize)?void 0:i.lineColor),r=null==(r=t.columnResize)?void 0:r.lineWidth,n=null==(n=t.columnResize)?void 0:n.bgColor,o=null==(o=t.columnResize)?void 0:o.width,a=null==(a=t.columnResize)?void 0:a.labelColor,l=null==(l=t.columnResize)?void 0:l.labelFontSize,s=null==(s=t.columnResize)?void 0:s.labelFontFamily,h=null==(h=t.columnResize)?void 0:h.labelBackgroundFill,d=null==(d=t.columnResize)?void 0:d.labelBackgroundCornerRadius,u=(this.columnResizeLine=createLine({visible:!1,pickable:!1,stroke:i,lineWidth:r,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]}),this.columnResizeBgLine=createLine({visible:!1,pickable:!1,stroke:n,lineWidth:o,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]}),createText({visible:!1,pickable:!1,x:0,y:0,fontSize:l,fill:a,fontFamily:s,text:\\\"\\\",textBaseline:\\\"top\\\",dx:16,dy:-l/2})),c=createRect({visible:!1,pickable:!1,fill:h,x:0,y:0,width:5*l*.8,height:l+8,cornerRadius:d,dx:12,dy:-l/2-4}),c=(this.columnResizeLabel=createGroup({visible:!1,pickable:!1,x:0,y:0}),this.columnResizeLabel.appendChild(c),this.columnResizeLabel.appendChild(u),this.rowResizeLine=createLine({visible:!1,pickable:!1,stroke:i,lineWidth:r,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]}),this.rowResizeBgLine=createLine({visible:!1,pickable:!1,stroke:n,lineWidth:o,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]}),createText({visible:!1,pickable:!1,x:0,y:0,fontSize:l,fill:a,fontFamily:s,text:\\\"\\\",textBaseline:\\\"top\\\",dx:16,dy:-l/2})),u=createRect({visible:!1,pickable:!1,fill:h,x:0,y:0,width:5*l*.8,height:l+8,cornerRadius:d,dx:12,dy:-l/2-4}),n=(this.rowResizeLabel=createGroup({visible:!1,pickable:!1,x:0,y:0}),this.rowResizeLabel.appendChild(u),this.rowResizeLabel.appendChild(c),this.cellMover=new CellMover(this.table),null==(r=null==(i=t.frozenColumnLine)?void 0:i.shadow)?void 0:r.width),s=null==(a=null==(o=t.frozenColumnLine)?void 0:o.shadow)?void 0:a.startColor,l=null==(d=null==(h=t.frozenColumnLine)?void 0:h.shadow)?void 0:d.endColor;this.frozenShadowLine=createRect({visible:!0,pickable:!1,x:0,y:0,width:n,height:0,fill:{gradient:\\\"linear\\\",x0:0,y0:0,x1:1,y1:0,stops:[{color:s,offset:0},{color:l,offset:1}]}}),this.rightFrozenShadowLine=createRect({visible:!0,pickable:!1,x:0,y:0,width:n,height:0,fill:{gradient:\\\"linear\\\",x0:0,y0:0,x1:1,y1:0,stops:[{color:l,offset:0},{color:s,offset:1}]}}),this.menu=new MenuHandler(this.table),this.drillIcon=new DrillIcon}addToGroup(e){e.addChild(this.frozenShadowLine),e.addChild(this.rightFrozenShadowLine),e.addChild(this.columnResizeBgLine),e.addChild(this.columnResizeLine),e.addChild(this.columnResizeLabel),e.addChild(this.rowResizeBgLine),e.addChild(this.rowResizeLine),e.addChild(this.rowResizeLabel),(this.table.theme.scrollStyle.hoverOn&&!this.table.theme.scrollStyle.barToSide?(e.addChild(this.hScrollBar),e):(e.stage.defaultLayer.addChild(this.hScrollBar),e.stage.defaultLayer)).addChild(this.vScrollBar),this.menu.bindTableComponent(e),this.drillIcon.appand(e),this.cellMover.appand(e)}createScrollBar(){var e=this.table.theme,t=null==(t=e.scrollStyle)?void 0:t.scrollRailColor,i=null==(i=e.scrollStyle)?void 0:i.scrollSliderColor,e=null==(e=e.scrollStyle)?void 0:e.width;this.hScrollBar=new ScrollBar({direction:\\\"horizontal\\\",x:2*-this.table.tableNoFrameWidth,y:2*-this.table.tableNoFrameHeight,width:this.table.tableNoFrameWidth,height:e,padding:0,railStyle:{fill:t},sliderStyle:{fill:i},range:[0,.1],visible:!1}),this.hScrollBar.render(),this.hScrollBar.hideAll(),this.vScrollBar=new ScrollBar({direction:\\\"vertical\\\",x:2*-this.table.tableNoFrameWidth,y:2*-this.table.tableNoFrameHeight,width:e,height:this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight(),padding:0,railStyle:{fill:t},sliderStyle:{fill:i},range:[0,.1],visible:!1}),this.vScrollBar.render(),this.vScrollBar.hideAll()}updateScrollBar(){var e,t,i,r,n=this.table.stateManager.scroll.horizontalBarPos,o=this.table.stateManager.scroll.verticalBarPos,a=this.table.theme,l=null==(l=a.scrollStyle)?void 0:l.width,a=null==(a=a.scrollStyle)?void 0:a.visible,s=Math.ceil(this.table.scenegraph.tableGroup.attribute.width),h=Math.ceil(this.table.scenegraph.tableGroup.attribute.height),d=this.table.getAllRowsHeight(),u=this.table.getAllColsWidth(),c=this.table.getFrozenRowsHeight(),g=this.table.getFrozenColsWidth(),p=this.table.getBottomFrozenRowsHeight(),f=this.table.getRightFrozenColsWidth();s<u?(e=Math.min(h,d),r=Math.max(.05,(s-g)/(u-g)),t=this.table.theme.scrollStyle.hoverOn,i=0,i=this.table.theme.scrollStyle.barToSide?this.table.tableNoFrameHeight-(t?l:-this.table.scenegraph.tableGroup.attribute.y)+this.table.tableY:e-(t?l:-this.table.scenegraph.tableGroup.attribute.y),this.hScrollBar.setAttributes({x:g+(t?0:this.table.scenegraph.tableGroup.attribute.x),y:i,width:s-g-f,range:[0,r],visible:\\\"always\\\"===a}),e=this.hScrollBar.AABBBounds&&this.hScrollBar.globalAABBBounds,this.hScrollBar._viewPosition={x:e.x1,y:e.y1},\\\"always\\\"===a&&this.hScrollBar.showAll()):this.hScrollBar.setAttributes({x:2*-this.table.tableNoFrameWidth,y:2*-this.table.tableNoFrameHeight,width:0,visible:!1}),h<d?(t=Math.min(s,u),i=Math.max(.05,(h-c)/(d-c)),g=0,f=this.table.theme.scrollStyle.hoverOn,g=this.table.theme.scrollStyle.barToSide?this.table.tableNoFrameWidth-(f?l:-this.table.scenegraph.tableGroup.attribute.x)+this.table.tableX:t-(f?l:-this.table.scenegraph.tableGroup.attribute.x),this.vScrollBar.setAttributes({x:g,y:c+(f?0:this.table.scenegraph.tableGroup.attribute.y),height:h-c-p,range:[0,i],visible:\\\"always\\\"===a}),r=this.vScrollBar.AABBBounds&&this.vScrollBar.globalAABBBounds,this.vScrollBar._viewPosition={x:r.x1,y:r.y1},\\\"always\\\"===a&&this.vScrollBar.showAll()):this.vScrollBar.setAttributes({x:2*-this.table.tableNoFrameWidth,y:2*-this.table.tableNoFrameHeight,height:0,visible:!1}),this.table.stateManager.setScrollLeft(n),this.table.stateManager.setScrollTop(o)}hideResizeCol(){this.columnResizeLine.setAttribute(\\\"visible\\\",!1),this.columnResizeBgLine.setAttribute(\\\"visible\\\",!1),this.columnResizeLabel.setAttribute(\\\"visible\\\",!1),this.columnResizeLabel.hideAll()}showResizeCol(e,t,i){var r=getColX(e,this.table,i);this.columnResizeLine.setAttributes({visible:!0,x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.columnResizeBgLine.setAttributes({visible:!0,x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.columnResizeLabel.showAll(),this.columnResizeLabel.setAttributes({visible:!0,x:r,y:t}),this.columnResizeLabel.lastChild.setAttribute(\\\"text\\\",this.table.getColWidth(e)+\\\"px\\\")}updateResizeCol(e,t,i){var r=getColX(e,this.table,i);this.columnResizeLine.setAttributes({x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.columnResizeBgLine.setAttributes({x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.columnResizeLabel.setAttributes({x:r,y:t}),this.columnResizeLabel.lastChild.setAttribute(\\\"text\\\",Math.floor(this.table.getColWidth(e))+\\\"px\\\")}hideResizeRow(){this.rowResizeLine.setAttribute(\\\"visible\\\",!1),this.rowResizeBgLine.setAttribute(\\\"visible\\\",!1),this.rowResizeLabel.setAttribute(\\\"visible\\\",!1),this.rowResizeLabel.hideAll()}showResizeRow(e,t,i){var r=getRowY(e,this.table,i);this.rowResizeLine.setAttributes({visible:!0,y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.rowResizeBgLine.setAttributes({visible:!0,y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.rowResizeLabel.showAll(),this.rowResizeLabel.setAttributes({visible:!0,y:r,x:t}),this.rowResizeLabel.lastChild.setAttribute(\\\"text\\\",this.table.getRowHeight(e)+\\\"px\\\")}updateResizeRow(e,t,i){var r=getRowY(e,this.table,i);this.rowResizeLine.setAttributes({y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.rowResizeBgLine.setAttributes({y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.rowResizeLabel.setAttributes({y:r,x:t}),this.rowResizeLabel.lastChild.setAttribute(\\\"text\\\",Math.floor(this.table.getRowHeight(e))+\\\"px\\\")}hideMoveCol(){this.cellMover.hide()}showMoveCol(e,t,i){this.cellMover.show(e,t,i)}updateMoveCol(e,t,i,r){this.cellMover.update(e,t,i,r)}setFrozenColumnShadow(e,t){var i;e<0?this.frozenShadowLine.setAttributes({visible:!1}):(i=getColX(e,this.table,t),this.frozenShadowLine.setAttributes({visible:!0,x:i,height:this.table.getDrawRange().height}))}setRightFrozenColumnShadow(e){var t;e>=this.table.colCount?this.rightFrozenShadowLine.setAttributes({visible:!1}):(t=getColX(e,this.table,!0),this.rightFrozenShadowLine.setAttributes({visible:!0,x:t-this.rightFrozenShadowLine.attribute.width,height:this.table.getDrawRange().height}))}hideVerticalScrollBar(){var e=this.table.theme.scrollStyle.visible;\\\"focus\\\"!==e&&\\\"scrolling\\\"!==e||(this.vScrollBar.setAttribute(\\\"visible\\\",!1),this.vScrollBar.hideAll(),this.table.scenegraph.updateNextFrame())}showVerticalScrollBar(){var e=this.table.theme.scrollStyle.visible;\\\"focus\\\"!==e&&\\\"scrolling\\\"!==e||(this.vScrollBar.setAttribute(\\\"visible\\\",!0),this.vScrollBar.showAll(),this.table.scenegraph.updateNextFrame())}hideHorizontalScrollBar(){var e=this.table.theme.scrollStyle.visible;\\\"focus\\\"!==e&&\\\"scrolling\\\"!==e||(this.hScrollBar.setAttribute(\\\"visible\\\",!1),this.hScrollBar.hideAll(),this.table.scenegraph.updateNextFrame())}showHorizontalScrollBar(){var e=this.table.theme.scrollStyle.visible;\\\"focus\\\"!==e&&\\\"scrolling\\\"!==e||(this.hScrollBar.setAttribute(\\\"visible\\\",!0),this.hScrollBar.showAll(),this.table.scenegraph.updateNextFrame())}updateVerticalScrollBarPos(e){var t=this.vScrollBar.attribute.range,t=t[1]-t[0],i=e*(1-t),i=(this.vScrollBar.setAttribute(\\\"range\\\",[i,i+t]),this.vScrollBar.AABBBounds&&this.vScrollBar.globalAABBBounds);this.vScrollBar._viewPosition={x:i.x1,y:i.y1}}updateHorizontalScrollBarPos(e){var t=this.hScrollBar.attribute.range,t=t[1]-t[0],i=e*(1-t),i=(this.hScrollBar.setAttribute(\\\"range\\\",[i,i+t]),this.hScrollBar.AABBBounds&&this.hScrollBar.globalAABBBounds);this.hScrollBar._viewPosition={x:i.x1,y:i.y1}}updateStyle(){var e=this.table.theme,t=null==(t=e.scrollStyle)?void 0:t.scrollRailColor,i=null==(i=e.scrollStyle)?void 0:i.scrollSliderColor,r=null==(r=e.scrollStyle)?void 0:r.width,t=(this.hScrollBar.setAttributes({height:r,railStyle:{fill:t},sliderStyle:{fill:i}}),this.vScrollBar.setAttributes({width:r,railStyle:{fill:t},sliderStyle:{fill:i}}),null==(r=e.columnResize)?void 0:r.lineColor),r=null==(i=e.columnResize)?void 0:i.lineWidth,i=null==(i=e.columnResize)?void 0:i.bgColor,n=null==(n=e.columnResize)?void 0:n.width,r=(this.columnResizeLine.setAttributes({stroke:t,lineWidth:r}),this.columnResizeBgLine=createLine({stroke:i,lineWidth:n}),null==(t=e.columnResize)?void 0:t.labelColor),n=null==(i=e.columnResize)?void 0:i.labelFontSize,i=null==(t=e.columnResize)?void 0:t.labelFontFamily,t=null==(t=e.columnResize)?void 0:t.labelBackgroundFill,o=null==(o=e.columnResize)?void 0:o.labelBackgroundCornerRadius,t=(this.columnResizeLabel.lastChild.setAttributes({fontSize:n,fill:r,fontFamily:i,dy:-n/2}),this.columnResizeLabel.firstChild.setAttributes({fill:t,width:5*n*.8,height:n+8,cornerRadius:o,dy:-n/2-4}),this.rowResizeLabel.lastChild.setAttributes({fontSize:n,fill:r,fontFamily:i,dy:-n/2}),this.rowResizeLabel.firstChild.setAttributes({fill:t,width:5*n*.8,height:n+8,cornerRadius:o,dy:-n/2-4}),null==(i=null==(r=e.frozenColumnLine)?void 0:r.shadow)?void 0:i.width),r=null==(n=null==(o=e.frozenColumnLine)?void 0:o.shadow)?void 0:n.startColor,n=null==(o=null==(i=e.frozenColumnLine)?void 0:i.shadow)?void 0:o.endColor;this.frozenShadowLine.setAttributes({width:t,fill:{gradient:\\\"linear\\\",x0:0,y0:0,x1:1,y1:0,stops:[{color:r,offset:0},{color:n,offset:1}]}}),this.rightFrozenShadowLine.setAttributes({width:t,fill:{gradient:\\\"linear\\\",x0:0,y0:0,x1:1,y1:0,stops:[{color:n,offset:0},{color:r,offset:1}]}}),this.cellMover.updateStyle()}};function createFrameBorder(r,n,e,t,o){if(n){var a=\\\"table\\\"===e,{shadowBlur:l,shadowOffsetX:s,shadowOffsetY:h,shadowColor:d,cornerRadius:u,borderColor:c,borderLineWidth:g,borderLineDash:p}=n;let i=!1;var f={},m={pickable:!1},s=(l&&a&&(m.shadowBlur=l,m.shadowOffsetX=s,m.shadowOffsetY=h,m.shadowColor=d,m.stroke=!0,m.stroke=d,m.lineWidth=1,i=!0),g&&(m.stroke=!0,m.fill=!1,m.stroke=getStroke(c,t),m.lineWidth=g,p&&(m.lineDash=p),m.lineCap=\\\"butt\\\"),Array.isArray(c)&&(m.strokeArrayColor=getQuadProps(c)),Array.isArray(g)&&(m.strokeArrayWidth=getQuadProps(g),m.lineWidth=1),u&&(f.cornerRadius=m.cornerRadius=u),m.strokeArrayWidth?m.strokeArrayWidth[0]:null!=(l=m.lineWidth)?l:0),d=m.strokeArrayWidth?m.strokeArrayWidth[1]:null!=(h=m.lineWidth)?h:0,c=m.strokeArrayWidth?m.strokeArrayWidth[2]:null!=(p=m.lineWidth)?p:0,u=m.strokeArrayWidth?m.strokeArrayWidth[3]:null!=(g=m.lineWidth)?g:0;if(r.setAttributes(f),!o&&m.stroke)if(m.x=u/2,m.y=s/2,m.pickable=!1,a){let e,t;n.innerBorder?(m.x=r.attribute.x+u/2,m.y=r.attribute.y+s/2,m.width=r.attribute.width-u/2-d/2,m.height=r.attribute.height-s/2-c/2):(m.x=r.attribute.x-u/2,m.y=r.attribute.y-s/2,m.width=r.attribute.width+u/2+d/2,m.height=r.attribute.height+s/2+c/2),i?(m.fill=\\\"white\\\",m.notAdjustPos=!0,(t=createGroup(m)).name=\\\"table-border-rect\\\",e=createRect({x:u/2,y:s/2,width:r.attribute.width,height:r.attribute.height,fill:\\\"red\\\",cornerRadius:r.attribute.cornerRadius,globalCompositeOperation:\\\"destination-out\\\"}),t.addChild(e),l=createRect({width:1,height:1,fill:\\\"transparent\\\",pickable:!1}),t.addChild(l)):(t=createRect(m)).name=\\\"table-border-rect\\\",n.innerBorder&&!i?r.parent.insertAfter(t,r):r.parent.insertBefore(t,r),r.border=t}else{m.width=r.attribute.width-u/2-d/2,m.height=r.attribute.height-s/2-c/2;h=createRect(m);h.name=\\\"border-rect\\\",r.addChild(h),r.border=h}}}function updateFrameBorder(e,t,i){var r,n=t[\\\"borderColor\\\"];null!=(r=e.border)&&r.setAttribute(\\\"stroke\\\",getStroke(n,i))}function getStroke(t,e){let i=!0;return e&&!isArray_default(t)?i=e.map(e=>!!e&&t):e?i=e:isArray_default(t)?isArray_default(t)&&(i=!0):i=t,i}function updateFrameBorderSize(e){var t,i,r,n;e.border&&(t=e.border.attribute.strokeArrayWidth?e.border.attribute.strokeArrayWidth[0]:null!=(t=e.border.attribute.lineWidth)?t:0,i=e.border.attribute.strokeArrayWidth?e.border.attribute.strokeArrayWidth[1]:null!=(i=e.border.attribute.lineWidth)?i:0,r=e.border.attribute.strokeArrayWidth?e.border.attribute.strokeArrayWidth[2]:null!=(r=e.border.attribute.lineWidth)?r:0,n=e.border.attribute.strokeArrayWidth?e.border.attribute.strokeArrayWidth[3]:null!=(n=e.border.attribute.lineWidth)?n:0,e.border.setAttributes({width:e.attribute.width-n/2-i/2,height:e.attribute.height-t/2-r/2}),\\\"group\\\"===e.border.type)&&e.border.firstChild.setAttributes({width:e.attribute.width,height:e.attribute.height})}function updateCornerRadius(e){var t,i,r,n,o,a,l,s,h,d;e.theme.frameStyle.cornerRadius&&(t=e.theme.frameStyle.cornerRadius,({cornerHeaderGroup:i,colHeaderGroup:r,rowHeaderGroup:n,bodyGroup:o,rightTopCornerGroup:a,leftBottomCornerGroup:l,rightBottomCornerGroup:s,rightFrozenGroup:h,bottomFrozenGroup:d}=e.scenegraph),i.setAttribute(\\\"cornerRadius\\\",0),r.setAttribute(\\\"cornerRadius\\\",0),n.setAttribute(\\\"cornerRadius\\\",0),o.setAttribute(\\\"cornerRadius\\\",0),a.setAttribute(\\\"cornerRadius\\\",0),l.setAttribute(\\\"cornerRadius\\\",0),s.setAttribute(\\\"cornerRadius\\\",0),h.setAttribute(\\\"cornerRadius\\\",0),d.setAttribute(\\\"cornerRadius\\\",0),0<i.attribute.width&&0<i.attribute.height?setCornerRadius(i,[t,0,0,0]):0<r.attribute.height?setCornerRadius(r,[t,0,0,0]):0<n.attribute.width?setCornerRadius(n,[t,0,0,0]):setCornerRadius(o,[t,0,0,0]),0<l.attribute.width&&0<l.attribute.height?setCornerRadius(l,[0,0,0,t]):0<d.attribute.height?setCornerRadius(d,[0,0,0,t]):0<n.attribute.width?setCornerRadius(n,[0,0,0,t]):setCornerRadius(o,[0,0,0,t]),0<a.attribute.width&&0<a.attribute.height?setCornerRadius(a,[0,t,0,0]):0<r.attribute.height?setCornerRadius(r,[0,t,0,0]):0<h.attribute.width?setCornerRadius(h,[0,t,0,0]):setCornerRadius(o,[0,t,0,0]),0<s.attribute.width&&0<s.attribute.height?setCornerRadius(s,[0,0,t,0]):0<h.attribute.width?setCornerRadius(h,[0,0,t,0]):0<d.attribute.height?setCornerRadius(d,[0,0,t,0]):setCornerRadius(o,[0,0,t,0]))}function setCornerRadius(e,t){e.setAttribute(\\\"cornerRadius\\\",t),e.border&&e.border.setAttribute(\\\"cornerRadius\\\",t)}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var chartRenderKeys=[],chartRenderQueueList=[],batchRenderChartCount=5,isHandlingChartQueue=!1;function setBatchRenderChartCount(e){isValid_default(e)&&(batchRenderChartCount=e)}function IsHandlingChartQueue(){return isHandlingChartQueue}function renderChart(e){var t,i,r,n;const{axes:o,dataId:a,data:l,spec:s}=e.attribute,h=e[\\\"chartInstance\\\"],d=e.getViewBox();if(d.x2<=d.x1&&(d.x2=d.x1+1),d.y2<=d.y1&&(d.y2=d.y1+1),null!=o&&o.forEach((e,t)=>{var i;\\\"band\\\"===e.type?h.updateModelSpec({type:\\\"axes\\\",index:t},{domain:e.domain.slice(0)},!0):h.updateModelSpecSync({type:\\\"axes\\\",index:t},{min:null!=(i=null==(i=e.range)?void 0:i.min)?i:0,max:null!=(i=null==(i=e.range)?void 0:i.max)?i:0},!0)}),h.updateViewBox({x1:d.x1-e.getRootNode().table.scrollLeft,x2:d.x2-e.getRootNode().table.scrollLeft,y1:d.y1-e.getRootNode().table.scrollTop,y2:d.y2-e.getRootNode().table.scrollTop},!1,!1),null!=(t=null==(n=e.getRootNode().table.internalProps.layoutMap)?void 0:n.updateDataStateToActiveChartInstance)&&t.call(n,h),\\\"string\\\"==typeof a)h.updateDataSync(a,null!=l?l:[]);else{var u=[];for(const c in a){const g=a[c],p=s.series.find(e=>{var t;return(null==(t=null==e?void 0:e.data)?void 0:t.id)===c});u.push({id:c,values:g?null!=(i=null==l?void 0:l.filter(e=>e.hasOwnProperty(g)))?i:[]:null!=l?l:[],fields:null==(i=null==p?void 0:p.data)?void 0:i.fields}),h.updateFullDataSync||h.updateDataSync(c,g?null!=(r=null==l?void 0:l.filter(e=>e.hasOwnProperty(g)))?r:[]:null!=l?l:[])}null!=(n=h.updateFullDataSync)&&n.call(h,u)}cacheStageCanvas(h.getStage(),e)}function startRenderChartQueue(t){isHandlingChartQueue=!0,0<chartRenderQueueList.length?requestAnimationFrame(()=>{var e=chartRenderQueueList.splice(0,batchRenderChartCount);chartRenderKeys.splice(0,batchRenderChartCount),e.forEach(e=>{renderChart(e),e.addUpdateBoundTag()}),t.render(),startRenderChartQueue(t)}):isHandlingChartQueue=!1}var cacheCanvasSizeLimit=2e3;function cacheStageCanvas(i,e){var t,{viewWidth:r,viewHeight:n}=i;if(r<cacheCanvasSizeLimit&&n<cacheCanvasSizeLimit)e.cacheCanvas=i.toCanvas(),e.isShareChartSpec||(null!=(t=e.chartInstance)&&t.release(),e.chartInstance=null,e.setAttribute(\\\"chartInstance\\\",null));else{var o=Math.ceil(n/cacheCanvasSizeLimit),a=Math.ceil(r/cacheCanvasSizeLimit),l=[];for(let t=0;t<o;t++)for(let e=0;e<a;e++){var s=e*cacheCanvasSizeLimit,h=t*cacheCanvasSizeLimit,d=r<s+cacheCanvasSizeLimit?r:s+cacheCanvasSizeLimit,u=n<h+cacheCanvasSizeLimit?n:h+cacheCanvasSizeLimit,c=d-s,g=u-h,p=new Bounds,d=(p.setValue(s,h,d,u),i.toCanvas(!1,p));l.push({canvas:d,x:s,y:h,width:c,height:g})}e.cacheCanvas=l}}var __decorate80=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},ChartRender=Symbol[\\\"for\\\"](\\\"ChartRender\\\"),ChartRenderContribution=Symbol[\\\"for\\\"](\\\"ChartRenderContribution\\\"),DefaultCanvasChartRender=class{constructor(){this.numberType=CHART_NUMBER_TYPE}drawShape(e,a,t,i,r,n,o,l){var s,h,d=getTheme(e,null==n?void 0:n.theme).group,{dataId:u,data:c,spec:g}=e.attribute,{width:p=d.width,height:d=d.height}=(e.getViewBox(),e.attribute),{active:f,cacheCanvas:m,activeChartInstance:b}=e;if(!f&&m)isArray_default(m)?m.forEach(e=>{var{x:t,y:i,width:r,height:n,canvas:o}=e;a.drawImage(o,t,i,r,n)}):a.drawImage(m,t,i,p,d);else if(b)if(\\\"string\\\"==typeof u)b.updateDataSync(u,null!=c?c:[]);else{var v=[];for(const C in u){const y=u[C],_=g.series.find(e=>{var t;return(null==(t=null==e?void 0:e.data)?void 0:t.id)===C});v.push({id:C,values:y?null!=(s=null==c?void 0:c.filter(e=>e.hasOwnProperty(y)))?s:[]:null!=c?c:[],fields:null==(s=null==_?void 0:_.data)?void 0:s.fields}),b.updateFullDataSync||b.updateDataSync(C,y?null!=(h=null==c?void 0:c.filter(e=>e.hasOwnProperty(y)))?h:[]:null!=c?c:[])}null!=(f=b.updateFullDataSync)&&f.call(b,v)}else e.getRootNode().table.internalProps.renderChartAsync?(-1===chartRenderKeys.indexOf(e.parent.col+\\\"+\\\"+e.parent.row)&&(chartRenderKeys.push(e.parent.col+\\\"+\\\"+e.parent.row),chartRenderQueueList.push(e)),IsHandlingChartQueue()||startRenderChartQueue(e.getRootNode().table)):renderChart(e)}draw(e,t,i,r){var n,o=i[\\\"context\\\"];o&&(n=e.attribute[\\\"clip\\\"],n?o.save():o.highPerformanceSave(),o.transformFromMatrix(e.transMatrix,!0),o.beginPath(),r.skipDraw?this.drawShape(e,o,0,0,i,r,()=>!1,()=>!1):this.drawShape(e,o,0,0,i),n?o.restore():o.highPerformanceRestore())}},DefaultCanvasChartRender=__decorate80([injectable()],DefaultCanvasChartRender),__decorate81=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),BeforeImageRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){var g,p=e.attribute[\\\"shape\\\"];\\\"circle\\\"===p&&(({width:p=s.width,height:g=s.height}=e.attribute),t.beginPath(),t.arc(i+p/2,r+g/2,Math.min(p,g)/2,0,2*Math.PI),t.closePath(),t.save(),t.clip())}},BeforeImageRenderContribution=__decorate81([injectable()],BeforeImageRenderContribution),AfterImageRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){var g=e.attribute[\\\"shape\\\"];\\\"circle\\\"===g&&t.restore()}};function getCellHoverColor(i,r){var e;let n,t;if(\\\"cell\\\"===i.role&&isValid_default(i.mergeStartCol)&&isValid_default(i.mergeStartRow)&&isValid_default(i.mergeEndCol)&&isValid_default(i.mergeEndRow)){var{colStart:o,colEnd:a,rowStart:l,rowEnd:s}=getCellMergeRange(i,r.scenegraph);for(let t=o;t<=a;t++)for(let e=l;e<=s;e++){var h=isCellHover(r.stateManager,t,e,i);!h||n&&\\\"cellBgColor\\\"!==h||(n=h)}}else\\\"cell\\\"===i.role&&(n=isCellHover(r.stateManager,i.col,i.row,i));if(n)return(o=r.internalProps.layoutMap).isCornerHeader(i.col,i.row)?t=(null==(e=r.theme.cornerHeaderStyle)?void 0:e.hover)||(null==(e=r.theme.headerStyle)?void 0:e.hover):o.isColumnHeader(i.col,i.row)?t=null==(e=r.theme.headerStyle)?void 0:e.hover:o.isRowHeader(i.col,i.row)?t=null==(e=r.theme.rowHeaderStyle)?void 0:e.hover:o.isBottomFrozenRow(i.col,i.row)?t=(null==(e=r.theme.bottomFrozenStyle)?void 0:e.hover)||(r.isListTable()?null==(e=r.theme.bodyStyle)?void 0:e.hover:null==(e=r.theme.headerStyle)?void 0:e.hover):o.isRightFrozenColumn(i.col,i.row)?t=(null==(e=r.theme.rightFrozenStyle)?void 0:e.hover)||(r.isListTable()?null==(o=r.theme.bodyStyle)?void 0:o.hover:null==(e=r.theme.rowHeaderStyle)?void 0:e.hover):r.isHeader(i.col,i.row)||(t=null==(o=r.theme.bodyStyle)?void 0:o.hover),getProp2(n,t,i.col,i.row,r)}function isCellHover(e,i,r,n){var{highlightScope:o,disableHeader:a,cellPos:l}=e.hover,s=e.table,h=s.isHeader(i,r);if(!h||!a){let t;if(o===HighlightScope.single&&l.col===i&&l.row===r?t=\\\"cellBgColor\\\":o===HighlightScope.column&&l.col===i?t=l.col===i&&l.row===r?\\\"cellBgColor\\\":\\\"inlineColumnBgColor\\\":o===HighlightScope.row&&l.row===r?t=l.col===i&&l.row===r?\\\"cellBgColor\\\":\\\"inlineRowBgColor\\\":o===HighlightScope.cross&&(l.col===i&&l.row===r?t=\\\"cellBgColor\\\":l.col===i?t=\\\"inlineColumnBgColor\\\":l.row===r&&(t=\\\"inlineRowBgColor\\\")),t){let e;h?(a=s.getHeaderDefine(i,r),e=null==a?void 0:a.disableHeaderHover,n.firstChild&&\\\"axis\\\"===n.firstChild.name&&null!=(o=s.options.hover)&&o.disableAxisHover&&(e=!0)):(l=s.getBodyColumnDefine(i,r),e=null==l?void 0:l.disableHover),e&&(t=void 0)}return t}}AfterImageRenderContribution=__decorate81([injectable()],AfterImageRenderContribution),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var __decorate82=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},SplitGroupBeforeRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){var{stroke:g=s.stroke,strokeArrayWidth:p=s.strokeArrayWidth,strokeArrayColor:f=s.strokeArrayColor}=e.attribute;g&&(Array.isArray(p)||Array.isArray(f))&&(c.doStroke=!1)}},SplitGroupBeforeRenderContribution=__decorate82([injectable()],SplitGroupBeforeRenderContribution),SplitGroupAfterRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(n,e,o,a,t,i,r,l,s,h,d,u){var{width:c=s.width,height:g=s.height,stroke:p=s.stroke,strokeArrayColor:f=s.strokeArrayColor,strokeArrayWidth:m=s.strokeArrayWidth,lineWidth:b=s.lineWidth,strokeColor:v=s.stroke}=n.attribute;if(p&&(Array.isArray(m)||0!==b)){let i,r;if(Array.isArray(f)||Array.isArray(m)){if(\\\"number\\\"==typeof b&&1&b||Array.isArray(m)&&m.some(e=>1&e)){var C=n.stage.table;if(!C)return;let e=0,t=0;\\\"bottom-right\\\"===(null==C?void 0:C.theme.cellBorderClipDirection)?(o=Math.floor(o)-.5,a=Math.floor(a)-.5,\\\"cell\\\"===n.role&&(y=n.col,_=n.row,C&&y===C.colCount-1&&(e=1),C)&&_===C.rowCount-1&&(t=1)):(o=Math.floor(o)+.5,a=Math.floor(a)+.5);var{width:y,height:_}=getCellSizeForDraw(n,Math.ceil(c+e),Math.ceil(g+t));i=y,r=_}else i=Math.ceil(c),r=Math.ceil(g);renderStroke(n,e,o,a,s,p,m||b,f||v,i,r)}}}};function getWidthInfo(e){if(!Array.isArray(e))return{isSplitDraw:!1,width:e};let t;for(let r=0;r<e.length;r++){var i=e[r];if(i)if(t){if(i!==t)return{isSplitDraw:!0}}else t=i}return{isSplitDraw:!1,width:t}}function renderStroke(e,t,i,r,n,o,a,l,s,h,d,u){var c,g=getWidthInfo(a),p=!Array.isArray(a),f=!Array.isArray(o),m=Array.isArray(u),b=Array.isArray(l)||g.isSplitDraw,{lineDash:v=n.lineDash}=(t.setStrokeStyle(e,e.attribute,i,r,n),e.attribute);let C=!1;v.length&&v.some(e=>Array.isArray(e))&&(C=!0),t.beginPath(),t.moveTo(i,r),(f||o[0])&&(p||a[0])?(m&&Array.isArray(u[0])?(t.moveTo(i+s*u[0][0],r),t.lineTo(i+s*(u[0][1]-u[0][0]),r),t.moveTo(i+s,r)):(t.moveTo(i,r),t.lineTo(i+s,r)),(b||C)&&(l&&l[0]?t.strokeStyle=l[0]:t.strokeStyle=\\\"transparent\\\",p||(t.lineWidth=a[0]),t.lineDashOffset=t.currentMatrix.e/t.currentMatrix.a,C&&t.setLineDash(null!=(c=v[0])?c:[]),t.stroke(),t.beginPath(),t.moveTo(i+s,r))):t.moveTo(i+s,r),(f||o[1])&&(p||a[1])?(m&&Array.isArray(u[1])?(t.moveTo(i+s,r+h*u[1][0]),t.lineTo(i+s,r+h*(u[1][1]-u[1][0])),t.moveTo(i+s,r+h)):(t.moveTo(i+s,r),t.lineTo(i+s,r+h)),(b||C)&&(l&&l[1]?t.strokeStyle=l[1]:t.strokeStyle=\\\"transparent\\\",p||(t.lineWidth=a[1]),t.lineDashOffset=t.currentMatrix.f/t.currentMatrix.d,C&&t.setLineDash(null!=(c=v[1])?c:[]),t.stroke(),t.beginPath(),t.moveTo(i+s,r+h))):t.moveTo(i+s,r+h),(f||o[2])&&(p||a[2])?(m&&Array.isArray(u[2])?(t.moveTo(i+s*u[2][0],r+h),t.lineTo(i+s*(u[2][1]-u[2][0]),r+h),t.moveTo(i,r+h)):(t.moveTo(i,r+h),t.lineTo(i+s,r+h)),(b||C)&&(l&&l[2]?t.strokeStyle=l[2]:t.strokeStyle=\\\"transparent\\\",p||(t.lineWidth=a[2]),t.lineDashOffset=t.currentMatrix.e/t.currentMatrix.a,C&&t.setLineDash(null!=(c=v[2])?c:[]),t.stroke(),t.beginPath(),t.moveTo(i,r+h))):t.moveTo(i,r+h),(f||o[3])&&(p||a[3])?(m&&Array.isArray(u[3])?(t.moveTo(i,r+h*u[3][0]),t.lineTo(i,r+h*(u[3][1]-u[3][0])),t.moveTo(i,r)):(t.moveTo(i,r),t.lineTo(i,r+h)),(b||C)&&(l&&l[3]?t.strokeStyle=l[3]:t.strokeStyle=\\\"transparent\\\",p||(t.lineWidth=a[3]),t.lineDashOffset=t.currentMatrix.f/t.currentMatrix.d,C&&t.setLineDash(null!=(c=v[3])?c:[]),t.stroke(),t.beginPath(),t.moveTo(i,r))):t.moveTo(i,r),b||C||(!p&&g.width&&(t.lineWidth=g.width),t.stroke()),t.lineDashOffset=0,t.setLineDash([])}var SplitGroupAfterRenderContribution=__decorate82([injectable()],SplitGroupAfterRenderContribution),DashGroupBeforeRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){var{lineDash:g=s.lineDash,stroke:p=s.stroke,strokeArrayColor:f=s.strokeArrayColor,strokeArrayWidth:m=s.strokeArrayWidth}=e.attribute;p&&Array.isArray(g)&&g.length&&!Array.isArray(f)&&!Array.isArray(m)&&(c.doStroke=!1)}},DashGroupBeforeRenderContribution=__decorate82([injectable()],DashGroupBeforeRenderContribution),DashGroupAfterRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(i,e,r,n,t,o,a,l,s,h,d,u){var{lineDash:c=s.lineDash,stroke:g=s.stroke,strokeArrayColor:p=s.strokeArrayColor,strokeArrayWidth:f=s.strokeArrayWidth,lineWidth:m=s.lineWidth}=i.attribute;if(!g||!Array.isArray(c)||!c.length||Array.isArray(p)||Array.isArray(f))return;let b,v,{width:C=s.width,height:y=s.height}=i.attribute;if(C=Math.ceil(C),y=Math.ceil(y),1&m){var g=i.stage.table;if(!g)return;let e=0,t=0;\\\"bottom-right\\\"===(null==g?void 0:g.theme.cellBorderClipDirection)?(r=Math.floor(r)-.5,n=Math.floor(n)-.5,\\\"cell\\\"===i.role&&(p=i.col,f=i.row,g&&p===g.colCount-1&&(e=1),g)&&f===g.rowCount-1&&(t=1)):(r=Math.floor(r)+.5,n=Math.floor(n)+.5);var{width:m,height:p}=getCellSizeForDraw(i,Math.ceil(C+e),Math.ceil(y+t));b=m,v=p}else b=Math.ceil(C),v=Math.ceil(y);e.setStrokeStyle(i,i.attribute,r,n,s),e.beginPath(),e.moveTo(r,n),e.lineTo(r+b,n),e.lineDashOffset=e.currentMatrix.e/e.currentMatrix.a,e.setLineDash(null!=(f=c[0])?f:[]),e.stroke(),e.beginPath(),e.moveTo(r+b,n),e.lineTo(r+b,n+v),e.lineDashOffset=e.currentMatrix.f/e.currentMatrix.d,e.setLineDash(null!=(g=c[1])?g:[]),e.stroke(),e.beginPath(),e.moveTo(r,n+v),e.lineTo(r+b,n+v),e.lineDashOffset=e.currentMatrix.e/e.currentMatrix.a,e.setLineDash(null!=(m=c[2])?m:[]),e.stroke(),e.beginPath(),e.moveTo(r,n),e.lineTo(r,n+v),e.lineDashOffset=e.currentMatrix.f/e.currentMatrix.d,e.setLineDash(null!=(p=c[3])?p:[]),e.stroke(),e.lineDashOffset=0,e.setLineDash([])}},DashGroupAfterRenderContribution=__decorate82([injectable()],DashGroupAfterRenderContribution),AdjustPosGroupBeforeRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){var{lineWidth:g=s.lineWidth,stroke:p=s.stroke,lineDash:f=s.lineDash,strokeArrayWidth:m=s.strokeArrayWidth,strokeArrayColor:b=s.strokeArrayColor,notAdjustPos:v}=e.attribute;!0!==v&&p&&Array.isArray(f)&&!f.length&&!Array.isArray(b)&&!Array.isArray(m)&&1&g&&(c.doStroke=!1)}},AdjustPosGroupBeforeRenderContribution=__decorate82([injectable()],AdjustPosGroupBeforeRenderContribution),AdjustPosGroupAfterRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(i,r,n,o,e,t,a,l,s,h,d,u){var{lineWidth:c=s.lineWidth,stroke:g=s.stroke,lineDash:p=s.lineDash,strokeArrayWidth:f=s.strokeArrayWidth,strokeArrayColor:m=s.strokeArrayColor,notAdjustPos:b,cornerRadius:v=s.cornerRadius}=i.attribute,{width:C=s.width,height:y=s.height}=i.attribute;if(!0!==b&&g&&Array.isArray(p)&&!p.length&&!Array.isArray(m)&&!Array.isArray(f)&&1&c){var{width:b,height:g}=getCellSizeForDraw(i,Math.ceil(C),Math.ceil(y)),p=(r.beginPath(),i.stage.table);if(p){let e=0,t=0;\\\"bottom-right\\\"===(null==p?void 0:p.theme.cellBorderClipDirection)?(n=Math.floor(n)-.5,o=Math.floor(o)-.5,\\\"cell\\\"===i.role&&(m=i.col,f=i.row,p&&m===p.colCount-1&&(e=1),p)&&f===p.rowCount-1&&(t=1)):(n=Math.floor(n)+.5,o=Math.floor(o)+.5),v?createRectPath(r,n,o,b+e,g+t,v):r.rect(n,o,b,g),r.setStrokeStyle(i,i.attribute,n,o,s),r.stroke()}}}},AdjustPosGroupAfterRenderContribution=__decorate82([injectable()],AdjustPosGroupAfterRenderContribution),AdjustColorGroupBeforeRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){var g;\\\"cell\\\"===e.role&&(g=e.stage.table)&&g.stateManager.interactionState!==InteractionState.scrolling&&(g=getCellHoverColor(e,g))&&(e.attribute._vtableHoverFill=g)}},AdjustColorGroupBeforeRenderContribution=__decorate82([injectable()],AdjustColorGroupBeforeRenderContribution),AdjustColorGroupAfterRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u){var c;e.attribute._vtableHoverFill&&!d&&a&&(c=e.attribute.fill,e.attribute.fill=e.attribute._vtableHoverFill,t.setCommonStyle(e,e.attribute,i,r,s),t.fill(),e.attribute.fill=c,e.attribute._vtableHoverFill=void 0)}},AdjustColorGroupAfterRenderContribution=__decorate82([injectable()],AdjustColorGroupAfterRenderContribution),ClipBodyGroupBeforeRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){var g,p,f,m,b=e.stage.table;b&&(\\\"body\\\"===e.role?(g=-(null!=(g=e.attribute.x)?g:0)+b.getFrozenColsWidth(),p=-(null!=(p=e.attribute.y)?p:0)+b.getFrozenRowsHeight(),f=e.parent.attribute.width-b.getFrozenColsWidth()-b.getRightFrozenColsWidth(),m=e.parent.attribute.height-b.getFrozenRowsHeight()-b.getBottomFrozenRowsHeight(),t.beginPath(),t.rect(g,p,f,m)):\\\"row-header\\\"===e.role?(p=-(null!=(g=e.attribute.y)?g:0)+b.getFrozenRowsHeight(),f=b.getFrozenColsWidth(),m=e.parent.attribute.height-b.getFrozenRowsHeight()-b.getBottomFrozenRowsHeight(),t.beginPath(),t.rect(0,p,f,m)):\\\"col-header\\\"===e.role?(p=-(null!=(g=e.attribute.x)?g:0)+b.getFrozenColsWidth(),f=e.parent.attribute.width-b.getFrozenColsWidth()-b.getRightFrozenColsWidth(),m=b.getFrozenRowsHeight(),t.beginPath(),t.rect(p,0,f,m)):\\\"right-frozen\\\"===e.role?(p=-(null!=(g=e.attribute.y)?g:0)+b.getFrozenRowsHeight(),f=b.getRightFrozenColsWidth(),m=e.parent.attribute.height-b.getFrozenRowsHeight()-b.getBottomFrozenRowsHeight(),t.beginPath(),t.rect(0,p,f,m)):\\\"bottom-frozen\\\"===e.role?(p=-(null!=(g=e.attribute.x)?g:0)+b.getFrozenColsWidth(),f=e.parent.attribute.width-b.getFrozenColsWidth()-b.getRightFrozenColsWidth(),m=b.getBottomFrozenRowsHeight(),t.beginPath(),t.rect(p,0,f,m)):\\\"corner-header\\\"===e.role?(g=b.getFrozenColsWidth(),p=b.getFrozenRowsHeight(),t.beginPath(),t.rect(0,0,g,p)):\\\"corner-right-top-header\\\"===e.role?(f=b.getRightFrozenColsWidth(),m=b.getFrozenRowsHeight(),t.beginPath(),t.rect(0,0,f,m)):\\\"corner-right-bottom-header\\\"===e.role?(g=b.getRightFrozenColsWidth(),p=b.getBottomFrozenRowsHeight(),t.beginPath(),t.rect(0,0,g,p)):\\\"corner-left-bottom-header\\\"===e.role&&(f=b.getFrozenColsWidth(),m=b.getBottomFrozenRowsHeight(),t.beginPath(),t.rect(0,0,f,m)))}},ClipBodyGroupBeforeRenderContribution=__decorate82([injectable()],ClipBodyGroupBeforeRenderContribution),ClipBodyGroupAfterRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u){e.role}};function getCellSizeForDraw(i,r,n){var o=i.stage.table;if(\\\"cell\\\"===i.role){let e=i.col,t=i.row;var a=getCellMergeInfo(o,e,t);a&&(e=a.end.col,t=a.end.row),(o&&e===o.colCount-1||o&&e===o.frozenColCount-1&&o.scrollLeft)&&--r,(o&&t===o.rowCount-1||o&&t===o.frozenRowCount-1&&o.scrollTop)&&--n}else\\\"corner-frozen\\\"===i.role&&(o&&o.scrollLeft&&--r,o)&&o.scrollTop&&--n;return{width:r,height:n}}var loadingImage,ClipBodyGroupAfterRenderContribution=__decorate82([injectable()],ClipBodyGroupAfterRenderContribution),__decorate83=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a},SplitRectBeforeRenderContribution2=class{constructor(){this.time=BaseRenderContributionTime.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u,c){var{stroke:g=s.stroke,strokeArrayWidth:p=s.strokeArrayWidth,strokeArrayColor:f=s.strokeArrayColor}=e.attribute;g&&(Array.isArray(g)||Array.isArray(p)||Array.isArray(f))&&(c.doStroke=!1)}},SplitRectBeforeRenderContribution2=__decorate83([injectable()],SplitRectBeforeRenderContribution2),SplitRectAfterRenderContribution2=class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,o,a,l,s,h,d,u){var{width:c=s.width,height:g=s.height,stroke:p=s.stroke,strokeArrayColor:f=s.strokeArrayColor,strokeArrayWidth:m=s.strokeArrayWidth,lineWidth:b=s.lineWidth,strokeColor:v=s.stroke}=e.attribute;p&&(Array.isArray(m)||0!==b)&&(Array.isArray(p)||Array.isArray(f)||Array.isArray(m))&&(\\\"border-rect\\\"!==e.name&&\\\"table-border-rect\\\"!==e.name&&(\\\"number\\\"==typeof b&&1&b||Array.isArray(m)&&m.some(e=>1&e))&&(i=Math.floor(i)+.5,r=Math.floor(r)+.5),renderStroke(e,t,i,r,s,p,m||b,f||v,Math.ceil(c+0),Math.ceil(g+0)))}},SplitRectAfterRenderContribution2=__decorate83([injectable()],SplitRectAfterRenderContribution2),__decorate84=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),VTableDrawItemInterceptorContribution=class{constructor(){this.order=1,this.interceptors=[new ImageDrawItemInterceptorContribution]}afterDrawItem(e,t,i,r,n){for(let o=0;o<this.interceptors.length;o++)if(this.interceptors[o].afterDrawItem&&this.interceptors[o].afterDrawItem(e,t,i,r,n))return!0;return!1}beforeDrawItem(t,i,r,n,o){if(t.in3dMode&&!r.in3dInterceptor||t.shadowRoot||(t.baseGraphic||t.attribute.globalZIndex||t.interactiveGraphic))for(let e=0;e<this.interceptors.length;e++)if(this.interceptors[e].beforeDrawItem&&this.interceptors[e].beforeDrawItem(t,i,r,n,o))return!0;return!1}},VTableDrawItemInterceptorContribution=__decorate84([injectable()],VTableDrawItemInterceptorContribution),ImageDrawItemInterceptorContribution=class{constructor(){this.order=1}afterDrawItem(e,t,i,r,n){return\\\"image\\\"===e.type&&this.drawItem(e,t,i,r,n),!1}drawItem(e,t,i,r,n){var o=e.attribute[\\\"image\\\"];if(!o||!e.resources)return!1;if(\\\"loading\\\"!==e.resources.get(o).state)return!1;loadingImage||(l=(a=get3()).loading_pic.svg,h=a.loading_pic.width,a=a.loading_pic.height,loadingImage=createImage({width:h,height:a,image:l}));var a,l,s,h=loadingImage.attribute[\\\"image\\\"];return!(!o||!loadingImage.resources||\\\"success\\\"!==(a=loadingImage.resources.get(h)).state||(l=i.context,l.highPerformanceSave(),e.parent&&l.setTransformFromMatrix(e.parent.globalTransMatrix,!0),e.glyphHost&&e.glyphHost.parent&&l.setTransformFromMatrix(e.glyphHost.parent.globalTransMatrix,!0),o=e.AABBBounds,({width:h,height:s}=calcKeepAspectRatioSize(a.data.width,a.data.height,o.width(),o.height())),l.drawImage(a.data,o.x1+(o.width()-h)/2,o.y1+(o.height()-s)/2,h,s),l.highPerformanceRestore(),0))}},__decorate85=(init_esbuild_inject(),function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\\\"object\\\"==typeof Reflect&&\\\"function\\\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(o<3?n(a):3<o?n(t,i,a):n(t,i))||a);return 3<o&&a&&Object.defineProperty(t,i,a),a}),SuffixTextBeforeRenderContribution=class{constructor(){this.time=BaseRenderContributionTime.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,i,r,n,o,a,l,s,h,e,d,u,c){var{underline:g=h.underline,lineThrough:p=h.lineThrough,direction:f=h.direction,whiteSpace:m=h.whiteSpace,fontSize:b=h.fontSize,verticalMode:v=h.verticalMode,ellipsis:C=h.ellipsis,textAlign:y=h.textAlign,textBaseline:_=h.textBaseline,x:w=h.x,y:x=h.y}=t.attribute;let S=!1;if(Array.isArray(t)?(A=null==(A=t.cache)?void 0:A.layoutData,C&&A&&A.lines.every(e=>\\\"\\\"===e.str)&&(S=!0)):(A=t[\\\"cache\\\"],C&&A&&\\\"\\\"===A.clipedText&&0===A.clipedWidth&&(S=!0)),S){var A=isString_default(C)?C:\\\"...\\\",C=null!=(C=calculateLineHeight(t.attribute.lineHeight,b))?C:b;let e=0;C!==b&&(\\\"top\\\"===_?e=(C-b)/2:\\\"middle\\\"!==_&&\\\"bottom\\\"===_&&(e=-(C-b)/2)),a&&(u?u(i,t.attribute,h):s&&(i.setStrokeStyle(t,t.attribute,w-r,x-n,h),i.strokeText(A,w,x+e))),o&&(d?d(i,t.attribute,h):l&&(i.setCommonStyle(t,t.attribute,w-r,x-n,h),i.fillText(A,w,x+e),this.drawUnderLine(g,p,t,w,x+e,0,h,i,A)))}}drawUnderLine(e,t,i,r,n,o,a,l,s){var h,d,u,c,g,p,f,m,b,v,C;t+e<=0||(({textAlign:p=a.textAlign,textBaseline:v=a.textBaseline,fontSize:h=a.fontSize,fontFamily:f=a.fontFamily,fontWeight:m=a.fontWeight,fontStyle:b=a.fontStyle,fill:C=a.fill,opacity:d=a.opacity,underlineOffset:u=a.underlineOffset,underlineDash:c=a.underlineDash,fillOpacity:g=a.fillOpacity}=i.attribute),(e||t)&&(f=textDrawOffsetX(p,p=textMeasure.measureTextWidth(s,{fontSize:h,fontFamily:f,fontWeight:m,fontStyle:b})),m=textLayoutOffsetY(v,h,h),b={lineWidth:0,stroke:C,opacity:d,strokeOpacity:g},e&&(b.lineWidth=e,l.setStrokeStyle(i,b,r,n,a),l.setLineDash(c),l.beginPath(),l.moveTo(r+f,v=n+m+h+u,o),l.lineTo(r+f+p,v,o),l.stroke()),t)&&(b.lineWidth=t,l.setStrokeStyle(i,b,r,n,a),l.beginPath(),l.moveTo(r+f,C=n+m+h/2,o),l.lineTo(r+f+p,C,o),l.stroke()))}},SuffixTextBeforeRenderContribution=__decorate85([injectable()],SuffixTextBeforeRenderContribution),contributions_default=new ContainerModule((e,t,i,r)=>{i(SplitRectBeforeRenderContribution)?r(SplitRectBeforeRenderContribution).to(SplitRectBeforeRenderContribution2).inSingletonScope():(e(SplitRectBeforeRenderContribution2).toSelf().inSingletonScope(),e(RectRenderContribution).toService(SplitRectBeforeRenderContribution2)),i(SplitRectAfterRenderContribution)?r(SplitRectAfterRenderContribution).to(SplitRectAfterRenderContribution2).inSingletonScope():(e(SplitRectAfterRenderContribution2).toSelf().inSingletonScope(),e(RectRenderContribution).toService(SplitRectAfterRenderContribution2)),e(DefaultCanvasChartRender).toSelf().inSingletonScope(),e(ChartRender).to(DefaultCanvasChartRender),e(GraphicRender).to(DefaultCanvasChartRender),e(BeforeImageRenderContribution).toSelf().inSingletonScope(),e(ImageRenderContribution).toService(BeforeImageRenderContribution),e(AfterImageRenderContribution).toSelf().inSingletonScope(),e(ImageRenderContribution).toService(AfterImageRenderContribution),e(AdjustColorGroupBeforeRenderContribution).toSelf().inSingletonScope(),e(GroupRenderContribution).toService(AdjustColorGroupBeforeRenderContribution),e(AdjustColorGroupAfterRenderContribution).toSelf().inSingletonScope(),e(GroupRenderContribution).toService(AdjustColorGroupAfterRenderContribution),e(SplitGroupAfterRenderContribution).toSelf().inSingletonScope(),e(GroupRenderContribution).toService(SplitGroupAfterRenderContribution),e(SplitGroupBeforeRenderContribution).toSelf().inSingletonScope(),e(GroupRenderContribution).toService(SplitGroupBeforeRenderContribution),e(DashGroupBeforeRenderContribution).toSelf().inSingletonScope(),e(GroupRenderContribution).toService(DashGroupBeforeRenderContribution),e(DashGroupAfterRenderContribution).toSelf().inSingletonScope(),e(GroupRenderContribution).toService(DashGroupAfterRenderContribution),e(AdjustPosGroupBeforeRenderContribution).toSelf().inSingletonScope(),e(GroupRenderContribution).toService(AdjustPosGroupBeforeRenderContribution),e(AdjustPosGroupAfterRenderContribution).toSelf().inSingletonScope(),e(GroupRenderContribution).toService(AdjustPosGroupAfterRenderContribution),e(ClipBodyGroupBeforeRenderContribution).toSelf().inSingletonScope(),e(GroupRenderContribution).toService(ClipBodyGroupBeforeRenderContribution),e(ClipBodyGroupAfterRenderContribution).toSelf().inSingletonScope(),e(GroupRenderContribution).toService(ClipBodyGroupAfterRenderContribution),e(VTableDrawItemInterceptorContribution).toSelf().inSingletonScope(),e(DrawItemInterceptor).toService(VTableDrawItemInterceptorContribution),e(SuffixTextBeforeRenderContribution).toSelf().inSingletonScope(),e(TextRenderContribution).toService(SuffixTextBeforeRenderContribution)});function computeColsWidth(n,e,t,o){\\\"undefined\\\"!=typeof window&&window.performance.now(),t=null!=t?t:n.colCount-1,0===(e=null!=e?e:0)&&t===n.colCount-1&&n._clearColRangeWidthsMap();var i,r,a=[],l=[];if(o)for(let e=0;e<n.colCount;e++)a[e]=n.getColWidth(e);for(let g=e;g<=t;g++){let e;n.internalProps.transpose||\\\"only-header\\\"!==(null==(r=null==(r=n.internalProps.layoutMap.columnObjects)?void 0:r[g])?void 0:r.columnWidthComputeMode)&&\\\"only-header\\\"!==n.columnWidthComputeMode||!(\\\"showHeader\\\"in n.internalProps.layoutMap)?e=n.internalProps.transpose||\\\"only-body\\\"!==(null==(i=null==(r=n.internalProps.layoutMap.columnObjects)?void 0:r[g])?void 0:i.columnWidthComputeMode)&&\\\"only-body\\\"!==n.columnWidthComputeMode?computeColWidth(g,0,n.rowCount-1,n):computeColWidth(g,n.internalProps.layoutMap.getBodyRange().start.row,n.internalProps.layoutMap.getBodyRange().end.row,n):(r=n.internalProps.layoutMap.showHeader,n.internalProps.layoutMap.showHeader=!0,e=computeColWidth(g,0,n.internalProps.layoutMap.headerLevelCount-1,n),n.internalProps.layoutMap.showHeader=r),n._setColContentWidth(g,e),n.getColWidth(g)!==e&&n._clearColRangeWidthsMap(g),o?l[g]=Math.round(n._adjustColWidth(g,e)):n._setColWidth(g,n._adjustColWidth(g,e),!1,!0)}if(\\\"adaptive\\\"===n.widthMode){n._clearColRangeWidthsMap();var s=n.tableNoFrameWidth;let t=0,i=0,r=n.colCount;if(\\\"only-body\\\"===n.widthAdaptiveMode){for(let e=0;e<n.colCount;e++){var h=o?l[e]:n.getColWidth(e);(e<n.rowHeaderLevelCount||n.isPivotChart()&&e>=n.colCount-n.rightFrozenColCount)&&(t+=h)}i=n.rowHeaderLevelCount,r=n.isPivotChart()?n.colCount-n.rightFrozenColCount:n.colCount}getAdaptiveWidth(s-t,i,r,o,l,n)}else if(n.autoFillWidth){n._clearColRangeWidthsMap();s=n.tableNoFrameWidth;let e=0,t=0;for(let i=0;i<n.colCount;i++){var d=o?l[i]:n.getColWidth(i);(i<n.rowHeaderLevelCount||n.isPivotChart()&&i>=n.colCount-n.rightFrozenColCount)&&(e+=d),t+=d}t<s&&t>e&&getAdaptiveWidth(s-e,n.rowHeaderLevelCount,n.isPivotChart()?n.colCount-n.rightFrozenColCount:n.colCount,o,l,n)}if(o){for(let e=0;e<n.colCount;e++){var u=null!=(u=l[e])?u:n.getColWidth(e);u!==a[e]&&n._setColWidth(e,u,!1,!0)}n.stateManager.checkFrozen();for(let t=0;t<n.colCount;t++){var c=n.getColWidth(t);c!==a[t]&&n.scenegraph.updateColWidth(t,c-a[t],!0,!0)}n.scenegraph.updateContainer(!0)}}function computeColWidth(e,t,i,r,n=!1){let o=getColWidthDefinedWidthResizedWidth(e,r);return r.internalProps.transpose&&\\\"auto\\\"===o&&(\\\"only-header\\\"===r.columnWidthComputeMode&&e>=r.rowHeaderLevelCount||\\\"only-body\\\"===r.columnWidthComputeMode&&e<r.rowHeaderLevelCount)&&(o=r.getDefaultColumnWidth(e)),n&&!r.internalProps.transpose?computeAutoColWidth(o,e,t,i,n,r):\\\"number\\\"==typeof o?o:\\\"auto\\\"!==o&&\\\"string\\\"==typeof o?r._adjustColWidth(e,r._colWidthDefineToPxWidth(o)):computeAutoColWidth(o,e,t,i,n,r)}function computeAutoColWidth(e,t,i,r,n,o){let a=0,l=1,s=1;if(5e3<r-i&&(s=Math.ceil((r-i)/5e3)),o.isPivotChart()&&t>=o.rowHeaderLevelCount&&t<o.colCount-o.rightFrozenColCount){if(o.internalProps.layoutMap.indicatorsAsCol)return o.defaultColWidth;var h=o.internalProps.layoutMap.getOptimunWidthForChart(t);if(0<h)return h}for(let b=i;b<=r;b+=l){if(o.isPivotChart()){var d=o.internalProps.layoutMap,u=getAxisConfigInPivotChart(t,b,d);if(u){u=computeAxisComponentWidth(u,o);if(\\\"number\\\"==typeof u){a=Math.max(u,a);continue}}else if(d.isLeftBottomCorner(t,b)||d.isRightTopCorner(t,b)||d.isRightBottomCorner(t,b))continue}u=computeCustomRenderWidth(t,b,o);if(!u||(a=Math.max(u.width,a),u.renderDefault)){d=e;if(\\\"number\\\"!=typeof d||\\\"standard\\\"!==o.widthMode||n){var c=o.isHeader(t,b)?null==(c=o._getHeaderLayoutMap(t,b))?void 0:c.headerType:o.getBodyColumnType(t,b);if(isValid_default(c)&&\\\"text\\\"!==c&&\\\"link\\\"!==c&&\\\"progressbar\\\"!==c&&\\\"checkbox\\\"!==c&&\\\"radio\\\"!==c)a=Math.max(a,o.getColWidthDefinedNumber(t)||0);else{let e=0;var g=o.internalProps.layoutMap;if(g.isHeader(t,b)){var p=g.getHeader(t,b);if(\\\"only-body\\\"===(null==(f=null==p?void 0:p.define)?void 0:f.columnWidthComputeMode))continue;null!=p&&p.hierarchyLevel&&(e=(null!=(f=p.hierarchyLevel)?f:0)*(null!=(p=g.rowHierarchyIndent)?p:0))}else{l=s;var f=o.getBodyColumnDefine(t,b);null!=f&&f.tree&&(p=o.dataSource.getIndexKey(o.getRecordShowIndexByCell(t,b)),e=Array.isArray(p)&&o.getHierarchyState(t,b)!==HierarchyState.none?(p.length-1)*(null!=(g=g.hierarchyIndent)?g:0):0)}g=computeTextWidth(t,b,c,o);a=Math.max(g+e,a),1<l&&0<o.bottomFrozenRowCount&&b<o.rowCount-o.bottomFrozenRowCount&&b+l>=o.rowCount-o.bottomFrozenRowCount&&(b=o.rowCount-o.bottomFrozenRowCount-l,l=1,s=1)}}else a=Math.max(d,a)}}var h=o.getMinColWidth(t),m=o.getMaxColWidth(t);return a<h?h:a>m?m:a}function computeCustomRenderWidth(n,o,a){var l=a.getCustomRender(n,o),s=a.getCustomLayout(n,o);if(l||s){let e=1,t=0,i=!1,r=!1;(a.isHeader(n,o)||null!=(d=a.getBodyColumnDefine(n,o))&&d.mergeCell||a.hasCustomMerge())&&(d=a.getCellRange(n,o),e=d.end.col-d.start.col+1);var h,d={col:n,row:o,dataValue:a.getCellOriginValue(n,o),value:a.getCellValue(n,o)||\\\"\\\",rect:getCellRect2(n,o,a),table:a};return s?(s=s(d)).rootContainer instanceof Group?(s.rootContainer=decodeReactDom(s.rootContainer),dealPercentCalc(s.rootContainer,0,a.getRowHeight(o)),h=s.rootContainer.attribute.width,s.rootContainer.setStage(a.scenegraph.stage),t=0<h?h:null!=(h=s.rootContainer.AABBBounds.width())?h:0,i=s.renderDefault,r=s.enableCellPadding):t=0:i=\\\"function\\\"==typeof l?(h=l(d),t=null!=(s=null==h?void 0:h.expectedWidth)?s:0,null==h?void 0:h.renderDefault):(t=null!=(d=null==l?void 0:l.expectedWidth)?d:0,null==l?void 0:l.renderDefault),r&&(s=getQuadProps(getProp2(\\\"padding\\\",a._getCellStyle(n,o),n,o,a)),t+=s[1]+s[3]),{width:t/e,renderDefault:i}}}function computeTextWidth(e,t,i,r){let n=0;var o,a,l,s=r.getCellValue(e,t),h=r._getCellStyle(e,t);let d=0,u=!1,c=((u=\\\"body\\\"!==r.getCellLocation(e,t)||!(null==(a=r.getBodyColumnDefine(e,t))||!a.icon)||!(null==a||!a.tree)||(null==a?void 0:a.dragOrder))&&null!=(a=r.getCellIcons(e,t))&&a.forEach(e=>{var t;e.positionType!==IconPosition.absoluteRight&&(d+=(null!=(t=e.width)?t:0)+(null!=(t=e.marginLeft)?t:0)+(null!=(t=e.marginRight)?t:0))}),1);(r.isHeader(e,t)||null!=(a=r.getBodyColumnDefine(e,t))&&a.mergeCell||r.hasCustomMerge())&&(a=r.getCellRange(e,t),c=a.end.col-a.start.col+1);const g=getQuadProps(getProp2(\\\"padding\\\",h,e,t,r)),p=g[1]+g[3],f=getProp2(\\\"fontSize\\\",h,e,t,r),m=getProp2(\\\"fontFamily\\\",h,e,t,r),b=getProp2(\\\"fontWeight\\\",h,e,t,r);let v,C;return\\\"checkbox\\\"===i?v=isObject_default(s)?s.text:s:\\\"radio\\\"===i?isArray_default(s)?(v=\\\"\\\",\\\"vertical\\\"===(a=null!=(a=null==(a=r.getBodyColumnDefine(e,t))?void 0:a.radioDirectionInCell)?a:\\\"vertical\\\")?s.forEach(e=>{v+=(isObject_default(e)?e.text:e).toString()+\\\"\\\\n\\\"}):\\\"horizontal\\\"===a&&s.forEach(e=>{v+=(isObject_default(e)?e.text:e).toString()})):v=isObject_default(s)?s.text:s:v=s,1<=(C=r.internalProps.enableLineBreak||null!=(a=r.options.customConfig)&&a.multilinesForXTable?validToString(v).split(\\\"\\\\n\\\")||[]:[validToString(v)]).length?C.forEach(e=>{var t=r.measureText(e.slice(0,r.options.maxCharactersNumber||200),{fontSize:f,fontFamily:m,fontWeight:b}).width;n=Math.max((t+p+4+d)/c,n)}):n=Math.max((p+4+d)/c,n),!1!==r.internalProps.limitMaxAutoWidth&&(n=Math.min(\\\"number\\\"==typeof r.internalProps.limitMaxAutoWidth?r.internalProps.limitMaxAutoWidth:450,n)),\\\"checkbox\\\"===i?(a=getProp2(\\\"size\\\",h,e,t,r),n+=a,v&&(a=getProp2(\\\"spaceBetweenTextAndIcon\\\",h,e,t,r),n+=a)):\\\"radio\\\"===i&&(a=getProp2(\\\"size\\\",h,e,t,r),o=getProp2(\\\"outerRadius\\\",h,e,t,r),o=isNumber_default(o)?2*o:a,a=getProp2(\\\"spaceBetweenTextAndIcon\\\",h,e,t,r),isArray_default(s)?(l=r.getBodyColumnDefine(e,t),h=getProp2(\\\"spaceBetweenRadio\\\",h,e,t,r),\\\"vertical\\\"===(l=null!=(l=null==l?void 0:l.radioDirectionInCell)?l:\\\"vertical\\\")?n=n+o+a:\\\"horizontal\\\"===l&&(n=(n+=(o+a)*s.length)+h*(s.length-1))):(n+=o,v&&(n+=a))),n}function getCellRect2(e,t,i){return{left:0,top:0,right:i.getColWidth(e),bottom:i.getRowHeight(t),width:null,height:null}}function getColWidthDefinedWidthResizedWidth(e,t){var i=t.getColWidthDefined(e);return t.internalProps._widthResizedColMap.has(e)?t.getColWidth(e):i}function getAdaptiveWidth(e,t,i,r,n,o,a){let l=0;var s=[];for(let p=t;p<i;p++){var h=r?n[p]:o.getColWidth(p),d=o.getMaxColWidth(p),u=o.getMinColWidth(p);h!==d&&h!==u?(l+=h,s.push(p)):e-=h}var c=e/l;for(let f=0;f<s.length;f++){const m=s[f];var g=f===s.length-1?e-s.reduce((e,t,i)=>t!==m?e+(r?n[t]:o.getColWidth(t)):e,0):Math.round((r?n[m]:o.getColWidth(m))*c);r?n[m]=o._adjustColWidth(m,g):a?o.scenegraph.setColWidth(m,o._adjustColWidth(m,g)):o._setColWidth(m,o._adjustColWidth(m,g),!1,!0)}}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var emptyGroup=new Group2({});function createComplexColumn(h,d,u,c,e,g,p,f,m,b){let v,C,y,_=0;h.lastChild&&h.lastChild.row===c-1?_=h.lastChild.attribute.y+h.lastChild.attribute.height:h.colHeight&&(_=h.colHeight);for(let k=c;k<=e;k++){var w=k;let e,t,i,r,n=f.getCellValue(d,w),o=u,a=f.getRowHeight(w),l=(f.internalProps.customMergeCell&&(L=f.getCustomMerge(d,w))&&(({range:L,text:B,style:x,customLayout:E,customRender:P}=L),e=L,(t=e.start.col!==e.end.col||e.start.row!==e.end.row)&&(M=dealMerge(e,g,f,c>e.start.row),o=M.cellWidth,a=M.cellHeight),n=B,i=x,E||P)&&(r=dealWithCustom(E,P,L.start.col,L.start.row,f.getColsWidth(L.start.col,L.end.col),f.getRowsHeight(L.start.row,L.end.row),!1,f.isAutoRowHeight(w),[0,0,0,0],f)),d),s=w;e&&(l=e.start.col,s=e.start.row);var x,S,A,T,R,M=\\\"body\\\"!==m?f.getHeaderDefine(l,s):f.getBodyColumnDefine(l,s),B=\\\"body\\\"!==m||(null==M?void 0:M.dragOrder)||!(null==M||!M.icon)||!(null==M||!M.tree),E=(!e&&(\\\"body\\\"!==m||null!=M&&M.mergeCell)&&(e=f.getCellRange(d,w),t=e.start.col!==e.end.col||e.start.row!==e.end.row)&&(x=dealMerge(e,g,f,c>e.start.row),o=x.cellWidth,a=x.cellHeight),i||f._getCellStyle(d,w)),P=getStyleTheme(E,f,e?e.start.col:d,e?e.start.row:w,getProp2).theme,L=(P.group.cornerRadius=getCellCornerRadius(d,w,f),P.group.width=u,P.group.height=Array.isArray(p)?p[w]:p,P._vtable.padding&&(v=P._vtable.padding),P.text.textAlign&&(C=P.text.textAlign),P.text.textBaseline&&(y=P.text.textBaseline),\\\"body\\\"===m||P.group.fill||(P.group.fill=\\\"#fff\\\"),(f.isHeader(d,w)?f._getHeaderLayoutMap(d,w).headerType:f.getBodyColumnType(d,w))||\\\"text\\\");if(isPromise(n)?(createEmptyCellGroup(d,w,0,_,o,a,h),dealPromiseData(n,f,createCell.bind(null,L,n,M,f,d,w,u,o,a,h,_,v,C,y,B,P,e,r)),h.updateColumnRowNumber(w),S=f.getRowHeight(w),h.updateColumnHeight(S),_+=S):(S=createCell(L,n,M,f,d,w,u,o,a,h,_,v,C,y,B,P,e,r),h.updateColumnRowNumber(w),t?(A=f.getRowHeight(w),T=(f.getColWidth(d),S.attribute)[\\\"width\\\"],R=S.attribute[\\\"height\\\"],S.contentWidth=T,S.contentHeight=R,dealWithMergeCellSize(e,T,R,v,C,y,f),h.updateColumnHeight(A),_+=A):(h.updateColumnHeight(S.attribute.height),_+=S.attribute.height)),b&&b<w)break}return h.setAttribute(\\\"width\\\",u),{width:u,height:_}}function dealMerge(i,r,n,e){let o=0,a=0;var t=r.get(`${i.start.col},${i.start.row};${i.end.col},`+i.end.row);if(!t||e){for(let e=i.start.col;e<=i.end.col;e++)o+=n.getColWidth(e);for(let t=i.start.row;t<=i.end.row;t++)a+=n.getRowHeight(t);r.set(`${i.start.col},${i.start.row};${i.end.col},`+i.end.row,{cellWidth:o,cellHeight:a})}else o=t.cellWidth,a=t.cellHeight;return{cellWidth:o,cellHeight:a}}function createEmptyCellGroup(e,t,i,r,n,o,a){var l=new Group2({x:i,y:r,width:n,height:o});l.role=\\\"cell\\\",l.col=e,l.row=t,a.addChild(l)}function createColGroup(r,n,o,a,l,s,h,d,u,c){if(!(l<a||h<s)){var{defaultRowHeight:g,defaultHeaderRowHeight:p}=u.internalProps;let e=0,t=0;for(let i=a;i<=l;i++){var f=i,m=u.getColWidth(f),b=new Group2({x:n+e,y:o,width:m,height:0,clip:!1,pickable:!1}),{width:b,height:f}=(b.role=\\\"column\\\",b.col=i,r.addChild(b),createComplexColumn(b,f,m,s,h,u.scenegraph.mergeMap,\\\"columnHeader\\\"===d&&isNumber_default(p)?p:g,u,d,c));e+=b,t=Math.max(t,f)}r.setAttribute(\\\"width\\\",e),r.setAttribute(\\\"height\\\",t)}}function createGroupForFirstScreen(e,t,i,r,n,o,a,l,s){var h,d,u=s[\\\"table\\\"],{leftBottomCornerGroup:c,rightTopCornerGroup:g,rightBottomCornerGroup:p}=u.scenegraph;s.setParamsForRow(),s.setParamsForColumn(),h=\\\"adaptive\\\"===u.widthMode||u.options.autoWrapText&&(\\\"adaptive\\\"===u.heightMode||\\\"autoHeight\\\"===u.heightMode)?u.colCount-1:Math.min(s.firstScreenColLimit,u.colCount-1),d=\\\"adaptive\\\"===u.heightMode?u.rowCount-1:Math.min(s.firstScreenRowLimit,u.rowCount-1),0===u.internalProps._widthResizedColMap.size&&computeColsWidth(u,0,h),0===u.internalProps._heightResizedRowMap.size&&computeRowsHeight(u,0,d),h<u.colCount-u.rightFrozenColCount&&computeColsWidth(u,u.colCount-u.rightFrozenColCount,u.colCount-1),d<u.rowCount-u.bottomFrozenRowCount&&computeRowsHeight(u,u.rowCount-u.bottomFrozenRowCount,u.rowCount-1),u.scenegraph.colHeaderGroup.setAttribute(\\\"x\\\",u.getFrozenColsWidth()),u.scenegraph.rowHeaderGroup.setAttribute(\\\"y\\\",u.getFrozenRowsHeight()),u.scenegraph.bottomFrozenGroup.setAttribute(\\\"x\\\",u.getFrozenColsWidth()),u.scenegraph.rightFrozenGroup.setAttribute(\\\"y\\\",u.getFrozenRowsHeight()),u.scenegraph.bodyGroup.setAttributes({x:u.getFrozenColsWidth(),y:u.getFrozenRowsHeight()}),createColGroup(e,a,l,0,u.frozenColCount-1,0,u.columnHeaderLevelCount-1,u.isListTable()?\\\"columnHeader\\\":\\\"cornerHeader\\\",u),h-u.rightFrozenColCount>=u.frozenColCount&&createColGroup(t,a,l,u.frozenColCount,h-u.rightFrozenColCount,0,u.columnHeaderLevelCount-1,\\\"columnHeader\\\",u),0<u.frozenColCount&&(0<u.leftRowSeriesNumberCount&&createColGroup(i,a,l,0,u.leftRowSeriesNumberCount-1,u.columnHeaderLevelCount,d-u.bottomFrozenRowCount,\\\"rowHeader\\\",u),0<u.rowHeaderLevelCount&&createColGroup(i,a,l,u.leftRowSeriesNumberCount,u.leftRowSeriesNumberCount+u.rowHeaderLevelCount-1,u.columnHeaderLevelCount,d-u.bottomFrozenRowCount,\\\"rowHeader\\\",u),u.frozenColCount>u.rowHeaderLevelCount+u.leftRowSeriesNumberCount)&&createColGroup(i,a,l,u.rowHeaderLevelCount+u.leftRowSeriesNumberCount,u.frozenColCount-1,u.columnHeaderLevelCount,d-u.bottomFrozenRowCount,\\\"body\\\",u),0<u.bottomFrozenRowCount&&(0<u.frozenColCount&&(0<u.leftRowSeriesNumberCount&&createColGroup(c,a,l,0,u.leftRowSeriesNumberCount-1,u.rowCount-1-u.bottomFrozenRowCount+1,u.rowCount-1,\\\"rowHeader\\\",u),0<u.rowHeaderLevelCount&&createColGroup(c,a,l,u.leftRowSeriesNumberCount,u.leftRowSeriesNumberCount+u.rowHeaderLevelCount-1,u.rowCount-1-u.bottomFrozenRowCount+1,u.rowCount-1,\\\"rowHeader\\\",u),u.frozenColCount>u.rowHeaderLevelCount+u.leftRowSeriesNumberCount)&&createColGroup(c,a,l,u.rowHeaderLevelCount+u.leftRowSeriesNumberCount,u.frozenColCount-1,u.rowCount-1-u.bottomFrozenRowCount+1,u.rowCount-1,\\\"body\\\",u),h-u.rightFrozenColCount>=u.frozenColCount)&&createColGroup(n,a,l,u.frozenColCount,h-u.rightFrozenColCount,u.rowCount-1-u.bottomFrozenRowCount+1,u.rowCount-1,u.isPivotChart()?\\\"rowHeader\\\":\\\"body\\\",u),0<u.rightFrozenColCount&&(createColGroup(g,a,l,u.colCount-1-u.rightFrozenColCount+1,u.colCount-1,0,u.columnHeaderLevelCount-1,\\\"columnHeader\\\",u),createColGroup(r,a,l,u.colCount-1-u.rightFrozenColCount+1,u.colCount-1,u.columnHeaderLevelCount,d-u.bottomFrozenRowCount,u.isPivotChart()?\\\"rowHeader\\\":\\\"body\\\",u)),0<u.bottomFrozenRowCount&&0<u.rightFrozenColCount&&createColGroup(p,a,l,u.colCount-1-u.rightFrozenColCount+1,u.colCount-1,u.rowCount-1-u.bottomFrozenRowCount+1,u.rowCount-1,\\\"body\\\",u),h-u.rightFrozenColCount>=u.frozenColCount&&createColGroup(o,a,l,u.frozenColCount,h-u.rightFrozenColCount,u.columnHeaderLevelCount,d-u.bottomFrozenRowCount,\\\"body\\\",u),o.firstChild||t.firstChild||e.firstChild||i.firstChild?(s.currentRow=null!=(h=null!=(g=null==(c=o.firstChild)?void 0:c.rowNumber)?g:null==(p=i.firstChild)?void 0:p.rowNumber)?h:s.totalRow,s.rowEnd=s.currentRow,s.rowUpdatePos=s.rowEnd+1,s.referenceRow=s.rowStart+Math.floor((s.rowEnd-s.rowStart)/2),s.currentCol=null!=(u=null!=(h=null!=(g=null!=(u=null==(d=o.lastChild)?void 0:d.col)?u:null==(c=t.lastChild)?void 0:c.col)?g:null==(p=i.lastChild)?void 0:p.col)?h:null==(d=e.lastChild)?void 0:d.col)?u:s.totalCol,s.colEnd=s.currentCol,s.colUpdatePos=s.colEnd+1,s.referenceCol=s.colStart+Math.floor((s.colEnd-s.colStart)/2),s.progress()):(s.currentRow=s.totalRow,s.rowEnd=s.currentRow,s.rowUpdatePos=s.rowEnd+1,s.referenceRow=s.rowStart+Math.floor((s.rowEnd-s.rowStart)/2),s.currentCol=s.totalCol,s.colEnd=s.currentCol,s.colUpdatePos=s.colEnd+1,s.referenceCol=s.colStart+Math.floor((s.colEnd-s.colStart)/2))}function getFirstChild(e){let t=e.firstChild;for(;\\\"group\\\"!==t.type;)t=t._next;return t}function getLastChild(e){let t=e.lastChild;for(;\\\"group\\\"!==t.type;)t=t._prev;return t}function getPrevGroup(e){let t=e._prev;for(;t&&\\\"group\\\"!==t.type;)t=t._prev;return t}function getNextGroup(e){let t=e._next;for(;t&&\\\"group\\\"!==t.type;)t=t._next;return t}function updateAutoColumn(e,t,i,r=\\\"left\\\"){for(let l=e;l<=t;l++){var n=i.scenegraph.getColGroup(l),n=(n&&moveColumnGroup(n,i,r),i.scenegraph.getColGroup(l,!0)),n=(n&&moveColumnGroup(n,i,r),i.scenegraph.getColGroupInBottom(l));n&&moveColumnGroup(n,i,r)}var o=Math.min(i.scenegraph.proxy.colLimit,i.scenegraph.proxy.bodyRightCol-i.scenegraph.proxy.bodyLeftCol+1),o=i.getColsWidth(i.frozenColCount,i.frozenColCount+o),a=i.getColsWidth(i.frozenColCount,i.colCount-1);i.scenegraph.proxy.xLimitLeft=o/2,i.scenegraph.proxy.xLimitRight=a-o/2}function moveColumnGroup(e,t,i=\\\"left\\\"){var r;\\\"left\\\"===i?(r=(r=getPrevGroup(e))?r.attribute.x+t.getColWidth(e._prev.col):t.getColsWidth(t.frozenColCount,e.col-1),e.setAttribute(\\\"x\\\",r)):(r=(r=getNextGroup(e))?r.attribute.x-t.getColWidth(e.col):t.getColsWidth(t.frozenColCount,e.col-1),e.setAttribute(\\\"x\\\",r))}emptyGroup.role=\\\"empty\\\",init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var __awaiter4=function(e,t,l,s){return new(l=l||Promise)(function(i,r){function n(e){try{a(s.next(e))}catch(t){r(t)}}function o(e){try{a(s[\\\"throw\\\"](e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(n,o)}a((s=s.apply(e,t||[])).next())})};function dynamicSetX(i,r,n){return __awaiter4(this,void 0,void 0,function*(){var e,t=n.table.getTargetColAt(i+n.table.scenegraph.rowHeaderGroup.attribute.width);t&&(e=t.col,t=t.left,n.screenLeftCol=e,move(r?n.bodyRightCol-n.colEnd:n.screenLeftCol-n.referenceCol,e,t,i,n),r&&(e=n.table.scenegraph.getColGroup(n.colEnd))&&(t=e.attribute.x+e.attribute.width-(n.table.tableNoFrameWidth-n.table.getFrozenColsWidth()-n.table.getRightFrozenColsWidth())-i,n.deltaX=-t,n.table.scenegraph.setBodyAndColHeaderX(-i+n.deltaX)),n.table.scenegraph.updateNextFrame())})}function move(e,t,i,r,n){0<e?moveColumn(e,\\\"left\\\",n.screenLeftCol,i,r,n):e<0&&moveColumn(-e,\\\"right\\\",n.screenLeftCol,i,r,n),n.updateDeltaX(r,i,t),n.table.scenegraph.setBodyAndColHeaderX(-r+n.deltaX)}function moveColumn(n,o,a,l,e,s){return __awaiter4(this,void 0,void 0,function*(){var e,t,i,r;\\\"left\\\"===o&&s.colEnd+n>s.bodyRightCol?n=s.bodyRightCol-s.colEnd:\\\"right\\\"===o&&s.colStart-n<s.bodyLeftCol&&(n=s.colStart-s.bodyLeftCol),0!==n&&(n<0&&(o=\\\"left\\\"===o?\\\"right\\\":\\\"left\\\",n=-n),n<s.colEnd-s.colStart?(r=\\\"left\\\"===o?s.colStart:s.colEnd-n+1,e=\\\"left\\\"===o?s.colStart+n-1:s.colEnd,i=\\\"left\\\"===o?s.colEnd+1:s.colStart-n,t=\\\"left\\\"===o?s.colEnd+n:s.colStart-1,computeColsWidth(s.table,i,t),updatePartColPosition(r,e,o,s),r=i,e=t,s.colStart=\\\"left\\\"===o?s.colStart+n:s.colStart-n,s.colEnd=\\\"left\\\"===o?s.colEnd+n:s.colEnd-n,updateColContent(r,e,s),updateAutoColumn(r,e,s.table,o),t=s.table.scenegraph.getColGroup(a)||s.table.scenegraph.getColGroup(a,!0),r=l-(t.attribute.x+s.table.getFrozenColsWidth()+s.table.scenegraph.proxy.deltaX),s.table.scenegraph.proxy.deltaX+=r,s.currentCol=\\\"left\\\"===o?s.currentCol+n:s.currentCol-n,s.totalCol=Math.max(0,Math.min(s.table.colCount-1,\\\"left\\\"===o?s.totalCol+n:s.totalCol-n)),s.referenceCol=s.colStart+Math.floor((s.colEnd-s.colStart)/2),s.colUpdatePos=i,s.colUpdateDirection=o):(e=\\\"left\\\"===o?s.colStart+n:s.colStart-n,t=\\\"left\\\"===o?s.colEnd+n:s.colEnd-n,computeColsWidth(s.table,e,t),updateAllColPosition(s.table.getColsWidth(s.bodyLeftCol,e-1),n,o,s),r=t,s.colStart=i=e,s.colEnd=t,updateColContent(i,r,s),updateAutoColumn(i,r,s.table,t>s.bodyRightCol-(s.colEnd-s.colStart+1)?\\\"right\\\":\\\"left\\\"),s.currentCol=\\\"left\\\"===o?s.currentCol+n:s.currentCol-n,s.totalCol=Math.max(0,Math.min(s.table.colCount-1,\\\"left\\\"===o?s.totalCol+n:s.totalCol-n)),s.referenceCol=s.colStart+Math.floor((s.colEnd-s.colStart)/2),s.colUpdatePos=s.colStart,s.colUpdateDirection=t>s.bodyRightCol-(s.colEnd-s.colStart+1)?\\\"right\\\":\\\"left\\\"),s.table.scenegraph.updateNextFrame())})}function updateColGroupPosition(e,t,i){e.col=t,e.forEachChildren(e=>{e.col=t,e.needUpdate=!0}),e.setAttribute(\\\"x\\\",i),e.needUpdate=!0}function updateColGroupContent(t,i){if(t){let e=t.firstChild;for(;e;)e=i.updateCellGroupContent(e)._next;t.needUpdate=!1,t.setAttribute(\\\"width\\\",i.table.getColWidth(t.col))}}function updatePartColPosition(e,t,i,r){for(let n=e;n<=t;n++)0<r.table.scenegraph.bodyGroup.childrenCount&&\\\"group\\\"===r.table.scenegraph.bodyGroup.firstChild.type&&updateColPosition(r.table.scenegraph.bodyGroup,i,r),0<r.table.scenegraph.colHeaderGroup.childrenCount&&\\\"group\\\"===r.table.scenegraph.colHeaderGroup.firstChild.type&&updateColPosition(r.table.scenegraph.colHeaderGroup,i,r),0<r.table.scenegraph.bottomFrozenGroup.childrenCount&&\\\"group\\\"===r.table.scenegraph.bottomFrozenGroup.firstChild.type&&updateColPosition(r.table.scenegraph.bottomFrozenGroup,i,r)}function updateColPosition(e,t,i){var r,n;\\\"left\\\"===t?(updateColGroupPosition(n=getFirstChild(e),(r=getLastChild(e)).col+1,r.attribute.x+i.table.getColWidth(r.col)),e.appendChild(n),e.border&&e.appendChild(e.border)):(updateColGroupPosition(r=getLastChild(e),(n=getFirstChild(e)).col-1,n.attribute.x-i.table.getColWidth(n.col-1)),e.insertBefore(r,e.firstChild))}function updateColContent(e,t,i){for(let n=e;n<=t;n++){var r=i.table.scenegraph.getColGroup(n),r=(r&&updateColGroupContent(r,i),i.table.scenegraph.getColGroup(n,!0)),r=(r&&updateColGroupContent(r,i),i.table.scenegraph.getColGroupInBottom(n)),r=(r&&updateColGroupContent(r,i),i.table.scenegraph.getColGroupInRightTopCorner(n)),r=(r&&updateColGroupContent(r,i),i.table.scenegraph.getColGroupInRightBottomCorner(n));r&&updateColGroupContent(r,i)}}function updateAllColPosition(i,r,n,o){o.table.scenegraph.colHeaderGroup.forEachChildren((e,t)=>{\\\"group\\\"===e.type&&updateColGroupPosition(e,\\\"left\\\"===n?e.col+r:e.col-r,0===t?i:e._prev.attribute.x+o.table.getColWidth(e._prev.col))}),o.table.scenegraph.bottomFrozenGroup.forEachChildren((e,t)=>{\\\"group\\\"===e.type&&updateColGroupPosition(e,\\\"left\\\"===n?e.col+r:e.col-r,0===t?i:e._prev.attribute.x+o.table.getColWidth(e._prev.col))}),o.table.scenegraph.bodyGroup.forEachChildren((e,t)=>{\\\"group\\\"===e.type&&updateColGroupPosition(e,\\\"left\\\"===n?e.col+r:e.col-r,0===t?i:e._prev.attribute.x+o.table.getColWidth(e._prev.col))})}function updateAutoRow(t,n,o,a,l,e=\\\"up\\\",s){var h,d;if(\\\"up\\\"===e)for(let i=t;i<=n;i++)for(let e=o;e<=a;e++){var u=l.scenegraph.highPerformanceGetCell(i,e,!0);if(u.row){let t;if(u._prev)t=(null==(h=u._prev)?void 0:h.attribute.y)+l.getRowHeight(u._prev.row);else if(s){if(t=l.scenegraph.highPerformanceGetCell(i,a+1,!0).attribute.y,isValid_default(t))for(let e=o;e<=a;e++)t-=l.getRowHeight(e)}else t=l.getRowsHeight(l.columnHeaderLevelCount,u.row-1);isValid_default(t)&&u.setAttribute(\\\"y\\\",t)}}else for(let r=t;r<=n;r++)for(let e=a;e>=o;e--){var c=l.scenegraph.highPerformanceGetCell(r,e,!0);if(c.row){let t;if(c._next)t=(null==(d=c._next)?void 0:d.attribute.y)-l.getRowHeight(c.row);else if(s){t=l.scenegraph.highPerformanceGetCell(r,o-1,!0).attribute.y;for(let e=o-1;e<a;e++)t+=l.getRowHeight(e)}else t=l.getRowsHeight(l.columnHeaderLevelCount,c.row-1);c.setAttribute(\\\"y\\\",t)}}var i=Math.min(l.scenegraph.proxy.rowLimit,l.scenegraph.proxy.bodyBottomRow-l.scenegraph.proxy.bodyTopRow+1),i=l.getRowsHeight(l.columnHeaderLevelCount,l.columnHeaderLevelCount+i),r=l.getRowsHeight(l.columnHeaderLevelCount,l.rowCount-1);l.scenegraph.proxy.yLimitTop=i/2,l.scenegraph.proxy.yLimitBottom=r-i/2}init_esbuild_inject(),init_esbuild_inject();var __awaiter5=function(e,t,l,s){return new(l=l||Promise)(function(i,r){function n(e){try{a(s.next(e))}catch(t){r(t)}}function o(e){try{a(s[\\\"throw\\\"](e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(n,o)}a((s=s.apply(e,t||[])).next())})};function dynamicSetY(i,r,n){return __awaiter5(this,void 0,void 0,function*(){var e,t=n.table.getTargetRowAt(i+n.table.scenegraph.colHeaderGroup.attribute.height);t&&(e=t.row,t=t.top,n.screenTopRow=e,move2(r?n.bodyBottomRow-n.rowEnd:e-n.referenceRow,e,t,i,n),r)&&\\\"cell\\\"===(e=n.table.scenegraph.highPerformanceGetCell(n.colStart,n.rowEnd,!0)).role&&(t=e.attribute.y+e.attribute.height-(n.table.tableNoFrameHeight-n.table.getFrozenRowsHeight()-n.table.getBottomFrozenRowsHeight())-i,n.deltaY=-t,n.updateBody(i-n.deltaY))})}function move2(e,t,i,r,n){0<e?moveCell(e,\\\"up\\\",t,i,r,n):e<0&&moveCell(-e,\\\"down\\\",t,i,r,n),n.updateDeltaY(r,i,t),n.updateBody(r-n.deltaY)}function moveCell(a,l,s,e,t,h){return __awaiter5(this,void 0,void 0,function*(){if(\\\"up\\\"===l&&h.rowEnd+a>h.bodyBottomRow?a=h.bodyBottomRow-h.rowEnd:\\\"down\\\"===l&&h.rowStart-a<h.bodyTopRow&&(a=h.rowStart-h.bodyTopRow),0!==a){if(a<0&&(l=\\\"up\\\"===l?\\\"down\\\":\\\"up\\\",a=-a),a<h.rowEnd-h.rowStart){var i=\\\"up\\\"===l?h.rowStart:h.rowEnd-a+1,r=\\\"up\\\"===l?h.rowStart+a-1:h.rowEnd,n=\\\"up\\\"===l?h.rowEnd+1:h.rowStart-a,o=\\\"up\\\"===l?h.rowEnd+a:h.rowStart-1;let e,t;t=\\\"autoHeight\\\"===h.table.heightMode?(e=n,o):(e=Math.max(h.bodyTopRow,s-+h.screenRowCount),Math.min(h.bodyBottomRow,s+2*h.screenRowCount)),computeRowsHeight(h.table,e,t,!1),updatePartRowPosition(i,r,l,h),h.rowStart=\\\"up\\\"===l?h.rowStart+a:h.rowStart-a,h.rowEnd=\\\"up\\\"===l?h.rowEnd+a:h.rowEnd-a,updateRowContent(e,t,h),\\\"autoHeight\\\"===h.table.heightMode&&(updateAutoRow(h.bodyLeftCol,h.bodyRightCol,e,t,h.table,o>h.bodyBottomRow-(h.rowEnd-h.rowStart+1)?\\\"down\\\":\\\"up\\\",!0),updateAutoRow(0,h.table.frozenColCount-1,e,t,h.table,o>h.bodyBottomRow-(h.rowEnd-h.rowStart+1)?\\\"down\\\":\\\"up\\\",!0),updateAutoRow(h.table.colCount-h.table.rightFrozenColCount,h.table.colCount-1,e,t,h.table,o>h.bodyBottomRow-(h.rowEnd-h.rowStart+1)?\\\"down\\\":\\\"up\\\",!0)),h.currentRow=\\\"up\\\"===l?h.currentRow+a:h.currentRow-a,h.totalRow=Math.max(0,Math.min(h.bodyBottomRow,\\\"up\\\"===l?h.totalRow+a:h.totalRow-a)),h.referenceRow=h.rowStart+Math.floor((h.rowEnd-h.rowStart)/2),\\\"autoHeight\\\"===h.table.heightMode?h.rowUpdatePos=Math.min(h.rowUpdatePos,h.rowEnd+1):h.rowUpdatePos=Math.min(h.rowUpdatePos,n),h.rowUpdateDirection=l}else{i=\\\"up\\\"===l?h.rowStart+a:h.rowStart-a,r=\\\"up\\\"===l?h.rowEnd+a:h.rowEnd-a,o=h.table.getRowsHeight(h.bodyTopRow,i-1);let e,t;t=\\\"autoHeight\\\"===h.table.heightMode?(e=i,r):(e=Math.max(h.bodyTopRow,s-+h.screenRowCount),Math.min(h.bodyBottomRow,s+2*h.screenRowCount)),computeRowsHeight(h.table,e,t,!1),updateAllRowPosition(o,a,l,h),h.rowStart=i,h.rowEnd=r,updateRowContent(e,t,h),\\\"autoHeight\\\"===h.table.heightMode&&(updateAutoRow(h.bodyLeftCol,h.bodyRightCol,e,t,h.table,r>h.bodyBottomRow-(h.rowEnd-h.rowStart+1)?\\\"down\\\":\\\"up\\\"),updateAutoRow(0,h.table.frozenColCount-1,e,t,h.table,r>h.bodyBottomRow-(h.rowEnd-h.rowStart+1)?\\\"down\\\":\\\"up\\\"),updateAutoRow(h.table.colCount-h.table.rightFrozenColCount,h.table.colCount-1,e,t,h.table,r>h.bodyBottomRow-(h.rowEnd-h.rowStart+1)?\\\"down\\\":\\\"up\\\")),h.currentRow=\\\"up\\\"===l?h.currentRow+a:h.currentRow-a,h.totalRow=Math.max(0,Math.min(h.bodyBottomRow,\\\"up\\\"===l?h.totalRow+a:h.totalRow-a)),h.referenceRow=h.rowStart+Math.floor((h.rowEnd-h.rowStart)/2),\\\"autoHeight\\\"===h.table.heightMode?h.rowUpdatePos=h.rowEnd+1:h.rowUpdatePos=h.rowStart,h.rowUpdateDirection=r>h.bodyBottomRow-(h.rowEnd-h.rowStart+1)?\\\"down\\\":\\\"up\\\"}h.table.scenegraph.updateNextFrame(),\\\"autoHeight\\\"!==h.table.heightMode&&(yield h.progress())}})}function updatePartRowPosition(t,i,r,n){for(let e=0;e<n.table.frozenColCount;e++){var o=n.table.scenegraph.getColGroup(e);if(o)for(let e=t;e<=i;e++)updateCellGroupPosition(o,r,n)}for(let s=n.table.colCount-n.table.rightFrozenColCount;s<n.table.colCount;s++){var a=n.table.scenegraph.getColGroup(s);if(a)for(let e=t;e<=i;e++)updateCellGroupPosition(a,r,n)}for(let h=n.bodyLeftCol;h<=n.bodyRightCol;h++){var l=n.table.scenegraph.getColGroup(h);if(l)for(let e=t;e<=i;e++)updateCellGroupPosition(l,r,n)}}function updateCellGroupPosition(e,t,i){var r;1<=e.childrenCount&&(\\\"up\\\"===t?(r=e.firstChild,i.updateCellGroupPosition(r,e.lastChild.row+1,e.lastChild.attribute.y+i.table.getRowHeight(e.lastChild.row)),e.appendChild(r)):(r=e.lastChild,i.updateCellGroupPosition(r,e.firstChild.row-1,e.firstChild.attribute.y-i.table.getRowHeight(r.row)),e.insertBefore(r,e.firstChild)))}function updateAllRowPosition(i,r,n,o){for(let l=0;l<o.table.frozenColCount;l++){var e=o.table.scenegraph.getColGroup(l);null!=e&&e.forEachChildren((e,t)=>{o.updateCellGroupPosition(e,\\\"up\\\"===n?e.row+r:e.row-r,0===t?i:e._prev.attribute.y+o.table.getRowHeight(e._prev.row))})}for(let s=o.table.colCount-o.table.rightFrozenColCount;s<o.table.colCount;s++){var t=o.table.scenegraph.getColGroup(s);null!=t&&t.forEachChildren((e,t)=>{o.updateCellGroupPosition(e,\\\"up\\\"===n?e.row+r:e.row-r,0===t?i:e._prev.attribute.y+o.table.getRowHeight(e._prev.row))})}for(let h=o.bodyLeftCol;h<=o.bodyRightCol;h++){var a=o.table.scenegraph.getColGroup(h);null!=a&&a.forEachChildren((e,t)=>{o.updateCellGroupPosition(e,\\\"up\\\"===n?e.row+r:e.row-r,0===t?i:e._prev.attribute.y+o.table.getRowHeight(e._prev.row))})}}function updateRowContent(t,i,r){for(let l=0;l<r.table.frozenColCount;l++)for(let e=t;e<=i;e++){var n=r.highPerformanceGetCell(l,e,!0);r.updateCellGroupContent(n)}for(let s=r.table.colCount-r.table.rightFrozenColCount;s<r.table.colCount;s++)for(let e=t;e<=i;e++){var o=r.highPerformanceGetCell(s,e);r.updateCellGroupContent(o)}for(let h=r.bodyLeftCol;h<=r.bodyRightCol;h++)for(let e=t;e<=i;e++){var a=r.highPerformanceGetCell(h,e);r.updateCellGroupContent(a)}r.table.scenegraph.updateNextFrame()}init_esbuild_inject();var __awaiter6=function(e,t,l,s){return new(l=l||Promise)(function(i,r){function n(e){try{a(s.next(e))}catch(t){r(t)}}function o(e){try{a(s[\\\"throw\\\"](e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(n,o)}a((s=s.apply(e,t||[])).next())})};function sortVertical(d){var u;return __awaiter6(this,void 0,void 0,function*(){d.table.scenegraph.bodyGroup.forEachChildren((e,t)=>{\\\"group\\\"===e.type&&(e.needUpdate=!0,null!=e)&&e.forEachChildren(e=>{e.needUpdate=!0})});for(let l=0;null!==(u=l<d.table.frozenColCount)&&u;l++){var i=d.table.scenegraph.getColGroup(l);null!=i&&i.setAttribute(\\\"chartInstance\\\",void 0);for(let e=d.rowStart;e<=d.rowEnd;e++)d.table.scenegraph.updateCellContent(l,e);for(let t=d.table.rowCount-d.table.bottomFrozenRowCount;t<d.table.rowCount;t++)d.table.scenegraph.updateCellContent(l,t)}for(let s=d.colStart;s<=d.colEnd;s++){var t=d.table.scenegraph.getColGroup(s);null!=t&&t.setAttribute(\\\"chartInstance\\\",void 0);for(let e=d.table.rowCount-d.table.bottomFrozenRowCount;e<d.table.rowCount;e++)d.table.scenegraph.updateCellContent(s,e)}for(let h=d.table.colCount-d.table.rightFrozenColCount;h<d.table.colCount;h++){var r=d.table.scenegraph.getColGroup(h);null!=r&&r.setAttribute(\\\"chartInstance\\\",void 0);for(let e=d.rowStart;e<=d.rowEnd;e++)d.table.scenegraph.updateCellContent(h,e);for(let t=d.table.rowCount-d.table.bottomFrozenRowCount;t<d.table.rowCount;t++)d.table.scenegraph.updateCellContent(h,t)}let e,n;n=\\\"autoHeight\\\"===d.table.heightMode?(e=d.rowStart,d.rowEnd):(e=Math.max(d.bodyTopRow,d.screenTopRow-+d.screenRowCount),Math.min(d.bodyBottomRow,d.screenTopRow+2*d.screenRowCount));var o=d.table.getAllRowsHeight(),a=(computeRowsHeight(d.table,e,n),d.table.getAllRowsHeight());o!==a&&d.table.scenegraph.updateContainerHeight(d.table.frozenRowCount,a-o),updateRowContent(e,n,d),\\\"autoHeight\\\"===d.table.heightMode&&updateAutoRow(d.bodyLeftCol,d.bodyRightCol,e,n,d.table,d.rowEnd>d.bodyBottomRow-(d.rowEnd-d.rowStart+1)?\\\"down\\\":\\\"up\\\"),d.rowUpdatePos=d.rowStart,d.rowUpdateDirection=d.rowEnd>d.bodyBottomRow-(d.rowEnd-d.rowStart+1)?\\\"down\\\":\\\"up\\\",d.table.scenegraph.updateNextFrame(),\\\"autoHeight\\\"!==d.table.heightMode&&(yield d.progress())})}init_esbuild_inject();var __awaiter7=function(e,t,l,s){return new(l=l||Promise)(function(i,r){function n(e){try{a(s.next(e))}catch(t){r(t)}}function o(e){try{a(s[\\\"throw\\\"](e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(n,o)}a((s=s.apply(e,t||[])).next())})};function sortHorizontal(a){return __awaiter7(this,void 0,void 0,function*(){a.table.scenegraph.bodyGroup.forEachChildren((e,t)=>{\\\"group\\\"===e.type&&(e.needUpdate=!0,null!=e)&&e.forEachChildren(e=>{e.needUpdate=!0})});for(let n=a.colStart;n<=a.colEnd;n++){var t=a.table.scenegraph.getColGroup(n);null!=t&&t.setAttribute(\\\"chartInstance\\\",void 0);for(let e=a.table.rowCount-a.table.bottomFrozenRowCount;e<a.table.rowCount;e++)a.table.scenegraph.updateCellContent(n,e)}for(let o=a.table.colCount-a.table.rightFrozenColCount;o<a.table.colCount;o++){var i=a.table.scenegraph.getColGroup(o);null!=i&&i.setAttribute(\\\"chartInstance\\\",void 0);for(let e=a.rowStart;e<=a.rowEnd;e++)a.table.scenegraph.updateCellContent(o,e);for(let t=a.table.rowCount-a.table.bottomFrozenRowCount;t<a.table.rowCount;t++)a.table.scenegraph.updateCellContent(o,t)}var e=Math.max(a.bodyLeftCol,a.screenLeftCol-+a.screenColCount),r=Math.min(a.bodyRightCol,a.screenLeftCol+2*a.screenColCount);computeColsWidth(a.table,e,r),updateColContent(e,r,a),a.colUpdatePos=a.colStart,a.colUpdateDirection=a.colEnd>a.bodyRightCol-(a.colEnd-a.colStart+1)?\\\"right\\\":\\\"left\\\",a.table.scenegraph.updateNextFrame(),yield a.progress()})}function handleTextStick(a){const l=a.internalProps.stick[\\\"changedCells\\\"],{scrollTop:e,scrollLeft:t,frozenRowCount:s,frozenColCount:h}=(l.forEach(t=>{a.scenegraph.getCell(t.col,t.row).forEachChildren(e=>{e.setAttributes({dx:t.dx,dy:t.dy})})}),l.clear(),a),d=a.getFrozenRowsHeight(),u=a.getFrozenColsWidth(),i=a.getRowAt(e+d+1)[\\\"row\\\"],r=a.getColAt(t+u+1)[\\\"col\\\"],c=Math.max(i,a.frozenRowCount),g=Math.max(r,a.frozenColCount),p=a.getAllRowsHeight()>a.tableNoFrameHeight?a.getRowAt(e+a.tableNoFrameHeight-a.getBottomFrozenRowsHeight()-1).row:a.rowCount-a.bottomFrozenRowCount-1,f=a.getAllColsWidth()>a.tableNoFrameWidth?a.getColAt(t+a.tableNoFrameWidth-a.getRightFrozenColsWidth()-1).col:a.colCount-a.rightFrozenColCount-1;if(!(f<0||p<0)){for(let i=0;i<s&&!(f<g);i++)[g,f].forEach(e=>{var t=a._getCellStyle(e,i);null!=t&&t.textStick&&adjustCellContentHorizontalLayout(a.scenegraph.getCell(e,i),u+a.tableX,a.tableNoFrameWidth-a.getRightFrozenColsWidth()+a.tableX,l,null==t?void 0:t.textStickBaseOnAlign,a)});for(let r=0;r<h&&!(p<c);r++)[c,p].forEach(e=>{var t=a._getCellStyle(r,e);null!=t&&t.textStick&&\\\"tree\\\"!==a.internalProps.layoutMap.rowHierarchyType&&adjustCellContentVerticalLayout(a.scenegraph.getCell(r,e),d+a.tableY,a.tableNoFrameHeight-a.getBottomFrozenRowsHeight()+a.tableY,l,null==t?void 0:t.textStickBaseOnAlign,a)});for(let n=g;n<=f&&!(p<c);n++)[c,p].forEach(e=>{var t=a._getCellStyle(n,e);null!=t&&t.textStick&&adjustCellContentVerticalLayout(a.scenegraph.getCell(n,e),d+a.tableY,a.tableNoFrameHeight-a.getBottomFrozenRowsHeight()+a.tableY,l,null==t?void 0:t.textStickBaseOnAlign,a)});for(let o=c;o<p&&!(f<g);o++)[g,f].forEach(e=>{var t,i=a._getCellStyle(e,o);null!=(t=a._getCellStyle(e,o))&&t.textStick&&adjustCellContentHorizontalLayout(a.scenegraph.getCell(e,o),u+a.tableX,a.tableNoFrameWidth-a.getRightFrozenColsWidth()+a.tableX,l,null==i?void 0:i.textStickBaseOnAlign,a)})}}function adjustCellContentVerticalLayout(e,i,r,n,o,a){if(isNumber_default(e.mergeStartCol)&&isNumber_default(e.mergeStartRow)&&isNumber_default(e.mergeEndCol)&&isNumber_default(e.mergeEndRow)){var{colStart:l,colEnd:s,rowStart:h,rowEnd:d}=getCellMergeRange(e,a.scenegraph);for(let t=l;t<=s;t++)for(let e=h;e<=d;e++)dealVertical(a.scenegraph.getCell(t,e),i,r,n,o)}else dealVertical(e,i,r,n,o)}function dealVertical(e,t,i,r,n){var o=e.getChildByName(\\\"text\\\",!0)||e.getChildByName(\\\"image\\\",!0);if(o){if(\\\"image\\\"===o.type){var a=o.attribute[\\\"image\\\"];if(!a||!o.resources)return;if(\\\"success\\\"!==o.resources.get(a).state)return}var a=null!=(a=o.textBaseline)?a:\\\"top\\\",l=(o.AABBBounds.width(),o.globalAABBBounds.y1),s=o.globalAABBBounds.y2;if(\\\"middle\\\"===a&&n){var a=e.globalAABBBounds.y1+(null!=(a=null==(a=e.firstChild)?void 0:a.attribute.dy)?a:0),h=a+(null!=(h=null!=(h=e.contentHeight)?h:e.attribute.height)?h:0);if(a<t||i<h){const d=Math.max(a,t),u=Math.min(h,i),c=o.globalTransMatrix.f-(u+d)/2;r.has(e.col+\\\"-\\\"+e.row)||r.set(e.col+\\\"-\\\"+e.row,{col:e.col,row:e.row,dx:null!=(h=null==(a=e.firstChild)?void 0:a.attribute.dx)?h:0,dy:null!=(a=null==(o=e.firstChild)?void 0:o.attribute.dy)?a:0}),e.forEachChildren(e=>{var t;e.setAttribute(\\\"dy\\\",(null!=(t=e.attribute.dy)?t:0)-c+2)})}}else if(l<t){const g=l-t;r.has(e.col+\\\"-\\\"+e.row)||r.set(e.col+\\\"-\\\"+e.row,{col:e.col,row:e.row,dx:null!=(o=null==(h=e.firstChild)?void 0:h.attribute.dx)?o:0,dy:null!=(l=null==(a=e.firstChild)?void 0:a.attribute.dy)?l:0}),e.forEachChildren(e=>{var t;e.setAttribute(\\\"dy\\\",(null!=(t=e.attribute.dy)?t:0)-g+2)})}else if(i<s){const p=s-i;r.has(e.col+\\\"-\\\"+e.row)||r.set(e.col+\\\"-\\\"+e.row,{col:e.col,row:e.row,dx:null!=(o=null==(h=e.firstChild)?void 0:h.attribute.dx)?o:0,dy:null!=(l=null==(a=e.firstChild)?void 0:a.attribute.dy)?l:0}),e.forEachChildren(e=>{var t;e.setAttribute(\\\"dy\\\",(null!=(t=e.attribute.dy)?t:0)-p)})}}}function adjustCellContentHorizontalLayout(e,i,r,n,o,a){if(isNumber_default(e.mergeStartCol)&&isNumber_default(e.mergeStartRow)&&isNumber_default(e.mergeEndCol)&&isNumber_default(e.mergeEndRow)){var{colStart:l,colEnd:s,rowStart:h,rowEnd:d}=getCellMergeRange(e,a.scenegraph);for(let t=l;t<=s;t++)for(let e=h;e<=d;e++)dealHorizontal(a.scenegraph.getCell(t,e),i,r,n,o)}else dealHorizontal(e,i,r,n,o)}function dealHorizontal(e,t,i,r,n){var o=e.getChildByName(\\\"text\\\",!0)||e.getChildByName(\\\"image\\\",!0);if(o){if(\\\"image\\\"===o.type){var a=o.attribute[\\\"image\\\"];if(!a||!o.resources)return;if(\\\"success\\\"!==o.resources.get(a).state)return}var a=null!=(a=null!=(a=o.attribute.textAlign)?a:o.textAlign)?a:\\\"left\\\",l=(o.AABBBounds.width(),o.globalAABBBounds.x1),s=o.globalAABBBounds.x2;if(\\\"center\\\"===a&&n){var a=e.globalAABBBounds.x1+(null!=(a=null==(a=e.firstChild)?void 0:a.attribute.dx)?a:0),h=a+(null!=(h=null!=(h=e.contentWidth)?h:e.attribute.width)?h:0);if(a<t||i<h){const d=Math.max(a,t),u=Math.min(h,i),c=o.globalTransMatrix.e-(u+d)/2;r.has(e.col+\\\"-\\\"+e.row)||r.set(e.col+\\\"-\\\"+e.row,{col:e.col,row:e.row,dx:null!=(h=null==(a=e.firstChild)?void 0:a.attribute.dx)?h:0,dy:null!=(a=null==(o=e.firstChild)?void 0:o.attribute.dy)?a:0}),e.forEachChildren(e=>{var t;e.setAttribute(\\\"dx\\\",(null!=(t=e.attribute.dx)?t:0)-c+2)})}}else if(l<t){const g=l-t;r.has(e.col+\\\"-\\\"+e.row)||r.set(e.col+\\\"-\\\"+e.row,{col:e.col,row:e.row,dx:null!=(o=null==(h=e.firstChild)?void 0:h.attribute.dx)?o:0,dy:null!=(l=null==(a=e.firstChild)?void 0:a.attribute.dy)?l:0}),e.forEachChildren(e=>{var t;e.setAttribute(\\\"dx\\\",(null!=(t=e.attribute.dx)?t:0)-g+2)})}else if(i<s){const p=s-i;r.has(e.col+\\\"-\\\"+e.row)||r.set(e.col+\\\"-\\\"+e.row,{col:e.col,row:e.row,dx:null!=(o=null==(h=e.firstChild)?void 0:h.attribute.dx)?o:0,dy:null!=(l=null==(a=e.firstChild)?void 0:a.attribute.dy)?l:0}),e.forEachChildren(e=>{var t;e.setAttribute(\\\"dx\\\",(null!=(t=e.attribute.dx)?t:0)-p)})}}}function checkHaveTextStick(e){var t=e.internalProps.layoutMap.headerObjects,i=e.internalProps.layoutMap.columnObjects;for(let o=0;o<t.length;o++){var r=t[o];if(r&&null!=(r=r.style)&&r.textStick)return!0}for(let a=0;a<i.length;a++){var n=i[a];if(n&&null!=(n=n.style)&&n.textStick)return!0}return!!(e.theme.headerStyle.textStick||e.theme.rowHeaderStyle.textStick||e.theme.bodyStyle.textStick)}init_esbuild_inject();var __awaiter8=function(e,t,l,s){return new(l=l||Promise)(function(i,r){function n(e){try{a(s.next(e))}catch(t){r(t)}}function o(e){try{a(s[\\\"throw\\\"](e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(n,o)}a((s=s.apply(e,t||[])).next())})},SceneProxy=class{constructor(e){this.isRelease=!1,this.mode=\\\"column\\\",this.rowLimit=200,this.currentRow=0,this.rowStart=0,this.rowEnd=0,this.referenceRow=0,this.screenTopRow=0,this.deltaY=0,this.deltaHeight=0,this.colLimit=100,this.screenLeftCol=0,this.deltaX=0,this.deltaWidth=0,this.cellCache=new Map,this.table=e,this.table.isPivotChart()?(this.rowLimit=100,this.colLimit=100):\\\"autoHeight\\\"===this.table.heightMode?this.rowLimit=100:\\\"autoWidth\\\"===this.table.widthMode&&(this.colLimit=100),this.table.internalProps.transpose?this.mode=\\\"row\\\":this.table.isPivotTable()&&(this.mode=\\\"pivot\\\"),this.table.options.maintainedDataCount&&(this.rowLimit=this.table.options.maintainedDataCount)}get bodyLeftCol(){return this.table.frozenColCount}setParamsForColumn(){this.bodyRightCol=this.table.colCount-1-this.table.rightFrozenColCount;var e=Math.min(this.colLimit,this.bodyRightCol-this.bodyLeftCol+1),t=(this.totalActualBodyColCount=e,this.totalCol=this.bodyLeftCol+e-1,this.colStart=this.bodyLeftCol,this.table.defaultColWidth),e=(this.taskColCount=+Math.ceil(this.table.tableNoFrameWidth/t),t*e),i=t*(this.bodyRightCol-this.bodyLeftCol+1),i=(this.xLimitLeft=e/2,this.xLimitRight=i-e/2,5*this.table.tableNoFrameWidth);this.screenColCount=Math.ceil(this.table.tableNoFrameWidth/t),this.firstScreenColLimit=Math.max(15,this.bodyLeftCol+Math.min(this.colLimit,Math.ceil(i/t))),this.colUpdatePos=this.bodyRightCol}setParamsForRow(){this.bodyTopRow=this.table.columnHeaderLevelCount,this.bodyBottomRow=this.table.rowCount-1-this.table.bottomFrozenRowCount;var e=Math.min(this.rowLimit,this.bodyBottomRow-this.bodyTopRow+1),t=(this.totalActualBodyRowCount=e,this.totalRow=this.bodyTopRow+e-1,this.rowStart=this.bodyTopRow,this.table.defaultRowHeight),e=(this.taskRowCount=+Math.ceil(this.table.tableNoFrameHeight/t),t*e),i=t*(this.bodyBottomRow-this.bodyTopRow+1),i=(this.yLimitTop=e/2,this.yLimitBottom=i-e/2,5*this.table.tableNoFrameHeight);this.screenRowCount=Math.ceil(this.table.tableNoFrameHeight/t),this.firstScreenRowLimit=Math.max(30,this.bodyTopRow+Math.min(this.rowLimit,Math.ceil(i/t))),this.rowUpdatePos=this.bodyBottomRow}resize(){var e=this.table.defaultColWidth,t=(this.taskColCount=+Math.ceil(this.table.tableNoFrameWidth/e),5*this.table.tableNoFrameWidth),t=(this.screenColCount=Math.ceil(this.table.tableNoFrameWidth/e),this.firstScreenColLimit=this.bodyLeftCol+Math.min(this.colLimit,Math.ceil(t/e)),this.table.defaultRowHeight),e=(this.taskRowCount=+Math.ceil(this.table.tableNoFrameHeight/t),5*this.table.tableNoFrameHeight);this.screenRowCount=Math.ceil(this.table.tableNoFrameHeight/t),this.firstScreenRowLimit=this.bodyTopRow+Math.min(this.rowLimit,Math.ceil(e/t))}createGroupForFirstScreen(e,t,i,r,n,o,a,l){createGroupForFirstScreen(e,t,i,r,n,o,a,l,this)}progress(){return __awaiter8(this,void 0,void 0,function*(){if(!this.isProgressing)return this.isProgressing=!0,new Promise((e,t)=>{setTimeout(()=>__awaiter8(this,void 0,void 0,function*(){this.isProgressing=!1,this.isRelease||(this.colUpdatePos<=this.colEnd?(yield this.updateColCellGroupsAsync(),yield this.progress()):this.rowUpdatePos<=this.rowEnd?(yield this.updateRowCellGroupsAsync(),yield this.progress()):this.currentCol<this.totalCol?(yield this.createCol(),yield this.progress()):this.currentRow<this.totalRow&&(yield this.createRow(),yield this.progress()),handleTextStick(this.table),this.table.scenegraph.updateNextFrame(),e())}),16)})})}createRow(){return __awaiter8(this,void 0,void 0,function*(){this.taskRowCount&&this.createRowCellGroup(this.taskRowCount)})}createCol(){return __awaiter8(this,void 0,void 0,function*(){this.taskColCount&&this.createColGroup(this.taskRowCount)})}createRowCellGroup(e){var i=Math.min(this.totalRow,this.currentRow+e);if(computeRowsHeight(this.table,this.currentRow+1,i,!1),this.table.frozenColCount){let e=0;for(let t=0;t<this.table.frozenColCount;t++){var r=this.table.scenegraph.getColGroup(t),n=this.table.isListTable()?\\\"body\\\":\\\"rowHeader\\\",r=createComplexColumn(r,t,r.attribute.width,this.currentRow+1,i,this.table.scenegraph.mergeMap,this.table.internalProps.defaultRowHeight,this.table,n)[\\\"height\\\"];e=Math.max(e,r),this.table.scenegraph.rowHeaderGroup.setAttribute(\\\"height\\\",e)}}if(this.table.rightFrozenColCount){let e=0;for(let t=this.table.colCount-this.table.rightFrozenColCount;t<this.table.colCount;t++){var o=this.table.scenegraph.getColGroup(t),a=this.table.isPivotChart()?\\\"rowHeader\\\":\\\"body\\\",o=createComplexColumn(o,t,o.attribute.width,this.currentRow+1,i,this.table.scenegraph.mergeMap,this.table.internalProps.defaultRowHeight,this.table,a)[\\\"height\\\"];e=Math.max(e,o),this.table.scenegraph.rightFrozenGroup.setAttribute(\\\"height\\\",e)}}let t=0;for(let h=this.bodyLeftCol;h<=this.bodyRightCol;h++){var l,s=this.table.scenegraph.getColGroup(h);s&&(l=h<this.table.rowHeaderLevelCount?\\\"rowHeader\\\":\\\"body\\\",s=createComplexColumn(s,h,s.attribute.width,this.currentRow+1,i,this.table.scenegraph.mergeMap,this.table.internalProps.defaultRowHeight,this.table,l)[\\\"height\\\"],t=Math.max(t,s))}this.table.scenegraph.bodyGroup.setAttribute(\\\"height\\\",t),this.currentRow=i,this.rowEnd=i,this.rowUpdatePos=this.rowEnd,this.table.scenegraph.updateContainer(),this.table.scenegraph.updateBorderSizeAndPosition()}createColGroup(e){var t=Math.min(this.totalCol,this.currentCol+e);computeColsWidth(this.table,this.currentCol+1,t);for(let a=0;a<this.table.rowCount;a++){var i=this.highPerformanceGetCell(this.currentCol,a);\\\"cell\\\"===i.role&&isNumber_default(i.mergeStartCol)&&i.mergeStartCol>this.currentCol&&this.table.scenegraph.updateCellContent(i.col,i.row)}this.table.columnHeaderLevelCount&&(o=(n=this.table.scenegraph.colHeaderGroup.lastChild instanceof Group2?this.table.scenegraph.colHeaderGroup.lastChild:this.table.scenegraph.colHeaderGroup.lastChild._prev).attribute.x+n.attribute.width,n=n.attribute.y,createColGroup(this.table.scenegraph.colHeaderGroup,o,n,this.currentCol+1,t,0,this.table.columnHeaderLevelCount-1,\\\"columnHeader\\\",this.table)),this.table.bottomFrozenRowCount&&(n=(o=this.table.scenegraph.bottomFrozenGroup.lastChild instanceof Group2?this.table.scenegraph.bottomFrozenGroup.lastChild:this.table.scenegraph.bottomFrozenGroup.lastChild._prev).attribute.x+o.attribute.width,o=o.attribute.y,createColGroup(this.table.scenegraph.bottomFrozenGroup,n,o,this.currentCol+1,t,this.table.rowCount-this.table.bottomFrozenRowCount,this.table.rowCount-1,\\\"columnHeader\\\",this.table));let r=this.table.scenegraph.bodyGroup.lastChild&&(this.table.scenegraph.bodyGroup.lastChild instanceof Group2?this.table.scenegraph.bodyGroup.lastChild:this.table.scenegraph.bodyGroup.lastChild._prev);var n=(r=r||this.table.scenegraph.colHeaderGroup.lastChild&&(this.table.scenegraph.colHeaderGroup.lastChild instanceof Group2?this.table.scenegraph.colHeaderGroup.lastChild:this.table.scenegraph.colHeaderGroup.lastChild._prev)).attribute.x+r.attribute.width,o=r.attribute.y;createColGroup(this.table.scenegraph.bodyGroup,n,o,this.currentCol+1,t,this.rowStart,this.rowEnd,\\\"body\\\",this.table),this.currentCol=t,this.colEnd=t,this.colUpdatePos=this.colEnd,this.table.scenegraph.updateContainer(),this.table.scenegraph.updateBorderSizeAndPosition()}setY(i,r=!1){return __awaiter8(this,void 0,void 0,function*(){var e=this.table.getRowsHeight(this.bodyTopRow,this.bodyTopRow+(this.rowEnd-this.rowStart+1))/2,t=this.table.getAllRowsHeight()-e;!(i<e&&this.rowStart===this.bodyTopRow||t<i&&this.rowEnd===this.bodyBottomRow)&&(this.table.scenegraph.bodyGroup.firstChild&&0!==this.table.scenegraph.bodyGroup.firstChild.childrenCount||this.table.scenegraph.rowHeaderGroup.firstChild&&0!==this.table.scenegraph.rowHeaderGroup.firstChild.childrenCount)?this.dynamicSetY(i,r):(this.updateDeltaY(i),this.updateBody(i-this.deltaY))})}setX(i,r=!1){return __awaiter8(this,void 0,void 0,function*(){var e=this.table.getColsWidth(this.bodyLeftCol,this.bodyLeftCol+(this.colEnd-this.colStart+1))/2,t=this.table.getAllColsWidth()-e;i<e&&this.colStart===this.bodyLeftCol||t<i&&this.colEnd===this.bodyRightCol||this.table.scenegraph.bodyGroup.firstChild&&0===this.table.scenegraph.bodyGroup.firstChild.childrenCount?(this.updateDeltaX(i),this.table.scenegraph.setBodyAndColHeaderX(-i+this.deltaX)):this.dynamicSetX(i,r)})}dynamicSetY(e,t=!1){return __awaiter8(this,void 0,void 0,function*(){dynamicSetY(e,t,this)})}dynamicSetX(e,t=!1){return __awaiter8(this,void 0,void 0,function*(){dynamicSetX(e,t,this)})}updateBody(e){this.table.scenegraph.setBodyAndRowHeaderY(-e)}updateRowCellGroupsAsync(){return __awaiter8(this,void 0,void 0,function*(){this.updateCellGroups(this.taskRowCount)})}updateCellGroups(e){var t=Math.min(this.bodyBottomRow,this.rowUpdatePos+e);\\\"autoHeight\\\"===this.table.heightMode&&computeRowsHeight(this.table,this.rowUpdatePos,t,!1),updateRowContent(this.rowUpdatePos,t,this),\\\"autoHeight\\\"===this.table.heightMode&&(updateAutoRow(this.bodyLeftCol,this.bodyRightCol,this.rowUpdatePos,t,this.table,this.rowUpdateDirection,!0),updateAutoRow(0,this.table.frozenColCount-1,this.rowUpdatePos,t,this.table,this.rowUpdateDirection,!0),updateAutoRow(this.table.colCount-this.table.rightFrozenColCount,this.table.colCount-1,this.rowUpdatePos,t,this.table,this.rowUpdateDirection,!0)),this.rowUpdatePos=t+1}updateBottomFrozenCellGroups(){var e=this.table.rowCount-this.table.bottomFrozenRowCount,t=this.table.rowCount-1;\\\"autoHeight\\\"===this.table.heightMode&&computeRowsHeight(this.table,e,t,!1),updateRowContent(e,t,this),\\\"autoHeight\\\"===this.table.heightMode&&(updateAutoRow(this.bodyLeftCol,this.bodyRightCol,e,t,this.table,this.rowUpdateDirection),updateAutoRow(0,this.table.frozenColCount-1,e,t,this.table,this.rowUpdateDirection),updateAutoRow(this.table.colCount-this.table.rightFrozenColCount,this.table.colCount-1,e,t,this.table,this.rowUpdateDirection))}updateRightFrozenCellGroups(){var e=this.table.colCount-this.table.rightFrozenColCount,t=this.table.colCount-1;\\\"autoWidth\\\"===this.table.widthMode&&computeColsWidth(this.table,e,t,!1),updateColContent(e,t,this),\\\"autoHeight\\\"===this.table.heightMode&&updateAutoColumn(e,t,this.table,this.colUpdateDirection)}updateColCellGroupsAsync(){return __awaiter8(this,void 0,void 0,function*(){this.updateColGroups(this.taskRowCount)})}updateColGroups(e){var t=Math.min(this.bodyRightCol,this.colUpdatePos+e);computeColsWidth(this.table,this.colUpdatePos,t),updateColContent(this.colUpdatePos,t,this),this.colUpdatePos=t+1}updateCellGroupPosition(e,t,i){e.row=t,e.mergeStartCol=void 0,e.mergeStartRow=void 0,e.mergeEndCol=void 0,e.mergeEndRow=void 0,e.setAttribute(\\\"y\\\",i),e.needUpdate=!0,e.needUpdateForAutoRowHeight=!0}updateCellGroupContent(e){var t;return e.needUpdate&&\\\"cell\\\"===e.role&&(t=this.table.scenegraph.updateCellContent(e.col,e.row),e.needUpdate=!1,t)||e}sortCellVertical(){return __awaiter8(this,void 0,void 0,function*(){yield sortVertical(this)})}sortCellHorizontal(){return __awaiter8(this,void 0,void 0,function*(){yield sortHorizontal(this)})}highPerformanceGetCell(t,i,r){if(i>=this.table.columnHeaderLevelCount&&i<this.table.rowCount-this.table.bottomFrozenRowCount&&(i<this.rowStart||i>this.rowEnd))return emptyGroup;if(t>=this.table.frozenColCount&&t<this.table.colCount-this.table.rightFrozenColCount&&(t<this.colStart||t>this.colEnd))return emptyGroup;if(this.cellCache.get(t)){var n=this.cellCache.get(t);if((n._next||n._prev)&&Math.abs(n.row-i)<i){let e=getCellByCache(n,i);return(e=e&&(r||\\\"shadow-cell\\\"!==e.role)?e:this.table.scenegraph.getCell(t,i,r)).row&&this.cellCache.set(t,e),e}n=this.table.scenegraph.getCell(t,i,r);return n.col===t&&n.row&&this.cellCache.set(t,n),n}n=this.table.scenegraph.getCell(t,i,r);return n.col===t&&n.row&&this.cellCache.set(t,n),n}updateDeltaY(t,i,r){if(this.rowStart===this.bodyTopRow){var n=this.table.scenegraph.highPerformanceGetCell(this.colStart,this.rowStart,!0);\\\"cell\\\"===n.role&&(n=n.attribute.y,this.deltaY=-n)}else if(this.rowEnd===this.bodyBottomRow){var n=this.table.scenegraph.highPerformanceGetCell(this.colStart,this.rowEnd,!0);\\\"cell\\\"===n.role&&(n=n.attribute.y+n.attribute.height-(this.table.getAllRowsHeight()-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight()),this.deltaY=-n)}else if(isValid_default(i)&&isValid_default(r)){let e=this.table.scenegraph.highPerformanceGetCell(this.colStart,r,!0);\\\"cell\\\"!==e.role&&(e=this.table.scenegraph.highPerformanceGetCell(0,r,!0));var n=t-this.deltaY,o=i-n,n=e.attribute.y-n+this.table.getFrozenRowsHeight();this.deltaY=o-n}}updateDeltaX(e,t,i){var r,n,o;this.colStart===this.bodyLeftCol?(o=this.table.scenegraph.getColGroup(this.colStart))&&(o=o.attribute.x,this.deltaX=-o):this.colEnd===this.bodyRightCol?(o=this.table.scenegraph.getColGroup(this.colEnd))&&(o=o.attribute.x+o.attribute.width-(this.table.getAllColsWidth()-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth()),this.deltaX=-o):isValid_default(t)&&isValid_default(i)&&(o=this.table.scenegraph.getColGroup(i)||this.table.scenegraph.getColGroup(i,!0),n=t-(r=e-this.deltaX),o=o.attribute.x-r+this.table.getFrozenColsWidth(),this.deltaX=n-o)}release(){this.isRelease=!0}};function getCellByCache(e,t){var i,r;return e?e.row===t?e:(i=e._prev,r=e._next,e.row>t&&i&&i.row===t-1?getCellByCache(i,t):e.row<t&&r&&r.row===t+1?getCellByCache(r,t):null):null}function moveHeaderPosition(e,t,n,o,i,a){var l=a.scenegraph;for(let r=e;r<=t;r++){const c=a.getColWidth(r),g=a.scenegraph.getColGroup(r,!0),p=a.scenegraph.getColGroup(r),f=a.scenegraph.getColGroupInBottom(r),m=a.scenegraph.getColGroupInLeftBottomCorner(r),b=a.scenegraph.getColGroupInRightBottomCorner(r);g&&(g.setAttribute(\\\"width\\\",c),g.forEachChildren(e=>{e.setAttribute(\\\"width\\\",c)})),p&&(p.setAttribute(\\\"width\\\",c),p.forEachChildren(e=>{e.setAttribute(\\\"width\\\",c)})),f&&(f.setAttribute(\\\"width\\\",c),f.forEachChildren(e=>{e.setAttribute(\\\"width\\\",c)})),b&&(b.setAttribute(\\\"width\\\",c),b.forEachChildren(e=>{e.setAttribute(\\\"width\\\",c)})),m&&(m.setAttribute(\\\"width\\\",c),m.forEachChildren(e=>{e.setAttribute(\\\"width\\\",c)}))}if(l.updateContainer(),\\\"column\\\"===i)for(let r=e;r<=t;r++){var s=a.scenegraph.getColGroup(r);null!=s&&s.setAttribute(\\\"chartInstance\\\",void 0);for(let e=0;e<=a.frozenRowCount-1;e++)l.updateCellContent(r,e);for(let t=l.bodyRowStart;t<=l.bodyRowEnd;t++)l.updateCellContent(r,t);for(let i=a.rowCount-a.bottomFrozenRowCount;i<=a.rowCount-1;i++)l.updateCellContent(r,i)}else{for(let t=0;t<=a.frozenColCount-1;t++){var h=a.scenegraph.getColGroup(t);null!=h&&h.setAttribute(\\\"chartInstance\\\",void 0);for(let e=n;e<=o;e++)l.updateCellContent(t,e)}for(let i=l.bodyColStart;i<=l.bodyColEnd;i++){var d=a.scenegraph.getColGroup(i);null!=d&&d.setAttribute(\\\"chartInstance\\\",void 0);for(let e=n;e<=o;e++)l.updateCellContent(i,e)}for(let r=a.colCount-a.rightFrozenColCount;r<=a.colCount-1;r++){var u=a.scenegraph.getColGroup(r);null!=u&&u.setAttribute(\\\"chartInstance\\\",void 0);for(let e=n;e<=o;e++)l.updateCellContent(r,e)}}}function updateAllSelectComponent(i){i.selectingRangeComponents.forEach((e,t)=>{updateComponent(e,t,i)}),i.selectedRangeComponents.forEach((e,t)=>{updateComponent(e,t,i)})}function updateComponent(e,t,i){var[r,n,o,a]=t.split(\\\"-\\\"),l=parseInt(r,10),s=parseInt(n,10),h=parseInt(o,10),d=parseInt(a,10);let u,c=l,g=s,p=h,f=d;switch(e.role){case\\\"rowHeader\\\":(u=i.table.getBodyVisibleRowRange())&&(g=Math.max(s,u.rowStart-1),f=Math.min(d,u.rowEnd+1));break;case\\\"columnHeader\\\":case\\\"bottomFrozen\\\":(u=i.table.getBodyVisibleCellRange())&&(c=Math.max(l,u.colStart-1),p=Math.min(h,u.colEnd+1));break;case\\\"cornerHeader\\\":case\\\"rightTopCorner\\\":case\\\"leftBottomCorner\\\":case\\\"rightBottomCorner\\\":break;case\\\"rightFrozen\\\":(u=i.table.getBodyVisibleCellRange())&&(g=Math.max(s,u.rowStart-1),f=Math.min(d,u.rowEnd+1));break;default:(u=i.table.getBodyVisibleCellRange())&&(g=Math.max(s,u.rowStart-1),f=Math.min(d,u.rowEnd+1),c=Math.max(l,u.colStart-1),p=Math.min(h,u.colEnd+1))}var r=i.table.getColsWidth(c,p),n=i.table.getRowsHeight(g,f),o=i.highPerformanceGetCell(c,g).globalAABBBounds,a=i.highPerformanceGetCell(p,f).globalAABBBounds,o=(e.rect.setAttributes({x:o.x1-i.tableGroup.attribute.x,y:o.y1-i.tableGroup.attribute.y,width:r,height:n,visible:!0}),e.fillhandle&&e.fillhandle.setAttributes({x:a.x2-i.tableGroup.attribute.x-3,y:a.y2-i.tableGroup.attribute.y-3,width:6,height:6,visible:!0}),!!i.table.frozenColCount&&l===i.table.frozenColCount),r=!!i.table.rightFrozenColCount&&0<i.table.rightFrozenColCount&&h===i.table.colCount-i.table.rightFrozenColCount-1,n=!i.table.frozenRowCount||s===i.table.frozenRowCount,a=!!i.table.bottomFrozenRowCount&&d===i.table.rowCount-i.table.bottomFrozenRowCount-1;o&&e.rect.attribute.stroke[3]||r&&e.rect.attribute.stroke[1]||n&&e.rect.attribute.stroke[0]||a&&e.rect.attribute.stroke[2]?(o&&e.rect.attribute.stroke[3]&&i.tableGroup.insertAfter(e.rect,\\\"columnHeader\\\"===e.role?i.cornerHeaderGroup:\\\"bottomFrozen\\\"===e.role?i.leftBottomCornerGroup:i.rowHeaderGroup),a&&e.rect.attribute.stroke[2]&&i.tableGroup.insertAfter(e.rect,\\\"rowHeader\\\"===e.role?i.leftBottomCornerGroup:\\\"rightFrozen\\\"===e.role?i.rightBottomCornerGroup:i.bottomFrozenGroup),n&&e.rect.attribute.stroke[0]&&i.tableGroup.insertAfter(e.rect,\\\"rowHeader\\\"===e.role?i.cornerHeaderGroup:\\\"rightFrozen\\\"===e.role?i.rightTopCornerGroup:i.colHeaderGroup),r&&e.rect.attribute.stroke[1]&&i.tableGroup.insertAfter(e.rect,\\\"columnHeader\\\"===e.role?i.rightTopCornerGroup:\\\"bottomFrozen\\\"===e.role?i.rightBottomCornerGroup:i.rightFrozenGroup),e.rect.attribute.x<i.table.getFrozenColsWidth()&&0<i.table.scrollLeft&&(\\\"body\\\"===e.role||\\\"columnHeader\\\"===e.role||\\\"bottomFrozen\\\"===e.role)&&(o=e.rect.attribute.width-(i.table.getFrozenColsWidth()-e.rect.attribute.x),e.rect.setAttributes({x:e.rect.attribute.x+(i.table.getFrozenColsWidth()-e.rect.attribute.x),width:0<o?o:0})),0<i.table.getRightFrozenColsWidth()&&0<i.rightFrozenGroup.attribute.height&&e.rect.attribute.x+e.rect.attribute.width>i.rightFrozenGroup.attribute.x&&(\\\"body\\\"===e.role||\\\"columnHeader\\\"===e.role||\\\"bottomFrozen\\\"===e.role)&&(a=i.rightFrozenGroup.attribute.x-e.rect.attribute.x,e.rect.setAttributes({x:e.rect.attribute.x,width:0<a?a:0})),e.rect.attribute.y<i.colHeaderGroup.attribute.height&&0<i.table.scrollTop&&(\\\"body\\\"===e.role||\\\"rowHeader\\\"===e.role||\\\"rightFrozen\\\"===e.role)&&(n=e.rect.attribute.height-(i.colHeaderGroup.attribute.height-e.rect.attribute.y),e.rect.setAttributes({y:e.rect.attribute.y+(i.colHeaderGroup.attribute.height-e.rect.attribute.y),height:0<n?n:0})),0<i.bottomFrozenGroup.attribute.width&&0<i.bottomFrozenGroup.attribute.height&&e.rect.attribute.y+e.rect.attribute.height>i.bottomFrozenGroup.attribute.y&&(\\\"body\\\"===e.role||\\\"rowHeader\\\"===e.role||\\\"rightFrozen\\\"===e.role)&&(r=i.bottomFrozenGroup.attribute.y-e.rect.attribute.y,e.rect.setAttributes({y:e.rect.attribute.y,height:0<r?r:0}))):i.tableGroup.insertAfter(e.rect,\\\"body\\\"===e.role?i.bodyGroup:\\\"columnHeader\\\"===e.role?i.colHeaderGroup:\\\"rowHeader\\\"===e.role?i.rowHeaderGroup:\\\"cornerHeader\\\"===e.role?i.cornerHeaderGroup:\\\"rightTopCorner\\\"===e.role?i.rightTopCornerGroup:\\\"rightFrozen\\\"===e.role?i.rightFrozenGroup:\\\"leftBottomCorner\\\"===e.role?i.leftBottomCornerGroup:\\\"bottomFrozen\\\"===e.role?i.bottomFrozenGroup:i.rightBottomCornerGroup);let m=0;\\\"number\\\"==typeof e.rect.attribute.lineWidth&&(m=Math.ceil(e.rect.attribute.lineWidth/2)),h===i.table.colCount-1&&(Array.isArray(e.rect.attribute.lineWidth)&&(m=Math.ceil((null!=(o=e.rect.attribute.lineWidth[1])?o:0)/2)),e.rect.setAttributes({width:e.rect.attribute.width-m})),0===l&&(Array.isArray(e.rect.attribute.lineWidth)&&(m=Math.ceil((null!=(a=e.rect.attribute.lineWidth[3])?a:0)/2)),e.rect.setAttributes({x:e.rect.attribute.x+m,width:e.rect.attribute.width-m})),d===i.table.rowCount-1&&(Array.isArray(e.rect.attribute.lineWidth)&&(m=Math.ceil((null!=(n=e.rect.attribute.lineWidth[2])?n:0)/2)),e.rect.setAttributes({height:e.rect.attribute.height-m})),0===s&&(Array.isArray(e.rect.attribute.lineWidth)&&(m=Math.ceil((null!=(r=e.rect.attribute.lineWidth[0])?r:0)/2)),e.rect.setAttributes({y:e.rect.attribute.y+m,height:e.rect.attribute.height-m}))}function updateCellSelectBorder(l,e,t,i,r,n=!0){let s=Math.max(Math.min(i,e),0),h=Math.max(Math.min(r,t),0),d=Math.min(Math.max(i,e),l.table.colCount-1),u=Math.min(Math.max(r,t),l.table.rowCount-1);const c=()=>{let i=!1;for(let a=s;a<=d;a++){if(a===s)for(let e=h;e<=u;e++){var t=getCellMergeInfo(l.table,a,e);if(t&&t.start.col<s){s=t.start.col,i=!0;break}}if(!i&&a===d)for(let e=h;e<=u;e++){var r=getCellMergeInfo(l.table,a,e);if(r&&Math.min(r.end.col,l.table.colCount-1)>d){d=r.end.col,i=!0;break}}if(i)break}if(!i)for(let t=h;t<=u;t++){if(t===h)for(let e=s;e<=d;e++){var n=getCellMergeInfo(l.table,e,t);if(n&&n.start.row<h){h=n.start.row,i=!0;break}}if(!i&&t===u)for(let e=s;e<=d;e++){var o=getCellMergeInfo(l.table,e,t);if(o&&Math.min(o.end.row,l.table.rowCount-1)>u){u=o.end.row,i=!0;break}}if(i)break}i&&c()};n&&c(),l.selectingRangeComponents.forEach((e,t)=>{var i;e.rect[\\\"delete\\\"](),null!=(i=e.fillhandle)&&i[\\\"delete\\\"]()}),l.selectingRangeComponents=new Map;let o=!1,a=!1,g=!1,p=!1,f=!1,m=!1,b=!1,v=!1,C=!1;var y,_,w,x,S;s<=l.table.frozenColCount-1&&h<=l.table.frozenRowCount-1&&(m=!0),d>=l.table.colCount-l.table.rightFrozenColCount&&h<=l.table.frozenRowCount-1&&(b=!0),s<=l.table.frozenColCount-1&&u>=l.table.rowCount-l.table.bottomFrozenRowCount&&(C=!0),d>=l.table.colCount-l.table.rightFrozenColCount&&u>=l.table.rowCount-l.table.bottomFrozenRowCount&&(v=!0),s<=l.table.frozenColCount-1&&u>=l.table.frozenRowCount&&h<=l.table.rowCount-l.table.bottomFrozenRowCount-1&&(o=!0),d>=l.table.colCount-l.table.rightFrozenColCount&&u>=l.table.frozenRowCount&&h<=l.table.rowCount-l.table.bottomFrozenRowCount-1&&(a=!0),h<=l.table.frozenRowCount-1&&d>=l.table.frozenColCount&&s<=l.table.colCount-l.table.rightFrozenColCount-1&&(g=!0),u>=l.table.rowCount-l.table.bottomFrozenRowCount&&d>=l.table.frozenColCount&&s<=l.table.colCount-l.table.rightFrozenColCount-1&&(p=!0),s<=l.table.colCount-l.table.rightFrozenColCount-1&&d>=l.table.frozenColCount&&h<=l.table.rowCount-l.table.bottomFrozenRowCount-1&&u>=l.table.frozenRowCount&&(f=!0),m&&(w=Math.min(d,l.table.frozenColCount-1),_=Math.min(u,l.table.frozenRowCount-1),y=[!0,!g,!o,!0],l.createCellSelectBorder(s,h,w,_,\\\"cornerHeader\\\",\\\"\\\"+s+h+d+u,y)),b&&(w=Math.max(s,l.table.colCount-l.table.rightFrozenColCount),_=Math.min(u,l.table.frozenRowCount-1),y=[!0,!0,!a,!g],l.createCellSelectBorder(w,h,d,_,\\\"rightTopCorner\\\",\\\"\\\"+s+h+d+u,y)),C&&(w=Math.min(d,l.table.frozenColCount-1),_=Math.max(h,l.table.rowCount-l.table.bottomFrozenRowCount),y=[!o,!p,!0,!0],l.createCellSelectBorder(s,_,w,u,\\\"leftBottomCorner\\\",\\\"\\\"+s+h+d+u,y)),v&&(_=Math.max(s,l.table.colCount-l.table.rightFrozenColCount),w=Math.max(h,l.table.rowCount-l.table.bottomFrozenRowCount),y=[!a,!0,!0,!p],l.createCellSelectBorder(_,w,d,u,\\\"rightBottomCorner\\\",\\\"\\\"+s+h+d+u,y)),g&&(_=Math.max(s,l.table.frozenColCount),w=Math.min(d,l.table.colCount-l.table.rightFrozenColCount-1),y=Math.min(u,l.table.frozenRowCount-1),x=[!0,!b,!f,!m],l.createCellSelectBorder(_,h,w,y,\\\"columnHeader\\\",\\\"\\\"+s+h+d+u,x)),p&&(_=Math.max(s,l.table.frozenColCount),w=Math.min(d,l.table.colCount-l.table.rightFrozenColCount-1),y=Math.max(h,l.table.rowCount-l.table.bottomFrozenRowCount),x=[!f,!v,!0,!C],l.createCellSelectBorder(_,y,w,u,\\\"bottomFrozen\\\",\\\"\\\"+s+h+d+u,x)),o&&(_=Math.max(h,l.table.frozenRowCount),y=Math.min(u,l.table.rowCount-l.table.bottomFrozenRowCount-1),w=Math.min(d,l.table.frozenColCount-1),x=[!m,!f,!C,!0],l.createCellSelectBorder(s,_,w,y,\\\"rowHeader\\\",\\\"\\\"+s+h+d+u,x)),a&&(_=Math.max(h,l.table.frozenRowCount),w=Math.min(u,l.table.rowCount-l.table.bottomFrozenRowCount-1),y=Math.max(s,l.table.colCount-l.table.rightFrozenColCount),x=[!b,!0,!v,!f],l.createCellSelectBorder(y,_,d,w,\\\"rightFrozen\\\",\\\"\\\"+s+h+d+u,x)),f&&(y=Math.max(s,l.table.frozenColCount),_=Math.max(h,l.table.frozenRowCount),w=Math.min(d,l.table.colCount-l.table.rightFrozenColCount-1),x=Math.min(u,l.table.rowCount-l.table.bottomFrozenRowCount-1),S=[!g,!a,!p,!o],l.createCellSelectBorder(y,_,w,x,\\\"body\\\",\\\"\\\"+s+h+d+u,S))}function hideCellSelectBorder(e){e.selectingRangeComponents.forEach((e,t)=>{e.rect.setAttribute(\\\"opacity\\\",0)}),e.selectedRangeComponents.forEach((e,t)=>{e.rect.setAttribute(\\\"opacity\\\",0)})}function restoreCellSelectBorder(e){e.selectingRangeComponents.forEach((e,t)=>{e.rect.setAttribute(\\\"opacity\\\",1)}),e.selectedRangeComponents.forEach((e,t)=>{e.rect.setAttribute(\\\"opacity\\\",1)})}function createCellSelectBorder(e,t,i,r,n,o,a,l){var s,h;let d=!(null==(s=e.table.options.excelOptions)||!s.fillHandle);1<(null==(s=e.table.stateManager.select.ranges)?void 0:s.length)?(d=!1,e.removeFillHandleFromSelectComponents()):1===(null==(s=e.table.stateManager.select.ranges)?void 0:s.length)&&(s=Math.max(e.table.stateManager.select.ranges[0].start.row,e.table.stateManager.select.ranges[0].end.row),h=Math.max(e.table.stateManager.select.ranges[0].start.col,e.table.stateManager.select.ranges[0].end.col),e.table.isHeader(h,s))&&(d=!1),!Array.isArray(l)||!1!==l[1]&&!1!==l[2]||(d=!1);const u=Math.min(t,r),c=Math.min(i,n),g=Math.max(t,r),p=Math.max(i,n),f=e.highPerformanceGetCell(u,c).globalAABBBounds,m=e.highPerformanceGetCell(g,p).globalAABBBounds,b=e.table.theme,v=null==(h=b.selectionStyle)?void 0:h.cellBorderColor,C=null==(s=b.selectionStyle)?void 0:s.cellBorderLineWidth,y=createRect({pickable:!1,fill:null!=(s=null==(h=b.selectionStyle)?void 0:h.cellBgColor)?s:\\\"rgba(0, 0, 255,0.1)\\\",lineWidth:C,stroke:l.map(e=>!!e&&v),x:f.x1-e.tableGroup.attribute.x,y:f.y1-e.tableGroup.attribute.y,width:0,height:0,visible:!0});let _;d&&(_=createRect({pickable:!1,fill:v,stroke:v,x:m.x2-3,y:m.y2-3,width:6,height:6,visible:!0})),e.lastSelectId=a,e.selectingRangeComponents.set(u+`-${c}-${g}-${p}-`+a,{rect:y,fillhandle:_,role:o}),e.tableGroup.insertAfter(y,\\\"body\\\"===o?e.bodyGroup:\\\"columnHeader\\\"===o?e.colHeaderGroup:\\\"rowHeader\\\"===o?e.rowHeaderGroup:\\\"cornerHeader\\\"===o?e.cornerHeaderGroup:\\\"rightTopCorner\\\"===o?e.rightTopCornerGroup:\\\"rightFrozen\\\"===o?e.rightFrozenGroup:\\\"leftBottomCorner\\\"===o?e.leftBottomCornerGroup:\\\"bottomFrozen\\\"===o?e.bottomFrozenGroup:e.rightBottomCornerGroup),d&&e.tableGroup.insertAfter(_,\\\"body\\\"===o?e.bodyGroup:\\\"columnHeader\\\"===o?e.colHeaderGroup:\\\"rowHeader\\\"===o?e.rowHeaderGroup:\\\"cornerHeader\\\"===o?e.cornerHeaderGroup:\\\"rightTopCorner\\\"===o?e.rightTopCornerGroup:\\\"rightFrozen\\\"===o?e.rightFrozenGroup:\\\"leftBottomCorner\\\"===o?e.leftBottomCornerGroup:\\\"bottomFrozen\\\"===o?e.bottomFrozenGroup:e.rightBottomCornerGroup)}function moveSelectingRangeComponentsToSelectedRangeComponents(r){r.selectingRangeComponents.forEach((e,t)=>{var i;r.selectedRangeComponents.get(t)&&(r.selectingRangeComponents.get(t).rect[\\\"delete\\\"](),null!=(i=r.selectingRangeComponents.get(t).fillhandle))&&i[\\\"delete\\\"](),r.selectedRangeComponents.set(t,e)}),r.selectingRangeComponents=new Map,r.updateNextFrame()}function deleteLastSelectedRangeComponents(r){r.selectedRangeComponents.forEach((e,t)=>{var i;t.split(\\\"-\\\")[4]===r.lastSelectId&&(e.rect[\\\"delete\\\"](),null!=(i=e.fillhandle)&&i[\\\"delete\\\"](),r.selectedRangeComponents[\\\"delete\\\"](t))})}function deleteAllSelectBorder(e){e.selectedRangeComponents.forEach((e,t)=>{var i;e.rect[\\\"delete\\\"](),null!=(i=e.fillhandle)&&i[\\\"delete\\\"]()}),e.selectedRangeComponents=new Map}function removeFillHandleFromSelectComponents(e){e.selectedRangeComponents.forEach((e,t)=>{var i;null!=(i=e.fillhandle)&&i[\\\"delete\\\"](),e.fillhandle=void 0})}function updateRow(e,t,i,r){const n=r.scenegraph,o=deduplication(e.map(e=>e.row)).sort((e,t)=>t-e),a=deduplication(t.map(e=>e.row)).sort((e,t)=>e-t),l=deduplication(i.map(e=>e.row)).sort((e,t)=>e-t);let s;l.length&&(s=_getUpdateRowIndexUseCellNode(l[0]-1,l[l.length-1]+1,n)),a.length&&(c=_getUpdateRowIndexUseCellNode(a[0]-1,a[a.length-1]+1,n),s=isValid_default(s)?isValid_default(c)?Math.min(s,c):s:c),o.length&&(c=_getUpdateRowIndexUseCellNode(o[0]-1,o[o.length-1]+1,n),s=isValid_default(s)?isValid_default(c)?Math.min(s,c):s:c),o.forEach(e=>{removeRow(e,n)});const h=r.rowHeightsMap;o.forEach(e=>{h[\\\"delete\\\"](e)}),o.length&&(resetRowNumber(n),c=_getUpdateRowIndex(o[o.length-1]-1,o[0]-o.length+1,n),s=isValid_default(s)?isValid_default(c)?Math.min(s,c):s:c);let d;n.table._clearRowRangeHeightsMap(),a.forEach(e=>{var t=addRow(e,n);d=null!=d?d:t,h.insert(e)}),resetRowNumberAndY(n),a.length&&(c=_getUpdateRowIndex(a[0]-1,a[a.length-1]+1,n),s=isValid_default(s)?isValid_default(c)?Math.min(s,c):s:c);for(let p=0;p<r.colCount;p++)l.forEach(e=>{var i=getCellMergeInfo(n.table,p,e);if(i)for(let t=i.start.col;t<=i.end.col;t++)for(let e=i.start.row;e<=i.end.row;e++)updateCell(t,e,n.table,!1);else updateCell(p,e,n.table,!1)});if(l.length&&(c=_getUpdateRowIndex(l[0]-1,l[l.length-1]+1,n),s=isValid_default(s)?isValid_default(c)?Math.min(s,c):s:c),isNumber_default(d)){for(let t=0;t<r.colCount;t++)for(let e=d;e<r.rowCount;e++){var u=n.highPerformanceGetCell(t,e,!0);u&&(u.needUpdate=!0)}s=isValid_default(s)?isValid_default(d)?Math.min(s,d):s:d}isNumber_default(s)&&(n.proxy.rowUpdatePos=Math.min(n.proxy.rowUpdatePos,s)),a.length?(isNumber_default(d)||(c=Math.min(...a),n.proxy.rowUpdatePos=Math.min(c,n.proxy.rowUpdatePos)),n.proxy.rowUpdateDirection=\\\"up\\\",n.proxy.updateCellGroups(2*n.proxy.screenRowCount),g()):o.length&&(setRowSeriesNumberCellNeedUpdate(o[o.length-1],n),n.proxy.updateCellGroups(2*n.proxy.screenRowCount),g(),n.proxy.progress()),n.proxy.progress();var c=r.getRowsHeight(r.frozenRowCount,r.rowCount-1-r.bottomFrozenRowCount);function g(){if((null==a?void 0:a[(null==a?void 0:a.length)-1])>=r.rowCount-r.bottomFrozenRowCount||(null==l?void 0:l[(null==l?void 0:l.length)-1])>=r.rowCount-r.bottomFrozenRowCount||(null==o?void 0:o[0])>=r.rowCount-r.bottomFrozenRowCount){for(let t=0;t<r.colCount;t++)for(let e=r.rowCount-r.bottomFrozenRowCount;e<r.rowCount;e++){var i=n.highPerformanceGetCell(t,e,!0);i&&(i.needUpdate=!0)}n.proxy.updateBottomFrozenCellGroups()}}n.updateContainerHeight(n.table.frozenRowCount,c-n.bodyGroup.attribute.height)}function removeRow(e,t){var i=t.proxy,r=(e>=i.rowStart&&e<=i.rowEnd&&(removeCellGroup(e,t),i.rowEnd--,i.currentRow--),i.bodyBottomRow--,Math.min(i.rowLimit,i.bodyBottomRow-i.bodyTopRow+1));i.totalActualBodyRowCount=r,i.totalRow=i.rowStart+r-1}function addRow(e,t){var i=t.proxy,r=(i.bodyBottomRow++,Math.min(i.rowLimit,i.bodyBottomRow-i.bodyTopRow+1));if(i.totalActualBodyRowCount=r,i.totalRow=i.rowStart+r-1,!(e<i.rowStart))return e>i.rowEnd?i.rowEnd-i.rowStart+1<i.rowLimit?(i.rowEnd++,i.currentRow++,addRowCellGroup(e,t),e):void 0:(i.rowEnd-i.rowStart+1<i.rowLimit&&(i.rowEnd++,i.currentRow++,addRowCellGroup(e,t)),e)}function resetRowNumber(r){function i(e,t){e.row=t;var i=getCellMergeInfo(r.table,e.col,e.row);i?(e.mergeStartCol=i.start.col,e.mergeEndCol=i.end.col,e.mergeStartRow=i.start.row,e.mergeEndRow=i.end.row):(e.mergeStartCol=void 0,e.mergeEndCol=void 0,e.mergeStartRow=void 0,e.mergeEndRow=void 0)}r.bodyGroup.forEachChildren(e=>{let t=r.bodyRowStart;null!=e&&e.forEachChildren(e=>{i(e,t),t++})}),r.rowHeaderGroup.forEachChildren(e=>{let t=r.bodyRowStart;null!=e&&e.forEachChildren(e=>{i(e,t),t++})}),r.rightFrozenGroup.forEachChildren(e=>{let t=r.bodyRowStart;null!=e&&e.forEachChildren(e=>{i(e,t),t++})}),r.bottomFrozenGroup.forEachChildren(e=>{let t=r.table.rowCount-r.table.bottomFrozenRowCount;null!=e&&e.forEachChildren(e=>{i(e,t),t++})}),r.leftBottomCornerGroup.forEachChildren(e=>{let t=r.table.rowCount-r.table.bottomFrozenRowCount;null!=e&&e.forEachChildren(e=>{i(e,t),t++})}),r.rightBottomCornerGroup.forEachChildren(e=>{let t=r.table.rowCount-r.table.bottomFrozenRowCount;null!=e&&e.forEachChildren(e=>{i(e,t),t++})})}function resetRowNumberAndY(n){function r(e,t,i){e.row=t,e.setAttribute(\\\"y\\\",i);var r=getCellMergeInfo(n.table,e.col,e.row);r?(e.mergeStartCol=r.start.col,e.mergeEndCol=r.end.col,e.mergeStartRow=r.start.row,e.mergeEndRow=r.end.row):(e.mergeStartCol=void 0,e.mergeEndCol=void 0,e.mergeStartRow=void 0,e.mergeEndRow=void 0)}n.bodyGroup.forEachChildren(e=>{let t=n.bodyRowStart,i=n.getCellGroupY(t);null!=e&&e.forEachChildren(e=>{r(e,t,i),t++,i+=e.attribute.height})}),n.rowHeaderGroup.forEachChildren(e=>{let t=n.bodyRowStart,i=n.getCellGroupY(t);null!=e&&e.forEachChildren(e=>{r(e,t,i),t++,i+=e.attribute.height})}),n.rightFrozenGroup.forEachChildren(e=>{let t=n.bodyRowStart,i=n.getCellGroupY(t);null!=e&&e.forEachChildren(e=>{r(e,t,i),t++,i+=e.attribute.height})}),n.bottomFrozenGroup.forEachChildren(e=>{let t=n.table.rowCount-n.table.bottomFrozenRowCount,i=0;null!=e&&e.forEachChildren(e=>{r(e,t,i),t++,i+=e.attribute.height})}),n.leftBottomCornerGroup.forEachChildren(e=>{let t=n.table.rowCount-n.table.bottomFrozenRowCount,i=0;null!=e&&e.forEachChildren(e=>{r(e,t,i),t++,i+=e.attribute.height})}),n.rightBottomCornerGroup.forEachChildren(e=>{let t=n.table.rowCount-n.table.bottomFrozenRowCount,i=0;null!=e&&e.forEachChildren(e=>{r(e,t,i),t++,i+=e.attribute.height})})}function addRowCellGroup(e,t){for(let o=0;o<t.table.colCount;o++){var i,r,n=new Group2({x:0,y:0,width:t.table.getColWidth(o),height:t.table.getRowHeight(e)});n.role=\\\"cell\\\",n.col=o,n.row=e,n.needUpdate=!0,n&&((i=t.getColGroup(o))&&(i.firstChild&&e<i.firstChild.row?(i.insertBefore(n,i.firstChild),i.firstChild.row=i.firstChild.row+1):i.lastChild&&e>i.lastChild.row?i.appendChild(n):(r=t.highPerformanceGetCell(o,e,!0))!==n&&(i.insertBefore(n,r),r&&(r.row=r.row+1),r!==i.lastChild)&&i.lastChild&&(i.lastChild.row=i.lastChild.row+1)))}}function removeCellGroup(i,e){for(let t=0;t<e.table.colCount;t++){var r=e.getColGroup(t,!1);if(r){let t;r.forEachChildren(e=>e.row===i&&(t=e,!0)),t&&(r.updateColumnHeight(-t.attribute.height),r.removeChild(t))}}}function _getUpdateRowIndex(t,i,r){let n;for(let a=0;a<r.table.colCount;a++){var o=r.table.getCellRange(a,t);let e;o.start.row<=t+1&&o.end.row>=t+1&&(addNeedUpdateTag(o,r),e=o.start.row);o=r.table.getCellRange(a,i);o.start.row<=i+1&&o.end.row>=i+1&&(addNeedUpdateTag(o,r),e=o.start.row),isValid_default(e)&&(n=isValid_default(n)?Math.min(n,e):e)}return n}function _getUpdateRowIndexUseCellNode(t,i,r){let n;for(let a=0;a<r.table.colCount;a++){let e;var o=r.highPerformanceGetCell(a,t),o=(o.mergeStartRow&&o.mergeEndRow&&o.mergeEndRow>t&&(addNeedUpdateTag({start:{row:o.mergeStartRow,col:\\\"autoHeight\\\"===r.table.heightMode?0:o.mergeStartCol},end:{row:o.mergeEndRow,col:\\\"autoHeight\\\"===r.table.heightMode?r.table.colCount-1:o.mergeEndCol}},r),e=o.mergeStartRow),r.highPerformanceGetCell(a,i));o.mergeStartRow&&o.mergeEndRow&&o.mergeStartRow<i&&(addNeedUpdateTag({start:{row:o.mergeStartRow,col:\\\"autoHeight\\\"===r.table.heightMode?0:o.mergeStartCol},end:{row:o.mergeEndRow,col:\\\"autoHeight\\\"===r.table.heightMode?r.table.colCount-1:o.mergeEndCol}},r),e=o.mergeStartRow),isValid_default(e)&&(n=isValid_default(n)?Math.min(n,e):e)}return n}function addNeedUpdateTag(e,t){var{start:i,end:r}=e;for(let o=i.col;o<=r.col;o++)for(let e=i.row;e<=r.row;e++){var n=t.highPerformanceGetCell(o,e,!0);n&&(n.needUpdate=!0)}}function setRowSeriesNumberCellNeedUpdate(t,i){if(i.table.isHasSeriesNumber())for(let e=t;e<=i.table.rowCount-1;e++)updateCell(0,e,i.table,!1)}function dealFrozen(t){var e;if(t.table.frozenColCount>t.table.rowHeaderLevelCount){t.rowHeaderGroup.setAttribute(\\\"height\\\",t.bodyGroup.attribute.height),t.rowHeaderGroup.setAttribute(\\\"y\\\",t.bodyGroup.attribute.y),t.cornerHeaderGroup.setAttribute(\\\"height\\\",t.colHeaderGroup.attribute.height);for(let e=0;e<t.table.frozenColCount-t.table.rowHeaderLevelCount;e++)moveColumnFromBodyToRowHeader(t),moveColumnFromColHeaderToCornerHeader(t),moveColumnFromBottomToLeftBottomCorner(t)}else if(t.table.frozenColCount<t.table.rowHeaderLevelCount)for(let e=0;e<t.table.rowHeaderLevelCount-t.table.frozenColCount;e++)moveColumnFromRowHeaderToBody(t),moveColumnFromCornerHeaderToColHeader(t),moveColumnFromLeftBottomCornerToBottom(t);t.bodyGroup.setAttribute(\\\"x\\\",t.rowHeaderGroup.attribute.width),t.colHeaderGroup.setAttribute(\\\"x\\\",t.cornerHeaderGroup.attribute.width),t.updateContainer(),t.updateBorderSizeAndPosition(),t.isPivot||t.table.transpose?t.table.options.frozenColCount?t.component.setFrozenColumnShadow(t.table.frozenColCount-1):t.table.options.frozenColCount&&t.component.setRightFrozenColumnShadow(t.table.colCount-t.table.rightFrozenColCount):(t.component.setFrozenColumnShadow(t.table.frozenColCount-1),t.component.setRightFrozenColumnShadow(t.table.colCount-t.table.rightFrozenColCount)),t.hasFrozen=!0,t.frozenColCount=t.table.frozenColCount,t.frozenRowCount=null!=(e=null==(e=t.colHeaderGroup.firstChild)?void 0:e.childrenCount)?e:0}function resetFrozen(t){var e;if(t.frozenColCount>t.table.frozenColCount)for(let e=0;e<t.frozenColCount-t.table.frozenColCount;e++)moveColumnFromRowHeaderToBody(t),moveColumnFromCornerHeaderToColHeader(t),moveColumnFromLeftBottomCornerToBottom(t);else if(t.frozenColCount<t.table.frozenColCount){t.rowHeaderGroup.setAttribute(\\\"height\\\",t.bodyGroup.attribute.height),t.rowHeaderGroup.setAttribute(\\\"y\\\",t.bodyGroup.attribute.y),t.cornerHeaderGroup.setAttribute(\\\"height\\\",t.colHeaderGroup.attribute.height);for(let e=0;e<t.table.frozenColCount-t.frozenColCount;e++)moveColumnFromBodyToRowHeader(t),moveColumnFromColHeaderToCornerHeader(t),moveColumnFromBottomToLeftBottomCorner(t)}t.deleteAllSelectBorder(),t.table.stateManager.select.ranges.forEach(e=>{t.updateCellSelectBorder(e.start.col,e.start.row,e.end.col,e.end.row)}),t.frozenColCount=t.table.frozenColCount,t.frozenRowCount=null!=(e=null==(e=t.colHeaderGroup.firstChild)?void 0:e.childrenCount)?e:0,t.proxy.colStart=t.table.frozenColCount,t.bodyGroup.setAttribute(\\\"x\\\",t.rowHeaderGroup.attribute.width),t.colHeaderGroup.setAttribute(\\\"x\\\",t.cornerHeaderGroup.attribute.width),t.updateContainer(),t.updateBorderSizeAndPosition(),t.isPivot||t.table.transpose?t.table.options.frozenColCount?t.component.setFrozenColumnShadow(t.table.frozenColCount-1):t.table.options.rightFrozenColCount&&t.component.setRightFrozenColumnShadow(t.table.colCount-t.table.rightFrozenColCount):(t.component.setFrozenColumnShadow(t.table.frozenColCount-1),t.component.setRightFrozenColumnShadow(t.table.colCount-t.table.rightFrozenColCount)),t.hasFrozen=!0}function moveColumnFromBodyToRowHeader(e){var t=e.bodyGroup.firstChild instanceof Group2?e.bodyGroup.firstChild:null;t&&(e.rowHeaderGroup.appendChild(t),e.rowHeaderGroup.setAttribute(\\\"width\\\",e.rowHeaderGroup.attribute.width+t.attribute.width),e.bodyGroup.setAttribute(\\\"width\\\",e.bodyGroup.attribute.width-t.attribute.width))}function moveColumnFromColHeaderToCornerHeader(e){var t=e.colHeaderGroup.firstChild instanceof Group2?e.colHeaderGroup.firstChild:null;t&&(e.cornerHeaderGroup.appendChild(t),e.cornerHeaderGroup.setAttribute(\\\"width\\\",e.cornerHeaderGroup.attribute.width+t.attribute.width),e.colHeaderGroup.setAttribute(\\\"width\\\",e.colHeaderGroup.attribute.width-t.attribute.width))}function moveColumnFromRowHeaderToBody(e){var t=e.rowHeaderGroup.lastChild instanceof Group2?e.rowHeaderGroup.lastChild:null==(t=e.rowHeaderGroup.lastChild)?void 0:t._prev;t&&(insertBefore(e.bodyGroup,t,e.bodyGroup.firstChild),e.bodyGroup.setAttribute(\\\"width\\\",e.bodyGroup.attribute.width+t.attribute.width),e.rowHeaderGroup.setAttribute(\\\"width\\\",e.rowHeaderGroup.attribute.width-t.attribute.width))}function moveColumnFromCornerHeaderToColHeader(e){var t=e.cornerHeaderGroup.lastChild instanceof Group2?e.cornerHeaderGroup.lastChild:null==(t=e.cornerHeaderGroup.lastChild)?void 0:t._prev;t&&(insertBefore(e.colHeaderGroup,t,e.colHeaderGroup.firstChild),e.colHeaderGroup.setAttribute(\\\"width\\\",e.colHeaderGroup.attribute.width+t.attribute.width),e.cornerHeaderGroup.setAttribute(\\\"width\\\",e.cornerHeaderGroup.attribute.width-t.attribute.width))}function moveColumnFromBottomToLeftBottomCorner(e){var t=e.bottomFrozenGroup.firstChild instanceof Group2?e.bottomFrozenGroup.firstChild:null;t&&(e.leftBottomCornerGroup.appendChild(t),e.leftBottomCornerGroup.setAttribute(\\\"width\\\",e.leftBottomCornerGroup.attribute.width+t.attribute.width),e.bottomFrozenGroup.setAttribute(\\\"width\\\",e.bottomFrozenGroup.attribute.width-t.attribute.width),e.table.isPivotChart())&&t.forEachChildren(e=>{e.setAttributes({stroke:!1,fill:!1})})}function moveColumnFromLeftBottomCornerToBottom(r){var e=r.leftBottomCornerGroup.lastChild instanceof Group2?r.leftBottomCornerGroup.lastChild:null==(e=r.leftBottomCornerGroup.lastChild)?void 0:e._prev;e&&(insertBefore(r.bottomFrozenGroup,e,r.bottomFrozenGroup.firstChild),r.bottomFrozenGroup.setAttribute(\\\"width\\\",r.bottomFrozenGroup.attribute.width+e.attribute.width),r.leftBottomCornerGroup.setAttribute(\\\"width\\\",r.leftBottomCornerGroup.attribute.width-e.attribute.width),r.table.isPivotChart())&&e.forEachChildren(e=>{var t=r.table._getCellStyle(e.col,e.row),i=r.table.getCellRange(e.col,e.row),t=getStyleTheme(t,r.table,(i?i.start:e).col,(i?i.start:e).row,getProp2).theme;e.setAttributes({fill:null!=(i=null==(i=null==t?void 0:t.group)?void 0:i.fill)?i:void 0,stroke:null!=(t=null==(i=null==t?void 0:t.group)?void 0:i.stroke)?t:void 0})})}function dealRightFrozen(i,r){var{table:n,rightTopCornerGroup:o,rightFrozenGroup:a,rightBottomCornerGroup:l,bottomFrozenGroup:s,bodyGroup:h,colHeaderGroup:d}=r,u=r.table.rightFrozenColCount;if(u<i){for(let e=n.colCount-u-1;e>=n.colCount-i;e--)insertBefore(a,r.getColGroup(e),a.firstChild),insertBefore(o,r.getColGroup(e,!0),o.firstChild),insertBefore(l,r.getColGroupInBottom(e),l.firstChild);let t=0;a.forEachChildren(e=>{e.setAttribute(\\\"x\\\",t),t+=e.attribute.width}),t=0,o.forEachChildren(e=>{e.setAttribute(\\\"x\\\",t),t+=e.attribute.width}),t=0,l.forEachChildren(e=>{e.setAttribute(\\\"x\\\",t),t+=e.attribute.width})}else if(i<u){for(let e=n.colCount-u;e<n.colCount-i;e++){var c=r.getColGroup(e),c=(c.setAttribute(\\\"x\\\",h.lastChild.attribute.x+n.getColWidth(h.lastChild.col)),h.appendChild(c),r.getColGroupInRightTopCorner(e)),c=(c.setAttribute(\\\"x\\\",d.lastChild.attribute.x+n.getColWidth(d.lastChild.col)),d.appendChild(c),r.getColGroupInRightBottomCorner(e));c.setAttribute(\\\"x\\\",s.lastChild.attribute.x+n.getColWidth(s.lastChild.col)),s.appendChild(c)}let t=0;a.forEachChildren(e=>{e.setAttribute(\\\"x\\\",t),t+=e.attribute.width}),t=0,o.forEachChildren(e=>{e.setAttribute(\\\"x\\\",t),t+=e.attribute.width}),t=0,l.forEachChildren(e=>{e.setAttribute(\\\"x\\\",t),t+=e.attribute.width})}a.setAttribute(\\\"width\\\",n.getColsWidth(n.colCount-i,n.colCount-1)),o.setAttribute(\\\"width\\\",n.getColsWidth(n.colCount-i,n.colCount-1)),l.setAttribute(\\\"width\\\",n.getColsWidth(n.colCount-i,n.colCount-1)),n.internalProps.rightFrozenColCount=i,r.updateContainer(),r.component.updateScrollBar(),r.updateNextFrame()}function dealBottomFrozen(n,o){const{table:a,proxy:e,bottomFrozenGroup:t,leftBottomCornerGroup:i,rightBottomCornerGroup:r}=o;t.childrenCount||(e.table.isPivotChart()||(createColGroup(i,0,0,0,a.frozenColCount-1,0,-1,\\\"rowHeader\\\",a),createColGroup(r,0,0,a.colCount-a.rightFrozenColCount,a.colCount-1,0,-1,\\\"body\\\",a)),createColGroup(t,0,0,e.colStart,e.colEnd,0,-1,\\\"body\\\",a));var l=o.table.bottomFrozenRowCount;if(l<n){for(let i=0;i<a.frozenColCount;i++){var s=o.getColGroupInLeftBottomCorner(i);for(let e=a.rowCount-l-1;e>=a.rowCount-n;e--)insertBefore(s,o.getCell(i,e,!0),s.firstChild);let t=0;s.forEachChildren(e=>{e.setAttribute(\\\"y\\\",t),t+=a.getRowHeight(e.row)})}for(let r=e.colStart;r<=e.colEnd;r++){var h=o.getColGroupInBottom(r);for(let e=a.rowCount-l-1;e>=a.rowCount-n;e--)insertBefore(h,o.getCell(r,e,!0),h.firstChild);let t=0;h.forEachChildren(e=>{e.setAttribute(\\\"y\\\",t),t+=a.getRowHeight(e.row)})}if(0<a.rightFrozenColCount)for(let i=a.colCount-a.rightFrozenColCount;i<a.colCount;i++){var d=o.getColGroupInRightBottomCorner(i);for(let e=a.rowCount-l-1;e>=a.rowCount-n;e--)insertBefore(d,o.getCell(i,e,!0),d.firstChild);let t=0;d.forEachChildren(e=>{e.setAttribute(\\\"y\\\",t),t+=a.getRowHeight(e.row)})}}else if(n<l){for(let i=0;i<a.rowHeaderLevelCount;i++){var u=o.getColGroup(i);for(let e=a.rowCount-l;e<a.rowCount-n;e++){var c=o.getCell(i,e,!0);c.setAttribute(\\\"y\\\",u.lastChild.attribute.y+a.getRowHeight(u.lastChild.row)),u.appendChild(c)}var g=o.getColGroupInLeftBottomCorner(i);let t=0;g.forEachChildren(e=>{e.setAttribute(\\\"y\\\",t),t+=a.getRowHeight(e.row)})}for(let r=e.colStart;r<=e.colEnd;r++){var p=o.getColGroup(r);for(let e=a.rowCount-l;e<a.rowCount-n;e++){var f=o.getCell(r,e,!0);f.setAttribute(\\\"y\\\",p.lastChild.attribute.y+a.getRowHeight(p.lastChild.row)),p.appendChild(f)}var m=o.getColGroupInBottom(r);let t=0;m.forEachChildren(e=>{e.setAttribute(\\\"y\\\",t),t+=a.getRowHeight(e.row)})}if(0<a.rightFrozenColCount)for(let i=a.colCount-a.rightFrozenColCount;i<a.colCount;i++){var b=o.getColGroup(i);for(let e=a.rowCount-l;e<a.rowCount-n;e++){var v=o.getCell(i,e,!0);v.setAttribute(\\\"y\\\",b.lastChild.attribute.y+a.getRowHeight(b.lastChild.row)),b.appendChild(v)}var C=o.getColGroupInRightBottomCorner(i);let t=0;C.forEachChildren(e=>{e.setAttribute(\\\"y\\\",t),t+=a.getRowHeight(e.row)})}}t.setAttribute(\\\"height\\\",a.getRowsHeight(a.rowCount-n,a.rowCount-1)),i.setAttribute(\\\"height\\\",a.getRowsHeight(a.rowCount-n,a.rowCount-1)),r.setAttribute(\\\"height\\\",a.getRowsHeight(a.rowCount-n,a.rowCount-1)),a.internalProps.bottomFrozenRowCount=n,o.updateContainer(),o.component.updateScrollBar(),o.updateNextFrame()}function insertBefore(e,t,i){t&&e&&(i?e.insertBefore(t,i):e.appendChild(t))}function updateChartSize(r,e){for(let n=e;n<=r.proxy.colEnd;n++){var t=r.getColGroup(n);null!=(t=null==t?void 0:t.getChildren())&&t.forEach(e=>{const t=r.table.getColWidth(e.col),i=r.table.getRowHeight(e.row);e.children.forEach(e=>{\\\"chart\\\"===e.type&&(e.cacheCanvas=null,e.setAttribute(\\\"width\\\",Math.ceil(t-e.attribute.cellPadding[3]-e.attribute.cellPadding[1])),e.setAttribute(\\\"height\\\",Math.ceil(i-e.attribute.cellPadding[0]-e.attribute.cellPadding[2])))})})}if(!r.table.isPivotChart()&&1<=r.table.rightFrozenColCount)for(let e=r.table.colCount-r.table.rightFrozenColCount;e<=r.table.colCount-1;e++){var i=r.getColGroup(e);null!=(i=null==i?void 0:i.getChildren())&&i.forEach(e=>{const t=r.table.getColWidth(e.col),i=r.table.getRowHeight(e.row);e.children.forEach(e=>{\\\"chart\\\"===e.type&&(e.cacheCanvas=null,e.setAttribute(\\\"width\\\",Math.ceil(t-e.attribute.cellPadding[3]-e.attribute.cellPadding[1])),e.setAttribute(\\\"height\\\",Math.ceil(i-e.attribute.cellPadding[0]-e.attribute.cellPadding[2])))})})}}function clearChartCacheImage(e){for(let i=e.proxy.colStart;i<=e.proxy.colEnd;i++){var t=e.getColGroup(i);null!=(t=null==t?void 0:t.getChildren())&&t.forEach(e=>{e.children.forEach(e=>{\\\"chart\\\"===e.type&&(e.cacheCanvas=null,e.addUpdateBoundTag())})})}}function updateChartState(e,t){var i=e.table;if(i.isPivotChart()){var r=i._selectedDataItemsInChart.length;if(null!==t&&0!==(null==t?void 0:t.length)&&0!==Object.keys(t).length||0!==r){const o=[];if(Array.isArray(t))t.forEach(e=>{if(e&&0!==e.key&&0<Object.keys(e).length){var t={};for(const i in e)i.startsWith(\\\"VGRAMMAR_\\\")||i.startsWith(\\\"__VCHART\\\")||(t[i]=e[i]);o.push(t)}});else if(t&&0!==t.key&&0<Object.keys(t).length){var n={};for(const a in t)a.startsWith(\\\"VGRAMMAR_\\\")||a.startsWith(\\\"__VCHART\\\")||(n[a]=t[a]);o.push(n)}isEqual(i._selectedDataItemsInChart,o)||(i._selectedDataItemsInChart=o,i.internalProps.layoutMap.updateDataStateToChartInstance(),clearChartCacheImage(e),i.scenegraph.updateNextFrame())}}}function initSceneGraph(e){var t=e.table.tableNoFrameWidth,i=e.table.tableNoFrameHeight,i=(e.tableGroup=new Group2({x:0,y:0,width:t,height:i,clip:!0,pickable:!1}),e.tableGroup.role=\\\"table\\\",createContainerGroup(0,0,!0)),r=(i.role=\\\"col-header\\\",e.colHeaderGroup=i,createContainerGroup(0,0,!0)),n=(r.role=\\\"corner-header\\\",e.cornerHeaderGroup=r,createContainerGroup(0,0,!0)),t=(n.role=\\\"row-header\\\",e.rowHeaderGroup=n,createContainerGroup(t,0,!0)),o=(t.role=\\\"body\\\",e.bodyGroup=t,createContainerGroup(0,0,!0)),a=(o.role=\\\"right-frozen\\\",e.rightFrozenGroup=o,createContainerGroup(0,0,!0)),l=(a.role=\\\"bottom-frozen\\\",e.bottomFrozenGroup=a,createContainerGroup(0,0)),s=(l.role=\\\"component\\\",e.componentGroup=l,createContainerGroup(0,0,!0)),h=(s.role=\\\"corner-right-top-header\\\",e.rightTopCornerGroup=s,createContainerGroup(0,0,!0)),d=(h.role=\\\"corner-right-bottom-header\\\",e.rightBottomCornerGroup=h,createContainerGroup(0,0,!0));d.role=\\\"corner-left-bottom-header\\\",e.leftBottomCornerGroup=d,e.tableGroup.addChild(t),e.tableGroup.addChild(n),e.tableGroup.addChild(a),e.tableGroup.addChild(i),e.tableGroup.addChild(o),e.tableGroup.addChild(h),e.tableGroup.addChild(s),e.tableGroup.addChild(d),e.tableGroup.addChild(r),e.tableGroup.addChild(l)}function createContainerGroup(e,t,i){return new Group2({x:0,y:0,width:e,height:t,clip:null!=i&&i,pickable:!1})}function updateContainerChildrenX(e,i){return e.forEachChildrenSkipChild((e,t)=>{e.setAttribute(\\\"x\\\",i),i+=e.attribute.width}),i}function hideHoverIcon(e,t,i){-1!==e&&-1!==t&&(updateCellRangeIcon(e,t,e=>\\\"mouseenter_cell\\\"===e.attribute.visibleTime,e=>{e.setAttribute(\\\"opacity\\\",0);var t=e.parent.getChildByName(\\\"icon-back\\\");t&&t.setAttribute(\\\"visible\\\",!1)},i),i.updateNextFrame())}function showHoverIcon(e,t,i){-1!==e&&-1!==t&&(updateCellRangeIcon(e,t,e=>\\\"mouseenter_cell\\\"===e.attribute.visibleTime,e=>{e.setAttribute(\\\"opacity\\\",1)},i),i.updateNextFrame())}function hideClickIcon(e,t,i){-1!==e&&-1!==t&&(updateCellRangeIcon(e,t,e=>\\\"click_cell\\\"===e.attribute.visibleTime,e=>{e.setAttribute(\\\"opacity\\\",0)},i),i.updateNextFrame())}function showClickIcon(e,t,i){-1!==e&&-1!==t&&(updateCellRangeIcon(e,t,e=>\\\"click_cell\\\"===e.attribute.visibleTime,e=>{e.setAttribute(\\\"opacity\\\",1)},i),i.updateNextFrame())}function getIconByXY(e,t,i,r,n){let o;return n.getCell(e,t).forEachChildren(e=>{e.role&&e.role.startsWith(\\\"icon\\\")&&e.containsPoint(i,r,IContainPointMode.GLOBAL)&&(o=e)}),o}function setIconHoverStyle(t,e,i,r,n){var o,a,l,s;(t.attribute.backgroundColor||t.attribute.hoverImage)&&updateCellRangeIcon(e,i,e=>e.name===t.name,t=>{var i;if(t.attribute.backgroundColor){let e=t.parent.getChildByName(\\\"icon-back\\\");e?e.setAttributes({x:(null!=(i=t.attribute.x)?i:0)+(null!=(i=t.attribute.dx)?i:0)+(t.AABBBounds.width()-t.backgroundWidth)/2,y:(null!=(i=t.attribute.y)?i:0)+(t.AABBBounds.height()-t.backgroundHeight)/2,dx:null!=(i=t.attribute.dx)?i:0,dy:null!=(i=t.attribute.dy)?i:0,width:t.backgroundWidth,height:t.backgroundHeight,fill:t.attribute.backgroundColor,cornerRadius:5,visible:!0}):(e=createRect({x:(null!=(i=t.attribute.x)?i:0)+(null!=(i=t.attribute.dx)?i:0)+(t.AABBBounds.width()-t.backgroundWidth)/2,y:(null!=(i=t.attribute.y)?i:0)+(t.AABBBounds.height()-t.backgroundHeight)/2,dx:null!=(i=t.attribute.dx)?i:0,dy:null!=(i=t.attribute.dy)?i:0,width:t.backgroundWidth,height:t.backgroundHeight,fill:t.attribute.backgroundColor,cornerRadius:5,pickable:!1,visible:!0})).name=\\\"icon-back\\\",t.parent.insertBefore(e,t)}t.attribute.hoverImage&&t.attribute.image!==t.attribute.hoverImage&&(t.image=t.attribute.hoverImage)},n),t.tooltip&&(({x1:o,x2:a,y1:s,y2:l}=t.globalAABBBounds),s={content:t.tooltip.title,referencePosition:{rect:{left:o,right:a,top:s,bottom:l,width:t.globalAABBBounds.width(),height:t.globalAABBBounds.height()},placement:t.tooltip.placement},style:Object.assign({},null==(o=n.table.internalProps.theme)?void 0:o.tooltipStyle,null==(a=t.tooltip)?void 0:a.style)},n.table.internalProps.tooltipHandler.isBinded(s)||n.table.showTooltip(e,i,s))}function setIconNormalStyle(t,e,i,r){(t.attribute.backgroundColor||t.attribute.hoverImage)&&updateCellRangeIcon(e,i,e=>e.name===t.name,e=>{var t=e.parent.getChildByName(\\\"icon-back\\\");t&&t.setAttribute(\\\"visible\\\",!1),e.attribute.hoverImage&&e.attribute.image!==e.attribute.originImage&&(e.image=e.attribute.originImage)},r)}function updateIcon(e,t,i,r,n){const o=e.name;updateCellRangeIcon(i,r,e=>e.name===o,e=>{dealWithIcon(t,e),e.name=t.name},n),n.updateNextFrame()}function resetSortIcon(e,t,r,n){var o=n.getCell(e,t);if(isValid_default(o.mergeStartCol)&&isValid_default(o.mergeStartRow)&&isValid_default(o.mergeEndCol)&&isValid_default(o.mergeEndRow))for(let i=o.mergeStartCol;i<=o.mergeEndCol;i++)for(let e=o.mergeStartRow;e<=o.mergeEndRow;e++){let t;n.getCell(i,e).forEachChildren(e=>\\\"sort\\\"===e.attribute.funcType&&(t=e,!0)),t&&(dealWithIcon(r,t),t.name=r.name)}else{let t;o.forEachChildren(e=>\\\"sort\\\"===e.attribute.funcType&&(t=e,!0)),t&&(dealWithIcon(r,t),t.name=r.name)}}function checkSameCell(e,t,i,r,n){var o=n.getCellRange(e,t),a=n.getCellRange(i,r);return o.start.col===a.start.col&&o.start.row===a.start.row&&o.end.col===a.end.col&&o.end.row===a.end.row}function updateSortIcon(e,t,i,r,n,o,a,l){var s=l.table.internalProps.headerHelper.getSortIcon(r,l.table,e,t);i&&updateIcon(i,s,e,t,l),checkSameCell(e,t,n,o,l.table)||(s=l.table.internalProps.headerHelper.getSortIcon(\\\"normal\\\",l.table,n,o),a?updateIcon(a,s,n,o,l):resetSortIcon(n,o,s,l))}function updateFrozenIcon(r){for(let n=0;n<r.table.colCount;n++)for(let i=0;i<r.table.columnHeaderLevelCount;i++)updateCellRangeIcon(n,i,e=>\\\"frozen\\\"===e.attribute.funcType,e=>{var t=r.table.internalProps.headerHelper.getFrozenIcon(n,i);dealWithIcon(t,e),e.name=t.name},r)}function updateHierarchyIcon(e,t,i){let r;r=(i.table.isHeader(e,t)?i.table.internalProps.headerHelper:i.table.internalProps.bodyHelper).getHierarchyIcon(e,t),updateCellRangeIcon(e,t,e=>e.attribute.funcType===IconFuncTypeEnum.collapse||e.attribute.funcType===IconFuncTypeEnum.expand,e=>{dealWithIcon(r,e),e.name=r.name},i)}function updateCellGroupIcon(e,t,i){e.forEachChildren(e=>{\\\"group\\\"===e.type?updateCellGroupIcon(e,t,i):t(e)&&i(e)})}function updateCellRangeIcon(e,t,i,r,n){var o=n.getCell(e,t);if(\\\"cell\\\"===o.role&&isValid_default(o.mergeStartCol)&&isValid_default(o.mergeStartRow)&&isValid_default(o.mergeEndCol)&&isValid_default(o.mergeEndRow)){var{colStart:a,colEnd:l,rowStart:s,rowEnd:h}=getCellMergeRange(o,n);for(let t=a;t<=l;t++)for(let e=s;e<=h;e++)updateCellGroupIcon(n.highPerformanceGetCell(t,e),i,r)}else updateCellGroupIcon(o,i,r)}function residentHoverIcon(e,t,i){updateCellRangeIcon(e,t,e=>e.attribute.funcType===IconFuncTypeEnum.dropDown,e=>{e.oldVisibleTime=e.attribute.visibleTime,e.setAttribute(\\\"visibleTime\\\",\\\"always\\\"),e.setAttribute(\\\"opacity\\\",1)},i)}function resetResidentHoverIcon(e,t,i){updateCellRangeIcon(e,t,e=>e.attribute.funcType===IconFuncTypeEnum.dropDown,e=>{e.oldVisibleTime&&e.setAttribute(\\\"visibleTime\\\",e.oldVisibleTime),e.setAttribute(\\\"opacity\\\",\\\"always\\\"===e.attribute.visibleTime?1:0)},i)}function createCornerCell(e,t){var{bgColor:i,borderColor:r,borderLineWidth:n,borderLineDash:o}=t,i={x:0,y:0,width:0,height:0,visible:!1,pickable:!0,fill:i};return i.stroke=getStroke(r,void 0),i.lineWidth=n,o&&(i.lineDash=o),i.lineCap=\\\"butt\\\",Array.isArray(r)&&(i.strokeArrayColor=getQuadProps(r)),Array.isArray(n)&&(i.strokeArrayWidth=getQuadProps(n),i.lineWidth=1),e.setAttributes(i),e.role=\\\"corner-frozen\\\",e}function updateCol(e,t,i,n){const o=n.scenegraph,r=deduplication2(e.map(e=>e.col)).sort((e,t)=>t-e),a=deduplication2(t.map(e=>e.col)).sort((e,t)=>e-t),l=deduplication2(i.map(e=>e.col)).sort((e,t)=>e-t),s=(r.forEach(e=>{removeCol(e,o)}),n.colWidthsMap);let h;if(r.forEach(e=>{s.delAndReorder(e)}),r.length&&resetColNumber(o),o.table._clearColRangeWidthsMap(),a.forEach(e=>{var t=addCol(e,o);resetColNumber(o),h=null!=h?h:t,s.addAndReorder(e)}),resetColNumberAndX(o),l.forEach(e=>{for(let r=0;r<n.rowCount;r++){var i=getCellMergeInfo(o.table,e,r);if(i)for(let t=i.start.col;t<=i.end.col;t++)for(let e=i.start.col;e<=i.end.col;e++)updateCell(e,r,o.table,!1);else updateCell(e,r,o.table,!1)}}),isNumber_default(h)){for(let t=h;t<n.colCount;t++)for(let e=0;e<n.rowCount;e++){var d=o.highPerformanceGetCell(t,e,!0);d&&(d.needUpdate=!0)}o.proxy.colUpdatePos=h}a.length?(isNumber_default(h)||(u=Math.min(...a),o.proxy.colUpdatePos=u),o.proxy.colUpdateDirection=\\\"left\\\",o.proxy.updateColGroups(2*o.proxy.screenColCount),c(),o.proxy.progress()):r.length&&(o.proxy.updateColGroups(2*o.proxy.screenColCount),c(),o.proxy.progress());var u=n.getColsWidth(n.frozenColCount,n.colCount-1);function c(){if((null==a?void 0:a[(null==a?void 0:a.length)-1])>=n.colCount-n.rightFrozenColCount||(null==l?void 0:l[(null==l?void 0:l.length)-1])>=n.colCount-n.rightFrozenColCount||(null==r?void 0:r[0])>=n.colCount-n.rightFrozenColCount){for(let t=n.colCount-n.rightFrozenColCount;t<n.colCount;t++)for(let e=0;e<n.rowCount;e++){var i=o.highPerformanceGetCell(t,e,!0);i&&(i.needUpdate=!0)}o.proxy.updateRightFrozenCellGroups()}}o.updateContainerWidth(o.table.frozenColCount,u-o.bodyGroup.attribute.width)}function removeCol(e,t){var i=t.proxy,r=(e>=t.table.rowHeaderLevelCount&&(e>=t.table.colCount-t.table.rightFrozenColCount||((r=t.getColGroup(e,!1))&&r.parent===t.bodyGroup&&t.bodyGroup.removeChild(r),(r=t.getColGroupInBottom(e))&&r.parent===t.bottomFrozenGroup&&t.bottomFrozenGroup.removeChild(r))),e>=i.colStart&&e<=i.colEnd&&(i.colEnd--,i.currentCol--),i.bodyRightCol--,Math.min(i.colLimit,i.bodyRightCol-i.bodyLeftCol+1));i.totalActualBodyColCount=r,i.totalCol=i.colStart+r-1}function addCol(e,t){var i=t.proxy,r=(i.bodyRightCol++,Math.min(i.colLimit,i.bodyRightCol-i.bodyLeftCol+1));if(i.totalActualBodyColCount=r,i.totalCol=i.colStart+r-1,!(e<i.colStart))return e>i.colEnd?i.colEnd-i.colStart+1<i.colLimit?(i.colEnd++,i.currentCol++,addColGroup(e,t),e):void 0:(i.colEnd-i.colStart+1<i.colLimit&&(i.colEnd++,i.currentCol++,addColGroup(e,t)),e)}function deduplication2(e){var t=[];for(let i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i]);return t}function resetColNumber(i){let r=i.bodyColStart;function t(e){e.col=r;var t=getCellMergeInfo(i.table,e.col,e.row);t&&(e.mergeStartCol=t.start.col,e.mergeStartCol=t.start.col,e.mergeEndCol=t.end.col,e.mergeEndCol=t.end.col),e.role}i.bodyGroup.forEachChildren(e=>{e.col=r,null!=e&&e.forEachChildren(e=>{t(e)}),r++}),r=i.bodyColStart,i.colHeaderGroup.forEachChildren(e=>{e.col=r,null!=e&&e.forEachChildren(e=>{t(e)}),r++}),r=i.bodyColStart,i.bottomFrozenGroup.forEachChildren(e=>{e.col=r,null!=e&&e.forEachChildren(e=>{t(e)}),r++})}function resetColNumberAndX(i){let r=i.bodyColStart,t=i.getCellGroupX(r);function n(e){e.col=r;var t=getCellMergeInfo(i.table,e.col,e.row);t&&(e.mergeStartCol=t.start.col,e.mergeStartCol=t.start.col,e.mergeEndCol=t.end.col,e.mergeEndCol=t.end.col),e.role}i.bodyGroup.forEachChildren(e=>{e.col=r,null!=e&&e.forEachChildren(e=>{n(e)}),e.setAttribute(\\\"x\\\",t),t+=e.attribute.width,r++}),r=i.bodyColStart,t=i.getCellGroupX(r),i.colHeaderGroup.forEachChildren(e=>{e.col=r,null!=e&&e.forEachChildren(e=>{n(e)}),e.setAttribute(\\\"x\\\",t),t+=e.attribute.width,r++}),r=i.bodyColStart,t=i.getCellGroupX(r),i.bottomFrozenGroup.forEachChildren(e=>{e.col=r,null!=e&&e.forEachChildren(e=>{n(e)}),e.setAttribute(\\\"x\\\",t),t+=e.attribute.width,r++}),r=i.table.colCount-i.table.rightFrozenColCount,t=0,i.rightFrozenGroup.forEachChildren(e=>{e.col=r,null!=e&&e.forEachChildren(e=>{n(e)}),e.setAttribute(\\\"x\\\",t),t+=e.attribute.width,r++}),r=i.table.colCount-i.table.rightFrozenColCount,t=0,i.rightTopCornerGroup.forEachChildren(e=>{e.col=r,null!=e&&e.forEachChildren(e=>{n(e)}),e.setAttribute(\\\"x\\\",t),t+=e.attribute.width,r++}),r=i.table.colCount-i.table.rightFrozenColCount,t=0,i.rightBottomCornerGroup.forEachChildren(e=>{e.col=r,null!=e&&e.forEachChildren(e=>{n(e)}),e.setAttribute(\\\"x\\\",t),t+=e.attribute.width,r++})}function addColGroup(e,a){var t,i;function r(e,t,i,r){for(let o=i;o<=r;o++){var n=new Group2({x:0,y:0,width:a.table.getColWidth(t),height:a.table.getRowHeight(o)});n.role=\\\"cell\\\",n.col=t,n.row=o,n.needUpdate=!0,e.appendChild(n)}}a.colHeaderGroup&&0<a.table.columnHeaderLevelCount&&((t=new Group2({x:0,y:0,width:a.table.getColWidth(e),height:0,clip:!1,pickable:!1})).role=\\\"column\\\",t.col=e,(i=a.getColGroup(e,!0))?a.colHeaderGroup.insertBefore(t,i):a.colHeaderGroup.appendChild(t),r(t,e,0,a.table.columnHeaderLevelCount-1)),a.bodyGroup&&((i=new Group2({x:0,y:0,width:a.table.getColWidth(e),height:0,clip:!1,pickable:!1})).role=\\\"column\\\",i.col=e,(t=a.getColGroup(e,!1))?a.bodyGroup.insertBefore(i,t):a.bodyGroup.appendChild(i),r(i,e,a.bodyRowStart,a.bodyRowEnd)),a.bottomFrozenGroup&&0<a.table.bottomFrozenRowCount&&((t=new Group2({x:0,y:0,width:a.table.getColWidth(e),height:0,clip:!1,pickable:!1})).role=\\\"column\\\",t.col=e,(i=a.getColGroupInBottom(e))?a.bottomFrozenGroup.insertBefore(t,i):a.bottomFrozenGroup.appendChild(t),r(t,e,a.table.rowCount-a.table.bottomFrozenRowCount,a.table.rowCount-1))}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),registerForVrender(),loadPoptip(),container.load(contributions_default),container.load(text_measure_default);var Scenegraph=class{constructor(e){let t,i;this._needUpdateContainer=!1,this.table=e,this.hasFrozen=!1,this.clear=!0,this.mergeMap=new Map,setPoptipTheme(this.table.theme.textPopTipStyle),i=\\\"node\\\"===Env.mode?(vglobal.setEnv(\\\"node\\\",e.options.modeParams),t=e.canvasWidth,e.canvasHeight):(vglobal.setEnv(\\\"browser\\\"),t=e.canvas.width,e.canvas.height),this.stage=createStage({canvas:e.canvas,width:t,height:i,disableDirtyBounds:!1,background:e.theme.underlayBackgroundColor,dpr:e.internalProps.pixelRatio,enableLayout:!0,afterRender:()=>{this.table.fireListeners(\\\"after_render\\\",null)}}),this.stage.defaultLayer.setTheme({group:{boundsPadding:0,strokeBoundsBuffer:0,lineJoin:\\\"round\\\"},text:{ignoreBuf:!0}}),this.initSceneGraph(),this.stage.defaultLayer.add(this.tableGroup),this.stage.table=this.table,this.createComponent()}get width(){var e;return null!=(e=null==(e=this.tableGroup.attribute)?void 0:e.width)?e:0}get height(){var e;return null!=(e=null==(e=this.tableGroup.attribute)?void 0:e.height)?e:0}get x(){var e;return null!=(e=null==(e=this.tableGroup.attribute)?void 0:e.x)?e:0}get y(){var e;return null!=(e=null==(e=this.tableGroup.attribute)?void 0:e.y)?e:0}get bodyRowStart(){var e;return null!=(e=this.proxy.rowStart)?e:0}get bodyRowEnd(){var e;return null!=(e=this.proxy.rowEnd)?e:this.table.rowCount-1}get bodyColStart(){var e;return null!=(e=this.proxy.colStart)?e:0}get bodyColEnd(){var e;return null!=(e=this.proxy.colEnd)?e:this.table.colCount-1}initSceneGraph(){this.isPivot=this.table.isPivotTable(),initSceneGraph(this)}clearCells(){var e;(this.table.isPivotChart()||this.table._hasCustomRenderOrLayout())&&this.stage.pluginService.findPluginsByName(\\\"poptipForText\\\").forEach(e=>{e.deactivate(this.stage.pluginService)}),this.clear=!0,this.hasFrozen=!1,this.mergeMap.clear(),this.colHeaderGroup.clear(),this.rowHeaderGroup.clear(),this.cornerHeaderGroup.clear(),this.bodyGroup.clear(),this.bottomFrozenGroup.clear(),this.rightFrozenGroup.clear(),this.rightTopCornerGroup.clear(),this.rightBottomCornerGroup.clear(),this.leftBottomCornerGroup.clear(),this.colHeaderGroup.setAttributes({x:0,y:0,width:0,height:0}),this.rowHeaderGroup.setAttributes({x:0,y:0,width:0,height:0}),this.cornerHeaderGroup.setAttributes({x:0,y:0,width:0,height:0}),this.bodyGroup.setAttributes({x:0,y:0,width:0,height:0}),this.rightFrozenGroup.setAttributes({x:0,y:0,width:0,height:0}),this.bottomFrozenGroup.setAttributes({x:0,y:0,width:0,height:0}),this.rightTopCornerGroup.setAttributes({x:0,y:0,width:0,height:0,visible:!1}),this.leftBottomCornerGroup.setAttributes({x:0,y:0,width:0,height:0,visible:!1}),this.rightBottomCornerGroup.setAttributes({x:0,y:0,width:0,height:0,visible:!1}),this.tableGroup.setAttributes({x:this.table.tableX,y:this.table.tableY,width:0,height:0}),this.tableGroup.border&&(this.tableGroup.parent.removeChild(this.tableGroup.border),delete this.tableGroup.border),null!=(e=this.proxy)&&e.release()}updateStageBackground(){this.stage.background=this.table.theme.underlayBackgroundColor,this.stage.renderNextFrame()}createComponent(){this.component=new TableComponent(this.table),this.component.addToGroup(this.componentGroup),this.selectedRangeComponents=new Map,this.selectingRangeComponents=new Map}updateComponent(){this.component.updateStyle()}createSceneGraph(){this.table.rowHeightsMap.clear(),(this.table.isPivotChart()||this.table._hasCustomRenderOrLayout())&&this.stage.pluginService.autoEnablePlugins.getContributions().forEach(e=>{\\\"poptipForText\\\"===e.name&&this.stage.pluginService.register(e)}),this.clear=!1,this.frozenColCount=this.table.frozenColCount,this.frozenRowCount=this.table.columnHeaderLevelCount,this.proxy=new SceneProxy(this.table),createFrameBorder(this.tableGroup,this.table.theme.frameStyle,this.tableGroup.role,void 0,!0),this.table.isPivotChart()&&(createCornerCell(this.rightTopCornerGroup,this.table.theme.cornerRightTopCellStyle||this.table.theme.cornerHeaderStyle||{}),createCornerCell(this.leftBottomCornerGroup,this.table.theme.cornerLeftBottomCellStyle||this.table.theme.cornerHeaderStyle||{}),createCornerCell(this.rightBottomCornerGroup,this.table.theme.cornerRightBottomCellStyle||this.table.theme.cornerHeaderStyle||{})),this.proxy.createGroupForFirstScreen(this.cornerHeaderGroup,this.colHeaderGroup,this.rowHeaderGroup,this.rightFrozenGroup,this.bottomFrozenGroup,this.bodyGroup,0,0),this.afterScenegraphCreated()}renderSceneGraph(){this.stage.render()}getCell(e,t,i){var r;let n;return(n=!(n=0<this.table.rightFrozenColCount&&e>=this.table.colCount-this.table.rightFrozenColCount&&t<this.table.frozenRowCount?null==(r=this.rightTopCornerGroup.getColGroup(e))?void 0:r.getRowGroup(t):0<this.table.bottomFrozenRowCount&&t>=this.table.rowCount-this.table.bottomFrozenRowCount&&e<this.table.frozenColCount?null==(r=this.leftBottomCornerGroup.getColGroup(e))?void 0:r.getRowGroup(t):0<this.table.rightFrozenColCount&&0<this.table.bottomFrozenRowCount&&e>=this.table.colCount-this.table.rightFrozenColCount&&t>=this.table.rowCount-this.table.bottomFrozenRowCount?null==(r=this.rightBottomCornerGroup.getColGroup(e))?void 0:r.getRowGroup(t):0<this.table.rightFrozenColCount&&e>this.table.colCount-1-this.table.rightFrozenColCount?null==(r=this.rightFrozenGroup.getColGroup(e))?void 0:r.getRowGroup(t):0<this.table.bottomFrozenRowCount&&t>this.table.rowCount-1-this.table.bottomFrozenRowCount?null==(r=this.bottomFrozenGroup.getColGroup(e))?void 0:r.getRowGroup(t):null==(r=this.getColGroup(e,t<this.frozenRowCount))?void 0:r.getRowGroup(t))||\\\"shadow-cell\\\"!==n.role||i||(r=this.table.getCellRange(e,t)).start.col===e&&r.start.row===t?n:this.getCell(r.start.col,r.start.row))||emptyGroup}highPerformanceGetCell(e,t,i){return this.proxy.highPerformanceGetCell(e,t,i)}getColGroup(e,t=!1){return(e<this.frozenColCount&&t?this.cornerHeaderGroup:e<this.frozenColCount?this.rowHeaderGroup:t&&0<this.table.rightFrozenColCount&&e>this.table.colCount-1-this.table.rightFrozenColCount?this.rightTopCornerGroup:!t&&0<this.table.rightFrozenColCount&&e>this.table.colCount-1-this.table.rightFrozenColCount?this.rightFrozenGroup:t?this.colHeaderGroup:this.bodyGroup).getColGroup(e)||void 0}getColGroupInBottom(e){if(0<this.table.bottomFrozenRowCount)return this.bottomFrozenGroup.getColGroup(e)}getColGroupInLeftBottomCorner(e){if(0<this.table.bottomFrozenRowCount)return this.leftBottomCornerGroup.getColGroup(e)}getColGroupInRightTopCorner(e){if(0<this.table.rightFrozenColCount)return this.rightTopCornerGroup.getColGroup(e)}getColGroupInRightBottomCorner(e){if(0<this.table.rightFrozenColCount&&0<this.table.bottomFrozenRowCount)return this.rightBottomCornerGroup.getColGroup(e)}getCellSize(e,t){var i=this.getCell(e,t),r=getCellMergeInfo(this.table,e,t);let n=i.attribute.width,o=i.attribute.height;return r&&(n/=r.end.col-r.start.col+1,o/=r.end.row-r.start.row+1),{width:n,height:o}}updateNextFrame(){this.updateContainerSync(),this.resetAllSelectComponent(),this.stage.renderNextFrame()}resetAllSelectComponent(){var e;0<(null==(e=null==(e=this.table.stateManager.select)?void 0:e.ranges)?void 0:e.length)&&updateAllSelectComponent(this)}hideHoverIcon(e,t){hideHoverIcon(e,t,this)}showHoverIcon(e,t){showHoverIcon(e,t,this)}hideClickIcon(e,t){hideClickIcon(e,t,this)}showClickIcon(e,t){showClickIcon(e,t,this)}getIcon(e,t,i,r){return getIconByXY(e,t,i,r,this)}setIconHoverStyle(e,t,i,r){setIconHoverStyle(e,t,i,r,this)}updateSortIcon(e,t,i,r,n,o,a){updateSortIcon(e,t,i,r,n,o,a,this)}updateFrozenIcon(e,t){updateFrozenIcon(this)}updateHierarchyIcon(e,t){updateHierarchyIcon(e,t,this)}setIconNormalStyle(e,t,i){setIconNormalStyle(e,t,i,this)}residentHoverIcon(e,t){residentHoverIcon(e,t,this)}resetResidentHoverIcon(e,t){resetResidentHoverIcon(e,t,this)}deactivateChart(e,t){var i,r;-1!==e&&-1!==t&&null!=(i=null==(r=null==(r=this.getCell(e,t))?void 0:r.firstChild)?void 0:r.deactivate)&&i.call(r)}activateChart(e,t){var i,r;-1!==e&&-1!==t&&null!=(i=null==(r=null==(r=this.getCell(e,t))?void 0:r.firstChild)?void 0:r.activate)&&i.call(r,this.table)}removeInteractionBorder(e,t){var i=this.getCell(e,t);i.setAttribute(\\\"highlightStroke\\\",void 0),i.setAttribute(\\\"highlightStrokeArrayWidth\\\",void 0),i.setAttribute(\\\"highlightStrokeArrayColor\\\",void 0)}createCellSelectBorder(e,t,i,r,n,o,a){createCellSelectBorder(this,e,t,i,r,n,o,a)}moveSelectingRangeComponentsToSelectedRangeComponents(){moveSelectingRangeComponentsToSelectedRangeComponents(this)}deleteLastSelectedRangeComponents(){deleteLastSelectedRangeComponents(this)}deleteAllSelectBorder(){deleteAllSelectBorder(this)}updateCellSelectBorder(e,t,i,r,n=!0){updateCellSelectBorder(this,e,t,i,r,n)}removeFillHandleFromSelectComponents(){removeFillHandleFromSelectComponents(this)}recreateAllSelectRangeComponents(){deleteAllSelectBorder(this),this.table.stateManager.select.ranges.forEach(e=>{updateCellSelectBorder(this,e.start.col,e.start.row,e.end.col,e.end.row)}),moveSelectingRangeComponentsToSelectedRangeComponents(this)}updateColWidth(e,t,i,r){updateColWidth(this,e,Math.round(t),r),i||this.updateContainer(!0)}updateChartSize(e){updateChartSize(this,e)}updateChartState(e){this.table.isPivotChart()&&updateChartState(this,e)}updateCheckboxCellState(e,t,i){var r;this.table.transpose?null!=(r=this.bodyGroup.children)&&r.forEach(e=>{e.getChildAt(t).getChildren().forEach(e=>{\\\"checkbox\\\"===e.name&&e.setAttribute(\\\"checked\\\",i)})}):null!=(r=this.getColGroup(e).children)&&r.forEach(e=>{e.getChildren().find(e=>{\\\"checkbox\\\"===e.name&&e.setAttribute(\\\"checked\\\",i)})})}updateHeaderCheckboxCellState(e,t,i){var r;this.table.transpose?null!=(r=this.rowHeaderGroup.children)&&r.forEach(e=>{e.getChildAt(t).getChildren().forEach(e=>{\\\"checkbox\\\"===e.name&&(\\\"indeterminate\\\"===i?(e.setAttribute(\\\"indeterminate\\\",!0),e.setAttribute(\\\"checked\\\",void 0)):(e.setAttribute(\\\"indeterminate\\\",void 0),e.setAttribute(\\\"checked\\\",i)))})}):null!=(r=this.getColGroup(e,!0).children)&&r.forEach(e=>{e.getChildren().find(e=>{\\\"checkbox\\\"===e.name&&(\\\"indeterminate\\\"===i?(e.setAttribute(\\\"indeterminate\\\",!0),e.setAttribute(\\\"checked\\\",void 0)):(e.setAttribute(\\\"indeterminate\\\",void 0),e.setAttribute(\\\"checked\\\",i)))})})}updateAutoColWidth(e){this.table.internalProps._widthResizedColMap[\\\"delete\\\"](e);var t=this.table.getColWidth(e),i=computeColWidth(e,0,this.table.rowCount-1,this.table,!0);i!==t&&this.updateColWidth(e,i-t)}recalculateColWidths(){computeColsWidth(this.table,0,this.table.colCount-1,!0)}recalculateRowHeights(){computeRowsHeight(this.table,0,this.table.rowCount-1,!0,!0)}resize(){this.proxy.resize(),\\\"adaptive\\\"!==this.table.widthMode&&!this.table.autoFillWidth||(0===this.table.internalProps._widthResizedColMap.size?this.recalculateColWidths():this.dealWidthMode()),\\\"adaptive\\\"===this.table.heightMode?0===this.table.internalProps._heightResizedRowMap.size?this.recalculateRowHeights():this.dealHeightMode():this.table.autoFillHeight&&this.dealHeightMode(),this.resetFrozen(),this.updateTableSize(),this.updateBorderSizeAndPosition(),this.component.updateScrollBar(),(\\\"adaptive\\\"===this.table.widthMode||\\\"adaptive\\\"===this.table.heightMode||this.table.autoFillWidth||this.table.autoFillHeight)&&this.updateChartSize(this.table.rowHeaderLevelCount),this.proxy.progress(),this.updateNextFrame()}updateTableSize(){var e;this.tableGroup.setAttributes({x:this.table.tableX,y:this.table.tableY,width:Math.min(this.table.tableNoFrameWidth,Math.max(this.colHeaderGroup.attribute.width,this.bodyGroup.attribute.width,this.bottomFrozenGroup.attribute.width,0)+Math.max(this.cornerHeaderGroup.attribute.width,this.rowHeaderGroup.attribute.width,this.leftBottomCornerGroup.attribute.width,0)+Math.max(this.rightTopCornerGroup.attribute.width,this.rightFrozenGroup.attribute.width,this.rightBottomCornerGroup.attribute.width,0)),height:Math.min(this.table.tableNoFrameHeight,Math.max(this.colHeaderGroup.attribute.height,this.cornerHeaderGroup.attribute.height,this.rightTopCornerGroup.attribute.height,0)+Math.max(this.rowHeaderGroup.attribute.height,this.bodyGroup.attribute.height,this.rightFrozenGroup.attribute.height,0)+Math.max(this.leftBottomCornerGroup.attribute.height,this.bottomFrozenGroup.attribute.height,this.rightBottomCornerGroup.attribute.height,0))}),this.tableGroup.border&&\\\"rect\\\"===this.tableGroup.border.type?null!=(e=this.table.theme.frameStyle)&&e.innerBorder?this.tableGroup.border.setAttributes({x:this.table.tableX+this.tableGroup.border.attribute.lineWidth/2,y:this.table.tableY+this.tableGroup.border.attribute.lineWidth/2,width:this.tableGroup.attribute.width-this.tableGroup.border.attribute.lineWidth,height:this.tableGroup.attribute.height-this.tableGroup.border.attribute.lineWidth}):this.tableGroup.border.setAttributes({x:this.table.tableX-this.tableGroup.border.attribute.lineWidth/2,y:this.table.tableY-this.tableGroup.border.attribute.lineWidth/2,width:this.tableGroup.attribute.width+this.tableGroup.border.attribute.lineWidth,height:this.tableGroup.attribute.height+this.tableGroup.border.attribute.lineWidth}):this.tableGroup.border&&\\\"group\\\"===this.tableGroup.border.type&&(null!=(e=this.table.theme.frameStyle)&&e.innerBorder?(this.tableGroup.border.setAttributes({x:this.table.tableX+this.tableGroup.border.attribute.lineWidth/2,y:this.table.tableY+this.tableGroup.border.attribute.lineWidth/2,width:this.tableGroup.attribute.width-this.tableGroup.border.attribute.lineWidth,height:this.tableGroup.attribute.height-this.tableGroup.border.attribute.lineWidth}),null!=(e=this.tableGroup.border.firstChild)&&e.setAttributes({x:0,y:0,width:this.tableGroup.attribute.width-this.tableGroup.border.attribute.lineWidth,height:this.tableGroup.attribute.height-this.tableGroup.border.attribute.lineWidth})):(this.tableGroup.border.setAttributes({x:this.table.tableX-this.tableGroup.border.attribute.lineWidth/2,y:this.table.tableY-this.tableGroup.border.attribute.lineWidth/2,width:this.tableGroup.attribute.width+this.tableGroup.border.attribute.lineWidth,height:this.tableGroup.attribute.height+this.tableGroup.border.attribute.lineWidth}),null!=(e=this.tableGroup.border.firstChild)&&e.setAttributes({x:this.tableGroup.border.attribute.lineWidth/2,y:this.tableGroup.border.attribute.lineWidth/2,width:this.tableGroup.attribute.width,height:this.tableGroup.attribute.height}))),0<this.table.bottomFrozenRowCount&&(this.bottomFrozenGroup.setAttribute(\\\"y\\\",this.tableGroup.attribute.height-this.table.getBottomFrozenRowsHeight()),this.leftBottomCornerGroup.setAttributes({visible:!0,y:this.tableGroup.attribute.height-this.table.getBottomFrozenRowsHeight(),height:this.table.getBottomFrozenRowsHeight(),width:this.table.getFrozenColsWidth()}),this.rightBottomCornerGroup.setAttributes({visible:!0,y:this.tableGroup.attribute.height-this.table.getBottomFrozenRowsHeight(),height:this.table.getBottomFrozenRowsHeight()})),0<this.table.rightFrozenColCount&&(this.rightFrozenGroup.setAttribute(\\\"x\\\",this.tableGroup.attribute.width-this.table.getRightFrozenColsWidth()),this.rightTopCornerGroup.setAttributes({visible:!0,x:this.tableGroup.attribute.width-this.table.getRightFrozenColsWidth(),width:this.table.getRightFrozenColsWidth(),height:this.table.getFrozenRowsHeight()}),this.rightBottomCornerGroup.setAttributes({visible:!0,x:this.tableGroup.attribute.width-this.table.getRightFrozenColsWidth(),width:this.table.getRightFrozenColsWidth()}))}updateRowHeight(e,t,i){updateRowHeight(this,e,t=Math.round(t),i),this.updateContainerHeight(e,t)}updateRowsHeight(e,t,i){for(let o=0;o<e.length;o++){var r,n=e[o];n>=this.proxy.rowStart&&n<=this.proxy.rowEnd&&(r=t[o],updateRowHeight(this,n,Math.round(r),i),this._updateContainerHeight(n,r))}this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame()}updateContainerWidth(e,t){e<this.frozenColCount?(this.rowHeaderGroup.setDeltaWidth(t),this.cornerHeaderGroup.setDeltaWidth(t),this.colHeaderGroup.setDeltaX(t),this.bodyGroup.setDeltaX(t)):(this.colHeaderGroup.setDeltaWidth(t),this.bodyGroup.setDeltaWidth(t)),this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame()}_updateContainerHeight(e,t){e<this.table.frozenRowCount?(this.colHeaderGroup.setDeltaHeight(t),this.cornerHeaderGroup.setDeltaHeight(t),this.rowHeaderGroup.setDeltaY(t),this.bodyGroup.setDeltaY(t),this.table.rightFrozenColCount&&this.rightFrozenGroup.setDeltaY(t)):e>=this.table.rowCount-this.table.bottomFrozenRowCount?(this.leftBottomCornerGroup.setDeltaHeight(t),this.bottomFrozenGroup.setDeltaHeight(t),this.table.rightFrozenColCount&&this.rightBottomCornerGroup.setDeltaHeight(t)):(this.rowHeaderGroup.setDeltaHeight(t),this.bodyGroup.setDeltaHeight(t),this.table.rightFrozenColCount&&this.rightFrozenGroup.setDeltaHeight(t))}updateContainerHeight(e,t){this._updateContainerHeight(e,t),this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame()}setColWidth(e,t){var i=this.table.getColWidth(e);i!==t&&(this.updateColWidth(e,t-i),this.table._clearColRangeWidthsMap(e))}setRowHeight(e,t){var i=this.table.getRowHeight(e);i!==t&&((e>=this.proxy.rowStart&&e<=this.proxy.rowEnd||e>=this.table.rowCount-this.table.bottomFrozenRowCount&&e<=this.table.rowCount-1||e<this.table.frozenRowCount)&&this.updateRowHeight(e,t-i),this.table._clearRowRangeHeightsMap(e))}setX(e,t=!1){this.table.scenegraph.proxy.setX(-e,t)}setY(e,t=!1){this.table.scenegraph.proxy.setY(-e,t)}setBodyAndRowHeaderY(e){var t=null==(t=this.bodyGroup.firstChild)?void 0:t.firstChild,i=null==(i=this.bodyGroup.firstChild)?void 0:i.lastChild;0===e&&t&&t.row===this.table.frozenRowCount&&t.attribute.y+e<0?e=-t.attribute.y:i&&this.table.tableNoFrameHeight<this.table.getAllRowsHeight()&&i.row===this.table.rowCount-this.table.bottomFrozenRowCount-1&&i.attribute.y+i.attribute.height+e<this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight()&&(e=this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight()-i.attribute.y-i.attribute.height),this.colHeaderGroup.attribute.height+e!==this.bodyGroup.attribute.y&&(this.bodyGroup.setAttribute(\\\"y\\\",this.colHeaderGroup.attribute.height+e),this.rowHeaderGroup.setAttribute(\\\"y\\\",this.cornerHeaderGroup.attribute.height+e),0<this.table.rightFrozenColCount&&this.rightFrozenGroup.setAttribute(\\\"y\\\",this.rightTopCornerGroup.attribute.height+e),this.updateNextFrame())}setBodyAndColHeaderX(e){var t=this.bodyGroup.firstChild,i=this.bodyGroup.lastChild;0===e&&t&&t.col===this.table.frozenColCount&&t.attribute.x+e<0?e=-t.attribute.x:i&&this.table.tableNoFrameWidth<this.table.getAllColsWidth()&&i.col===this.table.colCount-this.table.rightFrozenColCount-1&&i.attribute.x+i.attribute.width+e<this.table.tableNoFrameWidth-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth()&&(e=this.table.tableNoFrameWidth-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth()-i.attribute.x-i.attribute.width),this.table.getFrozenColsWidth()+e!==this.bodyGroup.attribute.x&&(this.bodyGroup.setAttribute(\\\"x\\\",this.table.getFrozenColsWidth()+e),this.colHeaderGroup.setAttribute(\\\"x\\\",this.table.getFrozenColsWidth()+e),0<this.table.bottomFrozenRowCount&&this.bottomFrozenGroup.setAttribute(\\\"x\\\",this.table.getFrozenColsWidth()+e),this.updateNextFrame())}afterScenegraphCreated(){this.isPivot||this.table.transpose?this.table.options.frozenColCount?this.component.setFrozenColumnShadow(this.table.frozenColCount-1):this.table.options.rightFrozenColCount?this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount):this.component.setFrozenColumnShadow(-1):(this.component.setFrozenColumnShadow(this.table.frozenColCount-1),this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount)),this.table.stateManager.checkFrozen(),this.updateContainer(),this.createFrameBorder(),this.updateBorderSizeAndPosition(),this.component.updateScrollBar(),handleTextStick(this.table),this.updateNextFrame()}dealWidthMode(){var r=this.table;if(\\\"adaptive\\\"===r.widthMode){r._clearColRangeWidthsMap();var n=r.tableNoFrameWidth;let e=0;for(let t=0;t<r.colCount;t++)(t<r.rowHeaderLevelCount||r.isPivotChart()&&t>=r.colCount-r.rightFrozenColCount)&&(e+=r.getColWidth(t));var o=r.rowHeaderLevelCount,a=r.isPivotChart()?r.colCount-r.rightFrozenColCount:r.colCount;getAdaptiveWidth(n-e,o,a,!1,[],r,!0)}else if(r.autoFillWidth){r._clearColRangeWidthsMap();n=r.tableNoFrameWidth;let e=0,t=0;for(let i=0;i<r.colCount;i++){var l=r.getColWidth(i);(i<r.rowHeaderLevelCount||r.isPivotChart()&&i>=r.colCount-r.rightFrozenColCount)&&(e+=l),t+=l}t<n&&t>e&&(o=r.rowHeaderLevelCount,a=r.isPivotChart()?r.colCount-r.rightFrozenColCount:r.colCount,getAdaptiveWidth(n-e,o,a,!1,[],r,!0))}let t=0,i=(this.bodyGroup.forEachChildrenSkipChild(e=>{t+=e.attribute.width}),this.bodyGroup.setAttribute(\\\"width\\\",t),0),s=(this.colHeaderGroup.forEachChildrenSkipChild(e=>{i+=e.attribute.width}),this.colHeaderGroup.setAttribute(\\\"width\\\",i),0),h=(this.rowHeaderGroup.forEachChildrenSkipChild(e=>{s+=e.attribute.width}),this.rowHeaderGroup.setAttribute(\\\"width\\\",s),0);this.cornerHeaderGroup.forEachChildrenSkipChild(e=>{h+=e.attribute.width}),this.cornerHeaderGroup.setAttribute(\\\"width\\\",h),this.colHeaderGroup.setAttribute(\\\"x\\\",this.cornerHeaderGroup.attribute.width),this.rowHeaderGroup.setAttribute(\\\"y\\\",this.cornerHeaderGroup.attribute.height),this.bodyGroup.setAttributes({x:this.rowHeaderGroup.attribute.width,y:this.colHeaderGroup.attribute.height})}dealHeightMode(){var r=this.table;if(\\\"adaptive\\\"===r.heightMode){r._clearRowRangeHeightsMap();var n=r.getRowsHeight(0,r.columnHeaderLevelCount-1),o=r.isPivotChart()?r.getBottomFrozenRowsHeight():0,a=r.tableNoFrameHeight-n-o,l=r.columnHeaderLevelCount,s=r.isPivotChart()?r.rowCount-r.bottomFrozenRowCount:r.rowCount;let e=0;for(let t=l;t<s;t++)e+=r.getRowHeight(t);var h=a/e;for(let i=l;i<s;i++){var d=i===s-1?a-r.getRowsHeight(l,s-2):Math.round(r.getRowHeight(i)*h);this.setRowHeight(i,d)}}else if(r.autoFillHeight){r._clearRowRangeHeightsMap();var u=r.tableNoFrameHeight;let t=0,i=0;for(let e=0;e<r.rowCount;e++){var c=r.getRowHeight(e);(e<r.columnHeaderLevelCount||r.isPivotChart()&&e>=r.rowCount-r.bottomFrozenRowCount)&&(i+=c),t+=c}if((null!=(n=this._dealAutoFillHeightOriginRowsHeight)?n:t)<u&&0<t-i){var g=r.columnHeaderLevelCount,p=r.isPivotChart()?r.rowCount-r.bottomFrozenRowCount:r.rowCount,f=(u-i)/(t-i);for(let e=g;e<p;e++){var m=e===p-1?u-i-r.getRowsHeight(g,p-2):Math.round(r.getRowHeight(e)*f);this.setRowHeight(e,m)}}}}dealFrozen(){dealFrozen(this)}resetFrozen(){resetFrozen(this)}updateCellLayoutWidthCertainWidth(e,a,l){const s=e.attribute.width;let h=!1;return e.forEachChildren((e,t)=>{var i=getCellMergeInfo(this.table,l,t+=a),i=(i?e=this.getCell(i.start.col,i.start.row):e.setAttribute(\\\"width\\\",s),this.table._getCellStyle(l,t)),i=getQuadProps(getProp2(\\\"padding\\\",i,l,t,this.table)),r=e.getChildByName(\\\"text\\\");let n=0,o=0;o=r?(n=r.AABBBounds.height()+(i[0]+i[2]),r.setAttribute(\\\"maxLineWidth\\\",s-(i[1]+i[3])),r.AABBBounds.height()+(i[0]+i[2])):(r=e.getChildAt(1),n=r.AABBBounds.height()+(i[0]+i[2]),r._cellWidth=s-(i[1]+i[3]),r.layout(),r.AABBBounds.height()+(i[0]+i[2]));r=this.table.getRowHeight(t);e.attribute.height!==o&&(e.setAttribute(\\\"height\\\",o),r===n||o>r)&&(h=!0)}),h}updateHeaderPosition(e,t,i,r,n){moveHeaderPosition(e,t,i,r,n,this.table)}updateContainerAttrWidthAndX(){var e,t=updateContainerChildrenX(this.cornerHeaderGroup,0),i=updateContainerChildrenX(this.rowHeaderGroup,0),r=this.colHeaderGroup.hasChildNodes()&&this.colHeaderGroup.firstChild?updateContainerChildrenX(this.colHeaderGroup,0<this.colHeaderGroup.firstChild.col?this.table.getColsWidth(null!=(r=this.table.frozenColCount)?r:0,this.colHeaderGroup.firstChild.col-1):0):0,n=this.bodyGroup.hasChildNodes()&&this.bodyGroup.firstChild?updateContainerChildrenX(this.bodyGroup,0<this.bodyGroup.firstChild.col?this.table.getColsWidth(null!=(n=this.table.frozenColCount)?n:0,this.bodyGroup.firstChild.col-1):0):0,o=updateContainerChildrenX(this.rightFrozenGroup,0);this.bottomFrozenGroup.hasChildNodes()&&this.bottomFrozenGroup.firstChild&&updateContainerChildrenX(this.bottomFrozenGroup,0<this.bottomFrozenGroup.firstChild.col?this.table.getColsWidth(null!=(e=this.table.frozenColCount)?e:0,this.bottomFrozenGroup.firstChild.col-1):0),updateContainerChildrenX(this.leftBottomCornerGroup,0),updateContainerChildrenX(this.rightTopCornerGroup,0),updateContainerChildrenX(this.rightBottomCornerGroup,0),this.cornerHeaderGroup.setDeltaWidth(t-this.cornerHeaderGroup.attribute.width),this.leftBottomCornerGroup.setDeltaWidth(t-this.leftBottomCornerGroup.attribute.width),this.colHeaderGroup.setDeltaWidth(r-this.colHeaderGroup.attribute.width),this.rowHeaderGroup.setDeltaWidth(i-this.rowHeaderGroup.attribute.width),this.bottomFrozenGroup.setDeltaWidth(r-this.bottomFrozenGroup.attribute.width),this.rightFrozenGroup.setDeltaWidth(o-this.rightFrozenGroup.attribute.width),this.rightTopCornerGroup.setDeltaWidth(o-this.rightTopCornerGroup.attribute.width),this.rightBottomCornerGroup.setDeltaWidth(o-this.rightBottomCornerGroup.attribute.width),this.bodyGroup.setDeltaWidth(n-this.bodyGroup.attribute.width),this.colHeaderGroup.setAttribute(\\\"x\\\",this.cornerHeaderGroup.attribute.width),this.bottomFrozenGroup.setAttribute(\\\"x\\\",this.table.getFrozenColsWidth()),this.bodyGroup.setAttribute(\\\"x\\\",this.rowHeaderGroup.attribute.width)}updateContainer(e=!1){e?this._needUpdateContainer||(this._needUpdateContainer=!0,setTimeout(()=>{this.updateContainerSync()},0)):(this._needUpdateContainer=!0,this.updateContainerSync())}updateContainerSync(){this._needUpdateContainer&&(this._needUpdateContainer=!1,this.updateContainerAttrWidthAndX(),this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame())}updateCellContentWhileResize(e,t){var i=this.table.getBodyColumnType(e,t),r=this.getCell(e,t);\\\"image\\\"!==i&&\\\"video\\\"!==i||updateImageCellContentWhileResize(r,e,t,this.table)}createFrameBorder(){this.updateTableSize();var e=!this.isPivot&&!this.table.internalProps.transpose;createFrameBorder(this.bodyGroup,this.table.theme.bodyStyle.frameStyle,this.bodyGroup.role,e?[!0,!0,!0,!1]:void 0),createFrameBorder(this.rowHeaderGroup,(this.isPivot||this.table.internalProps.transpose?this.table.theme.rowHeaderStyle:this.table.theme.bodyStyle).frameStyle,this.rowHeaderGroup.role,e?[!0,!1,!0,!0]:void 0),createFrameBorder(this.colHeaderGroup,this.table.theme.headerStyle.frameStyle,this.colHeaderGroup.role,e?[!0,!0,!0,!1]:void 0),createFrameBorder(this.cornerHeaderGroup,(this.isPivot?this.table.theme.cornerHeaderStyle:this.table.theme.headerStyle).frameStyle,this.cornerHeaderGroup.role,e?[!0,!1,!0,!0]:void 0),createFrameBorder(this.tableGroup,this.table.theme.frameStyle,this.tableGroup.role,void 0)}getResizeColAt(e,t,i,r=ResizeColumnHotSpotSize/2){let n;return i?(e<i.globalAABBBounds.x1+r?n={col:i.col-1,row:i.row,x:i.globalAABBBounds.x1}:i.globalAABBBounds.x2-r<e&&(n={col:i.col,row:i.row,x:i.globalAABBBounds.x2}),n&&0<this.table.rightFrozenColCount&&n.col===this.table.colCount-this.table.rightFrozenColCount-1&&this.table.tableNoFrameWidth-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth()+this.table.scrollLeft<this.bodyGroup.attribute.width&&(n.col=n.col+1,n.rightFrozen=!0)):n=this.table.getCellAt(e-r,t),n||{col:-1,row:-1}}getResizeRowAt(e,t,i,r=ResizeRowHotSpotSize/2){if(i){let e;if(t<i.globalAABBBounds.y1+r?e={col:i.col,row:i.row-1,y:i.globalAABBBounds.y1}:i.globalAABBBounds.y2-r<t&&(e={col:i.col,row:i.row,y:i.globalAABBBounds.y2}),e&&0<this.table.bottomFrozenRowCount&&e.row===this.table.rowCount-this.table.bottomFrozenRowCount-1&&this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight()+this.table.scrollTop<this.bodyGroup.attribute.height&&(e.row=e.row+1,e.bottomFrozen=!0),e)return e}return{col:-1,row:-1}}updateFrozen(){this.clear||(this.resetFrozen(),this.component.updateScrollBar())}dealWidthRightFrozen(e){this.clear?this.table.internalProps.rightFrozenColCount=e:dealRightFrozen(e,this)}dealWidthBottomFrozen(e){this.clear?this.table.internalProps.bottomFrozenRowCount=e:dealBottomFrozen(e,this)}updateBorderSizeAndPosition(){this.bodyGroup.border&&(this.bodyGroup.appendChild(this.bodyGroup.border),updateFrameBorderSize(this.bodyGroup),this.rowHeaderGroup.attribute.width,updateFrameBorder(this.bodyGroup,this.table.theme.bodyStyle.frameStyle)),this.colHeaderGroup.border&&(this.colHeaderGroup.appendChild(this.colHeaderGroup.border),updateFrameBorderSize(this.colHeaderGroup),this.cornerHeaderGroup.attribute.width,updateFrameBorder(this.colHeaderGroup,this.table.theme.headerStyle.frameStyle)),this.rowHeaderGroup.border&&(this.rowHeaderGroup.appendChild(this.rowHeaderGroup.border),updateFrameBorderSize(this.rowHeaderGroup)),this.cornerHeaderGroup.border&&(this.cornerHeaderGroup.appendChild(this.cornerHeaderGroup.border),updateFrameBorderSize(this.cornerHeaderGroup)),updateCornerRadius(this.table)}sortCell(){this.isPivot||(this.table.transpose?this.proxy.sortCellHorizontal():this.proxy.sortCellVertical())}getCellOverflowText(e,t){var i=this.getCell(e,t).getChildByName(\\\"text\\\",!0);if(i&&\\\"text\\\"===i.type){var r=isArray_default(i.attribute.text)?i.attribute.text.join(\\\"\\\"):i.attribute.text;let t=\\\"\\\";if(isString_default(i.cache.clipedText)?t=i.cache.clipedText:null!=(n=null==(n=i.cache.layoutData)?void 0:n.lines)&&n.forEach(e=>{t+=e.str}),t!==r)return r}else if(i&&\\\"richtext\\\"===i.type){var n=i;if(n.attribute.ellipsis&&n._frameCache&&n.attribute.height<n._frameCache.actualHeight)return n.attribute.textConfig.find(e=>e.text).text}return null}updateDrill(e,t,i,r,n){this.component.drillIcon.update(e,t,i,r,n,this)}updateCellContent(e,t){if(!this.clear)return updateCell(e,t,this.table)}setPixelRatio(e){this.stage.disableDirtyBounds(),this.stage.window.setDpr(e),this.stage.render(),this.stage.enableDirtyBounds()}updateRow(e,t,i=[]){this.table.internalProps.layoutMap.clearCellRangeMap();var r=deduplication(t.map(e=>e.row)).sort((e,t)=>e-t),n=deduplication(i.map(e=>e.row)).sort((e,t)=>e-t),r=this.table.getAllRowsHeight()-[...r,...n].reduce((e,t)=>e+this.table.getRowHeight(t),0)<=this.table.tableNoFrameHeight;if(updateRow(e,t,i,this.table),this.recalculateColWidths(),\\\"adaptive\\\"===this.table.heightMode||this.table.autoFillHeight&&(this.table.getAllRowsHeight()<=this.table.tableNoFrameHeight||r))this.table.scenegraph.recalculateRowHeights();else if(\\\"autoHeight\\\"===this.table.heightMode)for(let e=0;e<n.length;e++){var o=n[e],a=this.table.getRowHeight(o),l=computeRowHeight(o,0,this.table.colCount-1,this.table);(o>=this.proxy.rowStart&&o<=this.proxy.rowEnd||o>=this.table.rowCount-this.table.bottomFrozenRowCount&&o<=this.table.rowCount-1)&&this.table.scenegraph.updateRowHeight(o,l-a)}this.table.stateManager.checkFrozen(),this.isPivot||this.table.transpose?this.table.options.frozenColCount?this.component.setFrozenColumnShadow(this.table.frozenColCount-1):this.table.options.rightFrozenColCount&&this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount):(this.component.setFrozenColumnShadow(this.table.frozenColCount-1),this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount)),this.component.updateScrollBar(),this.updateNextFrame()}updateCol(e,t,i=[]){updateCol(e,t,i,this.table),this.recalculateColWidths(),this.recalculateRowHeights(),this.table.stateManager.checkFrozen(),this.isPivot||this.table.transpose?this.table.options.frozenColCount?this.component.setFrozenColumnShadow(this.table.frozenColCount-1):this.table.options.rightFrozenColCount&&this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount):(this.component.setFrozenColumnShadow(this.table.frozenColCount-1),this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount)),this.component.updateScrollBar(),this.updateNextFrame()}getColumnGroupX(e){return e<this.table.rowHeaderLevelCount?this.table.getColsWidth(0,e-1):e<this.table.colCount-this.table.rightFrozenColCount?this.table.getColsWidth(this.table.rowHeaderLevelCount,e-1):e<this.table.colCount?this.table.getColsWidth(this.table.colCount-this.table.bottomFrozenRowCount,e-1):0}getCellGroupY(e){return e<this.table.columnHeaderLevelCount?this.table.getRowsHeight(0,e-1):e<this.table.rowCount-this.table.bottomFrozenRowCount?this.table.getRowsHeight(this.table.columnHeaderLevelCount,e-1):e<this.table.rowCount?this.table.getRowsHeight(this.table.rowCount-this.table.bottomFrozenRowCount,e-1):0}getCellGroupX(e){return e<this.table.rowHeaderLevelCount?this.table.getColsWidth(0,e-1):e<this.table.colCount-this.table.rightFrozenColCount?this.table.getColsWidth(this.table.rowHeaderLevelCount,e-1):e<this.table.colCount?this.table.getColsWidth(this.table.colCount-this.table.rightFrozenColCount,e-1):0}};function checkCellInSelect(e,t,i){for(let r=0;r<i.length;r++)if(cellInRange(i[r],e,t))return!0;return!1}function checkMultiCellInSelect(e,t,i,r){for(let n=0;n<i.length;n++)if(rangeIntersected(i[n],{start:e,end:t}))return!0;return!1}function updateCell2(i,e,t){var r=i.highPerformanceGetCell(e,t);if(\\\"cell\\\"===r.role&&isValid_default(r.mergeStartCol)&&isValid_default(r.mergeStartRow)&&isValid_default(r.mergeEndCol)&&isValid_default(r.mergeEndRow)){var{colStart:n,colEnd:o,rowStart:a,rowEnd:l}=getCellMergeRange(r,i);for(let t=n;t<=o;t++)for(let e=a;e<=l;e++)i.highPerformanceGetCell(t,e).addUpdateBoundTag()}else r.addUpdateBoundTag()}function clearColHover(e,t,i,r,n){var o=e.table;for(let l=0;l<o.columnHeaderLevelCount;l++)updateCell2(e,t,l);var a=e.getColGroup(t);return null!=a&&a.addUpdateBoundTag(),!0}function updateColHover(e,t,i,r,n,o){var a=e.table;for(let s=0;s<a.columnHeaderLevelCount;s++)updateCell2(e,t,s);var l=e.getColGroup(t);return null!=l&&l.addUpdateBoundTag(),!0}function clearRowHover(e,t,i,r,n){var o=e.table;for(let a=0;a<o.colCount;a++)updateCell2(e,a,i);return!0}function updateRowHover(e,t,i,r,n,o){var a=e.table;for(let l=0;l<a.colCount;l++)updateCell2(e,l,i);return!0}function clearSingleHover(e,t,i,r,n){return updateCell2(e,t,i),!0}function updateSingleHover(e,t,i,r,n){return updateCell2(e,t,i),!0}function updateHoverPosition(t,i,r){var e=t[\\\"table\\\"],n=e[\\\"scenegraph\\\"],{highlightScope:o,singleStyle:a,disableHeader:l,cellPos:s,cellPosContainHeader:h}=t.hover,d=s.col,u=s.row;if(o!==HighlightScope.none&&(!l||h.col===i&&h.row===r)||(c=h.col,g=h.row,n.hideHoverIcon(c,g),n.showHoverIcon(i,r),h.col=i,h.row=r),(l&&e.isHeader(i,r)||o===HighlightScope.none)&&(r=i=-1),d!==i||u!==r){n.deactivateChart(d,u),n.activateChart(i,r);let e=!1;var{ranges:c,highlightScope:g}=t.select;-1!==d&&-1!==u&&(e=clearHover(n,d,u,c,a,o,g),l||n.hideHoverIcon(d,u)),-1===i||-1===r?(s.col=-1,s.row=-1,!e||d===i&&u===r||t.table.scenegraph.updateNextFrame()):(o===HighlightScope.single?e=!!updateSingleHover(n,i,r,c,g)||e:o===HighlightScope.row?e=!!updateRowHover(n,i,r,c,g,a)||e:o===HighlightScope.column?e=!!updateColHover(n,i,r,c,g,a)||e:o===HighlightScope.cross&&(e=!!updateRowHover(n,i,r,c,g,a)||e,e=!!updateColHover(n,i,r,c,g,a)||e),o===HighlightScope.none||l||n.showHoverIcon(i,r),s.col=i,s.row=r,e&&t.table.scenegraph.updateNextFrame())}}function clearHover(e,t,i,r,n,o,a){let l=!1;return o===HighlightScope.single?l=!!clearSingleHover(e,t,i,r,a)||l:o===HighlightScope.row?l=!!clearRowHover(e,t,i,r,a)||l:o===HighlightScope.column?l=!!clearColHover(e,t,i,r,a)||l:o===HighlightScope.cross&&(l=!!clearRowHover(e,t,i,r,a)||l,l=!!clearColHover(e,t,i,r,a)||l),l}function dealFreeze(e,t,i){!(0<i.frozenColCount)||e!==i.frozenColCount-1?i.setFrozenColCount(e+1):i.setFrozenColCount(0)}function dealSort(t,i,r,e){let n,o=null,a=!1;if(Array.isArray(r.sortState))for(let e=0;e<r.sortState.length&&((n=r.sortState[e])&&(o=r._getHeaderCellBySortState(n)),!(a=o?isTarget(t,i,o.col,o.row,r):a));e++);else n=r.sortState,(o=n?r._getHeaderCellBySortState(n):o)&&(a=isTarget(t,i,o.col,o.row,r));var l=r.getHeaderDefine(t,i);n&&a&&null!=l&&l.sort?n.order=\\\"asc\\\"===n.order?\\\"desc\\\":\\\"desc\\\"===n.order?\\\"normal\\\":\\\"asc\\\":null!=l&&l.sort?n={field:r.getHeaderField(t,i),order:\\\"asc\\\"}:a&&null!=l&&l.showSort||(n={field:r.getHeaderField(t,i),order:\\\"normal\\\"}),n.event=e,r.fireListeners(TABLE_EVENT_TYPE.SORT_CLICK,n).includes(!1)||(r.internalProps.sortState=n,r.stateManager.setSortState(n),null!=l&&l.sort&&executeSort(n,r,l),r.internalProps.layoutMap.clearCellRangeMap(),r.scenegraph.sortCell(),r.stateManager.updateSelectPos(-1,-1))}function executeSort(t,e,i){var r=e.internalProps.layoutMap.headerObjects.find(e=>e&&e.field===t.field);r&&(r=r[\\\"field\\\"],null!==r)&&(\\\"function\\\"==typeof i.sort?e.dataSource.sort(r,t.order||\\\"asc\\\",i.sort):e.dataSource.sort(r,t.order||\\\"asc\\\",defaultOrderFn))}function isTarget(e,t,i,r,n){return n._getLayoutCellId(e,t)===n._getLayoutCellId(i,r)}function updateSelectPosition(t,i,r,e,n,o,a=!1){var{table:l,interactionState:s}=t,h=l[\\\"scenegraph\\\"],{highlightScope:d,disableHeader:u,cellPos:c}=t.select;if((u&&l.isHeader(i,r)||\\\"none\\\"===d)&&(r=i=-1),-1===i||-1===r||a||(s===InteractionState.grabing&&0<t.select.ranges.length?(i>(u=t.select.ranges[t.select.ranges.length-1]).start.col&&i>u.end.col&&l._makeVisibleCell(i+1,r),r>u.start.row&&r>u.end.row&&l._makeVisibleCell(i,r+1),i<u.start.col&&i<u.end.col&&l._makeVisibleCell(i-1,r),r<u.start.row&&r<u.end.row&&l._makeVisibleCell(i,r-1)):l._makeVisibleCell(i,r)),o){t.select.ranges=[],h.deleteAllSelectBorder(),t.select.ranges.push({start:{col:0,row:0},end:{col:l.colCount-1,row:l.rowCount-1}});d=t.select.ranges[t.select.ranges.length-1];h.updateCellSelectBorder(d.start.col,d.start.row,d.end.col,d.end.row,!1)}else if(-1===c.col||-1===c.row||-1!==i&&-1!==r)if(s!==InteractionState[\\\"default\\\"]||l.eventManager.isDraging||l.stateManager.isResizeCol()){if((s===InteractionState.grabing||l.eventManager.isDraging)&&!l.stateManager.isResizeCol()){let e=!0;-1===c.col&&(c.col=i),-1===c.row&&(c.row=r),c.col=i,c.row=r;u=t.select.ranges[t.select.ranges.length-1];u&&(l.internalProps.layoutMap.isSeriesNumberInBody(u.start.col,u.start.row)?(e=!1,u.end={col:l.colCount-1,row:r}):t.fillHandle.isFilling?\\\"top\\\"===t.fillHandle.direction?r===t.fillHandle.beforeFillMinRow&&r===t.fillHandle.beforeFillMaxRow?u.start.row=u.end.row=r:r<=t.fillHandle.beforeFillMinRow?(u.start.row<u.end.row&&(d=u.start.row,u.start.row=u.end.row,u.end.row=d),u.end.row=r):r===t.fillHandle.beforeFillMaxRow&&(u.start.row>u.end.row?u.start.row=r:u.end.row=r):\\\"bottom\\\"===t.fillHandle.direction?r>=t.fillHandle.beforeFillMaxRow&&(u.start.row>u.end.row&&(s=u.start.row,u.start.row=u.end.row,u.end.row=s),u.end.row=r):\\\"left\\\"===t.fillHandle.direction?i===t.fillHandle.beforeFillMinCol&&i===t.fillHandle.beforeFillMaxCol?u.start.col=u.end.col=i:i<=t.fillHandle.beforeFillMinCol?(u.start.col<u.end.col&&(d=u.start.col,u.start.col=u.end.col,u.end.col=d),u.end.col=i):i===t.fillHandle.beforeFillMaxCol&&(u.start.col>u.end.col?u.start.col=i:u.end.col=i):\\\"right\\\"===t.fillHandle.direction&&i>=t.fillHandle.beforeFillMaxCol&&(u.start.col>u.end.col&&(s=u.start.col,u.start.col=u.end.col,u.end.col=s),u.end.col=i):u.end={col:i,row:r},h.updateCellSelectBorder(u.start.col,u.start.row,u.end.col,u.end.row,e))}}else{var g,d=t.select.ranges[t.select.ranges.length-1];if(e&&d)\\\"cell\\\"!==t.select.headerSelectMode&&l.isColumnHeader(i,r)?(s=Math.min(d.start.col,d.end.col,i),u=Math.max(d.start.col,d.end.col,i),p=Math.min(d.start.row,d.end.row,r),g=l.rowCount-1,d.start={col:s,row:p},d.end={col:u,row:g}):\\\"cell\\\"!==t.select.headerSelectMode&&l.isRowHeader(i,r)?(s=Math.min(d.start.col,d.end.col,i),p=l.colCount-1,u=Math.min(d.start.row,d.end.row,r),g=Math.max(d.start.row,d.end.row,r),d.start={col:s,row:u},d.end={col:p,row:g}):d.end={col:i,row:r},h.deleteLastSelectedRangeComponents(),h.updateCellSelectBorder(d.start.col,d.start.row,d.end.col,d.end.row);else{let e=!0;-1===c.col||-1===c.row||n||(t.select.ranges=[],h.deleteAllSelectBorder()),\\\"cell\\\"!==t.select.headerSelectMode&&l.isColumnHeader(i,r)?(s=l.getCellRange(i,r),t.select.ranges.push({start:{col:s.start.col,row:r},end:{col:s.end.col,row:l.rowCount-1}})):\\\"cell\\\"!==t.select.headerSelectMode&&l.isRowHeader(i,r)?(u=l.getCellRange(i,r),t.select.ranges.push({start:{col:i,row:u.start.row},end:{col:l.colCount-1,row:u.end.row}})):l.internalProps.layoutMap.isSeriesNumberInHeader(i,r)?(e=!1,t.select.ranges.push({start:{col:0,row:0},end:{col:l.colCount-1,row:l.rowCount-1}})):l.internalProps.layoutMap.isSeriesNumberInBody(i,r)?(e=!1,t.select.ranges.push({start:{col:i,row:r},end:{col:l.colCount-1,row:r}})):0<=i&&0<=r&&(p=l.getCellRange(i,r),t.select.ranges.push({start:{col:p.start.col,row:p.start.row},end:{col:p.end.col,row:p.end.row}})),c.col=i,c.row=r;var p,d=null==(g=t.select.ranges)?void 0:g[t.select.ranges.length-1];d&&h.updateCellSelectBorder(d.start.col,d.start.row,d.end.col,d.end.row,e)}}else c.col=-1,c.row=-1,t.select.ranges=[],h.deleteAllSelectBorder();h.updateNextFrame()}function selectEnd(e){e.moveSelectingRangeComponentsToSelectedRangeComponents()}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var PIVOT_TABLE_EVENT_TYPE=extend(TABLE_EVENT_TYPE,{PIVOT_SORT_CLICK:\\\"pivot_sort_click\\\",DRILLMENU_CLICK:\\\"drillmenu_click\\\"}),PIVOT_CHART_EVENT_TYPE=extend(TABLE_EVENT_TYPE,{VCHART_EVENT_TYPE:\\\"vchart_event_type\\\"});function updateDrill(e,t,i,r,n){var o=n.getCellLocation(e,t);let a=0,l=0,s=!1;\\\"columnHeader\\\"===o?(a=n.getColsWidth(0,n.rowHeaderLevelCount-1)-(0===n.frozenColCount?n.scrollLeft:0),l=n.getRowsHeight(0,t-1)+n.getRowHeight(t)/2,s=!0):\\\"rowHeader\\\"===o&&(l=n.getRowsHeight(0,n.columnHeaderLevelCount-1),a=n.getColsWidth(0,e-1)+n.getColWidth(e)/2,s=!0),n.scenegraph.updateDrill(s,a,l,i,r)}function clearChartHover(e,t,i){var r=i.scenegraph.getCell(e,t).getChildByName(\\\"sparkline\\\"),n=null==r?void 0:r.getChildByName(\\\"highlight-line\\\"),r=null==r?void 0:r.getChildByName(\\\"highlight-symbol\\\");n&&n.setAttributes({visible:!1,pickable:!1}),r&&r.setAttributes({visible:!1,pickable:!1}),i.scenegraph.updateNextFrame()}function updateChartHover(e,t,i,r,n){var o=n.scenegraph.getCell(e,t).getChildByName(\\\"sparkline\\\"),a=null==o?void 0:o.getChildByName(\\\"sparkline-line\\\"),l=null==o?void 0:o.getChildByName(\\\"sparkline-symbol-group\\\");if(!a)return!1;var s,h=a.bandwidth,d=a.min,u=a.max,c=a.attribute.points;let g;i-=o.globalAABBBounds.x1,o.globalAABBBounds.y1;for(let v=0;v<c.length;v++){var{x:p,y:f,defined:m,rawData:b}=c[v];if(Math.abs(i-p)<h/2&&(g={point:c[v],points:c,pointsBandWidth:h,pointData:b},m)){var b=o.getChildByName(\\\"highlight-line\\\"),b=(b?b.setAttributes({points:[{x:p,y:u},{x:p,y:d}],visible:!0,pickable:!0}):((m=createLine({points:[{x:p,y:u},{x:p,y:d}],lineWidth:null==(m=a.hover)?void 0:m.strokeWidth,stroke:null==(b=a.hover)?void 0:b.stroke})).name=\\\"highlight-line\\\",o.addChild(m)),o.getChildByName(\\\"highlight-symbol\\\"));b?b.setAttributes({x:p,y:f,visible:!0,pickable:!0}):((m=createSymbol({x:p,y:f,stroke:l.hover.stroke,lineWidth:l.hover.strokeWidth,fill:l.hover.fill,size:2*l.hover.size,symbolType:\\\"circle\\\"})).name=\\\"highlight-symbol\\\",o.addChild(m));break}}return n.scenegraph.updateNextFrame(),g&&(s={col:e,row:t,field:n.getHeaderField(e,t),value:n.getCellValue(e,t),dataValue:n.getCellOriginValue(e,t),cellHeaderPaths:n.internalProps.layoutMap.getCellHeaderPaths(e,t),title:n.getBodyColumnDefine(e,t).title,cellRange:n.getCellRelativeRect(e,t),sparkline:{pointData:g.pointData},scaleRatio:n.canvas.getBoundingClientRect().width/n.canvas.offsetWidth},n.fireListeners(TABLE_EVENT_TYPE.MOUSEOVER_CHART_SYMBOL,s)),!0}function adjustMoveHeaderTarget(e,t,i){var r,n,o=i.getCellRange(e.col,e.row);return i.isColumnHeader(e.col,e.row)?(r=i.getCellRange(t.col,o.start.row),t.row>=i.columnHeaderLevelCount&&(t.row=i.columnHeaderLevelCount-1),t.col>=e.col?t.col=r.end.col:t.col=r.start.col):i.isRowHeader(e.col,e.row)&&(r=i.internalProps.layoutMap,o=i.getCellRange(o.start.col,t.row),t.col>=i.rowHeaderLevelCount+r.leftRowSeriesNumberColumnCount&&(t.col=i.rowHeaderLevelCount+r.leftRowSeriesNumberColumnCount-1),\\\"tree\\\"===r.rowHierarchyType?(n=r.getCellHeaderPathsWidthTreeNode(e.col,e.row).rowHeaderPaths,r=r.getCellHeaderPathsWidthTreeNode(t.col,t.row).rowHeaderPaths,n.length<=r.length&&(n=r[n.length-1])&&(t.row>=e.row?t.row=n.startInTotal+n.size-1+i.columnHeaderLevelCount:t.row=n.startInTotal+i.columnHeaderLevelCount)):t.row>=e.row?t.row=o.end.row:t.row=o.start.row),t}function startMoveCol(e,t,i,r,n){var o;\\\"canMoveHeaderPosition\\\"in n.table.internalProps.layoutMap&&(n.columnMove.moving=!0,n.columnMove.colSource=e,n.columnMove.rowSource=t,n.columnMove.x=i-n.table.tableX,n.columnMove.y=r-n.table.tableY,o=\\\"columnHeader\\\"===(o=n.table.getCellLocation(e,t))?n.columnMove.x:\\\"rowHeader\\\"===o||n.table.internalProps.layoutMap.isSeriesNumberInBody(e,t)?n.columnMove.y:0,n.table.scenegraph.component.showMoveCol(e,t,o),n.table.stateManager.updateSelectPos(-1,-1),n.table.scenegraph.updateNextFrame())}function updateMoveCol(n,o,a,l,s){if(\\\"canMoveHeaderPosition\\\"in s.table.internalProps.layoutMap){var h=adjustMoveHeaderTarget({col:s.columnMove.colSource,row:s.columnMove.rowSource},{col:n,row:o},s.table);s.columnMove.x=a-s.table.tableX,s.columnMove.y=l-s.table.tableY,s.columnMove.colTarget=h.col,s.columnMove.rowTarget=h.row;let e,t,i,r;s.table.internalProps.layoutMap.canMoveHeaderPosition({col:s.columnMove.colSource,row:s.columnMove.rowSource},{col:s.columnMove.colTarget,row:s.columnMove.rowTarget})?s.updateCursor(\\\"grabbing\\\"):s.updateCursor(\\\"not-allowed\\\");var d=s.table.getCellLocation(s.columnMove.colSource,s.columnMove.rowSource);\\\"columnHeader\\\"===d?(t=s.columnMove.x,e=s.table.isLeftFrozenColumn(n)?s.columnMove.colTarget>=s.columnMove.colSource?s.table.getColsWidth(0,s.columnMove.colTarget):s.table.getColsWidth(0,s.columnMove.colTarget-1):s.table.isRightFrozenColumn(n)?s.table.tableNoFrameWidth-s.table.getColsWidth(h.col+1,s.table.colCount-1):(s.columnMove.colTarget>=s.columnMove.colSource?s.table.getColsWidth(0,s.columnMove.colTarget):s.table.getColsWidth(0,s.columnMove.colTarget-1))-s.table.stateManager.scroll.horizontalBarPos):\\\"rowHeader\\\"!==d&&!s.table.internalProps.layoutMap.isSeriesNumberInBody(n,o)||(r=s.columnMove.y,i=s.table.isFrozenRow(o)?s.columnMove.rowTarget>=s.columnMove.rowSource?s.table.getRowsHeight(0,s.columnMove.rowTarget):s.table.getRowsHeight(0,s.columnMove.rowTarget-1):s.table.isBottomFrozenRow(o)?s.table.tableNoFrameHeight-s.table.getRowsHeight(h.row+1,s.table.rowCount-1):(s.columnMove.rowTarget>=s.columnMove.rowSource?s.table.getRowsHeight(0,s.columnMove.rowTarget):s.table.getRowsHeight(0,s.columnMove.rowTarget-1))-s.table.stateManager.scroll.verticalBarPos),s.table.scenegraph.component.updateMoveCol(t,e,r,i),s.table.scenegraph.updateNextFrame()}}function endMoveCol(t){if(\\\"canMoveHeaderPosition\\\"in t.table.internalProps.layoutMap&&t.columnMove.moving&&0<=t.columnMove.colSource&&0<=t.columnMove.rowSource&&0<=t.columnMove.colTarget&&0<=t.columnMove.rowTarget){var i=t.table.getCellRange(t.columnMove.colSource,t.columnMove.rowSource),r=t.table.getCellRange(t.columnMove.colTarget,t.columnMove.rowTarget),n=t.table._moveHeaderPosition({col:t.columnMove.colSource,row:t.columnMove.rowSource},{col:t.columnMove.colTarget,row:t.columnMove.rowTarget});if(n){t.table.internalProps.layoutMap.clearCellRangeMap();var o=t.table.getCellRange(t.columnMove.colSource,t.columnMove.rowSource),a=t.table.getCellRange(t.columnMove.colTarget,t.columnMove.rowTarget),l=Math.min(o.start.col,a.start.col,i.start.col,r.start.col),s=Math.max(o.end.col,a.end.col,i.end.col,r.end.col),h=Math.min(o.start.row,a.start.row,i.start.row,r.start.row);let e=Math.max(o.end.row,a.end.row,i.end.row,r.end.row);\\\"row\\\"===n.moveType&&\\\"tree\\\"===t.table.internalProps.layoutMap.rowHierarchyType&&(e=n.targetIndex>n.sourceIndex?e+n.targetSize-1:e+n.sourceSize-1),!t.table.transpose&&t.table.internalProps.layoutMap.isSeriesNumberInBody(t.columnMove.colSource,t.columnMove.rowSource)&&t.table.changeRecordOrder(n.sourceIndex,n.targetIndex),\\\"column\\\"===n.moveType?clearWidthsAndHeightsCache(l,s,0,-1,t.table):clearWidthsAndHeightsCache(0,-1,h,e,t.table),t.table.clearCellStyleCache(),t.table.internalProps.layoutMap.isSeriesNumberInBody(t.columnMove.colSource,t.columnMove.rowSource)?t.table.scenegraph.updateHeaderPosition(t.table.scenegraph.proxy.colStart,t.table.scenegraph.proxy.colEnd,t.table.scenegraph.proxy.rowStart,t.table.scenegraph.proxy.rowEnd,n.moveType):\\\"column\\\"===n.moveType?t.table.scenegraph.updateHeaderPosition(l,s,0,-1,n.moveType):t.table.scenegraph.updateHeaderPosition(0,-1,h,e,n.moveType),\\\"adjustFrozenCount\\\"===t.table.internalProps.frozenColDragHeaderMode&&t.table.isListTable()&&(t.table.isLeftFrozenColumn(t.columnMove.colTarget)&&!t.table.isLeftFrozenColumn(t.columnMove.colSource)?t.table.frozenColCount+=o.end.col-o.start.col+1:t.table.isLeftFrozenColumn(t.columnMove.colSource)&&!t.table.isLeftFrozenColumn(t.columnMove.colTarget)&&(t.table.frozenColCount-=o.end.col-o.start.col+1),t.table.isRightFrozenColumn(t.columnMove.colTarget)&&!t.table.isRightFrozenColumn(t.columnMove.colSource)?t.table.rightFrozenColCount+=o.end.col-o.start.col+1:t.table.isRightFrozenColumn(t.columnMove.colSource)&&!t.table.isRightFrozenColumn(t.columnMove.colTarget)&&(t.table.rightFrozenColCount-=o.end.col-o.start.col+1))}t.updateCursor()}setTimeout(()=>{t.columnMove.moving=!1,delete t.columnMove.colSource,delete t.columnMove.rowSource,delete t.columnMove.colTarget,delete t.columnMove.rowTarget},0),t.table.scenegraph.component.hideMoveCol(),t.columnResize.col<t.table.frozenColCount&&!t.table.isPivotTable()&&!t.table.transpose?(t.table.scenegraph.component.setFrozenColumnShadow(t.table.frozenColCount-1,t.columnResize.isRightFrozen),t.table.scenegraph.component.setRightFrozenColumnShadow(t.table.colCount-t.table.rightFrozenColCount)):t.columnResize.col>=t.table.colCount-t.table.rightFrozenColCount&&!t.table.isPivotTable()&&!t.table.transpose?t.table.scenegraph.component.setRightFrozenColumnShadow(t.table.colCount-t.table.rightFrozenColCount):t.table.options.frozenColCount?t.table.scenegraph.component.setFrozenColumnShadow(t.table.frozenColCount-1):t.table.options.rightFrozenColCount&&t.table.scenegraph.component.setRightFrozenColumnShadow(t.table.colCount-t.table.rightFrozenColCount),t.table.scenegraph.updateNextFrame()}function clearWidthsAndHeightsCache(e,t,i,r,n){for(let o=e;o<=t;o++)n._clearColRangeWidthsMap(o);for(let a=i;a<=r;a++)n._clearRowRangeHeightsMap(a)}function getIconAndPositionFromTarget(e){var t;return e&&(t=null!=(t=e.role)&&t.startsWith(\\\"icon\\\")?e:\\\"richtext\\\"===e.type?e._currentHoverIcon:void 0)?\\\"richtext\\\"===e.type?{icon:t,position:{left:e.globalAABBBounds.x1+t.globalAABBBounds.x1,right:e.globalAABBBounds.x1+t.globalAABBBounds.x2,top:e.globalAABBBounds.y1+t.globalAABBBounds.y1,bottom:e.globalAABBBounds.y1+t.globalAABBBounds.y2,width:t.globalAABBBounds.x2-t.globalAABBBounds.x1,height:t.globalAABBBounds.y2-t.globalAABBBounds.y1},type:\\\"richtext-icon\\\"}:{icon:t,position:{left:t.globalAABBBounds.x1,right:t.globalAABBBounds.x2,top:t.globalAABBBounds.y1,bottom:t.globalAABBBounds.y2,width:t.globalAABBBounds.x2-t.globalAABBBounds.x1,height:t.globalAABBBounds.y2-t.globalAABBBounds.y1},type:\\\"icon\\\"}:void 0}function updateResizeColumn(e,t,i){e=Math.ceil(e),t=Math.ceil(t);let r=i.columnResize.isRightFrozen?i.columnResize.x-e:e-i.columnResize.x;if(!(Math.abs(r)<1)){var n=i.table.getColWidth(i.columnResize.col),o=n,a=(o+=r,i.table.getMinColWidth(i.columnResize.col)),l=i.table.getMaxColWidth(i.columnResize.col);if(o<a||l<o){if(n===a||n===l)return;r=l-n<n-a?l-n:a-n}if(i.table.getColWidth(i.columnResize.col)+r<i.table.internalProps.limitMinWidth&&(o=i.table.internalProps.limitMinWidth,r=o-i.table.getColWidth(i.columnResize.col)),\\\"adaptive\\\"===i.table.widthMode&&i.columnResize.col<i.table.colCount-1){l=i.table.getColWidth(i.columnResize.col+1),a=i.table.getMinColWidth(i.columnResize.col+1),n=i.table.getMaxColWidth(i.columnResize.col+1),o=l;if((o-=r)<a||n<o){if(l===a||l===n)return;r=n-l<l-a?n-l:a-l}o-r<i.table.internalProps.limitMinWidth&&(r=o-i.table.internalProps.limitMinWidth)}r=Math.ceil(r),(i.columnResize.col<i.table.rowHeaderLevelCount||i.columnResize.col>=i.table.colCount-i.table.rightFrozenColCount?updateResizeColForColumn:\\\"indicator\\\"===i.table.internalProps.columnResizeType?updateResizeColForIndicator:\\\"indicatorGroup\\\"===i.table.internalProps.columnResizeType?updateResizeColForIndicatorGroup:\\\"all\\\"===i.table.internalProps.columnResizeType?updateResizeColForAll:updateResizeColForColumn)(r,i),i.columnResize.x=e,i.table.scenegraph.component.updateResizeCol(i.columnResize.col,t,i.columnResize.isRightFrozen),i.columnResize.col<i.table.frozenColCount&&!i.table.isPivotTable()&&!i.table.transpose?i.table.scenegraph.component.setFrozenColumnShadow(i.table.frozenColCount-1,i.columnResize.isRightFrozen):i.columnResize.col>=i.table.colCount-i.table.rightFrozenColCount&&!i.table.isPivotTable()&&!i.table.transpose?i.table.scenegraph.component.setRightFrozenColumnShadow(i.table.colCount-i.table.rightFrozenColCount):i.table.options.frozenColCount?i.table.scenegraph.component.setFrozenColumnShadow(i.table.frozenColCount-1):i.table.options.rightFrozenColCount&&i.table.scenegraph.component.setRightFrozenColumnShadow(i.table.colCount-i.table.rightFrozenColCount),i.table.scenegraph.updateNextFrame()}}function updateResizeColForColumn(e,t){\\\"adaptive\\\"===t.table.widthMode&&t.columnResize.col<t.table.colCount-1?(t.table.scenegraph.updateColWidth(t.columnResize.col,e),t.table.scenegraph.updateColWidth(t.columnResize.col+1,-e),t.table.internalProps._widthResizedColMap.add(t.columnResize.col),t.table.internalProps._widthResizedColMap.add(t.columnResize.col+1)):(t.table.scenegraph.updateColWidth(t.columnResize.col,e),t.table.internalProps._widthResizedColMap.add(t.columnResize.col))}function updateResizeColForAll(e,t){var i=t.table.internalProps.layoutMap;for(let n=t.table.frozenColCount;n<t.table.colCount-t.table.rightFrozenColCount;n++){if(!(t.table.internalProps.transpose||t.table.isPivotTable()&&!i.indicatorsAsCol)){var r=i.getBody(n,t.table.columnHeaderLevelCount);if(null!=r&&r.disableColumnResize)continue}t.table.scenegraph.updateColWidth(n,e),t.table.internalProps._widthResizedColMap.add(n)}}function updateResizeColForIndicator(e,t){var i,r=t.table.internalProps.layoutMap;let n,o,a;r.indicatorsAsCol?n=r.getIndicatorKey(t.columnResize.col,t.table.columnHeaderLevelCount):(i=(i=r.getCellHeaderPaths(t.columnResize.col,t.table.columnHeaderLevelCount-1)).colHeaderPaths[i.colHeaderPaths.length-1],o=i.dimensionKey,a=i.value);for(let s=t.table.rowHeaderLevelCount;s<t.table.colCount-t.table.rightFrozenColCount;s++){var l=r.getIndicatorKey(s,t.table.columnHeaderLevelCount);r.indicatorsAsCol&&l===n?(t.table.scenegraph.updateColWidth(s,e),t.table.internalProps._widthResizedColMap.add(s)):r.indicatorsAsCol||(l=null==(l=r.getCellHeaderPaths(s,t.table.columnHeaderLevelCount-1))?void 0:l.colHeaderPaths[l.colHeaderPaths.length-1])&&o===l.dimensionKey&&a===l.value&&(t.table.scenegraph.updateColWidth(s,e),t.table.internalProps._widthResizedColMap.add(s))}}function updateResizeColForIndicatorGroup(e,t){var i=t.table.internalProps.layoutMap,r=i.getCellHeaderPaths(t.columnResize.col,t.table.columnHeaderLevelCount),r=i.getHeadNode(r.colHeaderPaths.slice(0,r.colHeaderPaths.length-1)),n=r.startInTotal+t.table.frozenColCount,o=r.startInTotal+t.table.frozenColCount+r.size-1,a=t.table.getColsWidth(n,o),l=e;for(let h=n;h<=o;h++){if(!(t.table.internalProps.transpose||t.table.isPivotTable()&&!i.indicatorsAsCol)){var s=i.getBody(h,t.table.columnHeaderLevelCount);if(null!=s&&s.disableColumnResize)continue}let e=t.table.getColWidth(h)/a*l;0<e&&e<.5?e=.5:e<0&&-.5<=e&&(e=-.5),t.table.scenegraph.updateColWidth(h,e),t.table.internalProps._widthResizedColMap.add(h)}}function setRadioState(e,t,i,r,n,o){var a=o.table.getRecordShowIndexByCell(e,t);0<=a&&(a=o.table.dataSource.getIndexKey(a),\\\"column\\\"===r?isNumber_default(n)?(o.radioState[i]={},o.radioState[i][a]=n):o.radioState[i]=a:(o.radioState[i]||(o.radioState[i]={}),isNumber_default(n)?o.radioState[i][a]=n:o.radioState[i][a]=!0))}function getCellRadioState(e,t,i){var r=i.getBodyColumnDefine(e,t),r=null==r?void 0:r.field,n=i.getCellType(e,t);if(isValid_default(r)&&\\\"checkbox\\\"===n){n=i.dataSource.getIndexKey(i.getRecordShowIndexByCell(e,t)),r=null==(o=i.stateManager.radioState)?void 0:o[r];if(isNumber_default(r)){if(r===n)return!0}else if(isObject_default(r)){var o=r[n];if(isNumber_default(o))return o}}return!1}function syncRadioState(e,t,i,r,n,o,a){var l,s=a.table.getRecordShowIndexByCell(e,t);if(0<=s){s=a.table.dataSource.getIndexKey(s);if(\\\"column\\\"===r){if(!isValid_default(a.radioState[i])&&o)return isNumber_default(n)?(a.radioState[i]={},a.radioState[i][s]=n):a.radioState[i]=s,!0;if(isNumber_default(a.radioState[i])&&!isNumber_default(n))return a.radioState[i]===s;if(isNumber_default(a.radioState[i])&&isNumber_default(n))return!1;if(isObject_default(a.radioState[i])&&!isNumber_default(n))return!1;if(isObject_default(a.radioState[i])&&isNumber_default(n))return a.radioState[i][s]===n}else if(\\\"cell\\\"===r){if(!isValid_default(a.radioState[i])&&o)return a.radioState[i]={},isNumber_default(n)?a.radioState[i][s]=n:a.radioState[i][s]=!0,!0;if(!isValid_default(null==(l=a.radioState[i])?void 0:l[s])&&o)return isNumber_default(n)?a.radioState[i][s]=n:a.radioState[i][s]=!0,!0;if(isBoolean_default(null==(l=a.radioState[i])?void 0:l[s])&&!isNumber_default(n))return a.radioState[i][s];if(isBoolean_default(null==(l=a.radioState[i])?void 0:l[s])&&isNumber_default(n))return!1;if(isNumber_default(null==(l=a.radioState[i])?void 0:l[s])&&!isNumber_default(n))return!1;if(isNumber_default(null==(l=a.radioState[i])?void 0:l[s])&&isNumber_default(n))return a.radioState[i][s]===n}}return o}function setCellRadioState(e,t,i,r){var n,o=r.scenegraph.getCell(e,t);o&&(isNumber_default(i)?null!=(n=o.getChildAt(i))&&n._handlePointerUp():null!=(n=o.getChildByName(\\\"radio\\\"))&&n._handlePointerUp())}function setCheckedState(e,t,i,r,n){var o=n.table.getRecordShowIndexByCell(e,t);0<=o&&(o=n.table.dataSource.getIndexKey(o),n.checkedState[o]||(n.checkedState[o]={}),n.checkedState[o][i]=r)}function setHeaderCheckedState(t,i,e){var r;e.headerCheckedState[t]=i,null!=(r=e.checkedState)&&r.forEach(e=>{e[t]=i})}function syncCheckedState(e,t,i,r,n){var o;if(n.table.isHeader(e,t)){if(!isValid_default(n.headerCheckedState[i])){if(\\\"function\\\"==typeof r)return;if(isValid_default(r))n.headerCheckedState[i]=r;else if(0<(null==(a=n.checkedState)?void 0:a.length))return n.updateHeaderCheckedState(i)}return n.headerCheckedState[i]}var a=n.table.getRecordShowIndexByCell(e,t);if(0<=a){a=n.table.dataSource.getIndexKey(a);if(isValid_default(null==(o=n.checkedState[a])?void 0:o[i]))return n.checkedState[a][i];n.checkedState[a]||(n.checkedState[a]={}),n.checkedState[a][i]=r}return r}function initCheckedState(e,l){l.checkedState=[],l.headerCheckedState={};let r=!(l.radioState={});l._checkboxCellTypeFields=[],l._headerCheckFuncs={},l.table.internalProps.layoutMap.headerObjects.forEach((e,t)=>{var i;\\\"checkbox\\\"===e.headerType&&(null==(i=e.define.checked)||\\\"function\\\"==typeof i?(r=!0,\\\"function\\\"==typeof i&&(l._headerCheckFuncs[e.field]=i)):l.headerCheckedState[e.field]=i,\\\"checkbox\\\"!==e.define.cellType||e.fieldFormat||l._checkboxCellTypeFields.push(e.field))}),r&&e.forEach((o,a)=>{l._checkboxCellTypeFields.forEach(e=>{var t,i,r=o[e];let n;isObject_default(r)?n=r.checked:\\\"boolean\\\"==typeof r&&(n=r),null==n&&(t=l._headerCheckFuncs[e])&&(i=l.table.getCellAddrByFieldRecord(e,a),n=getOrApply(t,{col:i.col,row:i.row,table:l.table,context:null,value:r})),l.checkedState[a]||(l.checkedState[a]={}),l.checkedState[a][e]=n})})}function updateHeaderCheckedState(t,e){var i=e.checkedState.every(e=>!0===e[t]);return i?(e.headerCheckedState[t]=!0,i):e.checkedState.every(e=>!1===e[t])?e.headerCheckedState[t]=!1:!!e.checkedState.find(e=>!0===e[t])&&(e.headerCheckedState[t]=\\\"indeterminate\\\")}function initLeftRecordsCheckState(e,r){for(let n=r.checkedState.length;n<e.length;n++){const o=e[n];r._checkboxCellTypeFields.forEach(e=>{var t=o[e];let i;isObject_default(t)?i=t.checked:\\\"boolean\\\"==typeof t&&(i=t),r.checkedState[n]||(r.checkedState[n]={}),r.checkedState[n][e]=i})}}function setCellCheckboxState(e,t,i,r){var n,o,a=r.scenegraph.getCell(e,t),a=null==a?void 0:a.getChildByName(\\\"checkbox\\\");a&&(({checked:n,indeterminate:o}=a.attribute),o?(i||a._handlePointerUp(),a._handlePointerUp()):n?i||a._handlePointerUp():i&&a._handlePointerUp())}function updateResizeRow(e,t,i){e=Math.ceil(e),t=Math.ceil(t);let r=i.rowResize.isBottomFrozen?i.rowResize.y-t:t-i.rowResize.y;var n;Math.abs(r)<1||(i.table.getRowHeight(i.rowResize.row),r,(n=i.table.getRowHeight(i.rowResize.row)+r)<i.table.internalProps.limitMinHeight&&(n=i.table.internalProps.limitMinHeight,r=n-i.table.getRowHeight(i.rowResize.row)),\\\"adaptive\\\"===i.table.heightMode&&i.rowResize.row<i.table.rowCount-1&&(n=i.table.getRowHeight(i.rowResize.row+1),(n-=r)-r<i.table.internalProps.limitMinHeight)&&(r=n-i.table.internalProps.limitMinHeight),r=Math.ceil(r),(i.rowResize.row<i.table.columnHeaderLevelCount||i.rowResize.row>=i.table.rowCount-i.table.bottomFrozenRowCount?updateResizeColForRow:\\\"indicator\\\"===i.table.internalProps.rowResizeType?updateResizeColForIndicator2:\\\"indicatorGroup\\\"===i.table.internalProps.rowResizeType?updateResizeColForIndicatorGroup2:\\\"all\\\"===i.table.internalProps.rowResizeType?updateResizeColForAll2:updateResizeColForRow)(r,i),i.rowResize.y=t,i.table.scenegraph.component.updateResizeRow(i.rowResize.row,e,i.rowResize.isBottomFrozen),i.table.scenegraph.updateNextFrame())}function updateResizeColForRow(e,t){\\\"adaptive\\\"===t.table.heightMode&&t.rowResize.row<t.table.colCount-1?(t.table.scenegraph.updateRowHeight(t.rowResize.row,e),t.table.scenegraph.updateRowHeight(t.rowResize.row+1,-e),t.table.internalProps._heightResizedRowMap.add(t.rowResize.row),t.table.internalProps._heightResizedRowMap.add(t.rowResize.row+1)):(t.table.scenegraph.updateRowHeight(t.rowResize.row,e),t.table.internalProps._heightResizedRowMap.add(t.rowResize.row))}function updateResizeColForAll2(e,t){for(let i=t.table.frozenRowCount;i<t.table.rowCount-t.table.bottomFrozenRowCount;i++)t.table.scenegraph.updateRowHeight(i,e),t.table.internalProps._heightResizedRowMap.add(i)}function updateResizeColForIndicator2(e,t){var i,r=t.table.internalProps.layoutMap;let n,o,a;r.indicatorsAsCol?(i=(i=r.getCellHeaderPaths(t.table.rowHeaderLevelCount-1,t.rowResize.row)).rowHeaderPaths[i.rowHeaderPaths.length-1],o=i.dimensionKey,a=i.value):n=r.getIndicatorKey(t.table.rowHeaderLevelCount,t.rowResize.row);for(let s=t.table.columnHeaderLevelCount;s<t.table.rowCount-t.table.bottomFrozenRowCount;s++){var l=r.getIndicatorKey(t.table.rowHeaderLevelCount,s);(!r.indicatorsAsCol&&l===n||r.indicatorsAsCol&&(l=null==(l=r.getCellHeaderPaths(t.table.rowHeaderLevelCount-1,s))?void 0:l.rowHeaderPaths[l.rowHeaderPaths.length-1])&&o===l.dimensionKey&&a===l.value)&&(t.table.scenegraph.updateRowHeight(s,e),t.table.internalProps._heightResizedRowMap.add(s))}}function updateResizeColForIndicatorGroup2(e,t){var i=t.table.internalProps.layoutMap,r=i.getCellHeaderPaths(t.table.rowHeaderLevelCount,t.rowResize.row),r=i.getHeadNode(r.rowHeaderPaths.slice(0,r.rowHeaderPaths.length-1)),i=r.startInTotal+t.table.frozenRowCount,n=r.startInTotal+t.table.frozenRowCount+r.size-1,o=t.table.getRowsHeight(i,n),a=e;for(let l=i;l<=n;l++){let e=t.table.getRowHeight(l)/o*a;0<e&&e<.5?e=.5:e<0&&-.5<=e&&(e=-.51),t.table.scenegraph.updateRowHeight(l,e),t.table.internalProps._heightResizedRowMap.add(l)}}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var StateManager=class{constructor(e){this.fastScrolling=!1,this.checkedState=[],this.headerCheckedState={},this._checkboxCellTypeFields=[],this._headerCheckFuncs={},this.radioState={},this.resetInteractionState=debounce2(()=>{this.updateInteractionState(InteractionState[\\\"default\\\"])},100),this.table=e,this.initState(),this.updateVerticalScrollBar=this.updateVerticalScrollBar.bind(this),this.updateHorizontalScrollBar=this.updateHorizontalScrollBar.bind(this)}initState(){this._initState(),this.setHoverState(),this.setSelectState(),this.setFrozenState()}updateOptionSetState(){this._updateOptionSetState(),this.setHoverState(),this.setSelectState(),this.setFrozenState()}_updateOptionSetState(){this.interactionState=InteractionState[\\\"default\\\"],this.hoverIcon={col:-1,row:-1,icon:null},this.columnResize={col:-1,x:0,resizing:!1},this.rowResize={row:-1,y:0,resizing:!1},this.columnMove={colSource:-1,colTarget:-1,rowSource:-1,rowTarget:-1,x:0,y:0,moving:!1},this.menu={x:-1,y:-1,isShow:!1,itemList:[],bounds:new Bounds,highlightIndex:-1,dropDownMenuHighlight:[]},this.sort={col:-1,row:-1,order:\\\"normal\\\"},this.frozen={col:-1},this.tablePosition={absoluteX:0,absoluteY:0},this.drill={col:-1,row:-1},this.sparkLine={col:-1,row:-1}}_initState(){this.interactionState=InteractionState[\\\"default\\\"],this.select={highlightScope:HighlightScope.single,ranges:[],cellPos:{col:-1,row:-1},selecting:!1},this.fillHandle={isFilling:!1,startX:void 0,startY:void 0},this.hover={highlightScope:HighlightScope.single,cellPos:{col:-1,row:-1}},this.hoverIcon={col:-1,row:-1,icon:null},this.columnResize={col:-1,x:0,resizing:!1},this.rowResize={row:-1,y:0,resizing:!1},this.columnMove={colSource:-1,colTarget:-1,rowSource:-1,rowTarget:-1,x:0,y:0,moving:!1},this.menu={x:-1,y:-1,isShow:!1,itemList:[],bounds:new Bounds,highlightIndex:-1,dropDownMenuHighlight:[]},this.sort={col:-1,row:-1,order:\\\"normal\\\"},this.frozen={col:-1},this.scroll={horizontalBarPos:0,verticalBarPos:0},this.tablePosition={absoluteX:0,absoluteY:0},this.drill={col:-1,row:-1},this.sparkLine={col:-1,row:-1}}setHoverState(){var{highlightMode:e,disableHover:t,disableHeaderHover:i}=null!=(e=this.table.options.hover)?e:{highlightMode:\\\"cell\\\"};t?this.hover.highlightScope=HighlightScope.none:\\\"cross\\\"===e?this.hover.highlightScope=HighlightScope.cross:\\\"row\\\"===e?this.hover.highlightScope=HighlightScope.row:\\\"column\\\"===e?this.hover.highlightScope=HighlightScope.column:\\\"cell\\\"===e&&(this.hover.highlightScope=HighlightScope.single),this.hover.singleStyle=!t,this.hover.disableHeader=i,this.hover.highlightScope!==HighlightScope.none&&!i||(this.hover.cellPosContainHeader={col:-1,row:-1})}setSelectState(){var{headerSelectMode:e,disableSelect:t,disableHeaderSelect:i}=Object.assign({},{headerSelectMode:\\\"inline\\\",disableSelect:!1,disableHeaderSelect:!1},this.table.options.select);this.select.highlightScope=t?HighlightScope.none:HighlightScope.single,this.select.singleStyle=!t,this.select.disableHeader=i,this.select.headerSelectMode=e}isSelected(t,i){let r=!1;return this.select.ranges.forEach(e=>{cellInRange(e,t,i)&&(r=!0)}),r}setSortState(e){this.sort.field=null==e?void 0:e.field,this.sort.order=null==e?void 0:e.order}setFrozenState(){this.frozen.col=this.table.frozenColCount-1}updateInteractionState(e){var t;this.interactionState!==e&&(t=this.interactionState,this.interactionState=e,t===InteractionState.scrolling)&&InteractionState[\\\"default\\\"]}updateHoverhighlightScope(e){this.hover.highlightScope!==e&&(this.hover.highlightScope=e)}updateHoverPos(e,t){updateHoverPosition(this,e,t)}updateSelectPos(e,t,i=!1,r=!1,n=!1,o=!1){-1!==t&&(this.select.selecting=!0),updateSelectPosition(this,e,t,i,r,n,o)}checkCellRangeInSelect(e,t){return checkMultiCellInSelect(e,t,this.select.ranges,this.select.highlightScope)}updateHoverIcon(e,t,i,r,n){var o,a,l;null!=(o=this.residentHoverIcon)&&o.icon&&i===(null==(o=this.residentHoverIcon)?void 0:o.icon)||((o=getIconAndPositionFromTarget(i))?\\\"richtext-icon\\\"===o.type?(l=o.icon,this.hoverIcon.icon&&this.hoverIcon.icon!==(null==(a=this.residentHoverIcon)?void 0:a.icon)&&(this.table.scenegraph.setIconNormalStyle(this.hoverIcon.icon,this.hoverIcon.col,this.hoverIcon.row),this.hoverIcon.col=-1,this.hoverIcon.col=-1,this.hoverIcon.icon=null,this.table.scenegraph.updateNextFrame()),l.attribute.tooltip&&(a={content:l.attribute.tooltip.title,referencePosition:{rect:o.position,placement:l.attribute.tooltip.placement},style:Object.assign({},null==(a=this.table.internalProps.theme)?void 0:a.tooltipStyle,null==(a=l.tooltip)?void 0:a.style,null==(l=null==(a=l.attribute)?void 0:a.tooltip)?void 0:l.style)},this.table.internalProps.tooltipHandler.isBinded(a)||this.table.showTooltip(e,t,a))):(l=o.icon)!==this.hoverIcon.icon&&(this.hoverIcon.icon&&this.hoverIcon.icon!==(null==(a=this.residentHoverIcon)?void 0:a.icon)&&this.table.scenegraph.setIconNormalStyle(this.hoverIcon.icon,this.hoverIcon.col,this.hoverIcon.row),this.hoverIcon.col=e,this.hoverIcon.row=t,this.hoverIcon.icon=l,this.table.scenegraph.setIconHoverStyle(l,e,t,r),this.table.scenegraph.updateNextFrame()):this.hoverIcon.icon&&this.hoverIcon.icon!==(null==(o=this.residentHoverIcon)?void 0:o.icon)&&(this.table.scenegraph.setIconNormalStyle(this.hoverIcon.icon,this.hoverIcon.col,this.hoverIcon.row),this.hoverIcon.col=-1,this.hoverIcon.col=-1,this.hoverIcon.icon=null,this.table.scenegraph.updateNextFrame()))}isResizeCol(){return this.columnResize.resizing}isResizeRow(){return this.rowResize.resizing}isFillHandle(){return this.fillHandle.isFilling}isSelecting(){return this.select.selecting}endSelectCells(e=!0){var t,i;this.select.selecting&&(this.select.selecting=!1,0!==this.select.ranges.length)&&(selectEnd(this.table.scenegraph),t=this.select.ranges[this.select.ranges.length-1].end.col,i=this.select.ranges[this.select.ranges.length-1].end.row,e)&&this.table.fireListeners(TABLE_EVENT_TYPE.SELECTED_CELL,{ranges:this.select.ranges,col:t,row:i})}endResizeCol(){setTimeout(()=>{this.columnResize.resizing=!1},0),this.table.scenegraph.updateChartSize(this.columnResize.col),this.checkFrozen(),this.table.scenegraph.component.hideResizeCol(),this.table.scenegraph.updateNextFrame()}startResizeCol(e,t,i,r){this.columnResize.resizing=!0,this.columnResize.col=e,this.columnResize.x=t,this.columnResize.isRightFrozen=r,this.table.scenegraph.component.showResizeCol(e,i,r),this.updateSelectPos(-1,-1),this.table.scenegraph.updateNextFrame()}updateResizeCol(e,t){updateResizeColumn(e,t,this)}endResizeRow(){setTimeout(()=>{this.rowResize.resizing=!1},0),this.table.scenegraph.updateChartSize(this.rowResize.row),this.table.scenegraph.component.hideResizeRow(),this.table.scenegraph.updateNextFrame()}startResizeRow(e,t,i,r){this.rowResize.resizing=!0,this.rowResize.row=e,this.rowResize.y=i,this.rowResize.isBottomFrozen=r,this.table.scenegraph.component.showResizeRow(e,t,r),this.updateSelectPos(-1,-1),this.table.scenegraph.updateNextFrame()}updateResizeRow(e,t){updateResizeRow(e,t,this)}startFillSelect(e,t){this.fillHandle.isFilling=!0,this.fillHandle.startX=e,this.fillHandle.startY=t;var i=this.select.ranges[this.select.ranges.length-1];this.fillHandle.beforeFillMinCol=Math.min(i.start.col,i.end.col),this.fillHandle.beforeFillMinRow=Math.min(i.start.row,i.end.row),this.fillHandle.beforeFillMaxCol=Math.max(i.start.col,i.end.col),this.fillHandle.beforeFillMaxRow=Math.max(i.start.row,i.end.row),this.table.fireListeners(TABLE_EVENT_TYPE.MOUSEDOWN_FILL_HANDLE,{})}endFillSelect(){this.fillHandle.isFilling=!1,this.fillHandle.startX=void 0,this.fillHandle.startY=void 0,this.fillHandle.directionRow=void 0;var e=Math.min(this.select.ranges[0].start.col,this.select.ranges[0].end.col),t=Math.min(this.select.ranges[0].start.row,this.select.ranges[0].end.row),i=Math.max(this.select.ranges[0].start.col,this.select.ranges[0].end.col),r=Math.max(this.select.ranges[0].start.row,this.select.ranges[0].end.row);this.fillHandle.beforeFillMinCol===e&&this.fillHandle.beforeFillMinRow===t&&this.fillHandle.beforeFillMaxCol===i&&this.fillHandle.beforeFillMaxRow===r||this.table.eventManager.isDraging&&this.table.fireListeners(TABLE_EVENT_TYPE.DRAG_FILL_HANDLE_END,{direction:this.fillHandle.direction}),this.fillHandle.beforeFillMaxCol=void 0,this.fillHandle.beforeFillMaxRow=void 0,this.fillHandle.beforeFillMinCol=void 0,this.fillHandle.beforeFillMinRow=void 0}startMoveCol(e,t,i,r){startMoveCol(e,t,i,r,this)}updateMoveCol(e,t,i,r){updateMoveCol(e,t,i,r,this)}isMoveCol(){return this.columnMove.moving}endMoveCol(){endMoveCol(this)}checkFrozen(){var e=this.table.isListTable()&&!this.table.internalProps.transpose?this.table.options.frozenColCount:this.table.isPivotChart()?null!=(e=this.table.rowHeaderLevelCount)?e:0:Math.max((null!=(e=this.table.rowHeaderLevelCount)?e:0)+this.table.internalProps.layoutMap.leftRowSeriesNumberColumnCount,null!=(e=this.table.options.frozenColCount)?e:0);if(e){if(this.table.tableNoFrameWidth-this.table.getColsWidth(0,e-1)<=120)return this.table._setFrozenColCount(0),this.setFrozenCol(-1),!1;if(this.table.frozenColCount!==e)return this.table._setFrozenColCount(e),this.setFrozenCol(e),!1}return!0}setFrozenCol(e){e!==this.frozen.col&&(this.frozen.col=e,this.table.scenegraph.updateFrozen()),this.table.scenegraph.updateFrozenIcon(0,this.table.colCount-1)}checkVerticalScrollBarEnd(){var e=this.table.getAllRowsHeight(),t=this.scroll.verticalBarPos,i=this.table.tableNoFrameHeight;e<=t+i&&this.table.fireListeners(TABLE_EVENT_TYPE.SCROLL_VERTICAL_END,{scrollTop:t,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(e=this.table.theme.scrollStyle)?void 0:e.width,scrollWidth:null==(t=this.table.theme.scrollStyle)?void 0:t.width,viewHeight:i,viewWidth:this.table.tableNoFrameWidth})}checkHorizontalScrollBarEnd(){var e=this.table.getAllColsWidth(),t=this.scroll.horizontalBarPos,i=this.table.tableNoFrameWidth;e<=t+i&&this.table.fireListeners(TABLE_EVENT_TYPE.SCROLL_HORIZONTAL_END,{scrollTop:this.scroll.verticalBarPos,scrollLeft:t,scrollHeight:null==(e=this.table.theme.scrollStyle)?void 0:e.width,scrollWidth:null==(t=this.table.theme.scrollStyle)?void 0:t.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:i})}updateVerticalScrollBar(e){var t=this.table.getAllRowsHeight(),i=this.scroll.verticalBarPos;this.scroll.verticalBarPos=Math.ceil(e*(t-this.table.scenegraph.height)),isValid_default(this.scroll.verticalBarPos)&&!isNaN(this.scroll.verticalBarPos)||(this.scroll.verticalBarPos=0),this.table.scenegraph.setY(-this.scroll.verticalBarPos,1===e),this.scroll.verticalBarPos-=this.table.scenegraph.proxy.deltaY,this.table.scenegraph.proxy.deltaY=0,this.updateHoverPos(-1,-1),this.table.fireListeners(TABLE_EVENT_TYPE.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(t=this.table.theme.scrollStyle)?void 0:t.width,scrollWidth:null==(t=this.table.theme.scrollStyle)?void 0:t.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:\\\"vertical\\\",scrollRatioY:e}),i!==this.scroll.verticalBarPos&&this.checkVerticalScrollBarEnd()}updateHorizontalScrollBar(e){var t=this.table.getAllColsWidth(),i=this.scroll.horizontalBarPos;this.scroll.horizontalBarPos=Math.ceil(e*(t-this.table.scenegraph.width)),isValid_default(this.scroll.horizontalBarPos)&&!isNaN(this.scroll.horizontalBarPos)||(this.scroll.horizontalBarPos=0),this.table.scenegraph.setX(-this.scroll.horizontalBarPos,1===e),this.scroll.horizontalBarPos-=this.table.scenegraph.proxy.deltaX,this.table.scenegraph.proxy.deltaX=0,this.updateHoverPos(-1,-1),this.table.fireListeners(TABLE_EVENT_TYPE.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(t=this.table.theme.scrollStyle)?void 0:t.width,scrollWidth:null==(t=this.table.theme.scrollStyle)?void 0:t.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:\\\"horizontal\\\",scrollRatioX:e}),i!==this.scroll.horizontalBarPos&&this.checkHorizontalScrollBarEnd()}setScrollTop(e){var t=this.table.getAllRowsHeight(),i=(e=Math.max(0,Math.min(e,t-this.table.scenegraph.height)),(e=Math.ceil(e))===this.scroll.verticalBarPos&&!this.table.isPivotChart()||this.updateHoverPos(-1,-1),this.scroll.verticalBarPos),t=(this.scroll.verticalBarPos=e,isValid_default(this.scroll.verticalBarPos)&&!isNaN(this.scroll.verticalBarPos)||(this.scroll.verticalBarPos=0),this.table.scenegraph.setY(-e),e/(t-this.table.scenegraph.height));this.table.scenegraph.component.updateVerticalScrollBarPos(t),i!==e&&(this.table.fireListeners(TABLE_EVENT_TYPE.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(i=this.table.theme.scrollStyle)?void 0:i.width,scrollWidth:null==(i=this.table.theme.scrollStyle)?void 0:i.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:\\\"vertical\\\",scrollRatioY:t}),this.checkVerticalScrollBarEnd())}setScrollLeft(e){this.table.scrollLeft;var t=this.table.getAllColsWidth(),i=(this.table.getFrozenColsWidth(),e=Math.max(0,Math.min(e,t-this.table.scenegraph.width)),(e=Math.ceil(e))!==this.scroll.horizontalBarPos&&this.updateHoverPos(-1,-1),this.scroll.horizontalBarPos),t=(this.scroll.horizontalBarPos=e,isValid_default(this.scroll.horizontalBarPos)&&!isNaN(this.scroll.horizontalBarPos)||(this.scroll.horizontalBarPos=0),this.table.scenegraph.setX(-e),e/(t-this.table.scenegraph.width));this.table.scenegraph.component.updateHorizontalScrollBarPos(t),i!==e&&(this.table.fireListeners(TABLE_EVENT_TYPE.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(i=this.table.theme.scrollStyle)?void 0:i.width,scrollWidth:null==(i=this.table.theme.scrollStyle)?void 0:i.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:\\\"horizontal\\\",scrollRatioX:t}),this.checkHorizontalScrollBarEnd())}hideVerticalScrollBar(){this.table.scenegraph.component.hideVerticalScrollBar()}showVerticalScrollBar(e){this.table.scenegraph.component.showVerticalScrollBar(),e&&(clearTimeout(this._clearVerticalScrollBar),this._clearVerticalScrollBar=setTimeout(()=>{this.table.scenegraph.component.hideVerticalScrollBar()},1e3))}hideHorizontalScrollBar(){this.table.scenegraph.component.hideHorizontalScrollBar()}showHorizontalScrollBar(e){this.table.scenegraph.component.showHorizontalScrollBar(),e&&(clearTimeout(this._clearHorizontalScrollBar),this._clearHorizontalScrollBar=setTimeout(()=>{this.table.scenegraph.component.hideHorizontalScrollBar()},1e3))}triggerContextMenu(e,t,i,r){this.menu.isShow&&this.menu.x===i&&this.menu.y===r?this.hideMenu():this.showContextMenu(e,t,i,r)}showContextMenu(e,t,i,r){var n;null!=(n=this.table.internalProps.menu)&&n.contextMenuItems&&(\\\"html\\\"===this.table.internalProps.menu.renderMode?this.menu.isShow=!0:(this.menu.isShow=!0,this.menu.x=i,this.menu.y=r,this.table.scenegraph.component.menu.attach(i,r,e,t,MenuType.contextmenu)),this.table.fireListeners(TABLE_EVENT_TYPE.SHOW_MENU,{x:i,y:r,col:e,row:t,type:\\\"contextmenu\\\"}))}triggerDropDownMenu(e,t,i,r,n){this.table.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_ICON_CLICK,{col:e,row:t,event:n}),this.menu.isShow?this.hideMenu():this.showDropDownMenu(e,t,i,r)}showDropDownMenu(e,t,i,r){\\\"html\\\"===this.table.internalProps.menu.renderMode?this.menu.isShow=!0:(this.menu.isShow=!0,this.table.scenegraph.component.menu.attach(i,r,e,t,MenuType.dropDown),this.menu.bounds=this.table.scenegraph.component.menu.bounds),this.table.fireListeners(TABLE_EVENT_TYPE.SHOW_MENU,{x:i,y:r,col:e,row:t,type:\\\"dropDown\\\"}),this.residentHoverIcon&&this.table.scenegraph.setIconNormalStyle(this.residentHoverIcon.icon,this.residentHoverIcon.col,this.residentHoverIcon.row);var n=this.table.scenegraph.getCell(e,t);let o;n.forEachChildren(e=>e.attribute.funcType===IconFuncTypeEnum.dropDown&&(o=e,!0)),o&&(this.residentHoverIcon={col:e,row:t,icon:o},this.table.scenegraph.setIconHoverStyle(this.residentHoverIcon.icon,this.residentHoverIcon.col,this.residentHoverIcon.row,n),this.table.scenegraph.residentHoverIcon(e,t))}hideMenu(){this.menu.isShow&&(this.table.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLEAR,null),this.table.fireListeners(TABLE_EVENT_TYPE.HIDE_MENU,null),this.menu.isShow=!1,this.table.scenegraph.component.menu.detach(),this.residentHoverIcon)&&(this.table.scenegraph.setIconNormalStyle(this.residentHoverIcon.icon,this.residentHoverIcon.col,this.residentHoverIcon.row),this.table.scenegraph.resetResidentHoverIcon(this.residentHoverIcon.col,this.residentHoverIcon.row),this.residentHoverIcon=null)}setDropDownMenuHighlight(e){this.menu.dropDownMenuHighlight=e;for(let n=0;n<e.length;n++){var{col:t,row:i}=e[n],r=this.table.getCellRange(t,i);if(r)for(let t=r.start.col;t<=r.end.col;t++)for(let e=r.start.row;e<=r.end.row;e++)this.table.scenegraph.updateCellContent(t,e)}}dropDownMenuIsHighlight(r,n,o){var a=this.menu.dropDownMenuHighlight;if(Array.isArray(a))for(let i=0;i<a.length;i++){var l=a[i];let{col:e,row:t}=l;var{field:l,menuKey:s}=l;if(\\\"number\\\"!=typeof e||\\\"number\\\"!=typeof t)if(this.table.isPivotTable()&&(Array.isArray(l),1)){var h=this.table.internalProps.layoutMap.getPivotCellAdress(l);if(!h)continue;e=h.col,t=h.row}else{h=this.table.internalProps.layoutMap.getHeaderCellAddressByField(l);if(!h)continue;e=h.col,t=h.row}if(isValid_default(e)&&isValid_default(t)&&this.table.isCellRangeEqual(r,n,e,t)){var d=this.table._getHeaderLayoutMap(null!=e?e:r,null!=t?t:n).dropDownMenu||this.table.globalDropDownMenu;if(d)for(let e=0;e<d.length;e++){var u=d[e];if(isObject_default(u)&&(u.menuKey||u.text)===(s||\\\"\\\")&&e===o)return!0;if(isString_default(u)&&u===s&&e===o)return!0}}}return!1}triggerSort(e,t,i,r){var n,o;this.table.isPivotTable()?(n=this.table.getPivotSortState(e,t),this.table.fireListeners(PIVOT_TABLE_EVENT_TYPE.PIVOT_SORT_CLICK,{col:e,row:t,order:n||\\\"normal\\\",dimensionInfo:this.table.internalProps.layoutMap.getPivotDimensionInfo(e,t),cellLocation:this.table.getCellLocation(e,t),event:r})):(n=this.sort.col,o=this.sort.row,dealSort(e,t,this.table,r),this.sort.col=e,this.sort.row=t,this.table.scenegraph.updateSortIcon(this.sort.col,this.sort.row,i,this.sort.order,n,o,this.sort.icon),this.sort.icon=i)}updateSortState(e){var t,i,r,n;e.field===this.sort.field&&e.order===this.sort.order||(t=this.sort.col,i=this.sort.row,r=\\\"asc\\\"===this.sort.order?\\\"sort_downward\\\":\\\"desc\\\"===this.sort.order?\\\"sort_upward\\\":\\\"sort_normal\\\",this.setSortState(e),n=this.table.internalProps.layoutMap.getHeaderCellAddressByField(e.field),this.sort.col=n.col,this.sort.row=n.row,n=this.table.scenegraph.getCell(this.sort.col,this.sort.row).getChildByName(r,!0),this.table.scenegraph.updateSortIcon(this.sort.col,this.sort.row,n,this.sort.order,t,i,this.sort.icon))}triggerFreeze(e,t,i){this.table.isPivotTable()||this.table.transpose||(dealFreeze(e,t,this.table),this.frozen.icon=i)}updateCursor(e=\\\"default\\\"){this.table.getElement().style.cursor=e}updateDrillState(e,t,i,r,n,o){this.drill.dimensionKey=e,this.drill.title=t,this.drill.drillDown=i,this.drill.drillUp=r,updateDrill(this.drill.col=n,this.drill.row=o,i,r,this.table)}updateSparklineHoverPose(e,t,i,r){-1!==this.sparkLine.col&&-1!==this.sparkLine.row&&clearChartHover(this.sparkLine.col,this.sparkLine.row,this.table);let n=!1;(n=-1!==e&&-1!==t?updateChartHover(e,t,i,r,this.table):n)?(this.sparkLine.col=e,this.sparkLine.row=t):(this.sparkLine.col=-1,this.sparkLine.row=-1)}setCheckedState(e,t,i,r){return setCheckedState(e,t,i,r,this)}setHeaderCheckedState(e,t){return setHeaderCheckedState(e,t,this)}syncCheckedState(e,t,i,r){return syncCheckedState(e,t,i,r,this)}initCheckedState(e){return initCheckedState(e,this)}updateHeaderCheckedState(e){return updateHeaderCheckedState(e,this)}initLeftRecordsCheckState(e){return initLeftRecordsCheckState(e,this)}setRadioState(e,t,i,r,n){setRadioState(e,t,i,r,n,this)}syncRadioState(e,t,i,r,n,o){return syncRadioState(e,t,i,r,n,o,this)}};function bindMediaClick(p){\\\"browser\\\"===Env.mode&&p.on(TABLE_EVENT_TYPE.CLICK_CELL,e=>{var{col:t,row:i}=e,r=p.internalProps.layoutMap.isHeader(t,i)?(p.isPivotTable()?p._getHeaderLayoutMap(t,i):p.getHeaderDefine(t,i)).headerType:p.getBodyColumnType(t,i),n=p.isHeader(t,i)?p.getHeaderDefine(t,i):p.getBodyColumnDefine(t,i),o=p.getCellValue(t,i),a=p.getCellOriginValue(t,i);if(\\\"link\\\"===r){if(!1!==n.linkJump){var l=n.templateLink,s=!1!==n.linkDetect;let e;if(l){const h=p.getCellOriginRecord(t,i),d=Object.assign({__value:o,__dataValue:a},h),u=/\\\\{\\\\s*(\\\\S+?)\\\\s*\\\\}/g;e=l.replace(u,(e,t)=>d[t])}else{if(s&&!regUrl.test(o))return;e=o}window.open(e)}}else if(\\\"image\\\"===r){t=n[\\\"clickToPreview\\\"];if(!1!==t){const c=document.createElement(\\\"div\\\");c.style.width=\\\"100%\\\",c.style.height=\\\"100%\\\",c.style.position=\\\"absolute\\\",c.style.top=\\\"0\\\",c.style.left=\\\"0\\\",c.style.backgroundColor=\\\"rgba(30, 30, 30, 0.4)\\\",c.style.display=\\\"flex\\\",c.style.justifyContent=\\\"center\\\",c.style.alignItems=\\\"center\\\",c.style.overflow=\\\"hidden\\\",c.style.zIndex=\\\"9999\\\",c.addEventListener(\\\"click\\\",e=>{e.target===c&&document.body.removeChild(c)});i=new Image;i.src=o,i.style.maxWidth=\\\"80%\\\",i.style.maxHeight=\\\"80%\\\",c.appendChild(i),document.body.appendChild(c)}}else if(\\\"video\\\"===r){a=n[\\\"clickToPreview\\\"];if(!1!==a){const g=document.createElement(\\\"div\\\");g.style.width=\\\"100%\\\",g.style.height=\\\"100%\\\",g.style.position=\\\"absolute\\\",g.style.top=\\\"0\\\",g.style.left=\\\"0\\\",g.style.backgroundColor=\\\"rgba(30, 30, 30, 0.4)\\\",g.style.display=\\\"flex\\\",g.style.justifyContent=\\\"center\\\",g.style.alignItems=\\\"center\\\",g.style.overflow=\\\"hidden\\\",g.style.zIndex=\\\"9999\\\",g.addEventListener(\\\"click\\\",e=>{e.target===g&&document.body.removeChild(g)});l=document.createElement(\\\"video\\\");l.src=o,l.style.maxWidth=\\\"80%\\\",l.style.maxHeight=\\\"80%\\\",l.setAttribute(\\\"preload\\\",\\\"auto\\\"),l.setAttribute(\\\"controls\\\",\\\"true\\\"),g.appendChild(l),document.body.appendChild(g)}}})}function bindDrillEvent(n){n.on(TABLE_EVENT_TYPE.MOUSEENTER_CELL,e=>{var t,{col:i,row:r}=e;-1!==i&&-1!==r&&(null!=(t=n.internalProps.layoutMap.getHeaderDimension(i,r))&&t.drillDown||null!=t&&t.drillUp?n.stateManager.updateDrillState(t.dimensionKey,t.title,t.drillDown,t.drillUp,i,r):n.stateManager.updateDrillState(void 0,void 0,!1,!1,-1,-1))}),n.on(TABLE_EVENT_TYPE.MOUSELEAVE_TABLE,e=>{n.stateManager.updateDrillState(void 0,void 0,!1,!1,-1,-1)})}function drillClick(e){e.fireListeners(PIVOT_TABLE_EVENT_TYPE.DRILLMENU_CLICK,e.stateManager.drill)}function checkHaveDrill(e){var t=e.internalProps.layoutMap.rowsDefine,i=e.internalProps.layoutMap.columnsDefine;for(let o=0;o<t.length;o++){var r=t[o];if(\\\"string\\\"!=typeof r&&(r.drillDown||r.drillUp))return!0}for(let a=0;a<i.length;a++){var n=i[a];if(\\\"string\\\"!=typeof n&&(n.drillDown||n.drillUp))return!0}return!1}function bindSparklineHoverEvent(o){let e=!1;(e=o.isPivotTable()?o.internalProps.layoutMap.indicatorsDefine.some(e=>\\\"string\\\"!=typeof e&&\\\"sparkline\\\"===e.cellType):o.internalProps.layoutMap.columnObjects.some(e=>\\\"sparkline\\\"===e.cellType||\\\"function\\\"==typeof e.cellType))&&(o.on(TABLE_EVENT_TYPE.MOUSEMOVE_CELL,e=>{var{col:t,row:i,x:r,y:n}=e;\\\"sparkline\\\"!==o.getBodyColumnType(t,i)&&o.stateManager.updateSparklineHoverPose(-1,-1,0,0),o.stateManager.updateSparklineHoverPose(t,i,r,n)}),o.on(TABLE_EVENT_TYPE.MOUSELEAVE_TABLE,e=>{o.stateManager.updateSparklineHoverPose(-1,-1,0,0)}))}function getCellEventArgsSet(e){var t={abstractPos:{x:e.x,y:e.y}},i=getTargetCell(e.target);return i&&(t.eventArgs={col:i.col,row:i.row,event:e,targetCell:i,target:e.target}),t}function getTargetCell(e){for(;e&&e.parent;){if(\\\"cell\\\"===e.role)return e;e=e.parent}return null}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var regIndexReg=/radio-\\\\d+-\\\\d+-(\\\\d+)/;function bindTableGroupListener(a){const d=a.table,s=d.stateManager;d.scenegraph.tableGroup.addEventListener(\\\"pointermove\\\",i=>{var r=null!=(r=null==(r=d.eventManager.LastPointerXY)?void 0:r.x)?r:i.x,n=null!=(n=null==(n=d.eventManager.LastPointerXY)?void 0:n.y)?n:i.y,o=(d.eventManager.LastPointerXY={x:i.x,y:i.y},a.touchSetTimeout&&(clearTimeout(a.touchSetTimeout),a.touchSetTimeout=void 0),getCellEventArgsSet(i));if(s.interactionState===InteractionState.grabing)1<=Math.abs(r-i.x)+Math.abs(n-i.y)&&(s.isResizeCol()||(s.isMoveCol()?a.dealColumnMover(o):s.isFillHandle()?a.dealFillSelect(o,!0):a.dealTableSelect(o,!0)));else{d.eventManager.isDraging&&s.isSelecting()&&a.dealTableSelect(o,!0);var r=i.path.find(e=>\\\"cell\\\"===e.role);if(!d.hasListeners(TABLE_EVENT_TYPE.MOUSELEAVE_CELL)||-1===d.stateManager.hover.cellPos.col||-1===d.stateManager.hover.cellPos.row||(null==r?void 0:r.col)===d.stateManager.hover.cellPos.col&&(null==r?void 0:r.row)===d.stateManager.hover.cellPos.row||d.fireListeners(TABLE_EVENT_TYPE.MOUSELEAVE_CELL,{col:d.stateManager.hover.cellPos.col,row:d.stateManager.hover.cellPos.row,cellRange:d.getCellRangeRelativeRect({col:d.stateManager.hover.cellPos.col,row:d.stateManager.hover.cellPos.row}),scaleRatio:d.canvas.getBoundingClientRect().width/d.canvas.offsetWidth,event:i.nativeEvent,target:null==(n=null==o?void 0:o.eventArgs)?void 0:n.target}),!d.hasListeners(TABLE_EVENT_TYPE.MOUSEENTER_CELL)||\\\"cell\\\"!==(null==r?void 0:r.role)||!isValid_default(r.col)||!isValid_default(r.row)||r.col===d.stateManager.hover.cellPos.col&&r.row===d.stateManager.hover.cellPos.row||r.col===(null==(n=d.stateManager.hover.cellPosContainHeader)?void 0:n.col)&&r.row===(null==(n=d.stateManager.hover.cellPosContainHeader)?void 0:n.row)||d.fireListeners(TABLE_EVENT_TYPE.MOUSEENTER_CELL,{col:r.col,row:r.row,cellRange:d.getCellRangeRelativeRect({col:r.col,row:r.row}),scaleRatio:d.canvas.getBoundingClientRect().width/d.canvas.offsetWidth,event:i.nativeEvent,target:null==(n=null==o?void 0:o.eventArgs)?void 0:n.target}),a.dealIconHover(o),a.dealTableHover(o),o.eventArgs&&d.hasListeners(TABLE_EVENT_TYPE.MOUSEMOVE_CELL)){let e,t;null!=(r=o.eventArgs)&&r.target&&(r=getIconAndPositionFromTarget(null==(n=o.eventArgs)?void 0:n.target))&&(e=r.icon,t=r.position),d.fireListeners(TABLE_EVENT_TYPE.MOUSEMOVE_CELL,{col:o.eventArgs.col,row:o.eventArgs.row,x:o.abstractPos.x,y:o.abstractPos.y,event:i.nativeEvent,targetIcon:e?{name:e.name,position:t,funcType:e.attribute.funcType}:void 0,target:null==(n=null==o?void 0:o.eventArgs)?void 0:n.target})}}}),d.scenegraph.tableGroup.addEventListener(\\\"pointerout\\\",e=>{var t=getCellEventArgsSet(e),t=null==(t=null==t?void 0:t.eventArgs)?void 0:t.target;\\\"table\\\"===(null==t?void 0:t.role)&&a.dealTableHover()}),d.scenegraph.tableGroup.addEventListener(\\\"pointerover\\\",e=>{var t,i=getCellEventArgsSet(e),r=null==(r=null==i?void 0:i.eventArgs)?void 0:r.target;r&&d.hasListeners(TABLE_EVENT_TYPE.MOUSEOVER_CHART_SYMBOL)&&\\\"symbol\\\"===r.type&&(r=e.composedPath().find(e=>\\\"cell\\\"===e.roll))&&(({col:r,row:t}=r),t={col:r,row:t,field:d.getHeaderField(r,t),value:d.getCellValue(r,t),dataValue:d.getCellOriginValue(r,t),cellHeaderPaths:d.internalProps.layoutMap.getCellHeaderPaths(r,t),title:d.getBodyColumnDefine(r,t).title,cellRange:d.getCellRelativeRect(r,t),event:e.nativeEvent,sparkline:{pointData:void 0},scaleRatio:d.canvas.getBoundingClientRect().width/d.canvas.offsetWidth,target:null==(r=null==i?void 0:i.eventArgs)?void 0:r.target},d.fireListeners(TABLE_EVENT_TYPE.MOUSEOVER_CHART_SYMBOL,t))}),d.scenegraph.tableGroup.addEventListener(\\\"pointerenter\\\",e=>{\\\"focus\\\"===d.theme.scrollStyle.visible&&(s.showHorizontalScrollBar(),s.showVerticalScrollBar()),d.hasListeners(TABLE_EVENT_TYPE.MOUSEENTER_TABLE)&&d.fireListeners(TABLE_EVENT_TYPE.MOUSEENTER_TABLE,{event:e.nativeEvent})}),d.scenegraph.tableGroup.addEventListener(\\\"pointerleave\\\",e=>{s.isResizeCol()||s.isMoveCol()||s.isSelecting()||(s.updateInteractionState(InteractionState[\\\"default\\\"]),s.updateCursor()),\\\"focus\\\"===d.theme.scrollStyle.visible&&(s.hideHorizontalScrollBar(),s.hideVerticalScrollBar()),d.hasListeners(TABLE_EVENT_TYPE.MOUSELEAVE_CELL)&&-1!==d.stateManager.hover.cellPos.col&&-1!==d.stateManager.hover.cellPos.row&&d.fireListeners(TABLE_EVENT_TYPE.MOUSELEAVE_CELL,{col:d.stateManager.hover.cellPos.col,row:d.stateManager.hover.cellPos.row,cellRange:d.getCellRangeRelativeRect({col:d.stateManager.hover.cellPos.col,row:d.stateManager.hover.cellPos.row}),scaleRatio:d.canvas.getBoundingClientRect().width/d.canvas.offsetWidth,event:e.nativeEvent,target:void 0}),a.dealTableHover();var t=e.target;t&&!t.isDescendantsOf(d.scenegraph.tableGroup)&&d.fireListeners(TABLE_EVENT_TYPE.MOUSELEAVE_TABLE,{event:e.nativeEvent})}),d.scenegraph.tableGroup.addEventListener(\\\"pointerupoutside\\\",e=>{var t,i=getCellEventArgsSet(e);s.menu.isShow&&(null==(i=i.eventArgs)?void 0:i.target)!==(null==(i=s.residentHoverIcon)?void 0:i.icon)&&setTimeout(()=>{d.internalProps.menuHandler.pointInMenuElement(e.page.x,e.page.y)||s.menu.isShow&&s.hideMenu()},0),s.isResizeCol()?endResizeCol(d):s.isResizeRow()?endResizeRow(d):s.isMoveCol()?(d.stateManager.endMoveCol(),-1!==(null==(i=d.stateManager.columnMove)?void 0:i.colSource)&&-1!==(null==(i=d.stateManager.columnMove)?void 0:i.rowSource)&&-1!==(null==(i=d.stateManager.columnMove)?void 0:i.colTarget)&&-1!==(null==(i=d.stateManager.columnMove)?void 0:i.rowTarget)&&d.hasListeners(TABLE_EVENT_TYPE.CHANGE_HEADER_POSITION)&&d.fireListeners(TABLE_EVENT_TYPE.CHANGE_HEADER_POSITION,{target:{col:d.stateManager.columnMove.colTarget,row:d.stateManager.columnMove.rowTarget},source:{col:d.stateManager.columnMove.colSource,row:d.stateManager.columnMove.rowSource}})):s.isSelecting()&&null!=(i=null==(i=d.stateManager.select)?void 0:i.ranges)&&i.length&&(i=d.stateManager.select.ranges[d.stateManager.select.ranges.length-1].end.col,t=d.stateManager.select.ranges[d.stateManager.select.ranges.length-1].end.row,d.stateManager.endSelectCells(),d.hasListeners(TABLE_EVENT_TYPE.DRAG_SELECT_END))&&((i={event:e.nativeEvent,cells:[],col:i,row:t,scaleRatio:d.canvas.getBoundingClientRect().width/d.canvas.offsetWidth,target:void 0}).cells=d.getSelectedCellInfos(),d.fireListeners(TABLE_EVENT_TYPE.DRAG_SELECT_END,i)),null!=(t=d.editorManager)&&t.completeEdit(e.nativeEvent),s.updateInteractionState(InteractionState[\\\"default\\\"]),a.dealTableHover()}),d.scenegraph.tableGroup.addEventListener(\\\"pointerdown\\\",e=>{if(d.hasListeners(TABLE_EVENT_TYPE.MOUSEDOWN_TABLE)&&d.fireListeners(TABLE_EVENT_TYPE.MOUSEDOWN_TABLE,{event:e.nativeEvent}),d.eventManager.isDown=!0,d.eventManager.LastBodyPointerXY={x:e.x,y:e.y},d.eventManager.LastPointerXY={x:e.x,y:e.y},0===e.button){const i=getCellEventArgsSet(e);if(a.downIcon=void 0,s.interactionState===InteractionState[\\\"default\\\"]){d.isPivotChart()&&\\\"chart\\\"!==(null==(t=null==i?void 0:i.eventArgs)?void 0:t.target.type)&&d.scenegraph.updateChartState(null),(null==(t=i.eventArgs)?void 0:t.target)!==(null==(t=s.residentHoverIcon)?void 0:t.icon)&&s.hideMenu(),null!=(t=d.editorManager)&&t.completeEdit(e.nativeEvent);var t=null!=(t=null==(t=null==(t=null==i?void 0:i.eventArgs)?void 0:t.target)?void 0:t.role)&&t.startsWith(\\\"icon\\\")?i.eventArgs.target:void 0;if((a.downIcon=t)&&!1!==t.attribute.interactive)t.attribute.funcType===IconFuncTypeEnum.dragReorder&&(s.startMoveCol(i.eventArgs.col,i.eventArgs.row,i.abstractPos.x,i.abstractPos.y),s.updateInteractionState(InteractionState.grabing));else if(\\\"touch\\\"===e.pointerType)a.touchEnd=!1,a.touchSetTimeout=setTimeout(()=>{a.isTouchdown=!1,a.touchMove=!0,(!a.touchEnd&&(a.checkColumnResize(i,!0)||a.checkRowResize(i,!0))||!a.touchEnd&&a.chechColumnMover(i)||a.dealTableSelect(i)&&!a.touchEnd)&&s.updateInteractionState(InteractionState.grabing)},500),a.dealTableHover(i);else{if(!a.checkCellFillhandle(i)&&(a.checkColumnResize(i,!0)||a.checkRowResize(i,!0)))return d.scenegraph.updateChartState(null),void s.updateInteractionState(InteractionState.grabing);if(a.chechColumnMover(i))return void s.updateInteractionState(InteractionState.grabing);if(a.checkCellFillhandle(i,!0)&&a.dealFillSelect(i))return void s.updateInteractionState(InteractionState.grabing);a.dealTableSelect(i)&&s.updateInteractionState(InteractionState.grabing)}d.hasListeners(TABLE_EVENT_TYPE.MOUSEDOWN_CELL)&&(t=getCellEventArgsSet(e)).eventArgs&&d.fireListeners(TABLE_EVENT_TYPE.MOUSEDOWN_CELL,{col:t.eventArgs.col,row:t.eventArgs.row,event:e.nativeEvent,target:null==(t=null==t?void 0:t.eventArgs)?void 0:t.target})}}}),d.scenegraph.tableGroup.addEventListener(\\\"pointerup\\\",e=>{var t;0===e.button&&(\\\"grabing\\\"===s.interactionState?(s.updateInteractionState(InteractionState[\\\"default\\\"]),s.isResizeCol()?endResizeCol(d):s.isResizeRow()?endResizeRow(d):s.isMoveCol()?(t=getCellEventArgsSet(e),d.stateManager.endMoveCol(),t.eventArgs&&d.hasListeners(TABLE_EVENT_TYPE.CHANGE_HEADER_POSITION)&&d.fireListeners(TABLE_EVENT_TYPE.CHANGE_HEADER_POSITION,{target:{col:t.eventArgs.col,row:t.eventArgs.row},source:{col:d.stateManager.columnMove.colSource,row:d.stateManager.columnMove.rowSource}})):s.isSelecting()&&(d.stateManager.endSelectCells(),d.stateManager.isFillHandle()&&d.stateManager.endFillSelect(),t=getCellEventArgsSet(e),d.eventManager.isDraging)&&t.eventArgs&&d.hasListeners(TABLE_EVENT_TYPE.DRAG_SELECT_END)&&((t={event:e.nativeEvent,cells:[],col:t.eventArgs.target.col,row:t.eventArgs.target.row,scaleRatio:d.canvas.getBoundingClientRect().width/d.canvas.offsetWidth,target:null==(t=null==t?void 0:t.eventArgs)?void 0:t.target}).cells=d.getSelectedCellInfos(),d.fireListeners(TABLE_EVENT_TYPE.DRAG_SELECT_END,t))):s.interactionState===InteractionState.scrolling&&s.updateInteractionState(InteractionState[\\\"default\\\"]),d.hasListeners(TABLE_EVENT_TYPE.MOUSEUP_CELL))&&(t=getCellEventArgsSet(e)).eventArgs&&d.fireListeners(TABLE_EVENT_TYPE.MOUSEUP_CELL,{col:t.eventArgs.col,row:t.eventArgs.row,event:e.nativeEvent,target:null==(t=null==t?void 0:t.eventArgs)?void 0:t.target})}),d.scenegraph.tableGroup.addEventListener(\\\"rightdown\\\",i=>{var r=getCellEventArgsSet(i);if(r.eventArgs){s.triggerContextMenu(r.eventArgs.col,r.eventArgs.row,r.abstractPos.x,r.abstractPos.y);var{col:n,row:o}=r.eventArgs;if(d.hasListeners(TABLE_EVENT_TYPE.CONTEXTMENU_CELL)){var a,l=d.getCellInfo(n,o);let e,t;null!=(a=r.eventArgs)&&a.target&&(a=getIconAndPositionFromTarget(null==(a=r.eventArgs)?void 0:a.target))&&(e=a.icon,t=a.position);r=Object.assign(Object.assign({},l),{event:i.nativeEvent,cells:[],targetIcon:e?{name:e.name,position:t,funcType:e.attribute.funcType}:void 0,target:null==(a=null==r?void 0:r.eventArgs)?void 0:a.target});cellInRanges(d.stateManager.select.ranges,n,o)?r.cells=d.getSelectedCellInfos():r.cells=[[l]],d.fireListeners(TABLE_EVENT_TYPE.CONTEXTMENU_CELL,r)}}}),d.scenegraph.tableGroup.addEventListener(\\\"pointertap\\\",i=>{if(!d.stateManager.columnResize.resizing&&!d.stateManager.columnMove.moving){var r=getCellEventArgsSet(i);if(a.dealIconClick(i,r),null!=r&&r.eventArgs)if(a.touchSetTimeout&&\\\"touch\\\"===i.pointerType&&(n=getCellEventArgsSet(i),a.touchSetTimeout)&&(clearTimeout(a.touchSetTimeout),a.dealTableSelect(n),s.endSelectCells(),a.touchSetTimeout=void 0),!a.touchMove&&0===i.button&&d.hasListeners(TABLE_EVENT_TYPE.CLICK_CELL)){var{col:n,row:o}=r.eventArgs,n=d.getCellInfo(n,o);let e,t;null!=(o=r.eventArgs)&&o.target&&(o=getIconAndPositionFromTarget(null==(o=r.eventArgs)?void 0:o.target))&&(e=o.icon,t=o.position);n=Object.assign(Object.assign({},n),{event:i.nativeEvent,federatedEvent:i,cells:[],targetIcon:e?{name:e.name,position:t,funcType:e.attribute.funcType}:void 0,target:null==(o=null==r?void 0:r.eventArgs)?void 0:o.target});d.fireListeners(TABLE_EVENT_TYPE.CLICK_CELL,n)}}}),d.scenegraph.stage.addEventListener(\\\"pointerdown\\\",e=>{var t,i=getCellEventArgsSet(e);(null==(t=i.eventArgs)?void 0:t.target)!==(null==(t=s.residentHoverIcon)?void 0:t.icon)&&s.hideMenu(),null!=(t=d.editorManager)&&t.completeEdit(e.nativeEvent),!a.checkCellFillhandle(i)&&a.checkColumnResize(i,!0)&&(d.scenegraph.updateChartState(null),s.updateInteractionState(InteractionState.grabing))}),d.scenegraph.stage.addEventListener(\\\"pointerup\\\",e=>{\\\"grabing\\\"===s.interactionState&&(s.updateInteractionState(InteractionState[\\\"default\\\"]),s.isResizeCol())&&endResizeCol(d)}),d.scenegraph.stage.addEventListener(\\\"pointertap\\\",e=>{var t=e.target;d.eventManager.isDraging||!t||!t.isDescendantsOf(d.scenegraph.stage)&&t.stage!==t||t.isDescendantsOf(d.scenegraph.tableGroup)?d.eventManager.isDraging&&s.isSelecting()&&s.endSelectCells():(s.updateInteractionState(InteractionState[\\\"default\\\"]),a.dealTableHover(),a.dealTableSelect(),s.updateCursor(),d.scenegraph.updateChartState(null))}),d.scenegraph.stage.addEventListener(\\\"pointermove\\\",e=>{var t=getCellEventArgsSet(e);s.isResizeCol()||a.checkColumnResize(t)?d.stateManager.select&&a.checkCellFillhandle(t)?s.updateCursor(\\\"crosshair\\\"):s.updateCursor(\\\"col-resize\\\"):s.isResizeRow()||a.checkRowResize(t)?d.stateManager.select&&a.checkCellFillhandle(t)?s.updateCursor(\\\"crosshair\\\"):s.updateCursor(\\\"row-resize\\\"):s.updateCursor()}),d.scenegraph.tableGroup.addEventListener(\\\"checkbox_state_change\\\",i=>{var e=getCellEventArgsSet(i),{col:t,row:r}=e.eventArgs,n=d.getCellInfo(t,r),o=getCellMergeInfo(d,t,r);if(o)for(let t=o.start.col;t<=o.end.col;t++)for(let e=o.start.row;e<=o.end.row;e++)d.scenegraph.getCell(t,e).forEachChildren(e=>{\\\"checkbox\\\"===e.name&&e.setAttributes({checked:i.target.attribute.checked,indeterminate:i.target.attribute.indeterminate})});e=Object.assign(Object.assign({},n),{event:i.nativeEvent,target:null==(e=null==e?void 0:e.eventArgs)?void 0:e.target,checked:i.detail.checked});d.isHeader(t,r)?(d.stateManager.setHeaderCheckedState(n.field,i.detail.checked),\\\"checkbox\\\"===d.getCellType(t,r)&&d.scenegraph.updateCheckboxCellState(t,r,i.detail.checked)):(d.stateManager.setCheckedState(t,r,n.field,i.detail.checked),\\\"checkbox\\\"===d.getCellType(t,r)&&d.stateManager.headerCheckedState[n.field]!==(n=d.stateManager.updateHeaderCheckedState(n.field))&&d.scenegraph.updateHeaderCheckboxCellState(t,r,n)),d.fireListeners(TABLE_EVENT_TYPE.CHECKBOX_STATE_CHANGE,e),d.scenegraph.updateNextFrame()}),d.scenegraph.tableGroup.addEventListener(\\\"radio_checked\\\",e=>{const t=getCellEventArgsSet(e),{col:i,row:r,target:n}=t.eventArgs,o=d.getCellInfo(i,r),a=null==(s=regIndexReg.exec(n.id))?void 0:s[1],l=getCellMergeInfo(d,i,r);if(l)for(let t=l.start.col;t<=l.end.col;t++)for(let e=l.start.row;e<=l.end.row;e++)d.scenegraph.getCell(t,e).forEachChildren(e=>{\\\"radio\\\"===e.name&&e.id===n.id&&e.setAttributes({checked:!0})});var s=d.getBodyColumnDefine(i,r).radioCheckType||\\\"column\\\";if(\\\"cell\\\"===s)if(l)for(let t=l.start.col;t<=l.end.col;t++)for(let e=l.start.row;e<=l.end.row;e++)d.scenegraph.getCell(t,e).forEachChildren(e=>{\\\"radio\\\"===e.name&&e.id!==n.id&&e.setAttributes({checked:!1})});else d.scenegraph.getCell(i,r).forEachChildren(e=>{\\\"radio\\\"===e.name&&e.id!==n.id&&e.setAttributes({checked:!1})});else\\\"column\\\"===s&&d.scenegraph.getColGroup(i).forEachChildren(e=>{e.forEachChildren(e=>{\\\"radio\\\"===e.name&&e.id!==n.id&&e.setAttributes({checked:!1})})});var h=a?Number(a):void 0,s=(d.stateManager.setRadioState(i,r,o.field,s,h),Object.assign(Object.assign({},o),{event:e.nativeEvent,target:null==(s=null==t?void 0:t.eventArgs)?void 0:s.target,radioIndexInCell:h}));d.fireListeners(TABLE_EVENT_TYPE.RADIO_STATE_CHANGE,s),d.scenegraph.updateNextFrame()})}function bindGesture(e){const t=e.table;e.gesture=new Gesture(t.scenegraph.tableGroup,{tap:{interval:300}}),e.gesture.on(\\\"doubletap\\\",e=>{dblclickHandler(e,t)})}function endResizeCol(e){e.stateManager.endResizeCol();var t=[];for(let i=0;i<e.colCount;i++)t.push(e.getColWidth(i));e.fireListeners(TABLE_EVENT_TYPE.RESIZE_COLUMN_END,{col:e.stateManager.columnResize.col,colWidths:t})}function endResizeRow(e){e.stateManager.endResizeRow(),e.fireListeners(TABLE_EVENT_TYPE.RESIZE_ROW_END,{row:e.stateManager.rowResize.row,rowHeight:e.getRowHeight(e.stateManager.rowResize.row)})}function dblclickHandler(i,r){var n=getCellEventArgsSet(i);let o=-1,a=-1;n.eventArgs&&(o=n.eventArgs.col,a=n.eventArgs.row);var l=r.getCellValue(o,a),s=null==(s=null==(s=n.eventArgs)?void 0:s.targetCell)?void 0:s.globalAABBBounds;if(s&&r.internalProps.focusControl.setFocusRect(new Rect2(s.x1+r.scrollLeft,s.y1+r.scrollTop,s.x2-s.x1,s.y2-s.y1),l),r.hasListeners(TABLE_EVENT_TYPE.DBLCLICK_CELL)){s=r.getCellInfo(o,a);let e,t;null!=(l=n.eventArgs)&&l.target&&(l=getIconAndPositionFromTarget(null==(l=n.eventArgs)?void 0:l.target))&&(e=l.icon,t=l.position);s=Object.assign(Object.assign({},s),{event:i.nativeEvent,federatedEvent:i,cells:[],targetIcon:e?{name:e.name,position:t,funcType:e.attribute.funcType}:void 0,target:null==(l=null==n?void 0:n.eventArgs)?void 0:l.target});r.fireListeners(TABLE_EVENT_TYPE.DBLCLICK_CELL,s)}}function bindScrollBarListener(e){const t=e.table,i=t.stateManager,r=t.scenegraph,n=(r.component.vScrollBar.addEventListener(\\\"pointerover\\\",e=>{i.showVerticalScrollBar()}),r.component.hScrollBar.addEventListener(\\\"pointerover\\\",e=>{i.showHorizontalScrollBar()}),r.component.vScrollBar.addEventListener(\\\"pointerout\\\",e=>{i.interactionState!==InteractionState.scrolling&&i.hideVerticalScrollBar()}),r.component.hScrollBar.addEventListener(\\\"pointerout\\\",e=>{i.interactionState!==InteractionState.scrolling&&i.hideHorizontalScrollBar()}),r.component.vScrollBar.addEventListener(\\\"pointermove\\\",e=>{r.table.stateManager.updateCursor(\\\"default\\\"),e.stopPropagation()}),r.component.vScrollBar.addEventListener(\\\"pointerdown\\\",e=>{e.stopPropagation()}),r.component.vScrollBar.addEventListener(\\\"scrollDown\\\",e=>{var t;r.table.eventManager.LastBodyPointerXY={x:e.x,y:e.y},r.table.eventManager.isDown=!0,i.interactionState!==InteractionState.scrolling&&i.updateInteractionState(InteractionState.scrolling),r.table.stateManager.hideMenu(),null!=(t=r.table.editorManager)&&t.completeEdit(),r.table.hasListeners(TABLE_EVENT_TYPE.MOUSEDOWN_TABLE)&&r.table.fireListeners(TABLE_EVENT_TYPE.MOUSEDOWN_TABLE,{event:e.nativeEvent})}),r.component.vScrollBar.addEventListener(\\\"pointerup\\\",()=>{i.fastScrolling=!1,r.table.eventManager.isDraging=!1,i.interactionState===InteractionState.scrolling&&i.updateInteractionState(InteractionState[\\\"default\\\"])}),r.component.vScrollBar.addEventListener(\\\"pointerupoutside\\\",()=>{i.fastScrolling=!1,i.interactionState===InteractionState.scrolling&&i.updateInteractionState(InteractionState[\\\"default\\\"])}),r.component.vScrollBar.addEventListener(\\\"scrollUp\\\",e=>{r.table.eventManager.isDraging=!1}),r.component.hScrollBar.addEventListener(\\\"pointermove\\\",e=>{r.table.stateManager.updateCursor(\\\"default\\\"),e.stopPropagation()}),r.component.hScrollBar.addEventListener(\\\"pointerdown\\\",e=>{e.stopPropagation()}),r.component.hScrollBar.addEventListener(\\\"scrollDown\\\",e=>{var t;r.table.eventManager.LastBodyPointerXY={x:e.x,y:e.y},r.table.eventManager.isDown=!0,i.interactionState!==InteractionState.scrolling&&i.updateInteractionState(InteractionState.scrolling),r.table.stateManager.hideMenu(),null!=(t=r.table.editorManager)&&t.completeEdit(),r.table.hasListeners(TABLE_EVENT_TYPE.MOUSEDOWN_TABLE)&&r.table.fireListeners(TABLE_EVENT_TYPE.MOUSEDOWN_TABLE,{event:e.nativeEvent})}),r.component.hScrollBar.addEventListener(\\\"pointerup\\\",()=>{i.fastScrolling=!1,r.table.eventManager.isDraging=!1,i.interactionState===InteractionState.scrolling&&i.updateInteractionState(InteractionState[\\\"default\\\"])}),r.component.hScrollBar.addEventListener(\\\"pointerupoutside\\\",()=>{i.fastScrolling=!1,i.interactionState===InteractionState.scrolling&&i.updateInteractionState(InteractionState[\\\"default\\\"])}),r.component.hScrollBar.addEventListener(\\\"scrollUp\\\",e=>{r.table.eventManager.isDraging=!1}),throttle2(i.updateVerticalScrollBar,20)),o=throttle2(i.updateHorizontalScrollBar,20);r.component.vScrollBar.addEventListener(\\\"scrollDrag\\\",e=>{r.table.eventManager.isDown&&(r.table.eventManager.isDraging=!0),i.fastScrolling=!0,i.interactionState!==InteractionState.scrolling&&i.updateInteractionState(InteractionState.scrolling);var t=e.detail.value[0]/(1-e.detail.value[1]+e.detail.value[0]);n(t,e)}),r.component.hScrollBar.addEventListener(\\\"scrollDrag\\\",e=>{r.table.eventManager.isDown&&(r.table.eventManager.isDraging=!0),i.fastScrolling=!0,i.interactionState!==InteractionState.scrolling&&i.updateInteractionState(InteractionState.scrolling);var t=e.detail.value[0]/(1-e.detail.value[1]+e.detail.value[0]);o(t)})}function handleWhell(e,t,i=!0){let{deltaX:r,deltaY:n}=e;e.shiftKey&&e.deltaY&&(r=n,n=0);var[o,a]=optimizeScrollXY(r,n,{horizontal:1,vertical:1});(o||a)&&t.interactionState!==InteractionState.scrolling&&t.updateInteractionState(InteractionState.scrolling),o&&(t.setScrollLeft(t.scroll.horizontalBarPos+o),t.showHorizontalScrollBar(!0)),a&&(t.setScrollTop(t.scroll.verticalBarPos+a),t.showVerticalScrollBar(!0)),i&&t.resetInteractionState(),e.cancelable&&(\\\"none\\\"===t.table.internalProps.overscrollBehavior||Math.abs(n)>=Math.abs(r)&&0!==n&&isVerticalScrollable(n,t)||Math.abs(n)<=Math.abs(r)&&0!==r&&isHorizontalScrollable(r,t))&&e.preventDefault()}function optimizeScrollXY(e,t,i){var r=Math.abs(e/t),n=2<r?0:t;return[Math.ceil((r<=.5?0:e)*(null!=(r=i.horizontal)?r:0)),Math.ceil(n*(null!=(r=i.vertical)?r:0))]}function isVerticalScrollable(e,t){return 0!=t.table.getAllRowsHeight()-t.table.scenegraph.height&&!isScrollToTop(e,t)&&!isScrollToBottom(e,t)}function isHorizontalScrollable(e,t){return 0!=t.table.getAllColsWidth()-t.table.scenegraph.width&&!isScrollToLeft(e,t)&&!isScrollToRight(e,t)}function isScrollToTop(e,t){return 0!=t.table.getAllRowsHeight()-t.table.scenegraph.height&&e<=0&&t.scroll.verticalBarPos<1}function isScrollToBottom(e,t){var i=t.table.getAllRowsHeight()-t.table.scenegraph.height;return 0!=i&&0<=e&&Math.abs(t.scroll.verticalBarPos-i)<1}function isScrollToLeft(e,t){return 0!=t.table.getAllColsWidth()-t.table.scenegraph.width&&e<=0&&t.scroll.horizontalBarPos<1}function isScrollToRight(e,t){var i=t.table.getAllColsWidth()-t.table.scenegraph.width;return 0!=i&&0<=e&&Math.abs(t.scroll.horizontalBarPos-i)<1}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var InertiaScroll=class{constructor(e){this.stateManager=e}setScrollHandle(e){this.scrollHandle=e}startInertia(e,t,i){this.lastTime=Date.now(),this.speedX=e,this.speedY=t,this.friction=i,this.runingId||(this.runingId=requestAnimationFrame(this.inertia.bind(this)))}inertia(){var e=Date.now(),t=e-this.lastTime;let i=!0;var r=Math.pow(this.friction,t/16),n=r*this.speedX,r=r*this.speedY;let o=0,a=0;.05<Math.abs(n)&&(i=!1,o=(this.speedX+n)/2*t),.05<Math.abs(r)&&(i=!1,a=(this.speedY+r)/2*t),null!=(t=this.scrollHandle)&&t.call(this,o,a),i?this.runingId=null:(this.lastTime=e,this.speedX=n,this.speedY=r,this.runingId=requestAnimationFrame(this.inertia.bind(this)))}endInertia(){cancelAnimationFrame(this.runingId),this.runingId=null}isInertiaScrolling(){return!!this.runingId}};function bindContainerDomListener(a){const v=a.table,l=v.stateManager,e=v.internalProps.handler;function u(e){var t=v.stateManager.select.ranges,i=t.length,r=Math.min(t[i-1].start.col,t[i-1].end.col),n=Math.min(t[i-1].start.row,t[i-1].end.row),o=Math.max(t[i-1].start.col,t[i-1].end.col),i=Math.max(t[i-1].start.row,t[i-1].end.row);let a=0,l,s=[];e.split(\\\"\\\\n\\\").forEach(function(e,t){var i;const r=e.split(\\\"\\\\t\\\"),n=[];s.push(n),r.forEach(function(e,t){t===r.length-1&&(e=e.trim()),n.push(e)}),a=Math.max(a,null!=(i=null==n?void 0:n.length)?i:0)}),l=null!=(t=s.length)?t:0,s=c(s,l,a,i-n+1,o-r+1),v.changeCellValues(r,n,s,!0)}function c(i,r,n,e,o){if(n<o||r<e){if(o%n!=0||e%r!=0)return i;var a=[];for(let t=0;t<e;t++){var l=[];a.push(l);for(let e=0;e<o;e++){var s=t%r,h=e%n;l.push(i[s][h])}}return a}return i}e.on(v.getElement(),\\\"blur\\\",e=>{a.dealTableHover()}),e.on(v.getElement(),\\\"wheel\\\",e=>{handleWhell(e,l)}),e.on(v.getElement(),\\\"keydown\\\",i=>{var r,e,t,n;if(\\\"a\\\"===i.key&&(i.ctrlKey||i.metaKey))null!=(r=v.keyboardOptions)&&r.selectAllOnCtrlA&&(i.preventDefault(),a.deelTableSelectAll());else if(0<=l.select.cellPos.col&&0<=l.select.cellPos.row&&(\\\"ArrowUp\\\"===i.key||\\\"ArrowDown\\\"===i.key||\\\"ArrowLeft\\\"===i.key||\\\"ArrowRight\\\"===i.key)){if((null==(r=null==(r=v.options.keyboardOptions)?void 0:r.moveEditCellOnArrowKeys)||!r)&&v.editorManager.editingEditor)return;let e,t;i.preventDefault(),i.stopPropagation(),\\\"ArrowUp\\\"===i.key?(e=l.select.cellPos.col,t=Math.min(v.rowCount-1,Math.max(0,l.select.cellPos.row-1))):\\\"ArrowDown\\\"===i.key?(e=l.select.cellPos.col,t=Math.min(v.rowCount-1,Math.max(0,l.select.cellPos.row+1))):\\\"ArrowLeft\\\"===i.key?(t=l.select.cellPos.row,e=Math.min(v.colCount-1,Math.max(0,l.select.cellPos.col-1))):\\\"ArrowRight\\\"===i.key&&(t=l.select.cellPos.row,e=Math.min(v.colCount-1,Math.max(0,l.select.cellPos.col+1))),v.selectCell(e,t),null!=(r=null==(r=v.options.keyboardOptions)?void 0:r.moveEditCellOnArrowKeys)&&r&&v.editorManager.editingEditor&&(v.editorManager.completeEdit(),v.getElement().focus(),v.getEditor(e,t))&&v.editorManager.startEditCell(e,t)}else if(\\\"Escape\\\"===i.key)v.editorManager.cancelEdit();else if(\\\"Enter\\\"===i.key)v.editorManager.editingEditor?(v.editorManager.completeEdit(),v.getElement().focus()):null!=(r=null==(r=v.options.keyboardOptions)?void 0:r.editCellOnEnter)&&!r||1!==(null!=(r=null==(r=v.stateManager.select.ranges)?void 0:r.length)?r:0)||(r=v.stateManager.select.ranges[0].start.col,n=v.stateManager.select.ranges[0].start.row,e=v.stateManager.select.ranges[0].end.col,t=v.stateManager.select.ranges[0].end.row,r===e&&n===t&&v.getEditor(r,n)&&v.editorManager.startEditCell(r,n));else if(\\\"Tab\\\"===i.key&&(null==(t=null==(e=v.options.keyboardOptions)?void 0:e.moveFocusCellOnTab)||t)&&(i.preventDefault(),0<=l.select.cellPos.col)&&0<=l.select.cellPos.row){let e,t;e=l.select.cellPos.col===v.colCount-1?(t=Math.min(v.rowCount-1,l.select.cellPos.row+1),v.rowHeaderLevelCount):l.select.cellPos.row===v.rowCount-1?(t=v.rowCount-1,v.rowHeaderLevelCount):(t=l.select.cellPos.row,l.select.cellPos.col+1),v.selectCell(e,t),v.editorManager.editingEditor&&(v.editorManager.completeEdit(),v.getElement().focus(),v.getEditor(e,t))&&v.editorManager.startEditCell(e,t)}v.hasListeners(TABLE_EVENT_TYPE.KEYDOWN)&&(n={keyCode:null!=(r=i.keyCode)?r:i.which,code:i.code,event:i,scaleRatio:v.canvas.getBoundingClientRect().width/v.canvas.offsetWidth},v.fireListeners(TABLE_EVENT_TYPE.KEYDOWN,n))}),e.on(v.getElement(),\\\"copy\\\",e=>{var t,i;null!=(t=v.keyboardOptions)&&t.copySelected&&(t=v.getCopyValue(),isValid_default(t))&&(e.preventDefault(),null!=(i=navigator.clipboard)&&i.write?(i=(e=>{const n=[\\\"<table>\\\"],t=['<meta name=\\\"author\\\" content=\\\"Visactor\\\"/>','<style type=\\\"text/css\\\">td{white-space:normal}br{mso-data-placement:same-cell}</style>'].join(\\\"\\\");return e.split(\\\"\\\\r\\\\n\\\").forEach(function(e,t){const i=e.split(\\\"\\\\t\\\"),r=[];0===t&&n.push(\\\"<tbody>\\\"),i.forEach(function(e,t){var i=e?e.toString().replace(/&/g,\\\"&amp;\\\").replace(/'/g,\\\"&#39;\\\").replace(/</g,\\\"&lt;\\\").replace(/>/g,\\\"&gt;\\\").replace(/\\\\n/g,\\\"<br>\\\").replace(/(<br(\\\\s*|\\\\/)>(\\\\r\\\\n|\\\\n)?|\\\\r\\\\n|\\\\n)/g,\\\"<br>\\\\r\\\\n\\\").replace(/\\\\x20{2,}/gi,e=>`<span style=\\\"mso-spacerun: yes\\\">${\\\"&nbsp;\\\".repeat(e.length-1)} </span>`).replace(/\\\\t/gi,\\\"&#9;\\\"):\\\"\\\";r.push(`<td>${i}</td>`)}),n.push(\\\"<tr>\\\",...r,\\\"</tr>\\\"),t===e.length-1&&n.push(\\\"</tbody>\\\")}),n.push(\\\"</table>\\\"),[t,n.join(\\\"\\\")].join(\\\"\\\")})(t),navigator.clipboard.write([new ClipboardItem({\\\"text/html\\\":new Blob([i],{type:\\\"text/html\\\"}),\\\"text/plain\\\":new Blob([t],{type:\\\"text/plain\\\"})})])):browser2.IE?window.clipboardData.setData(\\\"Text\\\",t):e.clipboardData.setData(\\\"text/plain\\\",t),v.fireListeners(TABLE_EVENT_TYPE.COPY_DATA,{cellRange:v.stateManager.select.ranges,copyData:t}))}),e.on(v.getElement(),\\\"paste\\\",e=>{var t;if(null!=(t=v.keyboardOptions)&&t.pasteValueToCell&&v.changeCellValues&&(null==(t=v.editorManager)||!t.editingEditor)&&0<(null==(t=v.stateManager.select.ranges)?void 0:t.length))if(null!=(t=navigator.clipboard)&&t.read)navigator.clipboard.read().then(e=>{for(const t of e)t.types.includes(\\\"text/html\\\")?function(e){const t=v.stateManager.select.ranges,i=t.length,n=Math.min(t[i-1].start.col,t[i-1].end.col),o=Math.min(t[i-1].start.row,t[i-1].end.row),a=Math.max(t[i-1].start.col,t[i-1].end.col),l=Math.max(t[i-1].start.row,t[i-1].end.row);let s=0,h=0,d=[];e.getType(\\\"text/html\\\").then(e=>{e.text().then(e=>{var t;if(e&&/(<table)|(<TABLE)/g.test(e)){for(const r of Array.from(e.matchAll(/<tr[^>]*>(.*?)<\\\\/tr>/gs))){var i=r[1],i=Array.from(i.matchAll(/<td[^>]*>(.*?)<\\\\/td>/gs)).map(e=>e[1].replace(/(<(?!br)([^>]+)>)/gi,\\\"\\\").replace(/<br(\\\\s*|\\\\/)>[\\\\r\\\\n]?/gim,\\\"\\\\n\\\").replace(/&amp;/g,\\\"&\\\").replace(/&lt;/g,\\\"<\\\").replace(/&gt;/g,\\\">\\\").replace(/&#9;/gi,\\\"\\\\t\\\").replace(/&nbsp;/g,\\\" \\\"));d.push(i),s=Math.max(s,null!=(i=null==i?void 0:i.length)?i:0)}h=null!=(t=d.length)?t:0,d=c(d,h,s,l-o+1,a-n+1),v.changeCellValues(n,o,d,!0)}else navigator.clipboard.read().then(e=>{for(const t of e)t.types.includes(\\\"text/plain\\\")&&t.getType(\\\"text/plain\\\").then(e=>{e.text().then(u)})})})})}(t):1===t.types.length&&\\\"text/plain\\\"===t.types[0]&&function(e){const t=v.stateManager.select.ranges,i=t.length,r=Math.min(t[i-1].start.col,t[i-1].end.col),n=Math.min(t[i-1].start.row,t[i-1].end.row),a=Math.max(t[i-1].start.col,t[i-1].end.col),l=Math.max(t[i-1].start.row,t[i-1].end.row);let s=0,h=0;e.getType(\\\"text/plain\\\").then(e=>{e.text().then(e=>{var t=e.replace(/\\\\r(?!\\\\n)/g,\\\"\\\\r\\\\n\\\").split(\\\"\\\\r\\\\n\\\");let o=[];1<t.length&&\\\"\\\"===t[t.length-1]&&t.pop(),t.forEach(function(e,t){var i;const r=e.split(\\\"\\\\t\\\"),n=[];o.push(n),r.forEach(function(e,t){e.includes(\\\"\\\\n\\\")&&(e=e.replace(/^\\\"(.*)\\\"$/,\\\"$1\\\").replace(/[\\\"]*/g,e=>new Array(Math.floor(e.length/2)).fill('\\\"').join(\\\"\\\"))),n.push(e)}),s=Math.max(s,null!=(i=null==n?void 0:n.length)?i:0)}),h=null!=(t=o.length)?t:0,o=c(o,h,s,l-n+1,a-r+1),v.changeCellValues(r,n,o,!0)})})}(t)});else{const i=v.stateManager.select.ranges,r=Math.min(i[0].start.col,i[0].end.col),n=Math.min(i[0].start.row,i[0].end.row),o=(e.clipboardData||window.Clipboard).getData(\\\"text\\\").split(\\\"\\\\n\\\"),a=[];o.forEach(function(e,t){const i=e.split(\\\"\\\\t\\\"),r=[];a.push(r),i.forEach(function(e,t){t===i.length-1&&(e=e.trim()),r.push(e)})}),v.changeCellValues(r,n,a)}}),e.on(v.getElement(),\\\"contextmenu\\\",e=>{var t;!1!==(null==(t=v.eventOptions)?void 0:t.preventDefaultContextMenu)&&e.preventDefault()}),e.on(v.getContainer(),\\\"resize\\\",e=>{0===e.width&&0===e.height||v.resize()});var t=e=>{v.eventManager.LastBodyPointerXY={x:e.x,y:e.y},v.eventManager.isDown=!0},t=(a.globalEventListeners.push({name:\\\"pointerdown\\\",env:\\\"body\\\",callback:t}),document.body.addEventListener(\\\"pointerdown\\\",t),e=>{v.eventManager.LastBodyPointerXY=null,v.eventManager.isDown=!1,v.eventManager.isDraging=!1,v.eventManager.inertiaScroll.endInertia()}),t=(a.globalEventListeners.push({name:\\\"pointerup\\\",env:\\\"document\\\",callback:t}),document.addEventListener(\\\"pointerup\\\",t),e=>{var t;v.eventManager.isDown&&v.eventManager.LastBodyPointerXY&&(i=null!=(i=null==(i=v.eventManager.LastBodyPointerXY)?void 0:i.x)?i:e.x,t=null!=(t=null==(t=v.eventManager.LastBodyPointerXY)?void 0:t.y)?t:e.y,1<Math.abs(i-e.x)||1<Math.abs(t-e.y))&&(v.eventManager.isDraging=!0);const{x:d,y:u}=v._getMouseAbstractPoint(e,!1);l.interactionState===InteractionState.grabing&&(l.isResizeCol()?(a.dealColumnResize(d,u),v.hasListeners(TABLE_EVENT_TYPE.RESIZE_COLUMN)&&v.fireListeners(TABLE_EVENT_TYPE.RESIZE_COLUMN,{col:v.stateManager.columnResize.col,colWidth:v.getColWidth(v.stateManager.columnResize.col)})):l.isResizeRow()&&(a.dealRowResize(d,u),v.hasListeners(TABLE_EVENT_TYPE.RESIZE_ROW))&&v.fireListeners(TABLE_EVENT_TYPE.RESIZE_ROW,{row:v.stateManager.rowResize.row,rowHeight:v.getRowHeight(v.stateManager.rowResize.row)}));var i=v.stateManager.isSelecting();if(a.isDraging&&i&&0<(null==(t=v.stateManager.select.ranges)?void 0:t.length)){const c=v.getDrawRange(),g=v.getFrozenRowsHeight(),p=v.getBottomFrozenRowsHeight(),f=v.getFrozenColsWidth(),m=v.getRightFrozenColsWidth(),r=v.stateManager.select.ranges[v.stateManager.select.ranges.length-1].start,n=v.stateManager.select.ranges[v.stateManager.select.ranges.length-1].end,o=(!1===v.isFrozenRow(r.row)||!1===v.isFrozenRow(n.row))&&v.getAllRowsHeight()>v.tableNoFrameHeight,b=(!1===v.isFrozenColumn(r.col)||!1===v.isFrozenColumn(n.col))&&v.getAllColsWidth()>v.tableNoFrameWidth;if((u>c.bottom-p||u<c.top+g)&&o||(d>c.right-m||d<c.left+f)&&b){v.eventManager.scrollXSpeed=0,v.eventManager.scrollYSpeed=0;let a=!1,l=!1,s=!1,h=!1;u>c.bottom-p&&o&&v.scrollTop+v.tableNoFrameWidth<v.getAllRowsHeight()?(a=!0,v.eventManager.scrollYSpeed=-(u-c.bottom+p)/50):u<c.top+g&&o&&0<v.scrollTop&&(l=!0,v.eventManager.scrollYSpeed=-(u-c.top-g)/50),d>c.right-m&&b&&v.scrollLeft+v.tableNoFrameWidth<v.getAllColsWidth()?(s=!0,v.eventManager.scrollXSpeed=-(d-c.right+m)/50):d<c.left+f&&b&&0<v.scrollLeft&&(h=!0,v.eventManager.scrollXSpeed=-(d-c.left-f)/50),v.eventManager.inertiaScroll.startInertia(v.eventManager.scrollXSpeed,v.eventManager.scrollYSpeed,1),v.eventManager.inertiaScroll.setScrollHandle((e,t)=>{let i,r,n=(handleWhell({deltaX:-e,deltaY:-t},v.stateManager,!1),a?r=v.scrollTop+c.height-p-20:l&&(r=v.scrollTop+g+20),s?i=v.scrollLeft+c.width-m-20:h&&(i=v.scrollLeft+f+20),!1),o=!1;s||h||(d>v.tableNoFrameWidth-v.getRightFrozenColsWidth()&&d<v.tableNoFrameWidth||0<d&&d<v.getFrozenColsWidth()?(i=d,o=!0):i=v.scrollLeft+d),a||l||(u>v.tableNoFrameHeight-v.getBottomFrozenRowsHeight()&&u<v.tableNoFrameHeight||0<u&&u<v.getFrozenRowsHeight()?(r=u,n=!0):r=v.scrollTop+u),v.stateManager.updateInteractionState(InteractionState.grabing),v.stateManager.updateSelectPos(v.getTargetColAtConsiderRightFrozen(i,o).col,v.getTargetRowAtConsiderBottomFrozen(r,n).row,!1,!1,!1,!0)})}else v.eventManager.inertiaScroll.isInertiaScrolling()?v.eventManager.inertiaScroll.endInertia():v.eventManager.scrollYSpeed=0}});a.globalEventListeners.push({name:\\\"pointermove\\\",env:\\\"body\\\",callback:t}),document.body.addEventListener(\\\"pointermove\\\",t)}function bindTouchListener(n){const o=n.table,r=o.stateManager,t=o.scenegraph;n.touchMovePoints=[],o.scenegraph.tableGroup.addEventListener(\\\"touchstart\\\",e=>{e.target.isChildOf(t.component.vScrollBar)||e.target.isChildOf(t.component.vScrollBar)||(n.isTouchdown=!0,n.touchMovePoints.push({x:e.page.x,y:e.page.y,timestamp:Date.now()}))});var e=e=>{var t,i;n.touchMove&&e.preventDefault(),n.isTouchdown&&isTouchEvent2(e)&&((null==(t=null==(t=n.downIcon)?void 0:t.attribute)?void 0:t.funcType)===IconFuncTypeEnum.dragReorder||(4<n.touchMovePoints.length&&n.touchMovePoints.shift(),n.touchMovePoints.push({x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,timestamp:Date.now()}),handleWhell({deltaX:t=-n.touchMovePoints[n.touchMovePoints.length-1].x+n.touchMovePoints[n.touchMovePoints.length-2].x,deltaY:i=-n.touchMovePoints[n.touchMovePoints.length-1].y+n.touchMovePoints[n.touchMovePoints.length-2].y},r),e.cancelable&&(\\\"none\\\"===o.internalProps.overscrollBehavior||Math.abs(i)>=Math.abs(t)&&0!==i&&isVerticalScrollable(i,r)||Math.abs(i)<=Math.abs(t)&&0!==t&&isHorizontalScrollable(t,r))))&&e.preventDefault()},e=(window.addEventListener(\\\"touchmove\\\",e,{passive:!1}),n.globalEventListeners.push({name:\\\"touchmove\\\",env:\\\"window\\\",callback:e}),e=>{var t,i,r;n.touchEnd=!0,n.touchMove=!1,n.isTouchdown&&isTouchEvent2(e)&&((null==(t=null==(t=n.downIcon)?void 0:t.attribute)?void 0:t.funcType)===IconFuncTypeEnum.dragReorder?e.preventDefault():null!=(t=n.touchMovePoints)&&t.length&&(4<n.touchMovePoints.length&&n.touchMovePoints.shift(),n.touchMovePoints.push({x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,timestamp:Date.now()}),t=n.touchMovePoints[0],i=((r=n.touchMovePoints[(null==(r=n.touchMovePoints)?void 0:r.length)-1]).x-t.x)/(r.timestamp-t.timestamp),r=(r.y-t.y)/(r.timestamp-t.timestamp),n.inertiaScroll.startInertia(i,r,.95),o.eventManager.inertiaScroll.setScrollHandle((e,t)=>{handleWhell({deltaX:-e,deltaY:-t},o.stateManager)})),n.isTouchdown=!1,n.touchMovePoints=[])}),e=(window.addEventListener(\\\"touchend\\\",e),n.globalEventListeners.push({name:\\\"touchend\\\",env:\\\"window\\\",callback:e}),e=>{n.touchEnd=!0,n.touchMove=!1,n.isTouchdown&&(n.isTouchdown=!1,n.touchMovePoints=[])});window.addEventListener(\\\"touchcancel\\\",e),n.globalEventListeners.push({name:\\\"touchcancel\\\",env:\\\"window\\\",callback:e})}function isTouchEvent2(e){return!!e.changedTouches}function bindAxisClickEvent(a){a.isPivotChart()&&a.scenegraph.tableGroup.addEventListener(\\\"click\\\",i=>{if(!a.stateManager.columnMove.moving&&!a.stateManager.columnResize.resizing)if(\\\"axis-label\\\"===i.target.name){var{col:r,row:n}=getCellEventArgsSet(i).eventArgs,o=a.internalProps.layoutMap;let e,t;n=(t=o.indicatorsAsCol?(e=o.getDimensionKeyInChartSpec(o.rowHeaderLevelCount,n),o.getCellHeaderPaths(o.rowHeaderLevelCount-2,n).rowHeaderPaths):(e=o.getDimensionKeyInChartSpec(r,o.columnHeaderLevelCount),o.getCellHeaderPaths(r,o.columnHeaderLevelCount-1).colHeaderPaths)).map(e=>({key:e.dimensionKey,value:e.value})).filter(e=>e.key);n.push({key:e,value:i.target.attribute.text}),a._selectedDimensionInChart.length&&isSameSelectedDimension(a._selectedDimensionInChart,n)||(a._selectedDimensionInChart=n,o.updateDataStateToChartInstance(),clearChartCacheImage(a.scenegraph),a.scenegraph.updateNextFrame())}else null!=(r=a._selectedDimensionInChart)&&r.length&&(a._selectedDimensionInChart.length=0,a.internalProps.layoutMap.updateDataStateToChartInstance(),clearChartCacheImage(a.scenegraph),a.scenegraph.updateNextFrame())})}function isSameSelectedDimension(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i].key!==t[i].key||e[i].value!==t[i].value)return!1;return!0}function bindAxisHoverEvent(r){r.isPivotChart()&&(r.on(TABLE_EVENT_TYPE.MOUSEENTER_CELL,i=>{r.scenegraph.getCell(i.col,i.row).forEachChildren(e=>{var t;\\\"axis\\\"===e.name&&(t=getAxisPosition(i.col,i.row,r.internalProps.layoutMap),i.axisPosition=t,r.fireListeners(TABLE_EVENT_TYPE.MOUSEENTER_AXIS,i))})}),r.on(TABLE_EVENT_TYPE.MOUSELEAVE_CELL,i=>{r.scenegraph.getCell(i.col,i.row).forEachChildren(e=>{var t;\\\"axis\\\"===e.name&&(t=getAxisPosition(i.col,i.row,r.internalProps.layoutMap),i.axisPosition=t,r.fireListeners(TABLE_EVENT_TYPE.MOUSELEAVE_AXIS,i))})}))}function getAxisPosition(e,t,i){if(i.indicatorsAsCol){if(i.hasTwoIndicatorAxes&&t===i.columnHeaderLevelCount-1&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount)return\\\"top\\\";if(t===i.rowCount-i.bottomFrozenRowCount&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount)return\\\"bottom\\\";if(e===i.rowHeaderLevelCount-1&&t>=i.rowHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount)return\\\"left\\\"}else{if(e===i.rowHeaderLevelCount-1&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount)return\\\"left\\\";if(e===i.colCount-i.rightFrozenColCount&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount)return\\\"right\\\";if(t===i.rowCount-i.bottomFrozenRowCount&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount);}return\\\"bottom\\\"}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var defaultStyle9,EventManager2=class{constructor(e){this.isDown=!1,this.isDraging=!1,this.globalEventListeners=[],this.table=e,this.handleTextStickBindId=[],this.inertiaScroll=new InertiaScroll(e.stateManager),\\\"node\\\"!==Env.mode&&(this.bindOuterEvent(),setTimeout(()=>{this.bindSelfEvent()},0))}bindOuterEvent(){bindTableGroupListener(this),bindContainerDomListener(this),bindScrollBarListener(this),bindTouchListener(this),bindGesture(this)}updateEventBinder(){setTimeout(()=>{var e;checkHaveTextStick(this.table)&&0===(null==(e=this.handleTextStickBindId)?void 0:e.length)?(this.handleTextStickBindId.push(this.table.on(TABLE_EVENT_TYPE.SCROLL,e=>{handleTextStick(this.table)})),this.handleTextStickBindId.push(this.table.on(TABLE_EVENT_TYPE.RESIZE_COLUMN_END,e=>{handleTextStick(this.table)})),this.handleTextStickBindId.push(this.table.on(TABLE_EVENT_TYPE.RESIZE_ROW_END,e=>{handleTextStick(this.table)}))):!checkHaveTextStick(this.table)&&this.handleTextStickBindId&&(this.handleTextStickBindId.forEach(e=>{this.table.off(e)}),this.handleTextStickBindId=[])},0)}bindSelfEvent(){if(!this.table.isReleased){const s=this.table.stateManager;this.table.on(TABLE_EVENT_TYPE.ICON_CLICK,e=>{var{col:t,row:i,x:r,y:n,funcType:o,icon:a,event:l}=e;o===IconFuncTypeEnum.dropDown?s.triggerDropDownMenu(t,i,r,n,l):o===IconFuncTypeEnum.sort?s.triggerSort(t,i,a,l):o===IconFuncTypeEnum.frozen?s.triggerFreeze(t,i,a):o===IconFuncTypeEnum.drillDown?drillClick(this.table):o!==IconFuncTypeEnum.collapse&&o!==IconFuncTypeEnum.expand||(this.table.stateManager.updateSelectPos(-1,-1),this.table.toggleHierarchyState(t,i))}),this.table.on(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLICK,()=>{s.hideMenu()}),this.updateEventBinder(),bindMediaClick(this.table),this.table.on(TABLE_EVENT_TYPE.DBLCLICK_CELL,e=>{if(e.federatedEvent){var t=getCellEventArgsSet(e.federatedEvent),i=this.table.scenegraph.getResizeColAt(t.abstractPos.x,t.abstractPos.y,null==(i=t.eventArgs)?void 0:i.targetCell);if(this.table.eventManager.checkCellFillhandle(t))this.table.fireListeners(TABLE_EVENT_TYPE.DBLCLICK_FILL_HANDLE,{});else if(this.table._canResizeColumn(i.col,i.row)&&0<=i.col){this.table.scenegraph.updateAutoColWidth(i.col),this.table.internalProps._widthResizedColMap.add(i.col),this.table.scenegraph.updateChartSize(i.col);var t=this.table.stateManager,r=(t.columnResize.col<t.table.frozenColCount&&!t.table.isPivotTable()&&!t.table.transpose&&t.table.scenegraph.component.setFrozenColumnShadow(t.table.frozenColCount-1,t.columnResize.isRightFrozen),[]);for(let e=0;e<this.table.colCount;e++)r.push(this.table.getColWidth(e));this.table.fireListeners(TABLE_EVENT_TYPE.RESIZE_COLUMN_END,{col:i.col,colWidths:r})}}}),this.table.isPivotTable()&&checkHaveDrill(this.table)&&bindDrillEvent(this.table),bindSparklineHoverEvent(this.table),bindAxisClickEvent(this.table),bindAxisHoverEvent(this.table)}}dealTableHover(e){var t;e&&(t=e.eventArgs,t)?this.table.stateManager.updateHoverPos(t.col,t.row):this.table.stateManager.updateHoverPos(-1,-1)}dealIconHover(e){var t=e[\\\"eventArgs\\\"];t?this.table.stateManager.updateHoverIcon(t.col,t.row,t.target,t.targetCell,t.event):this.table.stateManager.updateHoverIcon(-1,-1,void 0,void 0)}dealMenuHover(e){}dealTableSelect(e,t){var i,r,n;return e?(r=e[\\\"eventArgs\\\"],!(!r||\\\"checkbox\\\"===r.target.name||\\\"radio\\\"===r.target.name||(n=this.table.getBodyColumnDefine(r.col,r.row),this.table.isHeader(r.col,r.row)&&(null!=n&&n.disableHeaderSelect||null!=(i=this.table.stateManager.select)&&i.disableHeader)||!this.table.isHeader(r.col,r.row)&&null!=n&&n.disableSelect?(t||this.table.stateManager.updateSelectPos(-1,-1),1):!this.table.isPivotChart()||\\\"axis-label\\\"!==(null==(i=null==e?void 0:e.eventArgs)?void 0:i.target.name)&&\\\"chart\\\"!==(null==(n=null==e?void 0:e.eventArgs)?void 0:n.target.type)?(this.table.stateManager.updateSelectPos(r.col,r.row,r.event.shiftKey,r.event.ctrlKey||r.event.metaKey,!1,t),0):(this.table.stateManager.updateSelectPos(-1,-1),1)))):(this.table.stateManager.updateSelectPos(-1,-1),!1)}dealFillSelect(i,r){var n=i[\\\"eventArgs\\\"];if(n){if(null!=(o=null==(o=this.table.stateManager.select)?void 0:o.ranges)&&o.length&&this.table.stateManager.isFillHandle()){let e,t;var o=this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1];r&&(isValid_default(this.table.stateManager.fillHandle.directionRow)||(Math.abs(this.table.stateManager.fillHandle.startY-i.abstractPos.y)>=Math.abs(this.table.stateManager.fillHandle.startX-i.abstractPos.x)?this.table.stateManager.fillHandle.directionRow=!0:this.table.stateManager.fillHandle.directionRow=!1),Math.abs(this.table.stateManager.fillHandle.startY-i.abstractPos.y)>=Math.abs(this.table.stateManager.fillHandle.startX-i.abstractPos.x)?0<this.table.stateManager.fillHandle.startY-i.abstractPos.y?this.table.stateManager.fillHandle.direction=\\\"top\\\":this.table.stateManager.fillHandle.direction=\\\"bottom\\\":0<this.table.stateManager.fillHandle.startX-i.abstractPos.x?this.table.stateManager.fillHandle.direction=\\\"left\\\":this.table.stateManager.fillHandle.direction=\\\"right\\\",t=(this.table.stateManager.fillHandle.directionRow?(e=n.row,o.end):(e=o.end.row,n)).col),this.table.stateManager.updateSelectPos(r?t:o.end.col,r?e:o.end.row,!0,n.event.ctrlKey||n.event.metaKey,!1,r)}else this.table.stateManager.updateSelectPos(n.col,n.row,n.event.shiftKey,n.event.ctrlKey||n.event.metaKey,!1,r);return!0}return!1}deelTableSelectAll(){this.table.stateManager.updateSelectPos(-1,-1,!1,!1,!0)}dealMenuSelect(e){}checkColumnResize(e,t){var i=e[\\\"eventArgs\\\"],i=this.table.scenegraph.getResizeColAt(e.abstractPos.x,e.abstractPos.y,null==i?void 0:i.targetCell);return!!(this.table._canResizeColumn(i.col,i.row)&&0<=i.col)&&(t&&this.table.stateManager.startResizeCol(i.col,e.abstractPos.x,e.abstractPos.y,i.rightFrozen),!0)}checkRowResize(e,t){var i=e[\\\"eventArgs\\\"];if(i){i=this.table.scenegraph.getResizeRowAt(e.abstractPos.x,e.abstractPos.y,i.targetCell);if(this.table._canResizeRow(i.col,i.row)&&0<=i.row)return t&&this.table.stateManager.startResizeRow(i.row,e.abstractPos.x,e.abstractPos.y,i.bottomFrozen),!0}return!1}checkCellFillhandle(e,t){var i;if(null!=(r=this.table.options.excelOptions)&&r.fillHandle){var r=e[\\\"eventArgs\\\"];if(r&&null!=(r=null==(r=this.table.stateManager.select)?void 0:r.ranges)&&r.length){var r=Math.max(this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].start.col,this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].end.col),n=Math.max(this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].start.row,this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].end.row),r=this.table.scenegraph.highPerformanceGetCell(r,n).globalAABBBounds,n=Math.abs(e.abstractPos.x-r.x2),r=Math.abs(e.abstractPos.y-r.y2);if(null!=(i=this.table.stateManager.fillHandle)&&i.isFilling||n<=9&&r<=9)return t&&this.table.stateManager.startFillSelect(e.abstractPos.x,e.abstractPos.y),!0}}return!1}dealColumnResize(e,t){this.table.stateManager.updateResizeCol(e,t)}dealRowResize(e,t){this.table.stateManager.updateResizeRow(e,t)}chechColumnMover(e){var t=e[\\\"eventArgs\\\"];return!!(t&&this.table.isHeader(t.col,t.row)&&checkCellInSelect(t.col,t.row,this.table.stateManager.select.ranges)&&this.table._canDragHeaderPosition(t.col,t.row))&&(this.table.stateManager.startMoveCol(t.col,t.row,e.abstractPos.x,e.abstractPos.y),!0)}dealColumnMover(e){var t=e[\\\"eventArgs\\\"];isValid_default(t.col)&&isValid_default(t.row)&&this.table.stateManager.updateMoveCol(t.col,t.row,e.abstractPos.x,e.abstractPos.y)}startColumnResize(e){}dealIconClick(e,t){var i=t[\\\"eventArgs\\\"],{target:i,event:r,col:n,row:o}=i||{target:e.target,event:e,col:-1,row:-1},a=i;if(a.role&&a.role.startsWith(\\\"icon-\\\"))return this.table.fireListeners(TABLE_EVENT_TYPE.ICON_CLICK,{name:a.name,x:(a.globalAABBBounds.x1+a.globalAABBBounds.x2)/2,y:a.globalAABBBounds.y2,col:n,row:o,funcType:a.attribute.funcType,icon:a,event:r}),!0;if(i instanceof RichText){a=i.pickIcon(r.global);if(a)return this.table.fireListeners(TABLE_EVENT_TYPE.ICON_CLICK,{name:a.attribute.id,x:a.globalX+a.globalAABBBounds.width()/2,y:a.globalY+a.AABBBounds.height(),col:n,row:o,funcType:a.attribute.funcType,icon:a,event:r}),!0}return!1}release(){this.gesture.release(),this.globalEventListeners.forEach(e=>{\\\"document\\\"===e.env?document.removeEventListener(e.name,e.callback):\\\"body\\\"===e.env?document.body.removeEventListener(e.name,e.callback):\\\"window\\\"===e.env&&window.removeEventListener(e.name,e.callback)}),this.globalEventListeners=[]}},DEFAULT_BAR_COLOR=(init_esbuild_inject(),init_esbuild_inject(),e=>{var t=e.value;return 80<Number(t)?\\\"#20a8d8\\\":50<Number(t)?\\\"#4dbd74\\\":20<Number(t)?\\\"#ffc107\\\":\\\"#f86c6b\\\"}),ProgressBarStyle=class Ej2 extends Style{static get DEFAULT(){return defaultStyle9=defaultStyle9||new Ej2}constructor(e={},t={}){var i;super(e,t),this._showBar=null==(i=e.showBar)||i,this._barColor=null!=(i=e.barColor)?i:DEFAULT_BAR_COLOR,this._barPositiveColor=null!=(i=e.barPositiveColor)?i:\\\"#4dbd74\\\",this._barNegativeColor=null!=(i=e.barNegativeColor)?i:\\\"#f86c6b\\\",this._barAxisColor=null!=(i=e.barAxisColor)?i:\\\"black\\\",this._barBgColor=e.barBgColor,this._barHeight=null!=(i=e.barHeight)?i:3,this._barHeight=null!=(i=e.barHeight)?i:3,this._barBottom=null!=(i=e.barBottom)?i:0,this._barPadding=null!=(i=e.barPadding)?i:[0,0,0,0],this._showBarMark=null!=(i=e.showBarMark)&&i,this._barMarkPositiveColor=null!=(i=e.barMarkPositiveColor)?i:\\\"#4dbd74\\\",this._barMarkNegativeColor=null!=(i=e.barMarkNegativeColor)?i:\\\"#f86c6b\\\",this._barMarkWidth=null!=(i=e.barMarkWidth)?i:2,this._barMarkPosition=null!=(i=e.barMarkPosition)?i:\\\"right\\\",this._barRightToLeft=null!=(i=e.barRightToLeft)&&i}get showBar(){return this._showBar}set showBar(e){this._showBar=e}get barColor(){return this._barColor}set barColor(e){this._barColor=e}get barBgColor(){return this._barBgColor}set barBgColor(e){this._barBgColor=e}get barHeight(){return this._barHeight}set barHeight(e){this._barHeight=e}get barBottom(){return this._barBottom}set barBottom(e){this._barBottom=e}get barPositiveColor(){return this._barPositiveColor}set barPositiveColor(e){this._barPositiveColor=e}get barNegativeColor(){return this._barNegativeColor}set barNegativeColor(e){this._barNegativeColor=e}get barAxisColor(){return this._barAxisColor}set barAxisColor(e){this._barAxisColor=e}get barPadding(){return this._barPadding}set barPadding(e){this._barPadding=e}get showBarMark(){return this._showBarMark}set showBarMark(e){this._showBarMark=e}get barMarkPositiveColor(){return this._barMarkPositiveColor}set barMarkPositiveColor(e){this._barMarkPositiveColor=e}get barMarkNegativeColor(){return this._barMarkNegativeColor}set barMarkNegativeColor(e){this._barMarkNegativeColor=e}get barMarkWidth(){return this._barMarkWidth}set barMarkWidth(e){this._barMarkWidth=e}get barMarkPosition(){return this._barMarkPosition}set barMarkPosition(e){this._barMarkPosition=e}get barRightToLeft(){return this._barRightToLeft}set barRightToLeft(e){this._barRightToLeft=e}clone(){return new Ej2(this,null)}},ICON_PROP_KEYS=(init_esbuild_inject(),[\\\"type\\\",\\\"content\\\",\\\"font\\\",\\\"color\\\",\\\"width\\\",\\\"height\\\",\\\"marginRight\\\",\\\"marginLeft\\\",\\\"src\\\",\\\"svg\\\",\\\"name\\\",\\\"path\\\",\\\"positionType\\\",\\\"tooltip\\\",\\\"hover\\\",\\\"cursor\\\",\\\"shape\\\",\\\"interactive\\\"]),iconPropKeys=ICON_PROP_KEYS,BodyHelper=class{constructor(e){this._table=e;var t=get3();this.expandIcon=t[InternalIconName.expandIconName],this.collapseIcon=t[InternalIconName.collapseIconName]}getIcons(i,r,t,n,e){const o=[],a=this._table.getBodyColumnDefine(i,r)[\\\"icon\\\"];if(a){let e;e=\\\"function\\\"==typeof a?a({col:i,row:r,value:t,dataValue:n,table:this._table}):a;const s=get3(),h=e=>{var t=\\\"string\\\"==typeof e?s[e]:e;t&&o.push(t)};Array.isArray(e)?e.forEach((e,t)=>{h(e)}):h(e)}var l=this.getHierarchyIcon(i,r);return l&&o.push(l),e&&o.forEach((e,t)=>{(e.content||e.src)&&(o[t]=this.getCellIconFromRecordValue(e,i,r))}),o}getStyleClass(e){switch(e){case\\\"text\\\":case\\\"link\\\":return TextStyle;case\\\"image\\\":case\\\"video\\\":return ImageStyle;case\\\"chart\\\":case\\\"sparkline\\\":return Style;case\\\"progressbar\\\":return ProgressBarStyle;case\\\"checkbox\\\":return CheckboxStyle;case\\\"radio\\\":return RadioStyle}return TextStyle}getCellIconFromRecordValue(e,r,n){if(Array.isArray(e))return e.map(e=>this.getCellIconFromRecordValue(e,r,n));if(!obj.isObject(e)||\\\"function\\\"==typeof e)return this._table.getFieldData(e,r,n);const o={},a=e;return iconPropKeys.forEach(e=>{var t,i;void 0!==a[e]&&(null!=(i=this._table.getFieldData(a[e],r,n))?o[e]=i:null!=(t=(i=this._table)._hasField)&&t.call(i,a[e],r,n)||(o[e]=a[e]))}),o}getHierarchyIcon(e,t){var i=this._table.getHierarchyState(e,t);return i===HierarchyState.expand?this.expandIcon:i===HierarchyState.collapse?this.collapseIcon:void 0}getHierarchyIconWidth(){var e;return this.expandIcon.width+(null!=(e=this.expandIcon.marginLeft)?e:0)+(null!=(e=this.expandIcon.marginRight)?e:0)}};function createElement(e,t){var i=document.createElement(e);return t&&i.classList.add(...t),i}function importStyle2(){var e;\\\"node\\\"!==Env.mode&&((e=document.createElement(\\\"style\\\")).id=\\\"vtable-menu-styleSheet\\\",e.textContent=\\\"\\\\n@keyframes vtable__menu-element--shown-animation {\\\\n\\\\t0% {\\\\n\\\\t\\\\topacity: 0;\\\\n\\\\t}\\\\n\\\\t100% {\\\\n\\\\t\\\\topacity: 1;\\\\n\\\\t}\\\\n}\\\\n.vtable__menu-element {\\\\n\\\\tposition: absolute;\\\\n\\\\tbox-sizing: border-box;\\\\n\\\\tborder-radius: 4px;\\\\n\\\\tbackground-color: #fff;\\\\n\\\\tpadding: 6px 0;\\\\n\\\\t/* pointer-events: none; */\\\\n\\\\tuser-select: none;\\\\n\\\\tcolor: #000;\\\\n\\\\tmax-width: 300px;\\\\n\\\\tz-index: 99999;\\\\n\\\\tborder: #CCC 0.5px solid;\\\\n\\\\tcursor: default;\\\\n\\\\twidth: max-content;\\\\n\\\\tbox-shadow: 0px 8px 16px rgba(27, 31, 35, 0.12);\\\\n}\\\\n.vtable__menu-element--hidden {\\\\n\\\\topacity: 0;\\\\n\\\\t/* transform: translate(-50%, -50%); */\\\\n\\\\ttransition: opacity 75ms linear;\\\\n\\\\tz-index: -9999;\\\\n}\\\\n.vtable__menu-element--shown {\\\\n\\\\topacity: 1;\\\\n\\\\t/* transform: translate(-50%, -50%); */\\\\n\\\\tanimation: vtable__menu-element--shown-animation 150ms ease-out;\\\\n}\\\\n.vtable__menu-element__content {\\\\n\\\\tfont-family: Roboto;\\\\n\\\\tfont-size: 12px;\\\\n\\\\toverflow: hidden;\\\\n\\\\tdisplay: inline-block;\\\\n\\\\t/* height: 100%; */\\\\n\\\\tline-height: 30px;\\\\n}\\\\n.vtable__menu-element__item {\\\\n\\\\theight: 32px;\\\\n\\\\tpadding: 0px 12px;\\\\n\\\\tcursor: pointer;\\\\n\\\\tposition: relative;\\\\n\\\\tdisplay: flex;\\\\n\\\\talign-items: center;\\\\n\\\\tjustify-content: flex-start;\\\\n}\\\\n.vtable__menu-element__item:hover {\\\\n\\\\tbackground-color: rgba(27, 31, 35, 0.06);\\\\n}\\\\n.vtable__menu-element__icon{\\\\n\\\\t/* vertical-align: top; */\\\\n\\\\tdisplay: flex;\\\\n\\\\t/* line-height: 30px; */\\\\n\\\\tmargin-right: 6px;\\\\n}\\\\n.vtable__menu-element__no-event {\\\\n\\\\tpointer-events: none;\\\\n}\\\\n.vtable__menu-element--select {\\\\n\\\\tcolor: #2E68CF;\\\\n}.vtable__menu-element--normal {\\\\n\\\\tcolor: rgba(20, 20, 20, 0.9);;\\\\n}\\\\n.vtable__menu-element__split {\\\\n\\\\theight: 0px;\\\\n\\\\tborder: 1px solid rgb(209, 213, 218);\\\\n\\\\tmargin: 5px 0;\\\\n}\\\\n.vtable__menu-element__title {\\\\n\\\\tcolor: rgb(149, 149, 149);\\\\n}\\\\n.vtable__menu-element__arrow {\\\\n\\\\tposition: absolute;\\\\n\\\\tright: 3px;\\\\n\\\\tfont-weight: bold;\\\\n\\\\tmargin-top: 1px;\\\\n}\\\\n.vtable__menu-element__item-text {\\\\n\\\\tmargin-right: 15px;\\\\n}\\\\n\\\",document.head.appendChild(e))}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),importStyle2();var CLASSNAME=\\\"vtable__menu-element\\\",ITEM_CLASSNAME=CLASSNAME+\\\"__item\\\",CONTENT_CLASSNAME=CLASSNAME+\\\"__content\\\",HIDDEN_CLASSNAME=CLASSNAME+\\\"--hidden\\\",SHOWN_CLASSNAME=CLASSNAME+\\\"--shown\\\",NORAML_CLASSNAME=CLASSNAME+\\\"--normal\\\",SELECT_CLASSNAME=CLASSNAME+\\\"--select\\\",ICOM_CLASSNAME=CLASSNAME+\\\"__icon\\\",SPLIT_CLASSNAME=CLASSNAME+\\\"__split\\\",TITLE_CLASSNAME=CLASSNAME+\\\"__title\\\",ARROW_CLASSNAME=CLASSNAME+\\\"__arrow\\\",NOEVENT_CLASSNAME=CLASSNAME+\\\"__no-event\\\",ITEMTEXT_CLASSNAME=CLASSNAME+\\\"__item-text\\\";function createMenuDomElement(){return createElement(\\\"div\\\",[CLASSNAME,HIDDEN_CLASSNAME])}function isMenuHighlight(i,r,n,e,t,o){var a=i.getCellRange(e,t);for(let d=0;d<r.length;d++){var l=r[d];let{col:e,row:t}=l;var{field:l,menuKey:s}=l;if(\\\"number\\\"!=typeof e||\\\"number\\\"!=typeof t)if(i.isPivotTable()&&(Array.isArray(l),1)){var h=i.internalProps.layoutMap.getPivotCellAdress(l);if(!h)continue;e=h.col,t=h.row}else{h=i.internalProps.layoutMap.getHeaderCellAddressByField(l);if(!h)continue;e=h.col,t=h.row}if(isValid_default(e)&&isValid_default(t)&&cellInRange(a,e,t)&&n===s)return!0}return!1}var defaultStyle10,MenuElement=class{constructor(d){var e;this._handler=new EventHandler,this._rootElement=createMenuDomElement(),this._secondElement=createMenuDomElement(),this._secondElement.sub=!0,this._showChildrenIndex=-1,this._rootElement.addEventListener(\\\"wheel\\\",e=>{e.stopPropagation()}),null!=(e=this._rootElement)&&e.addEventListener(\\\"mousedown\\\",e=>{e.stopPropagation(),e.preventDefault()}),null!=(e=this._rootElement)&&e.addEventListener(\\\"touchend\\\",e=>{var t,i,r,n,o,a;e.stopPropagation(),e.preventDefault(),this._rootElement.classList.contains(HIDDEN_CLASSNAME)||(({col:t,row:i,dropDownIndex:a,menuKey:r,text:n,hasChildren:o}=e.target),\\\"number\\\"!=typeof a||o||(o=d.isPivotTable()?d.internalProps.layoutMap.getPivotDimensionInfo(t,i):d.getHeaderField(t,i),a=d._dropDownMenuIsHighlight(t,i,a),d.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLICK,{col:t,row:i,field:o,menuKey:r,text:n,highlight:a,cellLocation:d.getCellLocation(t,i),event:e}),d.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLEAR,null),d.fireListeners(TABLE_EVENT_TYPE.HIDE_MENU,null)),e.stopPropagation())}),null!=(e=this._rootElement)&&e.addEventListener(\\\"click\\\",e=>{var t,i,r,n,o,a;e.stopPropagation(),e.preventDefault(),this._rootElement.classList.contains(HIDDEN_CLASSNAME)||(({col:t,row:i,dropDownIndex:a,menuKey:r,text:n,hasChildren:o}=e.target),\\\"number\\\"!=typeof a||o||(o=d.isPivotTable()?d.internalProps.layoutMap.getPivotDimensionInfo(t,i):d.getHeaderField(t,i),a=d._dropDownMenuIsHighlight(t,i,a),d.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLICK,{col:t,row:i,field:o,menuKey:r,text:n,highlight:a,cellLocation:d.getCellLocation(t,i),event:e}),d.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLEAR,null),d.fireListeners(TABLE_EVENT_TYPE.HIDE_MENU,null)),e.stopPropagation())}),null!=(e=this._rootElement)&&e.addEventListener(\\\"mousemove\\\",t=>{if(!this._rootElement.classList.contains(HIDDEN_CLASSNAME)){t.stopPropagation();var{hasChildren:i,dropDownIndex:r,col:n,row:o,sub:e}=t.target;if(i){this._showChildrenIndex=r;var a=this._secondElement,l=(null!=a&&a.classList.remove(HIDDEN_CLASSNAME),null!=a&&a.classList.add(SHOWN_CLASSNAME),a.innerHTML=\\\"\\\",null==(i=this._menuInstanceInfo.content[r])?void 0:i.children);for(let e=0;e<l.length;e++){var s=l[e],h=createItem(s,!!d.stateManager.menu.dropDownMenuHighlight&&isMenuHighlight(d,d.stateManager.menu.dropDownMenuHighlight,\\\"object\\\"==typeof s?(null==s?void 0:s.menuKey)||(null==s?void 0:s.text):s,n,o,e));h.col=n,h.row=o,h.dropDownIndex=e,\\\"string\\\"==typeof s?(h.text=s,h.menuKey=s):\\\"object\\\"==typeof s&&(h.text=s.text,h.menuKey=s.menuKey||s.text),h.sub=!0,h.sub=!0,a.appendChild(h)}r=t.target.getBoundingClientRect();this._bindSecondElement(d,n,o,r.right,r.top)}else!e&&null!=(i=this._secondElement)&&i.classList.contains(SHOWN_CLASSNAME)&&setTimeout(()=>{var e;!0!==this._mouseEnterSecondElement&&(this._showChildrenIndex=-1,null!=(e=this._secondElement)&&e.classList.remove(SHOWN_CLASSNAME),null!=e)&&e.classList.add(HIDDEN_CLASSNAME)},300)}}),null!=(e=this._secondElement)&&e.addEventListener(\\\"wheel\\\",e=>{e.stopPropagation()}),null!=(e=this._secondElement)&&e.addEventListener(\\\"mousemove\\\",e=>{this._rootElement.classList.contains(HIDDEN_CLASSNAME)||e.stopPropagation()}),null!=(e=this._secondElement)&&e.addEventListener(\\\"mouseenter\\\",e=>{this._mouseEnterSecondElement=!0}),null!=(e=this._secondElement)&&e.addEventListener(\\\"mouseleave\\\",e=>{this._mouseEnterSecondElement=!1}),null!=(e=this._secondElement)&&e.addEventListener(\\\"mousedown\\\",e=>{e.stopPropagation(),e.preventDefault()}),null!=(e=this._secondElement)&&e.addEventListener(\\\"click\\\",e=>{if(e.stopPropagation(),e.preventDefault(),!this._secondElement.classList.contains(HIDDEN_CLASSNAME)){const{col:n,row:o,dropDownIndex:i,menuKey:a,text:l,hasChildren:r}=e.target;if(\\\"number\\\"==typeof i&&!r){var t=d.isPivotTable()?d.internalProps.layoutMap.getPivotDimensionInfo(n,o):d.getHeaderField(n,o);let r=!1;this._menuInstanceInfo.content.forEach((t,e)=>{if(\\\"object\\\"==typeof t&&t.children&&t.children.length)for(let e=0;e<t.children.length;e++){var i=t.children[e];if(isMenuHighlight(d,d.stateManager.menu.dropDownMenuHighlight,\\\"object\\\"==typeof i?null==i?void 0:i.menuKey:i,n,o,-1)&&a===(\\\"object\\\"==typeof i?null==i?void 0:i.menuKey:i))return void(r=!0)}}),d.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLICK,{col:n,row:o,field:t,cellHeaderPaths:d.isPivotTable()?d.getCellHeaderPaths(n,o):void 0,menuKey:a,text:l,highlight:r,cellLocation:d.getCellLocation(n,o),event:e}),d.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLEAR,null),d.fireListeners(TABLE_EVENT_TYPE.HIDE_MENU,null)}e.stopPropagation()}})}get rootElement(){return this._rootElement}release(){this.unbindFromCell();var e=this._rootElement;null!=e&&e.parentElement&&e.parentElement.removeChild(e),this._handler.release(),delete this._rootElement}bindToCell(i,r,n,t){var o,a=this._rootElement,e=this._secondElement;if(this._menuInstanceInfo=t,null!=a&&a.classList.remove(SHOWN_CLASSNAME),null!=a&&a.classList.add(HIDDEN_CLASSNAME),null!=e&&e.classList.remove(SHOWN_CLASSNAME),null!=e&&e.classList.add(HIDDEN_CLASSNAME),this._canBindToCell(i,r,n)){if(a.innerHTML=\\\"\\\",Array.isArray(t.content)){var l=t.content;for(let e=0;null!==(d=e<(null==l?void 0:l.length))&&d;e++){var s=l[e];let t=!!i.stateManager.menu.dropDownMenuHighlight&&isMenuHighlight(i,i.stateManager.menu.dropDownMenuHighlight,\\\"object\\\"==typeof s?(null==s?void 0:s.menuKey)||(null==s?void 0:s.text):s,r,n,e);if(i.stateManager.menu.dropDownMenuHighlight&&\\\"object\\\"==typeof s&&Array.isArray(s.children)&&s.children.length)for(let e=0;e<s.children.length;e++){var h=s.children[e];if(isMenuHighlight(i,i.stateManager.menu.dropDownMenuHighlight,\\\"object\\\"==typeof h?(null==h?void 0:h.menuKey)||(null==h?void 0:h.text):h,r,n,e)){t=!0;break}}var d=createItem(s,t);d.col=r,d.row=n,d.dropDownIndex=e,\\\"string\\\"==typeof s?(d.text=s,d.menuKey=s):\\\"object\\\"==typeof s&&(d.text=s.text,d.menuKey=s.menuKey||s.text,null!=(o=s.children))&&o.length&&(d.hasChildren=!0),a.appendChild(d)}}if(this._bindToCell(i,r,n,t.position,t.referencePosition))return null!=a&&a.classList.add(SHOWN_CLASSNAME),null!=a&&a.classList.remove(HIDDEN_CLASSNAME),!0}else this.unbindFromCell();return!1}unbindFromCell(){var e=this._rootElement,t=this._secondElement;this._menuInstanceInfo=void 0,null!=e&&e.parentElement&&(e.classList.remove(SHOWN_CLASSNAME),e.classList.add(HIDDEN_CLASSNAME)),null!=t&&t.parentElement&&(t.classList.remove(SHOWN_CLASSNAME),t.classList.add(HIDDEN_CLASSNAME))}_canBindToCell(e,t,i){var r=e.getCellRangeRelativeRect({col:t,row:i}),n=e.getElement(),{top:r,bottom:o,left:a,right:l}=r;return!!e.isFrozenCell(t,i)||!(o<e.getFrozenRowsHeight()||l<e.getFrozenColsWidth()||a>e.tableNoFrameWidth-e.getRightFrozenColsWidth()||r>e.tableNoFrameHeight-e.getBottomFrozenRowsHeight()||(({offsetHeight:o,offsetWidth:l}=n),o<r)||l<a)}_bindToCell(e,t,i,r,n){var o=this._rootElement,a=e.getElement(),{width:l,height:s}=e.internalProps.element.getBoundingClientRect();if(o){o.parentElement!==a&&a.appendChild(o),o.style.left=\\\"0px\\\";o.style.maxWidth=.8*l+\\\"px\\\";var a=o.clientWidth,h=o.clientHeight;let e,t;return r?(e=r.x,t=r.y):n&&(e=n.rect.right-a,t=n.rect.bottom),(t=t+h>s?s-h:t)<0&&(t/=2),o.style.top=t+\\\"px\\\",e<0?e=0:e+a>l&&(e=l-a),o.style.left=e+\\\"px\\\",!0}return!1}_bindSecondElement(e,t,i,r,n){var o=this._secondElement,a=this._rootElement,l=e.getElement(),{width:s,left:h,top:d}=e.internalProps.element.getBoundingClientRect(),a=a.getBoundingClientRect()[\\\"width\\\"];if(o){o.parentElement!==l&&l.appendChild(o),o.style.left=\\\"0px\\\";o.style.maxWidth=.8*s+\\\"px\\\";l=o.clientWidth,h=r-h;o.style.top=n-4-d+\\\"px\\\";let e=h;return e+l>s?e=e-l-a:e+=4,o.style.left=e+\\\"px\\\",!0}return!1}pointInMenuElement(e,t){var i=this._rootElement,{x:r,y:n,width:o,height:a}=i.getBoundingClientRect();if(r-5<e&&e<r+o+5&&n-5<t&&t<n+a+5)return!0;if(this._secondElement){var{x:r,y:o,width:n,height:a}=i.getBoundingClientRect();if(r-5<e&&e<r+n+5&&o-5<t&&t<o+a+5)return!0}return!1}};function createItem(e,t){var i=createElement(\\\"div\\\",[ITEM_CLASSNAME,t?SELECT_CLASSNAME:NORAML_CLASSNAME]);if(\\\"string\\\"==typeof e){var r=createElement(\\\"span\\\",[CONTENT_CLASSNAME,NOEVENT_CLASSNAME,ITEMTEXT_CLASSNAME]);r.innerHTML=e,i.appendChild(r)}else if(\\\"object\\\"==typeof e){r=null!=(r=e.type)?r:\\\"item\\\";if(\\\"split\\\"===r)return null!=i&&i.classList.add(SPLIT_CLASSNAME),i;null!=(n=null==e?void 0:e.icon)&&n.svg&&(regUrl.test(e.icon.svg)?(n=new Image,e.icon.width?n.style.width=e.icon.width.toString()+\\\"px\\\":n.style.width=\\\"16px\\\",e.icon.height?n.style.height=e.icon.height.toString()+\\\"px\\\":n.style.height=\\\"16px\\\",n.src=e.icon.svg,i.appendChild(n)):((n=createElement(\\\"span\\\",[ICOM_CLASSNAME,NOEVENT_CLASSNAME])).innerHTML=(t&&e.selectedIcon&&e.selectedIcon.svg?e.selectedIcon:e.icon).svg,e.icon.width&&n.children[0].setAttribute(\\\"width\\\",e.icon.width.toString()),e.icon.height&&n.children[0].setAttribute(\\\"height\\\",e.icon.height.toString()),i.appendChild(n)));var n=createElement(\\\"span\\\",[CONTENT_CLASSNAME,NOEVENT_CLASSNAME,ITEMTEXT_CLASSNAME]);n.innerHTML=e.text,i.appendChild(n),\\\"title\\\"===r?null!=i&&i.classList.add(NOEVENT_CLASSNAME,TITLE_CLASSNAME):null!=(n=null==e?void 0:e.children)&&n.length&&((r=createElement(\\\"span\\\",[CONTENT_CLASSNAME,NOEVENT_CLASSNAME,ARROW_CLASSNAME])).innerHTML=t?'<svg width=\\\"8\\\" height=\\\"12\\\" viewBox=\\\"0 0 10 17\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" style=\\\"vertical-align: baseline\\\"><path d=\\\"M1.78186 16.7729L0.300378 15.2915L6.8189 8.77295L0.300377 2.25443L1.78186 0.77295L9.78186 8.77295L1.78186 16.7729Z\\\" fill=\\\"#2E68CF\\\" fill-opacity=\\\"0.65\\\"></path></svg>':'<svg width=\\\"8\\\" height=\\\"12\\\" viewBox=\\\"0 0 10 17\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" style=\\\"vertical-align: baseline\\\"><path d=\\\"M1.78186 16.7729L0.300378 15.2915L6.8189 8.77295L0.300377 2.25443L1.78186 0.77295L9.78186 8.77295L1.78186 16.7729Z\\\" fill=\\\"#141414\\\" fill-opacity=\\\"0.65\\\"></path></svg>',i.appendChild(r))}return i}init_esbuild_inject();var ImageStyle2=class Zm2 extends Style2{static get DEFAULT(){return defaultStyle10=defaultStyle10||new Zm2}constructor(e={},t={}){var i;super(e,t),this.textAlign=(null!=(i=e.textAlign)?i:null==t?void 0:t.textAlign)||\\\"center\\\"}clone(){return new Zm2(this)}},HeaderHelper=class{constructor(e){this._table=e;var t=get3();this.freezeIcon=t[InternalIconName.freezeIconName],this.frozenIcon=t[InternalIconName.frozenIconName],this.frozenCurrentIcon=t[InternalIconName.frozenCurrentIconName],this.normalIcon=t[InternalIconName.normalIconName],this.upIcon=t[InternalIconName.upwardIconName],this.downIcon=t[InternalIconName.downwardIconName],this.dropDownAbsoluteIcon=t[InternalIconName.dropdownIconName],this.expandIcon=t[InternalIconName.expandIconName],this.collapseIcon=t[InternalIconName.collapseIconName]}getIcons(i,r){const n=[];if(this._table.isPivotTable()){var o=this._table.internalProps.layoutMap.getHeader(i,r)[\\\"showSort\\\"];o&&(o=\\\"asc\\\"===(o=this._table.getPivotSortState(i,r))?this.downIcon:\\\"desc\\\"===o?this.upIcon:this.normalIcon)&&n.push(o)}else{var a=this._table.sortState;let t;t=void 0;var l=this._table.getCellRange(i,r);if(a)if(Array.isArray(a))for(let e=0;e<a.length;e++){var s=a[e],h=this._table._getHeaderCellBySortState(s);if(h&&cellInRange(l,h.col,h.row)){({order:t}=s);break}}else{o=this._table._getHeaderCellBySortState(a);o&&cellInRange(l,o.col,o.row)&&({order:t}=a)}o=this.getSortIcon(t,this._table,i,r);o&&n.push(o)}this._table.showFrozenIcon&&i<this._table.allowFrozenColCount&&(o=this.getFrozenIcon(i,r))&&n.push(o),this.checkDropDownIcon(this._table,i,r)&&(o=this.dropDownAbsoluteIcon,n.push(o));var o=this.getDropDownStateIcons(this._table,i,r),o=(o.length&&n.push(...o),this._table._getHeaderLayoutMap(i,r))[\\\"headerIcon\\\"],e=this.getHierarchyIcon(i,r);if(e&&n.push(e),o){let e;e=\\\"function\\\"==typeof o?o({col:i,row:r,value:this._table.getCellValue(i,r),dataValue:this._table.getCellOriginValue(i,r),table:this._table}):o;const d=get3(),u=e=>{var t=\\\"string\\\"==typeof e?d[e]:e;t&&n.push(t)};Array.isArray(e)?e.forEach((e,t)=>{u(e)}):u(e)}return n}getFrozenIcon(e,t){if(this._table.isPivotTable()||this._table.transpose)return null;if(this._table.rightFrozenColCount&&e>=this._table.colCount-this._table.rightFrozenColCount)return null;var i=this._table.getHeaderDefine(e,t);if(i.columns&&0<i.columns.length)return null;let r=this.freezeIcon;return this._table.options.frozenColCount-1>e?r=this.frozenIcon:this._table.options.frozenColCount-1===e&&(r=this.frozenCurrentIcon),r}getSortIcon(e,t,i,r){var n=\\\"asc\\\"===e?this.downIcon:\\\"desc\\\"===e?this.upIcon:this.normalIcon,o=t.getHeaderDefine(i,r);return!o||!1===o.showSort||!isValid_default(o.showSort)&&!o.sort||o.columns&&0<o.columns.length?null:n}getDropDownStateIcons(n,o,a){var l,e=n.getHeaderDefine(o,a),s=n._getHeaderLayoutMap(o,a)[\\\"dropDownMenu\\\"],h=[];if(Array.isArray(s)&&s.length||Array.isArray(n.globalDropDownMenu)&&n.globalDropDownMenu.length&&(null==(e=null==e?void 0:e.columns)||!e.length)){var d=s||n.globalDropDownMenu;let t=-1,i=-1;for(let r=0;r<d.length;r++){var u=d[r];if(\\\"object\\\"==typeof u&&u.children&&u.children.length)for(let e=0;e<u.children.length;e++){var c=u.children[e];if(null!=(l=n.stateManager.menu)&&l.dropDownMenuHighlight&&isMenuHighlight(n,null==(l=n.stateManager.menu)?void 0:l.dropDownMenuHighlight,\\\"object\\\"==typeof c?null==c?void 0:c.menuKey:c,o,a,r)){t=r,i=e;break}}if(n._dropDownMenuIsHighlight(o,a,r)){t=r;break}}-1!==t&&(e=-1!==i?(s||n.globalDropDownMenu)[t].children[i]:(s||n.globalDropDownMenu)[t]).stateIcon&&(e.stateIcon.svg?h.push({type:\\\"svg\\\",name:e.stateIcon.src||e.stateIcon.svg,width:e.stateIcon.width||22,height:e.stateIcon.height||22,svg:e.stateIcon.svg,positionType:IconPosition.right,marginRight:0,funcType:IconFuncTypeEnum.dropDownState,interactive:!1}):e.stateIcon.src&&h.push({type:\\\"image\\\",name:e.stateIcon.src||e.stateIcon.svg,width:e.stateIcon.width||22,height:e.stateIcon.height||22,src:e.stateIcon.src,positionType:IconPosition.right,marginRight:0,funcType:IconFuncTypeEnum.dropDownState,interactive:!1}))}return h}getDropDownIconRect(e,t,i){var r=null!=(r=null!=(r=null==(r=this.downIcon.hover)?void 0:r.width)?r:null==(r=this.downIcon)?void 0:r.width)?r:0,n=null!=(n=null!=(n=null==(n=this.downIcon.hover)?void 0:n.height)?n:null==(n=this.downIcon)?void 0:n.height)?n:0,o=e.right-2-r,a=e.right-2,l=\\\"middle\\\"===i?e.top+e.height/2-r/2:\\\"top\\\"===i?e.top+t/2:\\\"bottom\\\"===i?e.bottom-2*t:e.top;return{left:o,right:a,top:l,bottom:n+l,width:r,height:n}}getHierarchyIcon(e,t){var i=this._table._getHeaderLayoutMap(e,t)[\\\"hierarchyState\\\"];if(i)return i===HierarchyState.expand?this.expandIcon:i===HierarchyState.collapse?this.collapseIcon:void 0}getHierarchyIconWidth(){var e;return this.expandIcon.width+(null!=(e=this.expandIcon.marginLeft)?e:0)+(null!=(e=this.expandIcon.marginRight)?e:0)}checkDropDownIcon(e,t,i){if(e.isPivotTable()){var r=e._getHeaderLayoutMap(t,i);if(Array.isArray(r.dropDownMenu)&&r.dropDownMenu.length)return!0}else{var r=e.getHeaderDefine(t,i);if(Array.isArray(r.dropDownMenu)&&r.dropDownMenu.length||(!Array.isArray(r.dropDownMenu)||0!==r.dropDownMenu.length)&&Array.isArray(e.globalDropDownMenu)&&e.globalDropDownMenu.length&&(null==(r=null==r?void 0:r.columns)||!r.length))return!0}return!1}getStyleClass(e){switch(e){case\\\"text\\\":case\\\"link\\\":return TextHeaderStyle;case\\\"image\\\":case\\\"video\\\":return ImageStyle2;case\\\"checkbox\\\":return CheckboxStyle2}}},BaseTooltip=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),class{constructor(e){this._table=e}release(){var e,t;this.unbindTooltipElement(),this._tooltipElement&&null!=(t=(e=this._tooltipElement).release)&&t.call(e),this._tooltipElement=void 0}_getTooltipElement(){return this._tooltipElement||(this._tooltipElement=this.createTooltipElementInternal()),this._tooltipElement}bindTooltipElement(e,t,i,r){return this._getTooltipElement().bindToCell(this._table,e,t,i,r)}moveTooltipElement(e,t,i,r){this._getTooltipElement().move(this._table,e,t,i,r)}unbindTooltipElement(){this._getTooltipElement().unbindFromCell()}locateTooltipElement(e,t,i,r,n){this._getTooltipElement()._locate(this._table,e,t,i,r,n)}});function importStyle3(){var e;\\\"node\\\"!==Env.mode&&((e=document.createElement(\\\"style\\\")).id=\\\"vtable-tooltip-styleSheet\\\",e.textContent=\\\"\\\\n@keyframes vtable__bubble-tooltip-element--shown-animation {\\\\n\\\\t0% {\\\\n\\\\t\\\\topacity: 0;\\\\n\\\\t}\\\\n\\\\t100% {\\\\n\\\\t\\\\topacity: 1;\\\\n\\\\t}\\\\n}\\\\n.vtable__bubble-tooltip-element {\\\\n\\\\tposition: absolute;\\\\n\\\\t\\\\n\\\\tpointer-events: none;\\\\n\\\\tuser-select: none;\\\\n\\\\tmax-width: 300px;\\\\n\\\\tz-index: 99999;\\\\n\\\\n\\\\tbackground: #FFFFFF;\\\\n    border: 1px solid #E6E8ED;\\\\n    box-sizing: border-box;\\\\n    border-radius: 4px;\\\\n    box-shadow: 0px 2px 4px rgb(27 31 35 / 8%);\\\\n    color: #141414;\\\\n    font-size: 13px;\\\\n}\\\\n.vtable__bubble-tooltip-element--hidden {\\\\n\\\\topacity: 0;\\\\n\\\\t/* transform: translate(-50%, -50%); */\\\\n\\\\ttransition: opacity 75ms linear;\\\\n}\\\\n.vtable__bubble-tooltip-element--shown {\\\\n\\\\topacity: 1;\\\\n\\\\t/* transform: translate(-50%, -50%); */\\\\n\\\\tanimation: vtable__bubble-tooltip-element--shown-animation 150ms ease-out;\\\\n}\\\\n.vtable__bubble-tooltip-element__content {\\\\n\\\\t/* font-size: .75rem; */\\\\n\\\\tpadding: 6px 8px;\\\\n\\\\tmin-height: 1em;\\\\n\\\\tline-height: 1.5;\\\\n\\\\twidth: 100%;\\\\n\\\\tdisplay: block;\\\\n\\\\twhite-space: pre-wrap;\\\\n\\\\tmargin: 0;\\\\n\\\\tbox-sizing: border-box;\\\\n\\\\toverflow: hidden;\\\\n\\\\tword-wrap: break-word;\\\\n\\\\tposition: relative;\\\\n\\\\tbackground-color: #FFF;\\\\n\\\\tz-index: 2;\\\\n\\\\tborder-radius: 4px\\\\n}\\\\n.vtable__bubble-tooltip-element__triangle {\\\\n\\\\t/* font-size: .75rem; */\\\\n\\\\tposition: absolute;\\\\n\\\\twidth: 10px;\\\\n\\\\theight: 10px;\\\\n\\\\tdisplay: block;\\\\n\\\\ttransform: rotate(45deg);\\\\n    transform-origin: 50% 50% 0;\\\\n\\\\tz-index: 1;\\\\n\\\\tbackground-color: #FFF;\\\\n\\\\tborder: 1px solid #E6E8ED;\\\\n}\\\\n\\\",document.head.appendChild(e))}init_esbuild_inject(),init_esbuild_inject(),importStyle3();var TOOLTIP_CLASS=\\\"vtable__bubble-tooltip-element\\\",CONTENT_CLASS=TOOLTIP_CLASS+\\\"__content\\\",TRIANGLE_CLASS=TOOLTIP_CLASS+\\\"__triangle\\\",HIDDEN_CLASS=TOOLTIP_CLASS+\\\"--hidden\\\",SHOWN_CLASS=TOOLTIP_CLASS+\\\"--shown\\\",BubbleTooltipElement=class{constructor(){this._handler=new EventHandler;var e=this._rootElement=createElement(\\\"div\\\",[TOOLTIP_CLASS,HIDDEN_CLASS]),t=createElement(\\\"span\\\",[CONTENT_CLASS]),i=createElement(\\\"span\\\",[TRIANGLE_CLASS]);e.appendChild(i),e.appendChild(t),this._messageElement=e.querySelector(\\\".\\\"+CONTENT_CLASS)||void 0,this._triangleElement=e.querySelector(\\\".\\\"+TRIANGLE_CLASS)||void 0}bindToCell(e,t,i,r,n){var o,a=this._rootElement,l=this._messageElement,s=this._triangleElement;if(null!=a&&a.classList.remove(SHOWN_CLASS),null!=a&&a.classList.add(HIDDEN_CLASS),this._canBindToCell(e,t,i)){if(l.setAttribute(\\\"style\\\",\\\"\\\"),s.setAttribute(\\\"style\\\",\\\"\\\"),null!=r&&r.className&&a.classList.add(r.className),null!=(o=null==r?void 0:r.style)&&o.bgColor&&(l.style.backgroundColor=null==(o=null==r?void 0:r.style)?void 0:o.bgColor),null!=(o=null==r?void 0:r.style)&&o.bgColor&&(s.style.backgroundColor=null==(o=null==r?void 0:r.style)?void 0:o.bgColor),s.style.display=!0===(null==(o=null==r?void 0:r.style)?void 0:o.arrowMark)?\\\"block\\\":\\\"none\\\",null!=(s=null==r?void 0:r.style)&&s.fontSize&&(l.style.fontSize=(null!=(s=null==(o=null==r?void 0:r.style)?void 0:o.fontSize)?s:12)+\\\"px\\\"),null!=(o=null==r?void 0:r.style)&&o.fontFamily&&(l.style.fontFamily=null==(s=null==r?void 0:r.style)?void 0:s.fontFamily),null!=(o=null==r?void 0:r.style)&&o.color&&(l.style.color=null==(s=null==r?void 0:r.style)?void 0:s.color),null!=(o=null==r?void 0:r.style)&&o.padding&&(l.style.padding=`${null==(s=null==r?void 0:r.style)?void 0:s.padding.join(\\\"px \\\")}px`),l&&(l.textContent=null==r?void 0:r.content),this._bindToCell(e,t,i,null==r?void 0:r.position,null==r?void 0:r.referencePosition,n,null==(o=null==r?void 0:r.style)?void 0:o.arrowMark))return null!=a&&a.classList.add(SHOWN_CLASS),null!=a&&a.classList.remove(HIDDEN_CLASS),!0}else this.unbindFromCell();return!1}release(){this.unbindFromCell();var e,t=this._rootElement;null!=t&&t.parentElement&&t.parentElement.removeChild(t),null!=(e=null==(t=this._handler)?void 0:t.release)&&e.call(t),delete this._rootElement,delete this._messageElement}move(e,t,i,r,n){var o=this._rootElement;this._canBindToCell(e,t,i)?(this._bindToCell(e,t,i,null==r?void 0:r.position,null==r?void 0:r.referencePosition,n),null!=o&&o.classList.add(SHOWN_CLASS),null!=o&&o.classList.remove(HIDDEN_CLASS)):this.unbindFromCell()}unbindFromCell(){var e=this._rootElement;null!=e&&e.parentElement&&(e.classList.remove(SHOWN_CLASS),e.classList.add(HIDDEN_CLASS))}_canBindToCell(e,t,i){var r=e.getCellRangeRelativeRect({col:t,row:i}),n=e.getElement(),{bottom:r,left:o,right:a,top:l}=r;return!!e.isFrozenCell(t,i)||!(r<e.getFrozenRowsHeight()||a<e.getFrozenColsWidth()||o>e.tableNoFrameWidth-e.getRightFrozenColsWidth()||l>e.tableNoFrameHeight-e.getBottomFrozenRowsHeight()||(({offsetHeight:r,offsetWidth:a}=n),r<l)||a<o)}_bindToCell(e,t,i,r,n,o,a){var l,s,h,d,u=this._rootElement,c=e.getCellRangeRelativeRect({col:t,row:i}),g=e.getElement(),p=e.internalProps.element.offsetWidth,c=c[\\\"width\\\"];return!(!u||(u.parentElement!==g&&g.appendChild(u),u.style.left=\\\"0px\\\",g=Math.min(.8*p,4*c),u.style.maxWidth=g+\\\"px\\\",p=u.clientWidth,c=u.clientHeight,!r&&!n)||(l=(g=this.getComputedPosition(e,t,i,r,n,o,a)).x,g=g.y,({x1:u,x2:s,y1:h,y2:d}=(u.style.left=l+\\\"px\\\",u.style.top=g+\\\"px\\\",isMobile()&&(u.style.fontSize=\\\"11px\\\"),e.stateManager.menu.bounds)),e.stateManager.menu.isShow&&u<l+p&&l<s&&g<d&&h<l+c))}getComputedPosition(e,t,i,r,n,o,a){const l=this._rootElement,s=e.getCellRangeRelativeRect({col:t,row:i}),{width:h,height:d}=e.internalProps.element.getBoundingClientRect(),u=s[\\\"width\\\"];let c,g;var p=Math.min(.8*h,4*u);l.style.maxWidth=p+\\\"px\\\";const f=l.clientWidth,m=l.clientHeight,b=a?6:0;if(r)g=r.x,c=r.y+b,this._triangleElement.style.left=\\\"50%\\\",this._triangleElement.style.marginLeft=\\\"-5px\\\",this._triangleElement.style.top=\\\"-5px\\\";else if(n){let e=null!=(p=n.placement)?p:Placement.bottom;const v=n.rect.left+n.rect.width/2,C=n.rect.top+n.rect.height/2,y=n.rect.top,_=n.rect.bottom,w=n.rect.left,x=n.rect.right;let t=0;const S=()=>{4<=++t||(this.removeStyleFromTriangle(),e===Placement.top?(g=v-f/2,c=y-m-b,this._triangleElement.style.left=\\\"50%\\\",this._triangleElement.style.marginLeft=\\\"-5px\\\",this._triangleElement.style.bottom=\\\"-5px\\\",o&&c<0&&(e=Placement.right,S())):e===Placement.bottom?(g=v-f/2,c=_+b,this._triangleElement.style.left=\\\"50%\\\",this._triangleElement.style.marginLeft=\\\"-5px\\\",this._triangleElement.style.top=\\\"-5px\\\",o&&c+m>d&&(e=Placement.left,S())):e===Placement.left?(c=C-m/2,g=w-f-b,this._triangleElement.style.top=\\\"50%\\\",this._triangleElement.style.marginTop=\\\"-5px\\\",this._triangleElement.style.right=\\\"-5px\\\",o&&g<0&&(e=Placement.top,S())):e===Placement.right&&(c=C-m/2,g=x+b,this._triangleElement.style.top=\\\"50%\\\",this._triangleElement.style.marginTop=\\\"-5px\\\",this._triangleElement.style.left=\\\"-5px\\\",o)&&g+f>h&&(e=Placement.bottom,S()))};S()}return o&&(g<0?g=0:g+l.offsetWidth>h&&(g=h-l.offsetWidth)),{x:g,y:c}}removeStyleFromTriangle(){this._triangleElement.style.left=\\\"\\\",this._triangleElement.style.right=\\\"\\\",this._triangleElement.style.top=\\\"\\\",this._triangleElement.style.bottom=\\\"\\\",this._triangleElement.style.marginLeft=\\\"\\\",this._triangleElement.style.marginTop=\\\"\\\"}_locate(e,t,i,r,n,o){var a=this.getComputedPosition(e,t,i,r,n,o),l=a.x,a=a.y;this._rootElement.style.left=l+\\\"px\\\",this._rootElement.style.top=a+\\\"px\\\"}},BubbleTooltip=class extends BaseTooltip{createTooltipElementInternal(){return new BubbleTooltipElement}},TOOLTIP_INSTANCE_FACTORY={\\\"bubble-tooltip\\\":function(e){return new BubbleTooltip(e)}},TooltipHandler=class{constructor(e,t){this._table=e,this._tooltipInstances={},this._bindTableEvent(e),this.confine=t}release(){var e,t,i=this._tooltipInstances;for(const r in i)null!=(t=null==(e=i[r])?void 0:e.release)&&t.call(e);delete this._tooltipInstances,this._attachInfo=null}_bindToCell(e,t,i){var r=this._attachInfo,n=this._getTooltipInstanceInfo(e,t);!r||n&&r.instance===n||(null!=(r=r.instance)&&r.unbindTooltipElement(),this._attachInfo=null),n&&n&&n.bindTooltipElement(e,t,i,this.confine)&&(r=this._table.getCellRange(e,t),this._attachInfo={range:r,instance:n,tooltipOptions:i})}_move(e,t,i){var r=this._attachInfo;r&&cellInRange(r.range,e,t)&&(r=r[\\\"instance\\\"],null!=r)&&r.moveTooltipElement(e,t,i,this.confine)}moveToPosition(e,t,i,r){var n=this._attachInfo;n&&cellInRange(n.range,e,t)&&(n=n[\\\"instance\\\"],this._attachInfo.tooltipOptions.position=i,this._attachInfo.tooltipOptions.referencePosition=r,null!=n)&&n.locateTooltipElement(e,t,i,r,this.confine)}_unbindFromCell(){var e=this._attachInfo;e&&(e=e[\\\"instance\\\"],null!=e&&e.unbindTooltipElement(),this._attachInfo=null)}_isBindCell(e,t){var i=this._attachInfo;return!!i&&cellInRange(i.range,e,t)}_bindTableEvent(a){a.on(TABLE_EVENT_TYPE.MOUSEENTER_CELL,e=>{var t,i,r,n;isMobile()||(({x1:r,x2:n,y1:t,y2:i}=a.stateManager.menu.bounds),a.stateManager.menu.isShow&&\\\"number\\\"==typeof e.x&&\\\"number\\\"==typeof e.y&&e.x>r&&e.x<n&&e.y>t&&e.y<i)||(({col:r,row:n}=e),this.showTooltip(r,n))}),a.on(TABLE_EVENT_TYPE.MOUSEMOVE_CELL,e=>{var t,i,r,n,o;isMobile()||(null!=(o=null==(o=this._attachInfo)?void 0:o.tooltipOptions)&&o.referencePosition&&(o=e[\\\"event\\\"],({left:t,right:i,top:r,bottom:n}=this._attachInfo.tooltipOptions.referencePosition.rect),(o=a._getMouseAbstractPoint(o,!1)).inTable&&o.x>=t-5&&o.x<=i+5&&o.y>=r-5&&o.y<=n+5||this._unbindFromCell()),this._attachInfo&&a.stateManager.menu.isShow&&this._bindToCell(e.col,e.row))}),a.on(TABLE_EVENT_TYPE.MOUSELEAVE_CELL,e=>{this._unbindFromCell()}),a.on(TABLE_EVENT_TYPE.SELECTED_CELL,e=>{this._isBindCell(e.col,e.row)&&this._unbindFromCell()}),a.on(TABLE_EVENT_TYPE.MOUSELEAVE_TABLE,e=>{this._unbindFromCell()}),a.on(TABLE_EVENT_TYPE.SCROLL,e=>{this._unbindFromCell()})}showTooltip(e,t){let i;var r,n,o=this._table,a=o.getHeaderDescription(e,t);a?(r=o.getCellRangeRelativeRect({col:e,row:t}),i={content:a,referencePosition:{placement:Placement.bottom,rect:r},style:{arrowMark:!1}}):null!=(r=o.internalProps.tooltip)&&r.isShowOverflowTextTooltip&&(r=o.getCellOverflowText(e,t),n=o.getCellRangeRelativeRect({col:e,row:t}),r)&&(i={content:a?a+`\\n  `+r:r,referencePosition:{placement:Placement.bottom,rect:n},style:o.theme.tooltipStyle}),i?this._bindToCell(e,t,i):this._unbindFromCell()}_getTooltipInstanceInfo(e,t){var i=this._table,r=this._tooltipInstances;return r&&r[\\\"bubble-tooltip\\\"]||r&&(r[\\\"bubble-tooltip\\\"]=TOOLTIP_INSTANCE_FACTORY[\\\"bubble-tooltip\\\"](i))}isBinded(e){var t;return JSON.stringify(e)===JSON.stringify(null==(t=this._attachInfo)?void 0:t.tooltipOptions)}},BaseMenu=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),class{constructor(e){this._table=e}release(){this.unbindMenuElement(),this._menuElement&&this._menuElement.release(),this._menuElement=void 0}_getMenuElement(){return this._menuElement||(this._menuElement=this.createMenuElementInternal()),this._menuElement}bindMenuElement(e,t,i){return this._getMenuElement().bindToCell(this._table,e,t,i)}unbindMenuElement(){this._getMenuElement().unbindFromCell()}pointInMenuElement(e,t){return this._getMenuElement().pointInMenuElement(e,t)}}),CLASSNAME2=(init_esbuild_inject(),\\\"vtable__menu-element\\\"),HIDDEN_CLASSNAME2=CLASSNAME2+\\\"--hidden\\\",SHOWN_CLASSNAME2=CLASSNAME2+\\\"--shown\\\";function createMenuDomElement2(){return createElement(\\\"div\\\",[CLASSNAME2,HIDDEN_CLASSNAME2])}var MenuContainer=class{constructor(l){var e;this._handler=new EventHandler,this._rootElement=createMenuDomElement2(),this._rootElement.addEventListener(\\\"wheel\\\",e=>{e.stopPropagation()}),null!=(e=this._rootElement)&&e.addEventListener(\\\"mousedown\\\",e=>{e.stopPropagation(),e.preventDefault()}),null!=(e=this._rootElement)&&e.addEventListener(\\\"click\\\",e=>{var t,i,r,n,o,a;e.stopPropagation(),e.preventDefault(),this._rootElement.classList.contains(HIDDEN_CLASSNAME2)||(({col:t,row:i,dropDownIndex:a,menuKey:r,text:n,hasChildren:o}=e.target),\\\"number\\\"!=typeof a||o||(o=l.isPivotTable()?l.internalProps.layoutMap.getPivotDimensionInfo(t,i):l.getHeaderField(t,i),a=l._dropDownMenuIsHighlight(t,i,a),l.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLICK,{col:t,row:i,field:o,menuKey:r,text:n,highlight:a,cellLocation:l.getCellLocation(t,i),event:e}),l.fireListeners(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLEAR,null),l.fireListeners(TABLE_EVENT_TYPE.HIDE_MENU,null)),e.stopPropagation())}),null!=(e=this._rootElement)&&e.addEventListener(\\\"mousemove\\\",e=>{this._rootElement.classList.contains(HIDDEN_CLASSNAME2)||e.stopPropagation()})}get rootElement(){return this._rootElement}release(){this.unbindFromCell();var e=this._rootElement;null!=e&&e.parentElement&&e.parentElement.removeChild(e),this._handler.release(),delete this._rootElement}bindToCell(e,t,i,r){var n=this._rootElement;if(this._menuInstanceInfo=r,null!=n&&n.classList.remove(SHOWN_CLASSNAME2),null!=n&&n.classList.add(HIDDEN_CLASSNAME2),this._canBindToCell(e,t,i)){if(n.innerHTML=\\\"\\\",n.appendChild(r.content),this._bindCell(e,t,i,r.position,r.referencePosition))return null!=n&&n.classList.add(SHOWN_CLASSNAME2),null!=n&&n.classList.remove(HIDDEN_CLASSNAME2),!0}else this.unbindFromCell();return!1}unbindFromCell(){var e=this._rootElement;this._menuInstanceInfo=void 0,null!=e&&e.parentElement&&(e.classList.remove(SHOWN_CLASSNAME2),e.classList.add(HIDDEN_CLASSNAME2))}_canBindToCell(e,t,i){var r=e.getCellRangeRelativeRect({col:t,row:i}),n=e.getElement(),{top:r,bottom:o,left:a,right:l}=r;return!!e.isFrozenCell(t,i)||!(o<e.getFrozenRowsHeight()||l<e.getFrozenColsWidth()||a>e.tableNoFrameWidth-e.getRightFrozenColsWidth()||r>e.tableNoFrameHeight-e.getBottomFrozenRowsHeight()||(({offsetHeight:o,offsetWidth:l}=n),o<r)||l<a)}_bindCell(e,t,i,r,n){var o=this._rootElement,a=e.getElement(),{width:l,height:s}=e.internalProps.element.getBoundingClientRect();if(o){o.parentElement!==a&&a.appendChild(o),o.style.left=\\\"0px\\\";o.style.maxWidth=.8*l+\\\"px\\\";var a=o.clientWidth,h=o.clientHeight;let e,t;return r&&(e=r.x,t=r.y),n&&(e=n.rect.right-a,t=n.rect.bottom),t+h>s&&(t=s-h,e+=a-2),t<0&&(t/=2),o.style.top=t+\\\"px\\\",e<0?e=0:e+a>l&&(e=l-a),o.style.left=e+\\\"px\\\",!0}return!1}pointInMenuElement(e,t){var{x:i,y:r,width:n,height:o}=this._rootElement.getBoundingClientRect();return i-5<e&&e<i+n+5&&r-5<t&&t<r+o+5}},Menu=class extends BaseMenu{createMenuElementInternal(){return new MenuElement(this._table)}},Container2=class extends BaseMenu{createMenuElementInternal(){return new MenuContainer(this._table)}},MENU_INSTANCE_FACTORY={\\\"dropdown-menu\\\":function(e){return new Menu(e)},\\\"context-menu\\\":function(e){return new Menu(e)},container:e=>new Container2(e)};function getMenuInstanceInfo(e,t,i,r,n){var{lineHeight:o,textBaseline:a,textStick:l}=e._getCellStyle(t,i);let s=e.getCellRangeRelativeRect(e.getCellRange(t,i)),{left:h,right:d,bottom:u,top:c,width:g,height:p}=s=l?e.getVisibleCellRangeRelativeRect({col:t,row:i}):s;return e.isHeader(t,i)&&({left:h,right:d,bottom:u,top:c,width:g,height:p}=e.internalProps.headerHelper.getDropDownIconRect(s,o,a||\\\"middle\\\")),null!=n&&n.content?{type:r,position:n.position,referencePosition:null!=(l=n.referencePosition)?l:{rect:{left:h,right:d,top:c,bottom:u,width:g,height:p}},content:n.content}:\\\"dropdown-menu\\\"===r?(({dropDownMenu:o=e.globalDropDownMenu,pivotInfo:a}=e._getHeaderLayoutMap(t,i)),{type:r,referencePosition:{rect:{left:h,right:d,top:c,bottom:u,width:g,height:p}},content:o,pivotInfo:a}):null}var MenuHandler2=class{constructor(e){this._table=e,this._menuInstances={},this._bindTableEvent(e)}release(){var e=this._menuInstances;for(const t in e)e[t].release();delete this._menuInstances,this._attachInfo=null}_bindToCell(e,t,i,r){var n=this._attachInfo,o=this._getMenuInstanceInfo(e,t,i,r);!n||o&&n.instance===o.instance||(null!=(n=n.instance)&&n.unbindMenuElement(),this._attachInfo=null),o&&(({instance:n,info:o}=o),n)&&n.bindMenuElement(e,t,o)&&(o=this._table.getCellRange(e,t),this._attachInfo={range:o,instance:n})}_unbindFromCell(){var e=this._attachInfo;e&&(e=e[\\\"instance\\\"],null!=e&&e.unbindMenuElement(),this._attachInfo=null)}_isBindToCell(e,t){var i=this._attachInfo;return!!i&&cellInRange(i.range,e,t)}pointInMenuElement(e,t){var i;return!!this._attachInfo&&(i=this._attachInfo[\\\"instance\\\"],i.pointInMenuElement(e,t))}_bindTableEvent(n){n.on(TABLE_EVENT_TYPE.DROPDOWN_ICON_CLICK,e=>{this._attachInfo&&this._isBindToCell(e.col,e.row)?this._unbindFromCell():this._bindToCell(e.col,e.row,\\\"dropdown-menu\\\")}),n.on(TABLE_EVENT_TYPE.DROPDOWN_MENU_CLEAR,e=>{this._unbindFromCell()}),n.on(TABLE_EVENT_TYPE.CONTEXTMENU_CELL,t=>{var i;if(\\\"html\\\"===(null==(r=n.internalProps.menu)?void 0:r.renderMode)){var r=n._getMouseAbstractPoint(t.event,!1);let e=null;r.inTable&&\\\"function\\\"==typeof(null==(i=n.internalProps.menu)?void 0:i.contextMenuItems)?e=n.internalProps.menu.contextMenuItems(n.getHeaderField(t.col,t.row),t.row,t.col):r.inTable&&Array.isArray(null==(i=n.internalProps.menu)?void 0:i.contextMenuItems)&&(e=null==(i=n.internalProps.menu)?void 0:i.contextMenuItems),this._bindToCell(t.col,t.row,\\\"context-menu\\\",{content:e,position:{x:r.x,y:r.y}})}})}_getMenuInstanceInfo(e,t,i,r){var n=this._table,o=this._menuInstances,a=getMenuInstanceInfo(n,e,t,i,r);return a?{instance:o&&o[i]||o&&(o[i]=MENU_INSTANCE_FACTORY[i](n)),type:i,info:a}:null}},FocusInput=(init_esbuild_inject(),class extends EventTarget{constructor(e,t){var i,r;super(),this._table=e,\\\"node\\\"!==Env.mode&&((i=document.createElement(\\\"div\\\")).style.opacity=\\\"0\\\",i.dataset.vtable=\\\"vtable\\\",i.style.pointerEvents=\\\"none\\\",i.classList.add(\\\"input-container\\\"),r=this._input=document.createElement(\\\"input\\\"),i.appendChild(r),r.classList.add(\\\"table-focus-control\\\"),r.dataset.vtable=\\\"vtable\\\",r.readOnly=!0,t.appendChild(i))}focus(){this._input.focus({preventScroll:!0})}setFocusRect(e,t){var i=this._input,r=(i.value=t,i.select(),e.top-this._table.scrollTop),n=e.left-this._table.scrollLeft;i.style.top=r.toFixed()+\\\"px\\\",i.style.left=n.toFixed()+\\\"px\\\",i.style.width=e.width.toFixed()+\\\"px\\\",i.style.height=e.height.toFixed()+\\\"px\\\"}get input(){return this._input}release(){}}),defaultPixelRatio=(init_esbuild_inject(),1);function setPixelRatio(){isNode?defaultPixelRatio=1:1<(defaultPixelRatio=Math.ceil(window.devicePixelRatio||1))&&defaultPixelRatio%2!=0&&(defaultPixelRatio+=1)}setPixelRatio(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var __rest5=function(e,t){var i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\\\"function\\\"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i},defaultLegendSpec={orient:\\\"bottom\\\",position:\\\"middle\\\",padding:30,title:{visible:!1,padding:0,textStyle:{fontSize:14,fill:\\\"#000000\\\",fontWeight:\\\"normal\\\"},space:12},item:{visible:!0,spaceCol:10,spaceRow:10,padding:2,background:{state:{selectedHover:{fill:\\\"gray\\\",fillOpacity:.7},unSelectedHover:{fill:\\\"gray\\\",fillOpacity:.2}}},shape:{space:4,state:{unSelected:{fillOpacity:.5}}},label:{space:4,style:{fill:\\\"#89909D\\\",fontSize:14},state:{unSelected:{fillOpacity:.5}}}},allowAllCanceled:!0,visible:!0};function getLegendAttributes(e,t){var i=merge({},defaultLegendSpec,e),{title:r={},item:n={},pager:o={},background:a={}}=i,i=__rest5(i,[\\\"title\\\",\\\"item\\\",\\\"pager\\\",\\\"background\\\",\\\"type\\\",\\\"id\\\",\\\"visible\\\",\\\"orient\\\",\\\"position\\\",\\\"data\\\",\\\"filter\\\",\\\"regionId\\\",\\\"regionIndex\\\",\\\"seriesIndex\\\",\\\"seriesId\\\",\\\"padding\\\"]);return r.visible&&(i.title=transformLegendTitleAttributes(r)),isEmpty_default(n.focusIconStyle)||transformToGraphic(n.focusIconStyle),transformComponentStyle(n.shape),transformComponentStyle(n.label),transformComponentStyle(n.value),transformComponentStyle(n.background),isPercent(n.maxWidth)&&(n.maxWidth=Number(n.maxWidth.substring(0,n.maxWidth.length-1))*t.width/100),isPercent(n.width)&&(n.width=Number(n.width.substring(0,n.width.length-1))*t.width/100),isPercent(n.height)&&(n.height=Number(n.height.substring(0,n.height.length-1))*t.width/100),i.item=n,isEmpty_default(o.textStyle)||transformToGraphic(o.textStyle),transformComponentStyle(o.handler),i.pager=o,a.visible&&!isEmpty_default(a.style)&&(merge(i,a.style),isValid_default(a.padding))&&(i.padding=a.padding),i}var DiscreteTableLegend=class{constructor(e,t){var i;this.table=t,this.option=cloneDeep(e),this.orient=null!=(i=e.orient)?i:\\\"left\\\",this.visible=null==(i=e.visible)||i,this.position=null!=(i=e.position)?i:\\\"middle\\\",this.selectedData=null!=(i=e.defaultSelected)?i:null,this.createComponent(),this.initEvent()}createComponent(){var e=this.getLegendAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight}),t=new DiscreteLegend(merge({},e,{defaultSelected:this.selectedData}));t.name=\\\"legend\\\",this.legendComponent=t,this.table.scenegraph.stage.defaultLayer.appendChild(t),this.adjustTableSize(e)}resize(){this.legendComponent&&(this.legendComponent.setAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight}),this.adjustTableSize(this.legendComponent.attribute))}adjustTableSize(n){let o=isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,a=isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0;if(!(o<=0||a<=0)){var l=this.table.tableNoFrameWidth,s=this.table.tableNoFrameHeight,h=getQuadProps(null!=(h=null!=(h=n.padding)?h:this.option.padding)?h:10);let e=0,t=0;\\\"left\\\"===this.orient?(e=h[3],t=0,o+=h[1]+h[3]):\\\"top\\\"===this.orient?(e=0,t=h[0],a+=h[0]+h[2]):\\\"right\\\"===this.orient?(e=l-o-h[1],t=0,o+=h[1]+h[3]):\\\"bottom\\\"===this.orient&&(e=0,t=s-a-h[2],a+=h[0]+h[2]);var d=\\\"bottom\\\"===this.orient||\\\"top\\\"===this.orient?\\\"horizontal\\\":\\\"vertical\\\",u=this.position;let i=0,r=0;\\\"horizontal\\\"==d?i=\\\"middle\\\"===u?(l-o)/2:\\\"end\\\"===u?l-o-h[1]:h[3]:r=\\\"middle\\\"===u?(s-a)/2:\\\"end\\\"===u?s-a-h[2]:h[0],this.legendComponent.setAttributes({dx:i,dy:r,x:e,y:t}),\\\"left\\\"===this.orient?(this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(o),this.table.tableX+=Math.ceil(o)):\\\"top\\\"===this.orient?(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(a),this.table.tableY+=Math.ceil(a)):\\\"right\\\"===this.orient?this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(o):\\\"bottom\\\"===this.orient&&(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(a))}}getLegendAttributes(e){var t=\\\"bottom\\\"===this.orient||\\\"top\\\"===this.orient?\\\"horizontal\\\":\\\"vertical\\\";return Object.assign({layout:t,items:this.getLegendItems(),maxWidth:e.width,maxHeight:e.height},getLegendAttributes(this.option,e))}getLegendItems(){return this.option.data}initEvent(){this.legendComponent&&(this.legendComponent.addEventListener(LegendEvent.legendItemClick,e=>{var t=get_default(e,\\\"detail.currentSelected\\\");this.table.fireListeners(TABLE_EVENT_TYPE.LEGEND_ITEM_CLICK,{model:this,value:t,event:e})}),this.legendComponent.addEventListener(LegendEvent.legendItemHover,e=>{var t=get_default(e,\\\"detail\\\");this.table.fireListeners(TABLE_EVENT_TYPE.LEGEND_ITEM_HOVER,{model:this,value:t,event:e})}),this.legendComponent.addEventListener(LegendEvent.legendItemUnHover,e=>{var t=get_default(e,\\\"detail\\\");this.table.fireListeners(TABLE_EVENT_TYPE.LEGEND_ITEM_UNHOVER,{model:this,value:t,event:e})}),this.legendComponent.addEventListener(\\\"legendItemAttributeUpdate\\\",e=>{this.table.scenegraph.updateNextFrame()}))}getLegendBounds(){return{width:isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,height:isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0}}release(){this.legendComponent&&this.table.scenegraph.stage.defaultLayer.removeChild(this.legendComponent),this.legendComponent=null}},__rest6=(init_esbuild_inject(),init_esbuild_inject(),function(e,t){var i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\\\"function\\\"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i}),defaultContinueLegendSpec={orient:\\\"right\\\",position:\\\"middle\\\",padding:30,title:{visible:!1,padding:0,textStyle:{fontSize:14,fontWeight:\\\"normal\\\",fill:{type:\\\"palette\\\",key:\\\"titleFontColor\\\"}},space:12},handler:{visible:!0},startText:{style:{fontSize:14,fontWeight:\\\"normal\\\",fill:{type:\\\"palette\\\",key:\\\"labelFontColor\\\"}}},endText:{style:{fontSize:14,fontWeight:\\\"normal\\\",fill:{type:\\\"palette\\\",key:\\\"labelFontColor\\\"}}},handlerText:{style:{fontSize:14,fontWeight:\\\"normal\\\",fill:{type:\\\"palette\\\",key:\\\"labelFontColor\\\"}}}},defaultColorLegendSpec={horizontal:Object.assign(Object.assign({},defaultContinueLegendSpec),{rail:{width:200,height:8,style:{fill:\\\"rgba(0,0,0,0.04)\\\"}}}),vertical:Object.assign(Object.assign({},defaultContinueLegendSpec),{rail:{width:8,height:200,style:{fill:\\\"rgba(0,0,0,0.04)\\\"}}})},defaultSizeLegendSpec={horizontal:Object.assign({sizeBackground:{fill:\\\"#cdcdcd\\\"},track:{style:{fill:\\\"rgba(20,20,20,0.1)\\\"}},rail:{width:200,height:4,style:{fill:\\\"rgba(0,0,0,0.04)\\\"}}},defaultContinueLegendSpec),vertical:Object.assign({sizeBackground:{fill:\\\"#cdcdcd\\\"},track:{style:{fill:\\\"rgba(20,20,20,0.1)\\\"}},rail:{width:4,height:200,style:{fill:\\\"rgba(0,0,0,0.04)\\\"}}},defaultContinueLegendSpec)};function getContinuousLegendAttributes(e,t){var i=merge({},(\\\"color\\\"===e.type?defaultColorLegendSpec:defaultSizeLegendSpec)[\\\"bottom\\\"===e.orient||\\\"top\\\"===e.orient?\\\"horizontal\\\":\\\"vertical\\\"],e),{title:r={},handler:n={},rail:o={},track:a={},startText:l,endText:s,handlerText:h,sizeBackground:d,background:u={}}=i,i=__rest6(i,[\\\"title\\\",\\\"handler\\\",\\\"rail\\\",\\\"track\\\",\\\"startText\\\",\\\"endText\\\",\\\"handlerText\\\",\\\"sizeBackground\\\",\\\"background\\\",\\\"type\\\",\\\"id\\\",\\\"visible\\\",\\\"orient\\\",\\\"position\\\",\\\"data\\\",\\\"defaultSelected\\\",\\\"field\\\",\\\"filter\\\",\\\"regionId\\\",\\\"regionIndex\\\",\\\"seriesIndex\\\",\\\"seriesId\\\",\\\"padding\\\"]);return r.visible&&(i.title=transformLegendTitleAttributes(r)),i.showHandler=!1!==n.visible,isEmpty_default(n.style)||(i.handlerStyle=transformToGraphic(n.style)),isValid_default(o.width)&&(i.railWidth=o.width),isValid_default(o.height)&&(i.railHeight=o.height),isEmpty_default(o.style)||(i.railStyle=transformToGraphic(o.style)),isEmpty_default(a.style)||(i.trackStyle=transformToGraphic(a.style)),i.startText=transformComponentStyle(l),i.endText=transformComponentStyle(s),i.handlerText=transformComponentStyle(h),isEmpty_default(d)||(i.sizeBackground=transformToGraphic(d)),u.visible&&!isEmpty_default(u.style)&&(merge(i,u.style),isValid_default(u.padding))&&(i.padding=u.padding),i}var ContinueTableLegend=class{constructor(e,t){var i;this.table=t,this.option=cloneDeep(e),this.orient=null!=(i=e.orient)?i:\\\"left\\\",this.visible=null==(i=e.visible)||i,this.position=null!=(i=e.position)?i:\\\"middle\\\",this.selectedData=null!=(i=e.defaultSelected)?i:null,this.createComponent(),this.initEvent()}createComponent(){var e=this.getLegendAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight}),t=new(\\\"color\\\"===this.option.type?ColorContinuousLegend:SizeContinuousLegend)(merge({},e,{slidable:!0}));t.name=\\\"legend\\\",this.legendComponent=t,this.table.scenegraph.stage.defaultLayer.appendChild(t),this.adjustTableSize(e)}resize(){this.legendComponent&&(this.legendComponent.setAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight}),this.adjustTableSize(this.legendComponent.attribute))}adjustTableSize(n){let o=isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,a=isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0;if(!(o<=0||a<=0)){var l=this.table.tableNoFrameWidth,s=this.table.tableNoFrameHeight,h=getQuadProps(null!=(h=null!=(h=n.padding)?h:this.option.padding)?h:10);let e=0,t=0;\\\"left\\\"===this.orient?(e=h[3],t=0,o+=h[1]+h[3]):\\\"top\\\"===this.orient?(e=0,t=h[0],a+=h[0]+h[2]):\\\"right\\\"===this.orient?(e=l-o-h[1],t=0,o+=h[1]+h[3]):\\\"bottom\\\"===this.orient&&(e=0,t=s-a-h[2],a+=h[0]+h[2]);var d=\\\"bottom\\\"===this.orient||\\\"top\\\"===this.orient?\\\"horizontal\\\":\\\"vertical\\\",u=this.position;let i=0,r=0;\\\"horizontal\\\"==d?i=\\\"middle\\\"===u?(l-o)/2:\\\"end\\\"===u?l-o-h[1]:h[3]:r=\\\"middle\\\"===u?(s-a)/2:\\\"end\\\"===u?s-a-h[2]:h[0],this.legendComponent.setAttributes({dx:i,dy:r,x:e,y:t}),\\\"left\\\"===this.orient?(this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(o),this.table.tableX+=Math.ceil(o)):\\\"top\\\"===this.orient?(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(a),this.table.tableY+=Math.ceil(a)):\\\"right\\\"===this.orient?this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(o):\\\"bottom\\\"===this.orient&&(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(a))}}getLegendAttributes(e){var t=\\\"bottom\\\"===this.orient||\\\"top\\\"===this.orient?\\\"horizontal\\\":\\\"vertical\\\",i=\\\"horizontal\\\"==t?\\\"bottom\\\":this.orient;return Object.assign(Object.assign({},getContinuousLegendAttributes(this.option,e)),{layout:t,align:i,min:this.option.min,max:this.option.max,value:this.option.value,[\\\"color\\\"===this.option.type?\\\"colors\\\":\\\"sizeRange\\\"]:\\\"color\\\"===this.option.type?this.option.colors:this.option.sizeRange})}initEvent(){this.legendComponent&&this.legendComponent.addEventListener(\\\"change\\\",e=>{var t=get_default(e,\\\"detail.value\\\");this.table.fireListeners(TABLE_EVENT_TYPE.LEGEND_CHANGE,{model:this,value:t,event:e}),this.table.scenegraph.updateNextFrame()})}getLegendBounds(){return{width:isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,height:isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0}}release(){this.legendComponent&&this.table.scenegraph.stage.defaultLayer.removeChild(this.legendComponent),this.legendComponent=null}};function createLegend(e,t){return new(\\\"color\\\"===e.type||\\\"size\\\"===e.type?ContinueTableLegend:DiscreteTableLegend)(e,t)}init_esbuild_inject();var NumberRangeMap=class{constructor(e){this.isUpdate=!1,this._keys=[],this._sorted=!1,this.data=new Map,this._keys.length=0,this.cumulativeSum=new Map,this.difference=new Map,this.totalSum=0,this.table=e}get length(){return this.data.size}clear(){this._keys=[],this.data.clear(),this.cumulativeSum.clear(),this.difference.clear(),this.totalSum=0}clearRange(){this.cumulativeSum.clear(),this.difference.clear()}add(e,t){var i=this.table.getRowHeight(e);this.data.has(e)||(this._keys.push(e),this._sorted=!1),this.data.set(e,t),this.totalSum+=t,this.updateDifference(e,t-i)}remove(e){var t,i;this.data.has(e)&&(t=this.data.get(e),this.data[\\\"delete\\\"](e),-1!==(i=this._keys.indexOf(e))&&this._keys.splice(i,1),this.totalSum-=t,i=this.table.getRowHeight(e),this.updateDifference(e,i-t))}put(e,t){var i;this.data.has(e)?(i=this.data.get(e),this.data.set(e,t),this.totalSum+=i=t-i,this.updateDifference(e,i)):this.add(e,t)}get(e){return this.data.get(e)}has(e){return this.data.has(e)}_sort(){var e=this[\\\"_keys\\\"];this._sorted||(e.sort((e,t)=>e<t?-1:t<e?1:0),this._sorted=!0)}updateDifference(e,t){var i=null!=(i=this.difference.get(e))?i:0;this.difference.set(e,i+t),this.update()}getSumInRange(e,t){return this.calculatePrefixSum(t)-this.calculatePrefixSum(e-1)}updateCumulativeSum(e,t){for(var[i,r]of this.cumulativeSum)i>=e&&this.cumulativeSum.set(i,r+t)}calculatePrefixSum(t){if(t<0)return 0;if(this.cumulativeSum.has(t)){let e=this.cumulativeSum.get(t);for(var[i,r]of this.difference)i<=t&&(e+=r);return e}return this.dealDiffenence(),this.getCumulativeSum(t)}getCumulativeSum(e){var t;let i=0;for(let r=e;0<=r;r--){if(this.cumulativeSum.has(r)){i+=this.cumulativeSum.get(r);break}i+=null!=(t=this.data.get(r))?t:this.table.getRowHeight(r)}return this.cumulativeSum.set(e,i),i}update(){this.isUpdate||(this.isUpdate=!0,setTimeout(()=>{this.dealDiffenence(),this.isUpdate=!1},0))}dealDiffenence(){for(var[e]of this.cumulativeSum)for(var[t,i]of this.difference)e>=t&&(t=this.cumulativeSum.get(e),this.cumulativeSum.set(e,t+i));this.difference.clear()}insert(e,t){for(let r=e;r<=this.getLastIndex();r++)this.cumulativeSum[\\\"delete\\\"](r);var i=this.getLastIndex()+1;this.adjustOrder(e,e+1,i-e),isValid_default(t)&&this.put(e,t)}getLastIndex(){return this._sort(),this._keys[this._keys.length-1]}delLast(){var e=this.getLastIndex();this.remove(e)}\\\"delete\\\"(t){if(this.has(t)){for(let e=t;e<=this.getLastIndex();e++)this.cumulativeSum[\\\"delete\\\"](e);var i=this.getLastIndex();this.adjustOrder(t+1,t,i-t),this.delLast()}}adjustOrder(i,r,n){this.clearRange(),this._sort();var o=this[\\\"_keys\\\"];if(r<i){var a=[];for(let e=indexFirst2(o,i+n-1);0<=e;e--){var l=o[e];if(i<=l)a.push(this.get(l));else if(r<=l&&l<i)this.put(l+n,this.get(l));else if(l<r)break}for(let t=0;t<n;t++)this.put(r+t,a[n-1-t])}var s=o[\\\"length\\\"];if(i<r){var h=[];for(let e=indexFirst2(o,i);e<s;e++){var d=o[e];if(i<=d&&d<i+n)h.push(this.get(d));else if(i+n<=d&&d<=r)this.put(d-n,this.get(d));else if(r<d)break}for(let t=0;t<n;t++)this.put(r+t,h[t])}}exchangeOrder(r,n,o,a,l){var s=this[\\\"_keys\\\"];if(this._sorted||(s.sort((e,t)=>e<t?-1:t<e?1:0),this._sorted=!0),o<r){var h=[],d=[];for(let e=indexFirst2(s,o);e<r+n;e++){var u=s[e];(r<=u&&u<r+n?d:h).push(this.get(u))}for(let t=0;t<n;t++)this.put(l+t,d[t]);for(let i=0;i<h.length;i++)this.put(l+n+i,h[i])}else{var c=[],g=[];for(let e=indexFirst2(s,r);e<o+a;e++){var p=s[e];(r<=p&&p<r+n?g:c).push(this.get(p))}for(let t=0;t<n;t++)this.put(l+t,g[t]);for(let i=0;i<c.length;i++)this.put(r+i,c[i])}}};function indexFirst2(e,t){let i=0,r=e.length-1;for(;i<=r;){var n=Math.floor((i+r)/2);if(e[n]===t)return n;e[n]>t?r=n-1:i=n+1}return r<0?0:r}init_esbuild_inject();var RowSeriesNumberHelper=class{constructor(e){this._table=e;var t=get3();this.dragReorderIconName=t[InternalIconName.dragReorderIconName]}getIcons(e,t){return[this.dragReorderIconName]}},CustomCellStylePlugin=(init_esbuild_inject(),class{constructor(e,t,i){this.table=e,this.customCellStyle=t,this.customCellStyleArrangement=i}getCustomCellStyle(e,t){var i=this.getCustomCellStyleId(e,t);if(i)return this.getCustomCellStyleOption(i).style}getCustomCellStyleId(t,i){let r;return this.customCellStyleArrangement.forEach(e=>{e.cellPosition.range?e.cellPosition.range.start.col<=t&&e.cellPosition.range.end.col>=t&&e.cellPosition.range.start.row<=i&&e.cellPosition.range.end.row>=i&&(r=e.customStyleId):e.cellPosition.col===t&&e.cellPosition.row===i&&(r=e.customStyleId)}),r}getCustomCellStyleOption(t){return this.customCellStyle.find(e=>e.id===t)}registerCustomCellStyle(t,e){var i=this.customCellStyle.findIndex(e=>e.id===t);-1===i?this.customCellStyle.push({id:t,style:e}):this.customCellStyle[i]={id:t,style:e},this.customCellStyleArrangement.forEach(e=>{var i=e.cellPosition;if(e.customStyleId===t)if(i.range)for(let t=i.range.start.col;t<=i.range.end.col;t++)for(let e=i.range.start.row;e<=i.range.end.row;e++)this.table.scenegraph.updateCellContent(t,e);else this.table.scenegraph.updateCellContent(i.col,i.row)}),this.table.scenegraph.updateNextFrame()}arrangeCustomCellStyle(i,e){var r=this.customCellStyleArrangement.findIndex(e=>e.cellPosition.range&&i.range?e.cellPosition.range.start.col===i.range.start.col&&e.cellPosition.range.start.row===i.range.start.row&&e.cellPosition.range.end.col===i.range.end.col&&e.cellPosition.range.end.row===i.range.end.row:e.cellPosition.col===i.col&&e.cellPosition.row===i.row);if(-1===r?this.customCellStyleArrangement.push({cellPosition:{col:i.col,row:i.row,range:i.range},customStyleId:e}):this.customCellStyleArrangement[r].customStyleId=e,i.range)for(let t=i.range.start.col;t<=i.range.end.col;t++)for(let e=i.range.start.row;e<=i.range.end.row;e++)this.table.scenegraph.updateCellContent(t,e);else this.table.scenegraph.updateCellContent(i.col,i.row);this.table.scenegraph.updateNextFrame()}updateCustomCell(e,t){e.forEach(e=>{this.registerCustomCellStyle(e.id,e.style)}),t.forEach(e=>{this.arrangeCustomCellStyle(e.cellPosition,e.customStyleId)})}});function mergeStyle(e,t){e=e.clone();for(const r in t){var i=t[r];i&&(e[\\\"_\\\"+r]=i)}return e}var toBoxArray2=style[\\\"toBoxArray\\\"],isTouchEvent3=event[\\\"isTouchEvent\\\"],rangeReg=/^\\\\$(\\\\d+)\\\\$(\\\\d+)$/,EMPTY_STYLE=(importStyle(),{}),BaseTable=class extends EventTarget3{static get EVENT_TYPE(){return TABLE_EVENT_TYPE}constructor(e,t={}){var i;if(super(),this.showFrozenIcon=!0,this.version=\\\"0.25.0\\\",this.id=\\\"VTable\\\"+Date.now(),this.isReleased=!1,this._chartEventMap={},this.throttleInvalidate=throttle22(this.render.bind(this),200),!e&&\\\"node\\\"!==t.mode)throw new Error(\\\"vtable's container is undefined\\\");const{frozenColCount:r=0,defaultRowHeight:n=40,defaultHeaderRowHeight:o,defaultColWidth:a=80,defaultHeaderColWidth:l,widthMode:s=\\\"standard\\\",heightMode:h=\\\"standard\\\",autoFillWidth:d=!1,autoFillHeight:u=!1,widthAdaptiveMode:c=\\\"only-body\\\",heightAdaptiveMode:g=\\\"only-body\\\",keyboardOptions:p,eventOptions:f,rowSeriesNumber:m,columnResizeMode:b,rowResizeMode:v=\\\"none\\\",dragHeaderMode:C,showFrozenIcon:y,allowFrozenColCount:_,padding:w,customRender:x,pixelRatio:S=defaultPixelRatio,renderChartAsync:A,renderChartAsyncBatchCount:T,canvasWidth:R,canvasHeight:M,overscrollBehavior:B,limitMinWidth:E,limitMinHeight:P}=t;this.container=e,this.options=t,this._widthMode=s,this._heightMode=h,this._widthAdaptiveMode=c,this._heightAdaptiveMode=g,this._autoFillWidth=d,this._autoFillHeight=u,this.customRender=x,this.padding={top:0,right:0,left:0,bottom:0},w&&(\\\"number\\\"==typeof w?(this.padding.top=w,this.padding.left=w,this.padding.bottom=w,this.padding.right=w):(w.top&&(this.padding.top=w.top),w.bottom&&(this.padding.bottom=w.bottom),w.left&&(this.padding.left=w.left),w.right&&(this.padding.right=w.right))),this.tableNoFrameWidth=0,this.tableNoFrameHeight=0,this.canvasWidth=R,this.canvasHeight=M,this.columnWidthComputeMode=null!=(L=t.columnWidthComputeMode)?L:\\\"normal\\\";var L=this.internalProps={};void 0!==y&&(this.showFrozenIcon=y),\\\"number\\\"==typeof _&&_<=0&&(this.showFrozenIcon=!1),\\\"node\\\"!==Env.mode&&(L.element=createRootElement(this.padding),L.focusControl=new FocusInput(this,L.element),L.canvas=document.createElement(\\\"canvas\\\"),L.element.appendChild(L.canvas),L.context=L.canvas.getContext(\\\"2d\\\")),L.handler=new EventHandler,isNumber_default(this.options.resizeTime)&&(L.handler.resizeTime=this.options.resizeTime),L.pixelRatio=S,L.frozenColCount=r,L.defaultRowHeight=n,L.defaultHeaderRowHeight=null!=o?o:n,L.defaultColWidth=a,L.defaultHeaderColWidth=null!=l?l:a,L.keyboardOptions=p,L.eventOptions=f,L.rowSeriesNumber=m,L.columnResizeMode=b,L.rowResizeMode=v,L.dragHeaderMode=C,L.renderChartAsync=A,setBatchRenderChartCount(T),L.overscrollBehavior=null!=B?B:\\\"auto\\\",L._rowHeightsMap=new NumberRangeMap(this),L._rowRangeHeightsMap=new Map,L._colRangeWidthsMap=new Map,L._widthResizedColMap=new Set,L._heightResizedRowMap=new Set,this.colWidthsMap=new NumberMap,this.colContentWidthsMap=new NumberMap,this.colWidthsLimit={},L.calcWidthContext={_:L,get full(){var e;return\\\"node\\\"===Env.mode?R/(null!=S?S:1):this._.canvas.width/(null!=(e=this._.context.pixelRatio)?e:window.devicePixelRatio)}},L.cellTextOverflows={},L.focusedTable=!1,L.theme=themes_default.of(null!=(i=t.theme)?i:themes_default.DEFAULT),L.theme.isPivot=this.isPivotTable(),e&&(e.innerHTML=\\\"\\\",e.appendChild(L.element)),this._updateSize(),this.options=t,L.theme=themes_default.of(null!=(i=t.theme)?i:themes_default.DEFAULT),L.theme.isPivot=this.isPivotTable(),L.bodyHelper=new BodyHelper(this),L.headerHelper=new HeaderHelper(this),L.rowSeriesNumberHelper=new RowSeriesNumberHelper(this),L.autoWrapText=t.autoWrapText,L.enableLineBreak=t.enableLineBreak,L.allowFrozenColCount=null!=(i=t.allowFrozenColCount)?i:0,L.limitMaxAutoWidth=null!=(i=t.limitMaxAutoWidth)?i:450,L.limitMinWidth=null!=E?\\\"number\\\"==typeof E?E:E?10:0:10,L.limitMinHeight=null!=P?\\\"number\\\"==typeof P?P:P?10:0:10,this._vDataSet=new DataSet,this.scenegraph=new Scenegraph(this),this.stateManager=new StateManager(this),this.eventManager=new EventManager2(this),t.legends&&(L.legends=createLegend(t.legends,this),this.scenegraph.tableGroup.setAttributes({x:this.tableX,y:this.tableY})),L.tooltip=Object.assign({renderMode:\\\"html\\\",isShowOverflowTextTooltip:!1,confine:!0},t.tooltip),\\\"html\\\"===L.tooltip.renderMode&&(L.tooltipHandler=new TooltipHandler(this,L.tooltip.confine)),L.menu=Object.assign({renderMode:\\\"html\\\"},t.menu),Array.isArray(null==(i=t.menu)?void 0:i.dropDownMenuHighlight)&&this.setDropDownMenuHighlight(null==(i=t.menu)?void 0:i.dropDownMenuHighlight),Array.isArray(null==(i=t.menu)?void 0:i.defaultHeaderMenuItems)&&(this.globalDropDownMenu=t.menu.defaultHeaderMenuItems),\\\"html\\\"===L.menu.renderMode&&(L.menuHandler=new MenuHandler2(this)),this.headerStyleCache=new Map,this.bodyStyleCache=new Map,this.bodyBottomStyleCache=new Map,L.stick={changedCells:new Map},L.customMergeCell=t.customMergeCell,this.customCellStylePlugin=new CustomCellStylePlugin(this,null!=(i=t.customCellStyle)?i:[],null!=(L=t.customCellStyleArrangement)?L:[])}getContainer(){return this.container}getElement(){return this.internalProps.element}get canvas(){return this.internalProps.canvas}resize(){this._updateSize(),this.internalProps.legends&&this.internalProps.legends.resize(),this.internalProps.title&&this.internalProps.title.resize(),this.scenegraph.resize()}get rowCount(){return this.internalProps.rowCount}set rowCount(e){this.internalProps.rowCount=e}get colCount(){var e;return null!=(e=this.internalProps.colCount)?e:0}set colCount(e){this.internalProps.colCount=e}get frozenColCount(){var e;return null!=(e=null!=(e=null==(e=this.internalProps.layoutMap)?void 0:e.frozenColCount)?e:this.internalProps.frozenColCount)?e:0}set frozenColCount(e){e>=this.colCount&&(e=0),this.internalProps.frozenColCount=e,this.options.frozenColCount=e,this.tableNoFrameWidth-this.getColsWidth(0,e-1)<=120&&(this.internalProps.frozenColCount=0),this.stateManager.setFrozenCol(this.internalProps.frozenColCount)}setFrozenColCount(e){e>=this.colCount&&(e=0),this.internalProps.frozenColCount=e,this.options.frozenColCount=e,this.tableNoFrameWidth-this.getColsWidth(0,e-1)<=120&&(this.internalProps.frozenColCount=0),this.stateManager.setFrozenCol(this.internalProps.frozenColCount)}_setFrozenColCount(e){e>=this.colCount&&(e=0),this.internalProps.frozenColCount=e}_resetFrozenColCount(){this.options.frozenColCount&&(this.tableNoFrameWidth-this.getColsWidth(0,this.options.frozenColCount-1)<=120?this._setFrozenColCount(0):this.frozenColCount!==this.options.frozenColCount&&this._setFrozenColCount(this.options.frozenColCount))}get frozenRowCount(){var e;return null!=(e=null!=(e=null==(e=this.internalProps.layoutMap)?void 0:e.frozenRowCount)?e:this.internalProps.frozenRowCount)?e:0}set frozenRowCount(e){this.internalProps.frozenRowCount=e}get rightFrozenColCount(){var e;return null!=(e=null!=(e=null==(e=this.internalProps.layoutMap)?void 0:e.rightFrozenColCount)?e:this.internalProps.rightFrozenColCount)?e:0}set rightFrozenColCount(e){this.scenegraph.dealWidthRightFrozen(e)}get bottomFrozenRowCount(){var e;return null!=(e=null!=(e=null==(e=this.internalProps.layoutMap)?void 0:e.bottomFrozenRowCount)?e:this.internalProps.bottomFrozenRowCount)?e:0}set bottomFrozenRowCount(e){this.scenegraph.dealWidthBottomFrozen(e)}get defaultRowHeight(){return this.internalProps.defaultRowHeight}set defaultRowHeight(e){this.internalProps.defaultRowHeight=e,this.options.defaultRowHeight=e}get defaultHeaderRowHeight(){return this.internalProps.defaultHeaderRowHeight}set defaultHeaderRowHeight(e){this.internalProps.defaultHeaderRowHeight=e,this.options.defaultHeaderRowHeight=e}get defaultColWidth(){return this.internalProps.defaultColWidth}set defaultColWidth(e){this.internalProps.defaultColWidth=e,this.options.defaultColWidth=e}get defaultHeaderColWidth(){return this.internalProps.defaultHeaderColWidth}set defaultHeaderColWidth(e){this.internalProps.defaultHeaderColWidth=e,this.options.defaultHeaderColWidth=e}get colWidthsMap(){return this.internalProps._colWidthsMap}set colWidthsMap(e){this.internalProps._colWidthsMap=e}get colContentWidthsMap(){return this.internalProps._colContentWidthsMap}set colContentWidthsMap(e){this.internalProps._colContentWidthsMap=e}get _colRangeWidthsMap(){return this.internalProps._colRangeWidthsMap}set _colRangeWidthsMap(e){this.internalProps._colRangeWidthsMap=e}get _rowRangeHeightsMap(){return this.internalProps._rowRangeHeightsMap}set _rowRangeHeightsMap(e){this.internalProps._rowRangeHeightsMap=e}get rowHeightsMap(){return this.internalProps._rowHeightsMap}set rowHeightsMap(e){this.internalProps._rowHeightsMap=e}get colWidthsLimit(){return this.internalProps._colWidthsLimit}set colWidthsLimit(e){this.internalProps._colWidthsLimit=e}get keyboardOptions(){var e;return null!=(e=this.internalProps.keyboardOptions)?e:null}set keyboardOptions(e){this.internalProps.keyboardOptions=null!=e?e:void 0}get eventOptions(){var e;return null!=(e=this.internalProps.eventOptions)?e:null}set eventOptions(e){this.internalProps.eventOptions=null!=e?e:void 0}get widthMode(){return this._widthMode}set widthMode(e){e!==this._widthMode&&(this._widthMode=e,this.options.widthMode=e)}get heightMode(){return this._heightMode}set heightMode(e){e!==this._heightMode&&(this._heightMode=e,this.options.heightMode=e)}get autoFillWidth(){return this._autoFillWidth}set autoFillWidth(e){e!==this._autoFillWidth&&(this._autoFillWidth=e)}get autoFillHeight(){return this._autoFillHeight}set autoFillHeight(e){e!==this._autoFillHeight&&(this._autoFillHeight=e)}get widthAdaptiveMode(){return this._widthAdaptiveMode}set widthAdaptiveMode(e){e!==this._widthAdaptiveMode&&(this._widthAdaptiveMode=e)}get heightAdaptiveMode(){return this._heightAdaptiveMode}set heightAdaptiveMode(e){e!==this._heightAdaptiveMode&&(this._heightAdaptiveMode=e)}_colWidthDefineToPxWidth(e){return\\\"auto\\\"===e?0:_toPxWidth(this,e)}_getColWidthLimits(e){var t,i=this.colWidthsLimit[e];return i?(t={},i.min&&(t.min=_toPxWidth(this,i.min),t.minDef=i.min),i.max&&(t.max=_toPxWidth(this,i.max),t.maxDef=i.max),t):null}_adjustColWidth(e,t){var i=this._getColWidthLimits(e);return Math.max(_applyColWidthLimits(i,t),0)}setPixelRatio(e){this.internalProps.pixelRatio=e,this.scenegraph.setPixelRatio(e)}_updateSize(){var e,t=this[\\\"padding\\\"];let i=0,r=0;\\\"browser\\\"===Env.mode?(n=null!=(n=null==(n=(a=this.getElement()).parentElement)?void 0:n.offsetWidth)?n:0,o=null!=(o=null==(o=a.parentElement)?void 0:o.offsetHeight)?o:0,n=(a.style.width=n&&n-t.left-t.right+\\\"px\\\"||\\\"0px\\\",a.style.height=o&&o-t.top-t.bottom+\\\"px\\\"||\\\"0px\\\",this.internalProps)[\\\"canvas\\\"],i=null!=(o=null==(a=n.parentElement)?void 0:a.offsetWidth)?o:0,r=null!=(a=null==(t=n.parentElement)?void 0:t.offsetHeight)?a:0,null!=(o=null==this?void 0:this.scenegraph)&&o.stage?this.scenegraph.stage.resize(i,r):(n.style.width=\\\"\\\",n.style.height=\\\"\\\",n.width=i,n.height=r,n.style.width=i+\\\"px\\\",n.style.height=r+\\\"px\\\")):\\\"node\\\"===Env.mode&&(i=this.canvasWidth-1,r=this.canvasHeight-1);var n,o,t=Math.floor(i-getScrollBarSize(this.getTheme().scrollStyle)),a=Math.floor(r-getScrollBarSize(this.getTheme().scrollStyle));null!=(o=this.internalProps.theme)&&o.frameStyle&&(n=toBoxArray2(null!=(o=null==(n=this.internalProps.theme.frameStyle)?void 0:n.borderLineWidth)?o:[null]),o=toBoxArray2(null!=(o=null==(o=this.internalProps.theme.frameStyle)?void 0:o.shadowBlur)?o:[0]),null!=(e=this.theme.frameStyle)&&e.innerBorder?(this.tableX=0,this.tableY=0,this.tableNoFrameWidth=t-(null!=(e=o[1])?e:0),this.tableNoFrameHeight=a-(null!=(e=o[2])?e:0)):(this.tableX=(null!=(e=n[3])?e:0)+(null!=(e=o[3])?e:0),this.tableY=(null!=(e=n[0])?e:0)+(null!=(e=o[0])?e:0),this.tableNoFrameWidth=t-((null!=(e=n[1])?e:0)+(null!=(t=o[1])?t:0))-((null!=(e=n[3])?e:0)+(null!=(t=o[3])?t:0)),this.tableNoFrameHeight=a-((null!=(e=n[0])?e:0)+(null!=(t=o[0])?t:0))-((null!=(a=n[2])?a:0)+(null!=(e=o[2])?e:0))))}get rowHierarchyType(){return\\\"grid\\\"}getColsWidth(e,t){if(t<e)return 0;e=Math.max(e,0),t=Math.min(t,(null!=(i=this.colCount)?i:1/0)-1);var i=this._colRangeWidthsMap.get(`$${e}$`+t);if(null!=i)return i;var i=this._colRangeWidthsMap.get(`$${e}$`+(t-1));if(null!=i)return i=i+this.getColWidth(t),0<=e&&0<=t&&!Number.isNaN(i)&&this._colRangeWidthsMap.set(`$${e}$`+t,Math.round(i)),Math.round(i);let r=0;for(let n=e;n<=t;n++)r+=this.getColWidth(n);return 0<=e&&0<=t&&this._colRangeWidthsMap.set(`$${e}$`+t,Math.round(r)),Math.round(r)}getRowHeight(e){var t;return isValid_default(this.rowHeightsMap.get(e))?this.rowHeightsMap.get(e):(t=this.getDefaultRowHeight(e),isNumber_default(t)?t:this.defaultRowHeight)}getDefaultColumnWidth(e){var t;return this.isRowHeader(e,0)||this.isCornerHeader(e,0)?Array.isArray(this.defaultHeaderColWidth)?null!=(t=this.defaultHeaderColWidth[e])?t:this.defaultColWidth:this.defaultHeaderColWidth:this.isRightFrozenColumn(e,this.columnHeaderLevelCount)&&this.isPivotTable()?Array.isArray(this.defaultHeaderColWidth)?null!=(t=this.defaultHeaderColWidth[this.rowHeaderLevelCount-this.rightFrozenColCount])?t:this.defaultColWidth:this.defaultHeaderColWidth:this.defaultColWidth}getDefaultRowHeight(e){var t;return this.isColumnHeader(0,e)||this.isCornerHeader(0,e)||this.isSeriesNumberInHeader(0,e)?Array.isArray(this.defaultHeaderRowHeight)?null!=(t=this.defaultHeaderRowHeight[e])?t:this.internalProps.defaultRowHeight:this.defaultHeaderRowHeight:this.isBottomFrozenRow(e)?Array.isArray(this.defaultHeaderRowHeight)?null!=(t=this.defaultHeaderRowHeight[0<this.columnHeaderLevelCount?this.columnHeaderLevelCount-this.bottomFrozenRowCount:0])?t:this.internalProps.defaultRowHeight:this.defaultHeaderRowHeight:this.internalProps.defaultRowHeight}_setRowHeight(e,t,i){this.rowHeightsMap.put(e,Math.round(t)),i&&this._clearRowRangeHeightsMap(e)}getRowsHeight(i,r){var e;if(r<i||0===this.rowCount)return 0;i=Math.max(i,0),r=Math.min(r,(null!=(e=this.rowCount)?e:1/0)-1);let n=0;if(\\\"standard\\\"!==this.heightMode||this.autoFillHeight||!this.internalProps.layoutMap||this.hasAutoImageColumn()||0!==this.internalProps._heightResizedRowMap.size)n=this.rowHeightsMap.getSumInRange(i,r);else{for(let e=i;e<Math.min(r+1,this.columnHeaderLevelCount);e++)n+=this.getRowHeight(e);r>=this.columnHeaderLevelCount&&(n+=this.defaultRowHeight*(Math.min(r,this.rowCount-this.bottomFrozenRowCount-1)-Math.max(this.columnHeaderLevelCount,i)+1));for(let t=this.rowCount-this.bottomFrozenRowCount;t<r+1;t++)n+=this.getRowHeight(t)}return Math.round(n)}getColWidthDefined(e){var t=this.internalProps[\\\"layoutMap\\\"];return\\\"autoWidth\\\"===this.widthMode?\\\"auto\\\":(t=(null!=(t=null==t?void 0:t.getColumnWidthDefined(e))?t:{})[\\\"width\\\"],\\\"number\\\"==typeof t&&t<=0?0:t||this.getDefaultColumnWidth(e))}getColWidthDefinedNumber(e){var t=this.getColWidthDefined(e);return this._adjustColWidth(e,this._colWidthDefineToPxWidth(t))}isAutoRowHeight(e){return\\\"autoHeight\\\"===this.heightMode||0<=e&&e<this.columnHeaderLevelCount&&\\\"auto\\\"===this.getDefaultRowHeight(e)}getColWidth(e){var t=null!=(t=this.colWidthsMap.get(e))?t:this.getDefaultColumnWidth(e);return\\\"adaptive\\\"===this.widthMode&&\\\"number\\\"==typeof t||this.transpose&&\\\"number\\\"==typeof t?this._colWidthDefineToPxWidth(t):this._adjustColWidth(e,this._colWidthDefineToPxWidth(t))}_setColWidth(e,t,i,r){this.colWidthsMap.put(e,\\\"number\\\"==typeof t?Math.round(t):t),i&&this._clearColRangeWidthsMap(e),r||this.stateManager.checkFrozen()}_clearColRangeWidthsMap(e){if(\\\"number\\\"!=typeof e)this._colRangeWidthsMap.clear();else for(const r of this._colRangeWidthsMap.keys()){var t,i=rangeReg.exec(r);i&&(t=Number(i[1]),i=Number(i[2]),t<=e)&&e<=i&&this._colRangeWidthsMap[\\\"delete\\\"](r)}}_clearRowRangeHeightsMap(e){this.rowHeightsMap.clearRange()}_getColContentWidth(e){return Number(this.colContentWidthsMap.get(e))}_setColContentWidth(e,t){this.colContentWidthsMap.put(e,t)}getAllRowsHeight(){return this.internalProps.rowCount<=0?0:this.getRowsHeight(0,this.internalProps.rowCount-1)}getAllColsWidth(){return this.internalProps.colCount<=0?0:this.getColsWidth(0,this.internalProps.colCount-1)}getMaxColWidth(e){var t=this.colWidthsLimit[e];let i=null!=(t=t&&t.max)?t:1/0;return i=\\\"string\\\"==typeof i?_toPxWidth(this,i):i}setMaxColWidth(e,t){(this.colWidthsLimit[e]||(this.colWidthsLimit[e]={})).max=t}getMinColWidth(e){var t=this.colWidthsLimit[e];let i=null!=(t=t&&t.min)?t:0;return i=\\\"string\\\"==typeof i?_toPxWidth(this,i):i}setMinColWidth(e,t){(this.colWidthsLimit[e]||(this.colWidthsLimit[e]={})).min=t}getCellRect(e,t){var i=this.isFrozenCell(e,t),r=this.getColWidth(e),n=i&&i.col&&this.isRightFrozenColumn(e,t)?this.tableNoFrameWidth-(null!=(n=this.getColsWidth(e,this.colCount-1))?n:0):this.getColsWidth(0,e-1)||0,o=this.getRowHeight(t),i=i&&i.row&&this.isBottomFrozenRow(e,t)?this.tableNoFrameHeight-(null!=(i=this.getRowsHeight(t,this.rowCount-1))?i:0):this.getRowsHeight(0,t-1);return new Rect2(Math.round(n),Math.round(i),Math.round(r),Math.round(o))}getMergeCellRect(e,t){var i=this.getCellRange(e,t),r=this.getColsWidth(0,i.start.col-1)||0,n=this.getColsWidth(i.start.col,i.end.col),o=this.getRowsHeight(0,i.start.row-1)||0,i=this.getRowsHeight(i.start.row,i.end.row);return new Rect2(Math.round(r),Math.round(o),Math.round(n),Math.round(i))}getCellRelativeRect(e,t){var i=this.isFrozenCell(e,t);let r=!0,n=!0;null!=i&&i.col&&null!=i&&i.row?(r=!1,n=!1):null!=i&&i.col?r=!1:null!=i&&i.row&&(n=!1);i=this.getCellRect(e,t);return this._toRelativeRect(i,r,n)}getCellRangeRelativeRect(i){if(i.start){var r=this.isFrozenCell(i.start.col,i.start.row);let e=!0,t=!0;return null!=r&&r.col&&null!=r&&r.row?(e=!1,t=!1):null!=r&&r.col?e=!1:null!=r&&r.row&&(t=!1),this._toRelativeRect(this.getCellsRect(i.start.col,i.start.row,i.end.col,i.end.row),e,t)}var r=this.getCellRange(i.col,i.row),e=this.isFrozenCell(i.col,i.row);let t=!0,n=!0;return null!=e&&e.col&&null!=e&&e.row?(t=!1,n=!1):null!=e&&e.col?t=!1:null!=e&&e.row&&(n=!1),this._toRelativeRect(this.getCellsRect(r.start.col,r.start.row,r.end.col,r.end.row),t,n)}getVisibleCellRangeRelativeRect(e){var t=e.start?e:this.getCellRange(e.col,e.row);return this._getVisiableRect(this.getCellRangeRelativeRect(e),t)}_getVisiableRect(e,t){var i=t.start.col>=this.frozenColCount?Math.max(e.left,1<=this.frozenColCount?this.getColsWidth(0,this.frozenColCount-1):0):e.left,r=Math.min(e.right,this.tableNoFrameWidth),n=e.copy(),i=(n.left=i,n.right=r,t.start.row>=this.frozenRowCount?Math.max(e.top,1<=this.frozenRowCount?this.getRowsHeight(0,this.frozenRowCount-1):0):e.top),r=Math.min(e.bottom,this.tableNoFrameHeight);return n.top=i,n.bottom=r,n}getCellsRect(e,t,i,r){let n=this.getColsWidth(0,e-1)||0,o=this.getColsWidth(e,i);var a=this.scrollLeft;this.isLeftFrozenColumn(e)&&this.isRightFrozenColumn(i)?o=this.tableNoFrameWidth-(null!=(h=this.getColsWidth(e+1,this.colCount-1))?h:0)-n:this.isLeftFrozenColumn(e)&&!this.isLeftFrozenColumn(i)?o=Math.max(o-a,this.getColsWidth(e,this.frozenColCount-1)):!this.isRightFrozenColumn(e)&&this.isRightFrozenColumn(i)?(n=Math.min(n-a,this.tableNoFrameWidth-this.getRightFrozenColsWidth()),o=this.tableNoFrameWidth-(null!=(h=this.getColsWidth(e+1,this.colCount-1))?h:0)-n):this.isRightFrozenColumn(e)&&(n=this.tableNoFrameWidth-(null!=(a=this.getColsWidth(e,this.colCount-1))?a:0));let l=this.getRowsHeight(0,t-1),s=this.getRowsHeight(t,r);var h=this.scrollTop;return this.isTopFrozenRow(t)&&this.isBottomFrozenRow(r)?s=this.tableNoFrameHeight-(null!=(a=this.getRowsHeight(t+1,this.rowCount-1))?a:0)-l:this.isTopFrozenRow(t)&&!this.isTopFrozenRow(r)?s=Math.max(s-h,this.getRowsHeight(t,this.frozenRowCount-1)):!this.isBottomFrozenRow(t)&&this.isBottomFrozenRow(r)?(l=Math.min(l-h,this.tableNoFrameHeight-this.getBottomFrozenRowsHeight()),s=this.tableNoFrameHeight-(null!=(a=this.getRowsHeight(t+1,this.rowCount-1))?a:0)-l):this.isBottomFrozenRow(t)&&(l=this.tableNoFrameHeight-(null!=(h=this.getRowsHeight(t,this.rowCount-1))?h:0)),new Rect2(Math.round(n),Math.round(l),Math.round(o),Math.round(s))}getCellsRectWidth(e,t,i,r){var n=this.isFrozenCell(e,t),o=this.isFrozenCell(i,r);let a=this.getColsWidth(e,i);return n&&n.col&&(n=this.scrollLeft,o&&o.col||(a-=n,a=Math.max(a,this.getColsWidth(e,this.frozenColCount-1)))),a}getCellRangeRect(e){var t;return e.start?this.getCellsRect(e.start.col,e.start.row,e.end.col,e.end.row):(t=this.getCellRange(e.col,e.row),this.getCellsRect(t.start.col,t.start.row,t.end.col,t.end.row))}getCellRangeRectWidth(e){var t;return e.start?this.getCellsRectWidth(e.start.col,e.start.row,e.end.col,e.end.row):(t=this.getCellRange(e.col,e.row),this.getCellsRectWidth(t.start.col,t.start.row,t.end.col,t.end.row))}isFrozenCell(e,t){var i=this.isFrozenRow(t),r=this.isFrozenColumn(e);return i||r?{row:i,col:r}:null}getRowAt(e){var t=_getTargetFrozenRowAt(this,e);if(t)return t;let i=this.getTargetRowAt(e);return i=i||{top:-1,row:-1,bottom:-1,height:-1}}getColAt(e){var t=_getTargetFrozenColAt(this,e);if(t)return t;let i=this.getTargetColAt(e);return i=i||{left:-1,col:-1,right:-1,width:1}}getCellAt(e,t){var{row:i,top:r,bottom:n,height:o}=this.getRowAt(t),{col:a,left:l,right:s,width:h}=this.getColAt(e);return{row:i,col:a,rect:{left:l,right:s,top:r,bottom:n,width:h,height:o}}}_checkRowCol(e,t){return 0<=e&&e<this.colCount&&0<=t&&t<this.rowCount}_makeVisibleCell(e,t){var i,r,n;!this._checkRowCol(e,t)||(i=this.isFrozenCell(e,t))&&i.col&&i.row||(r=this.getCellRect(e,t),(n=_getScrollableVisibleRect(this)).contains(r))||(i&&i.col||this.getColsWidth(0,this.frozenColCount-1)+r.width>this.canvas.width||(r.left<n.left?this.scrollLeft-=n.left-r.left:n.right<r.right&&(this.scrollLeft-=n.right-r.right)),i&&i.row)||this.getRowsHeight(0,this.frozenRowCount-1)+r.height>this.canvas.height||(r.top<n.top?this.scrollTop-=n.top-r.top:n.bottom<r.bottom&&(this.scrollTop-=n.bottom-r.bottom))}render(){this.scenegraph.renderSceneGraph()}renderAsync(){return this.scenegraph.updateNextFrame(),new Promise((e,t)=>{setTimeout(()=>{e()},0)})}_toRelativeRect(e,t=!0,i=!0){var r=e.copy(),n=this.getVisibleRect();return r.offsetLeft(this.tableX-(t?n.left:0)),r.offsetTop(this.tableY-(i?n.top:0)),r}getVisibleRect(){var{scrollTop:e,scrollLeft:t}=this,i=this.tableNoFrameWidth,r=this.tableNoFrameHeight;return new Rect2(t,e,i,r)}get visibleRowCount(){var e=this[\\\"frozenRowCount\\\"],t=this.getVisibleRect(),i=0<e?t.top+this.getRowsHeight(0,e-1):t.top,r=this.getTargetRowAt(i);if(!r)return 0;i=Math.max(r.top>=i?r.row:r.row+1,e);let n=this.getRowsHeight(0,i-1),o=0;var a=this[\\\"rowCount\\\"];for(let s=i;s<a;s++){var l=n+this.getRowHeight(s);if(t.bottom<l)break;o++,n=l}return o}getBodyVisibleCellRange(){var{scrollTop:e,scrollLeft:t}=this,i=this.getFrozenRowsHeight(),r=this.getFrozenColsWidth(),n=this.getBottomFrozenRowsHeight(),o=this.getRightFrozenColsWidth(),i=this.getRowAt(e+i+1)[\\\"row\\\"],r=this.getColAt(t+r+1)[\\\"col\\\"],e=this.getAllRowsHeight()>this.tableNoFrameHeight?this.getRowAt(e+this.tableNoFrameHeight-1-n).row:this.rowCount-1,n=this.getAllColsWidth()>this.tableNoFrameWidth?this.getColAt(t+this.tableNoFrameWidth-1-o).col:this.colCount-1;return n<0||e<0?null:{rowStart:i,colStart:r,rowEnd:e,colEnd:n}}getBodyVisibleRowRange(){var e=this[\\\"scrollTop\\\"],t=this.getFrozenRowsHeight(),i=this.getBottomFrozenRowsHeight(),t=this.getRowAt(e+t+1)[\\\"row\\\"],e=this.getAllRowsHeight()>this.tableNoFrameHeight?this.getRowAt(e+this.tableNoFrameHeight-1-i).row:this.rowCount-1;return e<0?null:{rowStart:t,rowEnd:e}}getBodyVisibleColRange(){var e=this[\\\"scrollLeft\\\"],t=this.getFrozenColsWidth(),i=this.getRightFrozenColsWidth(),t=this.getColAt(e+t+1)[\\\"col\\\"],e=this.getAllColsWidth()>this.tableNoFrameWidth?this.getColAt(e+this.tableNoFrameWidth-1-i).col:this.colCount-1;return e<0?null:{colStart:t,colEnd:e}}get visibleColCount(){var e=this[\\\"frozenColCount\\\"],t=this.getVisibleRect(),i=0<e?t.left+this.getColsWidth(0,e-1):t.left,r=this.getTargetColAt(i);if(!r)return 0;i=Math.max(r.left>=i?r.col:r.col+1,e);let n=this.getColsWidth(0,i-1),o=0;var a=this[\\\"colCount\\\"];for(let s=i;s<a;s++){var l=n+this.getColWidth(s);if(t.right<l)break;o++,n=l}return o}get scrollTop(){return this.stateManager.scroll.verticalBarPos}set scrollTop(e){this.stateManager.setScrollTop(e)}get scrollLeft(){return this.stateManager.scroll.horizontalBarPos}set scrollLeft(e){this.stateManager.setScrollLeft(e)}getScrollLeft(){return this.scrollLeft}getScrollTop(){return this.scrollTop}setScrollLeft(e){this.scrollLeft=Math.ceil(e)}setScrollTop(e){this.scrollTop=Math.ceil(e)}getCellOverflowText(e,t){return this.scenegraph.getCellOverflowText(e,t)}addReleaseObj(e){if(!e||!e.release||\\\"function\\\"!=typeof e.release)throw new Error(\\\"not releaseObj!\\\");(this.internalProps.releaseList=this.internalProps.releaseList||[]).push(e)}dispose(){this.release()}release(){var e,t=this.internalProps,i=(null!=(i=null==(e=t.tooltipHandler)?void 0:e.release)&&i.call(e),null!=(i=null==(e=t.menuHandler)?void 0:e.release)&&i.call(e),IconCache.clearAll(),null!=(e=super.release)&&e.call(this),null!=(e=null==(i=t.handler)?void 0:i.release)&&e.call(i),null!=(e=null==(i=t.focusControl)?void 0:i.release)&&e.call(i),null!=(i=t.legends)&&i.release(),null!=(e=t.title)&&e.release(),t.layoutMap.release(),t.releaseList&&(t.releaseList.forEach(e=>{var t;return null==(t=null==e?void 0:e.release)?void 0:t.call(e)}),t.releaseList=null),this.scenegraph.stage.release(),this.scenegraph.proxy.release(),t.element)[\\\"parentElement\\\"];i&&i.removeChild(t.element),null!=(i=null==(t=null==(e=this.editorManager)?void 0:e.editingEditor)?void 0:t.onEnd)&&i.call(t),this.isReleased=!0}fireListeners(e,t){return super.fireListeners(e,t)}updateOption(e){var{frozenColCount:t=0,defaultRowHeight:i=40,defaultHeaderRowHeight:r,defaultColWidth:n=80,defaultHeaderColWidth:o=80,keyboardOptions:a,eventOptions:l,rowSeriesNumber:s,columnResizeMode:h,rowResizeMode:d=\\\"none\\\",dragHeaderMode:u,showFrozenIcon:c,allowFrozenColCount:g,padding:p,pixelRatio:f,widthMode:m,heightMode:b,autoFillWidth:v,autoFillHeight:C,widthAdaptiveMode:y,heightAdaptiveMode:_,customRender:w,renderChartAsync:x,renderChartAsyncBatchCount:S,overscrollBehavior:A,limitMinWidth:T,limitMinHeight:R}=this.options=e,f=(f&&f!==this.internalProps.pixelRatio&&(this.internalProps.pixelRatio=f),p&&(\\\"number\\\"==typeof p?(this.padding.top=p,this.padding.left=p,this.padding.bottom=p,this.padding.right=p):(p.top&&(this.padding.top=p.top),p.bottom&&(this.padding.bottom=p.bottom),p.left&&(this.padding.left=p.left),p.right&&(this.padding.right=p.right))),this.showFrozenIcon=\\\"boolean\\\"!=typeof c||c,\\\"number\\\"==typeof g&&g<=0&&(this.showFrozenIcon=!1),this.widthMode=null!=m?m:\\\"standard\\\",this.heightMode=null!=b?b:\\\"standard\\\",this._widthAdaptiveMode=null!=y?y:\\\"only-body\\\",this._heightAdaptiveMode=null!=_?_:\\\"only-body\\\",this.autoFillWidth=null!=v&&v,this.autoFillHeight=null!=C&&C,this.customRender=w,this.internalProps);\\\"node\\\"!==Env.mode&&updateRootElementPadding(f.element,this.padding),this.columnWidthComputeMode=null!=(p=e.columnWidthComputeMode)?p:\\\"normal\\\",f.frozenColCount=t,f.defaultRowHeight=i,f.defaultHeaderRowHeight=null!=r?r:i,f.defaultColWidth=n,f.defaultHeaderColWidth=null!=o?o:n,f.keyboardOptions=a,f.eventOptions=l,f.rowSeriesNumber=s,f.columnResizeMode=h,f.rowResizeMode=d,f.dragHeaderMode=u,f.renderChartAsync=x,setBatchRenderChartCount(S),f.overscrollBehavior=null!=A?A:\\\"auto\\\",f.cellTextOverflows={},f._rowHeightsMap=new NumberRangeMap(this),f._rowRangeHeightsMap=new Map,f._colRangeWidthsMap=new Map,f._widthResizedColMap=new Set,f._heightResizedRowMap=new Set,this.colWidthsMap=new NumberMap,this.colContentWidthsMap=new NumberMap,this.colWidthsLimit={},f.stick.changedCells.clear(),f.theme=themes_default.of(null!=(c=e.theme)?c:themes_default.DEFAULT),f.theme.isPivot=this.isPivotTable(),this.scenegraph.updateStageBackground(),f.autoWrapText=e.autoWrapText,f.enableLineBreak=e.enableLineBreak,f.allowFrozenColCount=null!=(g=e.allowFrozenColCount)?g:0,f.limitMaxAutoWidth=null!=(m=e.limitMaxAutoWidth)?m:450,f.limitMinWidth=null!=T?\\\"number\\\"==typeof T?T:T?10:0:10,f.limitMinHeight=null!=R?\\\"number\\\"==typeof R?R:R?10:0:10,this._vDataSet=new DataSet,null!=(b=f.legends)&&b.release(),null!=(y=f.title)&&y.release(),f.layoutMap.release(),this.scenegraph.clearCells(),this.scenegraph.updateComponent(),this.stateManager.updateOptionSetState(),this._updateSize(),this.eventManager.updateEventBinder(),e.legends&&(f.legends=createLegend(e.legends,this),this.scenegraph.tableGroup.setAttributes({x:this.tableX,y:this.tableY})),f.tooltip=Object.assign({renderMode:\\\"html\\\",isShowOverflowTextTooltip:!1,confine:!0},e.tooltip),\\\"html\\\"!==f.tooltip.renderMode||f.tooltipHandler||(f.tooltipHandler=new TooltipHandler(this,f.tooltip.confine)),f.menu=Object.assign({renderMode:\\\"html\\\"},e.menu),Array.isArray(null==(_=e.menu)?void 0:_.dropDownMenuHighlight)&&this.setDropDownMenuHighlight(null==(v=e.menu)?void 0:v.dropDownMenuHighlight),Array.isArray(null==(C=e.menu)?void 0:C.defaultHeaderMenuItems)&&(this.globalDropDownMenu=e.menu.defaultHeaderMenuItems),\\\"html\\\"!==f.menu.renderMode||f.menuHandler||(f.menuHandler=new MenuHandler2(this)),this.clearCellStyleCache(),this.clearColWidthCache(),this.clearRowHeightCache(),f.customMergeCell=e.customMergeCell,this.customCellStylePlugin.updateCustomCell(null!=(w=e.customCellStyle)?w:[],null!=(p=e.customCellStyleArrangement)?p:[])}renderWithRecreateCells(){var e={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.refreshHeader(),this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(e.col,e.row),this.render()}getFrozenRowsHeight(){return this.getRowsHeight(0,this.frozenRowCount-1)}getFrozenColsWidth(){return this.getColsWidth(0,this.frozenColCount-1)}getBottomFrozenRowsHeight(){if(0<this.bottomFrozenRowCount){let e=0;for(let t=this.rowCount-this.bottomFrozenRowCount;t<=this.rowCount-1;t++)e+=this.getRowHeight(t);return e}return 0}getRightFrozenColsWidth(){if(0<this.rightFrozenColCount){let e=0;for(let t=this.colCount-this.rightFrozenColCount;t<=this.colCount-1;t++)e+=this.getColWidth(t);return e}return 0}getDrawRange(){var e=Math.min(this.tableNoFrameWidth,this.getAllColsWidth()),t=Math.min(this.tableNoFrameHeight,this.getAllRowsHeight());return new Rect2(this.tableX,this.tableY,e,t)}_getMouseAbstractPoint(e,t=!0){if(!e)return{inTable:!1,x:void 0,y:void 0};var i=(r=isTouchEvent3(e)?e.changedTouches[0]:e).clientX||r.pageX+window.scrollX,r=r.clientY||r.pageY+window.scrollY,n=this.internalProps.canvas.getBoundingClientRect();let o=!0;n.right<=i&&(o=!1),n.bottom<=r&&(o=!1);var a=n.width,a=a/(this.canvas.offsetWidth||a),l=n.height,l=l/(this.canvas.offsetHeight||l);return{x:(i-n.left)/a+(t?this.scrollLeft:0),y:(r-n.top)/l+(t?this.scrollTop:0),inTable:o}}getTheme(){return this.internalProps.theme}getTargetColAt(i){if(0===i)return{left:0,col:0,right:0,width:0};var r=this.computeTargetColByX(i),n=this.getColsWidth(0,r);if(n<=i){var o=r;let e=n-this.getColWidth(o);var a=this.internalProps[\\\"colCount\\\"];for(let t=o;t<a;t++){var l=this.getColWidth(t),s=e+l;if(Math.round(e)<=Math.round(i)&&Math.round(i)<Math.round(s))return{left:e,col:t,right:s,width:l};e=s}return null}{let e=n;for(let t=r;0<=t;t--){var h=this.getColWidth(t),d=e-h;if(Math.round(d)<=Math.round(i)&&Math.round(i)<Math.round(e))return{left:d,col:t,right:e,width:h};e=d}return null}}getTargetRowAt(i){if(0===i)return{top:0,row:0,bottom:0,height:0};var r=this.computeTargetRowByY(i),n=this.getRowsHeight(0,r);if(n<=i){var o=r;let e=n-this.getRowHeight(o);var a=this.internalProps[\\\"rowCount\\\"];for(let t=o;t<a;t++){var l=this.getRowHeight(t),s=e+l;if(Math.round(e)<=Math.round(i)&&Math.round(i)<Math.round(s))return{top:e,row:t,bottom:s,height:l};e=s}return null}{let e=n;for(let t=r;0<=t;t--){var h=this.getRowHeight(t),d=e-h;if(Math.round(d)<=Math.round(i)&&Math.round(i)<Math.round(e))return{top:d,row:t,bottom:e,height:h};e=d}return null}}getTargetColAtConsiderRightFrozen(t,i){if(0===t)return{left:0,col:0,right:0,width:0};if(i&&t>this.tableNoFrameWidth-this.getRightFrozenColsWidth()&&t<this.tableNoFrameWidth)for(let e=0;e<this.rightFrozenColCount;e++)if(t>this.tableNoFrameWidth-this.getColsWidth(this.colCount-e-1,this.colCount-1))return{col:this.colCount-e-1,left:void 0,right:void 0,width:void 0};return this.getTargetColAt(t)}getTargetRowAtConsiderBottomFrozen(t,i){if(0===t)return{top:0,row:0,bottom:0,height:0};if(i&&t>this.tableNoFrameHeight-this.getBottomFrozenRowsHeight()&&t<this.tableNoFrameHeight)for(let e=0;e<this.rightFrozenColCount;e++)if(t>this.tableNoFrameHeight-this.getRowsHeight(this.rowCount-e-1,this.rowCount-1))return{row:this.rowCount-e-1,top:void 0,bottom:void 0,height:void 0};return this.getTargetRowAt(t)}computeTargetRowByY(e){let t=this.internalProps.defaultRowHeight;return this._rowRangeHeightsMap.get(\\\"$0$\\\"+(this.rowCount-1))&&(t=this._rowRangeHeightsMap.get(\\\"$0$\\\"+(this.rowCount-1))/this.rowCount),Math.min(Math.ceil(e/t),this.rowCount-1)}computeTargetColByX(i){if(this._colRangeWidthsMap.get(\\\"$0$\\\"+(this.colCount-1))){let e=0,t=this.colCount-1;for(;1<t-e;){var r=Math.floor((e+t)/2);if(i<this._colRangeWidthsMap.get(\\\"$0$\\\"+r))t=r;else{if(!(i>this._colRangeWidthsMap.get(\\\"$0$\\\"+r)))return r;e=r}}return t}return Math.min(Math.ceil(i/this.internalProps.defaultColWidth),this.colCount-1)}clearSelected(){this.stateManager.updateSelectPos(-1,-1)}selectCell(e,t){this.stateManager.updateSelectPos(e,t),this.stateManager.endSelectCells()}selectCells(e){var{scrollLeft:t,scrollTop:i}=this;e.forEach((e,t)=>{e.start.col===e.end.col&&e.start.row===e.end.row?this.stateManager.updateSelectPos(e.start.col,e.start.row,!1,1<=t):(this.stateManager.updateSelectPos(e.start.col,e.start.row,!1,1<=t),this.stateManager.updateInteractionState(InteractionState.grabing),this.stateManager.updateSelectPos(e.end.col,e.end.row,!1,1<=t)),this.stateManager.endSelectCells(!1),this.stateManager.updateInteractionState(InteractionState[\\\"default\\\"])}),this.setScrollTop(i),this.setScrollLeft(t)}get recordsCount(){var e;return null==(e=this.records)?void 0:e.length}get allowFrozenColCount(){return this.internalProps.allowFrozenColCount}get rowHeaderLevelCount(){return this.internalProps.layoutMap.rowHeaderLevelCount}get columnHeaderLevelCount(){return this.internalProps.layoutMap.columnHeaderLevelCount}get records(){return this.internalProps.records}get dataSource(){return this.internalProps.dataSource}set dataSource(e){this.scenegraph.clearCells(),_setDataSource(this,e),this.refreshRowColCount(),this.scenegraph.createSceneGraph(),this.render()}get autoWrapText(){return this.internalProps.autoWrapText}set autoWrapText(e){this.internalProps.autoWrapText=e,this.options.autoWrapText=e}get enableLineBreak(){return this.internalProps.enableLineBreak}set enableLineBreak(e){this.internalProps.enableLineBreak=e,this.options.enableLineBreak=e}updateAutoWrapText(e){this.internalProps.autoWrapText!==e&&(this.internalProps.autoWrapText=e,this.options.autoWrapText=e,this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.render())}get theme(){return this.internalProps.theme}set theme(e){this.internalProps.theme=themes_default.of(null!=e?e:themes_default.DEFAULT),this.internalProps.theme.isPivot=this.isPivotTable(),this.options.theme=e}updateTheme(e){var t={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.internalProps.theme=themes_default.of(null!=e?e:themes_default.DEFAULT),this.internalProps.theme.isPivot=this.isPivotTable(),this.options.theme=e,this.scenegraph.updateComponent(),this.scenegraph.updateStageBackground(),this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(t.col,t.row),this.render()}getBodyField(e,t){return this.internalProps.layoutMap.getBody(e,t).field}getBodyColumnDefine(e,t){var i=this.internalProps.layoutMap.getBody(e,t);return null==i?void 0:i.define}getBodyColumnType(e,t){return getProp2(\\\"cellType\\\",{cellType:this.internalProps.layoutMap.getBody(e,t).cellType},e,t,this)}getCellType(e,t){return this.isSeriesNumberInHeader(e,t)?this.internalProps.layoutMap.getSeriesNumberHeader(e,t).cellType:getProp2(\\\"cellType\\\",{cellType:this.isHeader(e,t)?this.internalProps.layoutMap.getHeader(e,t).headerType:this.internalProps.layoutMap.getBody(e,t).cellType},e,t,this)}getHeaderField(e,t){return this.internalProps.layoutMap.getHeaderField(e,t)}getHeaderDefine(e,t){var i=this.internalProps.layoutMap.getHeader(e,t);return null==i?void 0:i.define}getCellLocation(e,t){return this.internalProps.layoutMap.getCellLocation(e,t)}getCellHeaderPaths(e,t){return this.internalProps.layoutMap.getCellHeaderPaths(e,t)}getHeadersDefine(e,t){for(var i=[];;){var r=this.getHeaderDefine(e,t);if(!r||!r.field&&!r.columns)break;i.push(r),t++}return i}_getHeaderLayoutMap(e,t){return this.internalProps.layoutMap.getHeader(e,t)}_getBodyLayoutMap(e,t){return this.internalProps.layoutMap.getBody(e,t)}getContext(){return this.internalProps.context}getRecordByCell(e,t){var i;return this.internalProps.layoutMap.isHeader(e,t)||null==(i=this.internalProps.dataSource)?void 0:i.get(this.getRecordShowIndexByCell(e,t))}getRecordByRowCol(e,t){return this.getRecordByCell(e,t)}getRecordStartRowByRecordIndex(e){return this.internalProps.layoutMap.getRecordStartRowByRecordIndex(e)}_getHeaderCellBySortState(t){var e=this.internalProps[\\\"layoutMap\\\"],i=e.headerObjects.find(e=>e&&e.field===t.field);if(i)return e.getHeaderCellAdressById(i.id)}getCellRange(e,t){if(this.internalProps.customMergeCell){var i=this.internalProps.customMergeCell(e,t,this);if(i&&i.range&&i.text)return i.range}return null==(i=this.internalProps.layoutMap)?void 0:i.getCellRange(e,t)}hasCustomMerge(){return!!this.internalProps.customMergeCell}getCustomMerge(e,t){if(this.internalProps.customMergeCell){var i,r=this.internalProps.customMergeCell(e,t,this);if(r&&r.range&&(r.text||r.customLayout||this.customRender))return r.style&&(i=this.internalProps.bodyHelper.getStyleClass(\\\"text\\\"),i=of(r.style,this.theme.bodyStyle,{col:e,row:t,table:this,value:r.text,dataValue:this.getCellOriginValue(e,t),cellHeaderPaths:this.getCellHeaderPaths(e,t)},i,this.options.autoWrapText,this.theme),r.style=i),r}}isCellRangeEqual(e,t,i,r){return this.internalProps.layoutMap.isCellRangeEqual(e,t,i,r)}_getLayoutCellId(e,t){return this.internalProps.layoutMap.getCellId(e,t)}getHeaderDescription(e,t){var i=this._getHeaderLayoutMap(e,t),r=null==i?void 0:i.define,r=null!=(r=null==r?void 0:r.description)?r:null==i?void 0:i.description;return\\\"function\\\"==typeof r?r({col:e,row:t,value:this.getCellValue(e,t),dataValue:this.getCellOriginValue(e,t)}):r}setDropDownMenuHighlight(e){this.stateManager.setDropDownMenuHighlight(e)}_dropDownMenuIsHighlight(e,t,i){return this.stateManager.dropDownMenuIsHighlight(e,t,i)}isSeriesNumberInBody(e,t){return this.internalProps.layoutMap&&this.internalProps.layoutMap.isSeriesNumberInBody(e,t)}isSeriesNumberInHeader(e,t){return this.internalProps.layoutMap&&this.internalProps.layoutMap.isSeriesNumberInHeader(e,t)}isHeader(e,t){return this.internalProps.layoutMap&&this.internalProps.layoutMap.isHeader(e,t)}isColumnHeader(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isColumnHeader(e,t)}isRowHeader(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isRowHeader(e,t)}isCornerHeader(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isCornerHeader(e,t)}isFrozenColumn(e,t){return this.isLeftFrozenColumn(e,t)||this.isRightFrozenColumn(e,t)}isLeftFrozenColumn(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isFrozenColumn(e,t)}isRightFrozenColumn(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isRightFrozenColumn(e,t)}isFrozenRow(e,t){return this.isTopFrozenRow(e,t)||this.isBottomFrozenRow(e,t)}isTopFrozenRow(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isFrozenRow(e,t)}isBottomFrozenRow(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isBottomFrozenRow(e,t)}getCellInfo(e,t){var i;if(0<=e&&0<=t)return i=this.isHeader(e,t)?this.getHeaderDefine(e,t):this.getBodyColumnDefine(e,t),{col:e,row:t,field:this.getHeaderField(e,t),cellHeaderPaths:this.internalProps.layoutMap.getCellHeaderPaths(e,t),title:null==i?void 0:i.title,cellType:this.getCellType(e,t),originData:this.getCellOriginRecord(e,t),cellRange:this.getCellRangeRelativeRect({col:e,row:t}),value:this.getCellValue(e,t),dataValue:this.getCellOriginValue(e,t),cellLocation:this.getCellLocation(e,t),scaleRatio:this.canvas.getBoundingClientRect().width/this.canvas.offsetWidth}}_hasField(e,t,i){var r,n;return null!=e&&!this.internalProps.layoutMap.isHeader(t,i)&&(n=this.getRecordShowIndexByCell(t,i),null==(r=this.internalProps.dataSource)?void 0:r.hasField(n,e))}_getCellStyle(r,n){var e=this.customCellStylePlugin.getCustomCellStyle(r,n),o=this.internalProps[\\\"layoutMap\\\"];if(o.isHeader(r,n)){let t;t=!this.isPivotTable()||this.isBottomFrozenRow(n)||this.isRightFrozenColumn(r)?r+\\\"-\\\"+n:null!=(a=this.getHeaderDefine(r,n))&&a.dimensionKey?\\\"dim-\\\"+a.dimensionKey:null!=a&&a.indicatorKey?\\\"ind-\\\"+a.indicatorKey:r+\\\"-\\\"+n;let i=this.headerStyleCache.get(t);if(!i){var a=o.getHeader(r,n);let e;if(this.isPivotChart()&&isTopOrBottomAxis(r,n,o)&&o.isAxisCell(r,n)?e=null!=(l=null==(l=o.getBody(r,this.rowHeaderLevelCount).style)?void 0:l.padding)?l:this.theme.bodyStyle.padding:this.isPivotChart()&&isLeftOrRightAxis(r,n,o)&&o.isAxisCell(r,n)&&(e=null!=(l=null==(l=o.getBody(this.columnHeaderLevelCount,n).style)?void 0:l.padding)?l:this.theme.bodyStyle.padding),(!a||a.isEmpty)&&(o.isLeftBottomCorner(r,n)||o.isRightBottomCorner(r,n)||o.isCornerHeader(r,n)||o.isRightTopCorner(r,n)))return EMPTY_STYLE;var l=this.internalProps.headerHelper.getStyleClass((null==a?void 0:a.headerType)||\\\"text\\\");i=o.isBottomFrozenRow(r,n)&&this.theme.bottomFrozenStyle?of2(e?{padding:e}:{},this.theme.bottomFrozenStyle,{col:r,row:n,table:this,value:this.getCellValue(r,n),dataValue:this.getCellOriginValue(r,n),cellHeaderPaths:this.getCellHeaderPaths(r,n)},l,this.options.autoWrapText,this.theme):o.isRightFrozenColumn(r,n)&&this.theme.rightFrozenStyle?of2(e?{padding:e}:{},this.theme.rightFrozenStyle,{col:r,row:n,table:this,value:this.getCellValue(r,n),dataValue:this.getCellOriginValue(r,n),cellHeaderPaths:this.getCellHeaderPaths(r,n)},l,this.options.autoWrapText,this.theme):(a=(null==a?void 0:a.style)||{},e&&(a.padding=e),of2(a,o.isColumnHeader(r,n)||o.isBottomFrozenRow(r,n)?this.theme.headerStyle:o.isRowHeader(r,n)||o.isRightFrozenColumn(r,n)?this.theme.rowHeaderStyle:this.theme.cornerHeaderStyle,{col:r,row:n,table:this,value:this.getCellValue(r,n),dataValue:this.getCellOriginValue(r,n),cellHeaderPaths:this.getCellHeaderPaths(r,n)},l,this.options.autoWrapText,this.theme)),this.headerStyleCache.set(t,i)}return e?mergeStyle(i,e):i}let i,t;null!=(l=null==(a=this.internalProps)?void 0:a.dataConfig)&&l.mappingRules&&!this.isHeader(r,n)&&null!=(a=null==(l=null==(a=this.internalProps)?void 0:a.dataConfig)?void 0:l.mappingRules)&&a.forEach((e,t)=>{e.bgColor&&this.internalProps.layoutMap.getIndicatorKey(r,n)===e.bgColor.indicatorKey&&(i=e.bgColor.mapping)});var l=this.getCellType(r,n);let s;return t=this.isSeriesNumberInBody(r,n)?r+\\\"-series-\\\"+l:this.isListTable()&&!this.transpose||this.isPivotTable()&&this.internalProps.layoutMap.indicatorsAsCol?r+l:n+l,(s=(o.isBottomFrozenRow(n)?this.bodyBottomStyleCache:this.bodyStyleCache).get(t))||(a=o.getBody(r,n),l=this.internalProps.bodyHelper.getStyleClass(this.getCellType(r,n)),a=null==a?void 0:a.style,s=of(a,o.isBottomFrozenRow(n)&&this.theme.bottomFrozenStyle?this.theme.bottomFrozenStyle:o.isRightFrozenColumn(r)&&this.theme.rightFrozenStyle?this.theme.rightFrozenStyle:this.theme.bodyStyle,{col:r,row:n,table:this,value:this.getCellValue(r,n),dataValue:this.getCellOriginValue(r,n),cellHeaderPaths:this.getCellHeaderPaths(r,n)},l,this.options.autoWrapText,this.theme),i&&(s=mergeStyle(s,{bgColor:i})),isFunction_default(a)||(o.isBottomFrozenRow(n)?this.bodyBottomStyleCache:this.bodyStyleCache).set(t,s)),e?mergeStyle(s,e):s}clearCellStyleCache(){this.headerStyleCache.clear(),this.bodyStyleCache.clear(),this.bodyBottomStyleCache.clear()}clearRowHeightCache(){this.internalProps._rowHeightsMap.clear(),this._clearRowRangeHeightsMap()}clearColWidthCache(){this.internalProps._colWidthsMap.clear(),this._clearColRangeWidthsMap()}_canResizeColumn(e,t){if(!(0<=e&&0<=t))return!1;if(this.isCellRangeEqual(e,t,e+1,t))return!1;if(\\\"none\\\"===this.internalProps.columnResizeMode)return!1;if(\\\"header\\\"===this.internalProps.columnResizeMode){if(!this.isHeader(e,t))return!1}else if(\\\"body\\\"===this.internalProps.columnResizeMode&&this.isHeader(e,t))return!1;var i=this.colWidthsLimit[e];return!(i&&i.min&&i.max)||i.max!==i.min}_canResizeRow(e,t){if(!(0<=e&&0<=t))return!1;if(this.isCellRangeEqual(e,t,e,t+1))return!1;if(\\\"none\\\"===this.internalProps.rowResizeMode)return!1;if(\\\"header\\\"===this.internalProps.rowResizeMode){if(!this.isHeader(e,t))return!1}else if(\\\"body\\\"===this.internalProps.rowResizeMode&&this.isHeader(e,t))return!1;return!0}_canDragHeaderPosition(e,t){if(this.isHeader(e,t)&&this.stateManager.isSelected(e,t)&&(\\\"disabled\\\"!==this.internalProps.frozenColDragHeaderMode||!this.isFrozenColumn(e))){var i=this.stateManager.select.ranges[0];if(this.isColumnHeader(e,t)){if(i.end.row!==this.rowCount-1)return!1}else{if(!this.isRowHeader(e,t))return!1;if(i.end.col!==this.colCount-1)return!1}i=this.getHeaderDefine(e,t);if(i){if(void 0!==i.dragHeader)return i.dragHeader;if(\\\"all\\\"===this.internalProps.dragHeaderMode)return!0;if(\\\"column\\\"===this.internalProps.dragHeaderMode){if(this.isColumnHeader(e,t))return!0}else if(\\\"row\\\"===this.internalProps.dragHeaderMode&&this.isRowHeader(e,t))return!0}}return!1}getCellIcons(e,t){var i,r,n;let o;return this.isHeader(e,t)?o=this.internalProps.headerHelper.getIcons(e,t):this.internalProps.layoutMap.isSeriesNumber(e,t)?(null!=(n=null==(n=this.internalProps.layoutMap.getSeriesNumberBody(e,t))?void 0:n.define)&&n.dragOrder&&(o=this.internalProps.rowSeriesNumberHelper.getIcons(e,t)),n=this.getCellValue(e,t),i=this.getCellOriginValue(e,t),r=this.internalProps.context,n=this.internalProps.bodyHelper.getIcons(e,t,n,i,r),0<(null==o?void 0:o.length)?o=o.concat():0<(null==n?void 0:n.length)&&(o=n)):(i=this.getCellValue(e,t),r=this.getCellOriginValue(e,t),n=this.internalProps.context,o=this.internalProps.bodyHelper.getIcons(e,t,i,r,n)),o}showDropDownMenu(e,t,i){let r=\\\"dropdown-menu\\\";i&&(r=Array.isArray(i.content)?\\\"dropdown-menu\\\":\\\"container\\\"),\\\"html\\\"===this.internalProps.menu.renderMode&&(this.stateManager.menu.isShow=!0,this.internalProps.menuHandler._bindToCell(e,t,r,i))}showTooltip(e,t,i){\\\"html\\\"===this.internalProps.tooltip.renderMode&&this.internalProps.tooltipHandler._bindToCell(e,t,i)}getCellStyle(e,t){var i=this._getCellStyle(e,t),r=getStyleTheme(i,this,e,t,getProp2).theme,{autoWrapText:n,lineClamp:o,textOverflow:a}=i;return{textAlign:r.text.textAlign,textBaseline:r.text.textBaseline,bgColor:isBoolean_default(r.group.fill)?getProp2(\\\"bgColor\\\",i,e,t,this):r.group.fill,color:isBoolean_default(r.text.fill)?getProp2(\\\"color\\\",i,e,t,this):r.text.fill,fontFamily:r.text.fontFamily,fontSize:r.text.fontSize,fontWeight:r.text.fontWeight,fontVariant:r.text.fontVariant,fontStyle:r.text.fontStyle,lineHeight:r.text.lineHeight,autoWrapText:null!=n&&n,lineClamp:null!=o?o:\\\"auto\\\",textOverflow:a,borderColor:isBoolean_default(r.group.stroke)?getProp2(\\\"borderColor\\\",i,e,t,this):r.group.stroke,borderLineWidth:r.group.lineWidth,borderLineDash:r.group.lineDash,underline:!!r.text.underline,underlineDash:r.text.underlineDash,underlineOffset:r.text.underlineOffset,lineThrough:!!r.text.lineThrough,padding:r._vtable.padding,underlineWidth:r.text.underline,lineThroughLineWidth:r.text.lineThrough,_strokeArrayWidth:r.group.strokeArrayWidth,_strokeArrayColor:r.group.strokeArrayColor,_linkColor:getProp2(\\\"linkColor\\\",i,e,t,this)}}getAllBodyCells(t,e){const r=this.rowHeaderLevelCount,n=this.columnHeaderLevelCount,o=this.colCount-1,i=this.rowCount-1;return Array(Math.min(null!=e?e:2e3,i-n+1,this.rowCount)).fill(0).map((e,i)=>Array(Math.min(null!=t?t:2e3,o-r+1,this.colCount)).fill(0).map((e,t)=>this.getCellInfo(t+r,i+n)))}getAllCells(t,e){const r=this.colCount-1,i=this.rowCount-1;return Array(Math.min(null!=e?e:2e3,1+i,this.rowCount)).fill(0).map((e,i)=>Array(Math.min(null!=t?t:2e3,1+r,this.colCount)).fill(0).map((e,t)=>this.getCellInfo(t+0,i+0)))}getAllColumnHeaderCells(){const r=this.rowHeaderLevelCount,t=this.colCount-1,e=this.columnHeaderLevelCount-1;return Array(1+e).fill(0).map((e,i)=>Array(t-r+1).fill(0).map((e,t)=>this.getCellInfo(t+r,i+0)))}getAllRowHeaderCells(){const r=this.columnHeaderLevelCount,t=this.rowHeaderLevelCount-1,e=this.rowCount-1;return Array(e-r+1).fill(0).map((e,i)=>Array(1+t).fill(0).map((e,t)=>this.getCellInfo(t+0,i+r)))}scrollToCell(e){var t,i,r=this.getDrawRange();isValid_default(e.col)&&e.col>=this.frozenColCount&&(i=this.getFrozenColsWidth(),t=this.getColsWidth(0,e.col-1),this.scrollLeft=Math.min(t-i,this.getAllColsWidth()-r.width)),isValid_default(e.row)&&e.row>=this.frozenRowCount&&(t=this.getFrozenRowsHeight(),i=this.getRowsHeight(0,e.row-1),this.scrollTop=Math.min(i-t,this.getAllRowsHeight()-r.height)),this.render()}getCopyValue(){var e;if(0<(null==(e=null==(e=this.stateManager.select)?void 0:e.ranges)?void 0:e.length)){const d=this.stateManager.select.ranges;let t=Math.min(d[0].start.col,d[0].end.col),i=Math.max(d[0].start.col,d[0].end.col),r=Math.min(d[0].start.row,d[0].end.row),n=Math.max(d[0].start.row,d[0].end.row);d.forEach(e=>{t=Math.min(t,e.start.col,e.end.col),i=Math.max(i,e.start.col,e.end.col),r=Math.min(r,e.start.row,e.end.row),n=Math.max(n,e.start.row,e.end.row)});var l,s,h=(e,t,i)=>{var r,n,o=this.getCellRange(e,t);let a=o.start.col,l=o.start.row;return i&&(r=Math.min(i.start.col,i.end.col),n=Math.min(i.start.row,i.end.row),a=Math.max(r,o.start.col),l=Math.max(n,o.start.row)),a!==e||l!==t?\\\"\\\":this.getCellValue(e,t)};let o=\\\"\\\";for(let a=r;a<=n;a++)if((r=>{let n=!1;return d.forEach(e=>{var t=Math.min(e.start.row,e.end.row),i=Math.max(e.start.row,e.end.row);t<=r&&r<=i&&(n=!0)}),n})(a)){for(let e=t;e<=i;e++)(r=>{let n=!1;return d.forEach(e=>{var t=Math.min(e.start.col,e.end.col),i=Math.max(e.start.col,e.end.col);t<=r&&r<=i&&(n=!0)}),n})(e)&&(!(l=((o,a)=>{let l;return d.forEach(e=>{var t=Math.min(e.start.row,e.end.row),i=Math.max(e.start.row,e.end.row),r=Math.min(e.start.col,e.end.col),n=Math.max(e.start.col,e.end.col);r<=o&&o<=n&&t<=a&&a<=i&&(l=e)}),l})(e,a))||(s=h(e,a,l),\\\"undefined\\\"!=typeof Promise&&s instanceof Promise||(s=isValid_default(s)?\\\"\\\"+s:\\\"\\\",/^\\\\[object .*\\\\]$/.exec(s))||(o+=s),e<l.end.col)||e<i)&&(o+=\\\"\\\\t\\\");a<n&&(o+=\\\"\\\\r\\\\n\\\")}return o}return\\\"\\\"}getSelectedCellInfos(){var e;if(null==(e=this.stateManager.select)||!e.ranges)return null;const t=this.stateManager.select.ranges;if(!t.length)return[];let i=Math.min(t[0].start.col,t[0].end.col),r=Math.max(t[0].start.col,t[0].end.col),n=Math.min(t[0].start.row,t[0].end.row),o=Math.max(t[0].start.row,t[0].end.row);t.forEach(e=>{i=Math.min(i,e.start.col,e.end.col),r=Math.max(r,e.start.col,e.end.col),n=Math.min(n,e.start.row,e.end.row),o=Math.max(o,e.start.row,e.end.row)});var a=[];for(let h=n;h<=o;h++)if((r=>{let n=!1;return t.forEach(e=>{var t=Math.min(e.start.row,e.end.row),i=Math.max(e.start.row,e.end.row);t<=r&&r<=i&&(n=!0)}),n})(h)){var l,s=[];for(let e=i;e<=r;e++)(r=>{let n=!1;return t.forEach(e=>{var t=Math.min(e.start.col,e.end.col),i=Math.max(e.start.col,e.end.col);t<=r&&r<=i&&(n=!0)}),n})(e)&&((o,a)=>{let l;return t.forEach(e=>{var t=Math.min(e.start.row,e.end.row),i=Math.max(e.start.row,e.end.row),r=Math.min(e.start.col,e.end.col),n=Math.max(e.start.col,e.end.col);r<=o&&o<=n&&t<=a&&a<=i&&(l=e)}),l})(e,h)&&(l=this.getCellInfo(e,h),s.push(l));a.push(s)}return a}getSelectedCellRanges(){var e=this.stateManager.select.ranges;return e.length?cloneDeep(e):[]}measureText(e,t){return textMeasure.measureText(e,t)}measureTextBounds(e){return measureTextBounds(e)}getCustomRender(e,t){let i;var r;return i=\\\"body\\\"!==this.getCellLocation(e,t)?null==(r=this.getHeaderDefine(e,t))?void 0:r.headerCustomRender:(null==(r=this.getBodyColumnDefine(e,t))?void 0:r.customRender)||this.customRender}getCustomLayout(e,t){let i;var r;return i=\\\"body\\\"!==this.getCellLocation(e,t)?null==(r=this.getHeaderDefine(e,t))?void 0:r.headerCustomLayout:null==(r=this.getBodyColumnDefine(e,t))?void 0:r.customLayout}hasAutoImageColumn(){var e=this.internalProps.layoutMap.columnObjects.find(e=>!(\\\"image\\\"!==e.cellType&&\\\"video\\\"!==e.cellType&&\\\"function\\\"!=typeof e.cellType||!e.define.imageAutoSizing)),t=this.internalProps.layoutMap.headerObjects.find(e=>!(!e||\\\"image\\\"!==e.headerType&&\\\"video\\\"!==e.headerType&&\\\"function\\\"!=typeof e.headerType||!e.define.imageAutoSizing));return e||t}_getActiveChartInstance(){var e,t=this.scenegraph.getCell(null==(t=null==(t=this.stateManager.hover)?void 0:t.cellPos)?void 0:t.col,null==(t=null==(t=this.stateManager.hover)?void 0:t.cellPos)?void 0:t.row);return\\\"chart\\\"===(null==(e=null==(e=null==t?void 0:t.getChildren())?void 0:e[0])?void 0:e.type)?t.getChildren()[0].activeChartInstance:null}cellIsInVisualView(e,t){var i=this.getDrawRange(),r=this.getCellRelativeRect(e,t);if(e<this.frozenColCount&&t<this.frozenRowCount)return!0;var n=this.getCellRangeRelativeRect({start:{col:0,row:0},end:{col:this.colCount-1,row:this.columnHeaderLevelCount}}),o=this.getCellRangeRelativeRect({start:{col:0,row:0},end:{col:this.rowHeaderLevelCount,row:this.rowCount-1}});if(r.top>=i.top&&r.bottom<=i.bottom&&r.left>=i.left&&r.right<=i.right){if(this.isHeader(e,t))return!0;if(i.top>=n.bottom&&i.left>=o.right)return!0}return!1}getCustomMergeValue(e,t){if(this.internalProps.customMergeCell){var i=this.getCustomMerge(e,t);if(i)return i=i[\\\"text\\\"],i}}exportImg(){return this.scenegraph.stage.toCanvas().toDataURL()}exportCellImg(e,t){var i=this.cellIsInVisualView(e,t),{scrollTop:r,scrollLeft:n}=this,o=(i||this.scrollToCell({col:e,row:t}),this.getCellRelativeRect(e,t)),{col:a,row:l}=(0<(null==(a=null==(a=this.stateManager.select)?void 0:a.ranges)?void 0:a.length)&&hideCellSelectBorder(this.scenegraph),this.stateManager.hover.cellPos),o=(this.stateManager.updateHoverPos(-1,-1),this.scenegraph.component.hideVerticalScrollBar(),this.scenegraph.component.hideHorizontalScrollBar(),this.scenegraph.renderSceneGraph(),this.scenegraph.stage.toCanvas(!1,(new AABBBounds).set(o.left+this.tableX+1,o.top+this.tableY+1,o.right+this.tableX,o.bottom+this.tableY)));return i||(this.setScrollTop(r),this.setScrollLeft(n)),0<(null==(r=null==(i=this.stateManager.select)?void 0:i.ranges)?void 0:r.length)&&restoreCellSelectBorder(this.scenegraph),this.stateManager.updateHoverPos(a,l),o.toDataURL()}exportCellRangeImg(e){var{scrollTop:t,scrollLeft:i}=this,r=Math.min(e.start.col,e.end.col),n=Math.min(e.start.row,e.end.row),o=Math.max(e.start.col,e.end.col),a=Math.max(e.start.row,e.end.row),l=this.cellIsInVisualView(r,n),s=this.cellIsInVisualView(o,a),r=(l&&s||this.scrollToCell({col:r,row:n}),this.getCellRangeRelativeRect({start:{col:r,row:n},end:{col:o,row:a}})),{col:a,row:n}=(0<(null==(o=null==(n=this.stateManager.select)?void 0:n.ranges)?void 0:o.length)&&hideCellSelectBorder(this.scenegraph),this.stateManager.hover.cellPos),o=(this.stateManager.updateHoverPos(-1,-1),this.scenegraph.component.hideVerticalScrollBar(),this.scenegraph.component.hideHorizontalScrollBar(),this.scenegraph.renderSceneGraph(),this.scenegraph.stage.toCanvas(!1,(new AABBBounds).set(r.left+this.tableX+1,r.top+this.tableY+1,r.right+this.tableX,r.bottom+this.tableY)).toDataURL());return l&&s||(this.setScrollTop(t),this.setScrollLeft(i)),0<(null==(l=null==(r=this.stateManager.select)?void 0:r.ranges)?void 0:l.length)&&restoreCellSelectBorder(this.scenegraph),this.stateManager.updateHoverPos(a,n),o}exportCanvas(){return this.scenegraph.stage.toCanvas()}getImageBuffer(e=\\\"image/png\\\"){var t,i,r;if(\\\"node\\\"===this.options.mode)return this.render(),(t=this.scenegraph.stage)?(i=this.tableX+this.getAllColsWidth(),r=this.tableY+this.getAllRowsHeight(),i>=this.canvasWidth&&r>=this.canvasHeight?(t.render(),t.window.getImageBuffer(e)):this.scenegraph.stage.toCanvas(!1,(new AABBBounds).set(0,0,Math.min(this.canvasWidth,i),Math.min(this.canvasHeight,r))).toBuffer(e)):null}getBodyIndexByTableIndex(e,t){return{col:e-this.rowHeaderLevelCount,row:t-this.columnHeaderLevelCount}}getTableIndexByBodyIndex(e,t){return{col:e+this.rowHeaderLevelCount,row:t+this.columnHeaderLevelCount}}onVChartEvent(e,t,i){this._chartEventMap[e]||(this._chartEventMap[e]=[]),\\\"function\\\"==typeof t?this._chartEventMap[e].push({callback:t}):this._chartEventMap[e].push({callback:i,query:t})}offVChartEvent(e,t){this._chartEventMap[e]&&(this._chartEventMap[e]=t?this._chartEventMap[e].filter(e=>e.callback!==t):[])}_bindChartEvent(t){if(t)for(const i in this._chartEventMap)(this._chartEventMap[i]||[]).forEach(e=>{e.query?t.on(i,e.query,e.callback):t.on(i,e.callback)})}changeRecordOrder(e,t){}registerCustomCellStyle(e,t){this.customCellStylePlugin.registerCustomCellStyle(e,t)}arrangeCustomCellStyle(e,t){this.customCellStylePlugin.arrangeCustomCellStyle(e,t)}isSeriesNumber(e,t){return this.internalProps.layoutMap.isSeriesNumber(e,t)}isHasSeriesNumber(){var e;return 0<(null==(e=this.internalProps.layoutMap)?void 0:e.leftRowSeriesNumberColumnCount)}get leftRowSeriesNumberCount(){var e;return null!=(e=null==(e=this.internalProps.layoutMap)?void 0:e.leftRowSeriesNumberColumnCount)?e:0}setMinMaxLimitWidth(e=!1){var t=this.internalProps;for(let o=0;o<t.layoutMap.columnWidths.length;o++){var{width:i,minWidth:r,maxWidth:n}=null!=(i=null==(i=t.layoutMap.columnWidths)?void 0:i[o])?i:{};e&&i&&(\\\"string\\\"==typeof i&&\\\"auto\\\"!==i||\\\"number\\\"==typeof i&&0<i)&&this._setColWidth(o,i),r&&(\\\"number\\\"==typeof r&&0<r||\\\"string\\\"==typeof r)&&this.setMinColWidth(o,r),n&&(\\\"number\\\"==typeof n&&0<n||\\\"string\\\"==typeof n)&&this.setMaxColWidth(o,n)}}},editors=(init_esbuild_inject(),init_esbuild_inject(),{});function get5(e){if(editors[e])return editors[e]}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var NO_AXISID_FRO_VTABLE=\\\"NO_AXISID_FRO_VTABLE\\\";function getRawChartSpec(e,t,i){var r,n=i.getCellHeaderPaths(e,t);let o;if(i.indicatorsAsCol){const a=null==(r=n.colHeaderPaths.find(e=>e.indicatorKey))?void 0:r.indicatorKey;o=i.columnObjects.find(e=>e.indicatorKey===a)}else{const l=null==(r=n.rowHeaderPaths.find(e=>e.indicatorKey))?void 0:r.indicatorKey;o=i.columnObjects.find(e=>e.indicatorKey===l)}n=null==o?void 0:o.chartSpec;return\\\"function\\\"==typeof n?n({col:e,row:t,dataValue:i._table.getCellOriginValue(e,t)||\\\"\\\",value:i._table.getCellValue(e,t)||\\\"\\\",rect:i._table.getCellRangeRelativeRect(i._table.getCellRange(e,t)),table:i._table}):n}function isShareChartSpec(e,t,i){var r,n=i.getCellHeaderPaths(e,t);let o;if(i.indicatorsAsCol){const a=null==(r=n.colHeaderPaths.find(e=>e.indicatorKey))?void 0:r.indicatorKey;o=i.columnObjects.find(e=>e.indicatorKey===a)}else{const l=null==(r=n.rowHeaderPaths.find(e=>e.indicatorKey))?void 0:r.indicatorKey;o=i.columnObjects.find(e=>e.indicatorKey===l)}return\\\"function\\\"!=typeof(null==o?void 0:o.chartSpec)}function checkHasCartesianChart(e){let t=!1;for(let r=0;r<e.indicatorsDefine.length;r++){var i=e.indicatorsDefine[r];if(i.chartSpec&&\\\"pie\\\"!==i.chartSpec.type&&\\\"funnel\\\"!==i.chartSpec.type&&\\\"rose\\\"!==i.chartSpec.type){t=!0;break}}return t}function isCartesianChart(e,t,i){let r=!0;var n=i.getRawChartSpec(e,t);return r=n&&\\\"pie\\\"!==n.type&&\\\"funnel\\\"!==n.type&&\\\"rose\\\"!==n.type?r:!1}function isHasCartesianChartInline(t,i,r,n){let o=!1;if(n.indicatorsAsCol&&\\\"row\\\"===r||!n.indicatorsAsCol&&\\\"col\\\"===r)for(let e=0;e<n.indicatorsDefine.length;e++){var a=n.indicatorsDefine[e];if(a.chartSpec&&\\\"pie\\\"!==a.chartSpec.type&&\\\"funnel\\\"!==a.chartSpec.type&&\\\"rose\\\"!==a.chartSpec.type){o=!0;break}}else{var l=n.getRawChartSpec(t,i);l?\\\"pie\\\"!==l.type&&\\\"funnel\\\"!==l.type&&\\\"rose\\\"!==l.type&&(o=!0):o=!1}return o}function getChartSpec(e,t,i){let r=i.getRawChartSpec(e,t);return r?(i._table.isPivotChart()&&((r=cloneDeepSpec(r)).sortDataByAxis=!0,isArray_default(r.series)&&r.series.forEach(e=>{e.sortDataByAxis=!0}),r.axes=i.getChartAxes(e,t),r.padding=0,r.dataZoom=[]),r):null}function getChartAxes(o,a,l){const s=[];if(l.indicatorsAsCol){const h=l.getIndicatorKeyInChartSpec(o,a),d=l.getColKeysPath(o,a);h.forEach((e,t)=>{var{range:i,isZeroAlign:r,axisOption:n}=getRange2(o,a,t,0===t?\\\"bottom\\\":\\\"top\\\",h,d,l);r&&(r=getRange2(o,a,h.length-1-t,0===t?\\\"top\\\":\\\"bottom\\\",h,d,l))&&(r=r[\\\"range\\\"],r=getNewRangeToAlign(i,r))&&(i.min=r.range1[0],i.max=r.range1[1]),isNumber_default(null==n?void 0:n.min)&&(i.min=n.min),isNumber_default(null==n?void 0:n.max)&&(i.max=n.max),s.push(merge({range:i},n,{type:(null==n?void 0:n.type)||\\\"linear\\\",orient:0===t?\\\"bottom\\\":\\\"top\\\",label:{visible:!1},title:{visible:!1},domainLine:{visible:!1},seriesIndex:t,sync:{axisId:NO_AXISID_FRO_VTABLE}}))});let e=l.getDimensionKeyInChartSpec(l.rowHeaderLevelCount,a);isArray_default(e)&&(e=e[0]);var t=l.dataset.cacheCollectedValues[e]||l.dataset.collectedValues[e]||[],i=l.getRowKeysPath(o,a),i=t[null!=i?i:\\\"\\\"],t=getAxisOption(o,a,\\\"left\\\",l)[\\\"axisOption\\\"];s.push(merge({domain:Array.from(null!=i?i:[])},t,{type:\\\"band\\\",orient:\\\"left\\\",label:{visible:!1},domainLine:{visible:!1},tick:{visible:!1},subTick:{visible:!1},title:{visible:!1}}))}else{const u=l.getIndicatorKeyInChartSpec(o,a),c=l.getRowKeysPath(o,a);u.forEach((e,t)=>{var{range:i,isZeroAlign:r,axisOption:n}=getRange2(o,a,t,0===t?\\\"left\\\":\\\"right\\\",u,c,l);r&&(r=getRange2(o,a,u.length-1-t,0===t?\\\"right\\\":\\\"left\\\",u,c,l))&&(r=r[\\\"range\\\"],r=getNewRangeToAlign(i,r))&&(i.min=r.range1[0],i.max=r.range1[1]),isNumber_default(null==n?void 0:n.min)&&(i.min=n.min),isNumber_default(null==n?void 0:n.max)&&(i.max=n.max),s.push(merge({range:i},n,{type:(null==n?void 0:n.type)||\\\"linear\\\",orient:0===t?\\\"left\\\":\\\"right\\\",label:{visible:!1},title:{visible:!1},domainLine:{visible:!1},seriesIndex:t,sync:{axisId:NO_AXISID_FRO_VTABLE}}))});let e=l.getDimensionKeyInChartSpec(o,l.columnHeaderLevelCount);isArray_default(e)&&(e=e[0]);i=l.dataset.cacheCollectedValues[e]||l.dataset.collectedValues[e]||[],t=l.getColKeysPath(o,a),i=null!=(t=null==i?void 0:i[null!=t?t:\\\"\\\"])?t:[],t=getAxisOption(o,a,\\\"bottom\\\",l)[\\\"axisOption\\\"];s.push(merge({domain:Array.from(i)},t,{type:\\\"band\\\",orient:\\\"bottom\\\",visible:!0,label:{visible:!1},domainLine:{visible:!1},tick:{visible:!1},subTick:{visible:!1},title:{visible:!1}}))}return s}function getChartDataId(e,t,i){var r;const n=i.getRawChartSpec(e,t);if(null!=n&&n.series){const o={};return null!=(r=n.data)&&r.id&&(o[n.data.id]=void 0),null!=n&&n.series.forEach(e=>{var t,i;null!=(i=e.data)&&i.fromDataId||(null!=(i=e.data)&&i.transforms?o[null!=(i=null!=(i=null==(i=e.data)?void 0:i.id)?i:null==(i=n.data)?void 0:i.id)?i:\\\"data\\\"]=void 0:(i=\\\"horizontal\\\"===e.direction?e.xField:e.yField,o[null!=(t=null!=(t=null==(t=e.data)?void 0:t.id)?t:null==(t=n.data)?void 0:t.id)?t:\\\"data\\\"]=null!=(t=e.data)&&t.id?i:void 0))}),o}return n.data.id}function getRange2(e,t,i,r,n,o,a){var{axisOption:l,isPercent:s,isZeroAlign:h,seriesIndice:d}=getAxisOption(e,t,r,a),d=getAxisRange(a.dataset.collectedValues,n,h,o,null!=d?d:i);return s&&(d.min=d.min<0?-1:0,d.max=0<d.max?1:0),(null!=l&&l.zero||d.min===d.max)&&(d.min=Math.min(d.min,0),d.max=Math.max(d.max,0)),null!=l&&l.nice&&(s=getAxisDomainRangeAndLabels(d.min,d.max,l,h,a._table.getColWidth(e))[\\\"range\\\"],d.min=s[0],d.max=s[1]),isNumber_default(null==l?void 0:l.min)&&(d.min=l.min),isNumber_default(null==l?void 0:l.max)&&(d.max=l.max),{range:d,isZeroAlign:h,axisOption:l}}function checkHasChart(e){let t=!1;for(let i=0;i<e.columnObjects.length;i++)if(e.columnObjects[i].chartSpec){t=!0;break}return t}function checkHasAggregation(e){var t=e.columnObjects;for(let r=0;r<t.length;r++){var i=t[r];if(null!=i&&i.aggregation)return!0}return!1}function checkHasAggregationOnTop(e){var t=e.columnObjects;let i=0;for(let n=0;n<t.length;n++){var r=t[n];null!=r&&r.aggregation&&(Array.isArray(null==r?void 0:r.aggregation)?i=Math.max(i,r.aggregation.filter(e=>!0===e.showOnTop).length):!0===r.aggregation.showOnTop&&(i=Math.max(i,1)))}return i}function checkHasAggregationOnBottom(e){var t=e.columnObjects;let i=0;for(let n=0;n<t.length;n++){var r=t[n];null!=r&&r.aggregation&&(Array.isArray(null==r?void 0:r.aggregation)?i=Math.max(i,r.aggregation.filter(e=>!1===e.showOnTop).length):!1===r.aggregation.showOnTop&&(i=Math.max(i,1)))}return i}function checkHasTreeDefine(e){var t=e.columnObjects;for(let r=0;r<t.length;r++){var i=t[r];if(null!=(i=null==i?void 0:i.define)&&i.tree)return!0}return!1}init_esbuild_inject(),init_esbuild_inject();var DimensionTree=class{constructor(e,t,i=\\\"grid\\\",r=void 0){this.sizeIncludeParent=!1,this.tree={id:0,dimensionKey:\\\"\\\",value:\\\"\\\",children:[],level:-1,levelSpan:1,startIndex:0,size:0,startInTotal:0,hierarchyState:void 0},this.totalLevel=0,this.dimensionKeys=new NumberMap,this.cache=new Map,this.sizeIncludeParent=null!=r,this.rowExpandLevel=r,this.hierarchyType=i,this.sharedVar=t,this.reset(e)}reset(e,t=0){this.cache.clear(),this.dimensionKeys=new NumberMap,this.tree.children=e,this.setTreeNode(this.tree,0,this.tree),this.totalLevel=this.dimensionKeys.count()}setTreeNode(i,e,t){i.startIndex=e,i.startInTotal=(null!=(n=t.startInTotal)?n:0)+i.startIndex,(null!=(n=i.dimensionKey)?n:i.indicatorKey)&&(this.dimensionKeys.contain(i.indicatorKey?IndicatorDimensionKeyPlaceholder:i.dimensionKey)||this.dimensionKeys.put(i.level,i.indicatorKey?IndicatorDimensionKeyPlaceholder:i.dimensionKey),i.id||(i.id=++this.sharedVar.seqId));let r=i.dimensionKey&&this.sizeIncludeParent?1:0;var n=i.children||i.columns;return\\\"grid\\\"===this.hierarchyType?1<=(null==n?void 0:n.length)?n.forEach(e=>{var t;e.level=(null!=(t=i.level)?t:0)+1,r+=this.setTreeNode(e,r,i)}):r=1:i.hierarchyState===HierarchyState.expand&&1<=(null==n?void 0:n.length)?n.forEach(e=>{var t;e.level=(null!=(t=i.level)?t:0)+1,r+=this.setTreeNode(e,r,i)}):i.hierarchyState===HierarchyState.collapse&&1<=(null==n?void 0:n.length)?n.forEach(e=>{var t;e.level=(null!=(t=i.level)?t:0)+1,this.setTreeNode(e,r,i)}):!i.hierarchyState&&i.level+1<this.rowExpandLevel&&(1<=(null==n?void 0:n.length)||!0===n)?(i.hierarchyState=HierarchyState.expand,1<=(null==n?void 0:n.length)&&n.forEach(e=>{var t;e.level=(null!=(t=i.level)?t:0)+1,r+=this.setTreeNode(e,r,i)})):1<=(null==n?void 0:n.length)||!0===n?(i.hierarchyState=HierarchyState.collapse,1<=(null==n?void 0:n.length)&&n.forEach(e=>{var t;e.level=(null!=(t=i.level)?t:0)+1,this.setTreeNode(e,r,i)})):(i.hierarchyState=HierarchyState.none,r=1),i.size=r}getTreePath(e,t=30){var i=[];return this.searchPath(e,this.tree,i,t),i.shift(),i}getTreePathByCellIds(e){var t=[];let i=this.tree.children;for(let n=0;n<e.length;n++){var r=e[n],r=this.findNodeById(i,r);if(!r)break;t.push(r),i=r.children}return t}findNodeById(e,t){return e.find(e=>e.id===t)}searchPath(i,r,n,o){if(r&&!(i<r.startIndex||i>=r.startIndex+r.size)&&(n.push(r),r.children)&&0!==r.children.length&&!(r.level>=o)){var a=i-r.startIndex;if(this.cache.has(r.level+1)){var l=this.cache.get(r.level+1);if(a>=l.startIndex&&a<l.startIndex+l.size)return void this.searchPath(a,l,n,o)}let e=0,t=r.children.length-1;for(;e<=t;){const s=Math.floor((e+t)/2),h=r.children[s];if(a>=h.startIndex&&a<h.startIndex+h.size){this.cache.set(h.level,h);const d=[];this.cache.forEach((e,t)=>{t>h.level&&d.push(t)}),d.forEach(e=>{this.cache[\\\"delete\\\"](e)}),this.searchPath(a,h,n,o);break}a<h.startIndex?t=s-1:e=s+1}}}movePosition(r,n,o){let a,l,s;const h=(t,e)=>{if(void 0===l||void 0===s){t.level===r&&(t.startInTotal===n&&(l=e),t.startInTotal<=o)&&o<=t.startInTotal+t.size-1&&(s=e);var i=t.children||t.columns;if(i&&t.level<r){a=t;for(let e=0;e<i.length;e++)(n>=i[e].startInTotal&&n<=i[e].startInTotal+i[e].size||o>=i[e].startInTotal&&o<=i[e].startInTotal+i[e].size)&&h(i[e],e)}}};h(this.tree,0);var e=a.children||a.columns,t=e.splice(l,1);t.unshift(s,0),Array.prototype.splice.apply(e,t)}getCopiedTree(){var e=cloneDeep(this.tree.children);return clearNode(e),e}};function generateLayoutTree(i,e){null!=e&&e.forEach(e=>{var t={dimensionKey:e.dimensionKey,indicatorKey:e.indicatorKey,value:e.value,hierarchyState:e.hierarchyState,children:void 0};i.push(t),e.children&&(t.children=[],generateLayoutTree(t.children,e.children))})}function countLayoutTree(e,t){let i=0;return null!=e&&e.forEach(e=>{!t&&e.children&&0!==e.children.length||i++,e.children&&(i+=countLayoutTree(e.children,t))}),i}function dealHeader(t,i,e,r,n,o){var a,l;const s=t.id,h=null!=(l=null==(l=o.rowsDefine)?void 0:l.find(e=>\\\"string\\\"!=typeof e&&e.dimensionKey===t.dimensionKey))?l:null==(l=o.columnsDefine)?void 0:l.find(e=>\\\"string\\\"!=typeof e&&e.dimensionKey===t.dimensionKey),d=null==(l=o.indicatorsDefine)?void 0:l.find(e=>\\\"string\\\"!=typeof e&&(t.indicatorKey?e.indicatorKey===t.indicatorKey:e.title===t.value)),u={id:s,title:null!=(l=t.value)?l:null==d?void 0:d.title,field:t.dimensionKey,style:\\\"function\\\"==typeof(null==(l=null!=d?d:h)?void 0:l.headerStyle)?null==(l=null!=d?d:h)?void 0:l.headerStyle:Object.assign({},null==(l=null!=d?d:h)?void 0:l.headerStyle),headerType:null!=(l=null!=(l=null==d?void 0:d.headerType)?l:null==h?void 0:h.headerType)?l:\\\"text\\\",headerIcon:null!=(l=null==d?void 0:d.headerIcon)?l:null==h?void 0:h.headerIcon,define:Object.assign({},t,null!=d?d:h),fieldFormat:null!=(l=null==d?void 0:d.headerFormat)?l:null==h?void 0:h.headerFormat,dropDownMenu:null!=(l=null==d?void 0:d.dropDownMenu)?l:null==h?void 0:h.dropDownMenu,pivotInfo:{value:t.value,dimensionKey:t.dimensionKey,isPivotCorner:!1},width:null==h?void 0:h.width,minWidth:null==h?void 0:h.minWidth,maxWidth:null==h?void 0:h.maxWidth,showSort:null!=(l=null==d?void 0:d.showSort)?l:null==h?void 0:h.showSort,description:null==h?void 0:h.description};d?(d.customRender&&(t.customRender=d.customRender),isValid_default(null==(l=o._indicators)?void 0:l.find(e=>e.indicatorKey===d.indicatorKey))||null==(l=o._indicators)||l.push({id:++o.sharedVar.seqId,indicatorKey:d.indicatorKey,field:d.indicatorKey,fieldFormat:null==d?void 0:d.format,cellType:null!=(a=null!=(a=null==d?void 0:d.cellType)?a:null==d?void 0:d.columnType)?a:\\\"text\\\",chartModule:\\\"chartModule\\\"in d?d.chartModule:null,chartSpec:\\\"chartSpec\\\"in d?d.chartSpec:null,sparklineSpec:\\\"sparklineSpec\\\"in d?d.sparklineSpec:null,style:null==d?void 0:d.style,icon:null==d?void 0:d.icon,define:Object.assign({},t,d,{dragHeader:null==h?void 0:h.dragHeader}),width:null==d?void 0:d.width,minWidth:null==d?void 0:d.minWidth,maxWidth:null==d?void 0:d.maxWidth,disableColumnResize:null==d?void 0:d.disableColumnResize})):t.indicatorKey&&!isValid_default(null==(a=o._indicators)?void 0:a.find(e=>e.indicatorKey===t.indicatorKey))&&null!=(l=o._indicators)&&l.push({id:++o.sharedVar.seqId,indicatorKey:t.indicatorKey,field:t.indicatorKey,cellType:\\\"text\\\",define:Object.assign({},t)}),e[s]=u,o._headerObjects[s]=u,i[n][o.colIndex]=s;for(let c=n-1;0<=c;c--)i[c][o.colIndex]=r[c];if(1<t.levelSpan)for(let e=1;e<t.levelSpan;e++)i[n+e]||(i[n+e]=[]),i[n+e][o.colIndex]=s;if(1<=(null==(a=t.children)?void 0:a.length))o._addHeaders(i,n+(null!=(l=t.levelSpan)?l:1),null!=(a=t.children)?a:[],[...r,...Array(null!=(l=t.levelSpan)?l:1).fill(s)],e);else{for(let e=n+1;e<i.length;e++)i[e][o.colIndex]=s;o.colIndex++}}function dealHeaderForTreeMode(t,i,e,r,n,o,a,l,s){var h=t.id,d=l.find(e=>\\\"string\\\"!=typeof e&&e.dimensionKey===t.dimensionKey),u={id:h,title:t.value,field:t.dimensionKey,style:t.level+1===o||\\\"function\\\"==typeof(null==d?void 0:d.headerStyle)?null==d?void 0:d.headerStyle:Object.assign({},null==d?void 0:d.headerStyle,{textAlign:\\\"left\\\"}),headerType:null!=(u=null==d?void 0:d.headerType)?u:\\\"text\\\",headerIcon:null==d?void 0:d.headerIcon,define:Object.assign(t,{linkJump:null==d?void 0:d.linkJump,linkDetect:null==d?void 0:d.linkDetect,templateLink:null==d?void 0:d.templateLink,keepAspectRatio:null!=(u=null==d?void 0:d.keepAspectRatio)&&u,imageAutoSizing:null==d?void 0:d.imageAutoSizing,headerCustomRender:null==d?void 0:d.headerCustomRender,headerCustomLayout:null==d?void 0:d.headerCustomLayout,dragHeader:null==d?void 0:d.dragHeader,disableHeaderHover:!(null==d||!d.disableHeaderHover),disableHeaderSelect:!(null==d||!d.disableHeaderSelect)}),fieldFormat:null==d?void 0:d.headerFormat,dropDownMenu:null==d?void 0:d.dropDownMenu,pivotInfo:{value:t.value,dimensionKey:t.dimensionKey,isPivotCorner:!1},hierarchyLevel:t.level,dimensionTotalLevel:o,hierarchyState:t.hierarchyState,width:null==d?void 0:d.width,minWidth:null==d?void 0:d.minWidth,maxWidth:null==d?void 0:d.maxWidth,parentCellId:r[r.length-1]};e[h]=u,s._headerObjects[h]=u,i[n][s.colIndex]=h;for(let c=n-1;0<=c;c--)i[c][s.colIndex]=r[c];if(t.hierarchyState===HierarchyState.expand&&1<=(null==(d=t.children)?void 0:d.length))a&&s.colIndex++,s._addHeadersForTreeMode(i,n,null!=(u=t.children)?u:[],[...r,h],o,a&&t.hierarchyState===HierarchyState.expand,l,e);else{a&&s.colIndex++;for(let e=n+1;e<i.length;e++)i[e][s.colIndex]=h}}function clearNode(e){for(let i=0;i<e.length;i++){var t=e[i],t=(delete t.level,delete t.startIndex,delete t.id,delete t.levelSpan,delete t.size,delete t.startInTotal,t.children||t.columns);t&&clearNode(t)}}var SimpleHeaderLayoutMap=class{constructor(e,t,i,r){this.seqId=0,this.leftRowSeriesNumberColumnCount=0,this.rightRowSeriesNumberColumnCount=0,this.bodyRowSpanCount=1,this._transpose=!1,this._showHeader=!0,this._recordsCount=0,this._hasAggregation=!1,this._hasAggregationOnTopCount=0,this._hasAggregationOnBottomCount=0,this._cellRangeMap=new Map,this._showHeader=i,this._table=e,this._columns=[],this._headerCellIds=[],this.hierarchyIndent=null!=r?r:20,this.hierarchyTextStartAlignment=e.options.hierarchyTextStartAlignment,this.columnTree=new DimensionTree(t,{seqId:0}),this._headerObjects=this._addHeaders(0,t,[]),this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{}),this.rowHierarchyType=checkHasTreeDefine(this)?\\\"tree\\\":\\\"grid\\\",this._hasAggregation=checkHasAggregation(this),this._hasAggregationOnBottomCount=checkHasAggregationOnBottom(this),this._hasAggregationOnTopCount=checkHasAggregationOnTop(this),this.handleRowSeriesNumber(e.internalProps.rowSeriesNumber)}handleRowSeriesNumber(e){var t;e&&(Array.isArray(e)?this.rowSeriesNumberColumn=e.map(e=>{var t;return{id:this.seqId++,title:e.title,define:e,cellType:null!=(t=e.cellType)?t:\\\"text\\\",style:e.style,width:e.width,format:e.format,field:e.field,icon:e.icon,headerIcon:e.headerIcon,isChildNode:!1}}):this.rowSeriesNumberColumn=[{id:this.seqId++,title:e.title,define:e,cellType:null!=(t=e.cellType)?t:\\\"text\\\",style:e.style,width:e.width,format:e.format,field:\\\"\\\",icon:e.icon,headerIcon:e.headerIcon,isChildNode:!1}],this.leftRowSeriesNumberColumn=this.rowSeriesNumberColumn.filter(e=>!0),this.rightRowSeriesNumberColumn=this.rowSeriesNumberColumn.filter(e=>!1),this.leftRowSeriesNumberColumnCount=this.leftRowSeriesNumberColumn.length,this.rightRowSeriesNumberColumnCount=this.rightRowSeriesNumberColumn.length)}get transpose(){return this._transpose}set transpose(e){this._transpose=e}get showHeader(){return this._showHeader}set showHeader(e){this._showHeader=e}isSeriesNumberInHeader(e,t){if(0<this.leftRowSeriesNumberColumnCount&&0<=e&&0<=t&&e<this.leftRowSeriesNumberColumnCount){if(this.transpose)return!1;if(t<this.headerLevelCount)return!0}if(0<this.rightRowSeriesNumberColumnCount&&0<=t&&e>=this.colCount-this.rightRowSeriesNumberColumnCount){if(this.transpose)return!1;if(t<this.headerLevelCount)return!0}return!1}isSeriesNumberInBody(e,t){if(0<this.leftRowSeriesNumberColumnCount&&0<=e&&e<this.leftRowSeriesNumberColumnCount){if(this.transpose)return!0;if(t>=this.headerLevelCount)return!0}if(0<this.rightRowSeriesNumberColumnCount&&e>=this.colCount-this.rightRowSeriesNumberColumnCount){if(this.transpose)return!0;if(t>=this.headerLevelCount)return!0}return!1}isSeriesNumber(e,t){return 0<this.leftRowSeriesNumberColumnCount&&0<=e&&0<=t&&e<this.leftRowSeriesNumberColumnCount||0<this.rightRowSeriesNumberColumnCount&&0<=t&&e>=this.colCount-this.rightRowSeriesNumberColumnCount}getSeriesNumberHeader(e,t){if(0<this.leftRowSeriesNumberColumnCount&&0<=e&&e<this.leftRowSeriesNumberColumnCount){if(this.transpose)return;if(t<this.headerLevelCount)return Object.assign({},this.leftRowSeriesNumberColumn[e],{style:this._table.internalProps.rowSeriesNumber.headerStyle})}return 0<this.rightRowSeriesNumberColumnCount&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&t<this.headerLevelCount&&!this.transpose&&t<this.headerLevelCount?this.rightRowSeriesNumberColumn[e-(this.colCount-this.rightRowSeriesNumberColumnCount)]:void 0}getSeriesNumberBody(e,t){if(0<this.leftRowSeriesNumberColumnCount&&0<=e&&e<this.leftRowSeriesNumberColumnCount){if(this.transpose)return this.leftRowSeriesNumberColumn[e];if(t>=this.headerLevelCount)return this.leftRowSeriesNumberColumn[e]}return 0<this.rightRowSeriesNumberColumnCount&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&(this.transpose||t>=this.headerLevelCount)?this.rightRowSeriesNumberColumn[e-(this.colCount-this.rightRowSeriesNumberColumnCount)]:void 0}isHeader(e,t){return!!(this.transpose&&e>=this.leftRowSeriesNumberColumnCount&&e<this.headerLevelCount+this.leftRowSeriesNumberColumnCount)||!this.transpose&&0<=t&&t<this.headerLevelCount}isAggregation(e,t){if(this.hasAggregation){if(this.hasAggregationOnBottomCount)if(this.transpose){if(e>=this.colCount-this.hasAggregationOnBottomCount)return!0}else if(t>=this.rowCount-this.hasAggregationOnBottomCount)return!0;if(this.hasAggregationOnTopCount)if(this.transpose){if(e>=this.rowHeaderLevelCount&&e<this.rowHeaderLevelCount+this.hasAggregationOnTopCount)return!0}else if(t>=this.columnHeaderLevelCount&&t<this.columnHeaderLevelCount+this.hasAggregationOnTopCount)return!0}return!1}isTopAggregation(e,t){if(this.hasAggregationOnTopCount)if(this.transpose){if(e>=this.rowHeaderLevelCount&&e<this.rowHeaderLevelCount+this.hasAggregationOnTopCount)return!0}else if(t>=this.columnHeaderLevelCount&&t<this.columnHeaderLevelCount+this.hasAggregationOnTopCount)return!0;return!1}isBottomAggregation(e,t){if(this.hasAggregationOnBottomCount)if(this.transpose){if(e>=this.colCount-this.hasAggregationOnBottomCount)return!0}else if(t>=this.rowCount-this.hasAggregationOnBottomCount)return!0;return!1}get hasAggregation(){return this._hasAggregation}get hasAggregationOnTopCount(){return this._hasAggregationOnTopCount}get hasAggregationOnBottomCount(){return this._hasAggregationOnBottomCount}getAggregatorsByCell(e,t){return this.getBody(e,t).aggregator}getAggregatorsByCellRange(t,i,r,e){let n=[];if(!this.transpose){for(let e=t;e<=r;e++){var o=this.getBody(e,i);o.aggregator&&(n=n.concat(Array.isArray(o.aggregator)?o.aggregator:[o.aggregator]))}return n}for(let l=i;l<=e;l++){var a=this.getBody(t,l);a.aggregator&&(n=n.concat(Array.isArray(a.aggregator)?a.aggregator:[a.aggregator]))}return[]}getAggregatorOnTop(e,t){const i=this.getBody(e,t),r=i.aggregator,n=i.aggregation;var o;return Array.isArray(n)?(o=n.reduce((e,t,i)=>(t.showOnTop&&e.push(i),e),[]).map(e=>r[e]),this.transpose?o[e-this.rowHeaderLevelCount]:o[t-this.columnHeaderLevelCount]):this.transpose&&e-this.rowHeaderLevelCount==0?null!=n&&n.showOnTop?r:null:!this.transpose&&t-this.columnHeaderLevelCount==0&&null!=n&&n.showOnTop?r:null}getAggregatorOnBottom(e,t){const i=this.getBody(e,t),r=i.aggregator,n=i.aggregation;var o;return Array.isArray(n)?(o=n.reduce((e,t,i)=>(!1===t.showOnTop&&e.push(i),e),[]).map(e=>r[e]),this.transpose?o[e-(this.colCount-this.hasAggregationOnBottomCount)]:o[t-(this.rowCount-this.hasAggregationOnBottomCount)]):this.transpose&&e-(this.colCount-this.hasAggregationOnBottomCount)==0?!1===(null==n?void 0:n.showOnTop)?r:null:!this.transpose&&t-(this.rowCount-this.hasAggregationOnBottomCount)==0&&!1===(null==n?void 0:n.showOnTop)?r:null}getAggregatorCellAddress(e,t,n,o){var a=[],l=this.hasAggregationOnTopCount,s=this.hasAggregationOnBottomCount;if(this.transpose){for(let i=t;i<=o;i++)if(this.getBody(e,i).aggregator){for(let e=0;e<l;e++)a.push({col:this.headerLevelCount+e,row:i});for(let t=0;t<s;t++)a.push({col:this.rowCount-s+t,row:i})}}else for(let r=e;r<=n;r++)if(this.getBody(r,t).aggregator){for(let e=0;e<l;e++)a.push({col:r,row:this.headerLevelCount+e});for(let t=0;t<s;t++)a.push({col:r,row:this.rowCount-s+t})}return a}getCellLocation(e,t){return this.isHeader(e,t)?this.transpose?\\\"rowHeader\\\":\\\"columnHeader\\\":\\\"body\\\"}isRowHeader(e,t){return!!(this.transpose&&e>=this.leftRowSeriesNumberColumnCount&&e<this.headerLevelCount+this.leftRowSeriesNumberColumnCount)}isColumnHeader(e,t){return!this.transpose&&0<=t&&t<=this.headerLevelCount-1&&e>=this.leftRowSeriesNumberColumnCount&&e<this.colCount-this.rightRowSeriesNumberColumnCount}isFrozenColumn(e,t){if(isValid_default(t)){if(0<=e&&e<this.frozenColCount&&t>=this.frozenRowCount&&t<this.rowCount-this.bottomFrozenRowCount)return!0}else if(0<this.frozenColCount&&0<=e&&e<this.frozenColCount)return!0;return!1}isRightFrozenColumn(e,t){if(isValid_default(t)){if(e>=this.colCount-this.rightFrozenColCount&&t>=this.frozenRowCount&&t<this.rowCount-this.bottomFrozenRowCount)return!0}else if(0<this.rightFrozenColCount&&e>=this.colCount-this.rightFrozenColCount)return!0;return!1}isFrozenRow(e,t){if(isValid_default(t)){if(0<=t&&t<this.frozenRowCount&&e>=this.frozenColCount&&e<this.colCount-this.rightFrozenColCount)return!0}else if(t=e,0<this.frozenRowCount&&0<=t&&t<this.frozenRowCount)return!0;return!1}isBottomFrozenRow(e,t){if(isValid_default(t)){if(t>=this.rowCount-this.bottomFrozenRowCount&&e>=this.frozenColCount&&e<this.colCount-this.rightFrozenColCount)return!0}else if(t=e,0<this.bottomFrozenRowCount&&t>=this.rowCount-this.bottomFrozenRowCount)return!0;return!1}isLeftBottomCorner(e,t){return 0<=e&&e<this.rowHeaderLevelCount&&t>=this.rowCount-this.bottomFrozenRowCount}isRightTopCorner(e,t){return e>=this.colCount-this.rightFrozenColCount&&0<=t&&t<this.columnHeaderLevelCount}isRightBottomCorner(e,t){return e>=this.colCount-this.rightFrozenColCount&&t>=this.rowCount-this.bottomFrozenRowCount}isCornerHeader(e,t){return!1}getColumnHeaderRange(){var e;return this.transpose?{start:{col:0,row:0},end:{col:this._headerCellIds.length-1,row:(null!=(e=this.rowCount)?e:0)-1}}:{start:{col:0,row:0},end:{col:(null!=(e=this.colCount)?e:0)-1,row:this._headerCellIds.length-1}}}getRowHeaderRange(){var e;return this.transpose?{start:{col:0,row:0},end:{col:this._headerCellIds.length-1,row:(null!=(e=this.rowCount)?e:0)-1}}:{start:{col:0,row:0},end:{col:(null!=(e=this.colCount)?e:0)-1,row:this._headerCellIds.length-1}}}getCornerHeaderRange(){}getBodyRange(){var e;return this.transpose?{start:{col:this.headerLevelCount,row:0},end:{col:(null!=(e=this.colCount)?e:0)-1,row:(null!=(e=this.rowCount)?e:0)-1}}:{start:{col:0,row:this.headerLevelCount},end:{col:(null!=(e=this.colCount)?e:0)-1,row:(null!=(e=this.rowCount)?e:0)-1}}}get headerLevelCount(){return this.showHeader?this._headerCellIds.length:0}get columnHeaderLevelCount(){return this.transpose?0:this.headerLevelCount}get rowHeaderLevelCount(){return this.transpose?this.headerLevelCount:0}get frozenColCount(){return this._table.internalProps.frozenColCount?this.colCount>this._table.internalProps.frozenColCount?this._table.internalProps.frozenColCount:this.colCount:0}get frozenRowCount(){return this._table.internalProps.frozenRowCount?this.rowCount>=this._table.internalProps.frozenRowCount?this._table.internalProps.frozenRowCount:this.rowCount:0}get bottomFrozenRowCount(){return this._table.internalProps.bottomFrozenRowCount?this.rowCount-this.headerLevelCount>=this._table.internalProps.bottomFrozenRowCount?this._table.internalProps.bottomFrozenRowCount:this.rowCount-this.headerLevelCount:0}get rightFrozenColCount(){return this._table.internalProps.rightFrozenColCount?this.colCount-this.frozenColCount>=this._table.internalProps.rightFrozenColCount?this._table.internalProps.rightFrozenColCount:Math.max(0,this.colCount-this.frozenColCount):0}get colCount(){return this.transpose?this.headerLevelCount+this.recordsCount+this.leftRowSeriesNumberColumnCount+this.rightRowSeriesNumberColumnCount:this._columns.length+this.leftRowSeriesNumberColumnCount+this.rightRowSeriesNumberColumnCount}get rowCount(){return this.transpose?this._columns.length:this.headerLevelCount+this.recordsCount}get bodyRowCount(){return this.transpose?this._columns.length:this.rowCount-this.bottomFrozenRowCount-this.headerLevelCount}get bodyColCount(){return this.transpose?this.colCount-this.rightFrozenColCount-this.rowHeaderLevelCount:this._columns.length}get recordsCount(){return this._recordsCount}set recordsCount(e){this._recordsCount=e}get headerObjects(){return this._headerObjects}get columnObjects(){return this._columns}get columnWidths(){var e;return this.leftRowSeriesNumberColumnCount?((e=this.leftRowSeriesNumberColumn.map(e=>({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}))).push(...this._columns.map(e=>({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}))),e):this._columns.map(e=>({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}))}getColumnWidthDefined(e){var t;if(0<=e){if(e<this.leftRowSeriesNumberColumnCount)return this.leftRowSeriesNumberColumn[e];if(this.transpose){let r,n,o=0;if(e>=this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount){let i;return this.columnObjects.forEach((e,t)=>{\\\"number\\\"==typeof e.width?o=Math.max(e.width,o):\\\"auto\\\"===e.width&&(i=!0),\\\"number\\\"==typeof e.minWidth&&(n=Math.max(e.minWidth,n)),\\\"number\\\"==typeof e.maxWidth&&(r=Math.max(e.maxWidth,r))}),{width:o=0<o?o:i?\\\"auto\\\":void 0,minWidth:n,maxWidth:r}}if(this.isRowHeader(e,0))return\\\"auto\\\"===(t=Array.isArray(this._table.defaultHeaderColWidth)?null!=(t=this._table.defaultHeaderColWidth[e])?t:this._table.defaultColWidth:this._table.defaultHeaderColWidth)?{width:\\\"auto\\\"}:{width:t}}return this._columns[e-this.leftRowSeriesNumberColumnCount]}}getCellId(e,t){var i;return this.transpose?e>=this.headerLevelCount+this.leftRowSeriesNumberColumnCount?null==(i=this._columns[t])?void 0:i.id:this.isSeriesNumber(e,t)?t+\\\"_series_number\\\":null==(i=this._headerCellIds[e-this.leftRowSeriesNumberColumnCount])?void 0:i[t]:this.isSeriesNumber(e,t)?this.rowSeriesNumberColumn[e].id:this.headerLevelCount<=t?null==(i=this._columns[e-this.leftRowSeriesNumberColumnCount])?void 0:i.id:null==(i=this._headerCellIds[t])?void 0:i[e-this.leftRowSeriesNumberColumnCount]}getHeader(e,t){var i;return this.isSeriesNumberInHeader(e,t)?this.getSeriesNumberHeader(e,t):(i=this.getCellId(e,t),this._headerObjectMap[i])}getHeaderField(e,t){var i=this.getCellId(e,t);return(null==(i=this._headerObjectMap[i])?void 0:i.field)||(this.transpose?this._columns[t]&&this._columns[t].field:this._columns[e-this.leftRowSeriesNumberColumnCount]&&this._columns[e-this.leftRowSeriesNumberColumnCount].field)}getHeaderCellAdressById(t){for(let r=0;r<this._headerCellIds.length;r++){var i=this._headerCellIds[r];for(let e=0;e<i.length;e++)if(i[e]===t)return this.transpose?{col:r,row:e}:{col:e+this.leftRowSeriesNumberColumnCount,row:r}}}getHeaderCellAddressByField(t){var e=this.headerObjects.find(e=>e&&e.field===t);return this.getHeaderCellAdressById(e.id)}getBody(e,t){return this.isSeriesNumber(e,t)?this.getSeriesNumberBody(e,t):this.transpose?this._columns[t]:this._columns[e-this.leftRowSeriesNumberColumnCount]}getBodyLayoutRangeById(i){var r,n;if(this.transpose){for(let e=0;e<(null!=(r=this.rowCount)?r:0);e++)if(i===this._columns[e].id)return{start:{col:0,row:e},end:{col:0,row:e}}}else for(let t=0;t<(null!=(n=this.colCount)?n:0);t++)if(i===this._columns[t-this.leftRowSeriesNumberColumnCount].id)return{start:{col:t,row:0},end:{col:t,row:0}};throw new Error(\\\"can not found body layout @id=\\\"+i)}getCellRange(n,o){var e,a;if(-1===n||-1===o)return{start:{col:n,row:o},end:{col:n,row:o}};if(this._cellRangeMap.has(`$${n}$`+o))return this._cellRangeMap.get(`$${n}$`+o);let l={start:{col:n,row:o},end:{col:n,row:o}};if(this.transpose)l=this.getCellRangeTranspose(n,o);else if(this.headerLevelCount<=o){if(this.headerLevelCount<=o&&null!=(e=null==(e=this.columnObjects[n-this.leftRowSeriesNumberColumnCount])?void 0:e.define)&&e.mergeCell){var i=this._table.getCellValue(n,o);for(let e=o-1;e>=this.headerLevelCount;e--){var r=this._table.getCellValue(n,e);if(\\\"boolean\\\"==typeof this.columnObjects[n-this.leftRowSeriesNumberColumnCount].define.mergeCell){if(i!==r)break}else if(!this.columnObjects[n-this.leftRowSeriesNumberColumnCount].define.mergeCell(i,r))break;l.start.row=e}for(let t=o+1;t<this.rowCount;t++){var s=this._table.getCellValue(n,t);if(\\\"boolean\\\"==typeof this.columnObjects[n-this.leftRowSeriesNumberColumnCount].define.mergeCell){if(i!==s)break}else if(!this.columnObjects[n-this.leftRowSeriesNumberColumnCount].define.mergeCell(i,s))break;l.end.row=t}}}else{var h=this.getCellId(n,o);for(let e=n-1;0<=e&&h===this.getCellId(e,o);e--)l.start.col=e;for(let t=n+1;t<(null!=(a=this.colCount)?a:0)&&h===this.getCellId(t,o);t++)l.end.col=t;for(let i=o-1;0<=i&&h===this.getCellId(n,i);i--)l.start.row=i;for(let r=o+1;r<this.headerLevelCount&&h===this.getCellId(n,r);r++)l.end.row=r}return this._cellRangeMap.set(`$${n}$`+o,l),l}getCellRangeTranspose(n,o){var e,a,l={start:{col:n,row:o},end:{col:n,row:o}};if(this.headerLevelCount+this.leftRowSeriesNumberColumnCount<=n||-1===n&&-1===o){if(this.headerLevelCount+this.leftRowSeriesNumberColumnCount<=n&&null!=(e=null==(e=this.columnObjects[o])?void 0:e.define)&&e.mergeCell){var i=this._table.getCellValue(n,o);for(let e=n-1;e>=this.headerLevelCount+this.leftRowSeriesNumberColumnCount;e--){var r=this._table.getCellValue(e,o);if(\\\"boolean\\\"==typeof this.columnObjects[o].define.mergeCell){if(i!==r)break}else if(!this.columnObjects[o].define.mergeCell(i,r))break;l.start.col=e}for(let t=n+1;t<(null!=(s=this.colCount)?s:0);t++){var s=this._table.getCellValue(t,o);if(\\\"boolean\\\"==typeof this.columnObjects[o].define.mergeCell){if(i!==s)break}else if(!this.columnObjects[o].define.mergeCell(i,s))break;l.end.col=t}}}else{var h=this.getCellId(n,o);for(let e=o-1;0<=e&&h===this.getCellId(n,e);e--)l.start.row=e;for(let t=o+1;t<(null!=(a=this.rowCount)?a:0)&&h===this.getCellId(n,t);t++)l.end.row=t;for(let i=n-1;0<=i&&h===this.getCellId(i,o);i--)l.start.col=i;for(let r=n+1;r<this.headerLevelCount+this.leftRowSeriesNumberColumnCount&&h===this.getCellId(r,o);r++)l.end.col=r}return l}isCellRangeEqual(e,t,i,r){var n=this.getCellRange(e,t),o=this.getCellRange(i,r);return n.start.col===o.start.col&&n.end.col===o.end.col&&n.start.row===o.start.row&&n.end.row===o.end.row}getRecordShowIndexByCell(e,t){var i=this.hasAggregationOnTopCount?this.headerLevelCount+1:this.headerLevelCount;return this.transpose?e<i?-1:e-i:t<i?-1:t-i}getRecordStartRowByRecordIndex(e){return(this.hasAggregationOnTopCount?this.headerLevelCount+1:this.headerLevelCount)+e}_addHeaders(a,e,l,s){const h=[],d=this._newRow(a,s);return e.forEach(t=>{var i,r=this._columns.length,n=this.seqId++,o={id:n,title:null!=(o=t.title)?o:t.caption,headerIcon:t.headerIcon,field:t.field,style:t.headerStyle,headerType:null!=(o=t.headerType)?o:\\\"text\\\",dropDownMenu:t.dropDownMenu,define:t,columnWidthComputeMode:t.columnWidthComputeMode};h[n]=o;for(let e=a-1;0<=e;e--)this._headerCellIds[e]&&(this._headerCellIds[e][r]=l[e]);if(s?this._headerCellIds[a-1]&&(d[r]=this._headerCellIds[a-1][r]):d[r]=n,t.columns)this._addHeaders(a+1,t.columns,[...l,n],t.hideColumnsSubHeader||s).forEach(e=>h.push(e));else{o=t;this._columns.push({id:this.seqId++,field:o.field,fieldFormat:o.fieldFormat,width:o.width,minWidth:o.minWidth,maxWidth:o.maxWidth,icon:o.icon,cellType:null!=(i=null!=(i=o.cellType)?i:o.columnType)?i:\\\"text\\\",chartModule:\\\"chartModule\\\"in o?o.chartModule:null,chartSpec:\\\"chartSpec\\\"in o?o.chartSpec:null,sparklineSpec:\\\"sparklineSpec\\\"in o?o.sparklineSpec:DefaultSparklineSpec,style:o.style,define:o,columnWidthComputeMode:o.columnWidthComputeMode,disableColumnResize:null==o?void 0:o.disableColumnResize,aggregation:this._getAggregationForColumn(o,r),isChildNode:1<=a});for(let e=a+1;e<this._headerCellIds.length;e++)this._headerCellIds[e][r]=n}}),h}_getAggregationForColumn(e,t){let i;return e.aggregation?i=e.aggregation:this._table.options.aggregation&&(i=\\\"function\\\"==typeof this._table.options.aggregation?this._table.options.aggregation({col:t,field:e.field}):this._table.options.aggregation),i?Array.isArray(i)?i.map(e=>(isValid_default(e.showOnTop)||(e.showOnTop=!1),e)):Object.assign({showOnTop:!1},i):null}_newRow(t,e=!1){if(this._headerCellIds[t]){var i=this._headerCellIds[t-1];if(i.length>this._headerCellIds[t].length)for(let e=this._headerCellIds[t].length;e<i.length;e++)this._headerCellIds[t][e]=i[e];return this._headerCellIds[t]}if(e)return[];var r=this._headerCellIds[t]=[];if(this._columns.length){var n=this._headerCellIds[t-1];for(let e=0;e<n.length;e++)r[e]=n[e]}return r}getCellHeaderPaths(i,r){if(!this.isSeriesNumber(i,r)){let e=[],t=[];return this.transpose?t=[{field:this._columns[r].field}]:e=[{field:this._columns[i-this.leftRowSeriesNumberColumnCount].field}],{colHeaderPaths:e,rowHeaderPaths:t,cellLocation:this.getCellLocation(i,r)}}}getParentCellId(e,t){if(0!==t)return this.isColumnHeader(e,t)?this.getCellId(e,t-1):this.isRowHeader(e,t)&&!this.isSeriesNumberInBody(e-1,t)?this.getCellId(e-1,t):void 0}canMoveHeaderPosition(e,t){var i;return!(this.isSeriesNumberInHeader(t.col,t.row)||this.isSeriesNumberInHeader(e.col,e.row)||(this.transpose||!this.isSeriesNumberInBody(t.col,t.row)||!this.isSeriesNumberInBody(e.col,e.row))&&(this.transpose&&this.isSeriesNumberInBody(t.col,t.row)&&this.isSeriesNumberInBody(e.col,e.row)&&(this._getColumnDefine(e.col+this.leftRowSeriesNumberColumnCount,e.row).isChildNode&&this._getColumnDefine(t.col+this.leftRowSeriesNumberColumnCount,t.row).isChildNode?(e.col=e.col+this.leftRowSeriesNumberColumnCount+this.rowHeaderLevelCount-1,t.col=t.col+this.leftRowSeriesNumberColumnCount+this.rowHeaderLevelCount-1):(e.col=e.col+this.leftRowSeriesNumberColumnCount,t.col=t.col+this.leftRowSeriesNumberColumnCount)),e.col<0||e.row<0||t.col<0||t.row<0||\\\"disabled\\\"===this._table.internalProps.frozenColDragHeaderMode&&this._table.isFrozenColumn(t.col)||(i=this.getCellRange(e.col,e.row),this.isColumnHeader(e.col,e.row)?this.getParentCellId(e.col,i.start.row)!==this.getParentCellId(t.col,i.start.row):!this.isRowHeader(e.col,e.row)||this.getParentCellId(i.start.col,e.row)!==this.getParentCellId(i.start.col,t.row))))}moveHeaderPosition(i,r){if(this.canMoveHeaderPosition(i,r)){let t=this.getCellRange(i.col,i.row);if(this.isColumnHeader(i.col,i.row)){var n=t.end.col-t.start.col+1,o=this.getCellRange(r.col,t.start.row),a=r.col>=i.col?o.end.col-n+1:o.start.col;if(a===t.start.col)return null;for(let e=0;e<this._headerCellIds.length;e++){var l=this._headerCellIds[e].splice(t.start.col-this.leftRowSeriesNumberColumnCount,n);l.unshift(a-this.leftRowSeriesNumberColumnCount,0),Array.prototype.splice.apply(this._headerCellIds[e],l)}var s=this._columns.splice(t.start.col-this.leftRowSeriesNumberColumnCount,n);return s.unshift(a-this.leftRowSeriesNumberColumnCount,0),Array.prototype.splice.apply(this._columns,s),this.columnTree.movePosition(t.start.row,t.start.col-this.leftRowSeriesNumberColumnCount,a-this.leftRowSeriesNumberColumnCount),this.columnTree.reset(this.columnTree.tree.children,!0),this._cellRangeMap=new Map,{sourceIndex:t.start.col,targetIndex:a,sourceSize:n,targetSize:o.end.col-o.start.col+1,moveType:\\\"column\\\"}}if(this.isRowHeader(i.col,i.row)||this.isSeriesNumberInBody(i.col,i.row)&&this.transpose){var h=(t=this.isSeriesNumberInBody(i.col,i.row)?this.getCellRange(i.col+this.leftRowSeriesNumberColumnCount,i.row):t).end.row-t.start.row+1,s=this.getCellRange(t.start.col,r.row),d=r.row>=i.row?s.end.row-h+1:s.start.row;if(d===t.start.row)return null;for(let e=0;e<this._headerCellIds.length;e++){var u=this._headerCellIds[e].splice(t.start.row,h);u.unshift(d,0),Array.prototype.splice.apply(this._headerCellIds[e],u)}o=this._columns.splice(t.start.row,h);return o.unshift(d,0),Array.prototype.splice.apply(this._columns,o),this.columnTree.movePosition(t.start.col-this.leftRowSeriesNumberColumnCount,t.start.row,d+(r.row>i.row?t.end.row-t.start.row:0)),this.columnTree.reset(this.columnTree.tree.children,!0),this._cellRangeMap=new Map,{sourceIndex:t.start.row,targetIndex:d,sourceSize:h,targetSize:s.end.row-s.start.row+1,moveType:\\\"row\\\"}}if(this.isSeriesNumberInBody(i.col,i.row))return{sourceIndex:i.row,targetIndex:r.row,sourceSize:1,targetSize:1,moveType:\\\"row\\\"}}return null}toggleHierarchyState(e){return{addCellPositions:e.add.map(e=>({col:0,row:this._table.frozenRowCount+e})),removeCellPositions:e.remove.map(e=>({col:0,row:this._table.frozenRowCount+e}))}}setChartInstance(e,t,i){var r=this.transpose?this._columns[t]:this._columns[e-this.leftRowSeriesNumberColumnCount];\\\"function\\\"!=typeof r.chartSpec&&(r.chartInstance=i)}getChartInstance(e,t){return(this.transpose?this._columns[t]:this._columns[e-this.leftRowSeriesNumberColumnCount]).chartInstance}checkHasChart(){return checkHasChart(this)}getAxisConfigInPivotChart(e,t){}isEmpty(e,t){return!1}isAxisCell(e,t){return!1}getChartAxes(e,t){return[]}isShareChartSpec(e,t){var i=this.getBody(e,t);return\\\"function\\\"!=typeof(null==i?void 0:i.chartSpec)}getChartSpec(e,t){return this.getRawChartSpec(e,t)}getRawChartSpec(e,t){var i=this.getBody(e,t),i=null==i?void 0:i.chartSpec;return\\\"function\\\"==typeof i?i({col:e,row:t,dataValue:this._table.getCellOriginValue(e,t)||\\\"\\\",value:this._table.getCellValue(e,t)||\\\"\\\",rect:this._table.getCellRangeRelativeRect(this._table.getCellRange(e,t)),table:this._table}):i}getChartDataId(e,t){return getChartDataId(e,t,this)}release(){var e=this._table._getActiveChartInstance();null!=e&&e.release(),this.columnObjects.forEach(e=>{var t;null!=(t=e.chartInstance)&&t.release()})}clearCellRangeMap(){this._cellRangeMap.clear()}updateColumnTitle(e,t,i){var r=this._table.internalProps.layoutMap.getHeader(e,t);r.title=i,r.define.title=i}getColumnByField(r){var e;return null==(e=this.columnObjects)?void 0:e.reduce((e,t,i)=>(t.field===r&&e.push({col:i,columnDefine:t}),e),[])}_getColumnDefine(e,t){if(0<=e)return e<this.leftRowSeriesNumberColumnCount?this.leftRowSeriesNumberColumn[e]:this.transpose?this._columns[t]:this._columns[e-this.leftRowSeriesNumberColumnCount]}},Title2=(init_esbuild_inject(),class{constructor(e,t){this.isReleased=!1,this.table=t,!1!==(this._titleOption=e).visible&&(this._titleComponent=this._createOrUpdateTitleComponent(this._getTitleAttrs()))}_createOrUpdateTitleComponent(e){var t;return this._titleComponent?isEqual(e,this._cacheAttrs)||this._titleComponent.setAttributes(e):((t=new Title(e)).name=\\\"title\\\",this.table.scenegraph.stage.defaultLayer.appendChild(t),this._titleComponent=t),this._adjustTableSize(this._titleComponent.attribute),this._titleComponent}resize(){var e,t,i;this._titleComponent&&(e=getQuadProps(null!=(e=this._titleOption.padding)?e:10),t=null!=(t=this._titleOption.width)?t:Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width)-e[1]-e[3],i=null!=(i=this._titleOption.height)?i:Math.min(this.table.tableNoFrameHeight,this.table.getDrawRange().height)-e[0]-e[2],this._titleComponent.setAttributes({x:(null!=(e=this._titleOption.x)?e:\\\"right\\\"===this._titleOption.orient)?this.table.tableX+Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width):this.table.tableX,y:(null!=(e=this._titleOption.y)?e:\\\"bottom\\\"===this._titleOption.orient)?this.table.tableY+this.table.tableNoFrameHeight:this.table.tableY,width:\\\"top\\\"===this._titleOption.orient||\\\"bottom\\\"===this._titleOption.orient?t:this._titleOption.width,height:\\\"left\\\"===this._titleOption.orient||\\\"right\\\"===this._titleOption.orient?i:this._titleOption.height,textStyle:Object.assign({width:t},this._titleOption.textStyle),subtextStyle:Object.assign({width:t},this._titleOption.subtextStyle)}),this._adjustTableSize(this._titleComponent.attribute))}_adjustTableSize(e){var t=isFinite(null==(t=this._titleComponent)?void 0:t.AABBBounds.width())?this._titleComponent.AABBBounds.width():0,i=isFinite(null==(i=this._titleComponent)?void 0:i.AABBBounds.height())?this._titleComponent.AABBBounds.height():0;\\\"left\\\"===this._titleOption.orient?(this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(t),this.table.tableX+=Math.ceil(t)):\\\"top\\\"===this._titleOption.orient?(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(i),this.table.tableY+=Math.ceil(i)):\\\"right\\\"===this._titleOption.orient?this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(t):\\\"bottom\\\"===this._titleOption.orient&&(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(i)),this._cacheAttrs=e,\\\"right\\\"!==this._titleOption.orient&&\\\"bottom\\\"!==this._titleOption.orient||this._titleComponent.setAttributes({x:(null!=(t=this._titleOption.x)?t:\\\"right\\\"===this._titleOption.orient)?this.table.tableX+this.table.tableNoFrameWidth:this.table.tableX,y:(null!=(i=this._titleOption.y)?i:\\\"bottom\\\"===this._titleOption.orient)?this.table.tableY+this.table.tableNoFrameHeight:this.table.tableY})}release(){this._titleComponent&&this.table.scenegraph.stage.defaultLayer.removeChild(this._titleComponent),this._titleComponent=null,this.isReleased=!0}_getTitleAttrs(){var e=this._titleOption.text||this._titleOption.subtext?10:0,t=getQuadProps(null!=(t=this._titleOption.padding)?t:e),e=null!=(e=this._titleOption.width)?e:Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width)-t[1]-t[3],i=null!=(i=this._titleOption.height)?i:Math.min(this.table.tableNoFrameHeight,this.table.getDrawRange().height)-t[0]-t[2];return{text:null!=(t=this._titleOption.text)?t:\\\"\\\",subtext:null!=(t=this._titleOption.subtext)?t:\\\"\\\",x:(null!=(t=this._titleOption.x)?t:\\\"right\\\"===this._titleOption.orient)?this.table.tableX+Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width):this.table.tableX,y:(null!=(t=this._titleOption.y)?t:\\\"bottom\\\"===this._titleOption.orient)?this.table.tableY+this.table.tableNoFrameHeight:this.table.tableY,width:\\\"top\\\"===this._titleOption.orient||\\\"bottom\\\"===this._titleOption.orient?e:this._titleOption.width,height:\\\"left\\\"===this._titleOption.orient||\\\"right\\\"===this._titleOption.orient?i:this._titleOption.height,minWidth:this._titleOption.minWidth,maxWidth:this._titleOption.maxWidth,minHeight:this._titleOption.minHeight,maxHeight:this._titleOption.maxHeight,padding:this._titleOption.padding,align:null!=(t=this._titleOption.align)?t:\\\"left\\\",verticalAlign:null!=(i=this._titleOption.verticalAlign)?i:\\\"top\\\",textStyle:Object.assign({width:e},this._titleOption.textStyle),subtextStyle:Object.assign({width:e},this._titleOption.subtextStyle)}}}),EditManeger=(init_esbuild_inject(),class{constructor(e){this.table=e,this.bindEvent()}bindEvent(){var e=this.table.internalProps.handler;this.table.on(TABLE_EVENT_TYPE.DBLCLICK_CELL,e=>{var t,i,r;this.table.options.editCellTrigger&&\\\"doubleclick\\\"!==this.table.options.editCellTrigger||(({col:t,row:i}=e),r=getCellEventArgsSet(e.federatedEvent),r=this.table.scenegraph.getResizeColAt(r.abstractPos.x,r.abstractPos.y,null==(r=r.eventArgs)?void 0:r.targetCell),this.table._canResizeColumn(r.col,r.row)&&0<=r.col)||this.startEditCell(t,i)}),this.table.on(TABLE_EVENT_TYPE.CLICK_CELL,e=>{var t,i;\\\"click\\\"===this.table.options.editCellTrigger&&(({col:t,row:i}=e),this.startEditCell(t,i))}),e.on(this.table.getElement(),\\\"wheel\\\",e=>{this.completeEdit()}),e.on(this.table.getElement(),\\\"resize\\\",e=>{(this.table.autoFillWidth||this.table.autoFillHeight)&&this.completeEdit()})}startEditCell(e,t){var i,r,n=this.table.getEditor(e,t);if(n){if(!this.table.isHeader(e,t)){var o=this.table.getCellRange(e,t);if(o.start.col!==o.end.col||o.start.row!==o.end.row)return}null!=(r=null==(o=this.table.internalProps.layoutMap)?void 0:o.isAggregation)&&r.call(o,e,t)||(this.editingEditor||(this.editCell={col:e,row:t}),this.editingEditor=n,o=this.table.getCellOriginValue(e,t),r={rect:{left:(r=this.table.getCellRangeRelativeRect(this.table.getCellRange(e,t))).left,top:r.top,width:r.width,height:r.height}},n.beginEditing,null!=(i=n.beginEditing)&&i.call(n,this.table.getElement(),r,o),n.bindSuccessCallback,null!=(i=n.bindSuccessCallback)&&i.call(n,()=>{this.completeEdit()}),null!=(i=n.onStart)&&i.call(n,{value:o,endEdit:()=>{this.completeEdit()},referencePosition:r,container:this.table.getElement(),col:e,row:t}))}}completeEdit(e){if(this.editingEditor){var t=null==e?void 0:e.target,i=this[\\\"editingEditor\\\"];if(t)if(i.targetIsOnEditor){if(i.targetIsOnEditor(t))return}else if(!i.isEditorElement||i.isEditorElement(t))return;this.editingEditor.getValue,(!this.editingEditor.validateValue||null!=(i=(t=this.editingEditor).validateValue)&&i.call(t))&&(t=null==(i=(t=this.editingEditor).getValue)?void 0:i.call(t),this.table.changeCellValue(this.editCell.col,this.editCell.row,t),this.editingEditor.exit,null!=(t=(i=this.editingEditor).exit)&&t.call(i),null!=(t=(i=this.editingEditor).onEnd)&&t.call(i),this.editingEditor=null)}}cancelEdit(){var e,t;this.editingEditor&&(null!=(t=(e=this.editingEditor).exit)&&t.call(e),null!=(t=(e=this.editingEditor).onEnd)&&t.call(e),this.editingEditor=null)}}),ListTable=class extends BaseTable{constructor(e,t){var i;\\\"node\\\"===Env.mode?(t=e,e=null):e instanceof HTMLElement||(e=(t=e).container||null),super(e,t),this.showHeader=!0;const r=this.internalProps;r.frozenColDragHeaderMode=t.frozenColDragHeaderMode,this.pagination=t.pagination,r.sortState=t.sortState,r.dataConfig={},r.columns=t.columns?cloneDeepSpec(t.columns):t.header?cloneDeepSpec(t.header):[],null!=(i=t.columns)&&i.forEach((e,t)=>{e.editor&&(r.columns[t].editor=e.editor)}),this.showHeader=null==(i=t.showHeader)||i,this.transpose=null!=(i=t.transpose)&&i,\\\"node\\\"!==Env.mode&&(this.editorManager=new EditManeger(this)),this.refreshHeader(),t.dataSource?_setDataSource(this,t.dataSource):t.records?this.setRecords(t.records,{sortState:r.sortState}):this.setRecords([]),t.title&&(r.title=new Title2(t.title,this),this.scenegraph.resize()),setTimeout(()=>{this.fireListeners(TABLE_EVENT_TYPE.INITIALIZED,null)},0)}isListTable(){return!0}isPivotTable(){return!1}isPivotChart(){return!1}get sortState(){return this.internalProps.sortState}get records(){var e;return null==(e=this.dataSource)?void 0:e.records}get recordsCount(){return this.dataSource.records.length}updateColumns(e){var t={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.internalProps.columns=cloneDeepSpec(e),e.forEach((e,t)=>{e.editor&&(this.internalProps.columns[t].editor=e.editor)}),this.options.columns=e,this.refreshHeader(),this.scenegraph.clearCells(),this.headerStyleCache=new Map,this.bodyStyleCache=new Map,this.bodyBottomStyleCache=new Map,this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(t.col,t.row),this.renderAsync(),this.eventManager.updateEventBinder()}get columns(){return this.internalProps.layoutMap.columnTree.getCopiedTree()}get header(){return this.internalProps.columns}set header(e){this.internalProps.columns=e,this.options.header=e,this.refreshHeader(),this.renderAsync()}get transpose(){var e;return null!=(e=this.internalProps.transpose)&&e}set transpose(e){this.internalProps.transpose!==e&&(this.internalProps.transpose=e,this.options.transpose=e,this.internalProps.layoutMap)&&(this.internalProps.layoutMap.transpose=e,this.refreshRowColCount(),this._resetFrozenColCount(),this.renderAsync())}getCellValue(e,t,i){if(-1===e||-1===t)return null;if(!i){var r=this.getCustomMergeValue(e,t);if(r)return r}r=this;if(r.internalProps.layoutMap.isSeriesNumber(e,t))return r.internalProps.layoutMap.isSeriesNumberInHeader(e,t)?(n=r.internalProps.layoutMap.getSeriesNumberHeader(e,t)[\\\"title\\\"],n):(n=r.internalProps.layoutMap.getSeriesNumberBody(e,t)[\\\"format\\\"],\\\"function\\\"==typeof n?n(e,t,this):t-this.columnHeaderLevelCount+1);if(r.internalProps.layoutMap.isHeader(e,t))return n=r.internalProps.layoutMap.getHeader(e,t)[\\\"title\\\"],\\\"function\\\"==typeof n?n():n;if(r.internalProps.layoutMap.isAggregation(e,t)){if(r.internalProps.layoutMap.isTopAggregation(e,t))return null!=(n=r.internalProps.layoutMap.getAggregatorOnTop(e,t))&&n.formatValue?n.formatValue(e,t,this):\\\"\\\";if(r.internalProps.layoutMap.isBottomAggregation(e,t))return null!=(n=r.internalProps.layoutMap.getAggregatorOnBottom(e,t))&&n.formatValue?n.formatValue(e,t,this):\\\"\\\"}var{field:n,fieldFormat:o}=r.internalProps.layoutMap.getBody(e,t);return r.getFieldData(o||n,e,t)}getCellOriginValue(e,t){if(-1===e||-1===t)return null;var i=this;if(i.internalProps.layoutMap.isSeriesNumber(e,t))return i.internalProps.layoutMap.isSeriesNumberInHeader(e,t)?(r=i.internalProps.layoutMap.getSeriesNumberHeader(e,t)[\\\"title\\\"],r):(r=i.internalProps.layoutMap.getSeriesNumberBody(e,t)[\\\"format\\\"],\\\"function\\\"==typeof r?r(e,t,this):t-this.columnHeaderLevelCount);if(i.internalProps.layoutMap.isHeader(e,t))return r=i.internalProps.layoutMap.getHeader(e,t)[\\\"title\\\"],\\\"function\\\"==typeof r?r():r;if(i.internalProps.layoutMap.isAggregation(e,t)){if(i.internalProps.layoutMap.isTopAggregation(e,t))return null==(r=i.internalProps.layoutMap.getAggregatorOnTop(e,t))?void 0:r.value();if(i.internalProps.layoutMap.isBottomAggregation(e,t))return null==(r=i.internalProps.layoutMap.getAggregatorOnBottom(e,t))?void 0:r.value()}var r=i.internalProps.layoutMap.getBody(e,t)[\\\"field\\\"];return i.getFieldData(r,e,t)}getCellRawValue(e,t){var i;return-1===e||-1===t?null:this.internalProps.layoutMap.isHeader(e,t)?(i=this.internalProps.layoutMap.getHeader(e,t)[\\\"title\\\"],\\\"function\\\"==typeof i?i():i):(i=this.internalProps.layoutMap.getBody(e,t)[\\\"field\\\"],this.getRawFieldData(i,e,t))}getRecordShowIndexByCell(e,t){var i=this.internalProps[\\\"layoutMap\\\"];return i.getRecordShowIndexByCell(e,t)}getRecordIndexByCell(e,t){var i=this.internalProps[\\\"layoutMap\\\"],i=i.getRecordShowIndexByCell(e,t);return this.dataSource.currentPagerIndexedData[i]}getTableIndexByRecordIndex(e){return this.transpose?this.dataSource.getTableIndex(e)+this.rowHeaderLevelCount:this.dataSource.getTableIndex(e)+this.columnHeaderLevelCount}getTableIndexByField(t){var e=this.internalProps.layoutMap.columnObjects.find(e=>e.field===t),e=this.internalProps.layoutMap.getBodyLayoutRangeById(e.id);return this.transpose?e.start.row:e.start.col}getCellAddrByFieldRecord(e,t){return this.transpose?{col:this.getTableIndexByRecordIndex(t),row:this.getTableIndexByField(e)}:{col:this.getTableIndexByField(e),row:this.getTableIndexByRecordIndex(t)}}getCellOriginRecord(e,t){var i=this.getRecordShowIndexByCell(e,t);if(-1<i)return this.dataSource.get(i)}getCellRawRecord(e,t){var i=this.getRecordShowIndexByCell(e,t);if(-1<i)return this.dataSource.getRaw(i)}_canResizeColumn(e,t){var i=super._canResizeColumn(e,t);if(i&&!this.transpose){var r=this.internalProps.layoutMap.getBody(e,this.columnHeaderLevelCount);if(null!=r&&r.disableColumnResize)return!1}return i}updateOption(e){var t;const i=this.internalProps;return super.updateOption(e),i.frozenColDragHeaderMode=e.frozenColDragHeaderMode,this.pagination=e.pagination,i.sortState=e.sortState,i.dataConfig={},this.showHeader=null==(t=e.showHeader)||t,i.columns=e.columns?cloneDeepSpec(e.columns):e.header?cloneDeepSpec(e.header):[],e.columns.forEach((e,t)=>{e.editor&&(i.columns[t].editor=e.editor)}),this.transpose=null!=(t=e.transpose)&&t,this.refreshHeader(),i.releaseList&&(i.releaseList.forEach(e=>{var t;return null==(t=null==e?void 0:e.release)?void 0:t.call(e)}),i.releaseList=null),e.dataSource?_setDataSource(this,e.dataSource):e.records?this.setRecords(e.records,{sortState:e.sortState}):(this._resetFrozenColCount(),this.scenegraph.createSceneGraph(),this.render()),e.title&&(i.title=new Title2(e.title,this),this.scenegraph.resize()),new Promise(e=>{setTimeout(e,0)})}updatePagination(e){this.pagination&&(\\\"number\\\"==typeof e.currentPage&&0<=e.currentPage&&(this.pagination.currentPage=e.currentPage),e.perPageCount&&(this.pagination.perPageCount=e.perPageCount||this.pagination.perPageCount),this.internalProps.layoutMap.clearCellRangeMap(),this.scenegraph.clearCells(),this.dataSource.updatePagination(this.pagination),this.refreshRowColCount(),this.scenegraph.createSceneGraph(),this.renderAsync())}refreshHeader(){var e=this.internalProps,t=this.transpose,i=this.showHeader;((e.layoutMap=new SimpleHeaderLayoutMap(this,null!=(e=e.columns)?e:[],i,this.options.hierarchyIndent)).transpose=t)||this.setMinMaxLimitWidth(!0),this.refreshRowColCount()}refreshRowColCount(){var e,t=this,i=t.internalProps[\\\"layoutMap\\\"];i&&(i.recordsCount=(null!=(e=null==(e=t.internalProps.dataSource)?void 0:e.length)?e:0)+i.hasAggregationOnTopCount+i.hasAggregationOnBottomCount,t.transpose?(t.rowCount=null!=(e=i.rowCount)?e:0,t.colCount=null!=(e=i.colCount)?e:0,t.frozenRowCount=0,this.internalProps.frozenColCount=Math.max((null!=(e=i.headerLevelCount)?e:0)+i.leftRowSeriesNumberColumnCount,null!=(e=this.options.frozenColCount)?e:0),t.bottomFrozenRowCount!==(null!=(e=this.options.bottomFrozenRowCount)?e:0)&&(t.bottomFrozenRowCount=null!=(e=this.options.bottomFrozenRowCount)?e:0),t.rightFrozenColCount!==(null!=(e=this.options.rightFrozenColCount)?e:0)&&(t.rightFrozenColCount=null!=(e=this.options.rightFrozenColCount)?e:0)):(t.colCount=null!=(e=i.colCount)?e:0,t.rowCount=i.recordsCount*i.bodyRowSpanCount+i.headerLevelCount,this.internalProps.frozenColCount=null!=(e=this.options.frozenColCount)?e:0,t.frozenRowCount=i.headerLevelCount,t.bottomFrozenRowCount!==(null!=(e=this.options.bottomFrozenRowCount)?e:0)&&(t.bottomFrozenRowCount=null!=(i=this.options.bottomFrozenRowCount)?i:0),t.rightFrozenColCount!==(null!=(e=this.options.rightFrozenColCount)?e:0)&&(t.rightFrozenColCount=null!=(i=this.options.rightFrozenColCount)?i:0)),this.stateManager.setFrozenCol(this.internalProps.frozenColCount))}getFieldData(e,t,i){var r;return null===e||this.internalProps.layoutMap.isHeader(t,i)?null:(r=this.getRecordShowIndexByCell(this.transpose?t-this.internalProps.layoutMap.leftRowSeriesNumberColumnCount:t,i),this.internalProps.dataSource.getField(r,e,t,i,this))}getRawFieldData(e,t,i){var r;return null===e||this.internalProps.layoutMap.isHeader(t,i)?null:(r=this.getRecordShowIndexByCell(t,i),this.internalProps.dataSource.getRawField(r,e,t,i,this))}_moveHeaderPosition(e,t){var i=this.getCellRange(e.col,e.row),r=this.getCellRange(t.col,t.row),n=this.internalProps.layoutMap.moveHeaderPosition(e,t);return n?(\\\"column\\\"===n.moveType?(this.colWidthsMap.exchangeOrder(i.start.col,i.end.col-i.start.col+1,r.start.col,r.end.col-r.start.col+1,n.targetIndex),this.transpose||(this.colWidthsLimit={},this.setMinMaxLimitWidth())):n.targetIndex>n.sourceIndex?this.rowHeightsMap.exchangeOrder(n.sourceIndex,n.sourceSize,n.targetIndex+n.sourceSize-n.targetSize,n.targetSize,n.targetIndex):this.rowHeightsMap.exchangeOrder(n.sourceIndex,n.sourceSize,n.targetIndex,n.targetSize,n.targetIndex),n):null}changeRecordOrder(e,t){t=this.transpose?(e=this.getRecordShowIndexByCell(e,0),this.getRecordShowIndexByCell(t,0)):(e=this.getRecordShowIndexByCell(0,e),this.getRecordShowIndexByCell(0,t)),this.dataSource.reorderRecord(e,t)}getCellAddress(t,e){let i;for(let o=0;o<this.internalProps.records.length;o++){var r=this.internalProps.records[o];if(\\\"function\\\"==typeof t)t(r)&&(i=o);else{let e=!0;for(const a in t)if(r[a]!==t[a]){e=!1;break}e&&(i=o)}if(isValid_default(i))break}var n=this.getCellRangeByField(e,i);if(n)return{row:n.start.row,col:n.start.col}}getCellRangeByField(t,i){var r=this.internalProps[\\\"layoutMap\\\"],n=r.columnObjects.find(e=>e.field===t);if(n){n=r.getBodyLayoutRangeById(n.id);let e;return isValid_default(i)&&(e=r.getRecordStartRowByRecordIndex(i)),this.transpose?{start:{row:n.start.row,col:isValid_default(e)?e+n.start.col:void 0},end:{row:n.end.row,col:isValid_default(e)?e+n.end.col:void 0}}:{start:{col:n.start.col,row:isValid_default(e)?e+n.start.row:void 0},end:{col:n.end.col,row:isValid_default(e)?e+n.end.row:void 0}}}return null}getHierarchyState(e,t){var i;return this.getBodyColumnDefine(e,t).tree?(i=this.getRecordShowIndexByCell(e,t),this.dataSource.getHierarchyState(i)):HierarchyState.none}toggleHierarchyState(e,t){this.stateManager.updateHoverIcon(e,t,void 0,void 0);var i=this.getHierarchyState(e,t);i===HierarchyState.expand?(this._refreshHierarchyState(e,t),this.fireListeners(TABLE_EVENT_TYPE.TREE_HIERARCHY_STATE_CHANGE,{col:e,row:t,hierarchyState:HierarchyState.collapse})):i===HierarchyState.collapse&&(i=this.getCellOriginRecord(e,t),Array.isArray(i.children)&&this._refreshHierarchyState(e,t),this.fireListeners(TABLE_EVENT_TYPE.TREE_HIERARCHY_STATE_CHANGE,{col:e,row:t,hierarchyState:HierarchyState.expand,originData:i}))}_refreshHierarchyState(e,t){let i=!1,r=!1;var n=this.internalProps.layoutMap.checkHasChart(),o=(n&&(this.autoFillWidth&&(i=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight)&&(r=this.getAllRowsHeight()<=this.tableNoFrameHeight),this.getRecordShowIndexByCell(e,t)),o=this.dataSource.toggleHierarchyState(o,this.scenegraph.proxy.rowStart-this.columnHeaderLevelCount,Math.max(this.scenegraph.proxy.rowEnd-this.columnHeaderLevelCount,this.scenegraph.proxy.rowStart-this.columnHeaderLevelCount+this.scenegraph.proxy.rowLimit-1)),o=this.internalProps.layoutMap.toggleHierarchyState(o);this.refreshRowColCount(),this.clearCellStyleCache(),this.internalProps.layoutMap.clearCellRangeMap(),this.scenegraph.updateHierarchyIcon(e,t),this.scenegraph.updateRow(o.removeCellPositions,o.addCellPositions),n&&(this.autoFillWidth&&!i&&(i=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight&&!r&&(r=this.getAllRowsHeight()<=this.tableNoFrameHeight),\\\"adaptive\\\"===this.widthMode||i||\\\"adaptive\\\"===this.heightMode||r)&&this.scenegraph.updateChartSize(0)}_hasHierarchyTreeHeader(){var e;return null==(e=null!=(e=this.options.columns)?e:this.options.header)?void 0:e.some((e,t)=>e.tree)}getMenuInfo(e,t,i){return{field:this.getHeaderField(e,t),value:this.getCellValue(e,t),cellLocation:this.getCellLocation(e,t),event:void 0}}_getSortFuncFromHeaderOption(t,i,r){if(t=t||this.internalProps.columns,i&&t&&0<t.length)for(let e=0;e<t.length;e++){var n=t[e];if((r&&r===n.fieldKey||!r&&n.field===i)&&n.sort&&\\\"function\\\"==typeof n.sort)return n.sort;if(n.columns){n=this._getSortFuncFromHeaderOption(n.columns,i,r);if(n)return n}}}updateSortState(e,t=!0){var i,r;if(e)this.internalProps.sortState=e;else if(this.internalProps.sortState)if(Array.isArray(this.internalProps.sortState))for(let e=0;e<this.internalProps.sortState.length;e++)this.internalProps.sortState[e].order=\\\"normal\\\";else this.internalProps.sortState.order=\\\"normal\\\";let n,o;Array.isArray(this.internalProps.sortState)?({order:n,field:o}=null==(i=this.internalProps.sortState)?void 0:i[0]):({order:n,field:o}=this.internalProps.sortState),o&&t&&(i=this._getSortFuncFromHeaderOption(this.internalProps.columns,o),!1!==(r=this.internalProps.layoutMap.headerObjects.find(e=>e&&e.field===o)).define.sort)&&(this.dataSource.sort(r.field,n,i),this.internalProps.layoutMap.clearCellRangeMap(),this.scenegraph.sortCell()),this.stateManager.updateSortState(e)}updateFilterRules(e){this.scenegraph.clearCells(),this.sortState?(this.dataSource.updateFilterRulesForSorted(e),sortRecords(this)):this.dataSource.updateFilterRules(e),this.refreshRowColCount(),this.scenegraph.createSceneGraph()}getCheckboxState(t){return this.stateManager.checkedState.length<this.rowCount-this.columnHeaderLevelCount&&this.stateManager.initLeftRecordsCheckState(this.records),isValid_default(t)?this.stateManager.checkedState.map(e=>e[t]):this.stateManager.checkedState}getCellCheckboxState(e,t){var i=this.getBodyColumnDefine(e,t),i=null==i?void 0:i.field,r=this.getCellType(e,t);if(isValid_default(i)&&\\\"checkbox\\\"===r)return r=this.dataSource.getIndexKey(this.getRecordShowIndexByCell(e,t)),this.stateManager.checkedState[r][i]}getRadioState(e){return isValid_default(e)?this.stateManager.radioState[e]:this.stateManager.radioState}getCellRadioState(e,t){return getCellRadioState(e,t,this)}setCellCheckboxState(e,t,i){setCellCheckboxState(e,t,i,this)}setCellRadioState(e,t,i){setCellRadioState(e,t,i,this)}setRecords(e,t){var i,r;let n;null!=(i=this.internalProps.dataSource)&&i.release(),this.internalProps.releaseList=null==(i=this.internalProps.releaseList)?void 0:i.filter(e=>!e.dataSourceObj),this.internalProps.dataSource=null,Array.isArray(t)||null!=t&&t.order?n=t:t?n=t.sortState:null===t&&(n=null),\\\"undefined\\\"!=typeof window&&window.performance.now();const o={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};if(this.scenegraph.clearCells(),void 0!==n&&(this.internalProps.sortState=n,this.stateManager.setSortState(this.sortState)),e){if(_setRecords(this,e),this.sortState){let e,t;Array.isArray(this.sortState)?0!==this.sortState.length&&({order:e,field:t}=null==(i=this.sortState)?void 0:i[0]):({order:e,field:t}=this.sortState),e&&t&&\\\"normal\\\"!==e&&(i=this._getSortFuncFromHeaderOption(void 0,t),!1!==(r=this.internalProps.layoutMap.headerObjects.find(e=>e&&e.field===t)).define.sort)&&this.dataSource.sort(r.field,e,null!=i?i:defaultOrderFn)}this.refreshRowColCount()}else _setRecords(this,e);this.stateManager.initCheckedState(e),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(o.col,o.row),this.internalProps.title&&!this.internalProps.title.isReleased&&(this._updateSize(),this.internalProps.title.resize(),this.scenegraph.resize()),this.render(),isValid_default(o.col)&&isValid_default(o.row)&&0<=o.col&&0<=o.row&&setTimeout(()=>{this.internalProps.tooltipHandler.showTooltip(o.col,o.row)},0)}setRecordChildren(e,t,i){var r=this.getCellOriginRecord(t,i),n=(r.children=e,this.getRecordShowIndexByCell(t,i));this.dataSource.setRecord(r,n),this._refreshHierarchyState(t,i)}startEditCell(e,t){var i,r;isValid_default(e)&&isValid_default(t)?(this.selectCell(e,t),this.editorManager.startEditCell(e,t)):null!=(i=this.stateManager.select)&&i.cellPos&&(({col:i,row:r}=this.stateManager.select.cellPos),isValid_default(i))&&isValid_default(r)&&this.editorManager.startEditCell(i,r)}completeEditCell(){this.editorManager.completeEdit()}getEditor(e,t){var i,r=this.getBodyColumnDefine(e,t);let n=this.isHeader(e,t)?null!=(i=null==r?void 0:r.headerEditor)?i:this.options.headerEditor:null!=(i=null==r?void 0:r.editor)?i:this.options.editor;return\\\"string\\\"==typeof(n=\\\"function\\\"==typeof n?n({col:e,row:t,dataValue:this.getCellOriginValue(e,t),value:this.getCellValue(e,t)||\\\"\\\",table:this}):n)?get5(n):n}isHasEditorDefine(e,t){var i,r=this.getBodyColumnDefine(e,t);let n=this.isHeader(e,t)?null!=(i=null==r?void 0:r.headerEditor)?i:this.options.headerEditor:null!=(i=null==r?void 0:r.editor)?i:this.options.editor;return\\\"function\\\"==typeof n&&(n=n({col:e,row:t,dataValue:this.getCellOriginValue(e,t),value:this.getCellValue(e,t)||\\\"\\\",table:this})),isValid_default(n)}changeCellValue(e,i,r,t=!1){if(t&&this.isHasEditorDefine(e,i)||!1===t){var n=this.getRecordShowIndexByCell(e,i),o=this.internalProps.layoutMap.getBody(e,i)[\\\"field\\\"],a=this.getCellRawValue(e,i),l=this.getCellOriginValue(e,i),s=(this.isHeader(e,i)?this.internalProps.layoutMap.updateColumnTitle(e,i,r):this.dataSource.changeFieldValue(r,n,o,e,i,this),this.getCellRange(e,i)),h=this.internalProps.layoutMap.getAggregatorsByCell(e,i);if(h){if(Array.isArray(h))for(let e=0;e<(null==h?void 0:h.length);e++)h[e].recalculate();else h.recalculate();var d=this.internalProps.layoutMap.getAggregatorCellAddress(s.start.col,s.start.row,s.end.col,s.end.row);for(let e=0;e<d.length;e++){var u=this.getCellRange(d[e].col,d[e].row);for(let t=u.start.col;t<=u.end.col;t++)for(let e=u.start.row;e<=u.end.row;e++)this.scenegraph.updateCellContent(t,e)}}for(let t=s.start.col;t<=s.end.col;t++)for(let e=s.start.row;e<=s.end.row;e++)this.scenegraph.updateCellContent(t,e);\\\"adaptive\\\"===this.widthMode||this.autoFillWidth&&this.getAllColsWidth()<=this.tableNoFrameWidth?0===this.internalProps._widthResizedColMap.size&&this.scenegraph.recalculateColWidths():this.internalProps._widthResizedColMap.has(e)||(n=this.getColWidth(e),(o=computeColWidth(e,0,this.rowCount-1,this,!1))!==n&&this.scenegraph.updateColWidth(e,o-n)),\\\"adaptive\\\"===this.heightMode||this.autoFillHeight&&this.getAllRowsHeight()<=this.tableNoFrameHeight?0===this.internalProps._heightResizedRowMap.size&&this.scenegraph.recalculateRowHeights():\\\"autoHeight\\\"!==this.heightMode||this.internalProps._heightResizedRowMap.has(i)||(o=this.getRowHeight(i),n=computeRowHeight(i,0,this.colCount-1,this),this.scenegraph.updateRowHeight(i,n-o)),this.fireListeners(TABLE_EVENT_TYPE.CHANGE_CELL_VALUE,{col:e,row:i,rawValue:a,currentValue:l,changedValue:this.getCellOriginValue(e,i)}),this.scenegraph.updateNextFrame()}}changeCellValues(i,r,n,o=!1){let a=i,l=r;for(let S=0;S<n.length&&!(r+S>this.rowCount-1);S++){l=r+S;var s,h,d,u,c,g=n[S];let e=i;for(let t=0;t<g.length&&!(i+t>this.colCount-1);t++)e=i+t,(o&&this.isHasEditorDefine(i+t,r+S)||!1===o)&&(s=g[t],h=this.getRecordShowIndexByCell(i+t,r+S),d=this.internalProps.layoutMap.getBody(i+t,r+S)[\\\"field\\\"],u=this.getCellRawValue(i+t,r+S),c=this.getCellOriginValue(i+t,r+S),this.isHeader(i+t,r+S)?this.internalProps.layoutMap.updateColumnTitle(i+t,r+S,s):this.dataSource.changeFieldValue(s,h,d,i+t,r+S,this),this.fireListeners(TABLE_EVENT_TYPE.CHANGE_CELL_VALUE,{col:i+t,row:r+S,rawValue:u,currentValue:c,changedValue:this.getCellOriginValue(i+t,r+S)}));a=Math.max(a,e)}var t,p,f=this.getCellRange(i,r),m=this.getCellRange(a,l),b=this.internalProps.layoutMap.getAggregatorsByCellRange(f.start.col,f.start.row,m.end.col,m.end.row);if(b){for(let e=0;e<(null==b?void 0:b.length);e++)b[e].recalculate();var v=this.internalProps.layoutMap.getAggregatorCellAddress(f.start.col,f.start.row,m.end.col,m.end.row);for(let i=0;i<v.length;i++){var C=this.getCellRange(v[i].col,v[i].row);for(let t=C.start.col;t<=C.end.col;t++)for(let e=C.start.row;e<=C.end.row;e++)this.scenegraph.updateCellContent(t,e)}}for(let A=f.start.col;A<=m.end.col;A++)for(let e=f.start.row;e<=m.end.row;e++)this.scenegraph.updateCellContent(A,e);if(\\\"adaptive\\\"===this.widthMode||this.autoFillWidth&&this.getAllColsWidth()<=this.tableNoFrameWidth)0===this.internalProps._widthResizedColMap.size&&this.scenegraph.recalculateColWidths();else for(let e=i;e<=m.end.col;e++)this.internalProps._widthResizedColMap.has(e)||(t=this.getColWidth(e),(p=computeColWidth(e,0,this.rowCount-1,this,!1))!==t&&this.scenegraph.updateColWidth(e,p-t));if(\\\"adaptive\\\"===this.heightMode||this.autoFillHeight&&this.getAllRowsHeight()<=this.tableNoFrameHeight)this.scenegraph.recalculateRowHeights();else if(\\\"autoHeight\\\"===this.heightMode){var y,_,w=[],x=[];for(let e=r;e<=m.end.row;e++)this.rowHeightsMap.get(e)&&(y=this.getRowHeight(e),_=computeRowHeight(e,0,this.colCount-1,this),w.push(e),x.push(_-y));this.scenegraph.updateRowsHeight(w,x)}this.scenegraph.updateNextFrame()}addRecord(e,t){if(this.sortState)this.dataSource.addRecordForSorted(e),sortRecords(this),this.refreshRowColCount(),this.scenegraph.clearCells(),this.scenegraph.createSceneGraph();else{(void 0===t||t>this.dataSource.sourceLength)&&(t=this.dataSource.sourceLength);var i=this.transpose?this.rowHeaderLevelCount:this.columnHeaderLevelCount,r=(this.dataSource.addRecord(e,t),this.rowCount);if(this.refreshRowColCount(),0===this.scenegraph.proxy.totalActualBodyRowCount)this.scenegraph.clearCells(),this.scenegraph.createSceneGraph();else{var n=this.transpose?this.colCount:this.rowCount;if(this.pagination){var{perPageCount:o,currentPage:a}=this.pagination,a=o*(a||0)+o;if(t<a)if(t<a-o)this.scenegraph.clearCells(),this.scenegraph.createSceneGraph();else{var l=t-(a-o)+i;if(r-i===this.pagination.perPageCount){var s=[];for(let e=l;e<n;e++)this.transpose?s.push({col:e,row:0}):s.push({col:0,row:e});this.transpose?this.scenegraph.updateCol([],[],s):this.scenegraph.updateRow([],[],s)}else{var h=[];for(let e=l;e<Math.min(n,l+1);e++)this.transpose?h.push({col:e,row:0}):h.push({col:0,row:e});this.transpose?this.scenegraph.updateCol([],h,[]):this.scenegraph.updateRow([],h,[])}}}else{var d=[];for(let e=t+i;e<t+i+1;e++)this.transpose?d.push({col:e,row:0}):d.push({col:0,row:e});this.transpose?this.scenegraph.updateCol([],d,[]):this.scenegraph.updateRow([],d,[])}}}}addRecords(t,i){if(this.sortState)this.dataSource.addRecordsForSorted(t),sortRecords(this),this.refreshRowColCount(),this.scenegraph.clearCells(),this.scenegraph.createSceneGraph();else{void 0===i||i>this.dataSource.sourceLength?i=this.dataSource.sourceLength:i<0&&(i=0);var r=this.transpose?this.rowHeaderLevelCount:this.columnHeaderLevelCount,e=(this.dataSource.addRecords(t,i),this.transpose?this.colCount:this.rowCount);if(this.refreshRowColCount(),0===this.scenegraph.proxy.totalActualBodyRowCount)this.scenegraph.clearCells(),this.scenegraph.createSceneGraph();else{var n=this.transpose?this.colCount:this.rowCount;if(this.pagination){var{perPageCount:o,currentPage:a}=this.pagination,a=o*(a||0)+o;if(i<a)if(i<a-o)this.scenegraph.clearCells(),this.scenegraph.createSceneGraph();else{var l=i-(a-o)+r;if(e-r===this.pagination.perPageCount){var s=[];for(let e=l;e<n;e++)this.transpose?s.push({col:e,row:0}):s.push({col:0,row:e});this.transpose?this.scenegraph.updateCol([],[],s):this.scenegraph.updateRow([],[],s)}else{var h=[];for(let e=l;e<Math.min(n,l+(Array.isArray(t)?t.length:1));e++)this.transpose?h.push({col:e,row:0}):h.push({col:0,row:e});this.transpose?this.scenegraph.updateCol([],h,[]):this.scenegraph.updateRow([],h,[])}}}else{var d=[];for(let e=i+r;e<i+r+(Array.isArray(t)?t.length:1);e++)this.transpose?d.push({col:e,row:0}):d.push({col:0,row:e});this.transpose?this.scenegraph.updateCol([],d,[]):this.scenegraph.updateRow([],d,[])}}}}deleteRecords(e){if(0<(null==e?void 0:e.length))if(this.sortState)this.dataSource.deleteRecordsForSorted(e),sortRecords(this),this.refreshRowColCount(),this.scenegraph.clearCells(),this.scenegraph.createSceneGraph();else{var t=this.dataSource.deleteRecords(e);if(0!==t.length){var i=this.transpose?this.colCount:this.rowCount,r=(this.refreshRowColCount(),this.transpose?this.colCount:this.rowCount),n=t.sort((e,t)=>e-t),t=n[0];if(this.pagination){var{perPageCount:o,currentPage:a}=this.pagination,a=o*(a||0)+o;if(t<a)if(t<a-o)this.scenegraph.clearCells(),this.scenegraph.createSceneGraph();else{var l=[],s=[];for(let e=t-(a-o)+(this.transpose?this.rowHeaderLevelCount:this.columnHeaderLevelCount);e<r;e++)this.transpose?l.push({col:e,row:0}):l.push({col:0,row:e});if(r<i)for(let e=r;e<i;e++)this.transpose?s.push({col:e,row:0}):s.push({col:0,row:e});this.transpose?this.scenegraph.updateCol(s,[],l):this.scenegraph.updateRow(s,[],l)}}else{var h=[];for(let e=0;e<n.length;e++){var d=n[e]+(this.transpose?this.rowHeaderLevelCount:this.columnHeaderLevelCount);this.transpose?h.push({col:d,row:0}):h.push({col:0,row:d})}this.transpose?this.scenegraph.updateCol(h,[],[]):this.scenegraph.updateRow(h,[],[])}}}}updateRecords(e,t){if(0<(null==t?void 0:t.length))if(this.sortState)this.dataSource.updateRecordsForSorted(e,t),sortRecords(this),this.refreshRowColCount(),this.scenegraph.clearCells(),this.scenegraph.createSceneGraph();else{var i=this.dataSource.updateRecords(e,t);if(0!==i.length){var r=i.sort((e,t)=>e-t);if(this.pagination){var{perPageCount:n,currentPage:i}=this.pagination,o=n*(i||0)+n,a=[];for(let e=0;e<r.length;e++){var l=r[e];l<o&&o-n<=l&&(l=l-(o-n)+(this.transpose?this.rowHeaderLevelCount:this.columnHeaderLevelCount),a.push(l))}if(1<=a.length){var s=[];for(let e=0;e<a.length;e++){var h=a[e];this.transpose?s.push({col:h,row:0}):s.push({col:0,row:h})}this.transpose?this.scenegraph.updateCol([],[],s):this.scenegraph.updateRow([],[],s)}}else{var d=[];for(let e=0;e<r.length;e++){var u=r[e]+(this.transpose?this.rowHeaderLevelCount:this.columnHeaderLevelCount);this.transpose?d.push({col:u,row:0}):d.push({col:0,row:u})}this.transpose?this.scenegraph.updateCol([],[],d):this.scenegraph.updateRow([],[],d)}}}}_hasCustomRenderOrLayout(){var e,t=this.internalProps.layoutMap[\\\"headerObjects\\\"];if(this.options.customRender)return!0;for(let r=0;r<t.length;r++){var i=t[r];if(null!=(e=null==i?void 0:i.define)&&e.customLayout||null!=(e=null==i?void 0:i.define)&&e.headerCustomLayout||null!=(e=null==i?void 0:i.define)&&e.customRender||null!=(e=null==i?void 0:i.define)&&e.headerCustomRender)return!0}return!1}getAggregateValuesByField(e){var t=this.internalProps.layoutMap.getColumnByField(e),i=[];for(let o=0;o<t.length;o++){var r=t[o].columnDefine.aggregator;if(delete t[o].columnDefine,r){var n={col:t[o].col,aggregateValue:null};if(n.aggregateValue=[],Array.isArray(r))for(let e=0;e<r.length;e++)n.aggregateValue.push({aggregationType:r[e].type,value:r[e].value()});else n.aggregateValue.push({aggregationType:r.type,value:r.value()});i.push(n)}}return i}};function diffCellAddress(e,t,i,r,n,o){var a,l=o.columnHeaderLevelCount,s=[],h=[];for(let g=0;g<i.length;g++)r.includes(i[g])||h.push(n[g]);for(let p=0;p<r.length;p++)i.includes(r[p])||(a={col:e,row:l+p},s.push(a));let d=o.getParentCellId(e,t),u=o.getRowHeaderCellAddressByCellId(d);var c=[];for(u&&c.push(u);d;)(d=o.getParentCellId(u.col,u.row))&&(u=o.getRowHeaderCellAddressByCellId(d),c.push(u));return{addCellPositions:s,removeCellPositions:h,updateCellPositions:c}}init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject();var defaultDimension={startInTotal:0,level:0},PivotHeaderLayoutMap=class{constructor(e,t){if(this.colIndex=0,this._showHeader=!0,this.columnHeaderObjs=[],this.rowHeaderObjs=[],this._cornerHeaderCellIds=[],this._columnHeaderCellIds=[],this._rowHeaderCellIds=[],this._rowHeaderCellIds_FULL=[],this._columnWidths=[],this.columnPaths=[],this._headerObjects=[],this._headerObjectMap={},this._indicators=[],this.indicatorsAsCol=!0,this.hideIndicatorName=!1,this._showRowHeader=!0,this._showColumnHeader=!0,this._indicatorShowType=\\\"column\\\",this.rowHierarchyTextStartAlignment=!1,this.rowDimensionKeys=[],this.colDimensionKeys=[],this.indicatorKeys=[],this.indicatorDimensionKey=IndicatorDimensionKeyPlaceholder,this._rowHeaderExtensionTree={},this._extensionRowDimensionKeys=[],this.fullRowDimensionKeys=[],this.leftRowSeriesNumberColumnCount=0,this.rightRowSeriesNumberColumnCount=0,this.sharedVar={seqId:0},\\\"tree\\\"===(this._table=e).options.rowHierarchyType&&(this.extensionRows=e.options.extensionRows),this.dataset=t,this._largeCellRangeCache=[],this._CellHeaderPathMap=new Map,this.rowTree=e.internalProps.rowTree,this.columnTree=e.internalProps.columnTree,this.rowsDefine=null!=(i=e.internalProps.rows)?i:[],this.columnsDefine=null!=(i=e.internalProps.columns)?i:[],this.indicatorsDefine=null!=(i=e.internalProps.indicators)?i:[],this.indicatorTitle=e.options.indicatorTitle,this.indicatorsAsCol=null==(i=e.options.indicatorsAsCol)||i,this.hideIndicatorName=null!=(i=e.options.hideIndicatorName)&&i,this.showRowHeader=null==(i=e.options.showRowHeader)||i,this.showColumnHeader=null==(i=e.options.showColumnHeader)||i,this.rowHeaderTitle=e.options.rowHeaderTitle,this.columnHeaderTitle=e.options.columnHeaderTitle,this.rowHierarchyType=null!=(i=e.options.rowHierarchyType)?i:\\\"grid\\\",this.rowExpandLevel=null!=(i=e.options.rowExpandLevel)?i:1,this.rowHierarchyIndent=null!=(i=e.options.rowHierarchyIndent)?i:20,this.rowHierarchyTextStartAlignment=e.options.rowHierarchyTextStartAlignment,this.cornerSetting=null!=(i=e.options.corner)?i:{titleOnDimension:\\\"column\\\"},t&&(this.rowTree=t.rowHeaderTree,this.columnTree=t.colHeaderTree,this.indicatorsAsCol)&&this._table.isPivotChart()&&checkHasCartesianChart(this)){const r=e=>{e.forEach(e=>{var t;null!=(t=e.children)&&t.length?r(e.children):e.children=[{dimensionKey:\\\"axis\\\",value:\\\"\\\"}]})};null!=(i=this.rowTree)&&i.length?r(this.rowTree):this.rowTree=[{dimensionKey:\\\"axis\\\",value:\\\"\\\"}]}if(null!=(i=this.indicatorsDefine)&&i.forEach(e=>{\\\"string\\\"==typeof e?this.indicatorKeys.push(e):this.indicatorKeys.push(e.indicatorKey)}),this.columnDimensionTree=new DimensionTree(null!=(i=this.columnTree)?i:[],this.sharedVar),this.rowDimensionTree=new DimensionTree(null!=(i=this.rowTree)?i:[],this.sharedVar,this.rowHierarchyType,\\\"tree\\\"===this.rowHierarchyType?this.rowExpandLevel:void 0),this.colDimensionKeys=this.columnDimensionTree.dimensionKeys.valueArr(),this.rowDimensionKeys=this.rowDimensionTree.dimensionKeys.valueArr(),this.fullRowDimensionKeys=this.fullRowDimensionKeys.concat(this.rowDimensionKeys),this.resetRowHeaderLevelCount(),this._generateColHeaderIds(),this.colIndex=0,this._generateRowHeaderIds(),this._table.isPivotChart()&&(this.hasTwoIndicatorAxes=this._indicators.some(e=>{if(e.chartSpec&&e.chartSpec.series&&1<e.chartSpec.series.length){var t=null!=(t=null!=(t=e.chartSpec.axes)?t:this._table.pivotChartAxes)?t:[];if(!t.length||t.every(e=>e.orient!==(this.indicatorsAsCol?\\\"top\\\":\\\"right\\\")||!1!==e.visible))return!0}return!1})),this.resetColumnHeaderLevelCount(),this._rowHeaderCellIds_FULL=transpose(this._rowHeaderCellIds_FULL),\\\"tree\\\"===e.options.rowHierarchyType&&1<=(null==(i=this.extensionRows)?void 0:i.length)&&(this.generateExtensionRowTree(),this.extensionRows.forEach(e=>{const t=[];e.rows.forEach(e=>{\\\"string\\\"==typeof e?t.push(e):t.push(e.dimensionKey)}),this._extensionRowDimensionKeys.push(t),this.fullRowDimensionKeys=this.fullRowDimensionKeys.concat(t)})),this.sharedVar.seqId=Math.max(this.sharedVar.seqId,this._headerObjects.length),\\\"column\\\"===this.cornerSetting.titleOnDimension)this.cornerHeaderObjs=this._addCornerHeaders(this.columnHeaderTitle?[\\\"\\\"].concat(this.colDimensionKeys):this.colDimensionKeys,this.columnsDefine);else if(\\\"row\\\"===this.cornerSetting.titleOnDimension)if(\\\"tree\\\"===this.rowHierarchyType&&1<=(null==(i=this.extensionRows)?void 0:i.length)){const n=[];n.push(this.rowDimensionKeys[0]),this._extensionRowDimensionKeys.forEach(e=>{n.push(e[0])});var i=this.extensionRows.reduce((e,t)=>e.concat(t.rows),[]);this.cornerHeaderObjs=this._addCornerHeaders(this.rowHeaderTitle?[\\\"\\\"].concat(n):n,this.rowsDefine.concat(i))}else this.cornerHeaderObjs=this._addCornerHeaders(this.rowHeaderTitle?[\\\"\\\"].concat(this.rowDimensionKeys):this.rowDimensionKeys,this.rowsDefine);else this.cornerHeaderObjs=this._addCornerHeaders(null,void 0);this.colIndex=0,this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{}),this.indicatorsAsCol&&!this.hideIndicatorName?this._indicatorShowType=\\\"column\\\":this.indicatorsAsCol||this.hideIndicatorName?this._indicatorShowType=\\\"none\\\":this._indicatorShowType=\\\"row\\\",this.setPagination(e.options.pagination),this._table.isPivotChart()&&(this._chartItemSpanSize=0,this._chartItemBandSize=0,this._indicators.find(e=>{null!=(i=null==e?void 0:e.style)&&i.padding&&(this._chartPadding=e.style.padding),null!=(i=e.chartSpec)&&i.barWidth&&\\\"number\\\"==typeof e.chartSpec.barWidth&&(this._chartItemSpanSize=null==(i=e.chartSpec)?void 0:i.barWidth);var t,i=null==(i=null==(i=e.chartSpec)?void 0:i.axes)?void 0:i.find(e=>\\\"band\\\"===e.type);return null!=i&&i.bandSize&&(this._chartItemBandSize=null==i?void 0:i.bandSize,this._chartPaddingInner=null!=(t=isArray_default(i.paddingInner)?i.paddingInner[0]:i.paddingInner)?t:0,this._chartPaddingOuter=null!=(t=isArray_default(i.paddingOuter)?i.paddingOuter[0]:i.paddingOuter)?t:0),0<this._chartItemSpanSize||(null!=(i=e.chartSpec.series)&&i.find(e=>(e.barWidth&&\\\"number\\\"==typeof e.barWidth&&(this._chartItemSpanSize=e.barWidth),0<this._chartItemSpanSize)),!1)})),this.handleRowSeriesNumber(e.internalProps.rowSeriesNumber),this.setColumnWidths()}handleRowSeriesNumber(e){var t;e&&(Array.isArray(e)?this.rowSeriesNumberColumn=e.map(e=>{var t;return{id:\\\"\\\",title:e.title,define:e,cellType:null!=(t=e.cellType)?t:\\\"text\\\",width:e.width,style:e.style,format:e.format,field:e.field,icon:e.icon}}):this.rowSeriesNumberColumn=[{id:\\\"\\\",title:e.title,define:e,cellType:null!=(t=e.cellType)?t:\\\"text\\\",style:e.style,width:e.width,format:e.format,field:\\\"\\\",icon:e.icon,isChildNode:!1}],this.leftRowSeriesNumberColumn=this.rowSeriesNumberColumn.filter(e=>!0),this.rightRowSeriesNumberColumn=this.rowSeriesNumberColumn.filter(e=>!1),this.leftRowSeriesNumberColumnCount=this.leftRowSeriesNumberColumn.length,this.rightRowSeriesNumberColumnCount=this.rightRowSeriesNumberColumn.length)}_generateColHeaderIds(){var e,t;1<=(null==(e=this.columnDimensionTree.tree.children)?void 0:e.length)&&this._addHeaders(this._columnHeaderCellIds,0,this.columnDimensionTree.tree.children,[],this.columnHeaderObjs),this.columnHeaderTitle&&(this.sharedVar.seqId=Math.max(this.sharedVar.seqId,this._headerObjects.length),e=++this.sharedVar.seqId,t=Array(this.colCount-this.rowHeaderLevelCount).fill(e),this._columnHeaderCellIds.unshift(t),t={id:e,title:\\\"string\\\"==typeof this.columnHeaderTitle.title?this.columnHeaderTitle.title:this.columnsDefine.reduce((e,t)=>\\\"string\\\"==typeof t?e:e+(e?\\\"/\\\"+t.title:\\\"\\\"+t.title),\\\"\\\"),field:void 0,headerType:null!=(t=null==(t=this.columnHeaderTitle)?void 0:t.headerType)?t:\\\"text\\\",style:null==(t=this.columnHeaderTitle)?void 0:t.headerStyle,define:{id:e,disableHeaderHover:!(null==(t=this.columnHeaderTitle)||!t.disableHeaderHover),disableHeaderSelect:!(null==(t=this.columnHeaderTitle)||!t.disableHeaderSelect)}},this.columnHeaderObjs.push(t),this._headerObjects[e]=t)}_generateRowHeaderIds(){var e,t;1<=(null==(e=this.rowDimensionTree.tree.children)?void 0:e.length)&&(\\\"tree\\\"===this.rowHierarchyType?this._addHeadersForTreeMode(this._rowHeaderCellIds_FULL,0,this.rowDimensionTree.tree.children,[],this.rowDimensionTree.totalLevel,!0,this.rowsDefine,this.rowHeaderObjs):this._addHeaders(this._rowHeaderCellIds_FULL,0,this.rowDimensionTree.tree.children,[],this.rowHeaderObjs)),this.rowHeaderTitle&&(this.sharedVar.seqId=Math.max(this.sharedVar.seqId,this._headerObjects.length),e=++this.sharedVar.seqId,t=Array(null!=(t=null==(t=this._rowHeaderCellIds_FULL[0])?void 0:t.length)?t:this.rowDimensionTree.tree.size).fill(e),this._rowHeaderCellIds_FULL.unshift(t),t={id:e,title:\\\"string\\\"==typeof this.rowHeaderTitle.title?this.rowHeaderTitle.title:this.rowsDefine.reduce((e,t)=>\\\"string\\\"==typeof t?e:e+(e?\\\"/\\\"+t.title:\\\"\\\"+t.title),\\\"\\\"),field:void 0,headerType:null!=(t=null==(t=this.rowHeaderTitle)?void 0:t.headerType)?t:\\\"text\\\",style:null==(t=this.rowHeaderTitle)?void 0:t.headerStyle,define:{id:e,disableHeaderHover:!(null==(t=this.rowHeaderTitle)||!t.disableHeaderHover),disableHeaderSelect:!(null==(t=this.rowHeaderTitle)||!t.disableHeaderSelect)}},this.rowHeaderObjs.push(t),this._headerObjects[e]=t)}_addHeaders(t,e,i,r,n){const o=this;if(!t[e]){var a=e,l=t[a]=[];if(0!==o.colIndex){var s=t[a-1];for(let e=0;e<(null==s?void 0:s.length);e++)l[e]=s[e]}}for(let h=0;h<i.length;h++)dealHeader(i[h],t,n,r,e,this)}_addHeadersForTreeMode(t,e,i,r,n,o,a,l){const s=this;if(!t[e]){var h=e,d=t[h]=[];if(0!==s.colIndex){var u=t[h-1];for(let e=0;e<(null==u?void 0:u.length);e++)d[e]=u[e]}}for(let c=0;c<i.length;c++)dealHeaderForTreeMode(i[c],t,l,r,e,n,o,a,this)}_addCornerHeaders(e,o){const a=[];if(e)e.forEach((t,i)=>{var r=++this.sharedVar.seqId,e=o.find(e=>\\\"string\\\"!=typeof e&&e.dimensionKey===t),n={id:r,title:t===this.indicatorDimensionKey?this.indicatorTitle:e?e.title:\\\"axis\\\"===t?\\\"\\\":t,field:\\\"维度名称\\\",style:this.cornerSetting.headerStyle,headerType:null!=(n=this.cornerSetting.headerType)?n:\\\"text\\\",define:{dimensionKey:\\\"维度名称\\\",id:r,value:t,disableHeaderHover:!!this.cornerSetting.disableHeaderHover,disableHeaderSelect:!!this.cornerSetting.disableHeaderSelect},dropDownMenu:null==e?void 0:e.cornerDropDownMenu,pivotInfo:{value:null!=(n=null==e?void 0:e.title)?n:\\\"\\\",dimensionKey:t,isPivotCorner:!0},description:null==e?void 0:e.cornerDescription};if(a[r]=n,this._headerObjects[r]=n,\\\"column\\\"===this.cornerSetting.titleOnDimension){this._cornerHeaderCellIds[i]||(this._cornerHeaderCellIds[i]=[]);for(let e=0;e<this.rowHeaderLevelCount;e++)this._cornerHeaderCellIds[i][e]=r}else if(\\\"row\\\"===this.cornerSetting.titleOnDimension)for(let e=0;e<this.columnHeaderLevelCount;e++)this._cornerHeaderCellIds[e]||(this._cornerHeaderCellIds[e]=[]),this._cornerHeaderCellIds[e][i]=r});else{var i=++this.sharedVar.seqId,r={id:i,title:\\\"\\\",field:\\\"维度名称\\\",style:this.cornerSetting.headerStyle,headerType:null!=(r=this.cornerSetting.headerType)?r:\\\"text\\\",define:{dimensionKey:\\\"维度名称\\\",id:i,value:\\\"\\\",disableHeaderHover:!!this.cornerSetting.disableHeaderHover,disableHeaderSelect:!!this.cornerSetting.disableHeaderSelect}};a[i]=r,this._headerObjects[i]=r;for(let t=0;t<this.columnHeaderLevelCount;t++)for(let e=0;e<this.rowHeaderLevelCount;e++)this._cornerHeaderCellIds[t]||(this._cornerHeaderCellIds[t]=[]),this._cornerHeaderCellIds[t][e]=i}return a}generateExtensionRowTree(){this.extensionRows.forEach((s,e)=>{var t=this._rowHeaderCellIds_FULL;this._rowHeaderCellIds_FULL=[],t.forEach((e,t)=>{var i,r=e[e.length-1];let n,o;this.colIndex=0,n=\\\"function\\\"==typeof s.rowTree?(i=this.findFullCellIds(e),s.rowTree(i.map(e=>({dimensionKey:this._headerObjects[e].field,value:this._headerObjects[e].title})))):cloneDeep(s.rowTree),this._rowHeaderExtensionTree[r]?(this._rowHeaderExtensionTree[r].reset(this._rowHeaderExtensionTree[r].tree.children,!0),o=this._rowHeaderExtensionTree[r]):(o=new DimensionTree(null!=n?n:[],this.sharedVar,this.rowHierarchyType,void 0),this._rowHeaderExtensionTree[r]=o);var a=[];this._addHeadersForTreeMode(a,0,o.tree.children,[],o.totalLevel,!0,s.rows,this.rowHeaderObjs);for(let l=0;l<a[0].length;l++)this._rowHeaderCellIds_FULL.push(e.concat(a[0][l]))})})}setColumnWidths(){var t;const l=new Array(this.colCount).fill(void 0);if(this.leftRowSeriesNumberColumnCount&&(l[0]=this.leftRowSeriesNumberColumn[0]),this.showHeader&&this.showRowHeader)if(this.rowHeaderTitle&&(l[0+this.leftRowSeriesNumberColumnCount]={}),\\\"tree\\\"===this.rowHierarchyType){const r=this.rowDimensionKeys[0];r&&(t=null==(t=this.rowsDefine)?void 0:t.find(e=>\\\"string\\\"!=typeof e&&e.dimensionKey===r))&&(l[0+(this.rowHeaderTitle?1:0)+this.leftRowSeriesNumberColumnCount]={width:t.width,minWidth:t.minWidth,maxWidth:t.maxWidth}),null!=(t=this._extensionRowDimensionKeys)&&t.forEach((e,t)=>{var i;const r=e[0];r&&(i=null==(i=this.extensionRows[t].rows)?void 0:i.find(e=>\\\"string\\\"!=typeof e&&e.dimensionKey===r))&&(l[t+1+(this.rowHeaderTitle?1:0)+this.leftRowSeriesNumberColumnCount]={width:i.width,minWidth:i.minWidth,maxWidth:i.maxWidth})})}else this.rowDimensionKeys.forEach((t,e)=>{var i=null==(i=this.rowsDefine)?void 0:i.find(e=>\\\"string\\\"!=typeof e&&e.dimensionKey===t);i&&(l[e+(this.rowHeaderTitle?1:0)+this.leftRowSeriesNumberColumnCount]={width:i.width,minWidth:i.minWidth,maxWidth:i.maxWidth})});if(this.indicatorsAsCol)for(let e=this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount;e<this.colCount;e++){var i=this.getBody(e,this.columnHeaderLevelCount);l[e]={width:null==i?void 0:i.width,minWidth:null==i?void 0:i.minWidth,maxWidth:null==i?void 0:i.maxWidth}}else{let r,n,o,a=0;null!=(t=this._indicators)&&t.forEach((e,t)=>{var i;\\\"number\\\"==typeof e.width?a=Math.max(e.width,a):\\\"auto\\\"===e.width&&(o=!0),\\\"number\\\"==typeof e.minWidth&&(n=Math.max(e.minWidth,null!=(i=n)?i:0)),\\\"number\\\"==typeof e.maxWidth&&(r=Math.min(e.maxWidth,null!=(i=r)?i:Number.MAX_VALUE))}),a=0<a?a:o?\\\"auto\\\":void 0,l.fill({width:a,minWidth:n,maxWidth:r},this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount,this.colCount-this.rightFrozenColCount)}this._columnWidths=l}get columnWidths(){return this._columnWidths}getColumnWidthDefined(e){return this._columnWidths[e]}get showHeader(){return this._showHeader}set showHeader(e){this._showHeader=e}get showColumnHeader(){return this._showColumnHeader}set showColumnHeader(e){this._showColumnHeader=e}get showRowHeader(){return this._showRowHeader}set showRowHeader(e){this._showRowHeader=e}get columnHeaderTitle(){return this._columnHeaderTitle}set columnHeaderTitle(e){this._columnHeaderTitle=e}get rowHeaderTitle(){return this._rowHeaderTitle}set rowHeaderTitle(e){this._rowHeaderTitle=e}getHeaderFieldKey(e,t){}getCellLocation(e,t){return this.isCornerHeader(e,t)?\\\"cornerHeader\\\":this.isColumnHeader(e,t)?\\\"columnHeader\\\":this.isRowHeader(e,t)?\\\"rowHeader\\\":\\\"body\\\"}isHeader(e,t){return e>=this.leftRowSeriesNumberColumnCount&&e<this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount||0<=t&&t<this.columnHeaderLevelCount||e>=this.colCount-this.rightHeaderColCount||t>=this.rowCount-this.bottomHeaderRowCount}isCornerHeader(e,t){return 0<=e&&e<this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount&&0<=t&&t<this.columnHeaderLevelCount}isColumnHeader(e,t){return e>=this.rowHeaderLevelCount&&0<=t&&t<this.columnHeaderLevelCount}isRowHeader(e,t){return e>=this.leftRowSeriesNumberColumnCount&&e<this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount&&t>=this.columnHeaderLevelCount}isFrozen(e,t){return this.isFrozenColumn(e)||this.isRightFrozenColumn(e)||this.isBottomFrozenRow(t)||this.isFrozenRow(t)||this.isSeriesNumberInBody(e,t)||this.isSeriesNumberInHeader(e,t)}isFrozenColumn(e,t){if(isValid_default(t)){if(0<=e&&e<this.frozenColCount&&t>=this.frozenRowCount&&t<this.rowCount-this.bottomFrozenRowCount)return!0}else if(0<this.frozenColCount&&0<=e&&e<this.frozenColCount)return!0;return!1}isRightFrozenColumn(e,t){if(isValid_default(t)){if(e>=this.colCount-this.rightFrozenColCount&&t>=this.frozenRowCount&&t<this.rowCount-this.bottomFrozenRowCount)return!0}else if(0<this.rightFrozenColCount&&e>=this.colCount-this.rightFrozenColCount)return!0;return!1}isFrozenRow(e,t){if(isValid_default(t)){if(0<=t&&t<this.frozenRowCount&&e>=this.frozenColCount&&e<this.colCount-this.rightFrozenColCount)return!0}else if(t=e,0<this.frozenRowCount&&0<=t&&t<this.frozenRowCount)return!0;return!1}isBottomFrozenRow(e,t){if(isValid_default(t)){if(t>=this.rowCount-this.bottomFrozenRowCount&&e>=this.frozenColCount&&e<this.colCount-this.rightFrozenColCount)return!0}else if(t=e,0<this.bottomFrozenRowCount&&t>=this.rowCount-this.bottomFrozenRowCount)return!0;return!1}isLeftBottomCorner(e,t){return 0<=e&&e<this.rowHeaderLevelCount&&t>=this.rowCount-this.bottomFrozenRowCount}isRightTopCorner(e,t){return e>=this.colCount-this.rightFrozenColCount&&0<=t&&t<this.columnHeaderLevelCount}isRightBottomCorner(e,t){return e>=this.colCount-this.rightFrozenColCount&&t>=this.rowCount-this.bottomFrozenRowCount}getColumnHeaderRange(){return{start:{col:this.rowHeaderLevelCount,row:0},end:{col:this.colCount-1,row:this.columnHeaderLevelCount-1}}}getRowHeaderRange(){return{start:{col:0,row:this.columnHeaderLevelCount},end:{col:this.rowHeaderLevelCount-1,row:this.rowCount-1}}}getCornerHeaderRange(){return{start:{col:0,row:0},end:{col:this.rowHeaderLevelCount-1,row:this.columnHeaderLevelCount-1}}}getBodyRange(){return{start:{col:this.rowHeaderLevelCount,row:this.columnHeaderLevelCount},end:{col:this.colCount-1,row:this.rowCount-1}}}resetCellIds(){}get frozenColCount(){return this._table.internalProps.frozenColCount?this.colCount>this._table.internalProps.frozenColCount?this._table.internalProps.frozenColCount:this.colCount:0}get frozenRowCount(){return this._table.internalProps.frozenRowCount?this.rowCount>=this._table.internalProps.frozenRowCount?this._table.internalProps.frozenRowCount:this.rowCount:0}get headerLevelCount(){return this.columnHeaderLevelCount}resetColumnHeaderLevelCount(){var t;if(this.showHeader&&this.showColumnHeader){if(this._table.isPivotChart()&&this.indicatorsAsCol&&(null==(t=null==(t=this.dataset)?void 0:t.colKeys)||!t.length)&&!this.hasTwoIndicatorAxes)return void(this.columnHeaderLevelCount=0);let e=this.indicatorsAsCol&&this.hideIndicatorName&&this.colDimensionKeys[this.colDimensionKeys.length-1]===this.indicatorDimensionKey?this.columnDimensionTree.totalLevel-1:this.columnDimensionTree.totalLevel;this.columnHeaderTitle&&(e+=1),this._table.isPivotChart()&&this.indicatorsAsCol&&!this.hasTwoIndicatorAxes&&checkHasCartesianChart(this)&&--e,void(this.columnHeaderLevelCount=e)}else this.columnHeaderLevelCount=0}resetRowHeaderLevelCount(){if(this.showHeader&&this.showRowHeader){if(\\\"tree\\\"===this.rowHierarchyType)return t=null!=(t=null==(t=this.extensionRows)?void 0:t.length)?t:0,this.rowHeaderTitle?void(this.rowHeaderLevelCount=2+t):void(this.rowHeaderLevelCount=1+t);var t=this.rowDimensionKeys.length;let e=t;this.indicatorsAsCol||this.hideIndicatorName&&this.rowDimensionKeys[this.rowDimensionKeys.length-1]===this.indicatorDimensionKey&&(e=t-1),this.rowHeaderTitle&&(e+=1),void(this.rowHeaderLevelCount=e)}else this.rowHeaderLevelCount=this.indicatorsAsCol||this.hideIndicatorName?0:1}get columnHeaderLevelCount(){return this._columnHeaderLevelCount}set columnHeaderLevelCount(e){this._columnHeaderLevelCount=e}get rowHeaderLevelCount(){return this._rowHeaderLevelCount}set rowHeaderLevelCount(e){this._rowHeaderLevelCount=e}get colCount(){return this.columnDimensionTree.tree.size+this.rowHeaderLevelCount+this.rightHeaderColCount+this.leftRowSeriesNumberColumnCount}get rowCount(){var e;return((!Array.isArray(this._table.records)||0<this._table.records.length)&&0<(null==(e=this._indicators)?void 0:e.length)&&(null==(e=this._rowHeaderCellIds)||!e.length)?1:null!=(e=null==(e=this._rowHeaderCellIds)?void 0:e.length)?e:0)+this.columnHeaderLevelCount+this.bottomHeaderRowCount}get bodyRowSpanCount(){return this.rowDimensionTree.tree.size}get bottomFrozenRowCount(){var e;return this._table.isPivotChart()?!(1<=this.indicatorKeys.length&&checkHasCartesianChart(this))||!1===(null==(e=this._table.pivotChartAxes.find(e=>\\\"bottom\\\"===e.orient))?void 0:e.visible)?0:(this.indicatorsAsCol,1):this._table.internalProps.bottomFrozenRowCount?this.rowCount-this.headerLevelCount>=this._table.internalProps.bottomFrozenRowCount?this._table.internalProps.bottomFrozenRowCount:this.rowCount-this.headerLevelCount:0}get rightFrozenColCount(){var e;return this._table.isPivotChart()?!1!==(null==(e=this._table.pivotChartAxes.find(e=>\\\"right\\\"===e.orient))?void 0:e.visible)&&!this.indicatorsAsCol&&this.hasTwoIndicatorAxes?1:0:this._table.internalProps.rightFrozenColCount?this.colCount-this.rowHeaderLevelCount>=this._table.internalProps.rightFrozenColCount?this._table.internalProps.rightFrozenColCount:this.colCount-this.rowHeaderLevelCount:0}get bodyRowCount(){return this.rowCount-this.bottomFrozenRowCount-this.headerLevelCount}get bodyColCount(){return this.colCount-this.rightFrozenColCount-this.rowHeaderLevelCount}get headerObjects(){return this._headerObjects}get columnObjects(){return this._indicators}getCellId(e,t){var i;if(0<=t&&0<=e)return this.isSeriesNumber(e,t)?\\\"\\\":this.isCornerHeader(e,t)?this._cornerHeaderCellIds[t][e-this.leftRowSeriesNumberColumnCount]:this.isColumnHeader(e,t)?this._columnHeaderCellIds[t][e-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount]:this.isRowHeader(e,t)?null==(i=this._rowHeaderCellIds[t-this.columnHeaderLevelCount])?void 0:i[e-this.leftRowSeriesNumberColumnCount]:this.isRightFrozenColumn(e,t)?this._rowHeaderCellIds[t-this.columnHeaderLevelCount][this.rowHeaderLevelCount-1]:!this.isBottomFrozenRow(e,t)||null==(i=this._columnHeaderCellIds[this.columnHeaderLevelCount-1])?void 0:i[e-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount]}getHeader(e,t){var i;return this.isSeriesNumberInHeader(e,t)?this.getSeriesNumberHeader(e,t):(i=this.getCellId(e,t),null!=(i=this._headerObjectMap[i])?i:{id:void 0,field:\\\"\\\",headerType:\\\"text\\\",define:void 0})}getHeaderField(e,t){var i=this.getCellId(e,t);return(null==(i=this._headerObjectMap[i])?void 0:i.field)||(null==(i=this.getBody(e,t))?void 0:i.field)}getHeaderCellAdressById(t){for(let o=0;o<this._columnHeaderCellIds.length;o++){var i=this._columnHeaderCellIds[o];for(let e=0;e<i.length;e++)if(i[e]===t)return{col:e+this._table.frozenColCount,row:o}}for(let a=0;a<this._rowHeaderCellIds.length;a++){var r=this._rowHeaderCellIds[a];for(let e=0;e<r.length;e++)if(r[e]===t)return{col:e,row:a+this._table.frozenRowCount}}for(let l=0;l<this._cornerHeaderCellIds.length;l++){var n=this._cornerHeaderCellIds[l];for(let e=0;e<n.length;e++)if(n[e]===t)return{col:e,row:l}}}getHeaderCellAddressByField(t){var e=this.headerObjects.find(e=>e&&e.field===t);return this.getHeaderCellAdressById(e.id)}getBody(e,t){var i;if(this.isSeriesNumber(e,t))return this.getSeriesNumberBody(e,t);var r=this.getCellHeaderPaths(e,t);if(this.indicatorsAsCol){const o=null==(i=null==(i=r.colHeaderPaths)?void 0:i.find(e=>e.indicatorKey))?void 0:i.indicatorKey;return null!=(i=null!=(i=null==(i=this._indicators)?void 0:i.find(e=>e.indicatorKey===o))?i:this._indicators[0])?i:{id:\\\"\\\",field:void 0,indicatorKey:void 0,cellType:\\\"text\\\",define:void 0}}const n=null==(r=null==(i=r.rowHeaderPaths)?void 0:i.find(e=>e.indicatorKey))?void 0:r.indicatorKey;return null!=(i=null!=(r=null==(i=this._indicators)?void 0:i.find(e=>e.indicatorKey===n))?r:this._indicators[0])?i:{id:\\\"\\\",field:void 0,indicatorKey:void 0,cellType:\\\"text\\\",define:void 0}}getCellRange(n,o){var a,l,s={start:{col:n,row:o},end:{col:n,row:o}};if(this.isHeader(n,o)&&-1!==n&&-1!==o&&!this.isRightFrozenColumn(n,o)&&!this.isBottomFrozenRow(n,o)){if(this._table.isPivotChart()){if(this.isLeftBottomCorner(n,o))return{start:{col:0,row:this.rowCount-this.bottomFrozenRowCount},end:{col:this.frozenColCount-1,row:this.rowCount-1}};if(this.isRightTopCorner(n,o))return{start:{col:this.colCount-this.rightFrozenColCount,row:0},end:{col:this.colCount-1,row:this.frozenRowCount-1}};if(this.isRightBottomCorner(n,o))return{start:{col:this.colCount-this.rightFrozenColCount,row:this.rowCount-this.bottomFrozenRowCount},end:{col:this.colCount-1,row:this.rowCount-1}}}for(let e=0;e<this._largeCellRangeCache.length;e++){var t=this._largeCellRangeCache[e];if(n>=t.start.col&&n<=t.end.col&&o>=t.start.row&&o<=t.end.row)return t}if(this.isHeader(n,o)&&-1!==n&&-1!==o){var h=this.getCellId(n,o);for(let e=n-1;0<=e&&h===this.getCellId(e,o);e--)s.start.col=e;for(let t=n+1;t<(null!=(a=this.colCount)?a:0)&&h===this.getCellId(t,o);t++)s.end.col=t;for(let i=o-1;0<=i&&h===this.getCellId(n,i);i--)s.start.row=i;for(let r=o+1;r<(null!=(l=this.rowCount)?l:0)&&!(h!==this.getCellId(n,r)||this.isSeriesNumberInHeader(n,o)&&r>=this.columnHeaderLevelCount);r++)s.end.row=r}(100<s.end.col-s.start.col||100<s.end.row-s.start.row)&&this._largeCellRangeCache.push(s)}return s}isCellRangeEqual(e,t,i,r){var n=this.getCellRange(e,t),o=this.getCellRange(i,r);return n.start.col===o.start.col&&n.end.col===o.end.col&&n.start.row===o.start.row&&n.end.row===o.end.row}getBodyIndexByRow(e){return e<this.columnHeaderLevelCount||e>=this.rowCount-this.bottomHeaderRowCount?-1:e-this.columnHeaderLevelCount}get bottomHeaderRowCount(){return this._table.isPivotChart()?this.bottomFrozenRowCount:0}get rightHeaderColCount(){return this._table.isPivotChart()?this.rightFrozenColCount:0}getBodyIndexByCol(e){return e<this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount||e>=this.colCount-this.rightHeaderColCount?-1:e-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount}getRecordStartRowByRecordIndex(e){return this.columnHeaderLevelCount+e}getRecordShowIndexByCell(e,t){}getCellHeaderPathsWidthTreeNode(e,t){if(e===this._lastCellCol&&t===this._lastCellRow)return this._lastCellHeaderPath;for(let u=0;u<this._largeCellRangeCache.length;u++){var i=this._largeCellRangeCache[u];if(e>=i.start.col&&e<=i.end.col&&t>=i.start.row&&t<=i.end.row){u;break}}var r=this.getBodyIndexByCol(e),n=this.getBodyIndexByRow(t)+this.currentPageStartIndex;let o=[],a=[];if(0<=t&&0<=r&&(o=this.columnDimensionTree.getTreePath(r,this.showHeader&&this.showColumnHeader?t-(this.columnHeaderTitle?1:0):this.columnDimensionTree.totalLevel)),0<=e&&0<=n)if(\\\"tree\\\"===this.rowHierarchyType){var l=this._rowHeaderCellIds[n];let t=this.rowDimensionTree,i=0;for(;t;){var s=[];let e=l[i];for(s.push(e);;){var h=this._headerObjectMap[e];if(null==h||!h.parentCellId)break;s.unshift(h.parentCellId),e=h.parentCellId}var d=t.getTreePathByCellIds(s);a=a.concat(d),t=this._rowHeaderExtensionTree[l[i]],i++}}else a=this.rowDimensionTree.getTreePath(n,this.showHeader&&this.showRowHeader?e-(this.rowHeaderTitle?1:0)-this.leftRowSeriesNumberColumnCount:this.rowDimensionTree.totalLevel);r={colHeaderPaths:o,rowHeaderPaths:a,cellLocation:this.getCellLocation(e,t)};return this._lastCellHeaderPath=r,this._lastCellCol=e,this._lastCellRow=t,r}getCellHeaderPaths(e,t){var i;const r=this.getCellHeaderPathsWidthTreeNode(e,t),n={colHeaderPaths:[],rowHeaderPaths:[],cellLocation:r.cellLocation};return null!=(i=r.colHeaderPaths)&&i.forEach(e=>{var t,i={};i.dimensionKey=e.dimensionKey,i.indicatorKey=e.indicatorKey,i.value=null!=(t=null!=(t=e.value)?t:null==(t=this.getIndicatorInfoByIndicatorKey(e.indicatorKey))?void 0:t.title)?t:\\\"\\\",n.colHeaderPaths.push(i)}),null!=(i=r.rowHeaderPaths)&&i.forEach(e=>{var t,i;\\\"axis\\\"!==e.dimensionKey&&((i={}).dimensionKey=e.dimensionKey,i.indicatorKey=e.indicatorKey,i.value=null!=(t=null!=(t=e.value)?t:null==(t=this.getIndicatorInfoByIndicatorKey(e.indicatorKey))?void 0:t.title)?t:\\\"\\\",n.rowHeaderPaths.push(i))}),n}getIndicatorInfoByIndicatorKey(t){var e;return null==(e=this.indicatorsDefine)?void 0:e.find(e=>\\\"string\\\"!=typeof e&&!!t&&e.indicatorKey===t)}findFullCellIds(t){var i=[];for(let n=0;n<t.length;n++){let e=t[n];for(i.push(e);;){var r=this._headerObjectMap[e];if(null==r||!r.parentCellId)break;i.unshift(r.parentCellId),e=r.parentCellId}}return i}getHeaderDimension(e,t){var i;if(this.isHeader(e,t)){const r=this.getHeader(e,t);return null!=(i=null==(i=this.rowsDefine)?void 0:i.find(e=>\\\"string\\\"!=typeof e&&e.dimensionKey===r.field))?i:null==(i=this.columnsDefine)?void 0:i.find(e=>\\\"string\\\"!=typeof e&&e.dimensionKey===r.field)}}isColumnIndicatorHeader(e,t){return\\\"column\\\"===this._indicatorShowType&&t===this.columnHeaderLevelCount-1&&e>=this.rowHeaderLevelCount}isRowIndicatorHeader(e,t){return\\\"row\\\"===this._indicatorShowType&&e===this.rowHeaderLevelCount-1&&t>=this.columnHeaderLevelCount}isIndicatorHeader(e,t){return this.isColumnIndicatorHeader(e,t)||this.isRowIndicatorHeader(e,t)}toggleHierarchyState(i,e){var t=this._rowHeaderCellIds_FULL.slice(0),r=t.map((e,t)=>({col:i,row:t+this.columnHeaderLevelCount})),n=this.getHeader(i,e),o=(n.define.hierarchyState=n.define.hierarchyState===HierarchyState.collapse?HierarchyState.expand:HierarchyState.collapse,this.rowDimensionTree.reset(this.rowDimensionTree.tree.children,!0),this._rowHeaderCellIds_FULL=[],this.rowDimensionKeys=this.rowDimensionTree.dimensionKeys.valueArr(),this.fullRowDimensionKeys=[],this.fullRowDimensionKeys=this.fullRowDimensionKeys.concat(this.rowDimensionKeys),this._addHeadersForTreeMode(this._rowHeaderCellIds_FULL,0,this.rowDimensionTree.tree.children,[],this.rowDimensionTree.totalLevel,!0,this.rowsDefine,this.rowHeaderObjs),this.rowHeaderTitle&&(n=++this.sharedVar.seqId,o=Array(this.rowCount-this.columnHeaderLevelCount).fill(n),this._rowHeaderCellIds_FULL.unshift(o),o={id:n,title:\\\"string\\\"==typeof this.rowHeaderTitle.title?this.rowHeaderTitle.title:this.rowsDefine.reduce((e,t)=>\\\"string\\\"==typeof t?e:e+(e?\\\"/\\\"+t.title:\\\"\\\"+t.title),\\\"\\\"),field:void 0,headerType:null!=(o=null==(o=this.rowHeaderTitle)?void 0:o.headerType)?o:\\\"text\\\",style:null==(o=this.rowHeaderTitle)?void 0:o.headerStyle,define:{field:\\\"\\\",headerType:\\\"text\\\",cellType:\\\"text\\\",disableHeaderHover:!(null==(o=this.rowHeaderTitle)||!o.disableHeaderHover),disableHeaderSelect:!(null==(o=this.rowHeaderTitle)||!o.disableHeaderSelect)}},this.rowHeaderObjs.push(o),this._headerObjects[n]=o),this._rowHeaderCellIds_FULL=transpose(this._rowHeaderCellIds_FULL),\\\"tree\\\"===this.rowHierarchyType&&1<=(null==(n=this.extensionRows)?void 0:n.length)&&this.generateExtensionRowTree(),this.colIndex=0,this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{}),this._CellHeaderPathMap=new Map,this._largeCellRangeCache.length=0,diffCellAddress(i,e,t.map(e=>e[i-this.leftRowSeriesNumberColumnCount]),this._rowHeaderCellIds_FULL.map(e=>e[i-this.leftRowSeriesNumberColumnCount]),r,this));return this._rowHeaderCellIds=this._rowHeaderCellIds_FULL.slice(),o}isHeaderForColWidth(e,t){return this.isHeader(e,t)}getHeaderForColWidth(e,t){return this.getHeader(e,t)}getPivotCellAdress(l){var s,h;if(Array.isArray(l)){let i,r,n=this.rowTree,o=this.columnTree;for(let a=0;a<l.length;a++){var d=l[a];if((d.isPivotCorner||!d.value)&&a===l.length-1){if(\\\"row\\\"===(null==(u=null==this?void 0:this.cornerSetting)?void 0:u.titleOnDimension)){let e=0;return-1===(e=\\\"grid\\\"===this.rowHierarchyType?this.rowDimensionKeys.indexOf(d.dimensionKey):e)?void 0:{col:(this.rowHeaderTitle?e+1:e)+this.leftRowSeriesNumberColumnCount,row:0}}var u=this.colDimensionKeys.indexOf(d.dimensionKey);return-1===u?void 0:{col:0+this.leftRowSeriesNumberColumnCount,row:this.columnHeaderTitle?u+1:u}}let t=!1;for(let e=0;e<o.length;e++){var c=o[e];if((isValid_default(d.dimensionKey)&&c.dimensionKey===d.dimensionKey||isValid_default(d.indicatorKey)&&c.indicatorKey===d.indicatorKey)&&c.value===d.value){o=c.children,r=c,t=!0;break}}if(!t)for(let e=0;e<n.length;e++){var g=n[e];if((isValid_default(d.dimensionKey)&&g.dimensionKey===d.dimensionKey||isValid_default(d.indicatorKey)&&g.indicatorKey===d.indicatorKey)&&g.value===d.value){n=g.children,i=g;break}}}let e=0,t=0;return i?(t=this.columnHeaderLevelCount,({startInTotal:s,level:h}=i),t+=s,{col:e=\\\"grid\\\"===this.rowHierarchyType?(this.rowHeaderTitle?h+1:h)+this.leftRowSeriesNumberColumnCount:0+this.leftRowSeriesNumberColumnCount,row:t}):r?(e=this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount,({startInTotal:s,level:h}=r),e+=s,t=this.columnHeaderTitle?h+1:h,{col:e,row:t}):void 0}}getPivotDimensionInfo(e,t){var i;const{colHeaderPaths:r,rowHeaderPaths:n}=this.getCellHeaderPaths(e,t),o=[];return r.length?r.forEach((e,t)=>{o.push({dimensionKey:e.dimensionKey,value:e.value,isPivotCorner:!1,indicatorKey:e.indicatorKey})}):n.length?n.forEach((e,t)=>{o.push({dimensionKey:e.dimensionKey,value:e.value,isPivotCorner:!1,indicatorKey:e.indicatorKey})}):this.isCornerHeader(e,t)&&(\\\"row\\\"===(null==(i=null==this?void 0:this.cornerSetting)?void 0:i.titleOnDimension)?o.push({dimensionKey:this.rowDimensionKeys[(this.rowHeaderTitle?e-1:e)-this.leftRowSeriesNumberColumnCount],isPivotCorner:!0}):o.push({dimensionKey:this.colDimensionKeys[this.columnHeaderTitle?t-1:t],isPivotCorner:!0})),o}getIndicatorKey(e,t){var i;return null==(i=this.getBody(e,t))?void 0:i.indicatorKey}getParentCellId(e,t){if(0!==t)return this.isColumnHeader(e,t)?this.getCellId(e,t-1):this.isRowHeader(e,t)?this.getCellId(e-1,t):void 0}getRowHeaderCellAddressByCellId(i){let r,n;if(this._rowHeaderCellIds.find((e,t)=>!!e.find((e,t)=>e===i&&(r=t,!0))&&(n=t,!0)),isValid_default(r)&&isValid_default(n))return{col:r,row:n+this.columnHeaderLevelCount}}canMoveHeaderPosition(e,t){if(!this.isSeriesNumberInHeader(t.col,t.row)&&!this.isSeriesNumberInHeader(e.col,e.row)&&!(e.col<0||e.row<0||t.col<0||t.row<0)){this.isSeriesNumberInBody(t.col,t.row)&&this.isSeriesNumberInBody(e.col,e.row)&&(e.col=e.col+this.leftRowSeriesNumberColumnCount+this.rowHeaderLevelCount-1,t.col=t.col+this.leftRowSeriesNumberColumnCount+this.rowHeaderLevelCount-1);var i=this.getCellRange(e.col,e.row);if(this.isColumnHeader(e.col,e.row))return this.getParentCellId(e.col,i.start.row)===this.getParentCellId(t.col,i.start.row);if(this.isRowHeader(e.col,e.row)){if(\\\"tree\\\"!==this.rowHierarchyType)return this.getParentCellId(i.start.col,e.row)===this.getParentCellId(i.start.col,t.row);{const r=cloneDeep(this.getCellHeaderPathsWidthTreeNode(e.col,e.row).rowHeaderPaths),n=cloneDeep(this.getCellHeaderPathsWidthTreeNode(t.col,t.row).rowHeaderPaths);if(r.pop(),n.pop(),r.length<=n.length){if(r.length===n.length)return!r.find((e,t)=>e.dimensionKey!==n[t].dimensionKey||e.value!==n[t].value);if(0<r.length)for(let e=0;e<r.length;e++)if(r[e].startInTotal!==n[e].startInTotal)return!1;return!0}}}}return!1}moveHeaderPosition(t,i){if(this.canMoveHeaderPosition(t,i)&&!this.isCellRangeEqual(t.col,t.row,i.col,i.row)){var e,r,n,o,a=this.getCellRange(t.col,t.row);if(this.isColumnHeader(t.col,t.row)){var l=a.end.col-a.start.col+1,s=this.getCellRange(i.col,a.start.row),h=i.col>=t.col?s.end.col-l+1:s.start.col;if(h===a.start.col)return null;for(let e=0;e<this._columnHeaderCellIds.length;e++){var d=this._columnHeaderCellIds[e].splice(a.start.col-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount,l);d.unshift(h-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount,0),Array.prototype.splice.apply(this._columnHeaderCellIds[e],d)}var u=this._columnWidths.splice(a.start.col-this.leftRowSeriesNumberColumnCount,l);return u.unshift(h-this.leftRowSeriesNumberColumnCount,0),Array.prototype.splice.apply(this._columnWidths,u),this.columnDimensionTree.movePosition(this.getCellHeaderPathsWidthTreeNode(t.col,t.row).colHeaderPaths.length-1,a.start.col-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount,s.start.col-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount),this.columnDimensionTree.reset(this.columnDimensionTree.tree.children,!0),this._CellHeaderPathMap=new Map,this._largeCellRangeCache.length=0,{sourceIndex:a.start.col,targetIndex:h,sourceSize:l,targetSize:s.end.col-s.start.col+1,moveType:\\\"column\\\"}}if(this.isRowHeader(t.col,t.row))return u=this.getCellHeaderPathsWidthTreeNode(t.col,t.row).rowHeaderPaths,s=this.getCellHeaderPathsWidthTreeNode(i.col,i.row).rowHeaderPaths,e=u[u.length-1],s=s[u.length-1],r=e.size,(n=i.row>=t.row?s.startInTotal+s.size-r:s.startInTotal)===a.start.row-this.columnHeaderLevelCount?null:((o=this._rowHeaderCellIds.splice(a.start.row-this.columnHeaderLevelCount,r)).unshift(n-this.currentPageStartIndex,0),Array.prototype.splice.apply(this._rowHeaderCellIds,o),(o=this._rowHeaderCellIds_FULL.splice(a.start.row-this.columnHeaderLevelCount+this.currentPageStartIndex,r)).unshift(n,0),Array.prototype.splice.apply(this._rowHeaderCellIds_FULL,o),this.rowDimensionTree.movePosition(u.length-1,a.start.row-this.columnHeaderLevelCount,n+(i.row>t.row?e.size-1:0)),this.rowDimensionTree.reset(this.rowDimensionTree.tree.children,!0),this._CellHeaderPathMap=new Map,this._largeCellRangeCache.length=0,{sourceIndex:a.start.row,targetIndex:n+this.columnHeaderLevelCount,sourceSize:r,targetSize:s.size,moveType:\\\"row\\\"})}return null}getCellAdressByHeaderPath(e){var h,d;let u,c,g=!1;if(Array.isArray(e)){if(e.length>this.rowDimensionKeys.length+this.colDimensionKeys.length)return;u=e.filter(e=>0<=this.colDimensionKeys.indexOf(e.dimensionKey)||0<=this.colDimensionKeys.indexOf(this.indicatorDimensionKey)&&e.indicatorKey),c=e.filter(e=>0<=this.rowDimensionKeys.indexOf(e.dimensionKey)||0<=this.rowDimensionKeys.indexOf(this.indicatorDimensionKey)&&e.indicatorKey)}else u=e.colHeaderPaths,c=e.rowHeaderPaths,\\\"body\\\"===(null==e?void 0:e.cellLocation)&&this._table.isPivotTable()&&(g=!0);if(Array.isArray(u)||Array.isArray(c)){null!=u&&u.sort((e,t)=>{var i;return this.colDimensionKeys.indexOf(null!=(i=e.dimensionKey)?i:this.indicatorDimensionKey)-this.colDimensionKeys.indexOf(null!=(i=t.dimensionKey)?i:this.indicatorDimensionKey)}),null!=c&&c.sort((e,t)=>{var i;return this.fullRowDimensionKeys.indexOf(null!=(i=e.dimensionKey)?i:this.indicatorDimensionKey)-this.fullRowDimensionKeys.indexOf(null!=(i=t.dimensionKey)?i:this.indicatorDimensionKey)});let e,i,t,r,n=!1;1<=(null==u?void 0:u.length)&&1<=(null==c?void 0:c.length)&&(n=!0);let o,a,l=this.rowTree,s=this.columnTree;if(u)for(let t=0;t<u.length;t++){var p=u[t];for(let e=0;e<s.length;e++){var f=s[e];if(!isValid_default(p.indicatorKey)&&f.dimensionKey===p.dimensionKey&&f.value===p.value||isValid_default(p.indicatorKey)&&f.indicatorKey===p.indicatorKey){s=f.children,(!n||s)&&n||(a=f);break}}}if(1<=(null==c?void 0:c.length))if(\\\"tree\\\"===this.rowHierarchyType){const v=c[c.length-1],C=this.headerObjects.filter(e=>((null==e?void 0:e.field)===v.dimensionKey||(null==e?void 0:e.field)===v.indicatorKey)&&(null==e?void 0:e.title)===v.value).map(e=>e.id),y=this._rowHeaderCellIds.filter(e=>0<=C.indexOf(e[e.length-1])).find(e=>{var t=this.findFullCellIds(e);return t.length===c.length&&t.every(e=>{const t=this._headerObjectMap[e];return c.find(e=>e.dimensionKey===t.field&&e.value===t.title)})});i=this._rowHeaderCellIds.indexOf(y)+this.columnHeaderLevelCount}else for(let t=0;t<c.length;t++){var m=c[t];for(let e=0;e<l.length;e++){var b=l[e];if(!isValid_default(m.indicatorKey)&&b.dimensionKey===m.dimensionKey&&b.value===m.value||isValid_default(m.indicatorKey)&&b.indicatorKey===m.indicatorKey&&(!m.value||b.value===m.value)){l=b.children,(!n||l&&!l.some(e=>\\\"axis\\\"===e.dimensionKey))&&n||(o=b);break}}}return(g||!n||(o||isValid_default(i))&&a)&&((o||g)&&(i=this.columnHeaderLevelCount,({startInTotal:d,level:h}=null!=(d=o)?d:defaultDimension),i+=null!=d?d:0,t=\\\"grid\\\"===this.rowHierarchyType?(this.rowHeaderTitle?h+1:h)+this.leftRowSeriesNumberColumnCount:0),(a||g)&&(e=this.rowHeaderLevelCount,({startInTotal:h,level:d}=null!=(d=a)?d:defaultDimension),e+=null!=h?h:0,r=this.columnHeaderTitle?d+1:d),isValid_default(e)||isValid_default(i))?{col:null!=e?e:t,row:null!=i?i:r}:void 0}}setChartInstance(e,t,i){var r,n=this.getCellHeaderPaths(e,t);let o;if(this.indicatorsAsCol){const a=null==(r=n.colHeaderPaths.find(e=>e.indicatorKey))?void 0:r.indicatorKey;o=null==(r=this._indicators)?void 0:r.find(e=>e.indicatorKey===a)}else{const l=null==(r=n.rowHeaderPaths.find(e=>e.indicatorKey))?void 0:r.indicatorKey;o=null==(n=this._indicators)?void 0:n.find(e=>e.indicatorKey===l)}\\\"function\\\"!=typeof(null==o?void 0:o.chartSpec)&&o&&(o.chartInstance=i)}getChartInstance(e,t){var i,r=this.getCellHeaderPaths(e,t);let n;if(this.indicatorsAsCol){const o=null==(i=r.colHeaderPaths.find(e=>e.indicatorKey))?void 0:i.indicatorKey;n=null==(i=this._indicators)?void 0:i.find(e=>e.indicatorKey===o)}else{const a=null==(i=r.rowHeaderPaths.find(e=>e.indicatorKey))?void 0:i.indicatorKey;n=null==(r=this._indicators)?void 0:r.find(e=>e.indicatorKey===a)}return null==n?void 0:n.chartInstance}checkHasChart(){return checkHasChart(this)}getDimension(t,e){var i;return\\\"column\\\"===e?null==(i=this.columnsDefine)?void 0:i.find(e=>\\\"string\\\"!=typeof e&&e.dimensionKey===t):\\\"row\\\"!==e||null==(i=this.rowsDefine)?void 0:i.find(e=>\\\"string\\\"!=typeof e&&e.dimensionKey===t)}getAxisConfigInPivotChart(e,t){if((this.isFrozenColumn(e,t)||this.isRightFrozenColumn(e,t))&&isHasCartesianChartInline(e,t,\\\"row\\\",this)||(this.isFrozenRow(e,t)||this.isBottomFrozenRow(e,t))&&isHasCartesianChartInline(e,t,\\\"col\\\",this))return getAxisConfigInPivotChart(e,t,this)}isEmpty(e,t){return!(!this._table.isPivotChart()||!this.isLeftBottomCorner(e,t)&&!this.isRightBottomCorner(e,t)&&!this.isRightTopCorner(e,t))}isAxisCell(e,t){if(this._table.isPivotChart()&&1<=this.indicatorKeys.length&&checkHasCartesianChart(this)){if(this.isBottomFrozenRow(e,t)&&isHasCartesianChartInline(e,t,\\\"col\\\",this)||this.isRightFrozenColumn(e,t)&&isHasCartesianChartInline(e,t,\\\"row\\\",this))return!0;if(this.isRowHeader(e,t)&&e===this.rowHeaderLevelCount-1&&isHasCartesianChartInline(e,t,\\\"row\\\",this))return!0;if(this.hasTwoIndicatorAxes&&this.indicatorsAsCol&&t===this.columnHeaderLevelCount-1&&isHasCartesianChartInline(e,t,\\\"col\\\",this))return!0}return!1}getChartAxes(e,t){if(isCartesianChart(e,t,this)||this.isAxisCell(e,t))return getChartAxes(e,t,this)}getRawChartSpec(e,t){return getRawChartSpec(e,t,this)}getChartSpec(e,t){return getChartSpec(e,t,this)}isShareChartSpec(e,t){return isShareChartSpec(e,t,this)}getChartDataId(e,t){return getChartDataId(e,t,this)}setPagination(e){var t,i;this.clearCellRangeMap(),this.pagination=e,\\\"grid\\\"===this.rowHierarchyType&&isValid_default(null==(t=this.pagination)?void 0:t.perPageCount)&&isValid_default(null==(t=this.pagination)?void 0:t.currentPage)?(!1===this.indicatorsAsCol&&(this.pagination.perPageCount=Math.ceil(this.pagination.perPageCount/this.indicatorKeys.length)*this.indicatorKeys.length),({perPageCount:t,currentPage:i}=this.pagination),this.currentPageStartIndex=t*(i||0),this.currentPageEndIndex=this.currentPageStartIndex+t,this._rowHeaderCellIds=null==(i=this._rowHeaderCellIds_FULL)?void 0:i.slice(this.currentPageStartIndex,this.currentPageEndIndex)):(this.currentPageStartIndex=0,this.currentPageEndIndex=this._rowHeaderCellIds_FULL.length,this._rowHeaderCellIds=null==(t=this._rowHeaderCellIds_FULL)?void 0:t.slice(this.currentPageStartIndex,this.currentPageEndIndex)),this.pagination&&(this.pagination.totalCount=null==(i=this._rowHeaderCellIds_FULL)?void 0:i.length)}release(){var e=this._table._getActiveChartInstance();null!=e&&e.release(),null!=(e=this._indicators)&&e.forEach(e=>{var t;null!=(t=e.chartInstance)&&t.release()})}getHeadNode(l){if(Array.isArray(l)){let i,r,n=this.rowTree,o=this.columnTree;for(let a=0;a<l.length;a++){var s=l[a];if((s.isPivotCorner||!s.value)&&a===l.length-1)return;let t=!1;for(let e=0;e<o.length;e++){var h=o[e];if(isValid_default(s.dimensionKey)&&h.dimensionKey===s.dimensionKey&&h.value===s.value||isValid_default(s.indicatorKey)&&h.indicatorKey===s.indicatorKey&&(h.value===s.value||!isValid_default(s.value)||!isValid_default(h.value))){o=h.children,r=h,t=!0;break}}if(!t)for(let e=0;e<n.length;e++){var d=n[e];if(isValid_default(s.dimensionKey)&&d.dimensionKey===s.dimensionKey&&d.value===s.value||isValid_default(s.indicatorKey)&&d.indicatorKey===s.indicatorKey&&(d.value===s.value||!isValid_default(s.value)||!isValid_default(d.value))){n=d.children,i=d;break}}}return i||r||void 0}}clearCellRangeMap(){this._largeCellRangeCache.length=0,this._CellHeaderPathMap=new Map}getDimensionKeyInChartSpec(e,t){var i,r;let n;if(!1===this.indicatorsAsCol)for(let e=0;e<this.indicatorsDefine.length;e++){var o=this.indicatorsDefine[e].chartSpec;if(o&&(n=null!=(i=o.xField)?i:null==(o=null==(i=null==o?void 0:o.series)?void 0:i[0])?void 0:o.xField))return n}else for(let t=0;t<this.indicatorsDefine.length;t++){var a=this.indicatorsDefine[t].chartSpec;if(a&&(n=null!=(r=a.yField)?r:null==(a=null==(r=null==a?void 0:a.series)?void 0:r[0])?void 0:a.yField))return n}return null}_generateChartState(){return{vtable_selected:{filter:i=>{var e;return 1<=this._table._selectedDataItemsInChart.length?!!this._table._selectedDataItemsInChart.find(e=>{for(const t in e)if(e[t]!==i[t])return!1;return!0}):!(null==(e=this._table._selectedDimensionInChart)||!e.length||!this._table._selectedDimensionInChart.every(e=>i[e.key]===e.value))}},vtable_selected_reverse:{filter:i=>{var e;return 1<=this._table._selectedDataItemsInChart.length?!this._table._selectedDataItemsInChart.find(e=>{for(const t in e)if(e[t]!==i[t])return!1;return!0}):!(null==(e=this._table._selectedDimensionInChart)||!e.length||this._table._selectedDimensionInChart.every(e=>i[e.key]===e.value))}}}}updateDataStateToChartInstance(e){e=e||this._table._getActiveChartInstance();const t=this._generateChartState();this._indicators.forEach(e=>{e.chartInstance.updateState(t)}),null!=e&&e.updateState(t)}updateDataStateToActiveChartInstance(e){e=e||this._table._getActiveChartInstance();var t=this._generateChartState();null!=e&&e.updateState(t)}getIndicatorKeyInChartSpec(e,t){const i=this.getRawChartSpec(e,t),r=[];if(i){if(i.series||i.xField||i.yField)return!1===this.indicatorsAsCol?i.series?i.series.forEach(e=>{var t=e.yField;r.push(t)}):r.push(i.yField):i.series?i.series.forEach(e=>{var t=e.xField;r.push(t)}):r.push(i.xField),r;if(i.valueField&&r.push(i.valueField),1<=r.length)return r}return null}getOptimunHeightForChart(e){var t,i,r=this.getCellHeaderPaths(this.rowHeaderLevelCount,e).rowHeaderPaths;let n,o;for(const l in this.dataset.collectValuesBy)if(\\\"yField\\\"===this.dataset.collectValuesBy[l].type&&!this.dataset.collectValuesBy[l].range){n=null==(t=this.dataset.collectedValues[l])?void 0:t[r.map(e=>e.value).join(this.dataset.stringJoinChar)];break}o=this._chartItemBandSize?scaleWholeRangeSize2(null!=(i=null==n?void 0:n.length)?i:0,this._chartItemBandSize,this._chartPaddingInner,this._chartPaddingOuter):(i=this._chartItemSpanSize||25,(null!=(a=null==n?void 0:n.length)?a:0)*(i+i/3));var a=getQuadProps(null!=(i=null!=(a=this._chartPadding)?a:this._table.theme.bodyStyle.padding)?i:0);return o+a[0]+a[2]}getOptimunWidthForChart(e){var t,i,r=this.getCellHeaderPaths(e,this.columnHeaderLevelCount).colHeaderPaths;let n,o;for(const l in this.dataset.collectValuesBy)if(\\\"xField\\\"===this.dataset.collectValuesBy[l].type&&!this.dataset.collectValuesBy[l].range){n=null==(t=this.dataset.collectedValues[l])?void 0:t[r.map(e=>e.value).join(this.dataset.stringJoinChar)];break}o=this._chartItemBandSize?scaleWholeRangeSize2(null!=(i=null==n?void 0:n.length)?i:0,this._chartItemBandSize,this._chartPaddingInner,this._chartPaddingOuter):(i=this._chartItemSpanSize||25,(null!=(a=null==n?void 0:n.length)?a:0)*(i+i/3));var a=getQuadProps(null!=(i=null!=(a=this._chartPadding)?a:this._table.theme.bodyStyle.padding)?i:0);return o+a[1]+a[3]}get leftAxesCount(){var e;return!this._table.isPivotChart()||!1===(null==(e=this._table.pivotChartAxes.find(e=>\\\"left\\\"===e.orient))?void 0:e.visible)?0:(this.indicatorsAsCol,1)}get topAxesCount(){var e;return this._table.isPivotChart()&&!1!==(null==(e=this._table.pivotChartAxes.find(e=>\\\"top\\\"===e.orient))?void 0:e.visible)&&this.indicatorsAsCol&&this.hasTwoIndicatorAxes?1:0}get rightAxesCount(){return this.rightFrozenColCount}get bottomAxesCount(){return this.bottomFrozenRowCount}getColKeysPath(e,t){const i=this.getCellHeaderPaths(e,t),r=[];return i.colHeaderPaths.length&&i.colHeaderPaths.forEach(e=>{e.dimensionKey&&r.push(e.value)}),null==r?void 0:r.join(this.dataset.stringJoinChar)}getRowKeysPath(e,t){const i=this.getCellHeaderPaths(e,t),r=[];return i.rowHeaderPaths.length&&i.rowHeaderPaths.forEach(e=>{e.dimensionKey&&r.push(e.value)}),null==r?void 0:r.join(this.dataset.stringJoinChar)}getIndicatorInfo(t,i=\\\"\\\"){var e;return null==(e=this.indicatorsDefine)?void 0:e.find(e=>\\\"string\\\"!=typeof e&&(t?e.indicatorKey===t:!!i&&e.title===i))}getLayoutColumnTree(){var e=[];return generateLayoutTree(e,this.columnDimensionTree.tree.children),e}getLayoutRowTree(){var e=[];return generateLayoutTree(e,this.rowDimensionTree.tree.children),e}getLayoutColumnTreeCount(){return countLayoutTree(this.columnDimensionTree.tree.children,\\\"tree\\\"===this.rowHierarchyType)}getLayoutRowTreeCount(){var e;let i=countLayoutTree(this.rowDimensionTree.tree.children,\\\"tree\\\"===this.rowHierarchyType);return null!=(e=this.extensionRows)&&e.forEach(e=>{var t;\\\"function\\\"!=typeof e.rowTree&&(t=countLayoutTree(e.rowTree,!0),i*=t)}),i}resetHeaderTree(){this._rowHeaderCellIds_FULL=[],this._columnHeaderCellIds=[];var e=this.dataset;this.rowTree=e.rowHeaderTree,this.columnTree=e.colHeaderTree,this.columnDimensionTree=new DimensionTree(null!=(e=this.columnTree)?e:[],this.sharedVar),this.rowDimensionTree=new DimensionTree(null!=(e=this.rowTree)?e:[],this.sharedVar,this.rowHierarchyType,\\\"tree\\\"===this.rowHierarchyType?this.rowExpandLevel:void 0),this._generateColHeaderIds(),this.colIndex=0,this._generateRowHeaderIds(),this.resetColumnHeaderLevelCount(),this._rowHeaderCellIds_FULL=transpose(this._rowHeaderCellIds_FULL),this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{}),this.setPagination(this.pagination)}isSeriesNumberInHeader(e,t){return 0<this.leftRowSeriesNumberColumnCount&&0<=e&&0<=t&&e<this.leftRowSeriesNumberColumnCount&&t<this.headerLevelCount||0<this.rightRowSeriesNumberColumnCount&&0<=t&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&t<this.headerLevelCount}isSeriesNumberInBody(e,t){return 0<this.leftRowSeriesNumberColumnCount&&0<=e&&e<this.leftRowSeriesNumberColumnCount&&t>=this.headerLevelCount||0<this.rightRowSeriesNumberColumnCount&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&t>=this.headerLevelCount}isSeriesNumber(e,t){return 0<this.leftRowSeriesNumberColumnCount&&0<=e&&0<=t&&e<this.leftRowSeriesNumberColumnCount||0<this.rightRowSeriesNumberColumnCount&&0<=t&&e>=this.colCount-this.rightRowSeriesNumberColumnCount}getSeriesNumberHeader(e,t){return 0<this.leftRowSeriesNumberColumnCount&&0<=e&&e<this.leftRowSeriesNumberColumnCount&&t<this.headerLevelCount?Object.assign({},this.leftRowSeriesNumberColumn[e],{style:this._table.internalProps.rowSeriesNumber.headerStyle}):0<this.rightRowSeriesNumberColumnCount&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&t<this.headerLevelCount&&t<this.headerLevelCount?this.rightRowSeriesNumberColumn[e-(this.colCount-this.rightRowSeriesNumberColumnCount)]:void 0}getSeriesNumberBody(e,t){return 0<this.leftRowSeriesNumberColumnCount&&0<=e&&e<this.leftRowSeriesNumberColumnCount&&t>=this.headerLevelCount?this.leftRowSeriesNumberColumn[e]:0<this.rightRowSeriesNumberColumnCount&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&t>=this.headerLevelCount?this.rightRowSeriesNumberColumn[e-(this.colCount-this.rightRowSeriesNumberColumnCount)]:void 0}changeTreeNodeTitle(e,t,i){var r=this.getCellHeaderPaths(e,t),r=(0<r.rowHeaderPaths.length?this.getHeadNode(r.rowHeaderPaths.slice(0,r.rowHeaderPaths.length)).value=i:0<r.colHeaderPaths.length&&(this.getHeadNode(r.colHeaderPaths.slice(0,r.colHeaderPaths.length)).value=i),this.getCellId(e,t));this._headerObjectMap[r].title=i}};function scaleWholeRangeSize2(e,t,i,r){var n=bandSpace2(e,i=1===i?0:i,r);return Math.ceil(n*(t/(1-i)))}function bandSpace2(e,t,i){var r=1===e?e+2*i:e-t+2*i;return e?0<r?r:1:0}init_esbuild_inject();var FlatDataToObjects=class{constructor(e,t){this.tree={},this.beforeChangedTree={},this.colFlatKeys={},this.rowFlatKeys={},this.stringJoinChar=String.fromCharCode(0),this.rowsIsTotal=[],this.colsIsTotal=[],this.dataConfig=e,t&&(this.records=t,\\\"undefined\\\"!=typeof window&&window.performance.now(),this.setRecords(t),\\\"undefined\\\"!=typeof window)&&window.performance.now()}changeDataConfig(e){this.dataConfig=e}setRecords(e){this.processRecords()}processRecords(){for(let t=0,i=this.records.length;t<i;t++){var e=this.records[t];this.processRecord(e)}}processRecord(n){var e;const o=[],a=[];for(let r=0,l=this.dataConfig.rows.length;r<l;r++){var t=this.dataConfig.rows[r];void 0!==n[t]&&t!==this.dataConfig.indicatorDimensionKey&&a.push(n[t])}for(let s=0,h=this.dataConfig.columns.length;s<h;s++){var i=this.dataConfig.columns[s];void 0!==n[i]&&i!==this.dataConfig.indicatorDimensionKey&&o.push(n[i])}null!=(e=this.dataConfig.indicators)&&e.forEach(e=>{var t=n[e],i=(void 0!==t&&(this.dataConfig.indicatorsAsCol?o:a).push(e),a.join(this.stringJoinChar)),r=o.join(this.stringJoinChar);0===a.length||this.rowFlatKeys[i]||(this.rowFlatKeys[i]=1),0===o.length||this.colFlatKeys[r]||(this.colFlatKeys[r]=1),0===o.length&&0===a.length||(this.tree[i]||(this.tree[i]={}),void 0!==t&&(this.tree[i][r]={value:t,record:n},(this.dataConfig.indicatorsAsCol?o:a).pop()))})}getTreeNode(r=[],n=[],o,e=!0){var t;let a,l;if(\\\"string\\\"==typeof r)a=r;else{let i=!1;r.map((e,t)=>{e===o&&(r.splice(t,1),i=!0)}),i&&r.push(o),a=r.join(this.stringJoinChar)}if(\\\"string\\\"==typeof n)l=n;else{let i=!1;n.map((e,t)=>{e===o&&(n.splice(t,1),i=!0)}),i&&n.push(o),l=n.join(this.stringJoinChar)}return e?null!=(t=null==(t=null==(t=this.tree)?void 0:t[a])?void 0:t[l])?t:void 0:isValid_default(null==(t=this.beforeChangedTree[a])?void 0:t[l])?{value:this.beforeChangedTree[a][l].value,record:this.beforeChangedTree[a][l].record}:void 0}changeTreeNodeValue(r=[],n=[],o,e){var t;let a,l;if(\\\"string\\\"==typeof r)a=r;else{let i=!1;r.map((e,t)=>{e===o&&(r.splice(t,1),i=!0)}),i&&r.push(o),a=r.join(this.stringJoinChar)}if(\\\"string\\\"==typeof n)l=n;else{let i=!1;n.map((e,t)=>{e===o&&(n.splice(t,1),i=!0)}),i&&n.push(o),l=n.join(this.stringJoinChar)}var i=null==(i=null==(i=this.tree[a])?void 0:i[l])?void 0:i.value,s=Object.assign({},null==(s=null==(s=this.tree[a])?void 0:s[l])?void 0:s.record);null!=(t=null==(t=this.tree[a])?void 0:t[l])&&t.record?(this.tree[a][l].record[o]=e,this.tree[a][l].value=e):(this.tree[a]||(this.tree[a]={}),this.tree[a][l]={record:this._buildRecord(r,n,o,e),value:e}),null!=(t=this.beforeChangedTree[a])&&t[l]||(this.beforeChangedTree[a]={},this.beforeChangedTree[a][l]={record:void 0,value:void 0},this.beforeChangedTree[a][l].record=s,this.beforeChangedTree[a][l].value=i)}_buildRecord(i=[],r=[],e,t){const n={},o=this.dataConfig.rows,a=this.dataConfig.columns;return o.forEach((e,t)=>{e!==this.dataConfig.indicatorDimensionKey&&(n[e]=i[t])}),a.forEach((e,t)=>{e!==this.dataConfig.indicatorDimensionKey&&(n[e]=r[t])}),n[e]=t,this.records.push(n),n}addRecords(e){for(let i=0,r=e.length;i<r;i++){var t=e[i];this.processRecord(t)}this.records.push(e)}changeRecordFieldValue(i,r,n){let e=!1;for(let t=0;t<this.dataConfig.indicators.length;t++)this.dataConfig.indicators[t]===i&&(e=!0);if(!e){for(let e=0,t=this.records.length;e<t;e++){var o=this.records[e];o[i]===r&&(o[i]=n)}this.rowFlatKeys={},this.colFlatKeys={},this.tree={},this.processRecords()}}},Dataset=(init_esbuild_inject(),class{constructor(i,r,n,o,a,l,e,s,h,d,u){var c;if(this.tree={},this.changedTree={},this.colFlatKeys={},this.rowFlatKeys={},this.colKeys=[],this.rowKeys=[],this.rowOrder=\\\"key_a_to_z\\\",this.colOrder=\\\"key_a_to_z\\\",this.sorted=!1,this.indicatorStatistics=[],this.aggregators={},this.stringJoinChar=String.fromCharCode(0),this.rowsIsTotal=[],this.colsIsTotal=[],this.collectedValues={},this.cacheCollectedValues={},this.totalRecordsTree={},this.registerAggregators(),this.dataConfig=i,this.rowHierarchyType=null!=s?s:\\\"grid\\\",this.sortRules=null==(c=this.dataConfig)?void 0:c.sortRules,this.aggregationRules=null==(c=this.dataConfig)?void 0:c.aggregationRules,this.derivedFieldRules=null==(c=this.dataConfig)?void 0:c.derivedFieldRules,this.mappingRules=null==(c=this.dataConfig)?void 0:c.mappingRules,this.totals=null==(c=this.dataConfig)?void 0:c.totals,this.rows=r,this.columns=n,this.indicatorKeys=o,this.indicatorsAsCol=l,this.indicators=a,this.customColTree=h,this.customRowTree=d,this.colGrandTotalLabel=null!=(c=null==(c=null==(c=this.totals)?void 0:c.column)?void 0:c.grandTotalLabel)?c:\\\"总计\\\",this.colSubTotalLabel=null!=(c=null==(c=null==(c=this.totals)?void 0:c.column)?void 0:c.subTotalLabel)?c:\\\"小计\\\",this.rowGrandTotalLabel=null!=(c=null==(c=null==(c=this.totals)?void 0:c.row)?void 0:c.grandTotalLabel)?c:\\\"总计\\\",this.rowSubTotalLabel=null!=(c=null==(c=null==(c=this.totals)?void 0:c.row)?void 0:c.subTotalLabel)?c:\\\"小计\\\",this.collectValuesBy=null==(c=this.dataConfig)?void 0:c.collectValuesBy,this.needSplitPositiveAndNegative=null!=u&&u,this.rowsIsTotal=new Array(null!=(c=null==(c=this.rows)?void 0:c.length)?c:0).fill(!1),this.colsIsTotal=new Array(null!=(c=null==(c=this.columns)?void 0:c.length)?c:0).fill(!1),null!=(c=this.totals)&&c.row&&!1!==this.totals.row.showSubTotals)for(let e=0,t=null==(c=null==(c=null==(c=this.totals)?void 0:c.row)?void 0:c.subTotalsDimensions)?void 0:c.length;e<t;e++){var g=this.totals.row.subTotalsDimensions[e],g=this.rows.indexOf(g);this.rowsIsTotal[g]=!0}if(null!=(c=this.totals)&&c.column&&!1!==this.totals.column.showSubTotals)for(let e=0,t=null==(c=null==(c=null==(c=this.totals)?void 0:c.column)?void 0:c.subTotalsDimensions)?void 0:c.length;e<t;e++){var p=this.totals.column.subTotalsDimensions[e],p=this.columns.indexOf(p);this.colsIsTotal[p]=!0}this.setRecords(e)}setRecords(e){var t;this.records=e,this.collectedValues={},this.cacheCollectedValues={},this.totalRecordsTree={},this.tree={},this.colFlatKeys={},this.rowFlatKeys={},this.colKeys=[],this.rowKeys=[],e&&(this.records=e,\\\"undefined\\\"!=typeof window&&window.performance.now(),this.processRecords(),this.processCollectedValuesWithSumBy(),this.generateCollectedValuesSortRule(),this.processCollectedValuesWithSortBy(),\\\"undefined\\\"!=typeof window&&window.performance.now(),\\\"undefined\\\"!=typeof window&&window.performance.now(),this.totalStatistics(),\\\"undefined\\\"!=typeof window&&window.performance.now(),\\\"undefined\\\"!=typeof window&&window.performance.now(),this.sortKeys(),\\\"undefined\\\"!=typeof window&&window.performance.now(),\\\"undefined\\\"!=typeof window&&window.performance.now(),this.customRowTree?(this.indicatorsAsCol||(this.customRowTree=this._adjustCustomTree(this.customRowTree)),this.rowHeaderTree=this.customRowTree):\\\"tree\\\"===this.rowHierarchyType?this.rowHeaderTree=this.ArrToTree1(this.rowKeys,this.rows,this.indicatorsAsCol?void 0:this.indicators,(null==(t=null==(t=this.totals)?void 0:t.row)?void 0:t.showGrandTotals)||!this.indicatorsAsCol&&0===this.columns.length||this.indicatorsAsCol&&0===this.rows.length,this.rowGrandTotalLabel):this.rowHeaderTree=this.ArrToTree(this.rowKeys,this.rows,this.indicatorsAsCol?void 0:this.indicators,this.rowsIsTotal,(null==(t=null==(t=this.totals)?void 0:t.row)?void 0:t.showGrandTotals)||this.indicatorsAsCol&&0===this.rows.length,this.rowGrandTotalLabel,this.rowSubTotalLabel,null!=(t=null==(t=null==(t=this.totals)?void 0:t.row)?void 0:t.showGrandTotalsOnTop)&&t,null!=(t=null==(t=null==(t=this.totals)?void 0:t.row)?void 0:t.showSubTotalsOnTop)&&t),this.customColTree?(this.indicatorsAsCol&&(this.customColTree=this._adjustCustomTree(this.customColTree)),this.colHeaderTree=this.customColTree):this.colHeaderTree=this.ArrToTree(this.colKeys,this.columns,this.indicatorsAsCol?this.indicators:void 0,this.colsIsTotal,(null==(t=null==(t=this.totals)?void 0:t.column)?void 0:t.showGrandTotals)||!this.indicatorsAsCol&&0===this.columns.length,this.colGrandTotalLabel,this.colSubTotalLabel,null!=(t=null==(t=null==(t=this.totals)?void 0:t.column)?void 0:t.showGrandTotalsOnLeft)&&t,null!=(t=null==(t=null==(t=this.totals)?void 0:t.column)?void 0:t.showSubTotalsOnLeft)&&t),\\\"undefined\\\"!=typeof window&&window.performance.now(),null!=(t=this.dataConfig))&&t.isPivotChart&&this.cacheDeminsionCollectedValues()}registerAggregator(e,t){this.aggregators[e]=t}registerAggregators(){this.registerAggregator(AggregationType.RECORD,RecordAggregator),this.registerAggregator(AggregationType.SUM,SumAggregator),this.registerAggregator(AggregationType.COUNT,CountAggregator),this.registerAggregator(AggregationType.MAX,MaxAggregator),this.registerAggregator(AggregationType.MIN,MinAggregator),this.registerAggregator(AggregationType.AVG,AvgAggregator),this.registerAggregator(AggregationType.NONE,NoneAggregator)}processCollectedValuesWithSumBy(){var e;for(const n in this.collectedValues)if(null!=(e=this.collectValuesBy[n])&&e.sumBy)for(const o in this.collectedValues[n]){let e;\\\"sum\\\"===(null==(r=this.collectValuesBy[n])?void 0:r.extendRange)?(e=Object.values(this.collectedValues[n][o]).reduce((e,t)=>e+t.value(),0),e+=Math.round(e/20)):(e=Object.values(this.collectedValues[n][o]).reduce((e,t)=>t.value()>e?t.value():e,Number.MIN_SAFE_INTEGER),\\\"max\\\"===(null==(r=this.collectValuesBy[n])?void 0:r.extendRange)?e+=Math.round(e/20):\\\"number\\\"==typeof(null==(r=this.collectValuesBy[n])?void 0:r.extendRange)&&(e=Math.max(e,null==(r=this.collectValuesBy[n])?void 0:r.extendRange)));var r=Object.values(this.collectedValues[n][o]).reduce((e,t)=>t.value()<e?t.value():e,Number.MAX_SAFE_INTEGER);let t,i;this.needSplitPositiveAndNegative&&(t=Object.values(this.collectedValues[n][o]).reduce((e,t)=>t.positiveValue()>e?t.positiveValue():e,Number.MIN_SAFE_INTEGER),i=Object.values(this.collectedValues[n][o]).reduce((e,t)=>t.negativeValue()<e?t.negativeValue():e,Number.MAX_SAFE_INTEGER)),this.collectedValues[n][o]={},this.collectedValues[n][o].max=e,this.collectedValues[n][o].min=r,this.needSplitPositiveAndNegative&&(this.collectedValues[n][o].positiveMax=t,this.collectedValues[n][o].negativeMin=i)}}processCollectedValuesWithSortBy(){var e;for(const r in this.collectedValues)if(null!=(e=this.collectValuesBy[r])&&e.sortBy)for(const t in this.collectedValues[r])this.collectedValues[r][t]=this.collectedValues[r][t].sort((e,t)=>{var i;return(null==(i=this.collectValuesBy[r])?void 0:i.sortBy.indexOf(e))-(null==(i=this.collectValuesBy[r])?void 0:i.sortBy.indexOf(t))})}generateCollectedValuesSortRule(){for(const t in this.collectedValues)if(this.collectValuesBy[t]&&!this.collectValuesBy[t].sortBy){let e=[];for(const i in this.collectedValues[t])Array.isArray(this.collectedValues[t][i])&&(e.push(...this.collectedValues[t][i]),e=Array.from(new Set(e)));0<e.length&&(this.collectValuesBy[t].sortBy=e)}}processRecords(){var i;let r=!1;if(1<=(null==(i=null==(i=this.dataConfig)?void 0:i.filterRules)?void 0:i.length)&&(r=!0),Array.isArray(this.records))for(let e=0,t=this.records.length;e<t;e++){var n=this.records[e];r&&!this.filterRecord(n)||this.processRecord(n)}else for(const a in this.records)for(let e=0,t=this.records[a].length;e<t;e++){var o=this.records[a][e];r&&!this.filterRecord(o)||this.processRecord(o,a)}this.rowFlatKeys={},this.colFlatKeys={}}filterRecord(e){let t=!0;for(let n=0;n<this.dataConfig.filterRules.length;n++){var i=null==(i=this.dataConfig)?void 0:i.filterRules[n];if(i.filterKey){var r=e[i.filterKey];if(-1===i.filteredValues.indexOf(r)){t=!1;break}}else if(null==(r=i.filterFunc)||!r.call(i,e)){t=!1;break}}return t}processRecord(i,e){var r,n,o,a,l,t,s,h,d;null!=(n=this.derivedFieldRules)&&n.forEach((e,t)=>{i[e.fieldName]=e.derivedFunc(i)});for(const _ in this.collectValuesBy)i[_]&&(this.collectedValues[_]||(this.collectedValues[_]={}),t=this.collectValuesBy[_].by.map(e=>i[e]).join(this.stringJoinChar),this.collectedValues[_][t]||(this.collectValuesBy[_].sumBy?this.collectedValues[_][t]={}:this.collectValuesBy[_].range?this.collectedValues[_][t]={min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER}:this.collectedValues[_][t]=[]),this.collectValuesBy[_].sumBy?(s=this.collectValuesBy[_].sumBy.map(e=>i[e]).join(this.stringJoinChar),this.collectedValues[_][t][s]||(this.collectedValues[_][t][s]=new this.aggregators[AggregationType.SUM](_,void 0,void 0,this.needSplitPositiveAndNegative)),this.collectedValues[_][t][s].push(i)):this.collectValuesBy[_].range?(s=this.collectedValues[_][t],d=Math.max(i[_],s.max),h=Math.min(i[_],s.min),isNaN(d)||(s.max=d,s.min=h)):-1===(d=this.collectedValues[_][t]).indexOf(i[_])&&d.push(i[_]));var u=[],c=[];let g=!1;for(let w=0,x=this.rows.length;w<x;w++){var p=this.rows[w];if(p in i)c.push(i[p]);else{if(null!=(p=null==(p=null==(p=this.dataConfig)?void 0:p.totals)?void 0:p.row)&&p.showGrandTotals&&0===w&&!this.rows.find(e=>e in i)){c.push(this.rowGrandTotalLabel),g=!0;break}if(0<=(null==(p=null==(p=null==(p=this.dataConfig)?void 0:p.totals)?void 0:p.row)?void 0:p.subTotalsDimensions.indexOf(this.rows[w-1]))){\\\"grid\\\"===this.rowHierarchyType&&c.push(this.rowSubTotalLabel),g=!0;break}}}for(let S=0,A=this.columns.length;S<A;S++){var f=this.columns[S];if(f in i)u.push(i[f]);else{if(null!=(f=null==(f=null==(f=this.dataConfig)?void 0:f.totals)?void 0:f.column)&&f.showGrandTotals&&0===S&&!this.columns.find(e=>e in i)){u.push(this.colGrandTotalLabel),g=!0;break}if(0<=(null==(f=null==(f=null==(f=this.dataConfig)?void 0:f.totals)?void 0:f.column)?void 0:f.subTotalsDimensions.indexOf(this.columns[S-1]))){u.push(this.colSubTotalLabel),g=!0;break}}}var m,b=c.join(this.stringJoinChar),v=u.join(this.stringJoinChar);if(g){this.totalRecordsTree[b]||(this.totalRecordsTree[b]={}),this.totalRecordsTree[b][v]||(this.totalRecordsTree[b][v]=[]);for(let t=0;t<this.indicatorKeys.length;t++){var C=this.getAggregatorRule(this.indicatorKeys[t]);null!=(r=null==(r=this.totalRecordsTree[b])?void 0:r[v])&&r[t]||(this.totalRecordsTree[b][v][t]=new this.aggregators[null!=(r=null==C?void 0:C.aggregationType)?r:AggregationType.SUM](null!=(r=null==C?void 0:C.field)?r:this.indicatorKeys[t],null!=(r=null==C?void 0:C.formatFun)?r:null==(r=null==(C=this.indicators)?void 0:C.find(e=>\\\"string\\\"!=typeof e&&e.indicatorKey===this.indicatorKeys[t]))?void 0:r.format)),this.indicatorKeys[t]in i&&null!=(r=null==(C=this.totalRecordsTree[b])?void 0:C[v])&&r[t].push(i)}}else{0===c.length||this.rowFlatKeys[b]||(this.rowKeys.push(c),this.rowFlatKeys[b]=1),0===u.length||this.colFlatKeys[v]||(this.colKeys.push(u),this.colFlatKeys[v]=1),this.tree[b]||(this.tree[b]={}),null!=(n=this.tree[b])&&n[v]||(this.tree[b][v]=[]);for(let t=0;t<this.indicatorKeys.length;t++){var y=this.getAggregatorRule(this.indicatorKeys[t]);null!=(o=null==(o=this.tree[b])?void 0:o[v])&&o[t]||(this.tree[b][v][t]=new this.aggregators[null!=(o=null==y?void 0:y.aggregationType)?o:AggregationType.SUM](null!=(o=null==y?void 0:y.field)?o:this.indicatorKeys[t],null!=(o=null==y?void 0:y.formatFun)?o:null==(o=null==(o=this.indicators)?void 0:o.find(e=>\\\"string\\\"!=typeof e&&e.indicatorKey===this.indicatorKeys[t]))?void 0:o.format)),e?this.indicatorKeys[t]===e&&null!=(o=null==(o=this.tree[b])?void 0:o[v])&&o[t].push(i):null!=y&&y.field?\\\"string\\\"==typeof(null==y?void 0:y.field)?(null==y?void 0:y.field)in i&&null!=(o=null==(o=this.tree[b])?void 0:o[v])&&o[t].push(i):null!=y&&y.field.find(e=>e in i)&&null!=(y=null==(o=this.tree[b])?void 0:o[v])&&y[t].push(i):this.indicatorKeys[t]in i&&null!=(y=null==(o=this.tree[b])?void 0:o[v])&&y[t].push(i)}if(this.mappingRules)for(let t=0;t<this.indicatorKeys.length;t++)this.indicatorStatistics[t]||(m=this.getAggregatorRule(this.indicatorKeys[t]),this.indicatorStatistics[t]={max:new this.aggregators[AggregationType.MAX](this.indicatorKeys[t]),min:new this.aggregators[AggregationType.MIN](this.indicatorKeys[t]),total:new this.aggregators[null!=(a=null==m?void 0:m.aggregationType)?a:AggregationType.SUM](null!=(a=null==m?void 0:m.field)?a:this.indicatorKeys[t],null!=(a=null==m?void 0:m.formatFun)?a:null==(a=null==(m=this.indicators)?void 0:m.find(e=>\\\"string\\\"!=typeof e&&e.indicatorKey===this.indicatorKeys[t]))?void 0:a.format)}),this.indicatorStatistics[t].max.push(null==(a=null==(m=this.tree[b])?void 0:m[v])?void 0:a[t].value()),this.indicatorStatistics[t].min.push(null==(l=null==(l=this.tree[b])?void 0:l[v])?void 0:l[t].value()),this.indicatorStatistics[t].total.push(i)}}updateSortRules(e){var t;this.sorted=!1,this.sortRules=e,this.sortKeys(),this.customRowTree||(\\\"tree\\\"===this.rowHierarchyType?this.rowHeaderTree=this.ArrToTree1(this.rowKeys,this.rows,this.indicatorsAsCol?void 0:this.indicators,(null==(t=null==(t=this.totals)?void 0:t.row)?void 0:t.showGrandTotals)||!this.indicatorsAsCol&&0===this.columns.length||this.indicatorsAsCol&&0===this.rows.length,this.rowGrandTotalLabel):this.rowHeaderTree=this.ArrToTree(this.rowKeys,this.rows,this.indicatorsAsCol?void 0:this.indicators,this.rowsIsTotal,(null==(t=null==(t=this.totals)?void 0:t.row)?void 0:t.showGrandTotals)||this.indicatorsAsCol&&0===this.rows.length,this.rowGrandTotalLabel,this.rowSubTotalLabel,null!=(t=null==(t=null==(t=this.totals)?void 0:t.row)?void 0:t.showGrandTotalsOnTop)&&t,null!=(t=null==(t=null==(t=this.totals)?void 0:t.row)?void 0:t.showSubTotalsOnTop)&&t)),this.customColTree||(this.colHeaderTree=this.ArrToTree(this.colKeys,this.columns,this.indicatorsAsCol?this.indicators:void 0,this.colsIsTotal,(null==(t=null==(t=this.totals)?void 0:t.column)?void 0:t.showGrandTotals)||!this.indicatorsAsCol&&0===this.columns.length,this.colGrandTotalLabel,this.colSubTotalLabel,null!=(t=null==(t=null==(t=this.totals)?void 0:t.column)?void 0:t.showGrandTotalsOnLeft)&&t,null!=(t=null==(t=null==(t=this.totals)?void 0:t.column)?void 0:t.showSubTotalsOnLeft)&&t))}updateFilterRules(e,t=!1){var i;if(this.filterRules=e,t)this.tree={};else for(const r in this.tree)for(const n in this.tree[r])for(let e=0;e<this.tree[r][n].length;e++)this.tree[r][n][e].reset();this.collectedValues={},this.processRecords(),this.processCollectedValuesWithSumBy(),this.processCollectedValuesWithSortBy(),null!=(i=this.dataConfig)&&i.isPivotChart&&this.cacheDeminsionCollectedValues()}getAggregatorRule(i){var e;return null==(e=this.aggregationRules)?void 0:e.find((e,t)=>i===e.indicatorKey)}getAggregator(e=[],t=[],i,r=!0){var n,o=this.indicatorKeys.indexOf(i),a=\\\"string\\\"==typeof e?e:e.join(this.stringJoinChar),l=\\\"string\\\"==typeof t?t:t.join(this.stringJoinChar),s=null==(s=null==(s=this.tree[a])?void 0:s[l])?void 0:s[o];if(r&&isValid_default(null==(n=null==(n=this.changedTree[a])?void 0:n[l])?void 0:n[o])){const h=this.changedTree[a][l][o];return s?{value:()=>h,formatValue:s.formatValue,formatFun:s.formatFun,records:s.records,className:\\\"\\\",recalculate(){},push(){},clearCacheValue(){},reset(){}}:{value:()=>h,className:\\\"\\\",push(){},recalculate(){},formatValue:()=>h,clearCacheValue(){},reset(){}}}return s||{className:\\\"\\\",push(){},recalculate(){},value:()=>null,formatValue:()=>\\\"\\\",clearCacheValue(){},reset(){}}}sortKeys(){const i=this;if(!this.sorted){this.sorted=!0;const r=function(e,t){return i.getAggregator(e,t,\\\"\\\").value()};switch(this.rowOrder){case\\\"value_a_to_z\\\":this.rowKeys.sort(function(e,t){return naturalSort(r(e,[]),r(t,[]))});break;case\\\"value_z_to_a\\\":this.rowKeys.sort(function(e,t){return-naturalSort(r(e,[]),r(t,[]))});break;default:this.rowKeys.sort(this.arrSort(this.rows,!0))}switch(this.colOrder){case\\\"value_a_to_z\\\":this.colKeys.sort(function(e,t){return naturalSort(r([],e),r([],t))});break;case\\\"value_z_to_a\\\":this.colKeys.sort(function(e,t){return-naturalSort(r([],e),r([],t))});break;default:var e=this.arrSort(this.columns,!1);this.colKeys.sort(e)}}}arrSort(a,l){let n;const s=this,h=(function(e){var i=[];for(let r=0,t=a.length;r<t;r++){n=a[r];if(s.sortRules)for(let e=0,t=s.sortRules.length;e<t;e++)s.sortRules[e].sortField===n&&i.push({field:n,fieldIndex:r,sortRule:s.sortRules[e],func:s.getSort(s.sortRules[e],l)})}return i}).call(this);return function(i,r){var e;let n,o;for(let t=0;t<h.length;t++){if(null!=(e=(o=h[t]).sortRule)&&e.sortByIndicator){let e=i,t=r;o.fieldIndex<a.length-1&&((e=i.slice(0,o.fieldIndex+1)).push(l?s.rowSubTotalLabel:s.colSubTotalLabel),(t=r.slice(0,o.fieldIndex+1)).push(l?s.rowSubTotalLabel:s.colSubTotalLabel)),n=o.func(e,t)}else n=null==(e=o.func)?void 0:e.call(o,i[o.fieldIndex],r[o.fieldIndex]);if(0!==n)return n*((null==(e=o.sortRule)?void 0:e.sortType)===SortType.DESC?-1:1)}return 0}}getSort(r,n){const o=this;return r.sortByIndicator?(e,t)=>{var i=function(e,t){return e.length<o.rows.length&&e[e.length-1]!==o.rowSubTotalLabel&&e[e.length-1]!==o.rowGrandTotalLabel&&e.push(o.rowSubTotalLabel),t.length<o.columns.length&&t[t.length-1]!==o.colSubTotalLabel&&t[t.length-1]!==o.colGrandTotalLabel&&t.push(o.colSubTotalLabel),o.getAggregator(e,t,r.sortByIndicator).value()};return n?naturalSort(i(e,r.query),i(t,r.query)):naturalSort(i(r.query,e),i(r.query,t))}:r.sortBy?sortBy(r.sortBy):r.sortType?typeSort:r.sortFunc||naturalSort}totalStatistics(){var e;const g=this;if(1<=(null==(e=null==(e=null==(e=null==g?void 0:g.totals)?void 0:e.column)?void 0:e.subTotalsDimensions)?void 0:e.length)||1<=(null==(e=null==(e=null==(e=null==g?void 0:g.totals)?void 0:e.row)?void 0:e.subTotalsDimensions)?void 0:e.length)||null!=(e=null==(e=null==g?void 0:g.totals)?void 0:e.column)&&e.showGrandTotals||null!=(e=null==(e=null==g?void 0:g.totals)?void 0:e.row)&&e.showGrandTotals){const p=[],f=(i,r)=>{var n,o,a;if(null!=(o=null==(o=this.totalRecordsTree)?void 0:o[i])&&o[r])this.tree[i][r]=null==(o=null==(o=this.totalRecordsTree)?void 0:o[i])?void 0:o[r];else{var l=r.split(this.stringJoinChar);for(let e=0,t=null==(o=null==(o=null==(o=g.totals)?void 0:o.column)?void 0:o.subTotalsDimensions)?void 0:o.length;e<t;e++){var s=g.totals.column.subTotalsDimensions[e],s=g.columns.indexOf(s);if(0<=s){var h,s=l.slice(0,s+1),d=(s.push(g.colSubTotalLabel),s.join(this.stringJoinChar));if(null!=(s=null==(s=this.totalRecordsTree)?void 0:s[i])&&s[d])return void(this.tree[i][d]=null==(s=null==(s=this.totalRecordsTree)?void 0:s[i])?void 0:s[d]);this.tree[i][d]||(this.tree[i][d]=[]);for(let t=0;t<this.indicatorKeys.length;t++)this.tree[i][d][t]||(h=this.getAggregatorRule(this.indicatorKeys[t]),this.tree[i][d][t]=new this.aggregators[null!=(n=null==h?void 0:h.aggregationType)?n:AggregationType.SUM](null!=(n=null==h?void 0:h.field)?n:this.indicatorKeys[t],null!=(n=null==h?void 0:h.formatFun)?n:null==(n=null==(h=this.indicators)?void 0:h.find(e=>\\\"string\\\"!=typeof e&&e.indicatorKey===this.indicatorKeys[t]))?void 0:n.format)),this.tree[i][d][t].push(null==(n=null==(h=g.tree[i])?void 0:h[r])?void 0:n[t])}}if(null!=(o=null==(o=g.totals)?void 0:o.column)&&o.showGrandTotals||0===this.rows.length){var u,c=g.colGrandTotalLabel;if(null!=(o=null==(o=this.totalRecordsTree)?void 0:o[i])&&o[c])this.tree[i][c]=null==(o=null==(o=this.totalRecordsTree)?void 0:o[i])?void 0:o[c];else{this.tree[i][c]||(this.tree[i][c]=[]);for(let t=0;t<this.indicatorKeys.length;t++)this.tree[i][c][t]||(u=this.getAggregatorRule(this.indicatorKeys[t]),this.tree[i][c][t]=new this.aggregators[null!=(a=null==u?void 0:u.aggregationType)?a:AggregationType.SUM](null!=(a=null==u?void 0:u.field)?a:this.indicatorKeys[t],null!=(a=null==u?void 0:u.formatFun)?a:null==(a=null==(u=this.indicators)?void 0:u.find(e=>\\\"string\\\"!=typeof e&&e.indicatorKey===this.indicatorKeys[t]))?void 0:a.format)),this.tree[i][c][t].push(null==(a=null==(u=g.tree[i])?void 0:u[r])?void 0:a[t])}}}};Object.keys(g.tree).forEach(u=>{const c=u.split(this.stringJoinChar);Object.keys(g.tree[u]).forEach(e=>{var i,t,r;for(let h=0,d=null==(t=null==(t=null==(t=g.totals)?void 0:t.row)?void 0:t.subTotalsDimensions)?void 0:t.length;h<d;h++){var n=g.totals.row.subTotalsDimensions[h],n=g.rows.indexOf(n);if(0<=n&&n<g.rows.length-1){var o,n=c.slice(0,n+1),a=(\\\"grid\\\"===this.rowHierarchyType&&n.push(g.rowSubTotalLabel),n.join(this.stringJoinChar));this.tree[a]||(this.tree[a]={},p.push(a)),this.tree[a][e]||(this.tree[a][e]=[]);for(let t=0;t<this.indicatorKeys.length;t++)this.tree[a][e][t]||(o=this.getAggregatorRule(this.indicatorKeys[t]),this.tree[a][e][t]=new this.aggregators[null!=(i=null==o?void 0:o.aggregationType)?i:AggregationType.SUM](null!=(i=null==o?void 0:o.field)?i:this.indicatorKeys[t],null!=(i=null==o?void 0:o.formatFun)?i:null==(i=null==(o=this.indicators)?void 0:o.find(e=>\\\"string\\\"!=typeof e&&e.indicatorKey===this.indicatorKeys[t]))?void 0:i.format)),this.tree[a][e][t].push(null==(i=null==(o=g.tree[u])?void 0:o[e])?void 0:i[t])}}if(null!=(t=null==(t=g.totals)?void 0:t.row)&&t.showGrandTotals||0===this.columns.length){var l,s=g.rowGrandTotalLabel;this.tree[s]||(this.tree[s]={},p.push(s)),this.tree[s][e]||(this.tree[s][e]=[]);for(let t=0;t<this.indicatorKeys.length;t++)this.tree[s][e][t]||(l=this.getAggregatorRule(this.indicatorKeys[t]),this.tree[s][e][t]=new this.aggregators[null!=(r=null==l?void 0:l.aggregationType)?r:AggregationType.SUM](null!=(r=null==l?void 0:l.field)?r:this.indicatorKeys[t],null!=(r=null==l?void 0:l.formatFun)?r:null==(r=null==(l=this.indicators)?void 0:l.find(e=>\\\"string\\\"!=typeof e&&e.indicatorKey===this.indicatorKeys[t]))?void 0:r.format)),this.tree[s][e][t].push(null==(r=null==(l=g.tree[u])?void 0:l[e])?void 0:r[t])}f(u,e)})}),p.forEach(t=>{Object.keys(g.tree[t]).forEach(e=>{f(t,e)})})}}ArrToTree1(e,l,s,t,i){const h=[],d=this.stringJoinChar,u=new Map;function r(n){const o=[];let a;n.forEach((e,t)=>{o.push(e);var i=o.join(d);let r=u.get(i);r||(r={value:e,dimensionKey:l[t],children:t===n.length-1&&1<=(null==s?void 0:s.length)?null==s?void 0:s.map(e=>\\\"string\\\"==typeof e?{indicatorKey:e,value:e}:{indicatorKey:e.indicatorKey,value:e.title}):[]},u.set(i,r),(a?a.children:h).push(r)),a=r})}return e.forEach(e=>r(e)),t&&r([i]),h}ArrToTree(e,s,h,d,t,i,u,r,c){var n;let g=[];const p=this.stringJoinChar,f=new Map;return null!=e&&e.length?e.forEach(e=>{{var a=e;const l=[];let o;a.forEach((e,t)=>{l.push(e);var i=l.join(p);let r=f.get(i);if(!r){if(r={value:e,dimensionKey:s[t],children:t===a.length-1&&1<=(null==h?void 0:h.length)?null==h?void 0:h.map(e=>\\\"string\\\"==typeof e?{indicatorKey:e,value:e}:{indicatorKey:e.indicatorKey,value:e.title}):[]},d[t]){let e=r.children;var n={value:u,dimensionKey:s[t+1],levelSpan:d.length-t-1,children:1<=(null==h?void 0:h.length)?null==h?void 0:h.map(e=>\\\"string\\\"==typeof e?{indicatorKey:e,value:e}:{indicatorKey:e.indicatorKey,value:e.title}):[]};e.push(n),e=n.children}f.set(i,r),o?d[t-1]&&!c?o.children.splice(o.children.length-1,0,r):o.children.push(r):g.push(r)}o=r})}}):h&&(g=null==h?void 0:h.map(e=>{var t;return{indicatorKey:e.indicatorKey,value:null!=(t=e.title)?t:e.indicatorKey}})),t&&null!=e&&e.length&&(n={value:i,dimensionKey:s[0],levelSpan:d.length,children:null!=(n=null==h?void 0:h.map(e=>\\\"string\\\"==typeof e?{indicatorKey:e,value:e}:{indicatorKey:e.indicatorKey,value:e.title}))?n:[]},r?g.unshift(n):g.push(n)),g}TreeToArr(e){const n=[];return e.forEach(e=>function r(e,t){var i;t.push(e.id),0<e.children.length?null!=(i=e.children)&&i.forEach(e=>r(e,[...t])):n.push(t)}(e,[])),n}cacheDeminsionCollectedValues(){for(const e in this.collectValuesBy)\\\"xField\\\"!==this.collectValuesBy[e].type&&\\\"yField\\\"!==this.collectValuesBy[e].type||(this.dataConfig.dimensionSortArray?this.cacheCollectedValues[e]=arraySortByAnotherArray(this.collectedValues[e],this.dataConfig.dimensionSortArray):this.cacheCollectedValues[e]=this.collectedValues[e])}_adjustCustomTree(e){var t;const r=(e,i)=>{e.forEach(e=>{var t;e.indicatorKey||i||null!=(t=e.children)&&t.length&&e.children?e.children&&Array.isArray(e.children)&&r(e.children,i||!!e.indicatorKey):e.children=null==(t=this.indicators)?void 0:t.map(e=>{var t;return{indicatorKey:e.indicatorKey,value:null!=(t=e.title)?t:e.indicatorKey}})})};return null!=e&&e.length?r(e,!1):e=null==(t=this.indicators)?void 0:t.map(e=>{var t;return{indicatorKey:e.indicatorKey,value:null!=(t=e.title)?t:e.indicatorKey}}),e}changeTreeNodeValue(e=[],t=[],i,r){var n,o=this.indicatorKeys.indexOf(i),a=\\\"string\\\"==typeof e?e:e.join(this.stringJoinChar),l=\\\"string\\\"==typeof t?t:t.join(this.stringJoinChar);null!=(n=this.changedTree[a])&&n[l]||(this.changedTree[a]||(this.changedTree[a]={}),this.changedTree[a][l]=[]),this.changedTree[a][l][o]=r}changeRecordFieldValue(i,r,n){let e=!1;for(let t=0;t<this.indicatorKeys.length;t++)this.indicatorKeys[t]===i&&(e=!0);if(!e){if(Array.isArray(this.records))for(let e=0,t=this.records.length;e<t;e++){var o=this.records[e];o[i]===r&&(o[i]=n)}else for(const l in this.records)for(let e=0,t=this.records[l].length;e<t;e++){var a=this.records[l][e];a[i]===r&&(a[i]=n)}this.rowFlatKeys={},this.colFlatKeys={},this.tree={},this.processRecords()}}});function arraySortByAnotherArray(e,n){return e.sort((e,t)=>{var i=n.indexOf(e),r=n.indexOf(t);return i<r?-1:r<i?1:0})}var PivotTable=class extends BaseTable{constructor(e,t){\\\"node\\\"===Env.mode?(t=e,e=null):e instanceof HTMLElement||(e=(t=e).container||null),super(e,t),t.layout&&Object.assign(t,t.layout),this.internalProps.columns=cloneDeep(t.columns),this.internalProps.rows=cloneDeep(t.rows),this.internalProps.indicators=cloneDeepSpec(t.indicators),null!=(i=t.indicators)&&i.forEach((e,t)=>{\\\"object\\\"==typeof e&&null!=e&&e.editor&&(this.internalProps.indicators[t].editor=e.editor)}),this.internalProps.columnTree=!t.indicatorsAsCol||null!=(i=t.columns)&&i.length||t.columnTree?cloneDeep(t.columnTree):[],this.internalProps.rowTree=t.indicatorsAsCol||null!=(i=t.rows)&&i.length||t.rowTree?cloneDeep(t.rowTree):[],this.internalProps.records=t.records,this.pagination=t.pagination,this.internalProps.columnResizeType=null!=(i=t.columnResizeType)?i:\\\"column\\\",this.internalProps.rowResizeType=null!=(i=t.rowResizeType)?i:\\\"row\\\",this.internalProps.dataConfig=cloneDeep(t.dataConfig),t.rowTree||t.columnTree?this.internalProps.enableDataAnalysis=!1:this.internalProps.enableDataAnalysis=!0;var i=this.internalProps.records;if(this.internalProps.enableDataAnalysis&&(t.rows||t.columns)){var r=null!=(r=null==(r=t.rows)?void 0:r.reduce((e,t)=>(\\\"string\\\"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?r:[],n=null!=(n=null==(n=t.columns)?void 0:n.reduce((e,t)=>(\\\"string\\\"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?n:[],o=null!=(o=null==(o=t.indicators)?void 0:o.reduce((e,t)=>(\\\"string\\\"==typeof t?e.push(t):e.push(t.indicatorKey),e),[]))?o:[];this.dataset=new Dataset(this.internalProps.dataConfig,r,n,o,this.internalProps.indicators,null==(r=t.indicatorsAsCol)||r,t.records,t.rowHierarchyType,this.internalProps.columnTree,this.internalProps.rowTree),this.internalProps.layoutMap=new PivotHeaderLayoutMap(this,this.dataset)}else{if(!Array.isArray(this.internalProps.columnTree)&&!Array.isArray(this.internalProps.rowTree))return;this.internalProps.layoutMap=new PivotHeaderLayoutMap(this,null),(null==(n=null==i?void 0:i[0])?void 0:n.constructor)!==Array&&(this.flatDataToObjects=new FlatDataToObjects({rows:this.internalProps.layoutMap.fullRowDimensionKeys,columns:this.internalProps.layoutMap.colDimensionKeys,indicators:this.internalProps.layoutMap.indicatorKeys,indicatorsAsCol:this.internalProps.layoutMap.indicatorsAsCol,indicatorDimensionKey:this.internalProps.layoutMap.indicatorDimensionKey},i))}this.pivotSortState=[],t.pivotSortState&&this.updatePivotSortState(t.pivotSortState),\\\"node\\\"!==Env.mode&&(this.editorManager=new EditManeger(this)),this.refreshHeader(),this.stateManager.initCheckedState(i),this.scenegraph.createSceneGraph(),t.title&&(this.internalProps.title=new Title2(t.title,this),this.scenegraph.resize()),setTimeout(()=>{this.fireListeners(TABLE_EVENT_TYPE.INITIALIZED,null)},0)}static get EVENT_TYPE(){return PIVOT_TABLE_EVENT_TYPE}isListTable(){return!1}isPivotTable(){return!0}isPivotChart(){return!1}get recordsCount(){var e;return null==(e=this.records)?void 0:e.length}_canResizeColumn(e,t){var i=super._canResizeColumn(e,t);if(i&&!this.internalProps.layoutMap.indicatorsAsCol){var r=this.internalProps.layoutMap.getBody(e,this.columnHeaderLevelCount);if(null!=r&&r.disableColumnResize)return!1}return i}updateOption(e){var t=this.internalProps;if(super.updateOption(e),this.internalProps.columns=cloneDeep(e.columns),this.internalProps.rows=cloneDeep(e.rows),this.internalProps.indicators=null!=(i=e.indicators)&&i.length?cloneDeepSpec(e.indicators):[],null!=(i=e.indicators)&&i.forEach((e,t)=>{\\\"object\\\"==typeof e&&null!=e&&e.editor&&(this.internalProps.indicators[t].editor=e.editor)}),this.internalProps.columnTree=!e.indicatorsAsCol||null!=(i=e.columns)&&i.length||e.columnTree?cloneDeep(e.columnTree):[],this.internalProps.rowTree=e.indicatorsAsCol||null!=(i=e.rows)&&i.length||e.rowTree?cloneDeep(e.rowTree):[],e.records&&(this.internalProps.records=e.records),this.stateManager.initCheckedState(this.internalProps.records),this.stateManager.updateDrillState(void 0,void 0,!1,!1,-1,-1),this.pagination=e.pagination,t.columnResizeType=null!=(i=e.columnResizeType)?i:\\\"column\\\",t.rowResizeType=null!=(i=e.rowResizeType)?i:\\\"row\\\",t.dataConfig=cloneDeep(e.dataConfig),e.rowTree||e.columnTree?t.enableDataAnalysis=!1:t.enableDataAnalysis=!0,\\\"tree\\\"===(null==e?void 0:e.rowHierarchyType)&&\\\"tree\\\"===this.internalProps.layoutMap.rowHierarchyType&&this.internalProps.layoutMap.rowExpandLevel===(null==e?void 0:e.rowExpandLevel)){const a=this.internalProps.layoutMap.rowDimensionTree.tree.children;null!=(i=this.internalProps.rowTree)&&i.forEach((t,e)=>{var i=a.find(e=>e.dimensionKey===t.dimensionKey&&e.value===t.value);i&&this.syncHierarchyState(i,t)})}var i=this.internalProps.records;if(this.internalProps.enableDataAnalysis&&(e.rows||e.columns)){var r=null==(r=e.rows)?void 0:r.reduce((e,t)=>(\\\"string\\\"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]),n=null==(n=e.columns)?void 0:n.reduce((e,t)=>(\\\"string\\\"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]),o=null==(o=e.indicators)?void 0:o.reduce((e,t)=>(\\\"string\\\"==typeof t?e.push(t):e.push(t.indicatorKey),e),[]);this.dataset=new Dataset(t.dataConfig,r,n,o,this.internalProps.indicators,null==(r=e.indicatorsAsCol)||r,e.records,e.rowHierarchyType,this.internalProps.columnTree,this.internalProps.rowTree),t.layoutMap=new PivotHeaderLayoutMap(this,this.dataset)}else{if(!Array.isArray(this.internalProps.columnTree)&&!Array.isArray(this.internalProps.rowTree))return this;t.layoutMap=new PivotHeaderLayoutMap(this,null),(null==(n=null==i?void 0:i[0])?void 0:n.constructor)!==Array&&(this.flatDataToObjects=new FlatDataToObjects({rows:t.layoutMap.fullRowDimensionKeys,columns:t.layoutMap.colDimensionKeys,indicators:t.layoutMap.indicatorKeys,indicatorsAsCol:t.layoutMap.indicatorsAsCol,indicatorDimensionKey:t.layoutMap.indicatorDimensionKey},i))}return this.pivotSortState=[],e.pivotSortState&&this.updatePivotSortState(e.pivotSortState),this.refreshHeader(),t.releaseList&&(t.releaseList.forEach(e=>{var t;return null==(t=null==e?void 0:e.release)?void 0:t.call(e)}),t.releaseList=null),this.scenegraph.clearCells(),this.scenegraph.createSceneGraph(),e.title&&(this.internalProps.title=new Title2(e.title,this),this.scenegraph.resize()),new Promise(e=>{setTimeout(e,0)})}updatePagination(e){e?(this.pagination||(this.pagination={currentPage:0,perPageCount:0}),\\\"number\\\"==typeof e.currentPage&&0<=e.currentPage&&(this.pagination.currentPage=e.currentPage),e.perPageCount&&(this.pagination.perPageCount=e.perPageCount||this.pagination.perPageCount),this.scenegraph.clearCells(),this.internalProps.layoutMap.setPagination(this.pagination),this.refreshRowColCount(),this.scenegraph.createSceneGraph(),this.render()):this.pagination&&(this.pagination=void 0,this.scenegraph.clearCells(),this.internalProps.layoutMap.setPagination(void 0),this.refreshRowColCount(),this.scenegraph.createSceneGraph(),this.render())}refreshHeader(){this.setMinMaxLimitWidth(!0),this.refreshRowColCount()}refreshRowColCount(){var e,t=this.internalProps[\\\"layoutMap\\\"];t&&(this.colCount=null!=(e=t.colCount)?e:0,this.rowCount=null!=(e=t.rowCount)?e:0,this.internalProps.frozenColCount=Math.max((null!=(e=t.rowHeaderLevelCount)?e:0)+t.leftRowSeriesNumberColumnCount,null!=(e=this.options.frozenColCount)?e:0),this.frozenRowCount=t.headerLevelCount,this.bottomFrozenRowCount!==(null!=(e=this.options.bottomFrozenRowCount)?e:0)&&(this.bottomFrozenRowCount=null!=(t=this.options.bottomFrozenRowCount)?t:0),this.rightFrozenColCount!==(null!=(e=this.options.rightFrozenColCount)?e:0)&&(this.rightFrozenColCount=null!=(t=this.options.rightFrozenColCount)?t:0),this.stateManager.setFrozenCol(this.internalProps.frozenColCount))}_getSortFuncFromHeaderOption(e,t,i){}get rowHierarchyType(){return this.internalProps.layoutMap.rowHierarchyType}syncHierarchyState(r,e){var t;r.value===e.value&&r.dimensionKey===e.dimensionKey&&(e.hierarchyState=null!=(t=e.hierarchyState)?t:null!=e&&e.children?r.hierarchyState:void 0,null!=(t=null==e?void 0:e.children))&&t.forEach((t,e)=>{var i;null!=(i=null==r?void 0:r.children)&&i[e]&&t&&(i=r.children.find(e=>e.dimensionKey===t.dimensionKey&&e.value===t.value))&&this.syncHierarchyState(i,t)})}getRecordShowIndexByCell(e,t){}getTableIndexByRecordIndex(e){}getTableIndexByField(e){}getCellAddrByFieldRecord(e,t){}getBodyIndexByRow(e){var t=this.internalProps[\\\"layoutMap\\\"];return t.getBodyIndexByRow(e)}getBodyIndexByCol(e){var t=this.internalProps[\\\"layoutMap\\\"];return t.getBodyIndexByCol(e)}getFieldData(e,t,i){if(!this.internalProps.layoutMap.isHeader(t,i)){if(this.dataset){var r=this.internalProps.layoutMap.getCellHeaderPaths(t,i);if(r){var n=r.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),r=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),r=this.dataset.getAggregator(this.internalProps.layoutMap.indicatorsAsCol?r:r.slice(0,-1),this.internalProps.layoutMap.indicatorsAsCol?n.slice(0,-1):n,this.internalProps.layoutMap.getIndicatorKey(t,i));if(r.records&&1<=r.records.length)return r.records[0][e]}}else if(this.flatDataToObjects){n=this.internalProps.layoutMap.getCellHeaderPaths(t,i),r=n.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=n.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=this.flatDataToObjects.getTreeNode(n,r,this.internalProps.layoutMap.getBody(t,i).indicatorKey,!1);if(null!=n&&n.record)return null==n?void 0:n.record[e]}r=this.getBodyIndexByRow(i),n=this.getBodyIndexByCol(t);return null==(r=this.records[r])?void 0:r[n]}}getCellValue(e,t,i){var r,n;if(!i){var o=this.getCustomMergeValue(e,t);if(o)return o}return this.internalProps.layoutMap.isSeriesNumber(e,t)?this.internalProps.layoutMap.isSeriesNumberInHeader(e,t)?(o=this.internalProps.layoutMap.getSeriesNumberHeader(e,t)[\\\"title\\\"],o):(o=this.internalProps.layoutMap.getSeriesNumberBody(e,t)[\\\"format\\\"],\\\"function\\\"==typeof o?o(e,t,this):t-this.columnHeaderLevelCount+1):this.internalProps.layoutMap.isHeader(e,t)?(({title:o,fieldFormat:r}=this.internalProps.layoutMap.getHeader(e,t)),\\\"function\\\"==typeof r?r(o,e,t,this):o):this.dataset?(o=(r=this.internalProps.layoutMap.getCellHeaderPaths(e,t)).colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),r=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),(r=this.dataset.getAggregator(this.internalProps.layoutMap.indicatorsAsCol?r:r.slice(0,-1),this.internalProps.layoutMap.indicatorsAsCol?o.slice(0,-1):o,this.internalProps.layoutMap.getIndicatorKey(e,t))).formatValue?r.formatValue(e,t,this):\\\"\\\"):this.flatDataToObjects?(r=(o=this.internalProps.layoutMap.getCellHeaderPaths(e,t)).colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=o.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=this.flatDataToObjects.getTreeNode(o,r,this.internalProps.layoutMap.getBody(e,t).indicatorKey),r=this.internalProps.layoutMap.getBody(e,t)[\\\"fieldFormat\\\"],\\\"function\\\"==typeof r?r(null==o?void 0:o.value,e,t,this):null!=(r=null==o?void 0:o.value)?r:\\\"\\\"):(o=this.internalProps.layoutMap.getBody(e,t)[\\\"fieldFormat\\\"],r=this.getBodyIndexByRow(t),n=this.getBodyIndexByCol(e),n=null==(r=this.records[r])?void 0:r[n],\\\"function\\\"==typeof o?o(n,e,t,this):n)}getCellOriginValue(e,t){var i,r;return this.internalProps.layoutMap.isHeader(e,t)?(i=this.internalProps.layoutMap.getHeader(e,t)[\\\"title\\\"],\\\"function\\\"==typeof i?i():i):this.dataset?(r=(i=this.internalProps.layoutMap.getCellHeaderPaths(e,t)).colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),i=i.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),(i=this.dataset.getAggregator(this.internalProps.layoutMap.indicatorsAsCol?i:i.slice(0,-1),this.internalProps.layoutMap.indicatorsAsCol?r.slice(0,-1):r,this.internalProps.layoutMap.getIndicatorKey(e,t))).value?i.value():void 0):this.flatDataToObjects?(i=(r=this.internalProps.layoutMap.getCellHeaderPaths(e,t)).colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),r=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),null==(r=this.flatDataToObjects.getTreeNode(r,i,this.internalProps.layoutMap.getBody(e,t).indicatorKey))?void 0:r.value):(i=this.getBodyIndexByRow(t),r=this.getBodyIndexByCol(e),null==(i=this.records[i])?void 0:i[r])}getCellRawValue(e,t){var i,r;return this.internalProps.layoutMap.isHeader(e,t)?(i=this.internalProps.layoutMap.getHeader(e,t)[\\\"title\\\"],\\\"function\\\"==typeof i?i():i):this.dataset?(r=(i=this.internalProps.layoutMap.getCellHeaderPaths(e,t)).colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),i=i.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),(i=this.dataset.getAggregator(this.internalProps.layoutMap.indicatorsAsCol?i:i.slice(0,-1),this.internalProps.layoutMap.indicatorsAsCol?r.slice(0,-1):r,this.internalProps.layoutMap.getIndicatorKey(e,t),!1)).value?i.value():void 0):this.flatDataToObjects?(i=(r=this.internalProps.layoutMap.getCellHeaderPaths(e,t)).colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),r=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),null==(r=this.flatDataToObjects.getTreeNode(r,i,this.internalProps.layoutMap.getBody(e,t).indicatorKey,!1))?void 0:r.value):(i=this.getBodyIndexByRow(t),r=this.getBodyIndexByCol(e),null==(i=this.records[i])?void 0:i[r])}getCellOriginRecord(e,t){var i,r;if(!this.internalProps.layoutMap.isHeader(e,t))return this.dataset?(i=(r=this.internalProps.layoutMap.getCellHeaderPaths(e,t)).colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),r=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),this.dataset.getAggregator(this.internalProps.layoutMap.indicatorsAsCol?r:r.slice(0,-1),this.internalProps.layoutMap.indicatorsAsCol?i.slice(0,-1):i,this.internalProps.layoutMap.getIndicatorKey(e,t)).records):this.flatDataToObjects?(i=(r=this.internalProps.layoutMap.getCellHeaderPaths(e,t)).colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),r=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),null==(r=this.flatDataToObjects.getTreeNode(r,i,this.internalProps.layoutMap.getBody(e,t).indicatorKey))?void 0:r.record):(i=this.getBodyIndexByRow(t),r=this.getBodyIndexByCol(e),null==(i=this.records[i])?void 0:i[r])}getCellRawRecord(e,t){var i,r;if(!this.internalProps.layoutMap.isHeader(e,t))return this.dataset?(i=(r=this.internalProps.layoutMap.getCellHeaderPaths(e,t)).colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),r=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),this.dataset.getAggregator(this.internalProps.layoutMap.indicatorsAsCol?r:r.slice(0,-1),this.internalProps.layoutMap.indicatorsAsCol?i.slice(0,-1):i,this.internalProps.layoutMap.getIndicatorKey(e,t)).records):this.flatDataToObjects?(i=(r=this.internalProps.layoutMap.getCellHeaderPaths(e,t)).colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),r=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),null==(r=this.flatDataToObjects.getTreeNode(r,i,this.internalProps.layoutMap.getBody(e,t).indicatorKey,!1))?void 0:r.record):(i=this.getBodyIndexByRow(t),r=this.getBodyIndexByCol(e),null==(i=this.records[i])?void 0:i[r])}updateSortRules(e){this.internalProps.dataConfig.sortRules=e,this.dataset.updateSortRules(e),this.internalProps.layoutMap.resetHeaderTree(),this.scenegraph.clearCells(),this.refreshHeader(),this.scenegraph.createSceneGraph(),this.render()}updatePivotSortState(e){for(let r=0;r<e.length;r++){var{dimensions:t,order:i}=e[r],t=this.internalProps.layoutMap.getPivotCellAdress(t);t&&this.pivotSortState.push({col:t.col,row:t.row,order:i})}}getPivotSortState(t,i){if(this.pivotSortState){var r=this.getCellRange(t,i);for(let e=0;e<this.pivotSortState.length;e++){var{col:n,row:o,order:a}=this.pivotSortState[e];if(cellInRange(r,n,o))return a}}}_moveHeaderPosition(e,t){var i,r=this.getCellRange(e.col,e.row),n=this.getCellRange(t.col,t.row),o=this.internalProps.layoutMap.moveHeaderPosition(e,t);if(o){if(\\\"column\\\"===o.moveType){if((null==(i=null==(i=this.options.records)?void 0:i[0])?void 0:i.constructor)===Array)for(let e=0;e<this.internalProps.records.length;e++){var a=this.internalProps.records[e].splice(o.sourceIndex-this.rowHeaderLevelCount,o.sourceSize);a.unshift(o.targetIndex-this.rowHeaderLevelCount,0),Array.prototype.splice.apply(this.internalProps.records[e],a)}this.colWidthsMap.exchangeOrder(r.start.col,r.end.col-r.start.col+1,n.start.col,n.end.col-n.start.col+1,o.targetIndex),this.setMinMaxLimitWidth()}else\\\"row\\\"===o.moveType&&((null==(r=null==(i=this.options.records)?void 0:i[0])?void 0:r.constructor)===Array&&((n=this.internalProps.records.splice(o.sourceIndex-this.columnHeaderLevelCount,o.sourceSize)).unshift(o.targetIndex-this.columnHeaderLevelCount,0),Array.prototype.splice.apply(this.internalProps.records,n)),o.targetIndex>o.sourceIndex?this.rowHeightsMap.exchangeOrder(o.sourceIndex,o.sourceSize,o.targetIndex+o.sourceSize-o.targetSize,o.targetSize,o.targetIndex):this.rowHeightsMap.exchangeOrder(o.sourceIndex,o.sourceSize,o.targetIndex,o.targetSize,o.targetIndex));return o}return null}toggleHierarchyState(e,t){var i=this.getHierarchyState(e,t);i===HierarchyState.expand?(this._refreshHierarchyState(e,t),this.fireListeners(PIVOT_TABLE_EVENT_TYPE.TREE_HIERARCHY_STATE_CHANGE,{col:e,row:t,hierarchyState:HierarchyState.collapse})):i===HierarchyState.collapse&&(i=this.internalProps.layoutMap.getCellHeaderPaths(e,t),i=this.internalProps.layoutMap.getHeadNode(i.rowHeaderPaths.slice(0,i.rowHeaderPaths.length)),Array.isArray(i.children)&&this._refreshHierarchyState(e,t),this.fireListeners(PIVOT_TABLE_EVENT_TYPE.TREE_HIERARCHY_STATE_CHANGE,{col:e,row:t,hierarchyState:HierarchyState.expand,originData:i}))}_refreshHierarchyState(e,t,i){let r=!1,n=!1;this.stateManager.updateHoverIcon(e,t,void 0,void 0);var o=this.internalProps.layoutMap.checkHasChart(),a=(o&&(this.autoFillWidth&&(r=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight)&&(n=this.getAllRowsHeight()<=this.tableNoFrameHeight),this.internalProps.layoutMap.toggleHierarchyState(e,t));i&&i(),this.refreshRowColCount(),this.clearCellStyleCache(),this.scenegraph.updateHierarchyIcon(e,t),this.scenegraph.updateRow(a.removeCellPositions,a.addCellPositions,a.updateCellPositions),o&&(this.autoFillWidth&&!r&&(r=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight&&!n&&(n=this.getAllRowsHeight()<=this.tableNoFrameHeight),\\\"adaptive\\\"===this.widthMode||r||\\\"adaptive\\\"===this.heightMode||n)&&this.scenegraph.updateChartSize(0)}getHeaderCellAddressByPath(e){return this.internalProps.layoutMap.getPivotCellAdress(e)}getCellAddressByHeaderPaths(e){return this.internalProps.layoutMap.getCellAdressByHeaderPath(e)}getHeaderPathByXY(e){var t=e?this.getCellAt(e.x+this.getFrozenColsWidth()+this.scrollLeft+1,e.y+this.getFrozenRowsHeight()+this.scrollTop+1):this.getCellAt(this.getFrozenColsWidth()+this.scrollLeft+1,this.getFrozenRowsHeight()+this.scrollTop+1);return this.internalProps.layoutMap.getCellHeaderPaths(t.col,t.row)}getHierarchyState(e,t){var i;return null==(i=this._getHeaderLayoutMap(e,t))?void 0:i.hierarchyState}getLayoutColumnTree(){return this.internalProps.layoutMap.getLayoutColumnTree()}getLayoutColumnTreeCount(){return this.internalProps.layoutMap.getLayoutColumnTreeCount()}getLayoutRowTree(){return this.internalProps.layoutMap.getLayoutRowTree()}getLayoutRowTreeCount(){return this.internalProps.layoutMap.getLayoutRowTreeCount()}getCellHeaderTreeNodes(e,t){return this.internalProps.layoutMap.getCellHeaderPathsWidthTreeNode(e,t)}_hasHierarchyTreeHeader(){return\\\"tree\\\"===this.internalProps.layoutMap.rowHierarchyType}getMenuInfo(e,t,i){var r=this.internalProps.layoutMap.getPivotDimensionInfo(e,t);return{dimensionKey:r[r.length-1].dimensionKey,value:this.getCellValue(e,t),cellLocation:this.getCellLocation(e,t),isPivotCorner:this.isCornerHeader(e,t),event:void 0}}setRecords(e){var t={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row},i=(this.options.records=this.internalProps.records=e,this.options),r=this.internalProps;this.internalProps.enableDataAnalysis&&(i.rows||i.columns)?(this.dataset.setRecords(e),r.layoutMap=new PivotHeaderLayoutMap(this,this.dataset),this.pivotSortState=[],i.pivotSortState&&this.updatePivotSortState(i.pivotSortState)):(Array.isArray(this.internalProps.columnTree)||Array.isArray(this.internalProps.rowTree))&&(null==(i=null==e?void 0:e[0])?void 0:i.constructor)!==Array&&(this.flatDataToObjects=new FlatDataToObjects({rows:r.layoutMap.fullRowDimensionKeys,columns:r.layoutMap.colDimensionKeys,indicators:r.layoutMap.indicatorKeys,indicatorsAsCol:r.layoutMap.indicatorsAsCol,indicatorDimensionKey:r.layoutMap.indicatorDimensionKey},e)),this.refreshHeader(),this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(t.col,t.row),this.internalProps.title&&!this.internalProps.title.isReleased&&(this._updateSize(),this.internalProps.title.resize(),this.scenegraph.resize()),this.eventManager.updateEventBinder()}startEditCell(e,t){var i,r;isValid_default(e)&&isValid_default(t)?(this.selectCell(e,t),this.editorManager.startEditCell(e,t)):null!=(i=this.stateManager.select)&&i.cellPos&&(({col:i,row:r}=this.stateManager.select.cellPos),isValid_default(i))&&isValid_default(r)&&this.editorManager.startEditCell(i,r)}completeEditCell(){this.editorManager.completeEdit()}getEditor(e,t){var i;let r;return\\\"string\\\"==typeof(r=\\\"function\\\"==typeof(r=this.isHeader(e,t)&&!this.isCornerHeader(e,t)?null!=(i=null==(i=this.getHeaderDefine(e,t))?void 0:i.headerEditor)?i:this.options.headerEditor:null!=(i=null==(i=this.getBodyColumnDefine(e,t))?void 0:i.editor)?i:this.options.editor)?r({col:e,row:t,dataValue:this.getCellOriginValue(e,t),value:this.getCellValue(e,t)||\\\"\\\",table:this}):r)?get5(r):r}isHasEditorDefine(e,t){var i=this.getBodyColumnDefine(e,t);let r=null!=(i=null==i?void 0:i.editor)?i:this.options.editor;return\\\"function\\\"==typeof r&&(r=r({col:e,row:t,dataValue:this.getCellOriginValue(e,t),value:this.getCellValue(e,t)||\\\"\\\",table:this})),isValid_default(r)}changeCellValue(i,r,n,e=!1){if(e&&this.isHasEditorDefine(i,r)||!1===e){let e=n;var o,a,l=this.getCellOriginValue(i,r),s=this.getCellRawValue(i,r),h=(\\\"number\\\"==typeof s&&isAllDigits(n)&&(e=parseFloat(n)),this._changeCellValueToDataSet(i,r,l,e),this.getCellRange(i,r));for(let t=h.start.col;t<=h.end.col;t++)for(let e=h.start.row;e<=h.end.row;e++)this.scenegraph.updateCellContent(t,e);\\\"adaptive\\\"===this.widthMode||this.autoFillWidth&&this.getAllColsWidth()<=this.tableNoFrameWidth?0===this.internalProps._widthResizedColMap.size&&this.scenegraph.recalculateColWidths():this.internalProps._widthResizedColMap.has(i)||(a=this.getColWidth(i),(o=computeColWidth(i,0,this.rowCount-1,this,!1))!==a&&this.scenegraph.updateColWidth(i,o-a)),\\\"adaptive\\\"===this.heightMode||this.autoFillHeight&&this.getAllRowsHeight()<=this.tableNoFrameHeight?0===this.internalProps._heightResizedRowMap.size&&this.scenegraph.recalculateRowHeights():\\\"autoHeight\\\"!==this.heightMode||this.internalProps._heightResizedRowMap.has(r)||(o=this.getRowHeight(r),a=computeRowHeight(r,0,this.colCount-1,this),this.scenegraph.updateRowHeight(r,a-o)),this.fireListeners(TABLE_EVENT_TYPE.CHANGE_CELL_VALUE,{col:i,row:r,rawValue:s,currentValue:l,changedValue:e}),this.scenegraph.updateNextFrame()}}changeCellValues(i,r,n,o=!1){let a=i,l=r;for(let C=0;C<n.length&&!(r+C>this.rowCount-1);C++){l=r+C;var s=n[C];let e=i;for(let t=0;t<s.length&&!(i+t>this.colCount-1);t++)if(e=i+t,o&&this.isHasEditorDefine(i+t,r+C)||!1===o){var h=s[t];let e=h;var d=this.getCellOriginValue(i+t,r+C),u=this.getCellRawValue(i+t,r+C);\\\"number\\\"==typeof u&&isAllDigits(h)&&(e=parseFloat(h)),this._changeCellValueToDataSet(i+t,r+C,d,e),this.fireListeners(TABLE_EVENT_TYPE.CHANGE_CELL_VALUE,{col:i+t,row:r+C,rawValue:u,currentValue:d,changedValue:this.getCellOriginValue(i+t,r+C)})}a=Math.max(a,e)}var t,c,g=this.getCellRange(i,r),p=this.getCellRange(a,l);for(let y=g.start.col;y<=p.end.col;y++)for(let e=g.start.row;e<=p.end.row;e++)this.scenegraph.updateCellContent(y,e);if(\\\"adaptive\\\"===this.widthMode||this.autoFillWidth&&this.getAllColsWidth()<=this.tableNoFrameWidth)0===this.internalProps._widthResizedColMap.size&&this.scenegraph.recalculateColWidths();else for(let e=i;e<=p.end.col;e++)this.internalProps._widthResizedColMap.has(e)||(t=this.getColWidth(e),(c=computeColWidth(e,0,this.rowCount-1,this,!1))!==t&&this.scenegraph.updateColWidth(e,c-t));if(\\\"adaptive\\\"===this.heightMode||this.autoFillHeight&&this.getAllRowsHeight()<=this.tableNoFrameHeight)this.scenegraph.recalculateRowHeights();else if(\\\"autoHeight\\\"===this.heightMode){var f,m,b=[],v=[];for(let e=r;e<=p.end.row;e++)this.rowHeightsMap.get(e)&&(f=this.getRowHeight(e),m=computeRowHeight(e,0,this.colCount-1,this),b.push(e),v.push(m-f));this.scenegraph.updateRowsHeight(b,v)}this.scenegraph.updateNextFrame()}_changeCellValueToDataSet(e,t,i,r){var n,o;this.dataset?(n=this.internalProps.layoutMap.getCellHeaderPaths(e,t),this.isHeader(e,t)?(this.internalProps.layoutMap.changeTreeNodeTitle(e,t,r),this.isCornerHeader(e,t)||this.dataset.changeRecordFieldValue(null!=(o=n.colHeaderPaths)&&o.length?null!=(o=n.colHeaderPaths[n.colHeaderPaths.length-1].indicatorKey)?o:n.colHeaderPaths[n.colHeaderPaths.length-1].dimensionKey:null!=(o=n.rowHeaderPaths[n.rowHeaderPaths.length-1].indicatorKey)?o:n.rowHeaderPaths[n.rowHeaderPaths.length-1].dimensionKey,i,r)):(o=n.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=n.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),this.dataset.changeTreeNodeValue(this.internalProps.layoutMap.indicatorsAsCol?n:n.slice(0,-1),this.internalProps.layoutMap.indicatorsAsCol?o.slice(0,-1):o,this.internalProps.layoutMap.getIndicatorKey(e,t),r))):this.flatDataToObjects?(n=this.internalProps.layoutMap.getCellHeaderPaths(e,t),this.isHeader(e,t)?(this.internalProps.layoutMap.changeTreeNodeTitle(e,t,r),this.isCornerHeader(e,t)||this.flatDataToObjects.changeRecordFieldValue(null!=(o=n.colHeaderPaths)&&o.length?null!=(o=n.colHeaderPaths[n.colHeaderPaths.length-1].indicatorKey)?o:n.colHeaderPaths[n.colHeaderPaths.length-1].dimensionKey:null!=(o=n.rowHeaderPaths[n.rowHeaderPaths.length-1].indicatorKey)?o:n.rowHeaderPaths[n.rowHeaderPaths.length-1].dimensionKey,i,r)):(o=n.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=n.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),this.flatDataToObjects.changeTreeNodeValue(n,o,this.internalProps.layoutMap.getBody(e,t).indicatorKey,r))):(n=this.getBodyIndexByRow(t),o=this.getBodyIndexByCol(e),this.records[n][o]=r)}_hasCustomRenderOrLayout(){if(this.options.customRender)return!0;var{columnsDefine:e,rowsDefine:t,indicatorsDefine:i}=this.internalProps.layoutMap;for(let a=0;a<e.length;a++){var r=e[a];if(\\\"string\\\"!=typeof r&&(r.headerCustomLayout||r.headerCustomRender))return!0}for(let l=0;l<t.length;l++){var n=t[l];if(\\\"string\\\"!=typeof n&&(n.headerCustomLayout||n.headerCustomRender))return!0}for(let s=0;s<i.length;s++){var o=i[s];if(\\\"string\\\"!=typeof o&&(o.customLayout||o.headerCustomLayout||o.customRender||o.headerCustomRender))return!0}return!1}changeRecordOrder(e,t){}setTreeNodeChildren(e,t,i,r){var n;this.flatDataToObjects&&(n=this.internalProps.layoutMap.getCellHeaderPaths(i,r),this.internalProps.layoutMap.getHeadNode(n.rowHeaderPaths.slice(0,n.rowHeaderPaths.length)).children=e,this._refreshHierarchyState(i,r,()=>{this.flatDataToObjects.changeDataConfig({rows:this.internalProps.layoutMap.fullRowDimensionKeys,columns:this.internalProps.layoutMap.colDimensionKeys,indicators:this.internalProps.layoutMap.indicatorKeys,indicatorsAsCol:this.internalProps.layoutMap.indicatorsAsCol,indicatorDimensionKey:this.internalProps.layoutMap.indicatorDimensionKey}),this.flatDataToObjects.addRecords(t)}))}},ListTableWidget=(init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),init_esbuild_inject(),registerForVrender(),class extends import_widget.widget{refresh(e){var t=this.computeAttributes();return 0<$tw.utils.count(t)&&(this.refreshSelf(),!0)}render(e,t){this.parentDomNode=e,this.computeAttributes(),this.execute();var i=this.getContainerElement(),r={container:i,keyboardOptions:{copySelected:!0,pasteValueToCell:!0,selectAllOnCtrlA:!0,editCellOnEnter:!0,moveFocusCellOnTab:!0},...this.getCommonOptions(),records:this.getRecords(),columns:this.getListColumns(),...this.getOtherOptionFromString()??{}},r=(this.tableInstance=new ListTable(r),\\\"no\\\"!==this.getAttribute(\\\"titleNav\\\"));r&&this.tableInstance.on(ListTable.EVENT_TYPE.DBLCLICK_CELL,this.onTitleClickEvent.bind(this)),e.insertBefore(i,t),this.domNodes.push(i)}getContainerElement(){var e=this.getAttribute(\\\"height\\\")||\\\"400px\\\",t=this.getAttribute(\\\"width\\\")||\\\"100%\\\";return $tw.utils.domMaker(\\\"p\\\",{\\\"class\\\":\\\"tc-hyper-table tc-hyper-table-list-table\\\",style:{height:e,width:t}})}getCommonOptions(){var e=this.getAttribute(\\\"widthMode\\\")||\\\"standard\\\",t=\\\"dark\\\"===this.wiki.getTiddler(this.wiki.getTiddlerText(\\\"$:/palette\\\")??\\\"\\\")?.fields?.[\\\"color-scheme\\\"],i=this.getAttribute(\\\"lightTheme\\\")||\\\"DEFAULT\\\",r=this.getAttribute(\\\"darkTheme\\\")||\\\"DARK\\\";return{widthMode:e,theme:t?themes_exports[r]:themes_exports[i]}}onTitleClickEvent(e){var t;\\\"title\\\"===e.field&&((t=e.originData?.title??e.value)?this.dispatchEvent({type:\\\"tm-navigate\\\",navigateTo:t,navigateFromTitle:this.getVariable(\\\"currentTiddler\\\")}):console.error(\\\"hyper-table list-table failed to get title field from event\\\",e))}removeChildDomNodes(){void 0!==this.tableInstance&&(this.tableInstance=void 0),super.removeChildDomNodes()}getRecords(){var e=this.getAttribute(\\\"filter\\\"),t=this.getAttribute(\\\"records\\\")?.trim?.();let i=[];if(e)i=this.wiki.filterTiddlers(e,this).map(e=>this.wiki.getTiddler(e)?.fields).filter(e=>void 0!==e);else if(t)try{var r=new Function(\\\"return \\\"+t)();void 0!==r&&(i=r)}catch(n){console.error(`hyper-table list-table failed to parse records\\n\\n`+t,n)}return i}getListColumns(){var e=this.getAttribute(\\\"columns\\\")?.trim?.();let t=[{field:\\\"title\\\",title:\\\"Title\\\",width:\\\"auto\\\"}];if(e)if(e.includes(\\\"|\\\"))t=e.split(\\\"|\\\").map(t=>({cellType:\\\"text\\\",field:t,title:t,width:\\\"auto\\\",fieldFormat:e=>{return this.wiki.renderText(\\\"text/plain\\\",\\\"text/vnd.tiddlywiki\\\",String(e[t]),{variables:{currentTiddler:e.title},parentWidget:this})}}));else try{var i=new Function(\\\"return \\\"+e)();void 0!==i&&(t=i)}catch(r){console.error(`hyper-table list-table failed to parse columns\\n\\n`+e,r)}return t}getOtherOptionFromString(){var e=this.getAttribute(\\\"options\\\")?.trim?.();if(e)try{return new Function(\\\"return \\\"+e)()}catch(t){console.error(`hyper-table list-table failed to parse options\\n\\n`+e,t)}}}),PivotTableWidget=class extends ListTableWidget{render(e,t){this.parentDomNode=e,this.computeAttributes(),this.execute();var i=this.getContainerElement(),r={container:i,keyboardOptions:{copySelected:!0,pasteValueToCell:!0,selectAllOnCtrlA:!0,editCellOnEnter:!0,moveFocusCellOnTab:!0},...this.getCommonOptions(),records:this.getRecords(),columns:this.getPivotOption(\\\"columns\\\",[\\\"tags\\\"]),rows:this.getPivotOption(\\\"rows\\\",[\\\"title\\\"]),indicators:this.getPivotOption(\\\"indicators\\\",[\\\"created\\\",\\\"modified\\\"]),...this.getOtherOptionFromString()??{}};this.tableInstance=new PivotTable(r),e.insertBefore(i,t),this.domNodes.push(i)}getPivotOption(e,t){var i=this.getAttribute(e)?.trim?.();let r=t;if(i)try{var n=new Function(\\\"return \\\"+i)();void 0!==n&&(r=n)}catch(o){console.error(`hyper-table list-table failed to parse columns\\n\\n`+i,o)}return r}};exports.ListTableWidget=ListTableWidget,exports.PivotTableWidget=PivotTableWidget;\"}}}","title":"$:/plugins/linonetwo/hyper-table","type":"application/json","version":"0.2.3","Modern.TiddlyDev#SHA256-Hashed":"eb4518baaaa0291f4a6ce295c6efe48cfa726b003bb194ea4b7ae54cd30d308d","name":"High-Dimensional Tables 高维表格"}