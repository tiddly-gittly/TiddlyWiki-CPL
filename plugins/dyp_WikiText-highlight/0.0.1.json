{"created":"20250503145023794","title":"$:/plugins/dyp/WikiText-highlight","stability":"STABILITY_2_STABLE","modified":"20250503150558259","version":"0.0.1","name":"WikiText-highlight","description":"wiki语言高亮","author":"dyp","dependents":"$:/plugins/tiddlywiki/highlight","list":"readme usage","source":"https://github.com/dyp1121054136/dyp-plugins-library","packaged-by":"Gatha on 3rd 五月 2025, 23:07:23","plugin-type":"plugin","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/dyp/WikiText-highlight/Brush-Loader\":{\"title\":\"$:/plugins/dyp/WikiText-highlight/Brush-Loader\",\"text\":\"exports.after = ['load-modules'];\\n\\nexports.startup = function startup() {\\n  let hljs = $tw.modules.execute('$:/plugins/tiddlywiki/highlight/highlight.js');\\n\\n  $tw.modules.forEachModuleOfType('highlighter', function(title, module) {\\n    let moduleSource = $tw.wiki.getTiddlerText(title);\\n    console.log('loading brush: ' + title);\\n    $tw.utils.evalSandboxed(moduleSource, {hljs:hljs, exports:{}}, title);\\n  });\\n};\",\"created\":\"20250503150022033\",\"modified\":\"20250503150558259\",\"module-type\":\"startup\",\"tags\":\"wiki语言高亮\",\"type\":\"application/javascript\"},\"$:/plugins/dyp/WikiText-highlight/WikiText-Brush\":{\"title\":\"$:/plugins/dyp/WikiText-highlight/WikiText-Brush\",\"text\":\"if(typeof hljs !== 'undefined')\\n(() => {\\n    var e = (() => {\\n        \\\"use strict\\\";\\n        return (e) => {\\n          ////// REPEATABLE ELEMENTS //////\\n            const f = { scope: \\\"type\\\", begin: /\\\\[|\\\\]|<|>|{(?!{)|}(?!})/, end: /\\\\s*/ }, //TRANSCLUSION FILTER\\n            j = { scope: \\\"string\\\", begin: /!![\\\\w-_]*(?=}}|}\\\\w)/ }, //TRANSCLUSION FIELD\\n          //TRANSCLUSION\\n            t = { scope: \\\"type\\\", begin: /{{{?.*}}}?/, returnBegin: !0, contains: [\\n                { scope: \\\"section\\\", begin: /{{{?/, end: /}}}?/, excludeBegin: !0, excludeEnd: !0, contains: [ f,\\n                    { scope: \\\"type\\\", begin: /(?<=(\\\\]|>|}|{{{.?\\\\[))[\\\\w!]/, end: /\\\\w(?=(\\\\[|<|{))/ }, //FILTER OPERATOR\\n                    { scope: \\\"type\\\", begin: /\\\\|\\\\|.*(?=!!)/, contains: [j] }, //TRANSCLUSION TEMPLATE WITH FIELD\\n                    { scope: \\\"type\\\", begin: /\\\\|\\\\|.*(?=}})/ }, //TRANSCLUSION TEMPLATE, NO FIELD\\n                    { scope: \\\"link\\\", begin: /##.*(?=}})/ }, //TRANSCLUSION DATA\\n                    j,\\n                ], },\\n            ], },\\n          //HTML\\n            n = { begin: /<\\\\/?[A-Za-z_]/, end: />/, subLanguage: \\\"xml\\\", relevance: 0, contains: [t] },\\n          //LINKS AND IMAGES\\n            a = { scope: \\\"type\\\",\\n                variants: [\\n                    { begin: /\\\\[\\\\[.+?\\\\]\\\\]/, relevance: 0 },\\n                    { begin: /\\\\[ext\\\\[.+?\\\\]\\\\]/, relevance: 0 },\\n                    { begin: /\\\\[img\\\\s?(.*)?\\\\[.+?\\\\]\\\\]/, relevance: 0 },\\n                    { begin: /((data|javascript|mailto):|(?:http|ftp)s?:\\\\/\\\\/).*?/, relevance:2, },\\n                ],\\n                returnBegin: !0,\\n                contains: [\\n                  //DESCRIPTION PART\\n                    { scope: \\\"string\\\", begin: /\\\\[(ext|img\\\\s?(.*)?)?\\\\[(?=(.*)\\\\|.*\\\\])/, end: /.(?=\\\\|)/, excludeBegin: !0 },\\n                  //LINK PART\\n                    { scope: \\\"selector-class\\\", begin: /(?<!\\\\])\\\\|/, end: /\\\\]\\\\]/, excludeBegin: !0, excludeEnd: !0 },\\n                  //LINK ONLY\\n                    { scope: \\\"selector-class\\\", begin: /\\\\[(ext|img\\\\s?(.*)?)?\\\\[(?!(.*)\\\\|(.*)\\\\])/, end: /\\\\]\\\\]/, excludeBegin: !0, excludeEnd: !0 },\\n                  //BARE LINK\\n                    { scope: \\\"selector-class\\\", begin: /(http|ftp)s?:\\\\/\\\\//, end: /.(?=(\\\\s|\\\\n|\\\\)|\\\\]|\\\"|}))/ },\\n                ],\\n            },\\n          //BOLD\\n            i = {\\n                scope: \\\"strong\\\",\\n                contains: [],\\n                variants: [\\n                    { begin: /'{2}/, end: /'{2}/, excludeBegin: !0, excludeEnd: !0 },\\n                ],\\n            },\\n          //ITALICS\\n            s = {\\n                scope: \\\"emphasis\\\",\\n                contains: [],\\n                variants: [\\n                    { begin: /(?<!:)\\\\/{2}(?!\\\\/)/, end: /\\\\/{2}/, excludeBegin: !0, excludeEnd: !0 },\\n                ],\\n            };\\n            i.contains.push(s), s.contains.push(i);\\n            let c = [n, a, t];\\n            return (\\n                (i.contains = i.contains.concat(c)),\\n                (s.contains = s.contains.concat(c)),\\n                (c = c.concat(i, s)),\\n                {\\n                    name: \\\"WikiText\\\",\\n                    aliases: [\\\"tw\\\", \\\"tid\\\", \\\"tiddlywiki\\\", \\\"wikitext\\\"],\\n                    contains: [\\n                      //HEADERS\\n                        { scope: \\\"section\\\", begin: /^\\\\s*!{1,6}/, end: /$/, contains: c },\\n                      //HTML\\n                        n,\\n                      //MACROS AND WIDGETS\\n                        { scope: \\\"variable\\\",\\n                            variants: [\\n                                { begin: /<\\\\/?[$]?(?=[.a-zA-Z])/, end: /(?<!>)>(?!>)/, relevance: 0 },\\n                                { begin: /<<(?!<)/, end: />>(?!>)/, relevance: 0 },\\n                                { begin: /\\\\\\\\define/, end: /\\\\\\\\end/ },\\n                            ],\\n                            returnBegin: !0,\\n                            contains: [\\n                                { scope: \\\"variable\\\", begin: /\\\\\\\\define/ }, //MACRO DEFINE\\n                                { scope: \\\"variable\\\", begin: /(?<=(<|<\\\\/|<<))\\\\$?[.a-zA-Z_-]+\\\\b/ }, //WIDGETS & MACROS\\n                                { scope: \\\"link\\\", begin: /[a-zA-Z]+=/, returnBegin: !0, contains:[ //ATTRIBUTE NAME\\n                                    {scope:\\\"comment\\\", begin: /=/},\\n                                ], },\\n                                { scope: \\\"link\\\", begin: /(?<!(<<))\\\\b[a-zA-Z0-9_-]+\\\\b/ }, //MACRO VARIABLE\\n                                { scope: \\\"string\\\", begin: /\\\"\\\\s*(?=\\\\[)/, end: /\\\"(?=(\\\\s|>|\\\\/>))/, contains: [f, //FILTER WITHIN STRINGS\\n                                    { scope: \\\"type\\\", begin: /(?<=(\\\\]|>|}|\\\".?\\\\[))(?<!\\\\[\\\\[)[\\\\w!]/, end: /\\\\w(?=(\\\\[|<|{))/ }, //FILTER OPERATOR\\n                                    { scope: \\\"section\\\", begin: /(?<=(\\\\[|<|{))./, end: /.(?=(\\\\]|>|}))/ }, //FILTER PARAMETER\\n                                ], },\\n                                { scope: \\\"string\\\", begin: /(?<=(\\\\s|=|:))\\\"\\\"\\\"/, end:/\\\"\\\"\\\"(?=(\\\\s|\\\\)|>|\\\\/>))/, contains: c }, // ATTRIBUTE VALUE\\n                                { scope: \\\"string\\\", begin: /(?<=(\\\\s|=|:))\\\"/, end:/\\\"(?=(\\\\s|\\\\)|>|\\\\/>))/, contains: c }, // ATTRIBUTE VALUE\\n                                { scope: \\\"string\\\", begin: /(?<=(\\\\s|=|:))'/, end:/'(?=(\\\\s|\\\\)|>|\\\\/>))/, contains: c }, // ATTRIBUTE VALUE\\n                                t, //TRANSCLUSION WITHIN WIDGET/MACRO\\n                            ],\\n                        },\\n                      //STYLING\\n                        { scope: \\\"string\\\", variants: [ {begin: /@{2}.*?(?=\\\\s)/, end: /\\\\s*/}, {begin: /@@/}, ], },\\n                        { begin: /(?<=(<style>))(\\\\n|\\\\#|\\\\.|.)/, end: /(\\\\n|.)(?=(<\\\\/style>))/, subLanguage: \\\"css\\\" },\\n                      //BULLETS\\n                        { scope: \\\"bullet\\\", begin: /(?<=[*#])\\\\.[.a-zA-Z-_]+\\\\b/ }, //CLASS\\n                        { scope: \\\"bullet\\\", begin: /^[ \\\\t]*([*#]+)/, end: /\\\\s*/, }, //LIST\\n                        { scope: \\\"bullet\\\", begin: /(?<=[*#>]+)[*#]+/, end: /\\\\s*/ }, //LIST AFTER BLOCKQUOTE\\n                      //DEFINITIONS\\n                        { scope: \\\"bullet\\\", begin: /^\\\\s*;/, end: /$/, excludeEnd: !0 },\\n                        { scope: \\\"bullet\\\", begin: /^\\\\s*:(?=\\\\s*)/, end: /\\\\s*/, excludeEnd: !0,\\n                            contains: [\\n                                { begin: /(?<=:)[*#]+(?=\\\\s*)/, end: /\\\\s*/ }, //LIST AFTER DEFINITION\\n                                { scope: \\\"quote\\\", begin: /(?<=:)[>]+/, end: /\\\\s*/ }, //BLOCKQUOTE AFTER DEFINITION\\n                            ],\\n                        },\\n                      //TABLES\\n                        { scope: \\\"section\\\", variants: [ //HEADERS\\n                            { begin: /^\\\\|\\\\s*!/, end: /\\\\|$/ },\\n                            { begin: /^\\\\|(?=(.*\\\\|h$))/, end: /h$/, relevance: 2, },\\n                        ], },\\n                        { scope: \\\"quote\\\", begin: /^\\\\|(?=(.*\\\\|f$))/, end: /f$/, relevance: 2, }, //FOOTERS\\n                        { scope: \\\"string\\\", begin: /^\\\\|(?=(.*\\\\|(k|c)$))/, end: /(k|c)$/, relevance: 2, }, //CLASSES & COMMENTS\\n                        { scope: \\\"variable\\\", begin: /\\\\|/, end: /\\\\s*/ }, //GENERAL\\n                      //TEXT FORMATTING\\n                        i, //BOLD\\n                        s, //ITALICS\\n                        { scope: \\\"selector-class\\\", begin: /_{2}/, end: /_{2}/, excludeBegin: !0, excludeEnd: !0 }, //UNDERLINE\\n                        { scope: \\\"quote\\\", begin: /~{2}/, end: /\\\\s*/ }, //STRIKE THROUGH\\n                        { scope: \\\"quote\\\", begin: /\\\\^{2}/, end: /\\\\s*/ }, //SUPERSCRIPT\\n                        { scope: \\\"quote\\\", begin: /,{2}/, end: /\\\\s*/ }, //SUBSCRIPT\\n                      //TRANSCLUSION\\n                        t,\\n                      //BLOCKQUOTE\\n                        { scope: \\\"quote\\\", begin: /(?<=[<>])\\\\.[.a-zA-Z-_]+\\\\b/ }, //CLASS\\n                        { scope: \\\"quote\\\", begin: /^\\\\s*>+|^\\\\s*<<</, end: /\\\\s*/, contains: c }, //BLOCKQUOTE\\n                        { scope: \\\"quote\\\", begin: /(?<=[*#>]+)>+/, end: /\\\\s*/ }, //BLOCKQUOTE AFTER LISTS\\n                      //CODE BLOCK\\n                        {\\n                            scope: \\\"code\\\",\\n                            variants: [\\n                                { begin: /(`{3,})[^`](.|\\\\n)*?\\\\1`*[ ]*/ },\\n                                { begin: /```/, end: /```+[ ]*$/ },\\n                                { begin: /``?.+?``?/ },\\n                            ],\\n                        },\\n                      //HARD LINEBREAKS BLOCK\\n                        { scope: \\\"bullet\\\", begin: /^\\\\s*\\\"\\\"\\\"/, end: /$/ },\\n                      //TYPED BLOCK\\n                        { scope: \\\"code\\\", begin: /^\\\\s*\\\\${3}/, end: /$/ },\\n                      //HORIZONTAL RULE\\n                        { scope: \\\"bullet\\\", begin: /^\\\\s*---+/, end: /$/ },\\n                      //LINKS\\n                        a,\\n                    ],\\n                }\\n            );\\n        };\\n    })();\\n    hljs.registerLanguage(\\\"wikitext\\\", e);\\n})();\",\"created\":\"20250503150109585\",\"modified\":\"20250503150558259\",\"module-type\":\"highlighter\",\"tags\":\"wiki语言高亮\",\"type\":\"application/javascript\"},\"$:/plugins/dyp/WikiText-highlight/readme\":{\"title\":\"$:/plugins/dyp/WikiText-highlight/readme\",\"created\":\"20250503145111658\",\"modified\":\"20250503150708961\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"; wiki语言高亮\\n\\n\\\"\\\"\\\"\\n需要确保先安装了插件\\n[[$:/plugins/tiddlywiki/highlight]]\\n否则报错\\n\\\"\\\"\\\"\"},\"$:/plugins/dyp/WikiText-highlight/usage\":{\"title\":\"$:/plugins/dyp/WikiText-highlight/usage\",\"created\":\"20250503145118986\",\"modified\":\"20250503150702369\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"使用 `tw`，`tid`，`tiddlywiki` 或者 `wikitext` 作为代码块限定符，例如：\\n\\n```tw\\n ```tw\\n wikitext内容\\n ```\\n```\\n\\n或者\\n\\n```tw\\n ```tid\\n wikitext内容\\n ```\\n```\\n\\n进阶使用技巧：\\n\\n修改 [[Utility|$:/plugins/kookma/utility]] 中的 [[$:/plugins/kookma/utility/viewtemplates/source-toggle-button]]\\n\\n\\n```tw\\n<$transclude $variable=\\\"code\\\" language={{{ [{!!title}get[type]else[tw]] }}} src={{!!text}} />\\n```\\n\\n注：新版 [[$:/plugins/kookma/utility]] 插件记得勾选 `Show toolbar controls on shadow tiddlers`，不然无法编辑系统文件\"},\"wiki语言高亮代码块背景颜色css\":{\"title\":\"wiki语言高亮代码块背景颜色css\",\"created\":\"20250520022102786\",\"modified\":\"20250520022909182\",\"tags\":\"$:/tags/Stylesheet 样式\",\"text\":\".hljs {\\n  background-color: <<colour pre-background>>;\\n}\"},\"wiki语言高亮示例\":{\"title\":\"wiki语言高亮示例\",\"created\":\"20240201045713937\",\"modified\":\"20250503150558259\",\"tags\":\"wiki语言高亮\",\"text\":\"!!!''基本格式''\\n\\n```tw\\n''粗体''\\n//斜体//\\n__下划线__\\n^^上标^^\\n,,下标,,\\n~~删除线~~\\n`代码`\\n@@高亮@@\\n```\\n\\n!!!''标题''\\n\\n```tw\\n! 这是一级标题\\n!!.class 这是二级标题\\n!!! 这是三级标题\\n```\\n!!!''列表和引用块''\\n\\n```tw\\n!列表\\n* 列表项\\n\\n!数字列表\\n# 数字列表项\\n\\n!混合列表\\n*# 混合列表项1\\n#* 混合列表项2\\n\\n!引用块\\n<<<\\n这是一个块引用的段落\\n<<<\\n\\n!单行引用块\\n> 引用块\\n>> 子引用块\\n\\n!混合引用块\\n* 列表项1\\n*> 一个引用块\\n*> 另一个引用块\\n* 列表项2\\n```\\n\\n!!!''链接''\\n\\n```tw\\n[[Tiddler Title]]\\n[[Displayed Link Title|Tiddler Title]]\\nhttps://tiddlywiki.com/\\n*[[TW5|https://tiddlywiki.com/]]\\n#[[Mail me|mailto:me@where.net]]\\n>[[Open file|file:///c:/users/me/index.html]]\\n```\\n\\n!!!''图片''\\n\\n```tw\\n[img[Motovun Jack.jpg]]\\n[img[https://tiddlywiki.com/favicon.ico]]\\n[img[An explanatory tooltip|Motovun Jack.jpg]]\\n[img width=32 [Motovun Jack.jpg]]\\n```\\n!!!''表格''\\n\\n```tw\\n|!Heading1 | !Heading2 | !Heading3|\\n|data | data | data|\\n|data | data | data|\\n| footer | footer| footer|f\\n| caption |c\\n\\n|heading |heading | heading|h\\n|data |data |data |\\n|data |data |data |\\n|class1 class2|k\\n```\\n\\n!!!''HTML''\\n\\n```tw\\n<div class=\\\"hello\\\"></div>\\n<div></div>\\n<style>\\nbody {color: blue;}\\nimg {left: 10px;}\\n.red {color: red;}\\n</style>\\n<img>\\n<a href=\\\"https://tiddlywiki.com/\\\">link</a>\\n<div style=\\\"position:relative;\\\" class={{{ [<listItem>encodeuricomponent[]addprefix[tc-btn-]] }}}>\\n```\\n\\n!!!''Transclusion''\\n\\n```tw\\n{{MyTiddler}} transcludes a single tiddler\\n{{MyTiddler||TemplateTitle}} displays the tiddler through a specified TemplateTiddler\\n{{||TemplateTitle}} displays the specified template tiddler without altering the current tiddler\\n\\n!Transcluding Text References\\n{{MyTiddler!!field}} transcludes a specified field of a tiddler\\n{{!!field}} transcludes a specified field of the current tiddler\\n{{MyTiddler##index}} transcludes a specified indexed property of a DataTiddler\\n{{##index}} transcludes a specified indexed property of the current DataTiddler\\n\\n!Filtered Transclusion\\n{{{ [tag[mechanism]] }}}\\n{{{ [tag[mechanism]] ||TemplateTitle}}}\\n```\\n\\n!!!''Widgets''\\n\\n```tw\\n<$button message=\\\"tm-navigate\\\" to=\\\"HelloThere\\\">Open ~HelloThere</$button>\\n<$view field='goodbye'>\\n<$text text={{something}}>\\n\\n<$let target=\\\"MyTiddler\\\" currentTiddler={{{ [<target>prefix[$:/settings/for/]] }}} settings={{!!text}} currentTiddler=<<target>> >\\n  The settings for <<currentTiddler>> are: <<settings>>\\n</$let>\\n\\n<$list filter=\\\"[all[shadows+tiddlers]tag[$:/tags/PageControls]!has[draft.of]]\\\" variable=\\\"listItem\\\">\\n```\\n\\n!!!''Macros''\\n\\n```tw\\n\\\\define sayhi(name:\\\"Bugs Bunny\\\" address:\\\"Rabbit Hole Hill\\\")\\nHi, I'm $name$ and I live in $address$.\\n\\\\end\\n\\n<<.tip \\\"The latest and most useful links are now being gathered in the [[Community Links Aggregator]].\\\">>\\n\\n<<tabs \\\"Forums Latest Tutorials [[Community Editions]] [[Community Plugins]] [[Community Themes]] [[Community Palettes]] [[Other Resources]] Examples Articles Meetups\\\" \\\"Latest\\\">>\\n\\n<<tabs {{Transclusion}}>>\\n```\"}}}"}