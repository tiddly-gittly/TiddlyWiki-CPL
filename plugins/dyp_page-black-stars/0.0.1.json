{"created":"20250514135919415","title":"$:/plugins/dyp/page-black-stars","stability":"STABILITY_2_STABLE","modified":"20250514140026622","version":"0.0.1","name":"page-black-stars","description":"动态背景-黑夜星空","author":"dyp","list":"readme usage history","source":"https://github.com/dyp1121054136/dyp-plugins-library","packaged-by":"Gatha on 14th 五月 2025, 22:00:34","plugin-type":"plugin","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/dyp/page-black-stars/readme\":{\"title\":\"$:/plugins/dyp/page-black-stars/readme\",\"created\":\"20250514140000414\",\"modified\":\"20250514140008582\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"; 动态背景-黑夜星空\"},\"$:/plugins/dyp/page-black-stars/usage\":{\"title\":\"$:/plugins/dyp/page-black-stars/usage\",\"created\":\"20250514140011134\",\"modified\":\"20250514140018311\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"[[动态背景-黑夜星空]] 添加标签 `$:/tags/RawMarkup`，保存后刷新生效\\n\"},\"动态背景-黑夜星空\":{\"title\":\"动态背景-黑夜星空\",\"code-body\":\"yes\",\"created\":\"20250514134619597\",\"modified\":\"20250514135909503\",\"tags\":\"动态背景\",\"text\":\"<html>\\n<head>\\n<style>\\n.black-stars {\\n    position: fixed;\\n    bottom: 0;\\n    left: 0; /* 确保从左边开始，覆盖整个宽度 */\\n    width: 100vw; /* 使用视口宽度，包括滚动条 */\\n    z-index: -1; /* 确保背景在最底层 */\\n}\\n</style>\\n</head>\\n<body>\\n    <canvas id=\\\"black-stars\\\" class=\\\"black-stars\\\"></canvas>\\n\\n    <script>\\n\\\"use strict\\\";\\n\\nvar canvas = document.getElementById('black-stars'),\\n  ctx = canvas.getContext('2d'),\\n  w = canvas.width = window.innerWidth,\\n  h = canvas.height = window.innerHeight,\\n    \\n  hue = 217,\\n  stars = [],\\n  count = 0,\\n  maxStars = 1400;\\n\\nvar canvas2 = document.createElement('canvas'),\\n    ctx2 = canvas2.getContext('2d');\\n    canvas2.width = 100;\\n    canvas2.height = 100;\\nvar half = canvas2.width/2,\\n    gradient2 = ctx2.createRadialGradient(half, half, 0, half, half, half);\\n    gradient2.addColorStop(0.025, '#fff');\\n    gradient2.addColorStop(0.1, 'hsl(' + hue + ', 61%, 33%)');\\n    gradient2.addColorStop(0.25, 'hsl(' + hue + ', 64%, 6%)');\\n    gradient2.addColorStop(1, 'transparent');\\n\\n    ctx2.fillStyle = gradient2;\\n    ctx2.beginPath();\\n    ctx2.arc(half, half, half, 0, Math.PI * 2);\\n    ctx2.fill();\\n\\n// End cache\\n\\nfunction random(min, max) {\\n  if (arguments.length < 2) {\\n    max = min;\\n    min = 0;\\n  }\\n  \\n  if (min > max) {\\n    var hold = max;\\n    max = min;\\n    min = hold;\\n  }\\n\\n  return Math.floor(Math.random() * (max - min + 1)) + min;\\n}\\n\\nfunction maxOrbit(x,y) {\\n  var max = Math.max(x,y),\\n      diameter = Math.round(Math.sqrt(max*max + max*max));\\n  return diameter/2;\\n}\\n\\nvar Star = function() {\\n\\n  this.orbitRadius = random(maxOrbit(w,h));\\n  this.radius = random(60, this.orbitRadius) / 12;\\n  this.orbitX = w / 2;\\n  this.orbitY = h / 2;\\n  this.timePassed = random(0, maxStars);\\n  this.speed = random(this.orbitRadius) / 500000;\\n  this.alpha = random(2, 10) / 10;\\n\\n  count++;\\n  stars[count] = this;\\n}\\n\\nStar.prototype.draw = function() {\\n  var x = Math.sin(this.timePassed) * this.orbitRadius + this.orbitX,\\n      y = Math.cos(this.timePassed) * this.orbitRadius + this.orbitY,\\n      twinkle = random(10);\\n\\n  if (twinkle === 1 && this.alpha > 0) {\\n    this.alpha -= 0.05;\\n  } else if (twinkle === 2 && this.alpha < 1) {\\n    this.alpha += 0.05;\\n  }\\n\\n  ctx.globalAlpha = this.alpha;\\n    ctx.drawImage(canvas2, x - this.radius / 2, y - this.radius / 2, this.radius, this.radius);\\n  this.timePassed += this.speed;\\n}\\n\\nfor (var i = 0; i < maxStars; i++) {\\n  new Star();\\n}\\n\\nfunction animation() {\\n    ctx.globalCompositeOperation = 'source-over';\\n    ctx.globalAlpha = 0.8;\\n    ctx.fillStyle = 'hsla(' + hue + ', 64%, 6%, 1)';\\n    ctx.fillRect(0, 0, w, h)\\n  \\n  ctx.globalCompositeOperation = 'lighter';\\n  for (var i = 1, l = stars.length; i < l; i++) {\\n    stars[i].draw();\\n  };  \\n  \\n  window.requestAnimationFrame(animation);\\n}\\n\\nanimation();\\n    </script>\\n</body>\\n</html>\\n\"}}}"}