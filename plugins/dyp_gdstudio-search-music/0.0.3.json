{"title":"$:/plugins/dyp/gdstudio-search-music","version":"0.0.3","stability":"STABILITY_2_STABLE","name":"gdstudio-search-music","description":"GD音乐库在线听歌","author":"dyp","source":"https://github.com/dyp1121054136/dyp-plugins-library","list":"readme usage history","plugin-priority":"","parent-plugin":"","dependents":"","plugin-type":"plugin","core-version":"5.3.7-prerelease","packaged-by":"Gatha on 29th 五月 2025, 14:31:49","type":"application/json","text":"{\"tiddlers\":{\"$:/core/images/gdstudio-play-music\":{\"title\":\"$:/core/images/gdstudio-play-music\",\"created\":\"20250528132634777\",\"modified\":\"20250528132842039\",\"tags\":\"$:/tags/Image 图标 gdstudio\",\"text\":\"\\\\parameters (size:\\\"22pt\\\")\\n\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=<<size>> height=<<size>> class=\\\"bi bi-play-circle tc-image-button\\\" viewBox=\\\"0 0 16 16\\\">\\n  <path d=\\\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\\\"/>\\n  <path d=\\\"M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z\\\"/>\\n</svg>\"},\"$:/core/images/gdstudio-search-music\":{\"title\":\"$:/core/images/gdstudio-search-music\",\"created\":\"20250529061556039\",\"modified\":\"20250529061627223\",\"tags\":\"$:/tags/Image 图标 gdstudio\",\"text\":\"\\\\parameters (size:\\\"22pt\\\")\\n\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=<<size>> height=<<size>> class=\\\"bi bi-music-note-list tc-image-button\\\" viewBox=\\\"0 0 16 16\\\">\\n  <path d=\\\"M12 13c0 1.105-1.12 2-2.5 2S7 14.105 7 13s1.12-2 2.5-2 2.5.895 2.5 2z\\\"/>\\n  <path fill-rule=\\\"evenodd\\\" d=\\\"M12 3v10h-1V3h1z\\\"/>\\n  <path d=\\\"M11 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 16 2.22V4l-5 1V2.82z\\\"/>\\n  <path fill-rule=\\\"evenodd\\\" d=\\\"M0 11.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 .5 7H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 .5 3H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5z\\\"/>\\n</svg>\"},\"$:/core/modules/widgets/lyric-display.js\":{\"title\":\"$:/core/modules/widgets/lyric-display.js\",\"created\":\"20250529133501913\",\"modified\":\"20250529144400784\",\"module-type\":\"widget\",\"tags\":\"动态歌词 gdstudio\",\"type\":\"application/javascript\",\"text\":\"/*\\\\  \\ntitle: $:/core/modules/widgets/lyric-display.js  \\ntype: application/javascript  \\nmodule-type: widget  \\n  \\n歌词显示widget  \\n\\\\*/  \\n\\\"use strict\\\";  \\n  \\nvar Widget = require(\\\"$:/core/modules/widgets/widget.js\\\").widget;  \\n  \\nvar LyricDisplayWidget = function(parseTreeNode,options) {  \\n    this.initialise(parseTreeNode,options);  \\n};  \\n  \\nLyricDisplayWidget.prototype = new Widget();  \\n  \\nLyricDisplayWidget.prototype.render = function(parent,nextSibling) {  \\n    this.parentDomNode = parent;  \\n    this.computeAttributes();  \\n    this.execute();  \\n    this.domNode = this.document.createElement(\\\"div\\\");  \\n    this.domNode.className = \\\"lyric-display-container\\\";  \\n    this.domNode.style.overflow = \\\"hidden\\\";  \\n      \\n    // 创建滚动容器  \\n    this.scrollContainer = this.document.createElement(\\\"div\\\");  \\n    this.scrollContainer.style.transition = \\\"transform 0.3s ease\\\";  \\n    this.scrollContainer.style.transform = \\\"translateY(0px)\\\";  \\n    this.domNode.appendChild(this.scrollContainer);  \\n      \\n    parent.insertBefore(this.domNode,nextSibling);  \\n    this.domNodes.push(this.domNode);  \\n      \\n    this.updateDisplay();  \\n};  \\n  \\nLyricDisplayWidget.prototype.execute = function() {  \\n    this.lyricTiddler = this.getAttribute(\\\"lyric-tiddler\\\");  \\n    this.showLines = parseInt(this.getAttribute(\\\"show-lines\\\", \\\"3\\\"));  \\n    this.currentLineState = this.getAttribute(\\\"current-line-state\\\", \\\"$:/state/gdstudio-api/current-lyric-line\\\");  \\n    this.parsedLyrics = this.parseLyrics();  \\n    this.lastCurrentLineIndex = -1;  \\n};  \\n  \\nLyricDisplayWidget.prototype.getLineHeight = function() {  \\n    // 如果已经有歌词行，直接使用第一行的高度  \\n    if (this.scrollContainer.children.length > 0) {  \\n        return this.scrollContainer.children[0].offsetHeight;  \\n    }  \\n      \\n    // 否则创建临时元素  \\n    var tempElement = this.document.createElement(\\\"div\\\");  \\n    tempElement.className = \\\"lyric-line\\\";  \\n    tempElement.style.visibility = \\\"hidden\\\";  \\n    tempElement.style.position = \\\"absolute\\\";  \\n    tempElement.style.top = \\\"-9999px\\\";  \\n    tempElement.textContent = \\\"测试文本\\\";  \\n      \\n    this.domNode.appendChild(tempElement);  \\n    var actualHeight = tempElement.offsetHeight;  \\n    this.domNode.removeChild(tempElement);  \\n      \\n    return actualHeight || 40;  \\n};  \\n  \\nLyricDisplayWidget.prototype.parseLyrics = function() {  \\n    if (!this.lyricTiddler) return [];  \\n    var lyricText = this.wiki.getTiddlerText(this.lyricTiddler, \\\"\\\");  \\n    return lyricText.split('\\\\n')  \\n        .map(function(line) {  \\n            var match = line.match(/^\\\\[([0-9]{2}):([0-9]{2})\\\\.([0-9]{1,9})\\\\]\\\\s*(.*)$/);  \\n            if (!match) return null;  \\n            var timeInSeconds = parseInt(match[1]) * 60 + parseInt(match[2]) + parseInt(match[3]) / Math.pow(10, match[3].length);  \\n            return {  \\n                time: timeInSeconds,  \\n                text: match[4]  \\n            };  \\n        })  \\n        .filter(Boolean)  \\n        .sort(function(a, b) {  \\n            return a.time - b.time;  \\n        });  \\n};  \\n  \\nLyricDisplayWidget.prototype.updateDisplay = function() {  \\n    if (!this.domNode || !this.scrollContainer) return;  \\n      \\n    if (this.parsedLyrics.length === 0) {  \\n        this.scrollContainer.innerHTML = \\\"\\\";  \\n        this.scrollContainer.textContent = \\\"无歌词\\\";  \\n        return;  \\n    }  \\n      \\n    var currentLineIndex = parseInt(this.wiki.getTiddlerText(this.currentLineState, \\\"-1\\\"));  \\n      \\n    // 如果是第一次渲染，创建所有歌词行  \\n    if (this.scrollContainer.children.length === 0) {  \\n        this.renderAllLyrics();  \\n    }  \\n      \\n    // 确保行高已设置（无论是否第一次渲染）  \\n    if (!this.lineHeight) {  \\n        this.lineHeight = this.getLineHeight();  \\n    }  \\n      \\n    // 更新高亮状态  \\n    this.updateHighlight(currentLineIndex);  \\n      \\n    // 计算滚动位置  \\n    if (currentLineIndex >= 0 && currentLineIndex !== this.lastCurrentLineIndex) {  \\n        this.scrollToLine(currentLineIndex);  \\n    }  \\n      \\n    this.lastCurrentLineIndex = currentLineIndex;  \\n};  \\n  \\nLyricDisplayWidget.prototype.renderAllLyrics = function() {  \\n    this.scrollContainer.innerHTML = \\\"\\\";  \\n    for (var i = 0; i < this.parsedLyrics.length; i++) {  \\n        var lineDiv = this.document.createElement(\\\"div\\\");  \\n        lineDiv.className = \\\"lyric-line\\\";  \\n        lineDiv.textContent = this.parsedLyrics[i].text;  \\n        lineDiv.setAttribute(\\\"data-line-index\\\", i);  \\n        this.scrollContainer.appendChild(lineDiv);  \\n    }  \\n};  \\n  \\nLyricDisplayWidget.prototype.updateHighlight = function(currentLineIndex) {  \\n    var lines = this.scrollContainer.querySelectorAll('.lyric-line');  \\n    for (var i = 0; i < lines.length; i++) {  \\n        var line = lines[i];  \\n        if (i === currentLineIndex) {  \\n            line.className = \\\"lyric-line lyric-current\\\";  \\n        } else {  \\n            line.className = \\\"lyric-line\\\";  \\n        }  \\n    }  \\n};  \\n  \\nLyricDisplayWidget.prototype.scrollToLine = function(lineIndex) {  \\n    if (lineIndex < 0) return;  \\n      \\n    // 确保行高已设置  \\n    if (!this.lineHeight) {  \\n        this.lineHeight = this.getLineHeight();  \\n    }  \\n      \\n    // 计算目标位置，让当前行显示在中间  \\n    var centerOffset = Math.floor(this.showLines / 2);  \\n    var targetOffset = (lineIndex - centerOffset) * this.lineHeight;  \\n      \\n    // 限制滚动范围  \\n    var maxOffset = Math.max(0, (this.parsedLyrics.length - this.showLines) * this.lineHeight);  \\n    targetOffset = Math.max(0, Math.min(targetOffset, maxOffset));  \\n      \\n    // 应用滚动动画  \\n    this.scrollContainer.style.transform = \\\"translateY(-\\\" + targetOffset + \\\"px)\\\";  \\n};  \\n  \\nLyricDisplayWidget.prototype.refresh = function(changedTiddlers) {  \\n    var changedAttributes = this.computeAttributes();  \\n      \\n    // 如果歌词内容变化，需要完全刷新  \\n    if (changedAttributes[\\\"lyric-tiddler\\\"] || changedTiddlers[this.lyricTiddler]) {  \\n        this.refreshSelf();  \\n        return true;  \\n    }  \\n      \\n    // 如果只是当前行变化，只更新显示  \\n    if (changedTiddlers[this.currentLineState]) {  \\n        var currentLineIndex = parseInt(this.wiki.getTiddlerText(this.currentLineState, \\\"-1\\\"));  \\n        if (currentLineIndex !== this.lastCurrentLineIndex) {  \\n            this.updateDisplay();  \\n        }  \\n        return true;  \\n    }  \\n      \\n    return false;  \\n};  \\n  \\nexports[\\\"lyric-display\\\"] = LyricDisplayWidget;\\n\"},\"$:/core/modules/widgets/lyric-sync.js\":{\"title\":\"$:/core/modules/widgets/lyric-sync.js\",\"created\":\"20250529133321082\",\"modified\":\"20250529144406776\",\"module-type\":\"widget\",\"tags\":\"动态歌词 gdstudio\",\"type\":\"application/javascript\",\"text\":\"/*\\\\\\ntitle: $:/core/modules/widgets/lyric-sync.js\\ntype: application/javascript\\nmodule-type: widget\\n\\n歌词同步widget\\n\\\\*/\\n\\n\\\"use strict\\\";\\n\\nvar Widget = require(\\\"$:/core/modules/widgets/widget.js\\\").widget;\\n\\nvar LyricSyncWidget = function(parseTreeNode,options) {\\n    this.initialise(parseTreeNode,options);\\n};\\n\\nLyricSyncWidget.prototype = new Widget();\\n\\nLyricSyncWidget.prototype.render = function(parent,nextSibling) {\\n    this.parentDomNode = parent;\\n    this.computeAttributes();\\n    this.execute();\\n    \\n    var domNode = this.document.createElement(\\\"div\\\");\\n    domNode.className = \\\"lyric-sync-container\\\";\\n    \\n    this.renderChildren(domNode,null);\\n    \\n    parent.insertBefore(domNode,nextSibling);\\n    this.domNodes.push(domNode);\\n    \\n    this.initLyricSync();\\n};\\n\\nLyricSyncWidget.prototype.execute = function() {\\n    this.lyricTiddler = this.getAttribute(\\\"lyric-tiddler\\\");\\n    this.currentLineState = this.getAttribute(\\\"current-line-state\\\", \\\"$:/state/gdstudio-api/current-lyric-line\\\");\\n    this.makeChildWidgets();\\n};\\n\\nLyricSyncWidget.prototype.initLyricSync = function() {\\n    this.parsedLyrics = this.parseLyrics();\\n    this.lastLineIndex = -1;\\n    this.bindToAudioElement();\\n};\\n\\nLyricSyncWidget.prototype.bindToAudioElement = function() {\\n    var self = this;\\n    if (this.audioEventsBound || !$tw.browser) return;\\n    \\n    this.timeUpdateHandler = function(event) {\\n        if (event.target.tagName && event.target.tagName.toLowerCase() === 'audio') {\\n            self.updateCurrentLyric(event.target.currentTime);\\n        }\\n    };\\n    \\n    document.addEventListener('timeupdate', this.timeUpdateHandler, {passive: true, capture: true});\\n    document.addEventListener('seeked', this.timeUpdateHandler, {passive: true, capture: true});\\n    this.audioEventsBound = true;\\n};\\n\\nLyricSyncWidget.prototype.parseLyrics = function() {\\n    if (!this.lyricTiddler) return [];\\n    \\n    var lyricText = this.wiki.getTiddlerText(this.lyricTiddler, \\\"\\\");\\n    return lyricText.split('\\\\n')\\n        .map(function(line) {\\n            var match = line.match(/^\\\\[([0-9]{2}):([0-9]{2})\\\\.([0-9]{1,9})\\\\]\\\\s*(.*)$/);\\n            if (!match) return null;\\n            \\n            var timeInSeconds = parseInt(match[1]) * 60 + parseInt(match[2]) + parseInt(match[3]) / Math.pow(10, match[3].length);\\n            return {\\n                time: timeInSeconds,\\n                text: match[4]\\n            };\\n        })\\n        .filter(Boolean)\\n        .sort(function(a, b) { return a.time - b.time; });\\n};\\n\\nLyricSyncWidget.prototype.updateCurrentLyric = function(currentTime) {\\n    var currentLineIndex = -1;\\n    \\n    for (var i = 0; i < this.parsedLyrics.length; i++) {\\n        if (this.parsedLyrics[i].time <= currentTime) {\\n            currentLineIndex = i;\\n        } else {\\n            break;\\n        }\\n    }\\n    \\n    if (this.lastLineIndex !== currentLineIndex) {\\n        this.lastLineIndex = currentLineIndex;\\n        this.wiki.addTiddler({\\n            title: this.currentLineState,\\n            text: currentLineIndex.toString()\\n        });\\n    }\\n};\\n\\nLyricSyncWidget.prototype.removeFromDocument = function() {\\n    if (this.audioEventsBound && $tw.browser) {\\n        document.removeEventListener('timeupdate', this.timeUpdateHandler, {passive: true, capture: true});\\n        document.removeEventListener('seeked', this.timeUpdateHandler, {passive: true, capture: true});\\n        this.audioEventsBound = false;\\n        this.timeUpdateHandler = null;\\n    }\\n    Widget.prototype.removeFromDocument.call(this);\\n};\\n\\nLyricSyncWidget.prototype.refresh = function(changedTiddlers) {\\n    var changedAttributes = this.computeAttributes();\\n    if (changedAttributes[\\\"lyric-tiddler\\\"] || changedTiddlers[this.lyricTiddler]) {\\n        this.refreshSelf();\\n        return true;\\n    }\\n    return this.refreshChildren(changedTiddlers);\\n};\\n\\nexports[\\\"lyric-sync\\\"] = LyricSyncWidget;\\n\"},\"$:/core/ui/Buttons/gdstudio-search-music\":{\"title\":\"$:/core/ui/Buttons/gdstudio-search-music\",\"caption\":\"{{$:/core/images/gdstudio-search-music}} 打开搜索音乐\",\"created\":\"20250529061651198\",\"description\":\"打开搜索音乐\",\"modified\":\"20250529062624832\",\"tags\":\"按钮 $:/tags/PageControls gdstudio\",\"text\":\"\\\\whitespace trim\\n<$button tooltip=\\\"打开搜索音乐\\\" class=<<tv-config-toolbar-class>>>\\n<$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\n{{$:/core/images/gdstudio-search-music|22px}}\\n</$list>\\n<$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\n<span class=\\\"tc-btn-text\\\">\\n<$text text=打开搜索音乐/>\\n</span>\\n</$list>\\n\\n<$action-navigate $to=\\\"gdstudio-搜索音乐\\\"/>\\n\\n</$button>\\n\"},\"$:/plugins/dyp/gdstudio-search-music/history\":{\"title\":\"$:/plugins/dyp/gdstudio-search-music/history\",\"created\":\"20250529063124818\",\"modified\":\"20250529063130800\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"; v.0.0.3 2025-05-30\\n\\n优化动态歌词滚动动画，平滑过渡，优化歌词排版\\n\\n; v.0.0.2 2025-05-29\\n\\n新增动态歌词功能，主要依赖两个新增 `widget`：\\n\\n[[$:/core/modules/widgets/lyric-sync.js]]\\n\\n[[$:/core/modules/widgets/lyric-display.js]]\\n\\n```tw\\n<!-- 添加歌词同步功能 -->\\n<$lyric-sync lyric-tiddler=\\\"$:/state/gdstudio-api/lyric\\\" audio-selector=\\\"audio\\\">\\n<$lyric-display lyric-tiddler=\\\"$:/state/gdstudio-api/lyric\\\" show-lines=\\\"5\\\"/>\\n</$lyric-sync>\\n```\\n\"},\"$:/plugins/dyp/gdstudio-search-music/readme\":{\"title\":\"$:/plugins/dyp/gdstudio-search-music/readme\",\"created\":\"20250529062820740\",\"modified\":\"20250529063110806\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"; GD音乐库在线听歌\\n\\n使用gdstudio-api搭建的音乐播放器，可以搜索歌曲并播放。\\n\\ngdstudio-api源网站：\\n\\nhttps://music.gdstudio.xyz\\n\\nhttps://space.bilibili.com/13715770\\n\"},\"$:/plugins/dyp/gdstudio-search-music/usage\":{\"title\":\"$:/plugins/dyp/gdstudio-search-music/usage\",\"created\":\"20250529063114438\",\"modified\":\"20250529063122309\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\"},\"$:/state/gdstudio-api/br\":{\"title\":\"$:/state/gdstudio-api/br\",\"created\":\"20250528080251005\",\"modified\":\"20250529015414616\",\"tags\":\"音乐 gdstudio\",\"text\":\"320\"},\"$:/state/gdstudio-api/cover-url\":{\"title\":\"$:/state/gdstudio-api/cover-url\",\"created\":\"20250528095524556\",\"modified\":\"20250529022458101\",\"tags\":\"音乐 gdstudio\"},\"$:/state/gdstudio-api/keyword\":{\"title\":\"$:/state/gdstudio-api/keyword\",\"created\":\"20250528061315602\",\"modified\":\"20250529022451889\",\"tags\":\"音乐 gdstudio\",\"text\":\"湖心亭\\n\"},\"$:/state/gdstudio-api/lyric-id\":{\"title\":\"$:/state/gdstudio-api/lyric-id\",\"created\":\"20250528064732829\",\"modified\":\"20250529022457476\",\"tags\":\"音乐 gdstudio\"},\"$:/state/gdstudio-api/lyric-url\":{\"title\":\"$:/state/gdstudio-api/lyric-url\",\"created\":\"20250528095539358\",\"modified\":\"20250529022458505\",\"tags\":\"音乐 gdstudio\",\"text\":\"\"},\"$:/state/gdstudio-api/lyric\":{\"title\":\"$:/state/gdstudio-api/lyric\",\"created\":\"20250528104251340\",\"modified\":\"20250529022459240\",\"tags\":\"音乐 gdstudio\"},\"$:/state/gdstudio-api/music-source\":{\"title\":\"$:/state/gdstudio-api/music-source\",\"created\":\"20250528061251293\",\"modified\":\"20250529021332800\",\"tags\":\"音乐 gdstudio\",\"text\":\"netease\"},\"$:/state/gdstudio-api/music-url\":{\"title\":\"$:/state/gdstudio-api/music-url\",\"created\":\"20250528075656127\",\"modified\":\"20250529022458525\",\"tags\":\"音乐 gdstudio\"},\"$:/state/gdstudio-api/page-length\":{\"title\":\"$:/state/gdstudio-api/page-length\",\"created\":\"20250528061342958\",\"modified\":\"20250528132403658\",\"tags\":\"音乐 gdstudio\",\"text\":\"10\"},\"$:/state/gdstudio-api/page-num\":{\"title\":\"$:/state/gdstudio-api/page-num\",\"created\":\"20250528061358178\",\"modified\":\"20250528132403659\",\"tags\":\"音乐 gdstudio\",\"text\":\"1\"},\"$:/state/gdstudio-api/pic-id\":{\"title\":\"$:/state/gdstudio-api/pic-id\",\"created\":\"20250528064732827\",\"modified\":\"20250529022457475\",\"tags\":\"音乐 gdstudio\"},\"$:/state/gdstudio-api/searchResults\":{\"title\":\"$:/state/gdstudio-api/searchResults\",\"created\":\"20250528055947566\",\"modified\":\"20250529022453665\",\"tags\":\"音乐 gdstudio\"},\"$:/state/gdstudio-api/size\":{\"title\":\"$:/state/gdstudio-api/size\",\"created\":\"20250528080336537\",\"modified\":\"20250528132403664\",\"tags\":\"音乐 gdstudio\",\"text\":\"300\"},\"$:/state/gdstudio-api/track-id\":{\"title\":\"$:/state/gdstudio-api/track-id\",\"created\":\"20250528064732824\",\"modified\":\"20250529022457473\",\"tags\":\"音乐 gdstudio\"},\"fetch请求音乐api定义procedure\":{\"title\":\"fetch请求音乐api定义procedure\",\"created\":\"20250528055416875\",\"modified\":\"20250528132403684\",\"tags\":\"音乐 $:/tags/Macro gdstudio\",\"text\":\"\\\\procedure gdstudio-search-output()  \\n<$action-setfield $tiddler=\\\"$:/state/gdstudio-api/searchResults\\\" text=<<data>>/>  \\n\\\\end\\n\\n\\\\procedure gdstudio-search-http-get()  \\n\\t<$action-sendmessage  \\n\\t\\t$message=\\\"tm-http-request\\\"  \\n\\t\\turl=\\\"https://music-api.gdstudio.xyz/api.php\\\"  \\n\\t\\tquery-types=\\\"search\\\"  \\n\\t\\tquery-source={{$:/state/gdstudio-api/music-source}}  \\n\\t\\tquery-name={{$:/state/gdstudio-api/keyword}}  \\n\\t\\tquery-count={{$:/state/gdstudio-api/page-length}}  \\n\\t\\tquery-pages={{$:/state/gdstudio-api/page-num}}  \\n\\t\\tbind-status=status  \\n\\t\\tbind-progress=progress  \\n\\t\\tmethod=\\\"GET\\\"  \\n\\t\\toncompletion=<<gdstudio-search-output>>  \\n\\t/>  \\n\\\\end\\n\\n音乐源：<$select tiddler=\\\"$:/state/gdstudio-api/music-source\\\" default=\\\"netease\\\">  \\n<option value=\\\"netease\\\">网易云音乐 (netease)</option>  \\n<option value=\\\"tencent\\\">QQ音乐 (tencent)</option>  \\n<option value=\\\"tidal\\\">Tidal</option>  \\n<option value=\\\"spotify\\\">Spotify</option>  \\n<option value=\\\"ytmusic\\\">YouTube Music</option>  \\n<option value=\\\"qobuz\\\">Qobuz</option>  \\n<option value=\\\"joox\\\">JOOX</option>  \\n<option value=\\\"deezer\\\">Deezer</option>  \\n<option value=\\\"migu\\\">咪咕音乐 (migu)</option>  \\n<option value=\\\"kugou\\\">酷狗音乐 (kugou)</option>  \\n<option value=\\\"kuwo\\\">酷我音乐 (kuwo)</option>  \\n<option value=\\\"ximalaya\\\">喜马拉雅 (ximalaya)</option>  \\n</$select>\\n<br/>\\n关键词：<$edit-text tiddler=\\\"$:/state/gdstudio-api/keyword\\\" default=\\\"夜梦记\\\" tag=\\\"input\\\"/>\\n<br/>\\n每页数量：<$edit-text tiddler=\\\"$:/state/gdstudio-api/page-length\\\" default=\\\"20\\\" tag=\\\"input\\\"/>\\n<br/>\\n页码：<$edit-text tiddler=\\\"$:/state/gdstudio-api/page-num\\\" default=\\\"1\\\" tag=\\\"input\\\"/>\\n<br/>\\n<$button actions=<<gdstudio-search-http-get>>>搜索</$button>\"},\"fetch请求音乐api搜索\":{\"title\":\"fetch请求音乐api搜索\",\"created\":\"20250528061421728\",\"modified\":\"20250528132403686\",\"tags\":\"音乐 gdstudio\",\"text\":\"音乐源：<$select tiddler=\\\"$:/state/gdstudio-api/music-source\\\" default=\\\"netease\\\">  \\n<option value=\\\"netease\\\">网易云音乐 (netease)</option>  \\n<option value=\\\"tencent\\\">QQ音乐 (tencent)</option>  \\n<option value=\\\"tidal\\\">Tidal</option>  \\n<option value=\\\"spotify\\\">Spotify</option>  \\n<option value=\\\"ytmusic\\\">YouTube Music</option>  \\n<option value=\\\"qobuz\\\">Qobuz</option>  \\n<option value=\\\"joox\\\">JOOX</option>  \\n<option value=\\\"deezer\\\">Deezer</option>  \\n<option value=\\\"migu\\\">咪咕音乐 (migu)</option>  \\n<option value=\\\"kugou\\\">酷狗音乐 (kugou)</option>  \\n<option value=\\\"kuwo\\\">酷我音乐 (kuwo)</option>  \\n<option value=\\\"ximalaya\\\">喜马拉雅 (ximalaya)</option>  \\n</$select>\\n<br/>\\n关键词：<$edit-text tiddler=\\\"$:/state/gdstudio-api/keyword\\\" default=\\\"夜梦记\\\" tag=\\\"input\\\"/>\\n<br/>\\n每页数量：<$edit-text tiddler=\\\"$:/state/gdstudio-api/page-length\\\" default=\\\"20\\\" tag=\\\"input\\\"/>\\n<br/>\\n页码：<$edit-text tiddler=\\\"$:/state/gdstudio-api/page-num\\\" default=\\\"1\\\" tag=\\\"input\\\"/>\\n<br/>\\n<$button actions=<<gdstudio-search-http-get>>>搜索</$button>\"},\"gdstudio-audio样式css\":{\"title\":\"gdstudio-audio样式css\",\"created\":\"20250529043602077\",\"modified\":\"20250529062050246\",\"tags\":\"gdstudio 样式 $:/tags/Stylesheet\",\"text\":\"/* 以下样式是针对 WebKit/Blink 浏览器（Chrome, Safari, Edge）的默认控件美化 */\\n/* 注意：这些选择器在不同浏览器或版本中可能有细微差异，且不保证完全兼容所有浏览器 */\\n\\n.gdstudio-audio audio::-webkit-media-controls-panel {\\n    background-color: <<colour tiddler-background>>; /* 控件面板背景色 */\\n}\\n\\n.gdstudio-audio audio::-webkit-media-controls-mute-button,\\n.gdstudio-audio audio::-webkit-media-controls-play-button,\\n.gdstudio-audio audio::-webkit-media-controls-timeline-container,\\n.gdstudio-audio audio::-webkit-media-controls-rewind-button,\\n.gdstudio-audio audio::-webkit-media-controls-return-to-realtime-button,\\n.gdstudio-audio audio::-webkit-media-controls-toggle-closed-captions-button {\\n    background-color: <<colour tiddler-background>>; /* 按钮背景色 */\\n}\\n\\n.gdstudio-audio audio::-webkit-media-controls-mute-button:hover,\\n.gdstudio-audio audio::-webkit-media-controls-play-button:hover,\\n.gdstudio-audio audio::-webkit-media-controls-rewind-button:hover,\\n.gdstudio-audio audio::-webkit-media-controls-return-to-realtime-button:hover,\\n.gdstudio-audio audio::-webkit-media-controls-toggle-closed-captions-button:hover {\\n    background-color: transparent; /* 按钮悬停色 */\\n}\\n\\n.gdstudio-audio audio::-webkit-media-controls-timeline-container {\\n    background-color: transparent; /* 进度条背景色 */\\n}\\n\\n.gdstudio-audio audio::-webkit-media-controls-current-time-display,\\n.gdstudio-audio audio::-webkit-media-controls-time-remaining-display {\\n    color: <<colour foreground>>; /* 时间显示文字颜色 */\\n    font-size: 14px; /* 时间显示字体大小 */\\n}\\n\\n.gdstudio-audio {\\n  display: inline-block;\\n  width: auto; /* 确保宽度自动调整 */\\n  position: relative;\\n  top: -45px; /* 向上移动 -50px */\\n  left: 60px; /* 向右移动 180px */\\n  /* 等比缩小 */\\n  transform: scale(0.8);\\n\\n  /* 注意：scale 会缩放元素及其所有内容，包括可能的阴影等。\\n           如果需要保持元素占据的原有空间（视觉上看起来缩小了，但位置不变），\\n           需要添加 transform-origin: 0 0; 或 transform-origin: left top; */\\n  transform-origin: left top; /* 缩放以左上角为基准点 */\\n}\"},\"gdstudio-搜索音乐\":{\"title\":\"gdstudio-搜索音乐\",\"created\":\"20250528064705795\",\"modified\":\"20250529061510252\",\"tags\":\"音乐 gdstudio\",\"text\":\"<$transclude tiddler=\\\"音乐搜索界面优化版\\\"/>\\n\\n<br/>\\n\\n<$transclude tiddler=\\\"优化后的歌曲列表-与播放器集成\\\"/>\\n\\n<!-- \\n无需再次引用，音乐播放器已固定在页面上\\n<$transclude tiddler=\\\"添加HTML5音频播放器\\\"/> \\n-->\"},\"gdstudio\":{\"title\":\"gdstudio\",\"created\":\"20250528132415472\",\"modified\":\"20250528132433919\",\"tags\":\"导出\",\"type\":\"\",\"text\":\"<<filter-pill \\\"[tag[gdstudio]][[gdstudio]]\\\" gdstudio音乐api>>\"},\"gdstudio展示歌词\":{\"title\":\"gdstudio展示歌词\",\"created\":\"20250528150630488\",\"modified\":\"20250529061235084\",\"tags\":\"gdstudio\",\"text\":\"<$transclude tiddler=\\\"去除歌词时间戳\\\"/>\"},\"gdstudio歌词排版样式css\":{\"title\":\"gdstudio歌词排版样式css\",\"created\":\"20250528142454456\",\"modified\":\"20250529061215643\",\"tags\":\"gdstudio 样式 $:/tags/Stylesheet\",\"text\":\".lyric-body {\\n  font-family: \\\"FZYUEKZJW-H\\\";\\n  text-align: center; /* 文字水平居中 */\\n  line-height: 1.5; /* 行高 */\\n  letter-spacing: 0em; /* 增加字符间距 */\\n\\n  /* 硬式换行 */\\n  word-break: normal;\\n  word-wrap: break-word;\\n  white-space: pre-line; /* 连续的空白字符合并成一个空格 */\\n\\n  height: 90px; \\n  overflow-y: auto; \\n  margin: 5px 0; \\n  font-size: 1em; \\n\\n  -ms-overflow-style: none; /* IE和Edge */\\n  scrollbar-width: none; /* Firefox */\\n  overflow: auto; /* 保持滚动功能 */\\n\\n  background-color: transparent;\\n  position: fixed;\\n  top: ;\\n  left: 10px;\\n  bottom: 80px;\\n\\n  min-width: 300px;\\n}\\n\\n.lyric-body::-webkit-scrollbar {\\n  display: none; /* Chrome, Safari, Opera */\\n}\"},\"gdstudio音乐api宏macro\":{\"title\":\"gdstudio音乐api宏macro\",\"code-body\":\"yes\",\"created\":\"20250528053957388\",\"modified\":\"20250528132403692\",\"tags\":\"音乐 $:/tags/Macro gdstudio\",\"text\":\"\\\\define gdstudio-search(music-source, keyword, page-length, page-num)  \\nhttps://music-api.gdstudio.xyz/api.php?types=search&source=$music-source$&name=$keyword$&count=$page-length$&pages=$page-num$  \\n\\\\end\\n\\n\\\\define gdstudio-music(music-source, track-id, br)  \\nhttps://music-api.gdstudio.xyz/api.php?types=url&source=$music-source$&id=$track-id$&br=$br$\\n\\\\end\\n\\n\\\\define gdstudio-cover(music-source, pic-id, size)  \\nhttps://music-api.gdstudio.xyz/api.php?types=pic&source=$music-source$&id=$pic-id$&size=$size$\\n\\\\end\\n\\n\\\\define gdstudio-lyric(music-source, lyric-id)  \\nhttps://music-api.gdstudio.xyz/api.php?types=lyric&source=$music-source$&id=$lyric-id$\\n\\\\end\"},\"gdstudio音乐播放器样式css\":{\"title\":\"gdstudio音乐播放器样式css\",\"created\":\"20250528143453713\",\"modified\":\"20250529061046619\",\"tags\":\"gdstudio 样式 $:/tags/Stylesheet\",\"text\":\".gdstudio-music-body {\\n  background-color: <<colour tiddler-background>>;\\n  z-index: 0;\\n}\\n\\n.gdstudio-music-player {\\n  position: fixed;\\n  bottom: -60px;\\n  left: 0;\\n  max-width: 200px; / 设置最大宽度 /\\n  width: 100%; / 宽度占满可用空间 /\\n  background-color: <<colour tiddler-background>>;\\n  padding: 10px;\\n  margin: 0 auto; / 水平居中 /\\n  transform: translateX(50%); / 向右偏移自身宽度的50% /\\n  white-space: nowrap; / 防止内容换行 /\\n  overflow-x: auto; / 水平滚动条 /\\n  scrollbar-width: none; / 隐藏滚动条 /\\n  -ms-overflow-style: none; / IE和Edge /\\n}\\n\\n.gdstudio-music-player::-webkit-scrollbar {\\ndisplay: none; / Chrome, Safari, Opera /\\n}\\n\\n.gdstudio-music-name {\\n  font-size: 0.8em;\\n  background-color: transparent;\\n  position: relative;\\n  top: -20px;\\n  left: 0px;\\n  z-index: 999;\\n  height: 0.8em;\\n}\\n\\n.gdstudio-cover {\\n  display: flex; \\n  align-items: center; \\n  gap: 15px;\\n  background-color: <<colour tiddler-background>>;\\n  width: 300px;\\n}\\n\\n.gdstudio-button {\\n  opacity: 0.5;\\n  transition: opacity 0.5s ease-in-out;\\n}\\n\\n.gdstudio-button:hover {\\n  opacity: 1;\\n}\\n\\n.gdstudio-song-item {\\n  display: flex; \\n  justify-content: space-between; \\n  align-items: center; \\n  padding: 10px; \\n  border-bottom: \\n  1px solid <<colour foreground>>;\\n}\\n\\n.gdstudio-cover button {\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    transform: translate(-50%, -50%);\\n    background: none;\\n    border: none;\\n    cursor: pointer;\\n    padding: 0;\\n}\\n\\n/* 定义大屏宽度 */\\n.large-screen {\\n  width: 1000px;\\n}\\n\\n/* 定义小屏宽度 */\\n.small-screen {\\n  width: 350px;\\n}\\n\\n/* 媒体查询，大屏 */\\n@media (min-width: 768px) {\\n.gdstudio-song-item {\\n  margin: 0 5%; /* 添加左右边距 */\\n}\\n}\\n\\n/* 媒体查询，小屏 */\\n@media (max-width: 767px) {\\n.gdstudio-song-item {\\n  margin: 0 10%; /* 添加左右边距 */\\n}\\n}\"},\"优化后的歌曲列表-与播放器集成\":{\"title\":\"优化后的歌曲列表-与播放器集成\",\"created\":\"20250528070630390\",\"modified\":\"20250529022038331\",\"tags\":\"音乐 gdstudio\",\"text\":\"调试信息：- track-id: <$view tiddler=\\\"$:/state/gdstudio-api/track-id\\\"/> - music-source: <$view tiddler=\\\"$:/state/gdstudio-api/music-source\\\"/>\\n\\n- music-url: <$view tiddler=\\\"$:/state/gdstudio-api/music-url\\\"/>\\n\\n<!-- 显示搜索结果中的所有歌曲 -->  \\n<$list filter=\\\"[{$:/state/gdstudio-api/searchResults}jsonindexes[]]\\\">    \\n  <div class=\\\"gdstudio-song-item\\\">    \\n    <div style=\\\"flex: 1;\\\">    \\n      <h4 style=\\\"margin: 0 0 5px 0;\\\"><$text text={{{ [{$:/state/gdstudio-api/searchResults}jsonget<currentTiddler>,[name]] }}}/></h4>    \\n      <span style=\\\"color: #666; font-size: 0.9em;\\\">    \\n        <$text text={{{ [{$:/state/gdstudio-api/searchResults}jsonget<currentTiddler>,[artist]] }}}/>    \\n        - <$text text={{{ [{$:/state/gdstudio-api/searchResults}jsonget<currentTiddler>,[album]] }}}/>    \\n      </span>    \\n    </div>\\n\\n<$button class=\\\"tc-btn-invisible gdstudio-button\\\" tooltip=\\\"播放\\\">  \\n  <!-- 先清空之前的URL状态 -->  \\n  <$action-setfield $tiddler=\\\"$:/state/gdstudio-api/music-url\\\" text=\\\"\\\"/>  \\n  <$action-setfield $tiddler=\\\"$:/state/gdstudio-api/cover-url\\\" text=\\\"\\\"/>  \\n    \\n  <!-- 然后设置新的ID -->  \\n  <$action-setfield $tiddler=\\\"$:/state/gdstudio-api/track-id\\\" text={{{ [{$:/state/gdstudio-api/searchResults}jsonget<currentTiddler>,[id]] }}}/>        \\n  <$action-setfield $tiddler=\\\"$:/state/gdstudio-api/pic-id\\\" text={{{ [{$:/state/gdstudio-api/searchResults}jsonget<currentTiddler>,[pic_id]] }}}/>        \\n  <$action-setfield $tiddler=\\\"$:/state/gdstudio-api/lyric-id\\\" text={{{ [{$:/state/gdstudio-api/searchResults}jsonget<currentTiddler>,[lyric_id]] }}}/>  \\n    \\n  <!-- 最后调用获取procedures -->  \\n  <<gdstudio-get-music-url>>    \\n  <<gdstudio-get-cover-url>>  \\n  <<gdstudio-get-lyric-url>>  \\n  <<gdstudio-get-lyric-text>>  \\n  {{$:/core/images/gdstudio-play-music}}      \\n</$button>\\n\\n  </div>    \\n</$list>\"},\"关闭gdstudio音乐播放器\":{\"title\":\"关闭gdstudio音乐播放器\",\"created\":\"20250528150435056\",\"modified\":\"20250528150718799\",\"tags\":\"gdstudio\",\"text\":\"<$button class=\\\"tc-btn-invisible\\\" tooltip=\\\"关闭播放器\\\">✕   \\n<$action-setfield $tiddler=\\\"$:/state/gdstudio-api/track-id\\\" text=\\\"\\\"/>          \\n<$action-setfield $tiddler=\\\"$:/state/gdstudio-api/pic-id\\\" text=\\\"\\\"/>          \\n<$action-setfield $tiddler=\\\"$:/state/gdstudio-api/lyric-id\\\" text=\\\"\\\"/>          \\n<$action-setfield $tiddler=\\\"$:/state/gdstudio-api/cover-url\\\" text=\\\"\\\"/>          \\n<$action-setfield $tiddler=\\\"$:/state/gdstudio-api/lyric\\\" text=\\\"\\\"/>          \\n</$button>    \"},\"动态歌词样式css\":{\"title\":\"动态歌词样式css\",\"created\":\"20250529133611940\",\"modified\":\"20250529150936526\",\"tags\":\"动态歌词 $:/tags/Stylesheet gdstudio\",\"text\":\".lyric-display-container {  \\n    text-align: center;  \\n    padding: 20px;  \\n    max-height: 150px;  \\n    overflow: hidden;  \\n    position: fixed;  \\n    top: auto;  \\n    left: 10px;  \\n    bottom: 80px;  \\n    min-width: 300px;  \\n    font-family: \\\"FZYUEKZJW-H\\\";  \\n}  \\n  \\n.lyric-line {  \\n    padding: 2px 0; /* 紧凑的 padding */  \\n    transition: all 0.3s ease;  \\n    opacity: 0.6;  \\n    height: 1.4em;  /* 紧凑但足够的行高 */  \\n    line-height: 1.4em; /* 与高度保持一致 */  \\n}  \\n  \\n.lyric-current {  \\n    opacity: 1;  \\n    font-weight: bold;  \\n    color: #5797d8;  \\n    font-size: 1.1em;  \\n}\\n\"},\"去除歌曲时间戳正则表达式\":{\"title\":\"去除歌曲时间戳正则表达式\",\"created\":\"20250528132458712\",\"modified\":\"20250528132528182\",\"tags\":\"gdstudio\",\"text\":\"```tw\\n\\\\[([0-9]{2}):([0-9]{2})\\\\.([0-9]{1,9})\\\\]\\n```\\n\"},\"去除歌词时间戳\":{\"title\":\"去除歌词时间戳\",\"created\":\"20250528134902608\",\"modified\":\"20250529061333684\",\"tags\":\"gdstudio\",\"text\":\"\\\\define time1() \\\\[([0-9]{2}):([0-9]{2})\\\\.([0-9]{1,9})\\\\]\\n\\\\define time0() \\n\\n<div class=\\\"lyric-body\\\"><$let lyricText={{{ [{$:/state/gdstudio-api/lyric}search-replace:g:regexp<time1>,<time0>] }}} ><$transclude $variable=\\\"lyricText\\\" $mode=\\\"block\\\" /></$let></div>\\n\"},\"引用gdstudio音乐api宏\":{\"title\":\"引用gdstudio音乐api宏\",\"created\":\"20250528054914528\",\"modified\":\"20250528132403681\",\"tags\":\"音乐 gdstudio\",\"text\":\"<<gdstudio-search \\\"netease\\\" \\\"夜梦记\\\" \\\"20\\\" \\\"1\\\">>  \\n\\n<$transclude $variable=\\\"gdstudio-search\\\" music-source=\\\"netease\\\" keyword=\\\"夜梦记\\\" page-length=\\\"20\\\", page-num=\\\"1\\\"/>\\n\\n<<gdstudio-music \\\"netease\\\" \\\"1824959449\\\" \\\"320\\\">>\\n\\n<$transclude $variable=\\\"gdstudio-music\\\" music-source=\\\"netease\\\" track-id=\\\"1824959449\\\" br=\\\"320\\\"/>\\n\\n<<gdstudio-cover \\\"netease\\\" \\\"6626756582138305\\\" \\\"300\\\">>\\n\\n<$transclude $variable=\\\"gdstudio-cover\\\" music-source=\\\"netease\\\" pic-id=\\\"6626756582138305\\\" size=\\\"300\\\"/>\\n\\n<<gdstudio-lyric \\\"netease\\\" \\\"1824959449\\\">>\\n\\n<$transclude $variable=\\\"gdstudio-lyric\\\" music-source=\\\"netease\\\" lyric-id=\\\"1824959449\\\"/>\\n\\n搜索音乐\\n\\n```tw\\n<<gdstudio-search \\\"netease\\\" \\\"夜梦记\\\" \\\"20\\\" \\\"1\\\">>\\n```\\n\\n```tw\\n<$transclude $variable=\\\"gdstudio-search\\\" music-source=\\\"netease\\\" keyword=“夜梦记” page-length=\\\"20\\\", page-num=\\\"1\\\"/>\\n```\\n\\n获取歌曲链接\\n\\n```tw\\n<<gdstudio-music \\\"netease\\\" \\\"1824959449\\\" \\\"320\\\">>\\n```\\n\\n```tw\\n<$transclude $variable=\\\"gdstudio-music\\\" music-source=\\\"netease\\\" track-id=“1824959449” br=\\\"320\\\"/>\\n```\\n\\n获取海报链接\\n\\n```tw\\n<<gdstudio-cover \\\"netease\\\" \\\"6626756582138305\\\" \\\"300\\\">>\\n```\\n\\n```tw\\n<$transclude $variable=\\\"gdstudio-cover\\\" music-source=\\\"netease\\\" pic-id=\\\"6626756582138305\\\" size=\\\"300\\\"/>\\n```\\n\\n获取歌词链接\\n\\n```tw\\n<<gdstudio-lyric \\\"netease\\\" \\\"1824959449\\\">>\\n```\\n\\n```tw\\n<$transclude $variable=\\\"gdstudio-lyric\\\" music-source=\\\"netease\\\" lyric-id=\\\"1824959449\\\"/>\\n```\\n\\n```tw\\n$:/state/gdstudio-api/searchResults\\n$:/state/gdstudio-api/music-source\\n$:/state/gdstudio-api/keyword\\n$:/state/gdstudio-api/page-length\\n$:/state/gdstudio-api/page-num\\n$:/state/gdstudio-api/track-id\\n$:/state/gdstudio-api/br\\n$:/state/gdstudio-api/pic-id\\n$:/state/gdstudio-api/size\\n$:/state/gdstudio-api/lyric-id\\n```\"},\"添加HTML5音频播放器\":{\"title\":\"添加HTML5音频播放器\",\"created\":\"20250528070536184\",\"modified\":\"20250529060535909\",\"tags\":\"音乐 gdstudio $:/tags/PageTemplate\",\"text\":\"<div class=\\\"gdstudio-music-body\\\">\\n\\n<div class=\\\"gdstudio-music-player\\\">     \\n  <$reveal state=\\\"$:/state/gdstudio-api/track-id\\\" type=\\\"nomatch\\\" text=\\\"\\\">          \\n    <div class=\\\"gdstudio-cover\\\">          \\n      <!-- 专辑封面 -->    \\n        <$image     \\n          source={{$:/state/gdstudio-api/cover-url}}     \\n          width=\\\"60\\\"     \\n          height=\\\"60\\\"     \\n          style=\\\"border-radius: 4px; object-fit: cover;\\\"    \\n          alt=\\\"专辑封面\\\"    \\n        />\\n\\n<div class=\\\"gdstudio-music-name\\\">\\n<$text text={{{ [{$:/state/gdstudio-api/searchResults}jsonget[{$:/state/gdstudio-api/track-id}],[name]] }}}/> - <$text text={{{ [{$:/state/gdstudio-api/searchResults}jsonget[{$:/state/gdstudio-api/track-id}],[artist]] }}}/>\\n</div>\\n</div>\\n\\n<div class=\\\"gdstudio-audio\\\">    \\n<$reveal state=\\\"$:/state/gdstudio-api/music-url\\\" type=\\\"nomatch\\\" text=\\\"\\\">  \\n<audio controls autoplay onerror=\\\"console.error('Audio loading failed')\\\" key={{$:/state/gdstudio-api/track-id}}>                \\n     <source src={{$:/state/gdstudio-api/music-url}} type=\\\"audio/mpeg\\\">                \\n     您的浏览器不支持音频播放                \\n</audio>  \\n</$reveal>  \\n</div>\\n\\n  </$reveal>          \\n</div>\\n</div>\\n\"},\"添加歌词同步功能\":{\"title\":\"添加歌词同步功能\",\"created\":\"20250529144151048\",\"modified\":\"20250529144835406\",\"tags\":\"动态歌词 gdstudio $:/tags/PageTemplate\",\"text\":\"<!-- 添加歌词同步功能 -->\\n<$lyric-sync lyric-tiddler=\\\"$:/state/gdstudio-api/lyric\\\" audio-selector=\\\"audio\\\">\\n<$lyric-display lyric-tiddler=\\\"$:/state/gdstudio-api/lyric\\\" show-lines=\\\"5\\\"/>\\n</$lyric-sync>\"},\"获取封面url定义procedure\":{\"title\":\"获取封面url定义procedure\",\"created\":\"20250528095234170\",\"modified\":\"20250528132403669\",\"tags\":\"音乐 $:/tags/Macro gdstudio\",\"text\":\"\\\\procedure gdstudio-get-cover-url()      \\n\\t<$action-sendmessage      \\n\\t\\t$message=\\\"tm-http-request\\\"      \\n\\t\\turl=\\\"https://music-api.gdstudio.xyz/api.php\\\"      \\n\\t\\tquery-types=\\\"pic\\\"      \\n\\t\\tquery-source={{$:/state/gdstudio-api/music-source}}      \\n\\t\\tquery-id={{$:/state/gdstudio-api/pic-id}}      \\n\\t\\tquery-size={{$:/state/gdstudio-api/pic-size}}      \\n\\t\\tmethod=\\\"GET\\\"      \\n\\t\\toncompletion=<<gdstudio-extract-cover-url>>      \\n\\t/>      \\n\\\\end    \\n    \\n\\\\procedure gdstudio-extract-cover-url()      \\n\\t<$action-setfield $tiddler=\\\"$:/state/gdstudio-api/cover-url\\\" text={{{ [<data>jsonget[url]] }}}/>      \\n\\\\end\"},\"获取歌词url和文本定义procedure\":{\"title\":\"获取歌词url和文本定义procedure\",\"code-body\":\"yes\",\"created\":\"20250528095256198\",\"modified\":\"20250529015107749\",\"tags\":\"音乐 $:/tags/Macro gdstudio\",\"text\":\"\\\\procedure gdstudio-get-lyric-url()      \\n\\t<$action-sendmessage      \\n\\t\\t$message=\\\"tm-http-request\\\"      \\n\\t\\turl=\\\"https://music-api.gdstudio.xyz/api.php\\\"      \\n\\t\\tquery-types=\\\"lyric\\\"      \\n\\t\\tquery-source={{$:/state/gdstudio-api/music-source}}      \\n\\t\\tquery-id={{$:/state/gdstudio-api/lyric-id}}      \\n\\t\\tmethod=\\\"GET\\\"      \\n\\t\\toncompletion=<<gdstudio-extract-lyric-url>>      \\n\\t/>      \\n\\\\end    \\n    \\n\\\\procedure gdstudio-extract-lyric-url()      \\n\\t<$action-setfield $tiddler=\\\"$:/state/gdstudio-api/lyric-url\\\" text={{{ [<data>jsonget[url]] }}}/>      \\n\\\\end\\n\\n\\\\procedure gdstudio-get-lyric-text()        \\n\\t<$action-sendmessage        \\n\\t\\t$message=\\\"tm-http-request\\\"        \\n\\t\\turl=\\\"https://music-api.gdstudio.xyz/api.php\\\"        \\n\\t\\tquery-types=\\\"lyric\\\"        \\n\\t\\tquery-source={{$:/state/gdstudio-api/music-source}}        \\n\\t\\tquery-id={{$:/state/gdstudio-api/lyric-id}}        \\n\\t\\tmethod=\\\"GET\\\"        \\n\\t\\toncompletion=<<gdstudio-extract-lyric>>        \\n\\t/>        \\n\\\\end      \\n      \\n\\\\procedure gdstudio-extract-lyric()  \\n<$action-setfield $tiddler=\\\"$:/state/gdstudio-api/lyric\\\" text={{{[<data>jsonget[lyric]] }}}/>   \\n\\\\end\"},\"获取音乐url并播放定义procedure\":{\"title\":\"获取音乐url并播放定义procedure\",\"code-body\":\"yes\",\"created\":\"20250528074622054\",\"modified\":\"20250529015811407\",\"tags\":\"音乐 $:/tags/Macro gdstudio\",\"text\":\"\\\\procedure gdstudio-get-music-url()    \\n\\t<$action-sendmessage    \\n\\t\\t$message=\\\"tm-http-request\\\"    \\n\\t\\turl=\\\"https://music-api.gdstudio.xyz/api.php\\\"    \\n\\t\\tquery-types=\\\"url\\\"    \\n\\t\\tquery-source={{$:/state/gdstudio-api/music-source}}    \\n\\t\\tquery-id={{$:/state/gdstudio-api/track-id}}    \\n\\t\\tquery-br=\\\"320\\\"    \\n\\t\\tmethod=\\\"GET\\\"    \\n\\t\\toncompletion=<<gdstudio-extract-music-url>>    \\n\\t/>    \\n\\\\end  \\n  \\n\\\\procedure gdstudio-extract-music-url()      \\n\\t<$list filter=\\\"[<data>jsonget[url]!is[blank]]\\\" variable=\\\"url\\\">  \\n\\t\\t<$action-setfield $tiddler=\\\"$:/state/gdstudio-api/music-url\\\" text=<<url>>/>  \\n\\t</$list>  \\n\\\\end\"},\"音乐搜索界面优化版\":{\"title\":\"音乐搜索界面优化版\",\"created\":\"20250528084519091\",\"modified\":\"20250528132403678\",\"tags\":\"音乐 gdstudio\",\"text\":\"音乐源：<$select tiddler=\\\"$:/state/gdstudio-api/music-source\\\" default=\\\"netease\\\">  \\n<option value=\\\"netease\\\">网易云音乐 (netease)</option>  \\n<option value=\\\"tencent\\\">QQ音乐 (tencent)</option>  \\n<option value=\\\"tidal\\\">Tidal</option>  \\n<option value=\\\"spotify\\\">Spotify</option>  \\n<option value=\\\"ytmusic\\\">YouTube Music</option>  \\n<option value=\\\"qobuz\\\">Qobuz</option>  \\n<option value=\\\"joox\\\">JOOX</option>  \\n<option value=\\\"deezer\\\">Deezer</option>  \\n<option value=\\\"migu\\\">咪咕音乐 (migu)</option>  \\n<option value=\\\"kugou\\\">酷狗音乐 (kugou)</option>  \\n<option value=\\\"kuwo\\\">酷我音乐 (kuwo)</option>  \\n<option value=\\\"ximalaya\\\">喜马拉雅 (ximalaya)</option>  \\n</$select> 关键词：<$edit-text tiddler=\\\"$:/state/gdstudio-api/keyword\\\" default=\\\"夜梦记\\\" tag=\\\"input\\\"/> <$button actions=<<gdstudio-search-http-get>>>搜索</$button>\\n\\n每页数量：<$select tiddler=\\\"$:/state/gdstudio-api/page-length\\\" default=\\\"10\\\">\\n<option value=\\\"10\\\">10</option>\\n<option value=\\\"20\\\">20</option></$select>\\n页码：<$select tiddler=\\\"$:/state/gdstudio-api/page-num\\\" default=\\\"1\\\">\\n<option value=\\\"1\\\">1</option>\\n<option value=\\\"2\\\">2</option></$select>\"},\"音乐搜索界面样式css\":{\"title\":\"音乐搜索界面样式css\",\"created\":\"20250528091023127\",\"modified\":\"20250528132403677\",\"tags\":\"音乐 $:/tags/Stylesheet gdstudio\",\"text\":\"\"}}}"}