{"created":"20250510063613894","title":"$:/plugins/dyp/Folding-copy-codeblock","stability":"STABILITY_2_STABLE","modified":"20250512135912489","version":"0.0.3","name":"Folding-copy-codeblock","description":"折叠复制代码块","author":"dyp","dependents":"$:/plugins/kookma/utility, $:/plugins/yaisog/single-tiddler-view","list":"readme usage history","source":"https://github.com/dyp1121054136/dyp-plugins-library","packaged-by":"Gatha on 12th 五月 2025, 22:03:00","plugin-type":"plugin","type":"application/json","text":"{\"tiddlers\":{\"$:/core/images/code\":{\"title\":\"$:/core/images/code\",\"created\":\"20250530121009186\",\"modified\":\"20250603054613947\",\"tags\":\"$:/tags/Image 图标\",\"text\":\"\\\\parameters (size:\\\"22pt\\\")\\n\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=<<size>> height=<<size>> class=\\\"bi bi-code-slash tc-image-button\\\" viewBox=\\\"0 0 16 16\\\">\\n  <path d=\\\"M10.478 1.647a.5.5 0 1 0-.956-.294l-4 13a.5.5 0 0 0 .956.294l4-13zM4.854 4.146a.5.5 0 0 1 0 .708L1.707 8l3.147 3.146a.5.5 0 0 1-.708.708l-3.5-3.5a.5.5 0 0 1 0-.708l3.5-3.5a.5.5 0 0 1 .708 0zm6.292 0a.5.5 0 0 0 0 .708L14.293 8l-3.147 3.146a.5.5 0 0 0 .708.708l3.5-3.5a.5.5 0 0 0 0-.708l-3.5-3.5a.5.5 0 0 0-.708 0z\\\"/>\\n</svg>\"},\"$:/core/images/copy-codeblock\":{\"title\":\"$:/core/images/copy-codeblock\",\"created\":\"20240313085609020\",\"modified\":\"20250512135548014\",\"tags\":\"$:/tags/Image 图标 代码块折叠按钮\",\"text\":\"\\\\parameters (size:\\\"22pt\\\")\\n\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=<<size>> height=<<size>> class=\\\"bi bi-copy tc-image-button\\\" viewBox=\\\"0 0 16 16\\\">\\n  <path fill-rule=\\\"evenodd\\\" d=\\\"M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z\\\"/>\\n</svg>\\n\"},\"$:/core/images/wikitext\":{\"title\":\"$:/core/images/wikitext\",\"created\":\"20240313085609020\",\"modified\":\"20250512135548014\",\"tags\":\"$:/tags/Image 图标 复制块\",\"text\":\"\\\\parameters (size:\\\"22pt\\\")\\n\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=<<size>> height=<<size>> fill=\\\"currentColor\\\" class=\\\"bi bi-copy\\\" viewBox=\\\"0 0 16 16\\\">\\n  <path fill-rule=\\\"evenodd\\\" d=\\\"M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z\\\"/>\\n</svg>\"},\"$:/core/ui/EditorToolbar/wikitext\":{\"title\":\"$:/core/ui/EditorToolbar/wikitext\",\"caption\":\"{{$:/core/images/wikitext}} 添加一个wikitext复制块\",\"condition\":\"[<targetTiddler>!has[type]] [<targetTiddler>type[text/vnd.tiddlywiki]]\",\"created\":\"20240313085134593\",\"description\":\"添加一个wikitext复制块\",\"icon\":\"$:/core/images/wikitext\",\"modified\":\"20250512135548014\",\"shortcuts\":\"((wikitext))\",\"tags\":\"$:/tags/EditorToolbar 按钮 复制块\",\"text\":\"<$action-sendmessage\\n\\t$message=\\\"tm-edit-text-operation\\\"\\n\\t$param=\\\"wrap-selection\\\"\\n\\tprefix={{{[[<<code src:\\\"\\\"\\\"]]}}}\\n\\tsuffix={{{[[\\n\\\"\\\"\\\" language:\\\"tw\\\"  caption:\\\"\\\">>]]}}}\\n/>\"},\"$:/plugins/dyp/Folding-copy-codeblock/history\":{\"title\":\"$:/plugins/dyp/Folding-copy-codeblock/history\",\"created\":\"20250603055335742\",\"modified\":\"20250603055528035\",\"tags\":\"\",\"text\":\"; v.0.0.3 2025-06-03\\n\\n新增图标 [[$:/core/images/code]]，设置条目源代码隐藏时该图标透明度为0.5，打开后隐藏图标\"},\"$:/plugins/dyp/Folding-copy-codeblock/readme\":{\"title\":\"$:/plugins/dyp/Folding-copy-codeblock/readme\",\"created\":\"20250512121641643\",\"modified\":\"20250512135548014\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"; 折叠复制代码块\\n\\n1、需要搭配以下2个插件使用：\\n\\n[[$:/plugins/kookma/utility]] 和 [[$:/plugins/yaisog/single-tiddler-view]]\\n\\n2、[[Utility新版插件|$:/plugins/kookma/utility]]\\n\\n$:/plugins/kookma/utility/procedures/code\\n\\n`$:/tags/Global` 改成 `$:/tags/Macro`\\n`xml` 改成 `tw`\\n\\n可以显示源代码，并使用单条目浏览模式，但丢失复制按钮\\n\\n[[$:/plugins/kookma/utility/viewtemplates/source-toggle-button]]\\n\\n`title` 改为 `显示/隐藏条目原内容`\\n\\n添加样式 `<span class=\\\"bottom-details\\\">{{$:/core/images/code|18px}}</span>`\\n\\n语言修改为tw `language={{{ [{!!title}get[type]else[tw]] }}}`\\n\\n<<code src:\\\"\\\"\\\"\\\\define show-tiddler-source(open:\\\"\\\")\\n<details title=\\\"显示/隐藏条目原内容\\\" $open$>\\n<summary><span class=\\\"bottom-details\\\">{{$:/core/images/code|18px}}</span></summary>\\n<$transclude $variable=\\\"code\\\" language={{{ [{!!title}get[type]else[tw]] }}} src={{!!text}} />\\n</details>\\n\\\\end\\n\\\"\\\"\\\" language:\\\"tw\\\">>\\n\\n3、其他设置\\n\\n设置-Utility，勾选 `Show toolbar controls on shadow tiddlers` 和 `Show source button on the tiddlers`\\n\\n外观-视图模式，选 `minimal`，布局选 `SingleTiddlerView`\\n\"},\"$:/plugins/dyp/Folding-copy-codeblock/usage\":{\"title\":\"$:/plugins/dyp/Folding-copy-codeblock/usage\",\"created\":\"20250512121657469\",\"modified\":\"20250512135548014\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"写法：\\n\\n```\\n<<code src:\\\"\\\"\\\"内容\\n\\\"\\\"\\\" language:\\\"tw\\\" caption:\\\"小标题\\\">>\\n```\\n\\n或\\n\\n```\\n<<code src:\\\"条目标题\\\" language:\\\"tw\\\" caption:\\\"小标题\\\">>\\n```\\n\\n或\\n\\n```\\n<<$codeblock   \\n  caption:\\\"小标题\\\"   \\n  language:\\\"tw\\\"   \\n  code:\\\"内容\\\"   \\n  open:\\\"open\\\"  \\n>>  \\n```\\n\"},\"代码块折叠按钮样式css\":{\"title\":\"代码块折叠按钮样式css\",\"code-body\":\"yes\",\"created\":\"20250510034721936\",\"modified\":\"20250512135548014\",\"tags\":\"代码块折叠按钮 $:/tags/Stylesheet\",\"type\":\"text/css\",\"text\":\".codeblock-details {\\n  display: block; \\n  background: rgba(0, 0, 0, 0); \\n  border: none; \\n -webkit-tap-highlight-color: transparent; /* 去除移动端点击高亮 */\\n  box-shadow: none; /* 去除盒阴影 */\\n}\\n\\n.copy-codeblock {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between; /* 修改为space-between以分散对齐 */\\n  align-items: center; /* 确保所有元素垂直居中，保持在同一水平线 */\\n  gap: 15px;\\n  margin: 0 0 -10px 0;\\n  min-height: 2em; /* 隐藏时仍然占据空间 */\\n  cursor: pointer; \\n}\\n\\n.codeblock-language {  \\n  flex: 1; /* 让语言标签占据可用空间 */\\n  font-size: 1em;\\n}\\n\\n.codeblock-caption {  \\n/*   flex: 1; */ /* 让标题占据可用空间 */\\n  font-size: 0.9em;\\n  margin: 0 0 -0.5em 0;\\n}\\n\\n.codeblock-copy-button {  \\n  margin-left: auto; /* 将按钮推到最右边 */\\n  margin-bottom: 0px;\\n  margin-right: 0px;\\n  display: none; /* 默认隐藏复制按钮 */\\n}\\n\\ndetails.codeblock-details[open] .codeblock-copy-button {\\n  display: inline-block; /* 当details处于打开状态时显示复制按钮 */\\n  opacity: 0.5;\\n}\\n\\ndetails.codeblock-details[open] .codeblock-copy-button:active, details.codeblock-details[open] .codeblock-copy-button:hover {\\n  opacity: 1; /* 当按钮被点击时透明度变为1 */\\n}\\n\\n.codeblock-hover\\n{\\n  opacity: 0.5;\\n  transition: opacity 0.5s ease-in-out;\\n}\\n\\n.codeblock-hover:hover {\\n  opacity: 1;\\n}\\n\\n/*  修改缩进块格式  */\\n.codeblock-blockquote {\\n  border: none;\\n  margin: 0;\\n  padding: 0;\\n}\"},\"代码块折叠按钮测试\":{\"title\":\"代码块折叠按钮测试\",\"created\":\"20250510031700316\",\"modified\":\"20250512143531103\",\"tags\":\"代码块折叠按钮\",\"text\":\"正文1\\n\\n```css\\n/* 代码块样式 */\\npre {\\n  margin-top: -0em;\\n  margin-bottom: -0em;\\n  margin-left: 0em;\\n  margin-right: 0em;\\n  padding: 2px 2px 2px 2px; /* 内边距上右下左 */\\n  border-radius: 3px;\\n}\\n```\\n\\n正文2\\n\\n源代码\\n\\n[[source按钮|$:/plugins/kookma/utility/viewtemplates/source-toggle-button]]\\n\\n[[代码块复制|折叠复制代码块widgets]]\\n\"},\"代码块折叠按钮测试2\":{\"title\":\"代码块折叠按钮测试2\",\"created\":\"20250510035446080\",\"modified\":\"20250512135548014\",\"tags\":\"代码块折叠按钮\",\"text\":\"<<$codeblock   \\n  caption:\\\"示例CSS代码\\\"   \\n  language:\\\"css\\\"   \\n  code:\\\".example { color: red; }\\\"   \\n  open:\\\"open\\\"  \\n>>  \"},\"复制成功消息提示\":{\"title\":\"复制成功消息提示\",\"created\":\"20250510063613894\",\"modified\":\"20250512135657410\",\"tags\":\"代码块折叠按钮\",\"text\":\"复制成功\"},\"底部复制条目内容按钮样式css\":{\"title\":\"底部复制条目内容按钮样式css\",\"created\":\"20250510074554891\",\"modified\":\"20250512143512672\",\"tags\":\"$:/tags/Stylesheet 备份 代码块折叠按钮\",\"text\":\".bottom-details {\\n\\topacity: 0.5;\\n\\tfont-size:0.9em;\\n\\tdisplay: inline;\\n\\tcursor: pointer;\\n\\tpadding: 10px 0;\\n\\ttransition: 0.3s;\\n\\t-webkit-user-select: none;\\n\\t-moz-user-select: none;\\n\\t-ms-user-select: none;\\n\\tuser-select: none;\\n  background: rgba(0, 0, 0, 0); \\n  border: none; \\n -webkit-tap-highlight-color: transparent; /* 去除移动端点击高亮 */\\n  box-shadow: none; /* 去除盒阴影 */\\n  color: transparent;\\n}\\n\\n.bottom-details:hover{\\n\\topacity:1;\\n}\\n\\ndetails[open] .bottom-details {\\n\\topacity:0;\\n}\\n\"},\"折叠复制代码块widgets\":{\"title\":\"折叠复制代码块widgets\",\"code-body\":\"yes\",\"created\":\"20250510033455301\",\"modified\":\"20250512135713490\",\"tags\":\"代码块折叠按钮 $:/tags/Macro\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\widget $codeblock(code, language, caption, open:\\\"\\\")  \\n<$let displayLanguage={{{ [<language>removeprefix[text/]removeprefix[application/]] }}}>  \\n<details open class=\\\"codeblock-details\\\" $open$>  \\n<summary class=\\\"codeblock-details\\\">\\n<span class=\\\"copy-codeblock\\\"> \\n<%if [<language>!is[blank]] %>  \\n<span class=\\\"codeblock-language codeblock-hover\\\"><<language>></span>  \\n<%endif%>  \\n<%if [<caption>!is[blank]] %> \\n<span class=\\\"codeblock-caption codeblock-hover\\\"><<caption>></span>  \\n<%endif%>  \\n<%if [<code>!is[blank]] %>\\n<$button tooltip=\\\"复制内容\\\" class=\\\"tc-btn-invisible codeblock-copy-button\\\"> {{$:/core/images/copy-codeblock|20px}}  \\n<$action-sendmessage $message=\\\"tm-copy-to-clipboard\\\" $param=<<code>> successNotification=\\\"复制成功消息提示\\\"/>  \\n</$button>  \\n<%endif%> \\n</span>\\n</summary>\\n<blockquote class=\\\"codeblock-blockquote\\\">\\n<div class=\\\"codeblock-code\\\">  \\n<$genesis $type=\\\"$codeblock\\\" $remappable=\\\"no\\\" code=<<code>> language=<<language>>/>  \\n</div>\\n</blockquote>\\n</details>  \\n</$let>  \\n\\\\end  \"}}}"}