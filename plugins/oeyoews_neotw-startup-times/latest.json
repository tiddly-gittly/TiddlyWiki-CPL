{"title":"$:/plugins/oeyoews/neotw-startup-times","description":"neotw-startup-times","author":"oeyoews","version":"0.0.1","core-version":">=5.3.4","type":"application/json","plugin-type":"plugin","name":"neotw-startup-times","meat#disabled":"yes","qrcode":"yes","created":"2025/02/15","dependents":"","stability":"STABILITY_2_STABLE","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-startup-times/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-startup-times/readme\",\"description\":\"neotw-startup-times\",\"text\":\"[[在线文档|https://neotw.vercel.app/docs/plugins/neotw-startup-times]]\\n\\n{{_state-neotw-startup-times}}\"},\"$:/plugins/oeyoews/neotw-startup-times/count-times.js\":{\"title\":\"$:/plugins/oeyoews/neotw-startup-times/count-times.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-startup-times/count-times.js\\ntype: application/javascript\\nmodule-type: library\\n\\n每次启动的时候， 记录下时间和次数， 如果距离上次启动时间间隔大于10分钟， 则次数+1\\n\\n\\\\*/\\n\\nmodule.exports = () => {\\n  const stateTiddler = '_state-neotw-startup-times';\\n  let { times = 0, lastTime = 0 } = $tw.wiki.getTiddler(stateTiddler).fields;\\n  if (lastTime != 0 && Date.now() - lastTime < 10 * 60 * 1000) {\\n    return;\\n  }\\n\\n  if (isNaN(times)) {\\n    times = 0;\\n  }\\n  const config = {\\n    suppressTimestamp: true,\\n  };\\n\\n  $tw.wiki.setText(stateTiddler, 'times', null, Number(times) + 1, config);\\n  $tw.wiki.setText(stateTiddler, 'lastTime', null, Date.now(), config);\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-startup-times/startup.js\":{\"title\":\"$:/plugins/oeyoews/neotw-startup-times/startup.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-startup-times/startup.js\\ntype: application/javascript\\nmodule-type: startup\\n\\nneotw-startup-times startup\\n\\n\\\\*/\\n\\nexports.name = 'neotw-startup-times-startup-hook';\\nexports.platforms = ['browser'];\\nexports.after = ['story'];\\nexports.synchronous = true;\\nexports.startup = () => {\\n  const updateTimes = require('./count-times');\\n  updateTimes();\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"startup\"},\"_state-neotw-startup-times\":{\"title\":\"_state-neotw-startup-times\",\"times\":\"0\",\"lastTime\":\"0\",\"text\":\"启动次数：{{!!times}}, 上次更新时间：<$view field=\\\"lastTime\\\" format=\\\"timestamp\\\" />\"}}}"}