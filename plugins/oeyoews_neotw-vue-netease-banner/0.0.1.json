{"title":"$:/plugins/oeyoews/neotw-vue-netease-banner","description":"neotw-vue-netease-banner","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"neotw-vue-netease-banner","meat#disabled":"yes","qrcode":"yes","created":"2024-03-12","dependents":"$:/plugins/oeyoews/neotw-vue3","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-vue-netease-banner/templates/widget.vue\":{\"text\":\"<template>\\n  <div v-if=\\\"loading\\\">\\n    <div class=\\\"grid grid-cols-3 gap-6\\\">\\n      <div class=\\\"bg-gray-300 h-40 animate-pulse rounded-md\\\"></div>\\n      <div class=\\\"bg-gray-300 h-40 animate-pulse rounded-md\\\"></div>\\n      <div class=\\\"bg-gray-300 h-40 animate-pulse rounded-md\\\"></div>\\n      <div class=\\\"bg-gray-300 h-40 animate-pulse rounded-md\\\"></div>\\n      <div class=\\\"bg-gray-300 h-40 animate-pulse rounded-md\\\"></div>\\n      <div class=\\\"bg-gray-300 h-40 animate-pulse rounded-md\\\"></div>\\n      <!-- Netease Banners Is Loading ...  -->\\n    </div>\\n  </div>\\n  <div class=\\\"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\\\" v-if=\\\"banners\\\" ref=\\\"netease\\\">\\n    <TransitionGroup>\\n      <img :data-src=\\\"banner.src\\\" alt=\\\"\\\"\\n        class=\\\"object-cover w-full h-full spotlight rounded-md group-hover:scale-105 transition-all duration-800 ease-in-out shadow-md cursor-pointer\\\"\\n        v-for=\\\"banner in banners\\\" :key=\\\"banner.src\\\">\\n    </TransitionGroup>\\n  </div>\\n</template>\",\"title\":\"$:/plugins/oeyoews/neotw-vue-netease-banner/templates/widget.vue\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/neotw-vue-netease-banner/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-netease-banner/readme\",\"text\":\"<!-- plugin template readme -->\\n\\n## Motivation\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\",\"type\":\"text/markdown\",\"description\":\"neotw-vue-netease-banner\"},\"$:/plugins/oeyoews/neotw-vue-netease-banner/component.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-netease-banner/component.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-netease-banner/component.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\n\\nconst { watch, toRaw, computed, ref } = window.Vue;\\nconst getTemplate = require('$:/plugins/oeyoews/neotw-vue3/getTemplate.js');\\n\\nconst twimageobserver = new $tw.ImageObserver().observer;\\n\\nconst app = () => {\\n  const component = {\\n    setup() {\\n      const banners = ref([]);\\n      const loading = ref(true);\\n\\n      return { banners, loading };\\n    },\\n\\n    async mounted() {\\n      await this.getbanners();\\n      const images = this.$refs.netease.querySelectorAll('img');\\n      images.forEach((img) => {\\n        if (!img) return;\\n        twimageobserver.observe(img);\\n      });\\n    },\\n\\n    methods: {\\n      async getbanners() {\\n        try {\\n          const api = 'https://react-music-api-coral.vercel.app/api/banner';\\n          const res = await fetch(api);\\n          const data = await res.json();\\n          const { banners } = data.body;\\n          this.banners = banners\\n            .map((banner) => ({ src: banner.pic }))\\n            .slice(0, 9);\\n          this.loading = false;\\n        } catch (e) {\\n          console.error(e.message);\\n        }\\n      },\\n    },\\n\\n    template: getTemplate(\\n      '$:/plugins/oeyoews/neotw-vue-netease-banner/templates/widget.vue',\\n    ),\\n  };\\n  return component;\\n};\\n\\nmodule.exports = app;\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-vue-netease-banner/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-netease-banner/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-netease-banner/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-vue-netease-banner widget\\n\\n\\\\*/\\nconst { widget: Widget } = require('$:/core/modules/widgets/widget.js');\\n\\nclass ExampleWidget extends Widget {\\n  constructor(parseTreeNode, options) {\\n    super(parseTreeNode, options);\\n  }\\n\\n  render(parent, nextSibling) {\\n    if (!$tw.browser) return;\\n\\n    this.computeAttributes();\\n    this.execute();\\n\\n    const ssr = this.document.isTiddlyWikiFakeDom;\\n    if (ssr) return;\\n\\n    const vuelib = '$:/plugins/oeyoews/neotw-vue3/vue.global.prod.js';\\n\\n    if (!window.Vue) {\\n      window.Vue = require(vuelib);\\n    }\\n\\n    const { createApp } = window.Vue;\\n    const component = require('./component');\\n    const domNode = this.document.createElement('div');\\n\\n    try {\\n      const app = createApp(component());\\n\\n      app.config.errorHandler = (err) => {\\n        const text = `[Vue3](${app.version}): ` + err;\\n        console.error(text);\\n        domNode.textContent = text;\\n        domNode.style.color = 'red';\\n      };\\n\\n      // 挂载\\n      app.mount(domNode);\\n\\n      parent.insertBefore(domNode, nextSibling);\\n      this.domNodes.push(domNode);\\n    } catch (e) {\\n      console.error(e.message);\\n    }\\n  }\\n}\\n\\n/** @description neotw-vue-netease-banner widget */\\nexports['neotw-vue-netease-banners'] = ExampleWidget;\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}