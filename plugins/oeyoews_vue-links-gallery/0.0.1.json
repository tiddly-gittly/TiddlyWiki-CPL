{"title":"$:/plugins/oeyoews/vue-links-gallery","description":"vue-links-gallery","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"vue-links-gallery","meat#disabled":"yes","qrcode":"yes","created":"2024-03-06","dependents":"","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/vue-links-gallery/readme\":{\"title\":\"$:/plugins/oeyoews/vue-links-gallery/readme\",\"text\":\"<!-- plugin template readme -->\\n\\n## Motivation\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\",\"type\":\"text/markdown\",\"description\":\"vue-links-gallery\"},\"$:/plugins/oeyoews/vue-links-gallery/component.js\":{\"title\":\"$:/plugins/oeyoews/vue-links-gallery/component.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-links-gallery/component.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nconst{reactive:t,toRaw:e,computed:a,ref:i}=window.Vue,s=()=>Math.random().toString(36).substring(2,11),n=\\\"application/x-tiddler-dictionary\\\",r=()=>{let t=$tw.wiki.getTiddlerText(\\\"$:/plugins/oeyoews/vue-links-gallery/widget.vue\\\").trim();return t.startsWith(\\\"<template>\\\")&&t.endsWith(\\\"</template>\\\")&&(t=t.slice(10,-11)),t};module.exports=(o=\\\"list-links.json\\\")=>({setup(){const e=i(Object.entries($tw.wiki.getTiddlerData(o,{}))),s=i(\\\"\\\"),n=i(\\\"\\\"),r=i(!1),d=t=>{try{return new URL(t).origin}catch(e){return console.error(e.message),t}},l=a((()=>e.value?e.value.map((t=>({desc:t[0],link:t[1],prettyLink:d(t[1])}))):[])),h=t({nodes:[{id:\\\"0\\\",name:\\\"Myriel\\\",symbolSize:19.12381,x:-266.82776,y:299.6904,value:28.685715,category:0},{id:\\\"1\\\",name:\\\"Napoleon\\\",symbolSize:2.6666666666666665,x:-418.08344,y:446.8853,value:4,category:0},{id:\\\"2\\\",name:\\\"MlleBaptistine\\\",symbolSize:6.323809333333333,x:-212.76357,y:245.29176,value:9.485714,category:1}],links:[{source:\\\"1\\\",target:\\\"0\\\"},{source:\\\"2\\\",target:\\\"0\\\"},{source:\\\"3\\\",target:\\\"0\\\"},{source:\\\"3\\\",target:\\\"2\\\"},{source:\\\"4\\\",target:\\\"0\\\"},{source:\\\"5\\\",target:\\\"0\\\"},{source:\\\"6\\\",target:\\\"0\\\"}],categories:[{name:\\\"A\\\"},{name:\\\"B\\\"},{name:\\\"C\\\"},{name:\\\"D\\\"}]}),c=a((()=>({title:{text:\\\"Les Miserables\\\",subtext:\\\"Default layout\\\",top:\\\"bottom\\\",left:\\\"right\\\"},tooltip:{},legend:[{data:h.categories.map((function(t){return t.name}))}],animationDuration:1500,animationEasingUpdate:\\\"quinticInOut\\\",series:[{name:\\\"Les Miserables\\\",type:\\\"graph\\\",layout:\\\"none\\\",data:h.nodes,links:h.links,categories:h.categories,roam:!0,label:{position:\\\"right\\\",formatter:\\\"{b}\\\"},lineStyle:{color:\\\"source\\\",curveness:.3},emphasis:{focus:\\\"adjacency\\\",lineStyle:{width:10}}}]})));return{chartapp:i(),chartdata:h,options:c,prettyLink:d,prettyLinkData:l,data:e,newLink:s,edit:r,newDesc:n}},mounted(){this.initChart(),this.updateChart()},watch:{options:{handler(){this.updateChart()}}},methods:{initChart(){this.chartapp=echarts.init(this.$refs.chart)},addData(){this.chartdata.categories.push({name:s()}),this.chartdata.nodes.push({id:this.chartdata.nodes.length,name:s(),symbolSize:19.12381+10*Math.random(),x:100*Math.random()-266.82776,y:299.6904+100*Math.random(),value:28.685715+10*Math.random(),category:\\\"A\\\"})},updateChart(){this.chartapp.setOption(this.options)},toEdit:function(){this.edit=!this.edit},resetStatus:function(){this.newDesc=\\\"\\\",this.newLink=\\\"\\\"},updateData:function(){$tw.wiki.getTiddler(o)?.fields.type!==n&&$tw.wiki.setText(o,\\\"type\\\",null,n),$tw.wiki.setTiddlerData(o,Object.fromEntries(e(this.data)),null,{suppressTimestamp:!0})},removeLink:function(t){this.data=this.data.filter((([e,a])=>a!==t)),this.updateData()},addNewLink:function(){this.newLink&&this.newDesc?this.prettyLinkData.find((t=>t.link===this.newLink))?console.error(\\\"链接已存在\\\"):(this.newLink&&this.newDesc&&(this.data.unshift([this.newDesc,this.newLink]),this.updateData()),this.resetStatus()):console.error(\\\"缺少链接或描述\\\")}},template:r()});\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/vue-links-gallery/styles.css\":{\"title\":\"$:/plugins/oeyoews/vue-links-gallery/styles.css\",\"tags\":\"$:/tags/Stylesheet\",\"type\":\"text/css\",\"text\":\".list-enter-active,\\n.list-leave-active {\\n  transition: all 0.5s ease;\\n}\\n.list-enter-from,\\n.list-leave-to {\\n  opacity: 0;\\n  transform: translateX(30px);\\n}\\n\"},\"$:/plugins/oeyoews/vue-links-gallery/widget.js\":{\"title\":\"$:/plugins/oeyoews/vue-links-gallery/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-links-gallery/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nvue-links-gallery widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports[\\\"vue-links-gallery\\\"]=class extends e{constructor(e,t){super(e,t)}render(e,t){if(!$tw.browser)return;if(this.computeAttributes(),this.execute(),this.document.isTiddlyWikiFakeDom)return;const o=(0,$tw.utils.domMaker)(\\\"div\\\",{}),r=\\\"$:/plugins/oeyoews/neotw-vue3/vue.global.prod.js\\\",s=new $tw.utils.Logger(\\\"neotw-vue-todo\\\");if(window.Vue||(window.Vue=require(r)),!window.Vue)return void s.alert(`${r} is missing, Please install neotw-vue plugin by @oeyoews`);const{createApp:i}=window.Vue,{json:n}=this.attributes,u=require(\\\"./component.js\\\");try{const r=i(u(n));r.config.errorHandler=e=>{const t=`[Vue3](${r.version}): `+e;console.error(t),o.textContent=t,o.style.color=\\\"red\\\"},r.mount(o),e.insertBefore(o,t),this.domNodes.push(o)}catch(e){console.error(e.message)}}refresh(){return!1}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"},\"$:/plugins/oeyoews/vue-links-gallery/widget.vue\":{\"title\":\"$:/plugins/oeyoews/vue-links-gallery/widget.vue\",\"text\":\"<template>\\n  <form @submit.prevent=\\\"addNewLink\\\" class=\\\"my-1\\\">\\n    <div class=\\\"flex gap-2 items-center shrink-0\\\">\\n      <input\\n        type=\\\"text\\\"\\n        v-model.trim=\\\"newDesc\\\"\\n        required\\n        placeholder=\\\"desc\\\"\\n        class=\\\"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\\\"\\n      />\\n      <input\\n        type=\\\"text\\\"\\n        v-model.trim=\\\"newLink\\\"\\n        required\\n        placeholder=\\\"links\\\"\\n        class=\\\"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\\\"\\n      />\\n    </div>\\n    <button\\n      type=\\\"submit\\\"\\n      class=\\\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700\\\"\\n    >\\n      添加\\n    </button>\\n    <button\\n      type=\\\"button\\\"\\n      @click.stop=\\\"toEdit\\\"\\n      class=\\\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-700\\\"\\n    >\\n      切换编辑模式\\n    </button>\\n  </form>\\n\\n  <div v-show=\\\"false\\\">\\n    <h2>chart</h2>\\n    <button @click=\\\"addData\\\">update chart</button>\\n    <div ref=\\\"chart\\\" style=\\\"width: 900px; height: 400px\\\"></div>\\n  </div>\\n\\n  <table>\\n    <thead>\\n      <tr>\\n        <th>序号</th>\\n        <th>描述</th>\\n        <th>网址</th>\\n        <Transition>\\n          <th v-show=\\\"edit\\\">操作</th>\\n        </Transition>\\n      </tr>\\n    </thead>\\n    <TransitionGroup name=\\\"list\\\" tag=\\\"tbody\\\" v-if=\\\"prettyLinkData.length\\\">\\n      <tr v-for=\\\"(item, index) in prettyLinkData\\\" :key=\\\"item.prettyLink\\\">\\n        <td>{{ index + 1 }}</td>\\n        <td>{{ item.desc }}</td>\\n        <td>\\n          <a\\n            :href=\\\"item.link\\\"\\n            target=\\\"_blank\\\"\\n            class=\\\"hover:underline\\\"\\n            :title=\\\"item.desc\\\"\\n          >\\n            {{ item.prettyLink }}\\n          </a>\\n        </td>\\n        <Transition>\\n          <td @click=\\\"removeLink(item.link)\\\" v-show=\\\"edit\\\">\\n            <a\\n              href=\\\"#\\\"\\n              @click.prevent=\\\"removeLink(index)\\\"\\n              class=\\\"hover:underline\\\"\\n              title=\\\"remove\\\"\\n              >删除</a\\n            >\\n          </td>\\n        </Transition>\\n      </tr>\\n    </TransitionGroup>\\n    <tbody v-else>\\n      <tr>\\n        <td :colspan=\\\"edit ? 4 : 3\\\" class=\\\"text-center\\\">\\n          <div class=\\\"h-24 flex items-center justify-center\\\">暂无数据</div>\\n        </td>\\n      </tr>\\n    </tbody>\\n    <!-- <tfoot > foot </tfoot> -->\\n  </table>\\n</template>\\n\",\"type\":\".vue\"}}}"}