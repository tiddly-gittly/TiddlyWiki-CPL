{"title":"$:/plugins/oeyoews/tiddler-fullscreen","description":"tiddler-fullscreen","author":"oeyoews","version":"0.0.5","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"tiddler-fullscreen","meat#disabled":"yes","qrcode":"yes","created":"2024-01-30","dependents":"","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/tiddler-fullscreen/icons/fullscreen\":{\"title\":\"$:/plugins/oeyoews/tiddler-fullscreen/icons/fullscreen\",\"text\":\"<svg stroke=\\\"currentColor\\\" class=\\\"tc-image-tiddler-fullscreen-button\\\" fill=\\\"currentColor\\\" stroke-width=\\\"0\\\" viewBox=\\\"0 0 1024 1024\\\" height=\\\"1em\\\" width=\\\"1em\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M290 236.4l43.9-43.9a8.01 8.01 0 0 0-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0 0 13.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 0 0 0 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 0 0-11.3 0l-42.4 42.3a8.03 8.03 0 0 0 0 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 0 0 4.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 0 0-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 0 0-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z\\\"></path></svg>\"},\"$:/plugins/oeyoews/tiddler-fullscreen/readme\":{\"title\":\"$:/plugins/oeyoews/tiddler-fullscreen/readme\",\"text\":\"## Tiddler Fullscreen\\n\\n> Tiddler fullscreen plugin support single tiddler enter fullscreen(include editing tiddler)\\n\\n> 方便全屏展示 tiddler, 不用在受限于条目的宽度, 免去手动调整宽度的等不必要的步骤\\n\\n![img](https://talk.tiddlywiki.org/uploads/default/original/2X/1/1ab760585501cd791ac9c3655621bfb31134e0ed.gif)\\n\\n## Motivation\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\\nThis tiddler fullscreen plugin Inspired by this [post](https://talk.tiddlywiki.org/t/apply-style-by-data-tiddler-title-view-field-title-transcluded-from-a-temp-tiddler-to-make-another-fullscreen-button/8927?u=oeyoews)\\n\",\"type\":\"text/markdown\",\"description\":\"tiddler-fullscreen\"},\"$:/plugins/oeyoews/tiddler-fullscreen/action.js\":{\"title\":\"$:/plugins/oeyoews/tiddler-fullscreen/action.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/tiddler-fullscreen/action.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nmodule.exports = function toggleElementFullscreen(title) {\\n  const stateTiddler = '$:/state/tiddler-fullscreen/fullscreen';\\n  try {\\n    const target = document.querySelector(\\n      `[data-tiddler-title=\\\"${CSS.escape(title)}\\\"]`\\n    );\\n    if (document.fullscreenElement !== target) {\\n      target.requestFullscreen();\\n      $tw.wiki.setText(stateTiddler, 'text', '', 'yes');\\n    } else if (document.fullscreenElement === target) {\\n      document.exitFullscreen();\\n      // $tw.wiki.setText(prefix + title, 'text', '', 'no');\\n    }\\n  } catch (e) {\\n    console.warn(e);\\n  }\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/tiddler-fullscreen/startup.js\":{\"title\":\"$:/plugins/oeyoews/tiddler-fullscreen/startup.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/tiddler-fullscreen/startup.js\\ntype: application/javascript\\nmodule-type: startup\\n\\n\\\\*/\\n\\nexports.name = 'fullscreen-startup-hook';\\nexports.platforms = ['browser'];\\nexports.after = ['startup'];\\nexports.synchronous = true;\\nexports.startup = () => {\\n  const action = require('./action');\\n  $tw.rootWidget.addEventListener('om-tiddler-fullscreen', (event) => {\\n    action(event?.paramObject?.title || event.tiddlerTitle);\\n  });\\n  document.addEventListener('fullscreenchange', () => {\\n    if (!document.fullscreenElement) {\\n      /*       const statetiddlers = $tw.wiki.filterTiddlers(\\n        `[prefix[$:/state/tiddler-fullscreen/]text[yes]]`\\n      );\\n      statetiddlers.forEach((tiddler) => $tw.wiki.deleteTiddler(tiddler)); */\\n      $tw.wiki.deleteTiddler('$:/state/tiddler-fullscreen/fullscreen');\\n    }\\n  });\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"startup\"},\"$:/plugins/oeyoews/tiddler-fullscreen/styles.css\":{\"title\":\"$:/plugins/oeyoews/tiddler-fullscreen/styles.css\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\"<!-- \\\\define fullscreen-tiddler()\\n.tc-tiddler-frame[data-tiddler-title=\\\"$(cssEscapedTitle)$\\\"] {\\n\\toverflow: auto;\\n}\\n\\n\\\\end\\n\\n<$list filter=\\\"[prefix[$:/state/tiddler-fullscreen/]] :filter[get[text]match[yes]] +[limit[1]]\\\" variable=\\\"fullscreenStateTiddler\\\">\\n\\n<$let fullscreenTiddler={{{ [<fullscreenStateTiddler>removeprefix[$:/state/tiddler-fullscreen/]] }}} cssEscapedTitle={{{ [<fullscreenTiddler>] }}}>\\n\\n<% if [<fullscreenTiddler>!is[missing]] %>\\n<<fullscreen-tiddler>>\\n<% endif %>\\n\\n</$let>\\n\\n</$list> -->\\n\\n<$list filter=\\\"[{$:/state/tiddler-fullscreen/fullscreen}match[yes]]\\\">\\n.tc-tiddler-frame[data-tiddler-title] {\\n\\toverflow: auto;\\n}\\n</$list>\"},\"$:/plugins/oeyoews/tiddler-fullscreen/widget.js\":{\"title\":\"$:/plugins/oeyoews/tiddler-fullscreen/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/tiddler-fullscreen/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\ntiddler-fullscreen widget\\n\\n\\\\*/\\nconst { widget: Widget } = require('$:/core/modules/widgets/widget.js');\\n\\nclass FullscreenWidget extends Widget {\\n  constructor(parseTreeNode, options) {\\n    super(parseTreeNode, options);\\n  }\\n\\n  render(parent, nextSibling) {\\n    if (!$tw.browser) return;\\n\\n    this.computeAttributes();\\n    this.execute();\\n\\n    // const icon = this.geticon('$:/core/images/full-screen-button');\\n    const svg = this.wiki.getTiddlerText(\\n      '$:/plugins/oeyoews/tiddler-fullscreen/icons/fullscreen',\\n    );\\n\\n    const ssr = this.document.isTiddlyWikiFakeDom;\\n    if (ssr) return;\\n    const title = this.getVariable('currentTiddler');\\n\\n    const toggleElementFullscreen = require('./action');\\n    const domNode = document.createElement('button');\\n    domNode.innerHTML = svg;\\n    domNode.addEventListener('click', () => toggleElementFullscreen(title));\\n\\n    parent.insertBefore(domNode, nextSibling);\\n    this.domNodes.push(domNode);\\n  }\\n\\n  getIconSvg(icon) {\\n    return $tw.wiki.renderText(\\n      'text/html',\\n      'text/vnd.tiddlywiki',\\n      `<$transclude $tiddler=\\\"${icon}\\\" />`,\\n      {\\n        parseAsInline: true,\\n      },\\n    );\\n  }\\n\\n  geticon(icon) {\\n    const iconwidget = $tw.wiki.makeTranscludeWidget(\\n      icon,\\n      { document: $tw.fakeDocument, parseAsInline: true }, // NOTE: muse use fakedom\\n    );\\n\\n    const container = $tw.fakeDocument.createElement('div');\\n    iconwidget.render(container, null);\\n    return container.firstChild.innerHTML;\\n  }\\n}\\n\\n/** @description tiddler-fullscreen widget */\\nexports['fullscreen'] = FullscreenWidget;\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"},\"$:/plugins/oeyoews/tiddler-fullscreen/EditToolbar\":{\"title\":\"$:/plugins/oeyoews/tiddler-fullscreen/EditToolbar\",\"tags\":\"$:/tags/EditToolbar\",\"list-before\":\"$:/core/ui/Buttons/delete\",\"description\":\"fullscreen tiddler\",\"caption\":\"{{$:/plugins/oeyoews/tiddler-fullscreen/icons/fullscreen}} fullscreen tiddler\",\"text\":\"<!-- NOTE: dont use transclude -->\\n\\\\whitespace trim\\n<$button message=\\\"om-tiddler-fullscreen\\\" tooltip=\\\"fullscreen tiddler\\\" aria-label=\\\"fullscreen tiddler\\\" class=<<tv-config-toolbar-class>>>\\n<$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\n<$list filter=\\\"[[$:/info/browser/is/mobile]get[text]else[no]match[no]]\\\">\\n{{$:/plugins/oeyoews/tiddler-fullscreen/icons/fullscreen}}\\n</$list>\\n</$list>\\n<$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\n<span class=\\\"tc-btn-text\\\">\\n  <$text text=\\\"tiddler-fullscreen\\\"/>\\n</span>\\n</$list>\\n</$button>\\n\"},\"$:/plugins/oeyoews/tiddler-fullscreen/EditorToolbar\":{\"title\":\"$:/plugins/oeyoews/tiddler-fullscreen/EditorToolbar\",\"caption\":\"fullscreen\",\"condition\":\"[<targetTiddler>]\",\"icon\":\"$:/plugins/oeyoews/tiddler-fullscreen/icons/fullscreen\",\"tags\":\"$:/tags/EditorToolbar\",\"description\":\"{{$:/plugins/oeyoews/tiddler-fullscreen/readme!!description}}\",\"text\":\"<$action-sendmessage $message=\\\"om-tiddler-fullscreen\\\" title=<<targetTiddler>> />\"},\"$:/plugins/oeyoews/tiddler-fullscreen/ViewToolbar\":{\"title\":\"$:/plugins/oeyoews/tiddler-fullscreen/ViewToolbar\",\"tags\":\"$:/tags/ViewToolbar\",\"list-before\":\"$:/core/ui/Buttons/close\",\"description\":\"fullscreen tiddler\",\"caption\":\"{{$:/plugins/oeyoews/tiddler-fullscreen/icons/fullscreen}} fullscreen tiddler\",\"text\":\"\\\\whitespace trim\\n<$button message=\\\"om-tiddler-fullscreen\\\" tooltip=\\\"fullscreen tiddler\\\" aria-label=\\\"fullscreen tiddler\\\" class=<<tv-config-toolbar-class>>>\\n<$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\n{{$:/plugins/oeyoews/tiddler-fullscreen/icons/fullscreen}}\\n</$list>\\n<$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\n<span class=\\\"tc-btn-text\\\">\\n  <$text text=\\\"tiddler-fullscreen\\\"/>\\n</span>\\n</$list>\\n</$button>\\n\"}}}"}