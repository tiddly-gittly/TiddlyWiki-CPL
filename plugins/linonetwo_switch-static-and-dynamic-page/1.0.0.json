{"author":"LinOnetwo","core-version":">=5.1.22","dependents":"","description":"Add button to switch between nodejs static single card page and full feature single page app story flow view.","list":"readme config tree","plugin-type":"plugin","stability":"STABILITY_2_STABLE","text":"{\"tiddlers\":{\"$:/plugins/linonetwo/switch-static-and-dynamic-page/Macros/LinkButtonMacro\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/Macros/LinkButtonMacro\",\"tags\":\"$:/tags/Global\",\"text\":\"\\\\procedure lingo-base() $:/plugins/linonetwo/switch-static-and-dynamic-page/languages/\\n\\n\\\\procedure link-to-static-card()\\n<a class=\\\"link-btn\\\" href={{{ [{$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost}addsuffix{$:/plugins/linonetwo/switch-static-and-dynamic-page/config/SiteExtraPath}addsuffix<currentTiddler>] }}} style=\\\"text-decoration: none;\\\">\\n  <$button>\\n    <<lingo \\\"OpenStaticCard\\\">>\\n  </$button>\\n</a>\\n\\\\end\\n\\n\\\\procedure link-to-interactive-card()\\n<a href={{{ [{$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost}addsuffix{$:/plugins/linonetwo/switch-static-and-dynamic-page/config/SiteExtraPath}addsuffix[#:]addsuffix<currentTiddler>] }}} style=\\\"text-decoration: none;\\\">\\n  <$button>\\n    <<lingo \\\"OpenInteractiveCard\\\">>\\n  </$button>\\n</a>\\n\\\\end\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewToolbar/copy-static-page-url-permalink\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewToolbar/copy-static-page-url-permalink\",\"tags\":\"$:/tags/ViewToolbar\",\"caption\":\"{{$:/plugins/linonetwo/switch-static-and-dynamic-page/images/link-three-fill}} <<lingo \\\"CopyStaticUrlToClipboard\\\" \\\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/\\\">>\",\"description\":\"{{$:/language/Exporters/StaticRiver}}  {{$:/language/Buttons/CopyToClipboard/Hint}}\",\"text\":\"\\\\procedure lingo-base() $:/plugins/linonetwo/switch-static-and-dynamic-page/languages/\\n\\\\whitespace trim\\n<$let\\n  encodedTitle={{{ [<currentTiddler>encodeuricomponent[]] }}}\\n  staticPageUrl={{{ [{$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost}addsuffix{$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteExtraPath}addsuffix<encodedTitle>] }}}\\n  buttonCaption=<<get-view-toolbar-copy-button-caption>>\\n>\\n  <$button message=\\\"tm-copy-to-clipboard\\\" param=<<staticPageUrl>> tooltip=<<buttonCaption>> aria-label=<<buttonCaption>> class=<<tv-config-toolbar-class>>>\\n    <$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\n      {{$:/plugins/linonetwo/switch-static-and-dynamic-page/images/link-three-fill}}\\n    </$list>\\n    <$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\n      <span class=\\\"tc-btn-text\\\">\\n        <<lingo \\\"CopyStaticUrlToClipboard\\\">>\\n      </span>\\n    </$list>\\n  </$button>\\n</$let>\\n\\n\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewTemplate/link-view-template\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewTemplate/link-view-template\",\"tags\":\"$:/tags/ViewTemplate\",\"list-after\":\"$:/core/ui/ViewTemplate/body\",\"text\":\"<!--\\n在静态卡片左下方展示「打开完整功能可交互卡片」按钮（在交互卡片的视图工具栏展示「打开静态单页卡片」按钮）\\n此时 tv-config-static 为 yes （>= 5.3.0）\\n-->\\n<$list filter=\\\"[<tv-config-static>compare:string:eq[yes]]\\\" variable=\\\"_discard\\\">\\n<$list filter=\\\"[all[current]!prefix[$:]]\\\" variable=\\\"_discard\\\">\\n<<link-to-interactive-card>>\\n</$list>\\n</$list>\"},\"$:/core/templates/server/static.tiddler.wikitext\":{\"title\":\"$:/core/templates/server/static.tiddler.wikitext\",\"code-body\":\"yes\",\"text\":\"\\\\whitespace trim\\n<!-- Modification here -->\\n<!-- Show things before the title -->\\n<$list filter=\\\"[all[shadows]tag[$:/tags/ViewTemplate]allbefore[$:/core/ui/ViewTemplate/title]prefix[$:/plugins/]]\\\" variable=\\\"listItem\\\">\\n  <$transclude tiddler=<<listItem>>/>\\n</$list>\\n<div class=\\\"tc-tiddler-title\\\">\\n<div class=\\\"tc-titlebar\\\">\\n<h2><$text text=<<currentTiddler>>/></h2>\\n</div>\\n</div>\\n<div class=\\\"tc-subtitle\\\">\\n<$link to={{!!modifier}}>\\n<$view field=\\\"modifier\\\"/>\\n</$link> <$view field=\\\"modified\\\" format=\\\"date\\\" template={{$:/language/Tiddler/DateFormat}}/>\\n</div>\\n<div class=\\\"tc-tags-wrapper\\\">\\n<$list filter=\\\"[all[current]tags[]sort[title]]\\\">\\n<a href={{{ [<currentTiddler>encodeuricomponent[]] }}}>\\n<$macrocall $name=\\\"tag-pill\\\" tag=<<currentTiddler>>/>\\n</a>\\n</$list>\\n</div>\\n<!-- Modification here -->\\n<!-- Show things before the body text -->\\n<$list filter=\\\"[all[shadows]tag[$:/tags/ViewTemplate]allafter[$:/core/ui/ViewTemplate/title]allbefore[$:/core/ui/ViewTemplate/body]prefix[$:/plugins/]]\\\" variable=\\\"listItem\\\">\\n  <$transclude tiddler=<<listItem>>/>\\n</$list>\\n<div class=\\\"tc-tiddler-body\\\">\\n<$transclude mode=\\\"block\\\"/>\\n</div>\\n<!-- Modification here, add support for `$:/tags/ViewTemplate`, so our `$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewTemplate/link-view-template` can work. -->\\n<!-- Also ignore system view templates (for example title and text, which already exist as input, so don't need them), only support UI added by other plugins (for example SuperTag). Copied from `$:/plugins/linonetwo/tw-calendar/calendar-widget/tiddlywiki-ui/popup/EventPreview/PluginDefaultViewTemplate` -->\\n<$list filter=\\\"[all[shadows]tag[$:/tags/ViewTemplate]allafter[$:/core/ui/ViewTemplate/body]prefix[$:/plugins/]] [all[tiddlers]tag[$:/tags/ViewTemplate]!is[draft]]\\\" variable=\\\"listItem\\\">\\n  <$transclude tiddler=<<listItem>>/>\\n</$list>\"},\"$:/config/ViewToolbarButtons/Visibility/$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewToolbar/copy-static-page-url-permalink\":{\"title\":\"$:/config/ViewToolbarButtons/Visibility/$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewToolbar/copy-static-page-url-permalink\",\"created\":\"20231026161724432\",\"modified\":\"20231026161724432\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"hide\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/config\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/config\",\"tags\":\"$:/tags/ControlPanel/SettingsTab\",\"caption\":\"<<lingo config-title>>\",\"text\":\"\\\\procedure lingo-base() $:/plugins/linonetwo/switch-static-and-dynamic-page/languages/\\n\\n<<lingo config-description>>\\n\\n---\\n\\n;<<lingo config-site-host>>\\n:<$edit-text tiddler=\\\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost\\\" tabindex=-1 focus=false cancelPopups=\\\"yes\\\" fileDrop=no tag=\\\"input\\\" />\\n;<<lingo config-site-extra-path>>\\n:<$edit-text tiddler=\\\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteExtraPath\\\" tabindex=-1 focus=false cancelPopups=\\\"yes\\\" fileDrop=no tag=\\\"input\\\" />\\n\\n<<lingo config-example-url>>\\n\\n{{{ [{$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost}addsuffix{$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteExtraPath}addsuffix<currentTiddler>] }}}\\n\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteExtraPath\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteExtraPath\",\"text\":\"/\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost\",\"text\":\"wiki.onetwo.ren\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/OpenInteractiveCard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/OpenInteractiveCard\",\"text\":\"Open Interactive Card\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/OpenStaticCard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/OpenStaticCard\",\"text\":\"Open Static Card\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/CopyStaticUrlToClipboard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/CopyStaticUrlToClipboard\",\"text\":\"Copy Static Server Page URL To Clipboard\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/CopyStaticUrlToClipboardDescription\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/CopyStaticUrlToClipboardDescription\",\"text\":\"Copy the URL of the online site static card of this tiddler to the clipboard for sharing\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/config-title\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/config-title\",\"text\":\"Static Page Switch\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/config-description\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/config-description\",\"text\":\"These settings let you customise the behaviour of static page switcher buttons.\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/config-site-host\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/config-site-host\",\"text\":\"Your website [ext[host|https://developer.mozilla.org/en-US/docs/Web/API/Location/host]], ''not'' ends with `/` (for example, if your wiki is in `https://pimgeek.com/notes/`, this will be `pimgeek.com/` here, of course you can also add `https://` prefix if you like)\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/config-site-extra-path\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/config-site-extra-path\",\"text\":\"Extra path after website host (for example, if your wiki is in `https://pimgeek.com/notes/`, you need to fill `notes/` here, ''ends with'' `/`. For example, if the blog is `https://wiki.onetwo.ren/`, fill `/` here)\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/config-example-url\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/config-example-url\",\"text\":\"An example of static page url will be similar to:\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/readme\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/readme\",\"text\":\"!! Read Me\\n\\n# Allow you to copy the static page URL using the view template button {{$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewToolbar/copy-static-page-url-permalink!!caption}} (may be hidden in more {{$:/core/ui/Buttons/more-tiddler-actions}} button).\\n# Allow viewer of your static page to switch to dynamic page using a button  <<link-to-interactive-card>> show on the card.\\n\\n!! Shadow tiddlers\\n\\nWe override the [[$:/core/templates/server/static.tiddler.wikitext]] to add support for `$:/tags/ViewTemplate`.\\n\\n!! For developers\\n\\nThis plugin provides macros `<<link-to-static-card>>` and `<<link-to-interactive-card>>` that can be used anywhere.\\n\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/OpenInteractiveCard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/OpenInteractiveCard\",\"text\":\"打开可交互卡片\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/OpenStaticCard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/OpenStaticCard\",\"text\":\"打开静态卡片\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/CopyStaticUrlToClipboard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/CopyStaticUrlToClipboard\",\"text\":\"复制静态服务器页面地址到剪贴板\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/CopyStaticUrlToClipboardDescription\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/CopyStaticUrlToClipboardDescription\",\"text\":\"将本条目在线上网站对应的静态卡片网址复制到剪贴板方便分享\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/config-title\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/config-title\",\"text\":\"静态页面切换\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/config-description\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/config-description\",\"text\":\"这些设置允许你自定义静态页面切换按钮的行为。\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/config-site-host\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/config-site-host\",\"text\":\"您的网站[ext[主机名|https://developer.mozilla.org/zh-CN/docs/Web/API/Location/host]]，''不''以 `/` 结尾（例如，如果您的维基位于 `https://pimgeek.com/notes/`，这里应填写 `pimgeek.com`，当然你喜欢的话也可以加上 `https://` 前缀变成 `https://pimgeek.com`）\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/config-site-extra-path\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/config-site-extra-path\",\"text\":\"网站主机名之后的额外路径（例如，如果您的维基位于 `https://pimgeek.com/notes/`，这里需要填写 `/notes/`，''需要''以 `/` 结尾。例如如果博客是 `https://wiki.onetwo.ren/`，这里就填写 `/`）\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/config-example-url\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/config-example-url\",\"text\":\"静态页面URL示例将类似于：\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/readme\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/readme\",\"text\":\"!! 自述文件\\n\\n# 允许您使用视图模板按钮 {{$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewToolbar/copy-static-page-url-permalink!!caption}} （可能隐藏在更多 {{$:/core/ui/Buttons/more-tiddler-actions}} 按钮里）复制静态页面 URL。\\n# 允许静态页面的查看者使用卡片上显示的按钮 <<link-to-interactive-card>> 切换到动态页面。\\n\\n!! 影子条目\\n\\n我们覆盖了 [[$:/core/templates/server/static.tiddler.wikitext]] 以添加对 `$:/tags/ViewTemplate` 的支持。\\n\\n!! 二次开发\\n\\n本插件提供了宏 `<<link-to-static-card>>` 和 `<<link-to-interactive-card>>`，可以在任何地方使用。\\n\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/images/link-three-fill\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/images/link-three-fill\",\"text\":\"<svg width=\\\"22pt\\\" height=\\\"22pt\\\" class=\\\"tc-image-ipk-link-three-fill tc-image-button\\\" viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\"><rect x=\\\"34.6074\\\" y=\\\"3.4939\\\" width=\\\"14\\\" height=\\\"18\\\" rx=\\\"2\\\" transform=\\\"rotate(45 34.6074 3.4939)\\\" stroke=\\\"black\\\" stroke-width=\\\"4\\\" stroke-linejoin=\\\"round\\\"/><rect x=\\\"16.2227\\\" y=\\\"21.8787\\\" width=\\\"14\\\" height=\\\"18\\\" rx=\\\"2\\\" transform=\\\"rotate(45 16.2227 21.8787)\\\" stroke=\\\"black\\\" stroke-width=\\\"4\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M31.0723 16.929L16.9301 31.0711\\\" stroke=\\\"black\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/></svg>\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/readme\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/readme\",\"text\":\"\\\\procedure lingo-base() $:/plugins/linonetwo/switch-static-and-dynamic-page/languages/\\n\\n<<lingo readme>>\\n\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/tree\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/tree\",\"text\":\"<<tree prefix:\\\"$:/plugins/linonetwo/switch-static-and-dynamic-page/\\\">>\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/Macros/GetViewToolbarCopyButtonCaption.js\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/Macros/GetViewToolbarCopyButtonCaption.js\",\"type\":\"application/javascript\",\"module-type\":\"macro\",\"Modern.TiddlyDev#Origin\":\"Macros/GetViewToolbarCopyButtonCaption.ts\",\"text\":\"\\\"use strict\\\";exports.name=\\\"get-view-toolbar-copy-button-caption\\\",exports.params=[],exports.run=function(){let t=this.getVariable(\\\"staticPageUrl\\\");return(t=40<t.length?t.substring(0,40)+\\\"...\\\":t)+\\\" \\\"+($tw.wiki.getTiddlerText(\\\"$:/language/Buttons/CopyToClipboard/Caption\\\")??\\\"(Copy)\\\")};\"}}}","title":"$:/plugins/linonetwo/switch-static-and-dynamic-page","type":"application/json","version":"1.0.0","Modern.TiddlyDev#SHA256-Hashed":"f7c82233835e80d945c2cbef992e6ed7f2568f2102955ce1aec2dd48df579f40","name":"Static Page Switch Button"}