{"author":"LinOnetwo","core-version":">=5.1.22","dependents":"","description":"Add button to switch between nodejs static single card page and full feature single page app story flow view.","list":"readme config tree","plugin-type":"plugin","text":"{\"tiddlers\":{\"$:/plugins/linonetwo/switch-static-and-dynamic-page/Macros/LinkButtonMacro\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/Macros/LinkButtonMacro\",\"tags\":\"$:/tags/Macro\",\"text\":\"\\\\define lingo-base() $:/plugins/linonetwo/switch-static-and-dynamic-page/languages/\\n\\n\\\\define link-to-static-card()\\n<a class=\\\"link-btn\\\" href={{{ [[/]addsuffix{$:/plugins/linonetwo/switch-static-and-dynamic-page/config/SiteExtraPath}addsuffix<currentTiddler>] }}} rel=\\\"noopener noreferrer\\\" target=\\\"_blank\\\">\\n  <$button>\\n    <<t \\\"OpenStaticCard\\\">>\\n  </$button>\\n</a>\\n\\\\end\\n\\n\\\\define link-to-interactive-card()\\n<a href={{{ [[/]addsuffix{$:/plugins/linonetwo/switch-static-and-dynamic-page/config/SiteExtraPath}addsuffix[#:]addsuffix<currentTiddler>] }}} rel=\\\"noopener noreferrer\\\">\\n  <$button>\\n    <<t \\\"OpenInteractiveCard\\\">>\\n  </$button>\\n</a>\\n\\\\end\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewToolbar/copy-static-page-url-permalink\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewToolbar/copy-static-page-url-permalink\",\"tags\":\"$:/tags/ViewToolbar\",\"caption\":\"{{$:/plugins/linonetwo/switch-static-and-dynamic-page/images/link-three-fill}} <<t \\\"CopyStaticUrlToClipboard\\\" \\\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/\\\">>\",\"description\":\"{{$:/language/Exporters/StaticRiver}}  {{$:/language/Buttons/CopyToClipboard/Hint}}\",\"text\":\"\\\\define lingo-base() $:/plugins/linonetwo/switch-static-and-dynamic-page/languages/\\n\\\\whitespace trim\\n<$let\\n  encodedTitle={{{ [<currentTiddler>encodeuricomponent[]] }}}\\n  staticPageUrl={{{ [{$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost}addsuffix{$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteExtraPath}addsuffix<encodedTitle>] }}}\\n  buttonCaption=<<get-view-toolbar-copy-button-caption>>\\n>\\n  <$button message=\\\"tm-copy-to-clipboard\\\" param=<<staticPageUrl>> tooltip=<<buttonCaption>> aria-label=<<buttonCaption>> class=<<tv-config-toolbar-class>>>\\n    <$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\n      {{$:/plugins/linonetwo/switch-static-and-dynamic-page/images/link-three-fill}}\\n    </$list>\\n    <$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\n      <span class=\\\"tc-btn-text\\\">\\n        <<t \\\"CopyStaticUrlToClipboard\\\">>\\n      </span>\\n    </$list>\\n  </$button>\\n</$let>\\n\\n\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewTemplate/link-view-template\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewTemplate/link-view-template\",\"tags\":\"$:/tags/ViewTemplate\",\"text\":\"<!--\\n在静态卡片左下方展示「打开完整功能可交互卡片」按钮（在交互卡片的视图工具栏展示「打开静态单页卡片」按钮）\\n此时 tv-config-static 为 yes （>= 5.3.0）\\n-->\\n<$list filter=\\\"[<tv-config-static>compare:string:eq[yes]]\\\" variable=\\\"_discard\\\">\\n<$list filter=\\\"[all[current]!prefix[$:]]\\\" variable=\\\"_discard\\\">\\n<<link-to-interactive-card>>\\n</$list>\\n</$list>\"},\"$:/core/templates/server/static.tiddler.wikitext\":{\"title\":\"$:/core/templates/server/static.tiddler.wikitext\",\"code-body\":\"yes\",\"text\":\"\\\\whitespace trim\\n<!-- Modification here -->\\n<!-- Show things before the title -->\\n<$list filter=\\\"[all[shadows]tag[$:/tags/ViewTemplate]allbefore[$:/core/ui/ViewTemplate/title]prefix[$:/plugins/]]\\\" variable=\\\"listItem\\\">\\n  <$transclude tiddler=<<listItem>>/>\\n</$list>\\n<div class=\\\"tc-tiddler-title\\\">\\n<div class=\\\"tc-titlebar\\\">\\n<h2><$text text=<<currentTiddler>>/></h2>\\n</div>\\n</div>\\n<div class=\\\"tc-subtitle\\\">\\n<$link to={{!!modifier}}>\\n<$view field=\\\"modifier\\\"/>\\n</$link> <$view field=\\\"modified\\\" format=\\\"date\\\" template={{$:/language/Tiddler/DateFormat}}/>\\n</div>\\n<div class=\\\"tc-tags-wrapper\\\">\\n<$list filter=\\\"[all[current]tags[]sort[title]]\\\">\\n<a href={{{ [<currentTiddler>encodeuricomponent[]] }}}>\\n<$macrocall $name=\\\"tag-pill\\\" tag=<<currentTiddler>>/>\\n</a>\\n</$list>\\n</div>\\n<!-- Modification here -->\\n<!-- Show things before the body text -->\\n<$list filter=\\\"[all[shadows]tag[$:/tags/ViewTemplate]allafter[$:/core/ui/ViewTemplate/title]allbefore[$:/core/ui/ViewTemplate/body]prefix[$:/plugins/]]\\\" variable=\\\"listItem\\\">\\n  <$transclude tiddler=<<listItem>>/>\\n</$list>\\n<div class=\\\"tc-tiddler-body\\\">\\n<$transclude mode=\\\"block\\\"/>\\n</div>\\n<!-- Modification here, add support for `$:/tags/ViewTemplate`, so our `$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewTemplate/link-view-template` can work. -->\\n<!-- Also ignore system view templates (for example title and text, which already exist as input, so don't need them), only support UI added by other plugins (for example SuperTag). Copied from `$:/plugins/linonetwo/tw-calendar/calendar-widget/tiddlywiki-ui/popup/EventPreview/PluginDefaultViewTemplate` -->\\n<$list filter=\\\"[all[shadows]tag[$:/tags/ViewTemplate]allafter[$:/core/ui/ViewTemplate/body]prefix[$:/plugins/]] [all[tiddlers]tag[$:/tags/ViewTemplate]!is[draft]]\\\" variable=\\\"listItem\\\">\\n  <$transclude tiddler=<<listItem>>/>\\n</$list>\"},\"$:/config/ViewToolbarButtons/Visibility/$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewToolbar/copy-static-page-url-permalink\":{\"title\":\"$:/config/ViewToolbarButtons/Visibility/$:/plugins/linonetwo/switch-static-and-dynamic-page/ViewToolbar/copy-static-page-url-permalink\",\"created\":\"20231026161724432\",\"modified\":\"20231026161724432\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"hide\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/config\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/config\",\"tags\":\"$:/tags/ControlPanel/SettingsTab\",\"caption\":\"Static Page Switch\",\"text\":\"These settings let you customise the behaviour of static page switcher buttons.\\n\\n---\\n\\n;Your website host, ends with `/` (for example, if your wiki is in `https://pimgeek.com/notes/`, this will be `https://pimgeek.com/` here)\\n:<$edit-text tiddler=\\\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost\\\" tabindex=-1 focus=false cancelPopups=\\\"yes\\\" fileDrop=no tag=\\\"input\\\" />\\n;Extra path after website host (for example, if your wiki is in `https://pimgeek.com/notes/`, you need to fill `notes/` here)\\n:<$edit-text tiddler=\\\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteExtraPath\\\" tabindex=-1 focus=false cancelPopups=\\\"yes\\\" fileDrop=no tag=\\\"input\\\" />\\n\\nAn example of static page url will be:\\n\\n{{{ [{$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost}addsuffix{$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteExtraPath}addsuffix<currentTiddler>] }}}\\n\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteExtraPath\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteExtraPath\",\"text\":\"\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/configs/SiteHost\",\"text\":\"https://wiki.onetwo.ren/\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/OpenInteractiveCard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/OpenInteractiveCard\",\"text\":\"Open Interactive Card\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/OpenStaticCard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/OpenStaticCard\",\"text\":\"Open Static Card\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/CopyStaticUrlToClipboard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/CopyStaticUrlToClipboard\",\"text\":\"Copy Static Server Page URL To Clipboard\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/CopyStaticUrlToClipboardDescription\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/en-GB/CopyStaticUrlToClipboardDescription\",\"text\":\"Copy the URL of the online site static card of this tiddler to the clipboard for sharing\"},\"$:/core/i18n/translate-macro\":{\"title\":\"$:/core/i18n/translate-macro\",\"tags\":\"$:/tags/Macro\",\"text\":\"\\\\define t(key,lingo-base-fallback:\\\"\\\")\\n<$set name=\\\"lingoBaseWithFallback\\\" value=\\\"$lingo-base-fallback$\\\" emptyValue=<<lingo-base>>>\\n  <$set name=\\\"lang\\\" filter=\\\"[[$:/language]get[text]get[name]else[en-GB]]\\\">\\n    <$text text={{{[<lingoBaseWithFallback>addsuffix<lang>addsuffix[/]addsuffix<__key__>get[text]]}}} />\\n  </$set>\\n</$set>\\n\\\\end\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/OpenInteractiveCard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/OpenInteractiveCard\",\"text\":\"打开可交互卡片\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/OpenStaticCard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/OpenStaticCard\",\"text\":\"打开静态卡片\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/CopyStaticUrlToClipboard\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/CopyStaticUrlToClipboard\",\"text\":\"复制静态服务器页面地址到剪贴板\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/CopyStaticUrlToClipboardDescription\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/languages/zh-Hans/CopyStaticUrlToClipboardDescription\",\"text\":\"将本条目在线上网站对应的静态卡片网址复制到剪贴板方便分享\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/images/link-three-fill\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/images/link-three-fill\",\"text\":\"<svg width=\\\"22pt\\\" height=\\\"22pt\\\" class=\\\"tc-image-ipk-link-three-fill tc-image-button\\\" viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\"><rect x=\\\"34.6074\\\" y=\\\"3.4939\\\" width=\\\"14\\\" height=\\\"18\\\" rx=\\\"2\\\" transform=\\\"rotate(45 34.6074 3.4939)\\\" stroke=\\\"black\\\" stroke-width=\\\"4\\\" stroke-linejoin=\\\"round\\\"/><rect x=\\\"16.2227\\\" y=\\\"21.8787\\\" width=\\\"14\\\" height=\\\"18\\\" rx=\\\"2\\\" transform=\\\"rotate(45 16.2227 21.8787)\\\" stroke=\\\"black\\\" stroke-width=\\\"4\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M31.0723 16.929L16.9301 31.0711\\\" stroke=\\\"black\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/></svg>\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/readme\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/readme\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"!! Read Me\\n\\n# Allow you copy static page url using a view template button.\\n# Allow viewer of your static page to switch to dynamic page using a button show on the card.\\n\\n!! Shadow tiddlers\\n\\nWe overwride the [[$:/core/templates/server/static.tiddler.wikitext]] to add support for `$:/tags/ViewTemplate`.\\n\"},\"$:/plugins/linonetwo/switch-static-and-dynamic-page/tree\":{\"title\":\"$:/plugins/linonetwo/switch-static-and-dynamic-page/tree\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<<tree prefix:\\\"$:/plugins/linonetwo/switch-static-and-dynamic-page/\\\">>\"},\"src/switch-static-and-dynamic-page/Macros/GetViewToolbarCopyButtonCaption.js\":{\"title\":\"src/switch-static-and-dynamic-page/Macros/GetViewToolbarCopyButtonCaption.js\",\"type\":\"application/javascript\",\"module-type\":\"macro\",\"Modern.TiddlyDev#Origin\":\"Macros/GetViewToolbarCopyButtonCaption.ts\",\"text\":\"\\\"use strict\\\";exports.name=\\\"get-view-toolbar-copy-button-caption\\\",exports.params=[],exports.run=function(){let t=this.getVariable(\\\"staticPageUrl\\\");return(t=40<t.length?t.substring(0,40)+\\\"...\\\":t)+\\\" \\\"+($tw.wiki.getTiddlerText(\\\"$:/language/Buttons/CopyToClipboard/Caption\\\")??\\\"(Copy)\\\")};\"}}}","title":"$:/plugins/linonetwo/switch-static-and-dynamic-page","type":"application/json","version":"0.1.0","Modern.TiddlyDev#SHA256-Hashed":"0657891b7cb60b22869649f285991feccaabad773f8d5461128f7043cbb25a8c","name":"Static Page Switch Button"}