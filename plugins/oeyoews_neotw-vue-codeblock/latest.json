{"title":"$:/plugins/oeyoews/neotw-vue-codeblock","description":"neotw-vue-codeblock","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"neotw-vue-codeblock","meat#disabled":"yes","qrcode":"yes","created":"2024-03-14","dependents":"$:/plugins/oeyoews/neotw-vue3","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-vue-codeblock/templates/app.vue\":{\"text\":\"<template>\\n  <div class=\\\"p-2 rounded inline-flex bg-neutral-200 my-2 text-black font-semibold\\\">\\n    <span ref=\\\"codeRef\\\">\\n      {{ code }}\\n    </span>\\n    <button class=\\\"right-0 bg-transparent\\\" @click=\\\"copyCode\\\">\\n      <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"text-black\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 256 256\\\">\\n        <path fill=\\\"currentColor\\\"\\n          d=\\\"M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z\\\" />\\n      </svg>\\n    </button>\\n  </div>\\n</template>\",\"title\":\"$:/plugins/oeyoews/neotw-vue-codeblock/templates/app.vue\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/neotw-vue-codeblock/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-codeblock/readme\",\"description\":\"neotw-vue-codeblock\",\"text\":\"<!-- plugin template readme -->\\n\\n<!-- !! Motivation -->\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\"},\"$:/plugins/oeyoews/neotw-vue-codeblock/app.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-codeblock/app.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-codeblock/app.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\n\\nconst { ref } = window.Vue;\\n\\nconst getTemplate = require('$:/plugins/oeyoews/neotw-vue3/getTemplate.js');\\nconst { copyToClipboard } = $tw.utils;\\n\\nconst app = (code = 'npx create neotw@latest') => {\\n  const component = {\\n    setup() {\\n      return { code };\\n    },\\n\\n    methods: {\\n      async copyCode() {\\n        const code = this.$refs.codeRef.textContent.trim();\\n\\n        copyToClipboard(code, {\\n          // doNotNotify: false,\\n          // TIDDler\\n          // successNotification: '复制成功',\\n          // failureNotification: '复制失败',\\n        });\\n\\n        // if (code && window.navigator.clipboard?.writeText) {\\n        //   await window.navigator.clipboard.writeText(code);\\n        // }\\n        // toast.success({\\n        //   message: 'Copied to clipboard'\\n        // });\\n      },\\n    },\\n\\n    template: getTemplate(\\n      '$:/plugins/oeyoews/neotw-vue-codeblock/templates/app.vue',\\n    ),\\n\\n    components: {},\\n  };\\n  return component;\\n};\\n\\nmodule.exports = app;\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-vue-codeblock/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-codeblock/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-codeblock/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-vue-codeblock widget\\n\\n\\\\*/\\nconst { widget: Widget } = require('$:/core/modules/widgets/widget.js');\\n\\nclass VueCodeBlockWIdget extends Widget {\\n  constructor(parseTreeNode, options) {\\n    super(parseTreeNode, options);\\n  }\\n\\n  render(parent, nextSibling) {\\n    if (!$tw.browser) return;\\n\\n    this.computeAttributes();\\n    this.execute();\\n\\n    const ssr = this.document.isTiddlyWikiFakeDom;\\n    if (ssr) return;\\n\\n    const vuelib = '$:/plugins/oeyoews/neotw-vue3/vue.global.prod.js';\\n\\n    if (!window.Vue) {\\n      window.Vue = require(vuelib);\\n    }\\n\\n    const { createApp } = window.Vue;\\n    const component = require('./app');\\n    const domNode = this.document.createElement('div');\\n    const { code } = this.attributes;\\n\\n    try {\\n      const app = createApp(component(code));\\n\\n      app.config.errorHandler = (err) => {\\n        const text = `[Vue3](${app.version}): ` + err;\\n        console.error(text);\\n        domNode.textContent = text;\\n        domNode.style.color = 'red';\\n      };\\n\\n      // 挂载\\n      app.mount(domNode);\\n\\n      parent.insertBefore(domNode, nextSibling);\\n      this.domNodes.push(domNode);\\n    } catch (e) {\\n      console.error(e.message);\\n    }\\n  }\\n}\\n\\n/** @description neotw-vue-codeblock widget */\\nexports['vue-cta'] = VueCodeBlockWIdget;\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}