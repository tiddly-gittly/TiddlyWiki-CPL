{"title":"$:/plugins/oeyoews/vue-kanban","description":"vue-kanban","author":"oeyoews","version":"0.1.0","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"vue-kanban","meat#disabled":"yes","qrcode":"yes","created":"2024-03-18","dependents":"$:/plugins/oeyoews/neotw-vue3 $:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/vue-kanban/templates/List.vue\":{\"text\":\"<div class=\\\"mr-2 flex flex-col overflow-y-hidden rounded-md transition-all duration-75 min-h-[50px] bg-[#f5f5ee] \\\">\\n\\t<!-- title -->\\n\\t<div class=\\\"flex p-2 items-center gap-2 mx-4 mt-2\\\">\\n\\t\\t<el-badge :value=\\\"data.items.length\\\" :type=\\\"tags[type]\\\" :max='99'>\\n\\t\\t\\t<el-tag effect=\\\"dark\\\" :type=\\\"tags[type]\\\" class=\\\"font-semibold\\\">\\n\\t\\t\\t\\t<div v-html=\\\"icons[type]\\\" class=\\\"inline align-top\\\"></div>\\n\\t\\t\\t\\t{{upperedType}}\\n\\t\\t\\t</el-tag>\\n\\t\\t</el-badge>\\n\\t\\t<div class=\\\"ml-auto\\\">\\n\\t\\t\\t<!-- NOTE: emit 自定义事件不要和vue-draggable 冲突 add update remove -->\\n\\t\\t\\t<el-button type=\\\"plain\\\" @click=\\\"$emit('showDialog', type)\\\" size='small' v-if=\\\"isTODO\\\">add</el-button>\\n\\t\\t</div>\\n\\t</div>\\n\\t<!-- items -->\\n\\t<div class=\\\"relative\\\">\\n\\t\\t<!-- emptyTips -->\\n\\t\\t<div class=\\\"absolute bottom-0 my-auto w-full\\\" v-if=\\\"!data.items.length\\\">\\n\\t\\t\\t<el-empty :description=\\\"emptyTips[type]\\\"></el-empty>\\n\\t\\t</div>\\n\\t\\t<!-- :targetd=\\\"`.${type}`\\\" -->\\n\\t\\t<!-- draggable items -->\\n\\t\\t<VueDraggable v-model=\\\"data.items\\\" animation=\\\"150\\\" ghostClass=\\\"kanban-ghost\\\" group=\\\"kanban\\\" :forceFallback\\n\\t\\t\\t@update=\\\"$emit('onUpdate', $event)\\\" @add=\\\"$emit('onAdd', $event)\\\" @remove=\\\"$emit('onRemove', $event)\\\"\\n\\t\\t\\tclass=\\\"flex flex-col grow h-[calc(100vh-100px)] mb-4 overflow-y-auto mx-4\\\" :class=\\\"type\\\">\\n\\t\\t\\t<div v-for=\\\"(item) in data.items\\\" :key=\\\"`${type}-${item.id}`\\\"\\n\\t\\t\\t\\tclass=\\\"relative rounded-md shadow-sm overflow-visible mb-2 shrink-0 flex-col cursor-move\\\"\\n\\t\\t\\t\\t:class=\\\"[ colorful ? colors[type] : 'bg-white' ]\\\" @dblclick=\\\"$emit('editItem', item, type)\\\"\\n\\t\\t\\t\\t@contextmenu.prevent.stop=\\\"$emit('deleteItem', item, type)\\\">\\n\\t\\t\\t\\t<div class=\\\"pt-2 pb-3 rounded-sm px-3 \\\">\\n\\t\\t\\t\\t\\t<div class=\\\"py-4 line-clamp-2\\\" v-html=\\\"item.name\\\">\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</VueDraggable>\\n\\t</div>\\n</div>\",\"title\":\"$:/plugins/oeyoews/vue-kanban/templates/List.vue\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/vue-kanban/templates/app.vue\":{\"text\":\"<template>\\n  <!-- https://github.com/Alfred-Skyblue/vue-draggable-plus/issues/118 -->\\n  <div hidden> {{allData[0].items}}\\n    <hr> {{allData[1].items}}\\n    <hr> {{allData[2].items}}\\n  </div>\\n  <div\\n    class=\\\"relative min-h-0 overflow-x-auto gap-2 select-none not-prose ~bg-[#efefef] grid grid-cols-1 grid-rows-1 md:grid-cols-3 m-1 md:m-4\\\">\\n    <List @deleteItem=\\\"deleteItem\\\" @editItem=\\\"editItem\\\" @showDialog=\\\"showDialog\\\" :data=\\\"list\\\" :type=\\\"list.name\\\"\\n      v-for=\\\"list in allData\\\" :key=\\\"list.name\\\" @onUpdate=\\\"onUpdate\\\" @onAdd=\\\"onAdd\\\" @onRemove=\\\"onRemove\\\" />\\n  </div>\\n\\n  <!-- 编辑 item 弹窗 -->\\n  <!-- // TODO: 优化mobile 弹窗 -->\\n  <el-dialog v-model=\\\" dialogFormVisible\\\" title=\\\"Add items\\\" width=\\\"60%\\\">\\n    <el-form :model=\\\"form\\\" @submit.prevent=\\\"addNewItem\\\">\\n      <el-form-item label=\\\"标题\\\" props='name'>\\n        <el-input v-model=\\\"form.name\\\" autocomplete=\\\"off\\\" placeholder='Input Something ...' ref=\\\"inputRef\\\" />\\n      </el-form-item>\\n      <el-form-item label=\\\"描述\\\" props='description'>\\n        <el-input type=\\\"textarea\\\" v-model=\\\"form.description\\\" class=\\\"w-full\\\" :rows=\\\"4\\\" @keyup.enter=\\\"addNewItem\\\"\\n          placeholder='Input Something ...' />\\n      </el-form-item>\\n    </el-form>\\n    <template #footer>\\n      <div class=\\\"dialog-footer\\\">\\n        <el-button @click=\\\"cancelDialog\\\">Cancel</el-button>\\n        <el-button type=\\\"primary\\\" @click=\\\"addNewItem\\\"> Confirm </el-button>\\n      </div>\\n    </template>\\n  </el-dialog>\\n</template>\",\"title\":\"$:/plugins/oeyoews/vue-kanban/templates/app.vue\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/vue-kanban/plugins/Draggable.js\":{\"text\":\"const{VueDraggable:e,vDraggable:a}=require(\\\"draggableplus.js\\\");module.exports={install(a,g){a.component(\\\"VueDraggable\\\",e)}};\",\"title\":\"$:/plugins/oeyoews/vue-kanban/plugins/Draggable.js\",\"module-type\":\"library\",\"type\":\"application/javascript\"},\"$:/plugins/oeyoews/vue-kanban/components/List.js\":{\"text\":\"const{createPluginTemplate:e}=require(\\\"../../neotw-vue3/createPluginTemplate.js\\\"),t=e(\\\"oeyoews/vue-kanban\\\"),s=require(\\\"../icons\\\"),o=\\\"yes\\\"===$tw.wiki.getTiddlerText(\\\"$:/config/DragAndDrop/Enable\\\");module.exports={name:\\\"List\\\",props:[\\\"data\\\",\\\"type\\\"],data:()=>({colorful:!1,colors:{todo:\\\"bg-orange-200\\\",inprogress:\\\"bg-lime-200\\\",done:\\\"bg-blue-200\\\"},emptyTips:{todo:\\\"暂无代办事项\\\",inprogress:\\\"代办事项已全部完成\\\",done:\\\"所有事项已完成\\\"},tags:{todo:\\\"warning\\\",inprogress:\\\"success\\\",done:\\\"primary\\\"},icons:s,upperedType:\\\"\\\",isTODO:!1,forceFallback:o}),mounted(){this.upperFirstLetter(this.type),this.isTODO=\\\"todo\\\"===this.type},methods:{upperFirstLetter(e){e&&\\\"string\\\"==typeof e&&(this.upperedType=e?.slice(0,1).toUpperCase()+e.slice(1))}},template:t(\\\"List.vue\\\")};\",\"title\":\"$:/plugins/oeyoews/vue-kanban/components/List.js\",\"module-type\":\"library\",\"type\":\"application/javascript\"},\"$:/plugins/oeyoews/vue-kanban/readme\":{\"title\":\"$:/plugins/oeyoews/vue-kanban/readme\",\"description\":\"vue-kanban\",\"text\":\"> 为了更好的拖拽体验，建议设置 [[$:/config/DragAndDrop/Enable]] 为 no.\\n\\n<!-- > 如果 tiddlywiki 开启了全局拖拽(tw 默认启用， 建议关闭， 因为 forcefallback 的效果不够流畅）， 就默认启用forcefallback -->\\n\\n<$vue-kanban />\\n\\n!! Usage\\n\\n* `tiddler=\\\"kanban.json\\\"\"},\"$:/plugins/oeyoews/vue-kanban/Layout\":{\"title\":\"$:/plugins/oeyoews/vue-kanban/Layout\",\"name\":\"{{$:/plugins/oeyoews/vue-kanban/icon}} Kanban\",\"description\":\"{{$:/plugins/oeyoews/vue-kanban/readme!!description}}\",\"tags\":\"$:/tags/Layout\",\"text\":\"<div class=\\\"bg-white h-screen p-4\\\">\\n\\t<$vue-kanban />\\n</div>\"},\"$:/plugins/oeyoews/vue-kanban/app.js\":{\"title\":\"$:/plugins/oeyoews/vue-kanban/app.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-kanban/app.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nconst{reactive:e,ref:t}=window.Vue,{ElMessage:i,ElMessageBox:s}=require(\\\"element-plus.min.js\\\"),o=require(\\\"../neotw-vue3/getTemplate.js\\\"),a=require(\\\"./components/List.js\\\");module.exports=(e=\\\"kanban.json\\\")=>({components:{List:a},data(){const t=[\\\"todo\\\",\\\"inprogress\\\",\\\"done\\\"].map((e=>({name:e,items:[]})));return{devMode:!1,dialogFormVisible:!1,allData:$tw.wiki.getTiddlerData(e)||t,form:{name:\\\"\\\",id:\\\"\\\",description:\\\"\\\"},currentEditItemType:\\\"\\\"}},watch:{todo(e,t){this.log(e,t)},inprogress(e,t){this.log(e,t)},done(e,t){this.log(e,t)},allData(e,t){console.log(\\\"allData\\\")}},methods:{deleteItem(e,t){s.confirm(\\\"Are you sure you want to delete this item?\\\",\\\"Warning\\\",{confirmButtonText:\\\"OK\\\",cancelButtonText:\\\"Cancel\\\",type:\\\"warning\\\"}).then((()=>{const s=this.allData.findIndex((e=>e.name===t)),o=this.allData[s].items;o.splice(o.findIndex((t=>t.id===e.id)),1),this.saveData(),i({type:\\\"success\\\",message:\\\"Delete completed\\\"})})).catch((()=>{i({type:\\\"info\\\",message:\\\"Delete canceled\\\"})}))},log(...e){this.devMode&&console.log(...e)},addNewItem(){const e=this.currentEditItemType;if(!e)return void console.log(\\\"未知类型\\\");if(this.log(this.form),!this.form.name.trim())return;this.dialogFormVisible=!1;const t=this.allData.findIndex((t=>t.name===e)),i=this.allData[t].items;if(this.form.id){const e=i.findIndex((e=>e.id===this.form.id));if(-1===e)return;i[e].name=this.form.name,i[e].description=this.form?.description}else i.unshift({name:this.form.name,id:(new Date).getTime(),description:this.form?.description});this.emptyForm(),this.saveData()},emptyForm(){this.form.name=\\\"\\\",this.form.id=\\\"\\\",this.form.description=\\\"\\\"},editItem(e,t){this.form.name=e.name,this.form.id=e.id,this.form.description=e.description,this.showDialog(t),this.saveData()},showDialog(e){this.currentEditItemType=e,\\n// if (['inprogress', 'done'].includes(type)) return;\\nthis.dialogFormVisible=!0,this.$nextTick((()=>{setTimeout((()=>{this.$refs.inputRef?.focus()}),0)}))},cancelDialog(){this.emptyForm(),this.dialogFormVisible=!1},saveData(){$tw.wiki.setTiddlerData(e,this.allData,null,{suppressTimestamp:!0})},onUpdate(e){this.saveData()},onAdd(e){this.log(\\\"add\\\",e),this.saveData()},onRemove(e){this.log(\\\"remove\\\",e),this.saveData()},toggleDevMode(){this.devMode=!this.devMode}},template:o(\\\"oeyoews/vue-kanban/templates/app.vue\\\")}),Object.entries({one:[{id:99}],two:[{id:22}]}).map((e=>({name:e[0],items:e[1]})));\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/vue-kanban/icon\":{\"title\":\"$:/plugins/oeyoews/vue-kanban/icon\",\"text\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1.12em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 256 230\\\"><path fill=\\\"#383838\\\" d=\\\"M34.404 15.29h23.547V0H34.404a34.3 34.3 0 0 0-18.363 5.306l8.17 12.925a19.04 19.04 0 0 1 10.193-2.941M15.29 34.404c0-2.794.587-5.482 1.744-7.991L3.148 20.012A34.1 34.1 0 0 0 0 34.404v27.064h15.29zM0 76.911h15.29v38.532H0zm205.901-58.194a331 331 0 0 1 13.753-8.257a34.7 34.7 0 0 0-8.941-6.645A34.5 34.5 0 0 0 194.954 0h-13.532v15.29h13.532c4.006 0 7.788 1.211 10.947 3.427M0 130.887h15.29v38.609H0zM73.395 0h38.532v15.291H73.395zm53.975 0h38.609v15.291H127.37zm17.049 214.067h38.532v15.291h-38.532zM214.068 86.85h15.291v38.609h-15.291zm0 54.052h15.291v38.532h-15.291zM15.29 194.954v-10.015H0v10.015a34.44 34.44 0 0 0 17.783 30.129l7.395-13.384a19.14 19.14 0 0 1-9.888-16.745M214.068 61.267v10.14h15.29V48.698c-5.026 3.742-10.128 7.936-15.29 12.569m0 133.687c0 9.585-7.153 17.734-16.639 18.956l1.952 15.165a34.37 34.37 0 0 0 21.331-11.313a34.37 34.37 0 0 0 8.646-22.808v-.076h-15.29zM36.315 214.067h38.609v15.291H36.315zm54.052 0h38.609v15.291H90.367z\\\"/><path fill=\\\"#af2f2f\\\" d=\\\"m35.015 121.738l71.72 71.72S178.455 55.479 256 24.534L253.088 2.69C210.857 19.437 146.782 63.489 99.454 130.839l-49.876-29.488z\\\"/></svg>\"},\"$:/plugins/oeyoews/vue-kanban/icons.js\":{\"title\":\"$:/plugins/oeyoews/vue-kanban/icons.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-kanban/icons.js\\ntype: application/javascript\\nmodule-type: library\\n\\nhttps://icon-sets.iconify.design/catppuccin/dhall/\\n\\n\\\\*/\\nmodule.exports={todo:'<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"none\\\" stroke=\\\"#cad3f5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" d=\\\"m3.5 11.5l2-7l6-2l2 2l-2 6l-7 2l3-3a1 1 0 1 0-1-1zm6.75-10.25l4.5 4.5M2 14.5a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1\\\"/></svg>',inprogress:'<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 16 16\\\"><g fill=\\\"none\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"><path stroke=\\\"#cad3f5\\\" d=\\\"M8.128 14.499h-4.81c-.386 0-.818-.432-.818-.818V2.317c0-.385.432-.817.817-.817h9.37c.385 0 .817.432.817.817v6.866m-8-3.683H10.5m-5 4h3\\\"/><path stroke=\\\"#a6da95\\\" d=\\\"m9.5 12.5l2 2l4-4\\\"/></g></svg>',done:'<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" viewBox=\\\"0 0 16 16\\\"><g fill=\\\"none\\\" stroke=\\\"#a6da95\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"><path d=\\\"M14.5 8A6.5 6.5 0 0 1 8 14.5A6.5 6.5 0 0 1 1.5 8A6.5 6.5 0 0 1 8 1.5A6.5 6.5 0 0 1 14.5 8\\\"/><path d=\\\"m4.5 7.5l2.5 3l4.5-5\\\"/></g></svg>'};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/vue-kanban/style.css\":{\"title\":\"$:/plugins/oeyoews/vue-kanban/style.css\",\"text\":\".kanban-ghost {\\n  border: 2px dashed gray;\\n}\\n\\n.el-dialog {\\n  border-radius: 5px;\\n}\\n\",\"type\":\"text/css\",\"tags\":\"$:/tags/Stylesheet\"},\"$:/plugins/oeyoews/vue-kanban/todo.js\":{\"title\":\"$:/plugins/oeyoews/vue-kanban/todo.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-kanban/todo.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\n/**\\n * @typedef {Object} Item\\n * @property {string} name 事项\\n * @property {string} id 事项id\\n */\\n/** @type {Item[]} */\\nmodule.exports=[{name:\\\"添加设置\\\",id:\\\"setup\\\"},{name:\\\"添加垃圾桶第四列\\\",id:0},{name:\\\"无法重新排序\\\",id:\\\"01\\\"},{name:\\\"黑暗模式主题适配\\\",id:1},{name:\\\"做成一个单独布局\\\",id:2},{name:\\\"数据存储到本地Tiddler\\\",id:\\\"3\\\"},{name:\\\"样式优化\\\",id:\\\"4\\\"},{name:\\\"支持条目跳转\\\",id:5},{name:\\\"支持检测所有todo标签\\\",id:6},{name:\\\"支持删除\\\",id:7},{name:\\\"支持输入框添加\\\",id:8},{name:\\\"disabled 当列表为空的时候\\\",id:9}];\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/vue-kanban/widget.js\":{\"title\":\"$:/plugins/oeyoews/vue-kanban/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/vue-kanban/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nvue-kanban widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports[\\\"vue-kanban\\\"]=class extends e{constructor(e,r){super(e,r)}render(e,r){if(!$tw.browser)return;if(this.computeAttributes(),this.execute(),this.document.isTiddlyWikiFakeDom)return;window.Vue||(window.Vue=require(\\\"../neotw-vue3/vue.global.prod.js\\\"));const{createApp:t}=window.Vue,s=require(\\\"./app\\\"),o=this.document.createElement(\\\"div\\\"),i=require(\\\"./plugins/Draggable\\\"),n=require(\\\"element-plus.min.js\\\"),{tiddler:u}=this.attributes;try{const d=t(s(u));d.use(i).use(n),d.config.errorHandler=e=>{const r=`[Vue3](${d.version}): `+e;console.error(r),o.textContent=r,o.style.color=\\\"red\\\"},d.mount(o),e.insertBefore(o,r),this.domNodes.push(o)}catch(e){console.error(e.message)}}refresh(){return!1}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}