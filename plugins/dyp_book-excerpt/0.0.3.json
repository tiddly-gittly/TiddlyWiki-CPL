{"title":"$:/plugins/dyp/book-excerpt","version":"0.0.3","stability":"STABILITY_2_STABLE","name":"book-excerpt","description":"摘抄","author":"dyp","source":"https://github.com/dyp1121054136/dyp-plugins-library","list":"readme usage history","plugin-priority":"","parent-plugin":"","dependents":"","plugin-type":"plugin","core-version":"5.3.7-prerelease","packaged-by":"Gatha on 5th 七月 2025, 16:38:49","type":"application/json","text":"{\"tiddlers\":{\"$:/config/ViewTemplateBodyFilters/book-excerpt\":{\"title\":\"$:/config/ViewTemplateBodyFilters/book-excerpt\",\"created\":\"20250705064324212\",\"list-before\":\"$:/config/ViewTemplateBodyFilters/default\",\"modified\":\"20250705064355071\",\"tags\":\"级联 $:/tags/ViewTemplateBodyFilter 摘抄\",\"text\":\"[field:excerpt[yes]then[$:/custom/ui/ViewTemplate/body/book-excerpt]]\"},\"$:/core/images/new-book-excerpt\":{\"title\":\"$:/core/images/new-book-excerpt\",\"created\":\"20250705072111640\",\"modified\":\"20250705072145864\",\"tags\":\"$:/tags/Image 图标 摘抄\",\"text\":\"\\\\parameters (size:\\\"22pt\\\")\\n\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=<<size>> height=<<size>> class=\\\"bi bi-envelope-heart tc-image-button\\\" viewBox=\\\"0 0 16 16\\\">\\n  <path fill-rule=\\\"evenodd\\\" d=\\\"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l3.235 1.94a2.76 2.76 0 0 0-.233 1.027L1 5.384v5.721l3.453-2.124c.146.277.329.556.55.835l-3.97 2.443A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741l-3.968-2.442c.22-.28.403-.56.55-.836L15 11.105V5.383l-3.002 1.801a2.76 2.76 0 0 0-.233-1.026L15 4.217V4a1 1 0 0 0-1-1H2Zm6 2.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132Z\\\"/>\\n</svg>\"},\"$:/core/ui/Buttons/book-excerpt\":{\"title\":\"$:/core/ui/Buttons/book-excerpt\",\"caption\":\"{{$:/core/images/new-book-excerpt}} 打开摘抄汇总\",\"created\":\"20250705092906193\",\"description\":\"打开摘抄汇总\",\"modified\":\"20250705093153382\",\"tags\":\"按钮 $:/tags/PageControls 摘抄\",\"text\":\"\\\\whitespace trim\\n<$button tooltip=\\\"打开摘抄\\\" class=<<tv-config-toolbar-class>>>\\n<$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\n{{$:/core/images/new-book-excerpt}}\\n</$list>\\n<$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\n<span class=\\\"tc-btn-text\\\">\\n<$text text=打开摘抄/>\\n</span>\\n</$list>\\n\\n<$action-navigate $to=\\\"摘抄汇总\\\"/>\\n\\n</$button>\\n\"},\"$:/core/ui/EditorToolbar/new-book-excerpt\":{\"title\":\"$:/core/ui/EditorToolbar/new-book-excerpt\",\"caption\":\"{{$:/core/images/new-book-excerpt}} 添加一个摘抄\",\"condition\":\"[<targetTiddler>!has[type]] [<targetTiddler>type[text/vnd.tiddlywiki]]\",\"created\":\"20250705071950358\",\"description\":\"添加一个摘抄\",\"icon\":\"$:/core/images/new-book-excerpt\",\"modified\":\"20250705072500796\",\"shortcuts\":\"((new-book-excerpt))\",\"tags\":\"$:/tags/EditorToolbar 按钮 摘抄\",\"text\":\"<$action-sendmessage\\n\\t$message=\\\"tm-edit-text-operation\\\"\\n\\t$param=\\\"wrap-selection\\\"\\n\\tprefix={{{ [[<<tagged-excerpt-content \\\"\\n]] }}}\\n\\tsuffix={{{ [[\\n\\\" \\\"标签1 标签2 标签3\\\" \\\"书名\\\" \\\"作者\\\">>\\n\\n]] }}}\\n/>\\n\"},\"$:/custom/ui/ViewTemplate/body/book-excerpt\":{\"title\":\"$:/custom/ui/ViewTemplate/body/book-excerpt\",\"caption\":\"摘抄显示模版\",\"code-body\":\"yes\",\"created\":\"20250705064422242\",\"modified\":\"20250705074632071\",\"tags\":\"摘抄 级联\",\"text\":\"<div style=\\\"text-align: right;\\\"><$transclude tiddler=\\\"新建摘抄按钮\\\"/></div>\\n\\n<$list filter=\\\"[<currentTiddler>!field:same[yes]]\\\">\\n<$transclude $variable=\\\"show-filtered-excerpt-content\\\" source-tiddler=<<currentTiddler>> same=\\\"no\\\"/>\\n</$list>\\n  \\n<$list filter=\\\"[<currentTiddler>field:same[yes]]\\\">\\n<$transclude $variable=\\\"show-filtered-excerpt-content\\\" source-tiddler=<<currentTiddler>> same=\\\"yes\\\"/>\\n</$list>\"},\"$:/plugins/dyp/book-excerpt/history\":{\"title\":\"$:/plugins/dyp/book-excerpt/history\",\"created\":\"20250705083813893\",\"modified\":\"20250705083820300\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"v.0.0.3 2025-07-07\\n\\n# 当前筛选条件显示为中文；\\n\\nv.0.0.2 2025-07-06\\n\\n# 优化手机端弹出模块样式；\\n# 修复新建摘抄按钮的筛选器错误；\\n# 修复当 `same=yes` 时书名作者未隐藏的问题；\\n\"},\"$:/plugins/dyp/book-excerpt/readme\":{\"title\":\"$:/plugins/dyp/book-excerpt/readme\",\"created\":\"20250705083748838\",\"modified\":\"20250705083759483\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"; 摘抄\"},\"$:/plugins/dyp/book-excerpt/usage\":{\"title\":\"$:/plugins/dyp/book-excerpt/usage\",\"created\":\"20250705083803768\",\"modified\":\"20250705083809948\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"# 新建条目，添加字段 `excerpt=yes` 即可在当前条目使用摘抄模版；\\n# 如果是摘抄同一本书，可选择隐藏书名和作者，额外添加字段 `same=yes`；\\n\\n写法：\\n\\n```tw\\n<<tagged-excerpt-content \\\"摘抄内容\\\" \\\"标签1 标签2 标签3\\\" \\\"书名\\\" \\\"作者\\\">>\\n```\\n\\n```tw\\n<$transclude $variable=\\\"tagged-excerpt-content\\\" text=\\\"摘抄内容\\\" tags=\\\"标签1 标签2 标签3\\\" book=\\\"书名\\\" author=\\\"作者\\\"/>\\n```\\n\\n```tw\\n<$transclude $variable=\\\"tagged-excerpt-content\\\" text={{条目标题}} tags=\\\"标签1 标签2 标签3\\\" book=\\\"书名\\\" author=\\\"作者\\\"/>\\n```\\n\\n```tw\\n<<show-filtered-excerpt-content \\\"条目标题\\\" \\\"yes\\\">>\\n```\\n\\n```tw\\n<$transclude $variable=\\\"show-filtered-excerpt-content\\\" source-tiddler=\\\"条目标题\\\" same=\\\"yes\\\"/>\\n```\\n\\n添加字段 `excerpt=yes` 和 `same=no` 或 `same=yes`\\n\"},\"excerpt-input-modal\":{\"title\":\"excerpt-input-modal\",\"created\":\"20250705073501478\",\"modified\":\"20250705083025025\",\"subtitle\":\"新建摘抄\",\"tags\":\"摘抄\",\"text\":\"<div class=\\\"tc-modal-body\\\">  \\n  <table class=\\\"excerpt-modal-table\\\">  \\n    <tr>  \\n      <td class=\\\"tc-modal-title\\\">内容：</td>  \\n      <td><$edit-text tiddler=\\\"$:/temp/excerpt-content\\\" tag=\\\"textarea\\\" class=\\\"tc-edit-texteditor\\\"/></td>  \\n    </tr>  \\n    <tr>  \\n      <td class=\\\"tc-modal-title\\\">标签：</td>  \\n      <td><$edit-text tiddler=\\\"$:/temp/excerpt-tags\\\" tag=\\\"input\\\" class=\\\"tc-edit-texteditor\\\" placeholder=\\\"输入标签，用空格分隔\\\"/></td>  \\n    </tr>  \\n    <tr>  \\n      <td class=\\\"tc-modal-title\\\">书名：</td>  \\n      <td><$edit-text tiddler=\\\"$:/temp/excerpt-book\\\" tag=\\\"input\\\" class=\\\"tc-edit-texteditor\\\"/></td>  \\n    </tr>  \\n    <tr>  \\n      <td class=\\\"tc-modal-title\\\">作者：</td>  \\n      <td><$edit-text tiddler=\\\"$:/temp/excerpt-author\\\" tag=\\\"input\\\" class=\\\"tc-edit-texteditor\\\"/></td>  \\n    </tr>  \\n  </table>\\n<div class=\\\"excerpt-modal-buttons\\\"> \\n  <$button actions=<<add-excerpt-actions>>> 确认添加 </$button>   \\n  <$button> <$action-sendmessage $message=\\\"tm-close-tiddler\\\" $param=\\\"excerpt-input-modal\\\"/> 取消 </$button>\\n</div>\\n</div>\\n\"},\"待引用摘抄的内容\":{\"title\":\"待引用摘抄的内容\",\"created\":\"20250705034327871\",\"excerpt\":\"yes\",\"modified\":\"20250705082152144\",\"tags\":\"摘抄\",\"text\":\"<<tagged-excerpt-content \\\"\\n　　一匹疲惫的灰色阉马在山路斜斜地跑着，眼前这条浅绿色的山路曲折蜿蜒，像一条垂死的蛇在挣扎。粘腻温热的晨雾弥漫，远方隐约可见一片高大雄浑的苍翠山廓，夸父一般沉默峙立，用威严的目光俯瞰着这只小蚂蚁的动静。\\n\\n　　李善德面无表情地抱住马脖子，每隔数息便夹一下马镫。虽然坐骑早已累得无法跑起速度，可他还是尽义务似地定时催动。\\n\\n　　自从他离开从化之后，整个人变成了一块石头，滤去了一切情绪，只留下官吏的本能。他每到一处驿站，会第一时间按照章程进行检查，细致、严格、无情，而且绝无通融。待检查事毕，他会立刻跨上马去，前往下一处目标。\\n\\\" \\\"环境 神态 动作 动物\\\" \\\"长安的荔枝\\\" \\\"马伯庸\\\">>\\n\\n<<tagged-excerpt-content \\\"\\n　　“好的，大人。”那张纸立刻消失在他袖子里。\\n\\n　　“你先退下吧。”罗柏道。鲁温学士颔首离去，罗柏关上门，转身面对她。她看到他身上还配了把剑。“母亲，你这又是何苦呢？”\\n\\n　　凯特琳一直都觉得罗柏长得最像她。他和布兰、瑞肯、珊莎一样，生有一副徒利家的漂亮颜色——枣红头发、碧蓝眼瞳，如今她再一次在他脸上读了艾德·史塔克的神色，一种属于北方的坚毅冷峻。“我怎么了？”她困惑地应道，“你怎么能问这种话？你以为我在做什么，我在照顾你弟弟，我在照顾布兰哪。”\\n\\n　　“这哪叫照顾？自布兰受伤以来，你就没踏出这房间半步，连父亲和妹妹他们南下的时候，你也没到城门口去送行。”\\n\\\" \\\"对话 外貌 动作 神态\\\" \\\"冰与火之歌\\\" \\\"乔治·R·R·马丁\\\">>\\n\\n<<tagged-excerpt-content \\\"\\n　　冷风如刀，以大地为砧板，视众生为鱼肉。\\n　　万里飞雪，将苍穹作洪炉，溶万物为白银。\\n　　雪将住，风未定，一辆马车自北而来，滚动的车轮碾碎了地上的冰雪，却碾不碎天地间的寂寞。\\n\\\" \\\"环境 氛围\\\" \\\"多情剑客无情剑\\\" \\\"古龙\\\">>\\n\\n<<tagged-excerpt-content \\\"\\n　　在一个风景宜人的小山村梅恩费尔德，有一条弯弯曲曲的乡间小道，它穿过碧绿的原野，一直伸展到山脚下。山路两旁树影婆娑，流水潺潺，远处群山巍峨，似一幅优美的水墨画。沿着这条蜿蜒曲折的小路攀缘而上，居高临下，谷底的景致一览无余。继续登高而上，四周芳草萋萋，山花烂漫，浓郁的花香弥漫在整个旷野，沁人心脾———这就是直接通往奥尔希高山牧场的陡峭山路。\\n\\n　　在六月的一个阳光明媚的早晨，在这条狭窄的乡间小路上，一个身材高大、体格健壮的村姑，手里牵着一个小姑娘正向上走着，小女孩的脸颊热得通红，棕黑色的皮肤在太阳的照射下闪闪发光。但是很奇怪，尽管在这六月炎热的骄阳下，这个孩子还是被裹得严严实实的，似乎要抵御那刺骨的寒冷。这个小女孩似乎五岁左右，可是人们无法从其外表看出她的身材，因为她很明显地穿着两件，甚至是三件衣服，一件套一件，脖子上用一条红色的棉质大围巾一圈圈地围着。这样的打扮，再加上她的一双镶着钉子、笨重的登山靴，这个小人儿看起来就像是圆圆的一团。小家伙正冒着酷暑吃力地走在山路上，向山上攀登……\\n\\\" \\\"环境 氛围 外貌 衣饰\\\" \\\"海蒂\\\" \\\"[瑞士]约翰娜·斯比丽；邵灵侠\\\">>\"},\"摘抄\":{\"title\":\"摘抄\",\"created\":\"20250705032922263\",\"modified\":\"20250705032938180\",\"tags\":\"导出\",\"type\":\"\",\"text\":\"<<filter-pill \\\"[all[tiddlers+shadows]tag[摘抄]][[摘抄]]\\\" 摘抄>>\\n\"},\"摘抄代码存档\":{\"title\":\"摘抄代码存档\",\"created\":\"20250705054210168\",\"modified\":\"20250705065247187\",\"tags\":\"摘抄\",\"text\":\"```tw\\n<<tagged-excerpt-content \\\"摘抄内容\\\" \\\"标签1 标签2 标签3\\\" \\\"书名\\\" \\\"作者\\\">>\\n```\\n\\n```tw\\n<$transclude $variable=\\\"tagged-excerpt-content\\\" text=\\\"摘抄内容\\\" tags=\\\"标签1 标签2 标签3\\\" book=\\\"书名\\\" author=\\\"作者\\\"/>\\n```\\n\\n```tw\\n<$transclude $variable=\\\"tagged-excerpt-content\\\" text={{条目标题}} tags=\\\"标签1 标签2 标签3\\\" book=\\\"书名\\\" author=\\\"作者\\\"/>\\n```\\n\\n```tw\\n\\\\import 摘抄标签工具\\n```\\n\\n```tw\\n<<show-filtered-excerpt-content \\\"条目标题\\\" \\\"yes\\\">>\\n```\\n\\n```tw\\n<$transclude $variable=\\\"show-filtered-excerpt-content\\\" source-tiddler=\\\"条目标题\\\" same=\\\"yes\\\"/>\\n```\\n\\n添加字段 `excerpt=yes` 和 `same=no` 或 `same=yes`\\n\"},\"摘抄工具伪标签丸procedure\":{\"title\":\"摘抄工具伪标签丸procedure\",\"created\":\"20250705032808669\",\"modified\":\"20250705064126832\",\"tags\":\"摘抄 $:/tags/Macro\",\"text\":\"\\\\procedure tagged-excerpt-content(text, tags:\\\"\\\", book:\\\"\\\", author:\\\"\\\")    \\n<div class=\\\"filtered-excerpt-btn excerpt-content-item\\\" data-tags=<<tags>> data-book=<<book>> data-author=<<author>>>    \\n  <div class=\\\"tw-excerpt-text\\\"><<text>></div>  \\n  <%if [<tags>!is[blank]] %>    \\n    <div style=\\\"margin-top: 0.5em;\\\">    \\n      <$list filter=\\\"[<tags>split[ ]]\\\" variable=\\\"tag\\\">    \\n        <$button class=\\\"tc-btn-invisible\\\" tooltip=\\\"点击筛选此标签的内容\\\">    \\n          <span class=\\\"tc-tag-label\\\" style=\\\"font-size: 0.75em; margin-right: 0.3em;\\\"><<tag>></span>    \\n          <$action-setfield $tiddler=\\\"$:/temp/current-filter\\\" text=<<tag>>/>    \\n          <$action-setfield $tiddler=\\\"$:/temp/filter-type\\\" text=\\\"tag\\\"/>    \\n        </$button>    \\n      </$list>    \\n    </div>    \\n  <%endif%>    \\n  <%if [<book>!is[blank]] %>    \\n    <div class=\\\"excerpt-book-info\\\">    \\n      ——《    \\n      <$button class=\\\"tc-btn-invisible\\\" tooltip=\\\"点击筛选此书名的内容\\\">    \\n        <<book>>    \\n        <$action-setfield $tiddler=\\\"$:/temp/current-filter\\\" text=<<book>>/>    \\n        <$action-setfield $tiddler=\\\"$:/temp/filter-type\\\" text=\\\"book\\\"/>    \\n      </$button>    \\n      》<%if [<author>!is[blank]] %>by    \\n      <$button class=\\\"tc-btn-invisible\\\" tooltip=\\\"点击筛选此作者的内容\\\">    \\n        <<author>>    \\n        <$action-setfield $tiddler=\\\"$:/temp/current-filter\\\" text=<<author>>/>    \\n        <$action-setfield $tiddler=\\\"$:/temp/filter-type\\\" text=\\\"author\\\"/>    \\n      </$button>    \\n      <%endif%>    \\n    </div>    \\n  <%endif%>    \\n</div>    \\n\\\\end\\n\"},\"摘抄工具样式css\":{\"title\":\"摘抄工具样式css\",\"created\":\"20250705061230389\",\"modified\":\"20250705063653305\",\"tags\":\"摘抄 样式 $:/tags/Stylesheet\",\"text\":\".tw-excerpt-text {\\n  font-family: \\\"FZYUEKZJW-H\\\";\\n\\n/* 硬式换行 */\\n  word-break: normal;   \\n  word-wrap: break-word;   \\n  white-space: pre-wrap; /* 保留所有空白字符，包括缩进 */  \\n}\\n\\n.excerpt-content-item {\\n  margin-bottom: 0em;\\n  padding: 0.5em;\\n/*   border-left: 3px solid #ddd; */\\n  position: relative;\\n}\\n\\n.filtered-excerpt-background {\\n  background: transparent;  \\n  border: 1px solid <<colour muted-foreground>>;  \\n  border-radius: 8px;\\n  padding: 1em;\\n  margin-bottom: 1em;\\n  font-size: 0.8em;\\n}\\n\\n.excerpt-book-info {\\n  text-align: right;\\n  font-size: 0.8em;\\n  margin-top: 10px;\\n}\\n\\n.excerpt-book-info,\\n.excerpt-book-info button {\\n  color: <<colour foreground>>;\\n  filter: opacity(75%); /* 透明度 */\\n  font-style: italic;\\n}\\n\"},\"摘抄工具筛选逻辑procedure\":{\"title\":\"摘抄工具筛选逻辑procedure\",\"created\":\"20250705054507414\",\"modified\":\"20250705065925574\",\"tags\":\"摘抄 $:/tags/Macro\",\"text\":\"\\\\procedure show-filtered-excerpt-content(source-tiddler:\\\"待引用摘抄的内容\\\", same:\\\"no\\\")    \\n<$reveal type=\\\"match\\\" state=\\\"$:/temp/current-filter\\\" text=\\\"\\\">    \\n  <div class=\\\"all-content\\\">    \\n    <%if [<same>match[yes]] %>  \\n      <style>  \\n      .excerpt-content-item div[style*=\\\"position: absolute\\\"] { display: none !important; }\\n      .filtered-excerpt-btn .excerpt-book-info { display: none !important; }\\n      </style>  \\n    <%endif%>  \\n    <$transclude $tiddler=<<source-tiddler>>/>    \\n  </div>    \\n</$reveal>    \\n    \\n<$reveal type=\\\"nomatch\\\" state=\\\"$:/temp/current-filter\\\" text=\\\"\\\">    \\n  <div class=\\\"filtered-excerpt-background\\\">    \\n    当前筛选：<span class=\\\"tc-tag-label\\\">{{$:/temp/current-filter}}</span>    \\n    （<$reveal type=\\\"match\\\" state=\\\"$:/temp/filter-type\\\" text=\\\"tag\\\">标签</$reveal><$reveal type=\\\"match\\\" state=\\\"$:/temp/filter-type\\\" text=\\\"book\\\">书名</$reveal><$reveal type=\\\"match\\\" state=\\\"$:/temp/filter-type\\\" text=\\\"author\\\">作者</$reveal>）    \\n    <$button class=\\\"tc-btn-invisible\\\" style=\\\"margin-left: 0em;\\\">    \\n      清除筛选    \\n      <$action-deletetiddler $tiddler=\\\"$:/temp/current-filter\\\"/>    \\n      <$action-deletetiddler $tiddler=\\\"$:/temp/filter-type\\\"/>    \\n    </$button>    \\n  </div>    \\n      \\n  <style>    \\n  .filtered-excerpt-btn { display: none; }    \\n  .filtered-excerpt-btn[data-tags*=\\\"{{$:/temp/current-filter}}\\\"] { display: block; }    \\n  .filtered-excerpt-btn[data-book*=\\\"{{$:/temp/current-filter}}\\\"] { display: block; }    \\n  .filtered-excerpt-btn[data-author*=\\\"{{$:/temp/current-filter}}\\\"] { display: block; }  \\n  <%if [<same>match[yes]] %>  \\n  .filtered-excerpt-btn div[style*=\\\"position: absolute\\\"] { display: none !important; }  \\n  <%endif%>  \\n  </style>    \\n      \\n  <$transclude $tiddler=<<source-tiddler>>/>    \\n</$reveal>    \\n\\\\end\\n\"},\"摘抄汇总\":{\"title\":\"摘抄汇总\",\"created\":\"20250705093135599\",\"modified\":\"20250705093402275\",\"tags\":\"摘抄\",\"type\":\"\",\"text\":\"<<filter-pill \\\"[all[tiddlers+shadows]excerpt[yes]]\\\" 摘抄汇总>>\\n\\n<div style=\\\"text-align: right;\\\"><$transclude tiddler=\\\"新建摘抄条目按钮\\\"/></div>\\n\\n<$list filter=\\\"[all[tiddlers+shadows]excerpt[yes]]\\\">  \\n<$link to={{!!title}}>{{!!title}}</$link><br/>\\n</$list>\\n\"},\"新建摘抄动作macro\":{\"title\":\"新建摘抄动作macro\",\"created\":\"20250705081140825\",\"modified\":\"20250705081226769\",\"tags\":\"摘抄 $:/tags/Macro\",\"text\":\" \\\\define add-excerpt-actions() \\n<$set name=\\\"excerpt-content\\\" tiddler=\\\"$:/temp/excerpt-content\\\" field=\\\"text\\\">\\n<$set name=\\\"excerpt-tags\\\" tiddler=\\\"$:/temp/excerpt-tags\\\" field=\\\"text\\\">\\n<$set name=\\\"excerpt-book\\\" tiddler=\\\"$:/temp/excerpt-book\\\" field=\\\"text\\\">\\n<$set name=\\\"excerpt-author\\\" tiddler=\\\"$:/temp/excerpt-author\\\" field=\\\"text\\\">\\n<$set name=\\\"current-text\\\" tiddler=<<currentTiddler>> field=\\\"text\\\">\\n<$set name=\\\"macro-call\\\" value={{{ [[$:/temp/excerpt-content]get[text]] [[$:/temp/excerpt-tags]get[text]] [[$:/temp/excerpt-book]get[text]] [[$:/temp/excerpt-author]get[text]] +[join[\\\" \\\"]] +[addprefix[<<tagged-excerpt-content \\\"]] +[addsuffix[\\\">>]] }}}>\\n\\n<$action-setfield $tiddler=<<currentTiddler>> text={{{ [<macro-call>][[\\n\\n]] [<current-text>] +[join[]] }}} />\\n\\n<$action-deletetiddler $filter=\\\"[$:/temp/excerpt-content] [$:/temp/excerpt-tags] [$:/temp/excerpt-book] [$:/temp/excerpt-author]\\\"/>\\n\\n<$action-sendmessage $message=\\\"tm-close-tiddler\\\" $param=\\\"excerpt-input-modal\\\"/>\\n\\n</$set>\\n</$set>\\n</$set>\\n</$set>\\n</$set>\\n</$set> \\n\\\\end\\n\"},\"新建摘抄弹出模块样式css\":{\"title\":\"新建摘抄弹出模块样式css\",\"created\":\"20250705082531626\",\"modified\":\"20250705083135339\",\"tags\":\"摘抄 $:/tags/Stylesheet\",\"text\":\".excerpt-modal-table {\\n  width: 100%;\\n  border-collapse: collapse;\\n/*   border: 1px solid #ddd; */\\n}\\n\\n.excerpt-modal-table td:first-child {\\n  width: 20%;\\n  text-align: right;\\n  padding-right: 10px;\\n  font-weight: bold;\\n  padding: 10px;\\n  border-bottom: 1px solid #ddd;\\n}\\n\\n.excerpt-modal-table input,\\n.excerpt-modal-table textarea {\\n  width: 100%;\\n  box-sizing: border-box;\\n  padding: 8px 10px;\\n  border: 1px solid #ccc;\\n  border-radius: 4px;\\n  margin-top: 5px;\\n  margin-bottom: 10px;\\n  transition: border-color 0.3s ease;\\n}\\n\\n.excerpt-modal-table input:focus,\\n.excerpt-modal-table textarea:focus {\\n  border-color: #007bff;\\n  outline: none;\\n}\\n\\n.excerpt-modal-table textarea {\\n  resize: vertical;\\n  min-height: 60px;\\n}\\n\\n.excerpt-modal-buttons {\\n  text-align: right;\\n  margin-top: 20px;\\n}\\n\\n.excerpt-modal-buttons button {\\n  padding: 8px 16px;\\n  font-size: 14px;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  transition: background-color 0.3s ease;\\n  margin-left: 15px; /* 添加这行 */  \\n}\\n\\n.excerpt-modal-buttons button:hover {\\n  opacity: 0.9;\\n}\\n\\n.excerpt-modal-buttons .confirm-button {\\n  background-color: #28a745;\\n  color: white;\\n}\\n\\n.excerpt-modal-buttons .confirm-button:hover {\\n  background-color: #218838;\\n}\\n\\n.excerpt-modal-buttons .cancel-button {\\n  background-color: #dc3545;\\n  color: white;\\n}\\n\\n.excerpt-modal-buttons .cancel-button:hover {\\n  background-color: #c82333;\\n}\\n\\n@media (max-width: 55em) {  \\n    .tc-modal-body {  \\n        max-height: 90vh; /* 增加最大高度 */  \\n        min-height: 400px; /* 设置最小高度 */  \\n    }  \\n      \\n    .tc-modal {  \\n        top: 0.5em; /* 减少顶部边距 */  \\n        left: 0.5em; /* 减少左边距 */  \\n        right: 0.5em; /* 减少右边距 */  \\n    }  \\n\\n.tc-modal-title {\\n  font-size: 0.9em;\\n  width: 100px !important;\\n}\\n}\\n\"},\"新建摘抄按钮\":{\"title\":\"新建摘抄按钮\",\"created\":\"20250705072922579\",\"modified\":\"20250705083548627\",\"tags\":\"摘抄\",\"text\":\"<$button class=\\\"tc-btn-invisible\\\" tooltip=新建摘抄>\\n<$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\n{{$:/core/images/new-button}}\\n</$list>\\n<$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\n<span class=\\\"tc-btn-text\\\">\\n<$text text=新建摘抄/>\\n</span>\\n</$list>\\n\\n<!-- 先清除缓存 -->\\n<$action-setfield $tiddler=\\\"$:/temp/excerpt-content\\\" text=\\\"\\\"/>  \\n<$action-setfield $tiddler=\\\"$:/temp/excerpt-tags\\\" text=\\\"\\\"/>  \\n<$action-setfield $tiddler=\\\"$:/temp/excerpt-book\\\" text=\\\"\\\"/>  \\n<$action-setfield $tiddler=\\\"$:/temp/excerpt-author\\\" text=\\\"\\\"/>\\n\\n<!-- 然后打开新建摘抄模块 -->\\n<$action-sendmessage   \\n    $message=\\\"tm-modal\\\"   \\n    $param=\\\"excerpt-input-modal\\\"  \\n    currentTiddler=<<currentTiddler>>  \\n/>\\n\\n</$button>\"},\"新建摘抄条目按钮\":{\"title\":\"新建摘抄条目按钮\",\"created\":\"20250705092232628\",\"modified\":\"20250705092402936\",\"tags\":\"摘抄\",\"text\":\"<$button class=\\\"tc-btn-invisible\\\" tooltip=新建摘抄条目>\\n<$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\n{{$:/core/images/new-button}}\\n</$list>\\n<$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\n<span class=\\\"tc-btn-text\\\">\\n<$text text=新建摘抄条目/>\\n</span>\\n</$list>\\n\\n<$action-sendmessage $message=\\\"tm-new-tiddler\\\" title={{{ [[摘抄-]] [<now YYYY-0MM-0DD-hh0mm0ss0XXX>] +[join[]] }}} tags=\\\"\\\" text=\\\"\\\" excerpt=\\\"yes\\\" same=\\\"no\\\"\\n/>\\n</$button>\"}}}"}