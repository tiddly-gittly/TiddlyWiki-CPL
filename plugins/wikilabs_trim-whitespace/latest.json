{"title":"$:/plugins/wikilabs/trim-whitespace","name":"Trim Whitespace","description":"New Editor Button to Trim Whitespace from Selections","author":"Mario Pietsch","core-version":">=5.1.15","version":"0.1.0","list":"readme history license","plugin-type":"plugin","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/wikilabs/trim-whitespace/editor/operations/text/select-all.js\":{\"title\":\"$:/plugins/wikilabs/trim-whitespace/editor/operations/text/select-all.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/trim-whitespace/editor/operations/text/select-all.js\\ntype: application/javascript\\nmodule-type: texteditoroperation\\n\\nTrim whitespace from selection\\nmodes: leading, trailing, full, white-line\\n\\n\\\\*/\\n(function(){\\n\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\\"use strict\\\";\\n\\nexports[\\\"select-all\\\"] = function(event,operation) {\\n\\toperation.replacement = \\\"\\\";\\n\\toperation.newSelStart = 0;\\n\\toperation.newSelEnd = operation.text.length;\\n};\\n\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"texteditoroperation\"},\"$:/plugins/wikilabs/trim-whitespace/editor/operations/text/trim-whitespace.js\":{\"title\":\"$:/plugins/wikilabs/trim-whitespace/editor/operations/text/trim-whitespace.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/trim-whitespace/editor/operations/text/trim-whitespace.js\\ntype: application/javascript\\nmodule-type: texteditoroperation\\n\\nTrim whitespace from selection\\nmodes: leading, trailing, full, white-line\\n\\n\\\\*/\\n(function(){\\n\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\\"use strict\\\";\\n\\nexports[\\\"trim-whitespace\\\"] = function(event,operation) {\\n\\tvar mode = event.paramObject.mode || \\\"prefix\\\";\\n\\n\\t// Cut just past the preceding line break, or the start of the text\\n\\toperation.cutStart = $tw.utils.findPrecedingLineBreak(operation.text,operation.selStart);\\n\\n\\t// Cut to just past the following line break, or to the end of the text\\n\\toperation.cutEnd = $tw.utils.findFollowingLineBreak(operation.text,operation.selEnd);\\n\\n\\t// Process each line\\n\\tvar lines = operation.text.substring(operation.cutStart,operation.cutEnd).split(/\\\\r?\\\\n/mg);\\n\\t$tw.utils.each(lines,function(line,index) {\\n\\t\\tswitch (mode) {\\n\\t\\t\\tcase \\\"leading\\\":\\n\\t\\t\\t\\tline = line.trimStart();\\n\\t\\t\\tbreak;\\n\\t\\t\\tcase \\\"trailing\\\":\\n\\t\\t\\t\\tline = line.trimEnd();\\n\\t\\t\\tbreak;\\n\\t\\t\\tcase \\\"full\\\":\\n\\t\\t\\t\\tline = line.trim();\\n\\t\\t\\tbreak;\\n\\t\\t\\tcase \\\"white-line\\\":\\n\\t\\t\\t\\tif (!(/\\\\S/.test(line))) {\\n\\t\\t\\t\\t\\tline = line.trim();\\n\\t\\t\\t\\t}\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\t// Save the modified line\\n\\t\\tlines[index] = line;\\n\\t});\\n\\t// Stitch the replacement text together and set the selection\\n\\toperation.replacement = lines.join(\\\"\\\\n\\\");\\n\\tif(lines.length === 1) {\\n\\t\\toperation.newSelStart = operation.cutStart + operation.replacement.length;\\n\\t\\toperation.newSelEnd = operation.newSelStart;\\n\\t} else {\\n\\t\\toperation.newSelStart = operation.cutStart;\\n\\t\\toperation.newSelEnd = operation.newSelStart + operation.replacement.length;\\n\\t}\\n};\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"texteditoroperation\"},\"$:/plugins/wikilabs/trim-whitespace/EditorToolbar/trim-whitespace\":{\"title\":\"$:/plugins/wikilabs/trim-whitespace/EditorToolbar/trim-whitespace\",\"caption\":\"trim-whitespace\",\"condition\":\"[<targetTiddler>!has[type]] [<targetTiddler>type[text/vnd.tiddlywiki]]\",\"description\":\"Trim whitesace from the selected line(s)\",\"icon\":\"$:/plugins/wikilabs/trim-whitespace/icons/trim-whitespace\",\"shortcuts\":\"((trim-whitespace))\",\"tags\":\"$:/tags/EditorToolbar\",\"text\":\"<!-- modes: leading, trailing, full, white-line -->\\n<$action-sendmessage\\n\\t$message=\\\"tm-edit-text-operation\\\"\\n\\t$param=\\\"trim-whitespace\\\"\\n\\tmode={{{ [{$:/config/trim-whitespace/mode}trim[]!is[blank]] ~[[white-line]] }}}\\n/>\\n\"},\"$:/plugins/wikilabs/trim-whitespace/icons/trim-whitespace\":{\"title\":\"$:/plugins/wikilabs/trim-whitespace/icons/trim-whitespace\",\"text\":\"<svg width=\\\"22pt\\\" height=\\\"22pt\\\" class=\\\"tc-image-list-bullet tc-image-button\\\" viewBox=\\\"0 0 128 128\\\">\\n <path d=\\\"m86.2 3.5h16l-37.9 121h-15.9z\\\" style=\\\"stroke-width:4.36\\\"/>\\n <path d=\\\"m90.5 62.1h15.4v10.8h-15.4z\\\" style=\\\"stroke-width:4.36\\\"/>\\n <path d=\\\"m1.71 62.1h52.5v10.8h-52.5z\\\" style=\\\"stroke-width:4.36\\\"/>\\n <path d=\\\"m112 62.1h15.4v10.8h-15.4z\\\" style=\\\"stroke-width:4.36\\\"/>\\n</svg>\\n\"},\"$:/plugins/wikilabs/trim-whitespace/history\":{\"title\":\"$:/plugins/wikilabs/trim-whitespace/history\",\"text\":\"V 0.1.0 - 2023-05-04\\n\\n* initial release\\n\"},\"$:/plugins/wikilabs/trim-whitespace/icon\":{\"title\":\"$:/plugins/wikilabs/trim-whitespace/icon\",\"text\":\"<svg width=\\\"22pt\\\" height=\\\"22pt\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 128 128\\\">\\n <path d=\\\"m86.2 3.5h16l-37.9 121h-15.9z\\\" style=\\\"stroke-width:4.36\\\"/>\\n <path d=\\\"m90.5 62.1h15.4v10.8h-15.4z\\\" style=\\\"stroke-width:4.36\\\"/>\\n <path d=\\\"m1.71 62.1h52.5v10.8h-52.5z\\\" style=\\\"stroke-width:4.36\\\"/>\\n <path d=\\\"m112 62.1h15.4v10.8h-15.4z\\\" style=\\\"stroke-width:4.36\\\"/>\\n</svg>\"},\"$:/plugins/wikilabs/trim-whitespace/license\":{\"title\":\"$:/plugins/wikilabs/trim-whitespace/license\",\"license-text\":\"https://opensource.org/license/BSD-3-clause/\",\"text\":\"[[Trim Whitespace Plugin|https://wikilabs.github.io/#trim-whitespace]] (c) Mario Pietsch - 2023-2024\\n\\n[[The 3-Clause BSD License|https://opensource.org/license/BSD-3-clause/]]\\n\"},\"$:/plugins/wikilabs/trim-whitespace/readme\":{\"title\":\"$:/plugins/wikilabs/trim-whitespace/readme\",\"text\":\"This plugin \\\"Trim Whitespace\\\" adds a new button to the edit toolbar\\n\\n!! Trim Whitespace Settings\\n\\n{{$:/plugins/wikilabs/trim-whitespace/settings}}\"},\"$:/plugins/wikilabs/trim-whitespace/settings\":{\"title\":\"$:/plugins/wikilabs/trim-whitespace/settings\",\"text\":\"$:/config/trim-whitespace/mode defaults to: `white-line` if the mode tiddler is empty or does not exist.\\n\\nSelect the mode: <$select tiddler=\\\"$:/config/trim-whitespace/mode\\\" tooltip=\\\"Choose the whitespace trim mode\\\" default=\\\"white-line\\\">\\n<option>leading</option>\\n<option>trailing</option>\\n<option>full</option>\\n<option>white-line</option>\\n</$select>\\n\\nThe following code can be copy pasted to a New Tiddler, to test the new toolbar button.\\n\\n```\\n  leading spaces\\ntrailing spaces  \\n  leading and trailing spaces  \\n  \\n  \\n\\nAbove are some lines with whitespace.<br>\\nUse CTRL-A to see them.\\n\\nThen click the new \\\"whitespace trim\\\" button in the editor toolbar: <kbd>{{$:/plugins/wikilabs/trim-whitespace/icons/trim-whitespace}}</kbd>\\n\\n{{$:/plugins/wikilabs/trim-whitespace/settings}}\\n```\\n\"}}}"}