{"title":"$:/plugins/wikilabs/uni-link","description":"Enhances the prettylink-parser","name":"Uni-Link","author":"Mario Pietsch","core-version":">=5.3.0","plugin-type":"plugin","version":"3.0.1","list":"readme history license","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/wikilabs/uni-link/aka-footer/template\":{\"title\":\"$:/plugins/wikilabs/uni-link/aka-footer/template\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"''Note'': This tiddler has the following aliases || <<wlf.showAliases delim:\\\" || \\\">>\"},\"$:/plugins/wikilabs/uni-link/aka-footer\":{\"title\":\"$:/plugins/wikilabs/uni-link/aka-footer\",\"tags\":\"$:/tags/ViewTemplate\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$list filter=\\\"[all[current]has[aliases]]\\\">\\n<br/>\\n<hr>\\n\\n{{||$:/plugins/wikilabs/uni-link/aka-footer/template}}\\n</$list>\"},\"$:/plugins/wikilabs/uni-link/aka-macros\":{\"title\":\"$:/plugins/wikilabs/uni-link/aka-macros\",\"tags\":\"$:/tags/Macro\",\"code-body\":\"yes\",\"text\":\"\\\\whitespace trim\\n\\n\\\\procedure tooltip() Tiddler -> <<currentTiddler>>\\n\\n\\\\procedure aka(target, field:\\\"X\\\")\\n<% if [<target>is[alias]] %>\\n\\t<$list filter=\\\"[<target>aliassource[]]\\\" join=\\\",&nbsp;\\\">\\n\\t\\t<$link tooltip=<<tooltip>> >\\n\\t\\t\\t<span class=\\\"uni-alias\\\">\\n\\t\\t\\t\\t<$set name=\\\"tv-wikilinks\\\" value=\\\"no\\\">\\n\\t\\t\\t\\t\\t<$view field=<<field>> mode=text><<target>></$view>\\n\\t\\t\\t\\t</$set>\\n\\t\\t\\t</span>\\n\\t\\t</$link>\\n\\t</$list>\\n<% else %>\\n\\t<$link tooltip=\\\"Alias not defined!\\\" to=\\\"?\\\"><span class=\\\"uni-alias-missing\\\"><<target>></span></$link>\\n<% endif %>\\n\\\\end\\n\\n<!-- TODO future improvement for long lists handled by eventcatcher -->\\n<!-- It does work as is, but it _always_ modifies the browser URI -->\\n\\\\procedure aka-catch(target, field:\\\"X\\\")\\n<% if [<target>is[alias]] %>\\n\\t<$list filter=\\\"[<target>aliassource[]]\\\" join=\\\",&nbsp;\\\">\\n\\t\\t<a href=`#$(currentTiddler)$` title=`Tiddler -> $(currentTiddler)$` class=\\\"uni-alias\\\">\\n\\t\\t\\t<$set name=\\\"tv-wikilinks\\\" value=\\\"no\\\">\\n\\t\\t\\t\\t<$view field=<<field>> mode=text><<target>></$view>\\n\\t\\t\\t</$set>\\n\\t\\t</a>\\n\\t</$list>\\n<% else %>\\n\\t<a title=\\\"Alias not defined!\\\" href=\\\"#?\\\" class=\\\"uni-alias-missing\\\"><<target>></a>\\n<% endif %>\\n\\\\end\\n\\n\\\\procedure aka-no-links(target)\\n<% if [<target>is[alias]] %>\\n\\t<$list filter=\\\"[<target>aliassource[]]\\\" join=\\\",&nbsp;\\\">\\n\\t\\t<span><$text text=<<currentTiddler>>/></span>\\n\\t</$list>\\n<% else %>\\n\\t<$link tooltip=\\\"Alias not defined!\\\" to=\\\"?\\\"><<target>></$link>\\n<% endif %>\\n\\\\end\\n\\n\\\\procedure showAliases(delim:\\\", \\\") <$text text={{{ [list[!!aliases]] +[join<delim>] }}}/>\\n\\n\\\\function wlf.showAliases(delim:\\\", \\\") [list[!!aliases]] +[join<delim>]\\n\\n\\\\procedure listAliases()\\n<$list filter=\\\"[has[aliases]]\\\">\\n\\t<div>\\n\\t\\t<$link to=<<currentTiddler>> ><<currentTiddler>></$link>&nbsp;-&nbsp;<<wlf.showAliases>>\\n\\t</div>\\n</$list>\\n\\\\end\"},\"$:/plugins/wikilabs/uni-link/alias-list\":{\"title\":\"$:/plugins/wikilabs/uni-link/alias-list\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<<listAliases>>\"},\"$:/plugins/wikilabs/uni-link/backlinks-template\":{\"title\":\"$:/plugins/wikilabs/uni-link/backlinks-template\",\"text\":\"!!! Uni-links\\n\\nUse the following field as link text, if available. It defaults to tiddler ''title''!\\n\\n<<<\\n<$tiddler tiddler=\\\"$:/config/wikilabs/uni-link/field\\\">\\n<$radio value=\\\"caption\\\"> caption</$radio><br>\\n<$radio value=\\\"subtitle\\\"> subtitle</$radio><br>\\n<$radio value=\\\"title\\\"> title</$radio><br>\\n</$tiddler>\\n<<<\\n\\nThis setting can be found at the $:/ControPanel uni-links tab! The configuration tiddler is: [[$:/config/wikilabs/uni-link/field]]\\n\\n| Link | Result |h\\n|`[[default prettylink|tiddler-with-caption]]` |[[default prettylink|tiddler-with-caption]] |\\n|`[[tiddler-with-caption]]` |[[tiddler-with-caption]] |\\n|`[[tiddler-with-subtitle]]` |[[tiddler-with-subtitle]] |\\n|`[[tiddler-with-subtitle-and-caption]]` |[[tiddler-with-subtitle-and-caption]] |\\n|`[[tiddler-with-subtitle-and-caption|]]` |[[tiddler-with-subtitle-and-caption|]] ... but don't use them!|\\n|`[[tiddler doesn't exist]]` |[[tiddler doesn't exist]] |\\n\\n!!! Alias Links\\n\\n| Link | Result |h\\n|`[[alias|?]]` |[[alias|?]] |\\n|`[[AliaS|?]]` |[[AliaS|?]] |\\n|`[[alias|?t]]` |[[alias|?t]] |\\n|`[[alias|?c]]` |[[alias|?c]] |\\n|`[[alias|?s]]` |[[alias|?s]] |\\n|`[[alias|?my-field]]` |[[alias|?my-field]] |\\n|`[[doesn't exist|?]]` |[[doesn't exist|?]] |\\n\"},\"$:/config/ShortcutInfo/aliasify\":{\"title\":\"$:/config/ShortcutInfo/aliasify\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"{{$:/language/Buttons/Aliasify/Hint}}\"},\"$:/config/ShortcutInfo/alias-link\":{\"title\":\"$:/config/ShortcutInfo/alias-link\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"{{$:/language/Buttons/Make/Alias/Hint}}\"},\"$:/config/shortcuts/alias-link\":{\"title\":\"$:/config/shortcuts/alias-link\",\"created\":\"20190210193620358\",\"modified\":\"20190210193621514\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"ctrl-? ctrl-Space\"},\"$:/config/shortcuts/aliasify\":{\"title\":\"$:/config/shortcuts/aliasify\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"ctrl-K\"},\"$:/config/wikilabs/uni-link/field\":{\"title\":\"$:/config/wikilabs/uni-link/field\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"title\"},\"$:/language/Buttons/Aliasify/Caption\":{\"title\":\"$:/language/Buttons/Aliasify/Caption\",\"text\":\"alias-link\"},\"$:/language/Buttons/Aliasify/Hint\":{\"title\":\"$:/language/Buttons/Aliasify/Hint\",\"text\":\"Wrap selection in square brackets and add alias postfix\"},\"$:/language/Buttons/Make/Alias/Caption\":{\"title\":\"$:/language/Buttons/Make/Alias/Caption\",\"text\":\"make alias\"},\"$:/language/Buttons/Make/Alias/Hint\":{\"title\":\"$:/language/Buttons/Make/Alias/Hint\",\"text\":\"Create a wikitext alias-link\"},\"$:/plugins/wikilabs/uni-link/history\":{\"title\":\"$:/plugins/wikilabs/uni-link/history\",\"text\":\"V 3.0.1 - 2024-04-18\\n\\n* Settings are now in $:/ControlPanel -> ''Settings'' -> ''WikiLabs'' tab\\n\\nV 3.0.0 - 2024-04-08\\n\\n* ''This version needs TW v5.3.0 or higher''\\n* Add new trie based indexers to uni-link plugin\\n* Alias double definition output is more readable now\\n* Aliases and alias-backlinks search in shadows now too\\n\\n* Add filter operator: `[[aliasname]aliassource[]]`\\n** Input is the alias name\\n** Output is the tiddler title, that defines the alias\\n\\nV 2.4.1 - 2023-11-10\\n\\n* fix unilink stylesheet name\\n\\nV 2.4.0 - 2023-04-08\\n\\n* improve alias backlink handling\\n\\nV 2.3.0 - 2022-11-24\\n\\n* Fix problem with alias that contain round braces `()` eg: `[[aqua (water)]]`\\n* Use `<<__name__>>` instead of `$name$`\\n* Add `\\\\witespace trim` to improve readability\\n\\nV 2.2.0 - 2022-03-27\\n\\n* update to TW v5.2.2\\n* ''Important'': Changed license to Attribution-NonCommercial-ShareAlike -- [[CC-BY-NC-SA|$:/plugins/wikilabs/uni-link/license]]\\n\\nV 2.1.0 - 2021.03.16\\n\\n* add `[[tiddler title case insensitve|??]]` ... will show the text, but search for a case insensitve title.\\n* fix uni-link-macro default title styling\\n* renamed and moved some tiddlers\\n\\nV 2.0.1 - 2020.12.25\\n\\n* update license\\n\\nV 2.0.0 - 2020.06.11\\n\\n* Compatible with ~TiddlyWiki >= V5.1.22\\n* Fix a \\\"backlinking\\\" problem introduced with TW V5.1.22\\n** Adjusted uni-link \\\"backlinker\\\" to use new indexer `.extractLinks()` function\\n* More info can be found in the [[readme|$:/plugins/wikilabs/uni-link/readme]]\\n\\n--------------\\n\\nCompatible with ~TiddlyWiki <= V5.1.21\\n\\nV 1.2.1 - 2020.05.22\\n\\n* Fix a compatibility problem with relink plugin, reported by flibbles.\\n\\nV 1.2.0 - 2020.03.26\\n\\n* Make uni-link plugin compatible with relink-plugin from flibbles\\n** see: https://github.com/flibbles/tw5-relink\\n\\nV 1.1.2 - 2020.03.16\\n\\n* Fix issue #44 problem with backlink cases sensitivity\\n\\nV 1.1.1 - 2020.01.19\\n\\n* Update license link/text\\n\\nV 1.1.0 - 2019.08.13\\n\\n* Fixed problem introduced with TW V 5.1.20 link-widget core changes\\n\\nV 1.0.0 - 2019.02.09\\n\\n* Add `[[alias|?t]]`, `[[alias|?c]]` and `[[alias|?s]]`, that show the tiddler ''title'', ''caption'' and ''subtitle'' field as the link text\\n* Add `[[alias|?my-field]]` shows the content of the field named: `my-filed` as the link text\\n* Add a new editor toolbar button, which opens an alias search menue. \\n** Default keyboard shortcut is to Ctrl-Space\\n\\n``Incompatible changes``\\n\\n* There is a new $:/ControlPanel setting, that defines the default behaviour of the uni-link macro ''globally''. \\n* uni-link now only shows the tiddler title, ''or'' the caption ''or'' the subtitle field. \\n* If you need different behaviour, you'll need to use the alias mechanism!\\n\\nV 0.3.4 - 2018.09.09\\n\\n* Add \\\"aliasify\\\" button to tiddler editor toolbar\\n* Add ctrl-k to activate \\\"aliasify\\\"\\n\\nV 0.3.3 - 2018.08.06\\n\\n* fix [[issue 19|https://github.com/wikilabs/plugins/issues/19]] Alias References behaviour\\n\\nV 0.3.2 - 2018.02.02\\n\\n* new Undefined Aliases Sidebar tab under More: Aliases\\n* `[[?]aliasbacklinks[]sort[title]]` shows a list of tiddlers that contain undefined alias links\\n\\nV 0.3.1 - 2018.01.31\\n\\n* fixed: [[CamelCase]] or [[$:/system]] tiddler \\\"double linking\\\"\\n* [[NaturaL sElEcTiOn|?]] .. is a valid alias now. Same problem as above!\\n\\nV 0.3.0 - 2018.01.27\\n\\n* add: styling possibility for missing aliases\\n* improve: history and copyright\\n\\nV 0.2.1 - 2018.01.27\\n\\n* fix: uni-link creates an unused a-element\\n\\nV 0.2.0 - 2017.12.15\\n\\n* added: [[alias|?]] link syntax\\n** using aka-makros for tiddler alias handling\\n\\n* added: Alias backlinks\\n** open the tiddler (i)nfo area: References\\n\\n* added filter operators:\\n** is[alias] ... extends the core is operator see: https://tiddlywiki.com/#is Operator\\n** all[aliases] ... extends the core all operator see: https://tiddlywiki.com/#all Operator\\n\\n* added: Right-Sidebar: More tab: \\\"Aliases\\\"\\n** Sorted by Alias\\n** Sorted by Tiddler Title\\n\\n* added: uni-link $:/ControlPanel setting\\n* added: different colors for title, caption, subtitle and alias links\\n\\nV0.1.0 - 2017.07.25\\n\\n* fix \\\"backlink\\\" and \\\"missing\\\" issue\\n\\nV0.0.1 - 2017.07.23\\n\\n* initial release\\n\\nalso see: https://wikilabs.github.io/editions/uni-link/#History\\n\"},\"$:/plugins/wikilabs/uni-link/license\":{\"title\":\"$:/plugins/wikilabs/uni-link/license\",\"license-text\":\"https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode\",\"text\":\"[[Uni-Link Plugin|https://wikilabs.github.io/#uni-link]] (C) Mario Pietsch - 2017-2024\\n\\n[[Creative Commons Attribution-NonCommercial-ShareAlike|https://creativecommons.org/licenses/by-nc-sa/4.0/]]\\n\"},\"$:/plugins/wikilabs/uni-link/readme\":{\"title\":\"$:/plugins/wikilabs/uni-link/readme\",\"subtitle\":\"\\\"uni-link\\\" readme\",\"caption\":\"uni-link\",\"tags\":\"$:/tags/ControlPanel/WikiLabs\",\"text\":\"\\\\define createExampleTiddlers()\\n<$button>\\n<$action-sendmessage $message=\\\"tm-new-tiddler\\\"  title=\\\"tiddler-with-caption\\\"  caption=\\\"Short Caption\\\"/>\\n<$action-sendmessage $message=\\\"tm-new-tiddler\\\"  title=\\\"tiddler-with-subtitle\\\"  subtitle=\\\"Tiddler With Subtitle Only Defined\\\"/>\\n<$action-sendmessage $message=\\\"tm-new-tiddler\\\"  title=\\\"tiddler-with-subtitle-and-caption\\\"  subtitle=\\\"Tiddler With Subtitle And Caption - using subtitle\\\" caption=\\\"capt.ion\\\"/>\\n<$action-sendmessage $message=\\\"tm-new-tiddler\\\"  title=\\\"tiddler-with-alias\\\"  aliases=\\\"alias\\\" caption=\\\"alias-caption\\\" subtitle=\\\"alias-subtitle\\\" my-field=\\\"alias my-field\\\"/>\\n<$action-sendmessage $message=\\\"tm-new-tiddler\\\"  title=\\\"This is a Test\\\" text=\\\"This tiddler is used as an example for [[uni-link-search]]\\\"/>\\n<$action-sendmessage $message=\\\"tm-new-tiddler\\\"  title=\\\"test-links\\\" text={{$:/plugins/wikilabs/uni-link/backlinks-template!!text}}/>\\nCreate \\\"uni-link\\\" example tiddlers!\\n</$button>\\n\\\\end\\n\\\\define deleteExampleTiddlers()\\n<$button>\\n<$action-deletetiddler $tiddler=\\\"tiddler-with-caption\\\"/>\\n<$action-deletetiddler $tiddler=\\\"tiddler-with-subtitle\\\"/>\\n<$action-deletetiddler $tiddler=\\\"tiddler-with-subtitle-and-caption\\\"/>\\n<$action-deletetiddler $tiddler=\\\"tiddler-with-alias\\\"/>\\n<$action-deletetiddler $tiddler=\\\"test-links\\\"/>\\n<$action-deletetiddler $tiddler=\\\"This is a Test\\\"/>\\nDelete example tiddlers!\\n</$button>\\n\\\\end\\n\\n! Important\\n\\nThis plugin modifies a core module and / or templates\\n\\n<ul><$list filter=\\\"[[$:/plugins/wikilabs/uni-link]plugintiddlers[]prefix[$:/core/]] -[[$:/plugins/wikilabs/uni-link]plugintiddlers[]suffix[/aliasify]]\\\"><li><$link to=<<currentTiddler>>><<currentTiddler>><br></$link></li></$list></ul>\\n\\n''This uni-link version is compatible with ~TiddlyWiki >= V5.1.22''\\n\\nIf you need to use it with TW <= V5.1.21 you'll need to use an older version, which is available at: https://wikilabs.github.io/#GettingStarted\\n\\n! Video\\n\\n* See: https://wikilabs.github.io/editions/uni-link/#GettingStarted\\n\\n! Uni-link\\n<<<\\n* A new wikitext parsing rule, that calls the global [[\\\"uni-link\\\" macro|$:/plugins/wikilabs/uni-link/uni-link-macro]], instead of referencing the tiddler name. \\n\\n* It substitues the following tiddler fields: ''subtitle'', ''caption'' and ''title''. The $:/ControlPanel contains a new tab, that lets you define the behaviour of the uni-link macro. Default is ''title''. So there is no difference between the default setting of the plugin and the default behaviour in unmodified ~TiddlyWiki.\\n<<<\\n\\n! Uni-link Search\\n<<<\\n`[[case insensitive title|??]]` will do a ''literal,  case-insensitive'' title search. It  will return ''the first'' tiddler it finds. \\n\\n''Examples'':\\n\\n|`[[This is a Test|??]]`|[[this is a test|??]]|\\n|`[[doesn't exist|??]]`|[[doesn't exist|??]]|\\n\\n''Warning''\\n\\n* uni-link V2.1.0 does ''not'' contain a \\\"relink plugin\\\" addOn!\\n* So if you change the tiddler name, those links won't be changed!\\n<<<\\n\\n! Alias\\n<<<\\n* Alias Link Syntax\\n** `[[anything|?]]` ... link to the tiddler that contains the alias: `anything`\\n** `[[anything|?t]]` ... link to alias anything, but display the tiddler ''title''\\n** `[[anything|?c]]` ... link to alias anything, but display the tiddler ''caption''\\n** `[[anything|?s]]` ... link to alias anything, but display the tiddler ''subtitle''\\n** `[[anything|?my-field]]` ... link to alias anything, but display the tiddler-field named ''my-field''\\n** If a field doesn't exist, it shows the \\\"alias-text\\\" as used with `[[anything|?]]`\\n** using [[aka-makros|$:/plugins/wikilabs/uni-link/aka-macros]] for tiddler alias handling\\n\\n* Alias Backlinks\\n** open the tiddler (i)nfo area: References\\n\\n* Filter Operators:\\n** `is[alias]` ... extends the core `is` operator see: [[https://tiddlywiki.com/#is Operator]]\\n** `all[aliases]` ... extends the core `all` operator see: [ext[https://tiddlywiki.com/#all Operator]]\\n** `[aliasbacklinks[]]` ... shows a list of all tiddlers that contain alias links\\n** `[aliasbacklinks:keys[]]` ... shows a list of all used alias links used to back-link to a tiddler\\n** `[aliasbacklinks:augmented[]]` ... shows a list of all used alias backlinks and the \\\"targeted\\\" tiddler using `||` as a separator\\n** `[[?]aliasbacklinks[]sort[title]]` ... shows a list of tiddlers that contain undefined alias links\\n\\n* Right-Sidebar: More tab: [[Aliases|$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases]]\\n** [[Sorted by Alias|$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases/byAlias]]\\n** [[Sorted by Tiddler Title|$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases/byTitle]]\\n** [[Undefined Aliases|$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases/undefined]]\\n\\n* uni-link $:/ControlPanel setting\\n\\n* [[uni-fields|$:/plugins/wikilabs/uni-link/uni-fields.js]] widget, that allows us to assign CSS classes based on tiddler fields existence.\\n<<<\\n\\n! Installation\\n<<<\\n* You can drag & drop import this link: $:/plugins/wikilabs/uni-link<br>\\n<<<\\n\\n! Link Styling\\n<<<\\n* Uni-links are styled like this: $:/plugins/wikilabs/uni-link/styles\\n<<<\\n\\n! Examples\\n<<<\\nYou can use the following buttons to create example tiddlers!\\n\\n<<createExampleTiddlers>> -- <<deleteExampleTiddlers>>\\n<<<\\n\\n\"},\"$:/ControlPanel/Settings/WikiLabs\":{\"title\":\"$:/ControlPanel/Settings/WikiLabs\",\"caption\":\"WikiLabs\",\"tags\":\"$:/tags/ControlPanel/SettingsTab\",\"text\":\"Get an overview about all [[WikiLab Pugins|https://wikilabs.github.io]] \\n\\n<div class=\\\"tc-control-panel\\\">\\n<$macrocall $name=\\\"tabs\\\" \\n    tabsList=\\\"[all[shadows+tiddlers]tag[$:/tags/ControlPanel/WikiLabs]!has[draft.of]]\\\"\\n    default=\\\"$:/plugins/wikilabs/uni-link/readme\\\"\\n    explicitState=\\\"$:/state/tab/settings/wikilabs\\\"\\n/>\\n</div>\"},\"$:/plugins/wikilabs/uni-link/filters/aliasbacklinks.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/filters/aliasbacklinks.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/filters/aliasbacklinks.js\\ntype: application/javascript\\nmodule-type: filteroperator\\n\\nFilter operator for returning all the backlinks from an alias\\n\\n\\\\*/\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\\"use strict\\\";\\n\\n/*\\nExport our filter function\\n*/\\nexports.aliasbacklinks = function(source,operator,options) {\\n\\tvar results = [];\\n\\tvar backlinks = $tw.wiki.getIndexer(\\\"AliasBacklinkIndexer\\\");\\n\\n\\tsource(function(tiddler,title) {\\n\\t\\tvar node = backlinks.lookup(title);\\n\\t\\t// old: $tw.utils.pushTop(results,options.wiki.getAliasBacklinks(title));\\n\\t\\tif (node.details) {\\n\\t\\t\\tif (operator?.suffixes?.length > 0) {\\n\\t\\t\\t\\t$tw.utils.each(operator.suffixes, function(suffix) {\\n\\t\\t\\t\\t\\tswitch (suffix[0]) {\\n\\t\\t\\t\\t\\t\\tcase \\\"keys\\\":\\n\\t\\t\\t\\t\\t\\t\\tif (operator.operand) {\\n\\t\\t\\t\\t\\t\\t\\t\\t$tw.utils.pushTop(results, node.details.has(operator.operand) ? [operator.operand] : []);\\n\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\t$tw.utils.each(node.details.getKeys(), function(key) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$tw.utils.pushTop(results, key);\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t\\t\\tcase \\\"augmented\\\":\\n\\t\\t\\t\\t\\t\\t\\tif (operator.operand) {\\n\\t\\t\\t\\t\\t\\t\\t\\t$tw.utils.each(node.details.get(operator.operand), function(val) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$tw.utils.pushTop(results, val + \\\" || \\\" + [operator.operand]);\\n\\t\\t\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\t$tw.utils.each(node.details.getKeys(), function(key) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$tw.utils.each(node.details.get(key), function(val) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$tw.utils.pushTop(results, val + \\\" || \\\" + key);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t});\\n\\t\\t\\t}\\n\\t\\t\\telse if (operator.operand) {\\n\\t\\t\\t\\t$tw.utils.pushTop(results, node.details.get(operator.operand) || []);\\n\\t\\t\\t} else {\\n\\t\\t\\t\\t$tw.utils.pushTop(results, node.details.getValues());\\n\\t\\t\\t}\\n\\t\\t}\\n\\t});\\n\\treturn results;\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"filteroperator\"},\"$:/plugins/wikilabs/uni-link/filters/aliassource.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/filters/aliassource.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/filters/aliassource.js\\ntype: application/javascript\\nmodule-type: filteroperator\\n\\nRead the input value and get the tiddler title, which matches value in aliases field\\nBlank if the variable is missing\\n\\n\\\\*/\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\\"use strict\\\";\\n\\n/*\\nExport our filter function\\n*/\\nexports.aliassource = function(source,operator,options) {\\n\\tvar results = [],\\n\\t\\tindex = $tw.wiki.getIndexer(\\\"AliasIndexer\\\");\\n\\n\\tsource(function(tiddler,title) {\\n\\t\\tvar aliasMap = index.trie.getNodeMap(title.toLowerCase());\\n\\t\\tif (aliasMap) {\\n\\t\\t\\t$tw.utils.each(aliasMap, function(alias) {\\n\\t\\t\\t\\t$tw.utils.each(alias.details.getKeys(), function(key) {\\n\\t\\t\\t\\t\\tresults.push(key)\\n\\t\\t\\t\\t});\\n\\t\\t\\t});\\n\\t\\t}\\n\\t});\\n\\treturn results;\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"filteroperator\"},\"$:/plugins/wikilabs/uni-link/filters/all/aliases.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/filters/all/aliases.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/filters/all/aliases.js\\ntype: application/javascript\\nmodule-type: allfilteroperator\\n\\nFilter function for [all[aliases]]\\n\\n\\\\*/\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\n\\\"use strict\\\";\\n\\n/*\\nExport our filter function\\n*/\\nexports.aliases = function(source,prefix,options) {\\n\\tvar index = $tw.wiki.getIndexer(\\\"AliasIndexer\\\");\\n\\treturn index.trie.suggestPossibleWords(\\\"\\\").strings;\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"allfilteroperator\"},\"$:/plugins/wikilabs/uni-link/filters/is/alias.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/filters/is/alias.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/filters/is/alias.js\\ntype: application/javascript\\nmodule-type: isfilteroperator\\n\\nFilter function for [is[alias]]\\n\\n\\\\*/\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\\"use strict\\\";\\n\\n/*\\nExport our filter function\\n*/\\nexports.alias = function(source,prefix,options) {\\n\\tvar results = [],\\n\\t\\tindex = $tw.wiki.getIndexer(\\\"AliasIndexer\\\");\\n\\n\\tif(prefix === \\\"!\\\") {\\n\\t\\tsource(function(tiddler,title) {\\n\\t\\t\\ttitle = title.toLowerCase();\\n\\t\\t\\tindex.trie.doesWordExist(title) ? \\\"\\\" : results.push(title);\\n\\t\\t});\\n\\t} else {\\n\\t\\tsource(function(tiddler,title) {\\n\\t\\t\\ttitle = title.toLowerCase();\\n\\t\\t\\tindex.trie.doesWordExist(title) ? results.push(title) : \\\"\\\";\\n\\t\\t});\\n\\t}\\n\\treturn results;\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"isfilteroperator\"},\"$:/plugins/wikilabs/uni-link/indexers/aliasIndexerBacklinks.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/indexers/aliasIndexerBacklinks.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/indexers/aliasIndexerBacklinks.js\\ntype: application/javascript\\nmodule-type: indexer\\n\\nIndexes the aliases field values and manages the tiddler titles that have the alias\\nImplemented as a trie: https://en.wikipedia.org/wiki/Trie\\n\\n[[title with spaces]] ... will be stored as key: [[title with spaces]]\\n\\n\\\\*/\\n/*jslint node: true, browser: true */\\n/*global modules: false */\\n\\\"use strict\\\";\\n\\nvar Trie = require(\\\"$:/plugins/wikilabs/uni-link/indexers/trie.js\\\").Trie;\\nvar BACKLINK_HEAD = \\\"b\\\";\\t// \\\"a\\\" .. for alias (b)acklinks\\n\\nfunction AliasBacklinkIndexer(wiki) {\\n\\tthis.wiki = wiki;\\n\\tthis.aliases = $tw.wiki.getIndexer(\\\"AliasIndexer\\\");\\n}\\n\\nAliasBacklinkIndexer.prototype.init = function() {\\n\\tthis.trie = new Trie(BACKLINK_HEAD);\\n}\\n\\nAliasBacklinkIndexer.prototype.rebuild = function() {\\n\\tvar self = this;\\n\\tthis.wiki.eachShadowPlusTiddlers(function(tiddler,title) {\\n\\t\\tvar aliasLinks = self._getAliasLinks(tiddler);\\n\\t\\tif (aliasLinks.length > 0) {\\n\\t\\t\\t// check for alias sources\\n\\t\\t\\t$tw.utils.each(aliasLinks, function(alias) {\\n\\t\\t\\t\\tvar aliasSources = self.aliases.lookup(alias.toLowerCase());\\n\\t\\t\\t\\tif (aliasSources.details) {\\n\\t\\t\\t\\t\\t$tw.utils.each(aliasSources.details.getKeys(), function(key) {\\n\\t\\t\\t\\t\\t\\tvar node = self.trie.addWord(key);\\n\\t\\t\\t\\t\\t\\tvar titles = node.details.get(alias) || [];\\n\\t\\t\\t\\t\\t\\t$tw.utils.pushTop(titles, title);\\n\\t\\t\\t\\t\\t\\tnode.details.set(alias, titles);\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t// It's an undefined alias\\n\\t\\t\\t\\t\\tvar node = self.trie.addWord(\\\"?\\\");\\n\\t\\t\\t\\t\\tvar backlinks = [];\\n\\t\\t\\t\\t\\t$tw.utils.pushTop(backlinks, tiddler.fields.title);\\n\\t\\t\\t\\t\\tnode.details.set(alias, backlinks);\\n\\t\\t\\t\\t}\\n\\t\\t\\t})\\n\\t\\t}\\n\\t});\\n}\\n\\nAliasBacklinkIndexer.prototype._getAliasLinks = function(tiddler, text) {\\n\\tvar self = this;\\n\\tvar links = [];\\n\\n\\t// Alias backlink handling\\n\\tfunction findAliases(title, text) {\\n\\t\\tvar parser;\\n\\t\\tvar checkParseTree = function(parseTree) {\\n\\t\\t\\t// Count up the links\\n\\t\\t\\tfor(var t=0; t<parseTree.length; t++) {\\n\\t\\t\\t\\tvar parseTreeNode = parseTree[t];\\n\\t\\t\\t\\tif(parseTreeNode.type === \\\"macrocall\\\" && parseTreeNode.name === \\\"aka\\\") {\\n\\t\\t\\t\\t\\tvar value = parseTreeNode.params[0].value;\\n\\t\\t\\t\\t\\tif(links.indexOf(value) === -1) {\\n\\t\\t\\t\\t\\t\\tlinks.push(value);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif(parseTreeNode.children) {\\n\\t\\t\\t\\t\\tcheckParseTree(parseTreeNode.children);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t};\\n\\t\\tif (title) {\\n\\t\\t\\tparser = self.wiki.parseTiddler(title);\\n\\t\\t} else if (text) {\\n\\t\\t\\tparser = self.wiki.parseText(\\\"text/vnd.tiddlywiki\\\",text);\\n\\t\\t}\\n\\t\\tif(parser) {\\n\\t\\t\\tcheckParseTree(parser.tree);\\n\\t\\t}\\n\\t};\\n\\n\\tif (tiddler && tiddler.fields[\\\"draft.of\\\"]) {\\n\\t\\treturn [];\\n\\t} else if (text) {\\n\\t\\tfindAliases(null, text);\\n\\t\\treturn links;\\n\\t} else if (tiddler) {\\n\\t\\tfindAliases(tiddler.fields.title);\\n\\t\\treturn links;\\n\\t}\\n}\\n\\nAliasBacklinkIndexer.prototype.update = function(updateDescriptor) {\\n\\tvar self = this;\\n\\tif(!this.trie) {\\n\\t\\t// This should never happen\\n\\t\\tthrow new Error(\\\"Alias BACKLINKS trie not initialized!\\\");\\n\\t}\\n\\tvar newAliases = [],\\n\\t\\toldAliases = [],\\n\\t\\tself = this;\\n\\tif(updateDescriptor.old.exists) {\\n\\t\\toldAliases = this._getAliasLinks(updateDescriptor.old.tiddler, updateDescriptor.old.tiddler.fields.text);\\n\\t\\tif (oldAliases && oldAliases.length > 0) {\\n\\t\\t\\t$tw.utils.each(oldAliases, function(alias){\\n\\t\\t\\t\\tvar aliasSources = self.aliases.lookup(alias)?.details?.getKeys();\\n\\t\\t\\t\\tif (aliasSources) {\\n\\t\\t\\t\\t\\t$tw.utils.each(aliasSources, function(aSource){\\n\\t\\t\\t\\t\\t\\t// get trie node, so we can manipulate it\\n\\t\\t\\t\\t\\t\\tvar node = self.trie.getLastCharacterNode(aSource);\\n\\t\\t\\t\\t\\t\\tvar backlinks = [];\\n\\t\\t\\t\\t\\t\\t// get existing backlinks and remove currentTiddler if it is there\\n\\t\\t\\t\\t\\t\\tif (node) {\\n\\t\\t\\t\\t\\t\\t\\t$tw.utils.each(node.details.get(alias), function(backlink){\\n\\t\\t\\t\\t\\t\\t\\t\\tif (backlink !== updateDescriptor.old.tiddler.fields.title) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tbacklinks.push(backlink);\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\tnode.details.set(alias, backlinks);\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tif (backlinks.length === 0) {\\n\\t\\t\\t\\t\\t\\t\\t// .deleteWord only if there is no .details anymore\\n\\t\\t\\t\\t\\t\\t\\t// TODO remove backlinks if needed\\n\\t\\t\\t\\t\\t\\t\\tself.trie.deleteWord(aSource);\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t// There is an undefined backlink\\n\\t\\t\\t\\t\\tvar node = self.trie.getLastCharacterNode(\\\"?\\\");\\n\\t\\t\\t\\t\\tif (node) {\\n\\t\\t\\t\\t\\t\\tnode.details.delete(alias);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t})\\n\\t\\t}\\n\\t}\\n\\tif(updateDescriptor.new.exists) {\\n\\t\\tnewAliases = this._getAliasLinks(updateDescriptor.new.tiddler, updateDescriptor.new.tiddler.fields.text);\\n\\t\\tif (newAliases?.length > 0) {\\n\\t\\t\\t$tw.utils.each(newAliases, function(alias){\\n\\t\\t\\t\\tvar aliasSources = self.aliases.lookup(alias)?.details?.getKeys();\\n\\t\\t\\t\\tif (aliasSources) {\\n\\t\\t\\t\\t\\t// alias does not registered yet\\n\\t\\t\\t\\t\\t$tw.utils.each(aliasSources, function(aSource){\\n\\t\\t\\t\\t\\t\\t// get trie node, so we can manipulate it. If it does not exist, create it\\n\\t\\t\\t\\t\\t\\tvar node = self.trie.getLastCharacterNode(aSource) || self.trie.addWord(aSource);\\n\\t\\t\\t\\t\\t\\tvar backlinks = node?.details?.get(alias) || [];\\n\\t\\t\\t\\t\\t\\t$tw.utils.pushTop(backlinks, updateDescriptor.new.tiddler.fields.title);\\n\\t\\t\\t\\t\\t\\tnode.details.set(alias, backlinks);\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t// register new alias backlink\\n\\t\\t\\t\\t\\tvar aSource = self.aliases.lookup(alias.toLowerCase());\\n\\t\\t\\t\\t\\tif (aSource.length > 0) {\\n\\t\\t\\t\\t\\t\\t$tw.utils.each(aSource.details.getKeys(), function(key) {\\n\\t\\t\\t\\t\\t\\t\\tvar node = self.trie.addWord(key);\\n\\t\\t\\t\\t\\t\\t\\tvar titles = node.details.get(aSource) || [];\\n\\t\\t\\t\\t\\t\\t\\tnode.details.set(aSource, titles);\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t// It's an undefined alias\\n\\t\\t\\t\\t\\t\\tvar node = self.trie.addWord(\\\"?\\\");\\n\\t\\t\\t\\t\\t\\tvar backlinks = [];\\n\\t\\t\\t\\t\\t\\t$tw.utils.pushTop(backlinks, updateDescriptor.new.tiddler.fields.title);\\n\\t\\t\\t\\t\\t\\tnode.details.set(alias, backlinks);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t})\\n\\t\\t}\\n\\t\\t// tiddler may contain a new alias, so remove it from \\\"undefined\\\" backlinks\\n\\t\\tnewAliases = this.aliases._getAliases(updateDescriptor.new.tiddler, updateDescriptor.new.tiddler.fields.text);\\n\\t\\tif (newAliases?.length > 0) {\\n\\t\\t\\t$tw.utils.each(newAliases, function(alias){\\n\\t\\t\\t\\tvar x = self.lookup(\\\"?\\\");\\n\\t\\t\\t\\t$tw.utils.each (x?.details?.getKeys(), function(key){\\n\\t\\t\\t\\t\\tif (key.toLowerCase() === alias.toLowerCase()) {\\n\\t\\t\\t\\t\\t\\tx.details.delete(key);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t});\\n\\t\\t\\t});\\n\\t\\t\\t// update backlinks, if a new alias is created\\n\\t\\t\\tthis.rebuild();\\n\\t\\t}\\n\\t}\\n}\\n\\nAliasBacklinkIndexer.prototype.lookup = function(title) {\\n\\treturn this.trie.getNodeMap(title)[title] || {};\\n}\\n\\nexports.AliasBacklinkIndexer = AliasBacklinkIndexer;\\n\",\"type\":\"application/javascript\",\"module-type\":\"indexer\"},\"$:/plugins/wikilabs/uni-link/indexers/aliasindexer.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/indexers/aliasindexer.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/indexers/aliasindexer.js\\ntype: application/javascript\\nmodule-type: indexer\\n\\nIndexes the aliases field values and manages the tiddler titles that have the alias\\nImplemented as a trie: https://en.wikipedia.org/wiki/Trie\\n\\n[[title with spaces]] ... will be stored as key: [[title with spaces]]\\n\\n\\\\*/\\n/*jslint node: true, browser: true */\\n/*global modules: false */\\n\\\"use strict\\\";\\n\\nvar Trie = require(\\\"$:/plugins/wikilabs/uni-link/indexers/trie.js\\\").Trie;\\nvar ALIAS_HEAD = 'a';\\t// \\\"a\\\" .. for alias\\n\\nfunction AliasIndexer(wiki) {\\n\\tthis.wiki = wiki;\\n}\\n\\nAliasIndexer.prototype.init = function() {\\n\\tthis.trie = new Trie(ALIAS_HEAD);\\n}\\n\\nAliasIndexer.prototype.rebuild = function() {\\n\\tvar self = this;\\n\\tthis.wiki.eachShadowPlusTiddlers(function(tiddler,title) {\\n\\t\\tif (tiddler.fields.aliases) {\\n\\t\\t\\tvar aliases = self._getAliases(tiddler);\\n\\t\\t\\t$tw.utils.each(aliases, function(alias) {\\n\\t\\t\\t\\tvar node = self.trie.addWord(alias.toLowerCase());\\n\\t\\t\\t\\tnode.details.set(title, alias/*.toLowerCase()*/)\\n\\t\\t\\t});\\n\\t\\t}\\n\\t});\\n}\\n\\nAliasIndexer.prototype._getAliases = function(tiddler) {\\n\\tif (tiddler.fields[\\\"draft.of\\\"]) {\\n\\t\\treturn [];\\n\\t} else {\\n\\t\\treturn tiddler.getFieldList(\\\"aliases\\\");\\n\\t}\\n}\\n\\nAliasIndexer.prototype.update = function(updateDescriptor) {\\n\\tvar self = this;\\n\\tif(!this.trie) {\\n\\t\\t// This should never happen\\n\\t\\tthrow new Error(\\\"Alias trie not initialized!\\\");\\n\\t}\\n\\tvar newAliases = [],\\n\\t\\toldAliases = [],\\n\\t\\tself = this;\\n\\tif(updateDescriptor.old.exists) {\\n\\t\\toldAliases = this._getAliases(updateDescriptor.old.tiddler);\\n\\t\\tif (oldAliases.length > 0) {\\n\\t\\t\\t$tw.utils.each(oldAliases, function(alias){\\n\\t\\t\\t\\tself.trie.deleteWord(alias.toLowerCase(), updateDescriptor.old.tiddler.fields.title);\\n\\t\\t\\t})\\n\\t\\t}\\n\\t}\\n\\tif(updateDescriptor.new.exists) {\\n\\t\\tnewAliases = this._getAliases(updateDescriptor.new.tiddler);\\n\\t\\tif (newAliases.length > 0) {\\n\\t\\t\\t$tw.utils.each(newAliases, function(alias){\\n\\t\\t\\t\\tvar node = self.trie.addWord(alias.toLowerCase());\\n\\t\\t\\t\\tnode.details.set(updateDescriptor.new.tiddler.fields.title, alias);\\n\\t\\t\\t})\\n\\t\\t}\\n\\t}\\n}\\n\\nAliasIndexer.prototype.lookup = function(title) {\\n\\treturn this.trie.getNodeMap(title)[title] || [];\\n}\\n\\nexports.AliasIndexer = AliasIndexer;\\n\",\"type\":\"application/javascript\",\"module-type\":\"indexer\"},\"$:/plugins/wikilabs/uni-link/indexers/hashtable.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/indexers/hashtable.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/indexers/hashtable.js\\ntype: application/javascript\\nmodule-type: library\\n\\nUsing a JS object as hashtable\\nWrapper to get \\\"get, set...\\\"\\n\\n\\\\*/\\n\\\"use strict\\\";\\n\\nfunction HashTable()  {\\n\\tthis.keys = Object.create(null);\\n}\\n\\n/**\\n * @param {string} key\\n * @param {*} value\\n */\\nHashTable.prototype.set = function(key, value) {\\n\\tthis.keys[key] = value || undefined;\\n}\\n\\n/**\\n * @param {string} key\\n * @return {*}\\n */\\nHashTable.prototype.get = function(key) {\\n    return this.keys[key];\\n}\\n\\n/**\\n * @param {string} key\\n * @return null\\n */\\nHashTable.prototype.delete = function(key) {\\n\\tdelete this.keys[key];\\n\\treturn null;\\n}\\n\\n/**\\n * @param {string} key\\n * @return {boolean}\\n */\\nHashTable.prototype.has = function(key) {\\n\\treturn Object.hasOwnProperty.call(this.keys, key);\\n}\\n\\n/**\\n * @return {string[]}\\n */\\nHashTable.prototype.getKeys = function() {\\n\\treturn Object.keys(this.keys);\\n}\\n\\n/**\\n * Gets the list of all the stored values in the hash table.\\n *\\n * @return {*[]}\\n */\\nHashTable.prototype.getValues = function() {\\n\\tvar results = [];\\n\\tthis.getKeys().map( (key) =>  {\\n\\t\\tthis.get(key).map((val) => {\\n\\t\\t\\tresults.push(val);\\n\\t\\t});\\n\\t});\\n\\treturn results;\\n};\\n\\n\\n// return this.buckets.reduce((values, bucket) => {\\n// \\tconst bucketValues = bucket.toArray()\\n// \\t.map((linkedListNode) => linkedListNode.value.value);\\n// \\treturn values.concat(bucketValues);\\n\\nexports.HashTable = HashTable;\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/wikilabs/uni-link/indexers/trie-node.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/indexers/trie-node.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/indexers/trie-node.js\\ntype: application/javascript\\nmodule-type: library\\n\\ntrie-node class\\n\\n\\\\*/\\n\\n\\\"use strict\\\";\\n\\nvar HashTable = require(\\\"$:/plugins/wikilabs/uni-link/indexers/hashtable.js\\\").HashTable;\\n\\n/**\\n * @param {string} character\\n * @param {boolean} isCompleteWord\\n * @param {string} title\\n */\\nfunction TrieNode(character, isCompleteWord, title) {\\n\\tthis.character = character || \\\"\\\";\\n\\tthis.isCompleteWord = isCompleteWord || false;\\n\\tthis.details = new HashTable();\\t\\t// hashmap of details\\n\\tthis.children = new HashTable();\\t\\t// more trie-nodes\\n}\\n\\n/**\\n * @param {string} character\\n * @return {TrieNode}\\n */\\nTrieNode.prototype.getChild = function(character) {\\n\\treturn this.children.get(character);\\n}\\n\\n/**\\n * @param {string} character\\n * @param {boolean} isCompleteWord\\n * @return {TrieNode}\\n */\\nTrieNode.prototype.addChild = function(character, isCompleteWord) {\\n\\tisCompleteWord = isCompleteWord || false;\\n\\tif (!this.children.has(character)) {\\n\\t\\tthis.children.set(character, new TrieNode(character, isCompleteWord));\\n\\t}\\n\\n\\tvar childNode = this.children.get(character);\\n\\n\\t// In cases similar to adding \\\"car\\\" after \\\"carpet\\\" we need to mark \\\"r\\\" character as complete.\\n\\tchildNode.isCompleteWord = childNode.isCompleteWord || isCompleteWord;\\n\\n\\treturn childNode;\\n}\\n\\n/**\\n * @param {string} character\\n * @return {TrieNode}\\n */\\nTrieNode.prototype.removeChild = function(character) {\\n\\tvar childNode = this.getChild(character);\\n\\n\\t// Delete childNode only if:\\n\\t// - childNode has NO children,\\n\\t// - childNode.isCompleteWord === false.\\n\\tif ( childNode && !childNode.isCompleteWord && !childNode.hasChildren()\\t) {\\n\\t\\tthis.children.delete(character);\\n\\t}\\n\\treturn this;\\n}\\n\\n/**\\n * @param {string} character\\n * @return {boolean}\\n */\\nTrieNode.prototype.hasChild = function(character) {\\n\\treturn this.children.has(character);\\n}\\n\\n/**\\n * Check whether current TrieNode has children or not.\\n * @return {boolean}\\n */\\nTrieNode.prototype.hasChildren = function() {\\n\\treturn this.children.getKeys().length !== 0;\\n}\\n\\n/**\\n * @return {string[]}\\n */\\nTrieNode.prototype.suggestChildren = function() {\\n\\treturn this.children.getKeys();\\n}\\n\\n/**\\n * @return {string}\\n */\\nTrieNode.prototype.toString = function() {\\n\\tlet childrenAsString = this.suggestChildren().toString();\\n\\tchildrenAsString = childrenAsString ? \\\":\\\" + childrenAsString : \\\"\\\";\\n\\tvar isCompleteString = this.isCompleteWord ? \\\"*\\\" : \\\"\\\";\\n\\n\\treturn this.character + isCompleteString + childrenAsString;\\n}\\n\\nexports.TrieNode = TrieNode;\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/wikilabs/uni-link/indexers/trie.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/indexers/trie.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/indexers/trie.js\\ntype: application/javascript\\nmodule-type: library\\n\\ntrie base class\\n\\n\\\\*/\\n\\n\\\"use strict\\\";\\n\\nvar TrieNode = require(\\\"$:/plugins/wikilabs/uni-link/indexers/trie-node.js\\\").TrieNode;\\n\\n// Character that we will use for trie tree root.\\n// var HEAD_CHARACTER = '*';\\n\\nfunction Trie(HEAD_CHARACTER)  {\\n\\tHEAD_CHARACTER = HEAD_CHARACTER || \\\"*\\\";\\n\\tthis.head = new TrieNode(HEAD_CHARACTER);\\n}\\n\\n/**\\n * @param {string} key\\n * @return {Trie}\\n */\\nTrie.prototype.addWord = function(key) {\\n\\tvar characters = Array.from(key);\\n\\tvar currentNode = this.head;\\n\\n\\tfor (var charIndex = 0; charIndex < characters.length; charIndex += 1) {\\n\\t\\tvar isComplete = charIndex === characters.length - 1;\\n\\t\\tcurrentNode = currentNode.addChild(characters[charIndex], isComplete);\\n\\t}\\n\\treturn currentNode;\\n}\\n\\n/**\\n * @param {string} key\\n * @return {Trie}\\n */\\nTrie.prototype.deleteWord = function(key) {\\n\\tvar charIndex = 0;\\n\\tvar depthFirstDelete = function(currentNode, charIndex) {\\n\\t\\tif (charIndex >= key.length) {\\n\\t\\t\\t// Return if we're trying to delete the character that is out of key's scope.\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tvar character = key[charIndex];\\n\\t\\tvar nextNode = currentNode.getChild(character);\\n\\n\\t\\tif (nextNode == null) {\\n\\t\\t\\t// Return if we're trying to delete a key that has not been added to the Trie.\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\t// Go deeper.\\n\\t\\tdepthFirstDelete(nextNode, charIndex + 1);\\n\\n\\t\\t// Since we're going to delete a key let's un-mark its last character isCompleteWord flag.\\n\\t\\tif (charIndex === (key.length - 1)) {\\n\\t\\t\\tnextNode.isCompleteWord = false;\\n\\t\\t}\\n\\n\\t\\t// childNode is deleted only if:\\n\\t\\t// - childNode has NO children\\n\\t\\t// - childNode.isCompleteWord === false\\n\\t\\tcurrentNode.removeChild(character);\\n\\t};\\n\\n\\t// Start depth-first deletion from the head node.\\n\\tdepthFirstDelete(this.head, charIndex);\\n\\n\\treturn this;\\n}\\n\\n/**\\n * @param {string} key\\n * @return {string[]}\\n */\\nTrie.prototype.suggestNextCharacters = function(key) {\\n\\tvar lastCharacter = this.getLastCharacterNode(key);\\n\\tif (!lastCharacter) {\\n\\t\\treturn null;\\n\\t}\\n\\treturn lastCharacter.suggestChildren();\\n}\\n\\n/**\\n * @param {string} key\\n * @return {string[], Trie[]} augmented Trie node\\n */\\nTrie.prototype.suggestPossibleWords = function(key) {\\n\\tvar strings = [],\\n\\t\\tnodes = [];\\t// Cannot be related to strings !!!\\n\\tfunction dfs(node, str, strings) {\\n\\t\\tif (node) {\\n\\t\\t\\tif (node.isCompleteWord) {\\n\\t\\t\\t\\tstrings.push(str);\\n\\t\\t\\t\\tnode.word = str;\\n\\t\\t\\t\\tnodes.push(node);\\n\\t\\t\\t}\\n\\t\\t\\tfor (let key in node.children.keys) {\\n\\t\\t\\t\\tdfs(node.children.keys[key], str + key, strings);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\tdfs(this.getLastCharacterNode(key), key, strings);\\n\\treturn { \\\"strings\\\": strings, \\\"nodes\\\": nodes };\\n}\\n\\n/**\\n * @param {string} key\\n * @return {nodeMap{}} hashMap : TrieNode\\n */\\nTrie.prototype.getNodeMap = function(key) {\\n\\tvar nodeMap = {};\\n\\tfunction dfs(node, str, nodeMap) {\\n\\t\\tif (node) {\\n\\t\\t\\tif (node.isCompleteWord && (key === str)) {\\n\\t\\t\\t\\tnodeMap[str] = node;\\n\\t\\t\\t}\\n\\t\\t\\tfor (let key in node.children.keys) {\\n\\t\\t\\t\\tdfs(node.children.keys[key], str + key, nodeMap);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\tdfs(this.getLastCharacterNode(key), key, nodeMap);\\n\\treturn nodeMap;\\n}\\n\\n\\n/**\\n * Check if complete key exists in Trie.\\n *\\n * @param {string} key\\n * @return {boolean}\\n */\\nTrie.prototype.doesWordExist = function(key) {\\n\\tvar lastCharacter = this.getLastCharacterNode(key);\\n\\treturn !!lastCharacter && lastCharacter.isCompleteWord;\\n}\\n\\n/**\\n * @param {string} key\\n * @return {TrieNode}\\n */\\nTrie.prototype.getLastCharacterNode = function(key) {\\n\\tvar characters = Array.from(key);\\n\\tvar currentNode = this.head;\\n\\tfor (var charIndex = 0; charIndex < characters.length; charIndex += 1) {\\n\\t\\tif (!currentNode.hasChild(characters[charIndex])) {\\n\\t\\t\\treturn null;\\n\\t\\t}\\n\\t\\tcurrentNode = currentNode.getChild(characters[charIndex]);\\n\\t}\\n\\treturn currentNode;\\n}\\n\\nexports.Trie = Trie;\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/wikilabs/uni-link/relinkoperations/text/wikitext/unilink.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/relinkoperations/text/wikitext/unilink.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/relinkoperations/text/wikitext/unilink.js\\ntype: application/javascript\\nmodule-type: relinkwikitextrule\\n\\nHandles replacement in wiki text inline rules, like,\\n\\n[[Introduction]]\\n\\n[[link description|TiddlerTitle]]\\n\\n\\\\*/\\n\\n\\\"use strict\\\";\\n\\nvar prettylink = require('$:/plugins/flibbles/relink/js/relinkoperations/text/wikitext/prettylink.js');\\n\\nfunction Unilink() {}\\n\\nUnilink.prototype = prettylink;\\n\\nmodule.exports = new Unilink();\\nmodule.exports.name = \\\"unilink\\\";\\n\\nmodule.exports.relink = function(text_or_tiddler, fromTitle, toTitle, options) {\\n    // Check that this version of Relink supports [object] return.\\n    if (typeof text_or_tiddler === \\\"string\\\") {\\n        if (this.match[3] == \\\"?\\\") {\\n            this.parser.pos = this.matchRegExp.lastIndex;\\n            // Ignore this unilink. The link portion has a \\\"?\\\", so it's an alias.\\n            return undefined;\\n        }\\n        if (this.match[1] === fromTitle && this.match[2] === \\\"|\\\" && !this.match[3] && !this.match[4]) {\\n            this.parser.pos = this.matchRegExp.lastIndex;\\n            return { name: \\\"unilink\\\", impossible: true};\\n        }\\n    }\\n    // The underlying prettylink rule expects everything after the \\\"|\\\" to\\n    // be the link. We'll just swap it in from the 4th position before we\\n    // apply prettylink relinking.\\n    this.match[2] = this.match[4];\\n    return prettylink.relink.apply(this, arguments);\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"relinkwikitextrule\"},\"$:/plugins/wikilabs/uni-link/make-alias-link.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/make-alias-link.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/make-alias-link.js\\ntype: application/javascript\\nmodule-type: texteditoroperation\\n\\nText editor operation to make an alias-link\\n\\n\\\\*/\\n(function(){\\n\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\\"use strict\\\";\\n\\nexports[\\\"make-alias-link\\\"] = function(event,operation) {\\n\\tif(operation.selection) {\\n\\t\\toperation.replacement = \\\"[[\\\" + operation.selection + \\\"|?\\\" + event.paramObject.text + \\\"]] \\\";\\n\\t\\toperation.cutStart = operation.selStart;\\n\\t\\toperation.cutEnd = operation.selEnd;\\n\\t} else {\\n\\t\\toperation.replacement = \\\"[[\\\" + event.paramObject.text + \\\"|?]] \\\";\\n\\t\\toperation.cutStart = operation.selStart;\\n\\t\\toperation.cutEnd = operation.selEnd;\\n\\t}\\n\\toperation.newSelStart = operation.selStart + operation.replacement.length;\\n\\toperation.newSelEnd = operation.newSelStart;\\n};\\n\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"texteditoroperation\"},\"$:/plugins/wikilabs/uni-link/uni-fields.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/uni-fields.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/uni-fields.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nunifields widget, derived from Fields Widget\\n\\n\\\\*/\\n(function(){\\n\\n/*jslint node: true, browser: true */\\n/*global $tw: false, require:false, exports:false */\\n\\\"use strict\\\";\\n\\nvar Widget = require(\\\"$:/core/modules/widgets/widget.js\\\").widget;\\n\\nvar FieldsWidget = function(parseTreeNode,options) {\\n\\tthis.initialise(parseTreeNode,options);\\n};\\n\\n/*\\nInherit from the base widget class\\n*/\\nFieldsWidget.prototype = new Widget();\\n\\n/*\\nRender this widget into the DOM\\n*/\\nFieldsWidget.prototype.render = function(parent,nextSibling) {\\n\\tthis.parentDomNode = parent;\\n\\tthis.computeAttributes();\\n\\tthis.execute();\\n\\tvar textNode = this.document.createTextNode(this.text);\\n\\tparent.insertBefore(textNode,nextSibling);\\n\\tthis.domNodes.push(textNode);\\n};\\n\\n/*\\nCompute the internal state of the widget\\n*/\\nFieldsWidget.prototype.execute = function() {\\n\\t// Get parameters from our attributes\\n\\tthis.tiddlerTitle = this.getAttribute(\\\"tiddler\\\",this.getVariable(\\\"currentTiddler\\\"));\\n\\tthis.template = this.getAttribute(\\\"template\\\");\\n\\tthis.sort = this.getAttribute(\\\"sort\\\",\\\"yes\\\") === \\\"yes\\\";\\n\\tthis.exclude = this.getAttribute(\\\"exclude\\\");\\n\\tthis.include = this.getAttribute(\\\"include\\\",null);\\n\\tthis.stripTitlePrefix = this.getAttribute(\\\"stripTitlePrefix\\\",\\\"no\\\") === \\\"yes\\\";\\n\\tthis.sortReverse = this.getAttribute(\\\"sortReverse\\\",\\\"no\\\") === \\\"yes\\\";\\n\\t// Get the value to display\\n\\tvar tiddler = this.wiki.getTiddler(this.tiddlerTitle);\\n\\n\\t// Get the inclusion and exclusion list\\n\\tvar exclude = (this.exclude) ? this.exclude.split(\\\" \\\") : [\\\"text\\\"];\\n\\t// If inclusion is defined, everything else is auto excluded\\n\\tvar include = (this.include) ? this.include.split(\\\" \\\") : null;\\n\\n\\t// Compose the template\\n\\tvar text = [];\\n\\tif(this.template && tiddler) {\\n\\t\\tvar fields = [];\\n\\t\\tif (include) {\\n\\t\\t\\tfor(var i=0; i<include.length; i++) {\\n\\t\\t\\t\\tif(tiddler.fields[include[i]]) {\\n\\t\\t\\t\\t\\tfields.push(include[i]);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t} else {\\n\\t\\t\\tfor(var fieldName in tiddler.fields) {\\n\\t\\t\\t\\tif(exclude.indexOf(fieldName) === -1) {\\n\\t\\t\\t\\t\\tfields.push(fieldName);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tif (this.sort) fields.sort();\\n\\t\\tif (this.sortReverse) fields.reverse();\\n\\t\\tfor(var f=0, fmax=fields.length; f<fmax; f++) {\\n\\t\\t\\tfieldName = fields[f];\\n//\\t\\t\\tif(exclude.indexOf(fieldName) === -1) {\\n\\t\\t\\tvar row = this.template,\\n\\t\\t\\t\\tvalue = tiddler.getFieldString(fieldName);\\n\\t\\t\\tif(this.stripTitlePrefix && fieldName === \\\"title\\\") {\\n\\t\\t\\t\\tvar reStrip = /^\\\\{[^\\\\}]+\\\\}(.+)/mg,\\n\\t\\t\\t\\t\\treMatch = reStrip.exec(value);\\n\\t\\t\\t\\tif(reMatch) {\\n\\t\\t\\t\\t\\tvalue = reMatch[1];\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\trow = $tw.utils.replaceString(row,\\\"$name$\\\",fieldName);\\n\\t\\t\\trow = $tw.utils.replaceString(row,\\\"$value$\\\",value);\\n\\t\\t\\trow = $tw.utils.replaceString(row,\\\"$encoded_value$\\\",$tw.utils.htmlEncode(value));\\n\\t\\t\\ttext.push(row);\\n//\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\tthis.text = text.join(\\\"\\\");\\n};\\n\\n/*\\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\\n*/\\nFieldsWidget.prototype.refresh = function(changedTiddlers) {\\n\\tvar changedAttributes = this.computeAttributes();\\n\\tif(changedAttributes.tiddler || changedAttributes.template || changedAttributes.exclude || changedAttributes.stripTitlePrefix || changedTiddlers[this.tiddlerTitle]) {\\n\\t\\tthis.refreshSelf();\\n\\t\\treturn true;\\n\\t} else {\\n\\t\\treturn false;\\n\\t}\\n};\\n\\nexports[\\\"uni-fields\\\"] = FieldsWidget;\\n\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"},\"$:/plugins/wikilabs/uni-link/wiki-methodes.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/wiki-methodes.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/wiki-methodes.js\\ntype: application/javascript\\nmodule-type: wikimethod\\n\\nOVERWRITES core methods for the $tw.Wiki object:\\n\\nexports.extractLinks = function(parseTreeRoot) {\\nexports.getTiddlerLinks = function(title) {\\n\\n\\\\*/\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\\"use strict\\\";\\n\\n\\n/*\\nReturn an array of tiddler titles that are directly linked within the given parse tree\\n */\\nexports.extractLinks = function(parseTreeRoot) {\\n\\t// Count up the links\\n\\tvar links = [],\\n\\t\\tcheckParseTree = function(parseTree) {\\n\\t\\t\\tfor(var t=0; t<parseTree.length; t++) {\\n\\t\\t\\t\\tvar parseTreeNode = parseTree[t];\\n\\t\\t\\t\\tif(parseTreeNode.type === \\\"link\\\" && parseTreeNode.attributes.to && parseTreeNode.attributes.to.type === \\\"string\\\") {\\n\\t\\t\\t\\t\\tvar value = parseTreeNode.attributes.to.value;\\n\\t\\t\\t\\t\\tif(links.indexOf(value) === -1) {\\n\\t\\t\\t\\t\\t\\tlinks.push(value);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} else if (parseTreeNode.type === \\\"macrocall\\\" && parseTreeNode.name === \\\"uni-link\\\" && parseTreeNode.params && parseTreeNode.params[0].value) {\\n\\t\\t\\t\\t\\tvar value = parseTreeNode.params[0].value;\\n\\t\\t\\t\\t\\tif(links.indexOf(value) === -1) {\\n\\t\\t\\t\\t\\t\\tlinks.push(value);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} // else if type===\\\"macrocall\\\"\\n\\n\\t\\t\\t\\tif(parseTreeNode.children) {\\n\\t\\t\\t\\t\\tcheckParseTree(parseTreeNode.children);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t};\\n\\tcheckParseTree(parseTreeRoot);\\n\\treturn links;\\n};\\n\\n/*\\nReturn an array of tiddler titles that are directly linked from the specified tiddler\\n*/\\nexports.getTiddlerLinks = function(title) {\\n\\tvar self = this;\\n\\t// We'll cache the links so they only get computed if the tiddler changes\\n\\treturn this.getCacheForTiddler(title,\\\"links\\\",function() {\\n\\t\\t// Parse the tiddler\\n\\t\\tvar parser = self.parseTiddler(title);\\n\\t\\t// Count up the links\\n\\t\\tvar links = [],\\n\\t\\t\\tcheckParseTree = function(parseTree) {\\n\\t\\t\\t\\tfor(var t=0; t<parseTree.length; t++) {\\n\\t\\t\\t\\t\\tvar parseTreeNode = parseTree[t];\\n\\t\\t\\t\\t\\tif(parseTreeNode.type === \\\"link\\\" && parseTreeNode.attributes.to && parseTreeNode.attributes.to.type === \\\"string\\\") {\\n\\t\\t\\t\\t\\t\\tvar value = parseTreeNode.attributes.to.value;\\n\\t\\t\\t\\t\\t\\tif(links.indexOf(value) === -1) {\\n\\t\\t\\t\\t\\t\\t\\tlinks.push(value);\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t} else if (parseTreeNode.type === \\\"macrocall\\\" && parseTreeNode.name === \\\"uni-link\\\" && parseTreeNode.params && parseTreeNode.params[0].value) {\\n\\t\\t\\t\\t\\t\\tvar value = parseTreeNode.params[0].value;\\n\\t\\t\\t\\t\\t\\tif(links.indexOf(value) === -1) {\\n\\t\\t\\t\\t\\t\\t\\tlinks.push(value);\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t} // else if type===\\\"macrocall\\\"\\n\\n\\t\\t\\t\\t\\tif(parseTreeNode.children) {\\n\\t\\t\\t\\t\\t\\tcheckParseTree(parseTreeNode.children);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t};\\n\\t\\tif(parser) {\\n\\t\\t\\tcheckParseTree(parser.tree);\\n\\t\\t}\\n\\t\\treturn links;\\n\\t});\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"wikimethod\"},\"$:/plugins/wikilabs/uni-link/uni-link.js\":{\"title\":\"$:/plugins/wikilabs/uni-link/uni-link.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/wikilabs/uni-link/uni-link.js\\ntype: application/javascript\\nmodule-type: wikirule\\n\\nWiki text inline rule for uni link macros. For example:\\n\\n```\\n[[Introduction]] ... uni-link\\n\\n[[Link description|?]]  ... alias-link\\n[[Link description|?t]] ... alias-link - show title\\n[[Link description|?c]] ... alias-link - show caption\\n[[Link description|?s]] ... alias-link - show subtitle\\n[[Link description|?my-field]] ... alias-link - show any field-name as link text\\n\\n```\\n\\n\\\\*/\\n(function(){\\n\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\\"use strict\\\";\\n\\nexports.name = \\\"unilink\\\";\\nexports.types = {inline: true};\\n\\nexports.init = function(parser) {\\n\\tthis.parser = parser;\\n\\t// Regexp to match\\n//\\tthis.matchRegExp = /\\\\[\\\\[(.*?)(?:\\\\|(.*?))?\\\\]\\\\]/mg;\\n\\tthis.matchRegExp = /\\\\[\\\\[(.*?)(?:(\\\\|)(\\\\?)?(.*?))?\\\\]\\\\]/mg;\\n};\\n\\nexports.parse = function() {\\n\\t// Move past the match\\n\\tthis.parser.pos = this.matchRegExp.lastIndex;\\n\\t// Process the link\\n\\tvar text = this.match[1],\\n\\t\\tlink = this.match[4] || text,\\n\\t\\tcheckAlias = this.match[3] === \\\"?\\\",\\n\\t\\tuseUniLink = !(this.match[2] === \\\"|\\\");\\n\\n\\tif($tw.utils.isLinkExternal(link)) {\\n\\t\\treturn [{\\n\\t\\t\\ttype: \\\"element\\\",\\n\\t\\t\\ttag: \\\"a\\\",\\n\\t\\t\\tattributes: {\\n\\t\\t\\t\\thref: {type: \\\"string\\\", value: link},\\n\\t\\t\\t\\t\\\"class\\\": {type: \\\"string\\\", value: \\\"tc-tiddlylink-external\\\"},\\n\\t\\t\\t\\ttarget: {type: \\\"string\\\", value: \\\"_blank\\\"},\\n\\t\\t\\t\\trel: {type: \\\"string\\\", value: \\\"noopener noreferrer\\\"}\\n\\t\\t\\t},\\n\\t\\t\\tchildren: [{\\n\\t\\t\\t\\ttype: \\\"text\\\", text: text\\n\\t\\t\\t}]\\n\\t\\t}];\\n\\t} else if (checkAlias && link === \\\"?\\\") {\\n\\t\\tvar results = $tw.wiki.search(text,{caseSensitive:false, field: \\\"title\\\", invert:false, literal:true});\\n\\t\\treturn [{\\n\\t\\t\\ttype: \\\"link\\\",\\n\\t\\t\\tattributes: {\\n\\t\\t\\t\\tto: {type: \\\"string\\\", value: (results[0]) ? results[0] : text}\\n\\t\\t\\t},\\n\\t\\t\\tchildren: [{\\n\\t\\t\\t\\ttype: \\\"text\\\", text: text\\n\\t\\t\\t}]\\n\\t\\t}];\\n\\t} else if(checkAlias) {\\n\\t\\tvar field = \\\"X\\\"; // field names are alwayse lowercase!\\n\\n\\t\\tif(link === \\\"c\\\") {\\n\\t\\t\\tfield = \\\"caption\\\"\\n\\t\\t} else if(link === \\\"s\\\") {\\n\\t\\t\\tfield = \\\"subtitle\\\"\\n\\t\\t} else if(link === \\\"t\\\") {\\n\\t\\t\\tfield = \\\"title\\\"\\n\\t\\t} else if (text != link) {\\n\\t\\t\\tfield = link;\\n\\t\\t}\\n\\n\\t\\treturn [{\\n\\t\\t\\ttype: \\\"macrocall\\\",\\n\\t\\t\\tname: \\\"aka\\\",\\n\\t\\t\\tparams: [\\n\\t\\t\\t\\t{name: \\\"target\\\", value: text},\\n\\t\\t\\t\\t{name: \\\"field\\\", value: field},\\n\\t\\t\\t\\t]\\n\\t\\t\\t}\\n\\t\\t];\\n\\t} else if((text === link) && useUniLink) {\\n\\t\\t// Since V 1.1.0 new link-backlink detection implemented\\n\\t\\t// Overwrites the core $tw.wiki.getTiddlerLinks() method with own version\\n\\t\\treturn [{\\n\\t\\t\\ttype: \\\"macrocall\\\",\\n\\t\\t\\tname: \\\"uni-link\\\",\\n\\t\\t\\tparams: [\\n\\t\\t\\t\\t{name: \\\"tid\\\", value: text}\\n\\t\\t\\t\\t]\\n\\t\\t\\t}\\n\\t\\t];\\n\\t} else {\\n\\t\\treturn [{\\n\\t\\t\\ttype: \\\"link\\\",\\n\\t\\t\\tattributes: {\\n\\t\\t\\t\\tto: {type: \\\"string\\\", value: link}\\n\\t\\t\\t},\\n\\t\\t\\tchildren: [{\\n\\t\\t\\t\\ttype: \\\"text\\\", text: text\\n\\t\\t\\t}]\\n\\t\\t}];\\n\\t}\\n};\\n\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"wikirule\"},\"$:/plugins/wikilabs/unilink/styles\":{\"title\":\"$:/plugins/wikilabs/unilink/styles\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\".wltc-15-gap {\\n\\tmargin-left: 1.5em;\\n}\\n\\n.wltc-muted-forground {\\n\\tcolor: #ffffff;\\n}\\n\\n.wltc-options-button svg {\\n\\tfill: #ccc;\\n\\twidth: 1.3em;\\n\\tfloat: right;\\n\\tmargin-top: -7px;\\n}\\n\\n.wltc-full-width {\\n\\twidth: 100%;\\n}\"},\"$:/core/images/aliasify\":{\"title\":\"$:/core/images/aliasify\",\"created\":\"20180909082646243\",\"modified\":\"20180909091537847\",\"tags\":\"$:/tags/Image\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<svg class=\\\"tc-linkify-button tc-image-button\\\" width=\\\"22pt\\\" height=\\\"22pt\\\" viewBox=\\\"0 0 128 128\\\">\\n<path d=\\\"m17.031 31.919h-7.983v64.931h7.983v6.92h-17.031v-78.77h17.031zm24.66 0h-7.983v64.931h7.983v6.92h-17.031v-78.77h17.03v6.919zm44.619 64.931h7.982v-64.93h-7.982v-6.92h17.031v78.77h-17.031zm24.659 0h7.983v-64.93h-7.983v-6.92h17.031v78.77h-17.031z\\\" fill-rule=\\\"evenodd\\\"/>\\n <path d=\\\"m45.188 34.74v62.668h7.3507c-0.02998-28.03 0.06401-32 0.04791-62.668zm28.464 2.6834c-2.6133 0-5.1484 0.36297-7.6094 1.0734-2.4357 0.7104-4.8412 1.7835-7.2261 3.2297v7.159c2.461-1.6999 4.8147-2.9934 7.0728-3.8814 2.2834-0.88801 4.4263-1.3321 6.4306-1.3321 2.7401 0 4.9348 0.69381 6.584 2.0892 1.6745 1.3954 2.5205 3.2238 2.5205 5.4819 0 1.2432-0.33704 2.4589-0.9967 3.6514-0.63429 1.1925-1.6685 2.46-3.1147 3.8047l-3.431 3.3926c-2.2834 2.182-3.7748 4.0915-4.4852 5.7406-0.71039 1.6491-1.0638 3.7627-1.0638 6.3252v5.8556h7.2644v-4.6768c0-1.3193 0.03891-2.3631 0.115-3.1243 0.07613-0.76115 0.19278-1.4031 0.34501-1.9359 0.20297-0.63429 0.5434-1.2858 1.0255-1.9455 0.50744-0.68504 1.3568-1.6251 2.5493-2.8176l3.3447-3.268c2.2834-2.182 3.888-4.1399 4.8014-5.8652 0.91338-1.7506 1.3705-3.592 1.3705-5.5202 0-4.0341-1.4231-7.276-4.2647-9.737-2.8162-2.461-6.5637-3.6993-11.232-3.6993zm-5.5489 48.187v9.6604h7.7244v-9.6604z\\\" fill-rule=\\\"evenodd\\\" stroke-width=\\\"1.1245\\\"/>\\n</svg>\\n\"},\"$:/core/ui/EditorToolbar/aliasify\":{\"title\":\"$:/core/ui/EditorToolbar/aliasify\",\"caption\":\"{{$:/language/Buttons/Aliasify/Caption}}\",\"condition\":\"[<targetTiddler>!has[type]] [<targetTiddler>type[text/vnd.tiddlywiki]]\",\"created\":\"20180909082308073\",\"description\":\"{{$:/language/Buttons/Aliasify/Hint}}\",\"icon\":\"$:/core/images/aliasify\",\"list-before\":\"$:/core/ui/EditorToolbar/mono-block\",\"modified\":\"20180909091537847\",\"shortcuts\":\"((aliasify))\",\"tags\":\"$:/tags/EditorToolbar\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$action-sendmessage\\n\\t$message=\\\"tm-edit-text-operation\\\"\\n\\t$param=\\\"wrap-selection\\\"\\n\\tprefix=\\\"[[\\\"\\n\\tsuffix=\\\"|?]]\\\"\\n/>\\n\"},\"$:/core/ui/TiddlerInfo/References\":{\"title\":\"$:/core/ui/TiddlerInfo/References\",\"caption\":\"{{$:/language/TiddlerInfo/References/Caption}}\",\"tags\":\"$:/tags/TiddlerInfo\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\function f.tid() [<currentTiddler>split[||]trim[]first[]]\\n\\\\function f.alias() [<currentTiddler>split[||]last[]]\\n\\n\\\\define lingo-base() $:/language/TiddlerInfo/\\n<$list filter=\\\"[all[current]backlinks[]sort[title]]\\\" emptyMessage=<<lingo References/Empty>> template=\\\"$:/core/ui/ListItemTemplate\\\"></$list>\\n<hr>\\n\\n''Alias backlinks from tiddlers:''\\n\\n<$list filter=\\\"[all[current]aliasbacklinks:augmented[]sort[]]\\\"><$link to=<<f.tid>>/> - <<f.alias>><br></$list>\\n\\n<!-- <$list filter=\\\"[all[current]aliasbacklinks[]sort[title]]\\\" emptyMessage=\\\"No alias links to this one\\\" template=\\\"$:/core/ui/ListItemTemplate\\\"></$list> -->\\n\"},\"$:/plugins/wikilabs/uni-link/ui/ControlPanel/settings\":{\"title\":\"$:/plugins/wikilabs/uni-link/ui/ControlPanel/settings\",\"caption\":\"uni-link\",\"created\":\"20171205224905238\",\"modified\":\"20171205230149750\",\"tags\":\"$:/tags/ControlPanel\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"!! [[Enable Aliases Footer|$:/plugins/wikilabs/uni-link/aka-footer]]\\n\\n<<<\\n<$checkbox tiddler=\\\"$:/plugins/wikilabs/uni-link/aka-footer\\\" tag=\\\"$:/tags/ViewTemplate\\\"> Enable Aliases Footer</$checkbox>\\n<<<\\n\\n!! [[Uni-link - Default field|$:/config/wikilabs/uni-link/field]]\\n\\nUse the following field as link text, if available: \\n\\n<<<\\n<$tiddler tiddler=\\\"$:/config/wikilabs/uni-link/field\\\">\\n<$radio value=\\\"caption\\\"> caption</$radio><br>\\n<$radio value=\\\"subtitle\\\"> subtitle</$radio><br>\\n<$radio value=\\\"\\\"> title</$radio><br>\\n</$tiddler>\\n<<<\\n\\n!! Additional Info\\n\\nSee: [[$:/plugins/wikilabs/uni-link/readme]]\\n\"},\"$:/plugins/wikilabs/uni-link/ui/EditorToolbar/alias-dropdown\":{\"title\":\"$:/plugins/wikilabs/uni-link/ui/EditorToolbar/alias-dropdown\",\"created\":\"20190210145516221\",\"modified\":\"20190210194738308\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define lingo-base() $:/language/Buttons/Link/\\n\\n\\\\define add-link-actions()\\n<$action-sendmessage $message=\\\"tm-edit-text-operation\\\" $param=\\\"make-alias-link\\\" text={{$(linkTiddler)$}} />\\n<$action-deletetiddler $tiddler=<<dropdown-state>> />\\n<$action-deletetiddler $tiddler=<<searchTiddler>> />\\n<$action-deletetiddler $tiddler=<<linkTiddler>> />\\n\\\\end\\n\\n\\\\define external-link()\\n<$button class=\\\"tc-btn-invisible\\\" style=\\\"width:auto; display:inline-block; background:none; padding:0;\\\" actions=<<add-link-actions>>>\\n{{$:/core/images/chevron-right}}\\n</$button>\\n\\\\end\\n\\n\\\\define body(config-title)\\n\\\\whitespace trim\\n''<<lingo Hint>>''<br><br>\\n<$vars searchTiddler=\\\"\\\"\\\"$config-title$/search\\\"\\\"\\\" linkTiddler=\\\"\\\"\\\"$config-title$/link\\\"\\\"\\\" linktext=\\\"\\\" >\\n\\t<$vars linkTiddler=<<searchTiddler>>>\\n\\t\\t<$keyboard key=\\\"ENTER\\\" actions=<<add-link-actions>>>\\n\\t\\t\\t<$edit-text tiddler=<<searchTiddler>> type=\\\"search\\\" tag=\\\"input\\\" focus=\\\"true\\\" placeholder={{$:/language/Search/Search}} default=\\\"\\\"/>\\n\\t\\t\\t<$reveal tag=\\\"span\\\" state=<<searchTiddler>> type=\\\"nomatch\\\" text=\\\"\\\">\\n\\t\\t\\t\\t<<external-link>>\\n\\t\\t\\t\\t<$button class=\\\"tc-btn-invisible\\\" style=\\\"width:auto; display:inline-block; background:none; padding:0;\\\">\\n\\t\\t\\t\\t\\t<$action-setfield $tiddler=<<searchTiddler>> text=\\\"\\\" />\\n\\t\\t\\t\\t\\t{{$:/core/images/close-button}}\\n\\t\\t\\t\\t</$button>\\n\\t\\t\\t</$reveal>\\n\\t\\t</$keyboard>\\n\\t</$vars>\\n\\t<$reveal tag=\\\"div\\\" state=<<searchTiddler>> type=\\\"nomatch\\\" text=\\\"\\\">\\n\\t\\t<$linkcatcher actions=<<add-link-actions>> to=<<linkTiddler>>>\\n\\t\\t\\t{{$:/plugins/wikilabs/uni-link/ui/EditorToolbar/SearchResults}}\\n\\t\\t</$linkcatcher>\\n\\t</$reveal>\\n</$vars>\\n\\\\end\\n\\n<$macrocall $name=\\\"body\\\" config-title=<<qualify \\\"$:/state/Link/\\\">>/>\"},\"$:/plugins/wikilabs/uni-link/ui/EditorToolbar/alias\":{\"title\":\"$:/plugins/wikilabs/uni-link/ui/EditorToolbar/alias\",\"button-classes\":\"tc-text-editor-toolbar-item-start-group\",\"caption\":\"{{$:/language/Buttons/Make/Alias/Caption}}\",\"condition\":\"[<targetTiddler>!has[type]] [<targetTiddler>type[text/vnd.tiddlywiki]]\",\"created\":\"20190210145538580\",\"description\":\"{{$:/language/Buttons/Make/Alias/Hint}}\",\"dropdown\":\"$:/plugins/wikilabs/uni-link/ui/EditorToolbar/alias-dropdown\",\"icon\":\"$:/core/images/link\",\"modified\":\"20190210194833231\",\"shortcuts\":\"((alias-link))\",\"tags\":\"$:/tags/EditorToolbar\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\"},\"$:/plugins/wikilabs/uni-link/ui/EditorToolbar/SearchResults\":{\"title\":\"$:/plugins/wikilabs/uni-link/ui/EditorToolbar/SearchResults\",\"created\":\"20190210164849276\",\"modified\":\"20190210194648558\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\whitespace trim\\n\\n<div class=\\\"tc-search-results\\\">\\n\\t<$macrocall $name=\\\"tabs\\\"\\n\\t\\ttabsList=\\\"[all[shadows+tiddlers]tag[$:/tags/AliasResults]!has[draft.of]]\\\"\\n\\t\\tdefault=\\\"$:/plugins/wikilabs/uni-link/ui/EditorToolbar/SearchTemplate\\\"\\n\\t/>\\n</div>\"},\"$:/plugins/wikilabs/uni-link/ui/EditorToolbar/SearchTemplate\":{\"title\":\"$:/plugins/wikilabs/uni-link/ui/EditorToolbar/SearchTemplate\",\"caption\":\"Aliases\",\"created\":\"20190210153457679\",\"modified\":\"20190210194716605\",\"tags\":\"$:/tags/AliasResults\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\procedure getRealName()\\nTiddler ->  <$text text={{{ [<alias>aliassource[]] +[join[, ]] }}}/> \\n\\\\end\\n\\n\\\\whitespace trim\\n\\n\\\\function f.getSearchText() [<searchTiddler>get[text]]\\n\\n\\\\procedure searchResultList()\\n<$list filter=\\\"[all[aliases]] +[search<f.getSearchText>] +[sort[title]]\\\" variable=alias>\\n    <div class=\\\"tc-menu-list-item\\\">\\n        <$link to=<<alias>> tooltip=<<getRealName>> ><<alias>></$link>\\n    </div>\\n</$list>\\n\\\\end\\n\\n<<searchResultList>>\"},\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases\":{\"title\":\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases\",\"caption\":\"Aliases\",\"created\":\"20171214213808142\",\"list-before\":\"$:/core/ui/MoreSideBar/Recent\",\"modified\":\"20171214215245931\",\"tags\":\"$:/tags/MoreSideBar\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<div class=\\\"uni-link-sidebar tc-sidebar-lists\\\">\\n<<tabs \\\"[all[shadows+tiddlers]tag[$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases]!has[draft.of]]\\\" \\\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases/byAlias\\\" \\\"$:/state/tab/Aliases\\\" >>\\n</div>\"},\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases/byAlias\":{\"title\":\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases/byAlias\",\"caption\":\"Alias\",\"created\":\"20171214203739053\",\"list-before\":\"$:/core/ui/MoreSideBar/Recent\",\"modified\":\"20171214213743140\",\"tags\":\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\whitespace trim\\n<$list filter=\\\"[all[aliases]sort[title]]\\\" variable=alias>\\n  <div class=\\\"tc-menu-list-item\\\">\\n   <$macrocall $name=\\\"aka\\\" target=<<alias>> />\\n     <div class=\\\"tc-menu-list-subitem\\\">\\n       <$macrocall $name=\\\"aka-no-links\\\" target=<<alias>> />\\n      </div>\\n   </div>\\n</$list>\\n\"},\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases/byTitle\":{\"title\":\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases/byTitle\",\"caption\":\"Title\",\"created\":\"20171214201333460\",\"list-before\":\"$:/core/ui/MoreSideBar/Recent\",\"modified\":\"20171214213745643\",\"tags\":\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\whitespace trim\\n<$list filter=\\\"[has[aliases]sort[title]]\\\">\\n  <div class=\\\"tc-menu-list-item\\\">\\n    <$link to=<<currentTiddler>> ><<currentTiddler>></$link>\\n    <$list filter=\\\"[list[!!aliases]]\\\">\\n      <div class=\\\"tc-menu-list-subitem\\\">\\n        <$view field=title/>\\n      </div>\\n    </$list>\\n  </div>\\n</$list>\\n\"},\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases/undefined\":{\"title\":\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases/undefined\",\"caption\":\"Undefined\",\"created\":\"20180202150804918\",\"list-before\":\"$:/core/ui/MoreSideBar/Recent\",\"modified\":\"20180202151517364\",\"tags\":\"$:/plugins/wikilabs/uni-link/ui/MoreSideBar/Aliases\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\import [[$:/core/ui/TiddlerInfo/References]]\\n\\n<$list filter=\\\"[[?]aliasbacklinks:augmented[]sort[]]\\\"><$link to=<<f.tid>>/> - <<f.alias>><br></$list>\\n\\n---\\n\\nYou'll need to reload the page, to update this list!\\n\"},\"$:/plugins/wikilabs/uni-link/uni-link-macro\":{\"title\":\"$:/plugins/wikilabs/uni-link/uni-link-macro\",\"tags\":\"$:/tags/Macro\",\"code-body\":\"yes\",\"text\":\"\\\\define getClass()\\n<$uni-fields template=\\\"uni-$name$\\\" include=$(field-name)$ sort=\\\"no\\\"/> uni-link\\n\\\\end\\n\\n\\\\define linkText()\\n\\\\whitespace trim\\n<$set name=\\\"tv-wikilinks\\\" value=\\\"no\\\">\\n<span class=<<class>> >\\n  <$transclude field=$(field-name)$ ><$transclude field=title/></$transclude>\\n</span>\\n</$set>\\n\\\\end\\n\\n\\\\define uni-link(tid)\\n\\\\whitespace trim\\n<$tiddler tiddler=\\\"\\\"\\\"$tid$\\\"\\\"\\\">\\n  <$vars field-name={{{[[$:/config/wikilabs/uni-link/field]get[text]]~[[title]]}}} >\\n    <$wikify name=class text=<<getClass>> >\\n      <$link to=\\\"\\\"\\\"$tid$\\\"\\\"\\\" tooltip=\\\"\\\"\\\"uni-link -> $tid$\\\"\\\"\\\"><<linkText>></$link>\\n    </$wikify>\\n  </$vars>\\n</$tiddler>\\n\\\\end\\n\"},\"$:/plugins/wikilabs/uni-link/styles\":{\"title\":\"$:/plugins/wikilabs/uni-link/styles\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\".uni-link {\\n  color: navy;\\n}\\n\\n.uni-caption {\\n  color: #2a699f;\\n}\\n\\n.uni-subtitle {\\n  color: #0e8446;\\n}\\n\\n.uni-alias {\\n  color: #7557d8;\\n}\\n\\n.uni-alias-missing {\\n  color: red;\\n}\\n\\n.uni-link-sidebar .tc-tab-buttons {\\n  padding-top: 0;\\n}\\n\"}}}"}