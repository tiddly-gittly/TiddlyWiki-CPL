{"title":"$:/plugins/oeyoews/neotw-vue-fetch","description":"neotw-vue-fetch","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"neotw-vue-fetch","meat#disabled":"yes","qrcode":"yes","created":"2024-03-10","dependents":"$:/plugins/oeyoews/neotw-vue3","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-vue-fetch/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-fetch/readme\",\"text\":\"<!-- plugin template readme -->\\n\\n## Motivation\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\",\"type\":\"text/markdown\",\"description\":\"neotw-vue-fetch\"},\"$:/plugins/oeyoews/neotw-vue-fetch/component.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-fetch/component.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-fetch/component.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nconst{watch:t,toRaw:e,computed:r,ref:i}=window.Vue,s=t=>{let e=$tw.wiki.getTiddlerText(t).trim();return e.startsWith(\\\"<template>\\\")&&e.endsWith(\\\"</template>\\\")&&(e=e.slice(10,-11)),e};module.exports=t=>({setup:()=>({text:i(\\\"加载中 ...\\\")}),async mounted(){this.text=await this.getText()},methods:{renderText:t=>$tw.wiki.renderText(\\\"text/html\\\",\\\"text/markdown\\\",t),async getText(){try{const e=await fetch(t),r=await e.text();return this.renderText(r)}catch(e){this.text=`${t} 加载出错`,console.error(e)}}},template:s(\\\"$:/plugins/oeyoews/neotw-vue-fetch/widget.vue\\\")});\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-vue-fetch/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-fetch/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-fetch/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-vue-fetch widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports[\\\"neotw-vue-fetch\\\"]=class extends e{constructor(e,t){super(e,t)}render(e,t){if(!$tw.browser)return;if(this.computeAttributes(),this.execute(),this.document.isTiddlyWikiFakeDom)return;const o=\\\"https://raw.githubusercontent.com/oeyoews/neotw/main/README.md\\\",{url:r=o}=this.attributes;window.Vue||(window.Vue=require(\\\"$:/plugins/oeyoews/neotw-vue3/vue.global.prod.js\\\"));const{createApp:s}=window.Vue,n=require(\\\"./component\\\"),i=this.document.createElement(\\\"div\\\");try{const o=s(n(r));o.config.errorHandler=e=>{const t=`[Vue3](${o.version}): `+e;console.error(t),i.textContent=t,i.style.color=\\\"red\\\"},o.mount(i),e.insertBefore(i,t),this.domNodes.push(i)}catch(e){console.error(e)}}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"},\"$:/plugins/oeyoews/neotw-vue-fetch/widget.vue\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-fetch/widget.vue\",\"text\":\"<template>\\n  <div v-html=\\\"text\\\"></div>\\n</template>\\n\",\"type\":\".vue\"}}}"}