{"title":"$:/plugins/oeyoews/spoiler-text","description":"spoiler-text","author":"oeyoews","version":"0.0.3","core-version":">=5.3.4","type":"application/json","plugin-type":"plugin","name":"spoiler-text","meat#disabled":"yes","qrcode":"yes","created":"2025/01/30","stability":"STABILITY_2_STABLE","list":"readme","dependents":"","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/spoiler-text/readme\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/readme\",\"description\":\"spoiler-text\",\"text\":\"[[在线文档|https://neotw.vercel.app/docs/plugins/spoiler-text]]\\n\\n!! Widget Usage\\n\\nThis is a <$s-t text=\\\"Spoiler Text Plugin\\\" />\\n\\n```html\\nThis is a <$s-t text=\\\"Spoiler Text Plugin\\\" />\\nThis is a <$spoiler-text text=\\\"Spoiler Text Plugin\\\" />\\n```\\n\\n!! Web Component Usage\\n\\nThis is a <s-t text=\\\"Spoiler Text Plugin(web Component)\\\" />\\n\\n```html\\nThis is a <s-t text=\\\"Spoiler Text Plugin(web Component)\\\" />\\nThis is a <s-t >Spoiler Text Plugin(web Component)\\\" </s-t>\\nThis is a <spoiler-text >Spoiler Text Plugin(web Component)\\\" </spoiler-text>\\n```\\n\\n!! wikitext parser\\n\\n```html\\n<*Spoiler Text Example*>\\n```\\n\\n!! use transclude\\n\\n```html\\n<$s-t text={{your tiddler}} />\\n```\"},\"$:/plugins/oeyoews/spoiler-text/SpoilerText.js\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/SpoilerText.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/spoiler-text/SpoilerText.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nclass e extends HTMLElement{constructor(){super()}addEventListeners(){this.wrapper.classList.toggle(\\\"revealed\\\")}connectedCallback(){this.attachShadow({mode:\\\"open\\\"});const e=document.createElement(\\\"style\\\");e.textContent=\\\".spoiler{display:inline-block;filter:blur(0.5em);transition: filter 0.1s ease;}.spoiler:hover{cursor:pointer;filter:blur(0.18em);}.spoiler.revealed{filter:blur(0); }\\\",this.wrapper=document.createElement(\\\"span\\\"),this.wrapper.classList.add(\\\"spoiler\\\"),this.shadowRoot.append(e,this.wrapper);const t=this.getAttribute(\\\"text\\\")?.length>0&&![\\\"true\\\",\\\"false\\\"].includes(this.getAttribute(\\\"text\\\"))?this.getAttribute(\\\"text\\\"):\\\"<slot></slot>\\\";this.wrapper.innerHTML=$tw.wiki.renderText(\\\"text/html\\\",\\\"text/vnd.tiddlywiki\\\",t,{parseAsInline:!0}),this.wrapper.addEventListener(\\\"click\\\",(()=>{this.addEventListeners()}))}disconnectedCallback(){this.wrapper.removeEventListener(\\\"click\\\",(()=>{this.addEventListeners()}))}}module.exports={SpoilerText:e,ST:class extends e{}};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/spoiler-text/rules/SpoilerText.js\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/rules/SpoilerText.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/spoiler-text/rules/SpoilerText.js\\ntype: application/javascript\\nmodule-type: wikirule\\n\\n|*spoiler text*|\\n\\nbased on https://github.com/TiddlyWiki/TiddlyWiki5/blob/master/core/modules/parsers/wikiparser/rules/prettylink.js\\n\\\\*/\\n!function(){\\\"use strict\\\";exports.name=\\\"spoiler\\\",exports.types={inline:!0},exports.init=function(t){this.parser=t,this.matchRegExp=/\\\\<\\\\*(.*?)\\\\*\\\\>/gm},exports.parse=function(){var t=this.parser.pos+2;this.parser.pos=this.matchRegExp.lastIndex;var e=this.match[1],s=this.match[2]||e,h=this.parser.source.indexOf(\\\"<\\\",t);(h<0||h>this.matchRegExp.lastIndex)&&(h=this.matchRegExp.lastIndex-2);var i=this.match[2]?t+this.match[1].length+1:t;return[{type:\\\"element\\\",tag:\\\"s-t\\\",children:[{type:\\\"text\\\",text:e,start:i,end:i+s.length}]}]}}();\",\"type\":\"application/javascript\",\"module-type\":\"wikirule\"},\"$:/plugins/oeyoews/spoiler-text/startup.js\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/startup.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/spoiler-text/startup.js\\ntype: application/javascript\\nmodule-type: startup\\n\\n\\\\*/\\nexports.platforms=[\\\"browser\\\"],exports.synchronous=!0,exports.startup=function(){const{SpoilerText:e,ST:t}=require(\\\"./SpoilerText\\\"),o={\\\"spoiler-text\\\":e,\\\"s-t\\\":t};Object.keys(o).forEach((e=>customElements.define(e,o[e])))};\",\"type\":\"application/javascript\",\"module-type\":\"startup\"},\"$:/plugins/oeyoews/spoiler-text/style.css\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/style.css\",\"tags\":\"$:/tags/Stylesheet\",\"type\":\"text/css\",\"text\":\".spoiler {\\n  filter: blur(0.5em);\\n  transition: filter 0.1s ease;\\n}\\n.spoiler:hover {\\n  filter: blur(0.18em);\\n  cursor: pointer;\\n}\\n.spoiler.revealed {\\n  filter: blur(0);\\n}\\n\"},\"$:/plugins/oeyoews/spoiler-text/widget.js\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/spoiler-text/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nspoiler-text widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");class t extends e{constructor(e,t){super(e,t)}render(e,t){if(!$tw.browser)return;if(this.computeAttributes(),this.execute(),this.document.isTiddlyWikiFakeDom)return;const s=(0,$tw.utils.domMaker)(\\\"span\\\");s.innerHTML=$tw.wiki.renderText(\\\"text/html\\\",\\\"text/vnd.tiddlywiki\\\",this.getAttribute(\\\"text\\\"),{parseAsInline:!0}),s.classList.add(\\\"spoiler\\\"),e.insertBefore(s,t),this.domNodes.push(s),s.addEventListener(\\\"click\\\",(()=>{s.classList.toggle(\\\"revealed\\\")}))}}exports[\\\"spoiler-text\\\"]=t,exports[\\\"s-t\\\"]=t;\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}