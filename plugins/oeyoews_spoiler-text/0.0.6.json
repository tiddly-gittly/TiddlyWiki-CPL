{"title":"$:/plugins/oeyoews/spoiler-text","description":"spoiler-text","author":"oeyoews","version":"0.0.6","core-version":">=5.3.4","type":"application/json","plugin-type":"plugin","name":"spoiler-text","meat#disabled":"yes","qrcode":"yes","created":"2025/01/30","stability":"STABILITY_2_STABLE","list":"readme","dependents":"","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/spoiler-text/readme\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/readme\",\"description\":\"spoiler-text\",\"text\":\"[[在线文档|https://neotw.vercel.app/docs/plugins/spoiler-text]]\\n\\n!! Widget Usage\\n\\nThis is a <$s-t text=\\\"Spoiler Text Plugin\\\" />\\n\\n```html\\nThis is a <$s-t text=\\\"Spoiler Text Plugin\\\" />\\nThis is a <$spoiler-text text=\\\"Spoiler Text Plugin\\\" />\\n```\\n\\n!! Web Component Usage\\n\\nThis is a <s-t text=\\\"Spoiler Text Plugin(web Component)\\\" />\\n\\n```html\\nThis is a <s-t text=\\\"Spoiler Text Plugin(web Component)\\\" />\\nThis is a <s-t >Spoiler Text Plugin(web Component)\\\" </s-t>\\nThis is a <spoiler-text >Spoiler Text Plugin(web Component)\\\" </spoiler-text>\\n```\\n\\n!! wikitext parser\\n\\n```html\\n<*Spoiler Text Example*>\\n```\\n\\n!! use transclude(beta)\\n\\n> need doucle click insteadof click\\n\\n```html\\n<$s-t tiddler={{your tiddler}} />\\n```\"},\"$:/core/ui/EditorToolbar/spoiler\":{\"title\":\"$:/core/ui/EditorToolbar/spoiler\",\"tags\":\"$:/tags/EditorToolbar\",\"description\":\"{{$:/plugins/oeyoews/spoiler-text/readme!!description}}\",\"caption\":\"Spoiler\",\"condition\":\"[<targetTiddler>!has[type]] [<targetTiddler>type[text/vnd.tiddlywiki]] [<targetTiddler>type[text/markdown]]\",\"icon\":\"$:/plugins/oeyoews/spoiler-text/icon\",\"list-before\":\"$:/core/ui/EditorToolbar/mono-block\",\"shortcuts\":\"((spoiler))\",\"text\":\"<$action-sendmessage\\n\\t$message=\\\"tm-edit-text-operation\\\"\\n\\t$param=\\\"wrap-selection\\\"\\n\\tprefix=\\\"<s-t>\\\"\\n\\tsuffix=\\\"</s-t>\\\"\\n/>\\n\"},\"$:/plugins/oeyoews/spoiler-text/SpoilerText.js\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/SpoilerText.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/spoiler-text/SpoilerText.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nclass e extends HTMLElement{constructor(){super(),\\n/** @type {'click' | 'dblclick'} */\\nthis.listenerType=\\\"click\\\"}addEventListeners(){this.wrapper.classList.toggle(\\\"revealed\\\")}connectedCallback(){this.attachShadow({mode:\\\"open\\\"});const e=document.createElement(\\\"style\\\");e.textContent=\\\".spoiler{display:inline-block;filter:blur(0.5em);transition: filter 0.1s ease;user-select:none;cursor:pointer;}.spoiler:hover{filter:blur(0.18em);}.spoiler.revealed{filter:blur(0); user-select:auto;cursor:auto;}\\\",this.wrapper=document.createElement(\\\"span\\\"),this.wrapper.classList.add(\\\"spoiler\\\"),this.shadowRoot.append(e,this.wrapper);const t=this.getAttribute(\\\"text\\\")?.length>0&&![\\\"true\\\",\\\"false\\\"].includes(this.getAttribute(\\\"text\\\"))?this.getAttribute(\\\"text\\\"):\\\"<slot></slot>\\\";this.getAttribute(\\\"tiddler\\\")?(this.wrapper.innerHTML=$tw.wiki.renderTiddler(\\\"text/html\\\",this.getAttribute(\\\"tiddler\\\"),{parseAsInline:!0}),this.listenerType=\\\"dblclick\\\"):this.wrapper.innerHTML=t,this.wrapper.addEventListener(this.listenerType,(()=>{this.addEventListeners()}))}disconnectedCallback(){this.wrapper.removeEventListener(this.listenerType,(()=>{this.addEventListeners()}))}}module.exports={SpoilerText:e,ST:class extends e{}};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/spoiler-text/icon\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/icon\",\"text\":\"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M1 12C1 12 5 5 12 5C19 5 23 12 23 12C23 12 19 19 12 19C5 19 1 12 1 12Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/>\\n  <line x1=\\\"4\\\" y1=\\\"4\\\" x2=\\\"20\\\" y2=\\\"20\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/>\\n</svg>\\n\"},\"$:/snippets/oeyoews/spoiler-text/st\":{\"title\":\"$:/snippets/oeyoews/spoiler-text/st\",\"description\":\"Spoiler Text\",\"text\":\"<s-t>${1}</s-t>\"},\"$:/plugins/oeyoews/spoiler-text/rules/SpoilerText.js\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/rules/SpoilerText.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/spoiler-text/rules/SpoilerText.js\\ntype: application/javascript\\nmodule-type: wikirule\\n\\n|*spoiler text*|\\n\\nbased on https://github.com/TiddlyWiki/TiddlyWiki5/blob/master/core/modules/parsers/wikiparser/rules/prettylink.js\\n\\\\*/\\n!function(){\\\"use strict\\\";exports.name=\\\"spoiler\\\",exports.types={inline:!0},exports.init=function(t){this.parser=t,this.matchRegExp=/\\\\<\\\\*(.*?)\\\\*\\\\>/gm},exports.parse=function(){var t=this.parser.pos+2;this.parser.pos=this.matchRegExp.lastIndex;var e=this.match[1],s=this.match[2]||e,h=this.parser.source.indexOf(\\\"<\\\",t);(h<0||h>this.matchRegExp.lastIndex)&&(h=this.matchRegExp.lastIndex-2);var i=this.match[2]?t+this.match[1].length+1:t;return[{type:\\\"element\\\",tag:\\\"s-t\\\",children:[{type:\\\"text\\\",text:e,start:i,end:i+s.length}]}]}}();\",\"type\":\"application/javascript\",\"module-type\":\"wikirule\"},\"$:/plugins/oeyoews/spoiler-text/startup.js\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/startup.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/spoiler-text/startup.js\\ntype: application/javascript\\nmodule-type: startup\\n\\n\\\\*/\\nexports.platforms=[\\\"browser\\\"],exports.synchronous=!0,exports.startup=function(){const{SpoilerText:e,ST:t}=require(\\\"./SpoilerText\\\"),o={\\\"spoiler-text\\\":e,\\\"s-t\\\":t};Object.keys(o).forEach((e=>customElements.define(e,o[e])))};\",\"type\":\"application/javascript\",\"module-type\":\"startup\"},\"$:/plugins/oeyoews/spoiler-text/style.css\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/style.css\",\"tags\":\"$:/tags/Stylesheet\",\"type\":\"text/css\",\"text\":\".spoiler{display:inline-block;filter:blur(0.5em);transition: filter 0.1s ease;user-select:none;cursor:pointer;}.spoiler:hover{filter:blur(0.18em);}.spoiler.revealed{filter:blur(0); user-select:auto;cursor:auto;}\"},\"$:/plugins/oeyoews/spoiler-text/widget.js\":{\"title\":\"$:/plugins/oeyoews/spoiler-text/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/spoiler-text/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nspoiler-text widget\\n\\n\\\\*/\\nconst{widget:t}=require(\\\"$:/core/modules/widgets/widget.js\\\");class e extends t{constructor(t,e){super(t,e)}render(t,e){if(!$tw.browser)return;this.computeAttributes(),this.execute();\\n/** @type {'click' | 'dblclick'} */\\nlet s=\\\"click\\\";if(this.document.isTiddlyWikiFakeDom)return;const i=(0,$tw.utils.domMaker)(\\\"span\\\");this.hasAttribute(\\\"tiddler\\\")?(s=\\\"dblclick\\\",i.innerHTML=$tw.wiki.renderTiddler(\\\"text/html\\\",this.getAttribute(\\\"tiddler\\\"),{parseAsInline:!0})):i.innerHTML=this.getAttribute(\\\"text\\\"),i.classList.add(\\\"spoiler\\\"),t.insertBefore(i,e),this.domNodes.push(i),i.addEventListener(s,(()=>{i.classList.toggle(\\\"revealed\\\")}))}}exports[\\\"spoiler-text\\\"]=e,exports[\\\"s-t\\\"]=e;\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}