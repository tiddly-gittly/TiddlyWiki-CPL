{"title":"$:/plugins/wikilabs/trails","name":"Trails","description":"Show a breadcrumbs trail to visualize the context","author":"Mario Pietsch","core-version":">=5.2.0","version":"0.9.0","icon":"$:/plugins/wikilabs/trails/icon","list":"readme config license history","plugin-type":"plugin","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/wikilabs/trails/breadcrumbs-macro\":{\"title\":\"$:/plugins/wikilabs/trails/breadcrumbs-macro\",\"tags\":\"$:/tags/Macro\",\"code-body\":\"yes\",\"text\":\"\\\\define breadcrumbs(start, stop, exclude, label, field:\\\"parent\\\" mode:\\\"story\\\")\\n<$macrocall\\n\\t$name=\\\"trail\\\" start=<<__start__>> stop=<<__stop__>>\\n\\texclude=<<__exclude__>> label=<<__label__>> field=<<__field__>> mode=<<__mode__>>\\n/>\\n\\\\end\\n\"},\"$:/config/wl/trails/filterMode\":{\"title\":\"$:/config/wl/trails/filterMode\",\"created\":\"20230405155139328\",\"modified\":\"20230415112737614\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"story\"},\"$:/config/wl/trails/fontSize\":{\"title\":\"$:/config/wl/trails/fontSize\",\"created\":\"20230405153335572\",\"modified\":\"20230405153359920\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"15\"},\"$:/config/wl/trails/height\":{\"title\":\"$:/config/wl/trails/height\",\"created\":\"20230405153335572\",\"modified\":\"20230405153359920\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"22\"},\"$:/config/wl/trails/paddingBottom\":{\"title\":\"$:/config/wl/trails/paddingBottom\",\"created\":\"20230405153404714\",\"modified\":\"20230405153410088\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"4\"},\"$:/config/wl/trails/paddingTop\":{\"title\":\"$:/config/wl/trails/paddingTop\",\"created\":\"20230405153411402\",\"modified\":\"20230405153422513\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"3\"},\"$:/config/wl/trails/showArrows\":{\"title\":\"$:/config/wl/trails/showArrows\",\"created\":\"20230405155139328\",\"modified\":\"20230405155734969\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"yes\"},\"Breadcrumbs\":{\"title\":\"Breadcrumbs\",\"created\":\"20230408132900014\",\"modified\":\"20230408133628079\",\"tags\":\"Definitions\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\">A breadcrumb or breadcrumb trail is a graphical control element used as a navigational aid in user interfaces and on web pages. It allows users to keep track and maintain awareness of their locations within programs, documents, or websites. The term is a reference to the trail of bread crumbs left by Hansel and Gretel in the German fairy tale of the same name.\\n>\\n> https://en.wikipedia.org/wiki/Breadcrumb_navigation\"},\"Trail\":{\"title\":\"Trail\",\"created\":\"20230408132900014\",\"modified\":\"20230408133628079\",\"tags\":\"Definitions\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\">As in path\\n>A rough course or way formed by or as if by repeated footsteps\\n>\\n> https://www.merriam-webster.com/thesaurus/trail\\n\\n>A trail, also known as a path or track, is an unpaved lane or a small paved road not intended for usage by motorized vehicles, usually passing through a natural area. [. . .]\\n>\\n>https://en.wikipedia.org/wiki/Trail\"},\"$:/plugins/wikilabs/trails/config\":{\"title\":\"$:/plugins/wikilabs/trails/config\",\"trail\":\"aa bb cc dd ee ff\",\"text\":\"\\\\procedure reset(fragment)\\n<$let configTiddler=`$:/config/wl/trails/$(fragment)$`>\\n<$button \\n\\ttooltip=\\\"Reset\\\"\\n\\tclass=\\\"tc-btn-invisible\\\"\\n\\tmessage=\\\"tm-delete-tiddler\\\"\\n\\tparam=<<configTiddler>>\\n\\tdisabled={{{ [<configTiddler>is[tiddler]then[no]else[yes]] }}}\\n>\\n\\t{{$:/core/images/delete-button}}\\n</$button>\\n\\\\end\\n\\n<$tiddler tiddler=\\\"$:/plugins/wikilabs/trails/config\\\">\\n\\n<<tag test>>\\n\\n<$macrocall $name=\\\"trail\\\" mode=\\\"field\\\" field=\\\"trail\\\" />\\n\\n```\\n<$macrocall $name=\\\"trail\\\" mode=\\\"field\\\" field=\\\"trail\\\" />\\n```\\n\\n|[[Arrow Height|$:/config/wl/trails/height]] |<$edit-text tiddler=\\\"$:/config/wl/trails/height\\\" tag=input /> |px| <<reset \\\"height\\\">> |\\n|theme default tiddler body fontSize in ''px'': |{{$:/themes/tiddlywiki/vanilla/metrics/bodyfontsize}}|||\\n|[[Font Size|$:/config/wl/trails/fontSize]] |<$edit-text tiddler=\\\"$:/config/wl/trails/fontSize\\\" tag=input /> |px| <<reset \\\"fontSize\\\">> |\\n|[[Padding Top|$:/config/wl/trails/paddingTop]] |<$edit-text tiddler=\\\"$:/config/wl/trails/paddingTop\\\" tag=input /> |px| <<reset \\\"paddingTop\\\">> |\\n|[[Padding Bottom|$:/config/wl/trails/paddingBottom]] |<$edit-text tiddler=\\\"$:/config/wl/trails/paddingBottom\\\" tag=input /> |px| <<reset \\\"paddingBottom\\\">> |\\n|<$checkbox tiddler=\\\"$:/config/wl/trails/showArrows\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"yes\\\"> Show</$checkbox> [[Arrows|$:/config/wl/trails/showArrows]] |{{$:/config/wl/trails/showArrows}} ||<<reset \\\"showArrows\\\">>|\\n\\n---\\n\\n```\\n<$macrocall $name=\\\"trail\\\" mode=\\\"field\\\" field=\\\"trail\\\" label=\\\"test: \\\"/>\\n```\\n\\nSome text in front of the trails nav.\\n\\n<$macrocall $name=\\\"trail\\\" mode=\\\"field\\\" field=\\\"trail\\\" label=\\\"test: \\\"/>\\n\\n</$tiddler>\\n\"},\"$:/plugins/wikilabs/trails/history\":{\"title\":\"$:/plugins/wikilabs/trails/history\",\"text\":\"V 0.9.0 - 2023-07-17\\n\\n* Initial release\\n\"},\"$:/plugins/wikilabs/trails/icon\":{\"title\":\"$:/plugins/wikilabs/trails/icon\",\"text\":\"<svg width=\\\"22pt\\\" height=\\\"22pt\\\" viewBox=\\\"0 0 128 128\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path transform=\\\"scale(4.36)\\\" d=\\\"M18.6 0 4.1 7.33.17 22.03l10.5 7.33 14.5-7.33 3.93-14.7L18.6 0zM3.7 11.5h19.25l3.49 3.48-3.49 3.53H3.66V11.5zm18.8 1.18-8.85.004 2.3 2.3-2.28 2.28h8.83l2.22-2.28-2.22-2.3zm-17.7.008.006 4.58h6.18v-.006h1.01l.004-.006 2.26-2.27-2.29-2.3H4.8zm1.38 1.72h5.53a.5.5 0 0 1 0 1H6.18a.5.5 0 0 1 0-1zm11.3 0h4.87c.243 0 .442.224.442.5s-.199.5-.442.5h-4.87c-.243 0-.442-.224-.442-.5s.199-.5.442-.5z\\\" /></svg>\\n\"},\"$:/plugins/wikilabs/trails/license\":{\"title\":\"$:/plugins/wikilabs/trails/license\",\"license-text\":\"https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode\",\"text\":\"[[Trails Navigation|https://wikilabs.github.io/#trails]] (c) Mario Pietsch - 2023-2024\\n\\n[[Creative Commons Attribution-NonCommercial-ShareAlike|https://creativecommons.org/licenses/by-nc-sa/4.0/]]\\n\"},\"$:/plugins/wikilabs/trails/readme\":{\"title\":\"$:/plugins/wikilabs/trails/readme\",\"text\":\"This plugin allows you to use 3 different responsive trail configurations\\n\\n!! trail CSS Options\\n\\nIf the user changes the global font-size and / or line-height in the theme to higher values, it will be needed to adjust the breadcrumb settings accordingly. The following parameters can be used to dynamically calculate the \\\"arrow shape\\\". For small screens the graphical arrow shape is replaced by plain text.\\n\\n* $:/config/wl/trails/height ... Defines the line-height used for the trail arrow elements. Defaults to: 22\\n* $:/config/wl/trails/fontSize ... Defines the default CSS font-size setting. Defaults to: 15\\n* $:/config/wl/trails/paddingBottom ... Can be used to increase the bottom padding of the arrows. Defaults to: 3\\n* $:/config/wl/trails/paddingTop ... Can be used to change the top padding of the arrows. Defaults to: 3\\n* $:/config/wl/trails/showArrows ... If set to \\\"yes\\\" the trail \\\"arrows\\\" are shown. Any other value shows the \\\"plain text\\\" version, independent of the screen width. Defaults to: yes\\n\\n!! Global Mode Setting\\n\\n    $:/config/wl/trails/filterMode ... defines the default \\\"mode\\\" the trail macro uses for the \\\"filter syntax\\\" related documentation \\n\\n!! Usage\\n\\n```\\n<$macrocall $name=\\\"trail\\\" stop=\\\"Filters\\\" mode={{$:/config/wl/trails/filterMode}}/>\\n```\\n\\n!! Settings\\n\\n{{$:/plugins/wikilabs/trails/config}}\\n\\n\\n!! Important\\n\\n''This plugin modifies a core module and templates''\\n\\n<ul><$list filter=\\\"[[$:/plugins/wikilabs/trail]plugintiddlers[]prefix[$:/core/]]\\\" emptyMessage=\\\"none\\\"><li><$link to=<<currentTiddler>>><<currentTiddler>><br></$link></li></$list></ul>\"},\"$:/plugins/wikilabs/trails/trail-css\":{\"title\":\"$:/plugins/wikilabs/trails/trail-css\",\"created\":\"20230403125904563\",\"modified\":\"20230405155836540\",\"tags\":\"$:/tags/Stylesheet\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\import [[$:/themes/tiddlywiki/vanilla/base]]\\n\\n<$let\\n\\tHEIGHT=22\\n\\ttrHeight={{{ [[$:/config/wl/trails/height]get[text]trim[]] :else[<HEIGHT>] }}}\\n\\n\\tthemeFontSize={{{ [{$:/themes/tiddlywiki/vanilla/metrics/bodyfontsize}trim[]removesuffix[px]] }}}\\n\\ttrFontSize={{{ [[$:/config/wl/trails/fontSize]get[text]trim[]] :else[<themeFontSize>] }}}\\n\\n\\tlineHeight={{{ [<trFontSize>subtract<themeFontSize>divide[4]negate[]add<trHeight>] :else[<trHeight>] }}}\\n\\n\\ttrPaddingLeft={{{ [<trHeight>subtract<HEIGHT>divide[2]add[18]] }}}\\n\\n\\ttrPaddingTop={{{    [[$:/config/wl/trails/paddingTop]get[text]trim[]] :else[[3]] }}}\\n\\ttrPaddingBottom={{{ [[$:/config/wl/trails/paddingBottom]get[text]trim[]] :else[[3]] }}}\\n\\n\\ttrShowArrows={{{ [[$:/config/wl/trails/showArrows]get[text]trim[]] :else[[yes]] }}}\\n>\\n\\n.wltc-trail ol {\\n\\tpadding-left: 0;\\n\\tlist-style-type: none;\\n}\\n\\n.wltc-trail .wltc-crumb-first::after,\\n.wltc-trail .wltc-crumb::after {\\n\\tcontent: \\\"❯\\\";\\t\\t<!-- needed for FireFox and screen-readers -->\\n\\tcontent: \\\"❯\\\" / \\\"\\\";\\t<!-- needed for Chrome-like and screen-readers -->\\n\\tposition: absolute;\\n\\tpadding-left: .2em;\\n\\tcolor: <<colour muted-foreground>>;\\n}\\n\\n.wltc-trail .wltc-crumb::before {\\n\\tcontent: \\\"\\\";\\n\\tposition: absolute;\\n}\\n\\n.wltc-trail .wltc-crumb-first,\\n.wltc-trail .wltc-crumb {\\n\\tposition: relative;\\n\\tdisplay: inline-block;\\n\\tmargin-right: 1em;\\n\\tfont-size: <<trFontSize>>px;\\n}\\n\\n.wltc-trail .wltc-crumb {\\n\\t<!-- padding-left: 0; -->\\n}\\n\\n.wltc-trail .wltc-crumb-first {\\n\\tpadding-left: initial;\\n\\tmargin-left: 0;\\n}\\n\\n.wltc-trail [aria-current=\\\"location\\\"]::after {\\n\\tcontent: \\\"\\\";\\n}\\n\\n<!-- Get trail visibility settings. Defaults to yes -->\\n<$list filter=\\\"[<trShowArrows>match[yes]]\\\" value=\\\"ignore\\\">\\n\\t@media (min-width: <<sidebarbreakpoint>>) {\\n\\t\\t.wltc-trail .wltc-crumb-first,\\n\\t\\t.wltc-trail .wltc-crumb {\\n\\t\\t\\tpadding: <<trPaddingTop>>px 8px <<trPaddingBottom>>px <<trPaddingLeft>>px;\\n\\t\\t\\tmargin-right: {{{ [<trHeight>divide[2]] }}}px;\\n\\t\\t\\tline-height: <<lineHeight>>px;\\n\\t\\t\\tposition: relative;\\n\\t\\t\\tbackground: <<colour message-background>>;\\n\\t\\t\\tborder-right: 1px solid <<colour message-background>>;\\n\\t\\t}\\n\\n\\t\\t.wltc-trail .wltc-crumb-first {\\n\\t\\t\\tpadding-left: .5em;\\n\\t\\t}\\n\\n\\t\\t.wltc-trail .wltc-crumb::before {\\n\\t\\t\\tcontent: \\\"\\\";\\n\\t\\t\\tposition: absolute;\\n\\t\\t\\tleft: 0;\\n\\t\\t\\tbottom: 0;\\n\\t\\t\\tborder-left: {{{ [<trHeight>divide[2]] }}}px solid <<colour background>>;\\n\\t\\t\\tborder-top: {{{ [<trHeight>add<trPaddingTop>add<trPaddingBottom>] +[divide[2]] }}}px solid transparent;\\n\\t\\t\\tborder-bottom: {{{ [<trHeight>add<trPaddingTop>add<trPaddingBottom>] +[divide[2]] }}}px solid transparent;\\n\\t\\t}\\n\\n\\t\\t.wltc-trail .wltc-crumb-first::after,\\n\\t\\t.wltc-trail .wltc-crumb::after {\\n\\t\\t\\tcontent: \\\"\\\";\\n\\t\\t\\tposition: absolute;\\n\\t\\t\\tright: {{{ [<trHeight>add<trPaddingTop>add<trPaddingBottom>] +[divide[2]multiply[-1]] }}}px;\\n\\t\\t\\tbottom: 0;\\n\\t\\t\\tborder-left: {{{ [<trHeight>divide[2]] }}}px solid <<colour message-background>>;\\n\\t\\t\\tborder-top: {{{ [<trHeight>add<trPaddingTop>add<trPaddingBottom>] +[divide[2]] }}}px solid transparent;\\n\\t\\t\\tborder-bottom: {{{ [<trHeight>add<trPaddingTop>add<trPaddingBottom>] +[divide[2]] }}}px solid transparent;\\n\\t\\t}\\n\\t}\\n</$list>\\n</$let>\\n\"},\"$:/plugins/wikilabs/trails/filter-run-template\":{\"title\":\"$:/plugins/wikilabs/trails/filter-run-template\",\"code-body\":\"yes\",\"created\":\"20230316112235083\",\"list-before\":\"$:/core/ui/ViewTemplate/body\",\"modified\":\"20230326145802667\",\"tags\":\"$:/tags/ViewTemplate\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define .op-place()\\n<$macrocall $name=\\\".if\\\"\\n\\tcond=\\\"\\\"\\\"$(op-name)$\\\"\\\"\\\"\\n\\tthen=\\\"<<.place '$(op-name)$'>> = \\\"\\n\\telse=\\\"\\\"/>\\n\\\\end\\n\\n\\\\define .op-row()\\n<$macrocall $name=\\\".if\\\"\\n\\tcond=\\\"\\\"\\\"$(op-body)$\\\"\\\"\\\"\\n\\tthen=\\\"\\\"\\\"<tr><th align=\\\"left\\\">$(op-head)$</th><td><<.op-place>>$(op-body)$</td></tr>\\\"\\\"\\\"\\n\\telse=\\\"\\\"/>\\n\\\\end\\n\\n\\\\whitespace trim\\n\\n<$list filter=\\\"[all[current]tag[Named Filter Run Prefix]]\\\">\\n\\t<$macrocall $name=\\\"trail\\\" stop=\\\"Filters\\\" mode={{$:/config/wl/trails/filterMode}}/>\\n\\t<$let op-head=\\\"\\\" op-body=\\\"\\\" op-name=\\\"\\\">\\n\\t\\t<table class=\\\"doc-table\\\">\\n\\t\\t\\t<!-- purpose -->\\n\\t\\t\\t<$let op-head=\\\"purpose\\\" op-body={{!!rp-purpose}}>\\n\\t\\t\\t\\t<<.op-row>>\\n\\t\\t\\t</$let>\\n\\t\\t\\t<!-- input -->\\n\\t\\t\\t<$let op-head=\\\"[[input|Filter Expression]]\\\" op-body={{!!rp-input}}>\\n\\t\\t\\t\\t<<.op-row>>\\n\\t\\t\\t</$let>\\n\\t\\t\\t<!-- suffix -->\\n\\t\\t\\t<$let op-head=\\\"[[suffix|Filter Run Prefix]]\\\" op-body={{!!rp-suffix}} op-name={{!!rp-suffix-name}}>\\n\\t\\t\\t\\t<<.op-row>>\\n\\t\\t\\t</$let>\\n\\t\\t\\t<!-- output -->\\n\\t\\t\\t<$let op-head=\\\"output\\\" op-body={{!!rp-output}}>\\n\\t\\t\\t\\t<<.op-row>>\\n\\t\\t\\t</$let>\\n\\t\\t</table>\\n\\t\\t<$list filter=\\\"[all[current]has[from-version]]\\\" variable=\\\"listItem\\\">\\n\\t\\t\\t<$macrocall $name=\\\".from-version\\\" version={{!!from-version}}/>\\n\\t\\t</$list>\\n\\t</$let>\\n</$list>\\n\"},\"$:/plugins/wikilabs/trails/trail-macros\":{\"title\":\"$:/plugins/wikilabs/trails/trail-macros\",\"code-body\":\"yes\",\"created\":\"20230324160845531\",\"modified\":\"20230625202117880\",\"tags\":\"$:/tags/Macro\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define ERROR-STOPTIDDLER()\\n<span style={{{ [{$:/palette}getindex[dirty-indicator]addprefix[color:]addsuffix[;]] }}}>\\n trail ERROR! -- stop-tiddler: \\\"<<__stop__>>\\\" does not exist\\n</span>\\n\\\\end\\n\\n\\\\define tr-link(title, class)\\n\\\\whitespace trim\\n<li class=<<__class__>> >\\n<$link to=<<__title__>> >\\n\\t<$macrocall $name=\\\"tr-caption\\\" title=<<__title__>> />\\n</$link>\\n</li>\\n\\\\end\\n\\n\\\\define tr-caption(title)\\n\\\\whitespace trim\\n<$let name=\\\"tv-wikilinks\\\" value=\\\"no\\\">\\n\\t<$view tiddler=<<__title__>> field=\\\"caption\\\" format=\\\"plainwikified\\\">\\n\\t\\t<$transclude tiddler=<<__title__>> field=\\\"title\\\"/>\\n\\t</$view>\\n</$let>\\n\\\\end\\n\\n<!-- ================================================================ -->\\n<!-- \\\"trail\\\" is a wrapper for global mode switching -->\\n<!-- \\\"mode\\\" defaults to \\\"story\\\", which will recreate the hierarchy also in the story river -->\\n<!-- It uses a list-like field, which defaults to \\\"tags\\\" as the start of the hierarchy -->\\n\\n\\\\define trail(start, stop, exclude, label, field, sort, mode:\\\"story\\\")\\n\\\\whitespace trim\\n<$let __start__={{{ [<__start__>match[]then<currentTiddler>else<__start__>] }}}\\n\\ttr-name={{{ \\\"trail\\\" [<__mode__>titlecase[]] +[join[]] }}}\\n>\\n\\t<$set name=\\\"excluded\\\" filter=\\\"[subfilter<__exclude__>] :or[<__start__>]\\\">\\n\\t\\t<$macrocall $name=<<tr-name>> start=<<__start__>> stop=<<__stop__>> exclude=<<excluded>> label=<<__label__>> field=<<__field__>> sort=<<__sort__>>/>\\n\\t</$set>\\n</$let>\\n\\\\end\\n\\n<!-- ========================================================================= -->\\n<!-- \\\"trailStory\\\" uses a list-like field (default: tags) and -->\\n<!-- it will retain the hierarchical order in the story river -->\\n\\n\\\\define openInStoryActions()\\n<$set name=visited filter=\\\"[enlist<excluded>order[reverse]]\\\" >\\n<$let __source__={{{ [list[$:/StoryList]] :intersection[enlist<visited>] +[nth[1]] }}} >\\n\\t<$set name=\\\"newList\\\" filter=\\\"[list[$:/StoryList]insertbefore<__target__>,<__source__>]\\\">\\n\\t\\t<$action-setfield $tiddler=\\\"$:/StoryList\\\" $field=\\\"list\\\" $value=<<newList>> />\\n\\t\\t<$action-navigate $to=<<__target__>> />\\n\\t</$set>\\n<$let>\\n</$set>\\n\\\\end\\n\\n\\\\define openInStory(target, source, class)\\n\\\\whitespace trim\\n<$linkcatcher actions=<<openInStoryActions>> >\\n\\t<$macrocall $name=\\\"tr-link\\\" title=<<__target__>> class=<<__class__>>/>\\n</$linkcatcher>\\n\\\\end\\n\\n\\\\define trFirstCrumbStory()\\n<$let tv-wikilinks={{{ [<currentTiddler>match<__stop__>then[no]else[yes]] }}}>\\n<$macrocall $name=\\\"openInStory\\\" target=<<next>> source=<<__current__>> class=\\\"tc-small-gap-right wltc-crumb-first\\\"/>\\n</$let>\\n\\\\end\\n\\n\\\\define trRecursionStory(current, stop, exclude, field:\\\"tags\\\", sort:\\\"yes\\\")\\n\\\\whitespace trim\\n<$list filter=\\\"[<__stop__>is[tiddler]]\\\" emptyMessage=<<ERROR-STOPTIDDLER>> variable=\\\"ignore\\\">\\n\\t<$let\\n\\t\\tlimit=\\\"[limit[1]]\\\"\\n\\t\\tsort=\\\"[sort[]limit[1]]\\\"\\n\\t\\tsub={{{ [<__sort__>match[yes]then<sort>else<limit>] }}}\\n\\t\\tnext={{{ [<__current__>get<__field__>enlist-input[]] -[enlist<__exclude__>] +[subfilter<sub>] :else[<__stop__>] }}}\\n\\t>\\n\\t\\t<$set name=\\\"excluded\\\" filter=\\\"[subfilter<__exclude__>] :or[<next>]\\\">\\n\\t\\t\\t<$list filter=\\\"[<next>!match<__stop__>]\\\" emptyMessage=<<trFirstCrumbStory>> >\\n\\t\\t\\t\\t<$macrocall $name=\\\"trRecursionStory\\\" current=<<currentTiddler>> stop=<<__stop__>> exclude=<<excluded>> field=<<__field__>> filter=<<__filter__>> />\\n\\t\\t\\t\\t<$macrocall $name=\\\"openInStory\\\" target=<<currentTiddler>> source=<<__current__>> class=\\\"tc-small-gap-right wltc-crumb\\\"/>\\n\\t\\t\\t</$list>\\n\\t\\t</$set>\\n\\t</$let>\\n</$list>\\n\\\\end\\n\\n\\\\define trailStory(start, stop, exclude, label, field, sort)\\n\\\\whitespace trim\\n<$let __start__={{{ [<__start__>match[]then<currentTiddler>else<__start__>] }}} selfTiddler=<<currentTiddler>> >\\n\\t<$set name=\\\"excluded\\\" filter=\\\"[subfilter<__exclude__>] :or[<__start__>]\\\">\\n\\t\\t<nav class=\\\"wltc-trail\\\" aria-label=<<__start__>> >\\n\\t\\t\\t<div class=\\\"wltc-label\\\"><<__label__>></div>\\n\\t\\t\\t<ol>\\n\\t\\t\\t\\t<$macrocall $name=\\\"trRecursionStory\\\" current=<<__start__>> stop=<<__stop__>> exclude=<<excluded>> field=<<__field__>> sort=<<__sort__>>/>\\n\\t\\t\\t\\t<$list filter=\\\"[<currentTiddler>!match<__stop__>]\\\" variable=\\\"ignore\\\" >\\n\\t\\t\\t\\t\\t<li tabindex=\\\"0\\\" aria-current=\\\"location\\\" class=\\\"wltc-crumb\\\" aria-label={{{ [<__start__>get[caption]else<__start__>]}}} >\\n\\t\\t\\t\\t\\t\\t<$macrocall $name=\\\"tr-caption\\\" title=<<__start__>> />\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t</$list>\\n\\t\\t\\t</ol>\\n\\t\\t</nav>\\n\\t</$set>\\n</$let>\\n\\\\end\\n\\n<!-- ========================================================================= -->\\n<!-- \\\"trailField\\\" uses a field (defaults to \\\"list\\\") as the trail source. -->\\n<!-- start is a tiddler title (defaults to \\\"currentTiddler\\\") -->\\n\\n\\\\define openFieldInStoryActions()\\n<$set name=visited filter=\\\"[<__start__>get<__field__>enlist-input[]] -[enlist<excluded>] +[allafter<__target__>] :or[<__start__>]\\\" >\\n<$let __source__={{{ [list[$:/StoryList]] :intersection[enlist<visited>] +[nth[1]] }}} >\\n\\t<$set name=\\\"newList\\\" filter=\\\"[list[$:/StoryList]insertbefore<__target__>,<__source__>]\\\">\\n\\t\\t<$action-setfield $tiddler=\\\"$:/StoryList\\\" $field=\\\"list\\\" $value=<<newList>> />\\n\\t\\t<$action-navigate $to=<<__target__>> />\\n\\t</$set>\\n<$let>\\n</$set>\\n\\\\end\\n\\n\\\\define openFieldInStory(target, class)\\n\\\\whitespace trim\\n<$linkcatcher actions=<<openFieldInStoryActions>> >\\n\\t<$macrocall $name=\\\"tr-link\\\" title=<<__target__>> class=<<__class__>>/>\\n</$linkcatcher>\\n\\\\end\\n\\n\\\\define trailField(start, exclude, label, field:\\\"list\\\")\\n\\\\whitespace trim\\n<$let __start__={{{ [<__start__>match[]then<currentTiddler>else<__start__>] }}}\\n\\tfirst={{{ [<__start__>get<__field__>enlist-input[]] }}}\\n>\\n\\t<$set name=\\\"excluded\\\" filter=\\\"[subfilter<__exclude__>]\\\">\\n\\t\\t<nav aria-label=<<__start__>> class=\\\"wltc-trail\\\">\\n\\t\\t\\t<div class=\\\"wltc-label\\\"><<__label__>></div>\\n\\t\\t\\t<ol>\\n\\t\\t\\t\\t<$macrocall $name=\\\"openFieldInStory\\\" target=<<first>> class=\\\"wltc-crumb-first\\\"/>\\n\\t\\t\\t\\t<$list filter=\\\"[<__start__>get<__field__>enlist-input[]] -[enlist<excluded>] -[<first>]\\\">\\n\\t\\t\\t\\t\\t<$macrocall $name=\\\"openFieldInStory\\\" target=<<currentTiddler>> class=\\\"tc-small-gap-right wltc-crumb\\\"/>\\n\\t\\t\\t\\t</$list>\\n\\t\\t\\t\\t<li tabindex=\\\"0\\\" aria-current=\\\"location\\\" class=\\\"wltc-crumb\\\" aria-label={{{ [<__start__>get[caption]else<__start__>]}}}>\\n\\t\\t\\t\\t\\t<$macrocall $name=\\\"tr-caption\\\" title=<<__start__>> />\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t</ol>\\n\\t\\t</nav>\\n\\t</$set>\\n</$let>\\n\\\\end\\n\\n<!-- ========================================================================= -->\\n<!-- \\\"trailSimple\\\" uses a list-like field (default: tags) as the start of the hierarchy -->\\n<!-- Links will be opened according to wiki global \\\"open link in story-river\\\" setting -->\\n\\n\\\\define trRecursion(current, stop, exclude, field:\\\"tags\\\", sort:\\\"yes\\\")\\n\\\\whitespace trim\\n<$list filter=\\\"[<__stop__>is[tiddler]]\\\"\\n\\temptyMessage=<<ERROR-STOPTIDDLER>>\\n\\tvariable=\\\"ignore\\\"\\n>\\n\\t<$let\\n\\t\\tlimit=\\\"[limit[1]]\\\"\\n\\t\\tsort=\\\"[sort[]limit[1]]\\\"\\n\\t\\tsub={{{ [<__sort__>match[yes]then<sort>else<limit>] }}}\\n\\t\\tnext={{{ [<__current__>get<__field__>enlist-input[]] -[enlist<__exclude__>] +[subfilter<sub>] :else[<__stop__>] }}}\\n\\t>\\n\\t\\t<$set name=\\\"excluded\\\" filter=\\\"[subfilter<__exclude__>] :or[<next>]\\\">\\n\\t\\t\\t<$list filter=\\\"[<next>!match<__stop__>]\\\"\\n\\t\\t\\t\\temptyMessage=\\\"\\\"\\\"<$macrocall $name=\\\"tr-link\\\" title=<<next>> class=\\\"tc-small-gap-right wltc-crumb-first\\\"/>\\\"\\\"\\\"\\n\\t\\t\\t>\\n\\t\\t\\t\\t<$macrocall $name=\\\"trRecursion\\\" current=<<currentTiddler>>\\n\\t\\t\\t\\t\\tstop=<<__stop__>> exclude=<<excluded>> field=<<__field__>> filter=<<__filter__>>\\n\\t\\t\\t\\t/>\\n\\t\\t\\t\\t<$macrocall $name=\\\"tr-link\\\" title=<<currentTiddler>> class=\\\"tc-small-gap-right wltc-crumb\\\"/>\\n\\t\\t\\t</$list>\\n\\t\\t</$set>\\n\\t</$let>\\n</$list>\\n\\\\end\\n\\n\\\\define trailSimple(start, stop, exclude, label, field, sort)\\n\\\\whitespace trim\\n<$let __start__={{{ [<__start__>match[]then<currentTiddler>else<__start__>] }}} >\\n\\t<$set name=\\\"excluded\\\" filter=\\\"[subfilter<__exclude__>] :or[<__start__>]\\\">\\n\\t<nav class=\\\"wltc-trail\\\">\\n\\t\\t<div class=\\\"wltc-label\\\"><<__label__>></div>\\n\\t\\t<ol>\\n\\t\\t\\t<$macrocall $name=\\\"trRecursion\\\" current=<<__start__>> stop=<<__stop__>> exclude=<<excluded>> field=<<__field__>> sort=<<__sort__>>/>\\n\\t\\t\\t<li tabindex=\\\"0\\\" aria-current=\\\"location\\\" class=\\\"wltc-crumb\\\" aria-label={{{ [<__start__>get[caption]else<__start__>]}}}>\\n\\t\\t\\t\\t<$macrocall $name=\\\"tr-caption\\\" title=<<__start__>> />\\n\\t\\t\\t</li>\\n\\t\\t</ol>\\n\\t</nav>\\n\\t</$set>\\n</$let>\\n\\\\end\\n\"}}}"}