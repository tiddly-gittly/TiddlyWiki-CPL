{"title":"$:/plugins/oeyoews/neotw-vue-todo","description":"neotw-vue-todo","author":"oeyoews","version":"0.1.0","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"neotw-vue-todo","meat#disabled":"yes","qrcode":"yes","created":"2024-03-03","parent-plugin":"$:/plugins/oeyoews/neotw-vue3","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus $:/plugins/oeyoews/vue-i18n $:/plugins/oeyoews/vue-dragable","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-vue-todo/templates/widget.vue\":{\"text\":\"<template>\\n  <Notivue v-slot=\\\"item\\\">\\n    <Notification :item=\\\"item\\\" />\\n  </Notivue>\\n  <!-- NOTE: vue.config.js 出现在 tabs 里面, vscode 就不会有报错了 -->\\n  <h2>\\n    {{ t('todo.title') }}\\n\\n  </h2>\\n\\n  <!-- add todo bar -->\\n  <form @submit.prevent=\\\"addTodo\\\" class=\\\"flex rounded border-solid border-gray-300 dark:border-gray-500\\\">\\n    <input v-model.trim=\\\"newTodo\\\" :placeholder=\\\"t('todo.placeholder', { msg: 'placeholder' })\\\"\\n      class=\\\"w-full my-2 border-none\\\" required=\\\"\\\" :autofocus=\\\"'autofocus'\\\" />\\n\\n    <button class=\\\"w-1/4 md:w-1/12 mr-1\\\">\\n      {{ t('todo.add', { msg: 'add' }) }}\\n    </button>\\n  </form>\\n\\n  <!-- progress -->\\n  <div class=\\\"flex gap-2 items-center my-2 justify-between text-gray-400 text-sm mx-8 mt-4\\\" v-if=\\\"todos.length > 0\\\">\\n    <div>{{ done }}/{{ todos.length }}</div>\\n    <progress :value=\\\"done\\\" :max=\\\"todos.length\\\" id=\\\"todo-progress\\\"></progress>\\n    <div>\\n      {{ progress }}\\n    </div>\\n  </div>\\n\\n  <!-- task list -->\\n  <!-- v-draggable=\\\"[todos, { animation: 150 }]\\\"  -->\\n  <VueDraggable target=\\\".sort-target\\\" v-mode=\\\"todos\\\">\\n    <TransitionGroup tag=\\\"div\\\" class=\\\"list-none my-4 hover:cursor-move todo-list\\\" class=\\\"sort-target\\\">\\n      <template v-for=\\\"item in todos\\\">\\n        <div class=\\\"flex justify-between items-center group\\\">\\n          <div v-if=\\\"editingIndex !== item.id\\\">\\n            <li class=\\\"flex items-center truncate todo m-0\\\">\\n              <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"opacity-0 group-hover:opacity-100\\\" width=\\\"1em\\\" height=\\\"1em\\\"\\n                viewBox=\\\"0 0 24 24\\\">\\n                <g fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\">\\n                  <circle cx=\\\"8\\\" cy=\\\"4\\\" r=\\\"1\\\" transform=\\\"rotate(90 8 4)\\\" />\\n                  <circle cx=\\\"16\\\" cy=\\\"4\\\" r=\\\"1\\\" transform=\\\"rotate(90 16 4)\\\" />\\n                  <circle cx=\\\"8\\\" cy=\\\"12\\\" r=\\\"1\\\" transform=\\\"rotate(90 8 12)\\\" />\\n                  <circle cx=\\\"16\\\" cy=\\\"12\\\" r=\\\"1\\\" transform=\\\"rotate(90 16 12)\\\" />\\n                  <circle cx=\\\"8\\\" cy=\\\"20\\\" r=\\\"1\\\" transform=\\\"rotate(90 8 20)\\\" />\\n                  <circle cx=\\\"16\\\" cy=\\\"20\\\" r=\\\"1\\\" transform=\\\"rotate(90 16 20)\\\" />\\n                </g>\\n              </svg>\\n              <input type=\\\"checkbox\\\" v-model=\\\"item.done\\\" class=\\\"mr-2 cursor-pointer toggle\\\" :id=\\\"item.id\\\" />\\n              <label :for=\\\"item.id\\\" class=\\\"cursor-pointer\\\" :class=\\\"{\\n                ['line-through']: item.done,\\n                'text-gray-400': item.done\\n              }\\\">{{ item.text }}</label>\\n            </li>\\n          </div>\\n          <li v-show=\\\"editingIndex === item.id\\\" class=\\\"w-full\\\">\\n            <input v-model=\\\"editingText\\\" @keyup.enter=\\\"finishEdit(item.id)\\\" @blur=\\\"cancelEdit(item.id)\\\"\\n              @keyup.escape=\\\"cancelEdit(item.id)\\\" class=\\\"w-full\\\" />\\n            <div class=\\\"mt-1\\\">\\n              <button @click=\\\"cancelEdit(item.id)\\\">\\n                {{ t('todo.cancel') }}\\n              </button>\\n              <button @click=\\\"finishEdit(item.id)\\\">\\n                {{ t('todo.save') }}\\n              </button>\\n            </div>\\n          </li>\\n\\n          <div v-show=\\\"item.date && editingIndex !== item.id\\\" class=\\\"text-gray-400 text-sm mx-2\\\">\\n            {{ item.date }}\\n\\n            <button @click=\\\"startEdit(item, item.id)\\\">Edit</button>\\n            <button @click=\\\"removeTodo(item.id)\\\" :title=\\\"t('todo.removeTooltip', { msg: 'removeTooltip' })\\\"\\n              class=\\\"p-1 hover:text-red-400 rounded-md opacity-50 group-hover:opacity-100 transition-all\\\">\\n              del\\n            </button>\\n          </div>\\n        </div>\\n      </template>\\n    </TransitionGroup>\\n  </VueDraggable>\\n\\n  <!-- bottom -->\\n  <div class=\\\"flex items-center justify-end text-sm\\\">\\n    <div @click=\\\"resetTodos\\\" class=\\\"text-gray-600 cursor-pointer hover:underline hover:text-gray-400 transition-all\\\"\\n      v-show=\\\"todos.length\\\">\\n      {{ t('todo.resetTodos') }}\\n    </div>\\n  </div>\\n\\n  <!--\\n  <transition>\\n    <button\\n      @click=\\\"hideCompleted = !hideCompleted\\\"\\n      class=\\\"!p-1 border-solid border-gray-300 dark:border-gray-500 my-2 mx-2\\\"\\n      v-show=\\\"undone && undone !== todos.length\\\"\\n    >\\n      {{ hideCompleted ? t('todo.showtodo') : t('todo.hidedone') }}\\n    </button>\\n  </transition>\\n-->\\n\\n  <h2>{{ t('todo.setup') }}</h2>\\n\\n  <!-- lang -->\\n  <select v-model=\\\"$i18n.locale\\\" @click=\\\"toggleLang\\\" class=\\\"rounded p-1\\\">\\n    <option v-for=\\\"locale in $i18n.availableLocales\\\" :key=\\\"`locale-${locale}`\\\" :value=\\\"locale\\\">\\n      {{ locale }}\\n    </option>\\n  </select>\\n</template>\",\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/templates/widget.vue\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/neotw-vue-todo/i18n/cn.js\":{\"text\":\"module.exports={todo:{title:\\\"待办事项\\\",placeholder:\\\"添加待办事项\\\",removeTooltip:\\\"移除当前待办事项\\\",add:\\\"添加\\\",done:\\\"全部完成了\\\",empty:\\\"还没有待办事项\\\",showtodo:\\\"显示所有待办事项\\\",hidedone:\\\"仅显示未完成待办事项\\\",setup:\\\"配置\\\",resetTodos:\\\"清空所有任务\\\",toggleLang:\\\"切换语言\\\",notify:\\\"任务已添加\\\",cancel:\\\"取消\\\",save:\\\"保存\\\"}};\",\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/i18n/cn.js\",\"type\":\"application/javascript\",\"module-type\":\"library\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/neotw-vue-todo/i18n/en.js\":{\"text\":\"module.exports={todo:{title:\\\"Todolist\\\",placeholder:\\\"add new task\\\",removeTooltip:\\\"remove current todo\\\",add:\\\"add\\\",done:\\\"all done !\\\",empty:\\\"todo is empty\\\",showtodo:\\\"show all todo\\\",hidedone:\\\"hide complted todo\\\",setup:\\\"Todo Setup\\\",toggleLang:\\\"toggleLang\\\",resetTodos:\\\"remove all todos\\\",notify:\\\"task added\\\",cancel:\\\"cancel\\\",save:\\\"save\\\"}};\",\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/i18n/en.js\",\"type\":\"application/javascript\",\"module-type\":\"library\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/neotw-vue-todo/i18n/fr.js\":{\"text\":\"module.exports={todo:{title:\\\"Liste de tâches\\\",placeholder:\\\"ajouter une nouvelle tâche\\\",removeTooltip:\\\"supprimer la tâche actuelle\\\",add:\\\"ajouter\\\",done:\\\"tout est fait !\\\",empty:\\\"la liste de tâches est vide\\\",showtodo:\\\"afficher toutes les tâches\\\",hidedone:\\\"masquer les tâches terminées\\\",setup:\\\"Configuration de la liste de tâches\\\",toggleLang:\\\"basculer la langue\\\"}};\",\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/i18n/fr.js\",\"type\":\"application/javascript\",\"module-type\":\"library\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/neotw-vue-todo/i18n/ja.js\":{\"text\":\"module.exports={todo:{title:\\\"タスクリスト\\\",placeholder:\\\"新しいタスクを追加\\\",removeTooltip:\\\"現在のタスクを削除\\\",add:\\\"追加\\\",done:\\\"すべて完了！\\\",empty:\\\"タスクがありません\\\",showtodo:\\\"すべてのタスクを表示\\\",hidedone:\\\"完了したタスクを非表示\\\",setup:\\\"タスクの設定\\\",toggleLang:\\\"言語切り替え\\\"}};\",\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/i18n/ja.js\",\"type\":\"application/javascript\",\"module-type\":\"library\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/neotw-vue-todo/i18n/ru.js\":{\"text\":\"module.exports={todo:{title:\\\"Список задач\\\",placeholder:\\\"добавить новую задачу\\\",removeTooltip:\\\"удалить текущую задачу\\\",add:\\\"добавить\\\",done:\\\"все готово!\\\",empty:\\\"список задач пуст\\\",showtodo:\\\"показать все задачи\\\",hidedone:\\\"скрыть завершенные задачи\\\",setup:\\\"Настройка списка задач\\\",toggleLang:\\\"Переключить язык\\\"}};\",\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/i18n/ru.js\",\"type\":\"application/javascript\",\"module-type\":\"library\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/neotw-vue-todo/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/readme\",\"description\":\"neotw-vue-todo\",\"text\":\"<$vue-todo />\\n\\n!! Usage\\n\\n```html\\n<$vue-todo json=\\\"todo.json\\\"/>\\n```\\n\\n!! Features\\n\\n* 多语言支持\\n* 任务进度\\n* 任务编辑\\n* 任务拖动\\n* 任务通知\\n\\n!! TODO\\n\\n* 支持 undo 操作，类似 gmail(base watch new old value)\\n* 处理移动端样式优化\\n\\n!! Roadmap\\n\\n* projectify\"},\"$:/plugins/oeyoews/neotw-vue-todo/component.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/component.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-todo/component.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nconst{watch:t,toRaw:e,computed:o,ref:i}=window.Vue,{Notivue:s,Notification:d,push:n}=require(\\\"$:/plugins/oeyoews/notivue/notivue.js\\\"),a=require(\\\"$:/plugins/oeyoews/neotw-vue3/getTemplate\\\"),l=require(\\\"vue-i18n.global.prod.js\\\");module.exports=(r=\\\"todo.json\\\")=>({setup(){const s=i(\\\"\\\"),d=i(\\\"border-solid border-gray-100 dark:border-gray-400 p-2\\\"),{t:n}=l.useI18n(),a=i($tw.wiki.getTiddlerData(r,[])),u=i(!1),h=o((()=>u.value?a.value.filter((t=>!t.done)):a.value)),g=o((()=>a.value?.filter((t=>!t.done))?.length||0)),c=o((()=>a.value?.filter((t=>t.done))?.length||0)),w=o((()=>a.value?.length?100*(c.value/a.value.length).toFixed(2)+\\\"%\\\":\\\"0%\\\"));return t(a,(()=>{const t=e(a.value);\\n// NOTE: 这里数据没有stringify, settiddlerdata 会自动带上转义符， 如果使用setText, 需要手动检查type 字段\\n$tw.wiki.setTiddlerData(r,t,null,{suppressTimestamp:!0})}),{deep:!0}),{editingIndex:i(-1),editingText:i(\\\"\\\"),progress:w,t:n,done:c,undone:g,todos:a,btnClass:d,hideCompleted:u,filteredTodos:h,newTodo:s}},directives:{focus:{mounted(t){t.focus()}}},methods:{startEdit(t){this.editingIndex=t.id,this.editingText=t.text},finishEdit(t){if(this.editingText){const e=this.todos.findIndex((e=>e.id===t));this.todos[e].text=this.editingText,this.todos[e].date=(new Date).toLocaleString()}this.cancelEdit(t),this.notify(this.t(\\\"todo.save\\\"))},cancelEdit(){this.editingIndex=-1,this.editingText=\\\"\\\"},notify(t=\\\"notify\\\",e=\\\"success\\\",o=2e3){\\n// push[type](msg);\\nn.success(t)},toggleLang(){localStorage.setItem(\\\"lang\\\",this.$i18n.locale)},addTodo(){this.todos.unshift({id:Math.random().toString(36).substring(2,11),text:this.newTodo,date:(new Date).toLocaleString()}),this.newTodo=\\\"\\\",this.notify(this.t(\\\"todo.notify\\\"))},resetTodos(){window.confirm(this.t(\\\"todo.resetTodos\\\"))&&(this.todos=[])},removeTodo(t){this.todos=this.todos.filter((e=>e.id!==t))}},template:a(\\\"$:/plugins/oeyoews/neotw-vue-todo/templates/widget.vue\\\"),components:{Notivue:s,Notification:d}});\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-vue-todo/styles.css\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/styles.css\",\"tags\":\"$:/tags/Stylesheet\",\"type\":\"text/css\",\"text\":\".v-enter-active,\\n.v-leave-active {\\n  transition: opacity 0.5s ease;\\n}\\n\\n.v-enter-from,\\n.v-leave-to {\\n  opacity: 0;\\n}\\n\\n#todo-progress {\\n  height: 8px;\\n  width: 100%;\\n  border-radius: 2px;\\n  overflow: hidden;\\n  -webkit-appearance: none;\\n  appearance: none;\\n}\\n\\n#todo-progress::-webkit-progress-bar {\\n  background-color: #efefef;\\n}\\n\\n#todo-progress::-webkit-progress-value {\\n  background: linear-gradient(135deg, #c9ffbf, #ffafbd);\\n  animation: progress-bar 1s ease-out infinite;\\n  transition: all 0.4s;\\n}\\n\\n@keyframes progress-bar {\\n  0% {\\n    box-shadow: 0 0 1px #007aff;\\n  }\\n  50% {\\n    box-shadow: 0 0 2px #007aff;\\n  }\\n  100% {\\n    box-shadow: 0 0 1px #007aff;\\n  }\\n}\\n\\n.flip-list-move {\\n  transition: transform 0.5s;\\n}\\n\\n.no-move {\\n  transition: transform 0s;\\n}\\n\\n.ghost {\\n  opacity: 0.5;\\n  background: #c8ebfb;\\n}\\n\\n.list-group {\\n  min-height: 20px;\\n}\\n\\n.list-group-item {\\n  cursor: move;\\n}\\n\\n.list-group-item i {\\n  cursor: pointer;\\n}\\n\\n\\n<!-- https://cn.vuejs.org/examples/#todomvc -->\\n.todo-list {\\n\\tmargin: 0;\\n\\tpadding: 0;\\n\\tlist-style: none;\\n}\\n\\n.todo-list li {\\n\\tposition: relative;\\n\\t<!-- border-bottom: 1px solid #ededed; -->\\n}\\n\\n.todo-list li:last-child {\\n\\tborder-bottom: none;\\n}\\n\\n.todo-list li.editing {\\n\\tborder-bottom: none;\\n\\tpadding: 0;\\n}\\n\\n.todo-list li.editing .edit {\\n\\tdisplay: block;\\n\\twidth: calc(100% - 43px);\\n\\tpadding: 12px 16px;\\n\\tmargin: 0 0 0 43px;\\n}\\n\\n.todo-list li.editing .view {\\n\\tdisplay: none;\\n}\\n\\n.todo-list li .toggle {\\n\\ttext-align: center;\\n\\twidth: 40px;\\n\\theight: auto;\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tbottom: 0;\\n\\tmargin: auto 0;\\n\\tborder: none; /* Mobile Safari */\\n\\t-webkit-appearance: none;\\n\\tappearance: none;\\n}\\n\\n.todo-list li .toggle {\\n\\topacity: 0;\\n}\\n\\n\\n/* background-image: url(<$transclude $variable=\\\"makedatauri\\\" text='<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"currentColor\\\" d=\\\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8s8 3.58 8 8s-3.58 8-8 8\\\"/></svg>' type=\\\"image/svg+xml\\\" />); */\\n\\n.todo-list li .toggle + label {\\n\\tbackground-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23949494%22%20stroke-width%3D%223%22/%3E%3C/svg%3E');\\n\\tbackground-repeat: no-repeat;\\n\\tbackground-position: center left;\\n}\\n\\n.todo-list li .toggle:checked + label {\\n\\tbackground-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%2359A193%22%20stroke-width%3D%223%22%2F%3E%3Cpath%20fill%3D%22%233EA390%22%20d%3D%22M72%2025L42%2071%2027%2056l-4%204%2020%2020%2034-52z%22%2F%3E%3C%2Fsvg%3E');\\n}\\n\\n.todo-list li label {\\n\\tword-break: break-all;\\n\\tpadding: 15px 15px 15px 60px;\\n\\tline-height: 1.2;\\n\\ttransition: color 0.4s;\\n\\tfont-weight: 400;\\n\\tcolor: #484848;\\n}\\n\"},\"$:/plugins/oeyoews/neotw-vue-todo/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-todo/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-vue-todo widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports[\\\"vue-todo\\\"]=class extends e{constructor(e,o){super(e,o)}render(e,o){if(!$tw.browser)return;if(this.computeAttributes(),this.execute(),this.document.isTiddlyWikiFakeDom)return;const r=(0,$tw.utils.domMaker)(\\\"div\\\",{}),t=\\\"$:/plugins/oeyoews/neotw-vue3/vue.global.prod.js\\\",i=new $tw.utils.Logger(\\\"neotw-vue-todo\\\");if(window.Vue||(window.Vue=require(t)),!window.Vue)\\n// if (!$tw.modules.titles[vuelib]) {\\nreturn void i.alert(`${t} is missing, Please install neotw-vue plugin by @oeyoews`);const s=require(\\\"vue-i18n.global.prod.js\\\");window.VueI18n=s;const{createApp:n}=window.Vue,{json:u}=this.attributes,l=require(\\\"./component.js\\\"),{VueDraggable:a,vDraggable:c}=require(\\\"draggableplus.js\\\");try{const t=n(l(u));t.component(\\\"VueDraggable\\\",a),window.app=t;const i=require(\\\"./i18n/en.js\\\"),g=require(\\\"./i18n/cn.js\\\"),d=require(\\\"./i18n/ja.js\\\"),w={English:i,\\\"中文\\\":g,\\\"日本語\\\":d,\\\"Français\\\":require(\\\"./i18n/fr.js\\\"),\\\"Русский\\\":require(\\\"./i18n/ru.js\\\")};let p=localStorage.getItem(\\\"lang\\\");p||(p=\\\"English\\\",localStorage.setItem(\\\"lang\\\",p));const m=s.createI18n({legacy:!1,locale:p,fallbackLocale:\\\"English\\\",messages:w}),{createNotivue:v}=require(\\\"$:/plugins/oeyoews/notivue/notivue.js\\\"),b=v({position:\\\"top-center\\\",limit:3,enqueue:!0,notifications:{global:{duration:1500}}});t.use(m),t.use(b),t.directive(\\\"draggable\\\",c),t.config.errorHandler=e=>{const o=`[Vue3](${t.version}): `+e;console.error(o),r.textContent=o,r.style.color=\\\"red\\\"},t.mount(r),e.insertBefore(r,o),this.domNodes.push(r)}catch(e){console.error(e)}}refresh(){return!1}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}