{"title":"$:/plugins/oeyoews/neotw-vue-todo","description":"neotw-vue-todo","author":"oeyoews","version":"0.1.0","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"neotw-vue-todo","meat#disabled":"yes","qrcode":"yes","created":"2024-03-03","parent-plugin":"$:/plugins/oeyoews/neotw-vue3","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus $:/plugins/oeyoews/vue-i18n $:/plugins/oeyoews/vue-dragable","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-vue-todo/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/readme\",\"description\":\"neotw-vue-todo\",\"text\":\"<$vue-todo />\\n\\n!! Usage\\n\\n```html\\n<$vue-todo json=\\\"todo.json\\\"/>\\n```\\n\\n!! Features\\n\\n* 多语言支持\\n* 任务进度\\n* 任务编辑\\n* 任务拖动\\n* 任务通知\\n\\n!! TODO\\n\\n* 支持 undo 操作，类似 gmail(base watch new old value)\\n* 处理移动端样式优化\\n\\n!! Roadmap\\n\\n* projectify\"},\"$:/plugins/oeyoews/neotw-vue-todo/component.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/component.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-todo/component.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nconst{watch:t,watchEffect:e,onMounted:o,toRaw:i,computed:s,ref:d}=window.Vue,{toast:n}=require(\\\"vue3-toastify.js\\\"),r=()=>{let t=$tw.wiki.getTiddlerText(\\\"$:/plugins/oeyoews/neotw-vue-todo/todo.vue\\\").trim();return t.startsWith(\\\"<template>\\\")&&t.endsWith(\\\"</template>\\\")&&(t=t.slice(10,-11)),t},a=require(\\\"vue-i18n.global.prod.js\\\");module.exports=(e=\\\"todo.json\\\")=>({setup(){const o=d(\\\"\\\"),n=d(\\\"border-solid border-gray-100 dark:border-gray-400 p-2\\\"),{t:r}=a.useI18n(),l=d($tw.wiki.getTiddlerText(e)?$tw.wiki.getTiddlerData(e):[]),h=d(!1),u=s((()=>Array.isArray(l.value)?h.value?l.value.filter((t=>!t.done)):l.value:[])),g=s((()=>l.value?.filter((t=>!t.done))?.length||0)),c=s((()=>l.value?.filter((t=>t.done))?.length||0)),f=s((()=>l.value?.length?100*(c.value/l.value.length).toFixed(2)+\\\"%\\\":\\\"0%\\\"));t(l,(()=>{const t=i(l.value);\\n// NOTE: 这里数据没有stringify, settiddlerdata 会自动带上转义符， 如果使用setText, 需要手动检查type 字段\\n$tw.wiki.setTiddlerData(e,t,null,{suppressTimestamp:!0})}),{deep:!0});const T=d(!1);return{editingIndex:d(-1),editingText:d(\\\"\\\"),drag:T,dragOptions:{animation:200,group:\\\"description\\\",disabled:!1,ghostClass:\\\"ghost\\\"},progress:f,t:r,done:c,undone:g,todos:l,btnClass:n,hideCompleted:h,filteredTodos:u,newTodo:o}},directives:{focus:{mounted(t){t.focus()}}},methods:{startEdit(t){this.editingIndex=t.id,this.editingText=t.text},finishEdit(t){if(this.editingText){const e=this.todos.findIndex((e=>e.id===t));this.todos[e].text=this.editingText,this.todos[e].date=(new Date).toLocaleString()}this.cancelEdit(t),this.notify(this.t(\\\"todo.save\\\"))},cancelEdit(){this.editingIndex=-1,this.editingText=\\\"\\\"},sort(){this.filteredTodos=this.filteredTodos.sort(((t,e)=>t.id-e.id))},notify(t=\\\"notify\\\",e=\\\"success\\\",o=2e3){n(t,{theme:\\\"auto\\\",type:e,transition:\\\"slide\\\",position:\\\"top-left\\\",hideProgressBar:!0,autoClose:o,dangerouslyHTMLString:!0})},toggleLang(){localStorage.setItem(\\\"lang\\\",this.$i18n.locale)},addTodo(){this.todos.unshift({id:this.todos.length,text:this.newTodo,date:(new Date).toLocaleString()}),this.newTodo=\\\"\\\",this.notify(this.t(\\\"todo.notify\\\"))},async resetTodos(){window.confirm(this.t(\\\"todo.resetTodos\\\"))&&(this.todos=[])},removeTodo(t){this.todos.splice(t,1)}},template:r()});\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-vue-todo/i18n/cn.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/i18n/cn.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-todo/i18n/cn.js\\ntype: application/javascript\\nmodule-type: library\\n\\nnotebook-theme-sidebar-resizer locale zh\\n\\\\*/\\nmodule.exports={todo:{title:\\\"待办事项\\\",placeholder:\\\"添加待办事项\\\",removeTooltip:\\\"移除当前待办事项\\\",add:\\\"添加\\\",done:\\\"全部完成了\\\",empty:\\\"还没有待办事项\\\",showtodo:\\\"显示所有待办事项\\\",hidedone:\\\"仅显示未完成待办事项\\\",setup:\\\"配置\\\",resetTodos:\\\"清空所有任务\\\",toggleLang:\\\"切换语言\\\",notify:\\\"任务已添加\\\",cancel:\\\"取消\\\",save:\\\"保存\\\"}};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-vue-todo/i18n/en.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/i18n/en.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-todo/i18n/en.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nmodule.exports={todo:{title:\\\"Todolist\\\",placeholder:\\\"add new task\\\",removeTooltip:\\\"remove current todo\\\",add:\\\"add\\\",done:\\\"all done !\\\",empty:\\\"todo is empty\\\",showtodo:\\\"show all todo\\\",hidedone:\\\"hide complted todo\\\",setup:\\\"Todo Setup\\\",toggleLang:\\\"toggleLang\\\",resetTodos:\\\"remove all todos\\\",notify:\\\"task added\\\",cancel:\\\"cancel\\\",save:\\\"save\\\"}};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-vue-todo/i18n/fr.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/i18n/fr.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-todo/i18n/fr.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nmodule.exports={todo:{title:\\\"Liste de tâches\\\",placeholder:\\\"ajouter une nouvelle tâche\\\",removeTooltip:\\\"supprimer la tâche actuelle\\\",add:\\\"ajouter\\\",done:\\\"tout est fait !\\\",empty:\\\"la liste de tâches est vide\\\",showtodo:\\\"afficher toutes les tâches\\\",hidedone:\\\"masquer les tâches terminées\\\",setup:\\\"Configuration de la liste de tâches\\\",toggleLang:\\\"basculer la langue\\\"}};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-vue-todo/i18n/ja.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/i18n/ja.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-todo/i18n/ja.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nmodule.exports={todo:{title:\\\"タスクリスト\\\",placeholder:\\\"新しいタスクを追加\\\",removeTooltip:\\\"現在のタスクを削除\\\",add:\\\"追加\\\",done:\\\"すべて完了！\\\",empty:\\\"タスクがありません\\\",showtodo:\\\"すべてのタスクを表示\\\",hidedone:\\\"完了したタスクを非表示\\\",setup:\\\"タスクの設定\\\",toggleLang:\\\"言語切り替え\\\"}};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-vue-todo/i18n/ru.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/i18n/ru.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-todo/i18n/ru.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nmodule.exports={todo:{title:\\\"Список задач\\\",placeholder:\\\"добавить новую задачу\\\",removeTooltip:\\\"удалить текущую задачу\\\",add:\\\"добавить\\\",done:\\\"все готово!\\\",empty:\\\"список задач пуст\\\",showtodo:\\\"показать все задачи\\\",hidedone:\\\"скрыть завершенные задачи\\\",setup:\\\"Настройка списка задач\\\",toggleLang:\\\"Переключить язык\\\"}};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-vue-todo/styles.css\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/styles.css\",\"tags\":\"$:/tags/Stylesheet\",\"type\":\"text/css\",\"text\":\".v-enter-active,\\n.v-leave-active {\\n  transition: opacity 0.5s ease;\\n}\\n\\n.v-enter-from,\\n.v-leave-to {\\n  opacity: 0;\\n}\\n\\n#todo-progress {\\n  height: 8px;\\n  width: 100%;\\n  border-radius: 2px;\\n  overflow: hidden;\\n  -webkit-appearance: none;\\n  appearance: none;\\n}\\n\\n#todo-progress::-webkit-progress-bar {\\n  background-color: #efefef;\\n}\\n\\n#todo-progress::-webkit-progress-value {\\n  background: linear-gradient(135deg, #c9ffbf, #ffafbd);\\n  animation: progress-bar 1s ease-out infinite;\\n  transition: all 0.4s;\\n}\\n\\n@keyframes progress-bar {\\n  0% {\\n    box-shadow: 0 0 1px #007aff;\\n  }\\n  50% {\\n    box-shadow: 0 0 2px #007aff;\\n  }\\n  100% {\\n    box-shadow: 0 0 1px #007aff;\\n  }\\n}\\n\\n.flip-list-move {\\n  transition: transform 0.5s;\\n}\\n\\n.no-move {\\n  transition: transform 0s;\\n}\\n\\n.ghost {\\n  opacity: 0.5;\\n  background: #c8ebfb;\\n}\\n\\n.list-group {\\n  min-height: 20px;\\n}\\n\\n.list-group-item {\\n  cursor: move;\\n}\\n\\n.list-group-item i {\\n  cursor: pointer;\\n}\"},\"$:/plugins/oeyoews/neotw-vue-todo/todo.vue\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/todo.vue\",\"text\":\"<template>\\n  <!-- NOTE: vue.config.js 出现在 tabs 里面, vscode 就不会有报错了 -->\\n  <h2>\\n    {{ t('todo.title') }}\\n  </h2>\\n\\n  <!-- add todo bar -->\\n  <form\\n    @submit.prevent=\\\"addTodo\\\"\\n    class=\\\"flex rounded border-solid border-gray-300 dark:border-gray-500\\\"\\n  >\\n    <input\\n      v-model.trim=\\\"newTodo\\\"\\n      :placeholder=\\\"t('todo.placeholder', { msg: 'placeholder' })\\\"\\n      class=\\\"w-full my-2 border-none\\\"\\n      required=\\\"\\\"\\n      :autofocus=\\\"'autofocus'\\\"\\n    />\\n\\n    <button class=\\\"w-1/4 md:w-1/12 mr-1\\\">\\n      {{ t('todo.add', { msg: 'add' }) }}\\n    </button>\\n  </form>\\n\\n  <!-- progress -->\\n  <div\\n    class=\\\"flex gap-2 items-center my-2 justify-between text-gray-400 text-sm mx-8 mt-4\\\"\\n    v-if=\\\"todos.length > 0\\\"\\n  >\\n    <div>{{ done }}/{{ todos.length }}</div>\\n    <progress :value=\\\"done\\\" :max=\\\"todos.length\\\" id=\\\"todo-progress\\\"></progress>\\n    <div>\\n      {{ progress }}\\n    </div>\\n  </div>\\n\\n  <!-- task list -->\\n  <draggable\\n    :component-data=\\\"{\\n      tag: 'ul',\\n      type: 'transition-group',\\n      class: 'list-none my-4 hover:cursor-move',\\n      name: !drag ? 'flip-list' : null\\n    }\\\"\\n    v-model=\\\"todos\\\"\\n    v-bind=\\\"dragOptions\\\"\\n    @start=\\\"drag = true\\\"\\n    @end=\\\"drag = false\\\"\\n    item-key=\\\"id\\\"\\n  >\\n    <template #item=\\\"{ element }\\\">\\n      <div class=\\\"flex justify-between items-center group\\\" :key=\\\"element.id\\\">\\n        <li\\n          class=\\\"truncate\\\"\\n          @dblclick=\\\"startEdit(element, element.id)\\\"\\n          v-show=\\\"editingIndex !== element.id\\\"\\n        >\\n          <input\\n            type=\\\"checkbox\\\"\\n            v-model=\\\"element.done\\\"\\n            class=\\\"mr-2 cursor-pointer\\\"\\n          />\\n          <label\\n            :for=\\\"element.id\\\"\\n            :class=\\\"{\\n              ['line-through']: element.done,\\n              'text-gray-400': element.done\\n            }\\\"\\n            >{{ element.text }}</label\\n          >\\n        </li>\\n        <li v-show=\\\"editingIndex === element.id\\\" class=\\\"w-full\\\">\\n          <input\\n            v-model=\\\"editingText\\\"\\n            @keyup.enter=\\\"finishEdit(element.id)\\\"\\n            @blur=\\\"cancelEdit(element.id)\\\"\\n            class=\\\"w-full\\\"\\n          />\\n          <div class=\\\"mt-1\\\">\\n            <button @click=\\\"cancelEdit(element.id)\\\">\\n              {{ t('todo.cancel') }}\\n            </button>\\n            <button @click=\\\"finishEdit(element.id)\\\">\\n              {{ t('todo.save') }}\\n            </button>\\n          </div>\\n        </li>\\n        <div\\n          v-show=\\\"element.date && editingIndex !== element.id\\\"\\n          class=\\\"text-gray-400 text-sm mx-2\\\"\\n        >\\n          {{ element.date }}\\n          <button\\n            @click=\\\"removeTodo(index)\\\"\\n            :title=\\\"t('todo.removeTooltip', { msg: 'removeTooltip' })\\\"\\n            class=\\\"p-1 hover:text-red-400 rounded-full ml-2 size-8 opacity-0 group-hover:opacity-100 transition-all\\\"\\n          >\\n            ✕\\n          </button>\\n        </div>\\n      </div>\\n    </template>\\n  </draggable>\\n\\n  <button\\n    @click=\\\"resetTodos\\\"\\n    class=\\\"!p-1 border-solid border-gray-300 dark:border-gray-500 my-2 mx-2\\\"\\n    v-show=\\\"todos.length\\\"\\n  >\\n    {{ t('todo.resetTodos') }}\\n  </button>\\n\\n  <!--\\n  <transition>\\n    <button\\n      @click=\\\"hideCompleted = !hideCompleted\\\"\\n      class=\\\"!p-1 border-solid border-gray-300 dark:border-gray-500 my-2 mx-2\\\"\\n      v-show=\\\"undone && undone !== todos.length\\\"\\n    >\\n      {{ hideCompleted ? t('todo.showtodo') : t('todo.hidedone') }}\\n    </button>\\n  </transition>\\n-->\\n\\n  <h2>{{ t('todo.setup') }}</h2>\\n\\n  <!-- lang -->\\n  <select v-model=\\\"$i18n.locale\\\" @click=\\\"toggleLang\\\" class=\\\"rounded p-1\\\">\\n    <option\\n      v-for=\\\"locale in $i18n.availableLocales\\\"\\n      :key=\\\"`locale-${locale}`\\\"\\n      :value=\\\"locale\\\"\\n    >\\n      {{ locale }}\\n    </option>\\n  </select>\\n</template>\\n\",\"type\":\".vue\",\"hide-body\":\"yes\"},\"$:/plugins/oeyoews/neotw-vue-todo/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-vue-todo/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-vue-todo/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-vue-todo widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports[\\\"vue-todo\\\"]=class extends e{constructor(e,r){super(e,r)}render(e,r){if(!$tw.browser)return;if(this.computeAttributes(),this.execute(),this.document.isTiddlyWikiFakeDom)return;const o=(0,$tw.utils.domMaker)(\\\"div\\\",{}),t=\\\"$:/plugins/oeyoews/neotw-vue3/vue.global.prod.js\\\",s=new $tw.utils.Logger(\\\"neotw-vue-todo\\\");if(window.Vue||(window.Vue=require(t)),!window.Vue)\\n// if (!$tw.modules.titles[vuelib]) {\\nreturn void s.alert(`${t} is missing, Please install neotw-vue plugin by @oeyoews`);const n=require(\\\"vue-i18n.global.prod.js\\\");window.VueI18n=n;const i=require(\\\"vue3-toastify.js\\\"),{createApp:u}=window.Vue,{json:l}=this.attributes,a=require(\\\"./component.js\\\"),c=require(\\\"$:/plugins/oeyoews/vue-dragable/vue-dragable.js\\\");try{const t=u(a(l)),s={setup:()=>({version:\\\"321\\\"}),template:\\\"<div>{{ version}}</div>\\\"};t.component(\\\"draggable\\\",c),t.component(\\\"Vueversion\\\",s),t.use(i);const d=require(\\\"./i18n/en\\\"),g=require(\\\"./i18n/cn\\\"),w=require(\\\"./i18n/ja\\\"),v={English:d,\\\"中文\\\":g,\\\"日本語\\\":w,\\\"Français\\\":require(\\\"./i18n/fr\\\"),\\\"Русский\\\":require(\\\"./i18n/ru\\\")};let p=localStorage.getItem(\\\"lang\\\");p||(p=\\\"English\\\",localStorage.setItem(\\\"lang\\\",p));const m=n.createI18n({legacy:!1,locale:p,fallbackLocale:\\\"English\\\",messages:v});t.use(m),t.config.errorHandler=e=>{const r=`[Vue3](${t.version}): `+e;console.error(r),o.textContent=r,o.style.color=\\\"red\\\"},t.mount(o),e.insertBefore(o,r),this.domNodes.push(o)}catch(e){console.error(e)}}refresh(){return!1}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}