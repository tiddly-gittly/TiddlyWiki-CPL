[
    {
        "type": "application/json",
        "tags": "$:/tags/PluginWiki",
        "cpl.readme": "|!Version |{{$:/plugins/phiv/streams-fusion!!version}} |\n|!Build date |<$view tiddler=\"$:/plugins/phiv/streams-fusion\" field=\"modified\" format=\"date\" template=\"MMM DDth, YYYY\" /> |\n|!TW5 compatibility |{{$:/plugins/phiv/streams-fusion!!core-version}} |\n\n!! What is this?\n\n[[Streams-fusion|https://fastfreddy.gitlab.io/streams-fusion/]] is an addon to the [[Streams|https://saqimtiaz.github.io/streams/]] plugin that lets the user fuse (merge) and export a hierarchy of nodes from a stream, into a single tiddler's wikitext, raw html or markdown.\n\n!! Why would I want to do this?\n\nGreat question! You probably will not. Streams users like to edit their thoughts rapidly, jolt down ideas, leverage keyboard shortcuts extensively, and re-organize them using drag and drop features.\n\nOnce that process has taken place however, some users may wish to collapse the streams tiddlers down to a single \"regular\" tiddler, which may be easier to export, share with non-stream users, convert to another format, etc... It is worth pointing out the similarities with the experimental [[Streams-based list editor|https://saqimtiaz.github.io/sq-tw/single-tiddler-streams.html#test]] by Saq Imtiaz.\n\n!! Features\n\n* preserve the streams node hierarchy (maintains the tree structure)\n* supports the following list formats:\n** unordered lists (bullets)\n** numbered lists (pound signs)\n** regular paragraphs -> please note that choosing \"paragraphs\" flattens the hierarchy\n* supports the following output formats:\n** wikitext\n** raw HTML output (this is an export format, all wikitext - e.g. macros, widgets - is rendered first)\n** markdown (this is an export format, all wikitext - e.g. macros, widgets - is rendered first)\n* supports sub-tree (branches) exports (using the node context menu or the keyboard shortcuts)\n* exports the root node's text if it exists\n* wraps complex nodes inside `<div>` tags, supporting complex streams such as [[Stream's FAQ|https://saqimtiaz.github.io/streams/#FAQs]] and [[Stream's working with streams tiddlers|https://saqimtiaz.github.io/streams/#Working%20with%20streams%20tiddlers]] well (see Technical details below)\n** -> please note that choosing the \"paragraphs\" list format does not need to wrap complex nodes inside `<div>` tags\n\n!! Installation\n\n!!! Dependencies:\n\nFirst install the two prerequisite plugins (visit the page and follow the installation instructions):\n\n* the [[Streams plugin|https://saqimtiaz.github.io/streams/]] (''v1.2.22'' or greater)\n** ''the recommended way to install Streams is to add the [[SQ plugin library|https://saqimtiaz.github.io/SQPL/]], and then add the plugin through the [[Control Panel|$:/core/ui/ControlPanel/Plugins]]''.\n* the [[relink plugin|https://flibbles.github.io/tw5-relink/]].\n* (optional) the [[official Markdown plugin for TiddlyWiki|https://tiddlywiki.com/plugins/tiddlywiki/markdown/#%24%3A%2Fplugins%2Ftiddlywiki%2Fmarkdown]] can be installed. This will be useful to render new markdown tiddlers correctly, when choosing the \"markdown\" output format.\n\n!!! Installation steps:\n\n* install the [[streams-fusion|$:/plugins/phiv/streams-fusion]] plugin\n** ''the recommended way to install streams-fusion is to add through the [[SQ plugin library|https://saqimtiaz.github.io/SQPL/]], using the [[Control Panel|$:/core/ui/ControlPanel/Plugins]]''\n* starting with version 0.0.9, the plugin includes a javascript-based markdown conversion component. As a result, the ~TiddlyWiki notebook must be saved and reloaded\n\n!! Usage\n\n* to fuse a complete stream, use the the button at the bottom of the tiddler, next to the `add node` button.\n** [img[$:/plugins/phiv/streams-fusion/button.png]]\n* to fuse a portion of a stream, use the context menu of the top-most node or the keyboard shortcuts when editing a node\n** [img[$:/plugins/phiv/streams-fusion/context-menu.png]]\n* Streams Fusion configuration settings can be viewed or changed at the bottom of the `Streams settings` configuration page, accessible through the Control Panel\n\n\n!! Technical details\n\n* The general case for Streams fusion is non-trivial; Streams nodes ''are'' full tiddlers and thus can include rich content (lists, tables, multi-line, headings, etc.). wikitext list items ''are not'', fundamentally. As a result, some node tiddler content cannot be retained, unchanged, during the conversion if one aims to preserve the hierarchy intact.\n* This plugin favours visual and hierarchical accuracy of the combined tiddler (except for the paragraphs list format), once rendered, over the accuracy of the wikitext from exported node tiddlers. This means that HTML artefacts are introduced when the node content would break down the lists or numbered lists, for example when nodes contain multi line text. In edit mode, these complex nodes will show `<div>` tags.  Jan's [[Streams-to-text addon|https://szen.io/stream/]] does a better job at preserving original wikitext, at the expense of the tree structure and the rendering of complex node tiddlers. It can be considered to \"flatten\" the tree.\n* Nodes that include locally-relevant macro code, or transclusions of local fields/tags will not fuse well, generally. The context of the tiddler changes after fusion, and wikitext code that relies on the context will likely not behave as expected. For example, the title of a node tiddler will change, once merged into a single tiddler (either into new name, or the name of the root tiddler). Stream nodes fields are not be preserved in the fusion.\n* The approach of using the [[space-space-newline plugin|https://wikilabs.github.io/editions/space-space-newline/]] and replacing newlines within node tiddlers with space-space-newlines within list items, instead of wrapping in `<div>` tags was explored, but results were unsatisfactory: for example, block rules such as headings work well in a node tiddler but were not processed when in a list item.\n\n\n!! Roadmap\n\n* extract the markdown conversion into a standalone plugin that can be used without Streams\n* investigate markdown conversion anomalies (e.g. `<code>`)\n\n!! Credits\n\n* Jeremy and the developer community for [[TiddlyWiki|https://tiddlywiki.com]]; for the enduring resolve to maintain this superb note-taking tool.\n* Saq Imtiaz for the revolutionary [[Streams|https://saqimtiaz.github.io/streams/]] plugin, taking [[TiddlyWiki|https://tiddlywiki.com]] to new heights, and his overall community involvement.\n* Jan's [[Streams-to-text addon|https://szen.io/stream/]] for the css styles and the inspiration how to approach the merging of Streams tiddlers. \n* https://www.freepik.com/ for the streams-fusion icon. Jan's icon is still nicer, but he claimed it first.\n* The [[relink plugin|https://flibbles.github.io/tw5-relink/]] for a set of features we now can't live without.\n* The [[Tinka plugin packager|https://tinkaplugin.github.io]]; Streams-fusion was packaged without a node.js ~TiddlyWiki server.\n* The [[Turndown library|https://github.com/mixmark-io/turndown]] for markdown conversion, and the [[Typewriter plugin|https://saqimtiaz.github.io/sq-tw/typewriter.html]] to understand how to integrate it into ~TiddlyWiki.",
        "cpl.uri": "https://saqimtiaz.github.io/SQPL/library/recipes/library/tiddlers/%2524%253A%252Fplugins%252Fphiv%252Fstreams-fusion.json",
        "cpl.title": "$:/plugins/phiv/streams-fusion",
        "cpl.author": "Fred D",
        "cpl.name": "Streams Fusion",
        "cpl.description": "Streams-fusion - a streams addon to merge streams tiddlers ",
        "cpl.plugin-type": "plugin",
        "cpl.source": "https://fastfreddy.gitlab.io/streams-fusion/",
        "cpl.dependents": "$:/plugins/sq/streams $:/plugins/flibbles/relink",
        "cpl.core-version": ">=5.1.23",
        "title": "Plugin_202203305705017"
    }
]